(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();/**
* @vue/shared v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Zl(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Xt={},Ra=[],Kr=()=>{},t2=()=>!1,o0=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Jl=e=>e.startsWith("onUpdate:"),vn=Object.assign,ec=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},n2=Object.prototype.hasOwnProperty,Lt=(e,t)=>n2.call(e,t),wt=Array.isArray,Ma=e=>l0(e)==="[object Map]",V1=e=>l0(e)==="[object Set]",Et=e=>typeof e=="function",cn=e=>typeof e=="string",Os=e=>typeof e=="symbol",Wt=e=>e!==null&&typeof e=="object",H1=e=>(Wt(e)||Et(e))&&Et(e.then)&&Et(e.catch),D1=Object.prototype.toString,l0=e=>D1.call(e),r2=e=>l0(e).slice(8,-1),j1=e=>l0(e)==="[object Object]",tc=e=>cn(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,fi=Zl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),c0=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},s2=/-(\w)/g,Bs=c0(e=>e.replace(s2,(t,n)=>n?n.toUpperCase():"")),a2=/\B([A-Z])/g,aa=c0(e=>e.replace(a2,"-$1").toLowerCase()),X1=c0(e=>e.charAt(0).toUpperCase()+e.slice(1)),X0=c0(e=>e?`on${X1(e)}`:""),Ms=(e,t)=>!Object.is(e,t),q0=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},q1=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},i2=e=>{const t=parseFloat(e);return isNaN(t)?e:t},o2=e=>{const t=cn(e)?Number(e):NaN;return isNaN(t)?e:t};let au;const u0=()=>au||(au=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function nc(e){if(wt(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=cn(r)?f2(r):nc(r);if(s)for(const a in s)t[a]=s[a]}return t}else if(cn(e)||Wt(e))return e}const l2=/;(?![^(]*\))/g,c2=/:([^]+)/,u2=/\/\*[^]*?\*\//g;function f2(e){const t={};return e.replace(u2,"").split(l2).forEach(n=>{if(n){const r=n.split(c2);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function rc(e){let t="";if(cn(e))t=e;else if(wt(e))for(let n=0;n<e.length;n++){const r=rc(e[n]);r&&(t+=r+" ")}else if(Wt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const h2="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",d2=Zl(h2);function U1(e){return!!e||e===""}const Y1=e=>!!(e&&e.__v_isRef===!0),yl=e=>cn(e)?e:e==null?"":wt(e)||Wt(e)&&(e.toString===D1||!Et(e.toString))?Y1(e)?yl(e.value):JSON.stringify(e,K1,2):String(e),K1=(e,t)=>Y1(t)?K1(e,t.value):Ma(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],a)=>(n[U0(r,a)+" =>"]=s,n),{})}:V1(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>U0(n))}:Os(t)?U0(t):Wt(t)&&!wt(t)&&!j1(t)?String(t):t,U0=(e,t="")=>{var n;return Os(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Hn;class W1{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Hn,!t&&Hn&&(this.index=(Hn.scopes||(Hn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Hn;try{return Hn=this,t()}finally{Hn=n}}}on(){Hn=this}off(){Hn=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function G1(e){return new W1(e)}function z1(){return Hn}function _2(e,t=!1){Hn&&Hn.cleanups.push(e)}let Ut;const Y0=new WeakSet;class Q1{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Hn&&Hn.active&&Hn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Y0.has(this)&&(Y0.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||J1(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,iu(this),ef(this);const t=Ut,n=Br;Ut=this,Br=!0;try{return this.fn()}finally{tf(this),Ut=t,Br=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ic(t);this.deps=this.depsTail=void 0,iu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Y0.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){wl(this)&&this.run()}get dirty(){return wl(this)}}let Z1=0,hi,di;function J1(e,t=!1){if(e.flags|=8,t){e.next=di,di=e;return}e.next=hi,hi=e}function sc(){Z1++}function ac(){if(--Z1>0)return;if(di){let t=di;for(di=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;hi;){let t=hi;for(hi=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function ef(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function tf(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),ic(r),m2(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function wl(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(nf(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function nf(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ai))return;e.globalVersion=Ai;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!wl(e)){e.flags&=-3;return}const n=Ut,r=Br;Ut=e,Br=!0;try{ef(e);const s=e.fn(e._value);(t.version===0||Ms(s,e._value))&&(e._value=s,t.version++)}catch(s){throw t.version++,s}finally{Ut=n,Br=r,tf(e),e.flags&=-3}}function ic(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)ic(a,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function m2(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Br=!0;const rf=[];function Ps(){rf.push(Br),Br=!1}function ks(){const e=rf.pop();Br=e===void 0?!0:e}function iu(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Ut;Ut=void 0;try{t()}finally{Ut=n}}}let Ai=0;class v2{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class oc{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Ut||!Br||Ut===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ut)n=this.activeLink=new v2(Ut,this),Ut.deps?(n.prevDep=Ut.depsTail,Ut.depsTail.nextDep=n,Ut.depsTail=n):Ut.deps=Ut.depsTail=n,sf(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ut.depsTail,n.nextDep=void 0,Ut.depsTail.nextDep=n,Ut.depsTail=n,Ut.deps===n&&(Ut.deps=r)}return n}trigger(t){this.version++,Ai++,this.notify(t)}notify(t){sc();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ac()}}}function sf(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)sf(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const wo=new WeakMap,ea=Symbol(""),Sl=Symbol(""),Ei=Symbol("");function kn(e,t,n){if(Br&&Ut){let r=wo.get(e);r||wo.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new oc),s.map=r,s.key=n),s.track()}}function is(e,t,n,r,s,a){const o=wo.get(e);if(!o){Ai++;return}const h=m=>{m&&m.trigger()};if(sc(),t==="clear")o.forEach(h);else{const m=wt(e),S=m&&tc(n);if(m&&n==="length"){const g=Number(r);o.forEach((b,C)=>{(C==="length"||C===Ei||!Os(C)&&C>=g)&&h(b)})}else switch((n!==void 0||o.has(void 0))&&h(o.get(n)),S&&h(o.get(Ei)),t){case"add":m?S&&h(o.get("length")):(h(o.get(ea)),Ma(e)&&h(o.get(Sl)));break;case"delete":m||(h(o.get(ea)),Ma(e)&&h(o.get(Sl)));break;case"set":Ma(e)&&h(o.get(ea));break}}ac()}function p2(e,t){const n=wo.get(e);return n&&n.get(t)}function da(e){const t=kt(e);return t===e?t:(kn(t,"iterate",Ei),pr(e)?t:t.map(Ln))}function f0(e){return kn(e=kt(e),"iterate",Ei),e}const b2={__proto__:null,[Symbol.iterator](){return K0(this,Symbol.iterator,Ln)},concat(...e){return da(this).concat(...e.map(t=>wt(t)?da(t):t))},entries(){return K0(this,"entries",e=>(e[1]=Ln(e[1]),e))},every(e,t){return es(this,"every",e,t,void 0,arguments)},filter(e,t){return es(this,"filter",e,t,n=>n.map(Ln),arguments)},find(e,t){return es(this,"find",e,t,Ln,arguments)},findIndex(e,t){return es(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return es(this,"findLast",e,t,Ln,arguments)},findLastIndex(e,t){return es(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return es(this,"forEach",e,t,void 0,arguments)},includes(...e){return W0(this,"includes",e)},indexOf(...e){return W0(this,"indexOf",e)},join(e){return da(this).join(e)},lastIndexOf(...e){return W0(this,"lastIndexOf",e)},map(e,t){return es(this,"map",e,t,void 0,arguments)},pop(){return za(this,"pop")},push(...e){return za(this,"push",e)},reduce(e,...t){return ou(this,"reduce",e,t)},reduceRight(e,...t){return ou(this,"reduceRight",e,t)},shift(){return za(this,"shift")},some(e,t){return es(this,"some",e,t,void 0,arguments)},splice(...e){return za(this,"splice",e)},toReversed(){return da(this).toReversed()},toSorted(e){return da(this).toSorted(e)},toSpliced(...e){return da(this).toSpliced(...e)},unshift(...e){return za(this,"unshift",e)},values(){return K0(this,"values",Ln)}};function K0(e,t,n){const r=f0(e),s=r[t]();return r!==e&&!pr(e)&&(s._next=s.next,s.next=()=>{const a=s._next();return a.value&&(a.value=n(a.value)),a}),s}const y2=Array.prototype;function es(e,t,n,r,s,a){const o=f0(e),h=o!==e&&!pr(e),m=o[t];if(m!==y2[t]){const b=m.apply(e,a);return h?Ln(b):b}let S=n;o!==e&&(h?S=function(b,C){return n.call(this,Ln(b),C,e)}:n.length>2&&(S=function(b,C){return n.call(this,b,C,e)}));const g=m.call(o,S,r);return h&&s?s(g):g}function ou(e,t,n,r){const s=f0(e);let a=n;return s!==e&&(pr(e)?n.length>3&&(a=function(o,h,m){return n.call(this,o,h,m,e)}):a=function(o,h,m){return n.call(this,o,Ln(h),m,e)}),s[t](a,...r)}function W0(e,t,n){const r=kt(e);kn(r,"iterate",Ei);const s=r[t](...n);return(s===-1||s===!1)&&uc(n[0])?(n[0]=kt(n[0]),r[t](...n)):s}function za(e,t,n=[]){Ps(),sc();const r=kt(e)[t].apply(e,n);return ac(),ks(),r}const w2=Zl("__proto__,__v_isRef,__isVue"),af=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Os));function S2(e){Os(e)||(e=String(e));const t=kt(this);return kn(t,"has",e),t.hasOwnProperty(e)}class of{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){const s=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return a;if(n==="__v_raw")return r===(s?a?I2:ff:a?uf:cf).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=wt(t);if(!s){let m;if(o&&(m=b2[n]))return m;if(n==="hasOwnProperty")return S2}const h=Reflect.get(t,n,on(t)?t:r);return(Os(n)?af.has(n):w2(n))||(s||kn(t,"get",n),a)?h:on(h)?o&&tc(n)?h:h.value:Wt(h)?s?df(h):Ls(h):h}}class lf extends of{constructor(t=!1){super(!1,t)}set(t,n,r,s){let a=t[n];if(!this._isShallow){const m=ra(a);if(!pr(r)&&!ra(r)&&(a=kt(a),r=kt(r)),!wt(t)&&on(a)&&!on(r))return m?!1:(a.value=r,!0)}const o=wt(t)&&tc(n)?Number(n)<t.length:Lt(t,n),h=Reflect.set(t,n,r,on(t)?t:s);return t===kt(s)&&(o?Ms(r,a)&&is(t,"set",n,r):is(t,"add",n,r)),h}deleteProperty(t,n){const r=Lt(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&is(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!Os(n)||!af.has(n))&&kn(t,"has",n),r}ownKeys(t){return kn(t,"iterate",wt(t)?"length":ea),Reflect.ownKeys(t)}}class g2 extends of{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const x2=new lf,A2=new g2,E2=new lf(!0);const gl=e=>e,Qi=e=>Reflect.getPrototypeOf(e);function R2(e,t,n){return function(...r){const s=this.__v_raw,a=kt(s),o=Ma(a),h=e==="entries"||e===Symbol.iterator&&o,m=e==="keys"&&o,S=s[e](...r),g=n?gl:t?xl:Ln;return!t&&kn(a,"iterate",m?Sl:ea),{next(){const{value:b,done:C}=S.next();return C?{value:b,done:C}:{value:h?[g(b[0]),g(b[1])]:g(b),done:C}},[Symbol.iterator](){return this}}}}function Zi(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function M2(e,t){const n={get(s){const a=this.__v_raw,o=kt(a),h=kt(s);e||(Ms(s,h)&&kn(o,"get",s),kn(o,"get",h));const{has:m}=Qi(o),S=t?gl:e?xl:Ln;if(m.call(o,s))return S(a.get(s));if(m.call(o,h))return S(a.get(h));a!==o&&a.get(s)},get size(){const s=this.__v_raw;return!e&&kn(kt(s),"iterate",ea),Reflect.get(s,"size",s)},has(s){const a=this.__v_raw,o=kt(a),h=kt(s);return e||(Ms(s,h)&&kn(o,"has",s),kn(o,"has",h)),s===h?a.has(s):a.has(s)||a.has(h)},forEach(s,a){const o=this,h=o.__v_raw,m=kt(h),S=t?gl:e?xl:Ln;return!e&&kn(m,"iterate",ea),h.forEach((g,b)=>s.call(a,S(g),S(b),o))}};return vn(n,e?{add:Zi("add"),set:Zi("set"),delete:Zi("delete"),clear:Zi("clear")}:{add(s){!t&&!pr(s)&&!ra(s)&&(s=kt(s));const a=kt(this);return Qi(a).has.call(a,s)||(a.add(s),is(a,"add",s,s)),this},set(s,a){!t&&!pr(a)&&!ra(a)&&(a=kt(a));const o=kt(this),{has:h,get:m}=Qi(o);let S=h.call(o,s);S||(s=kt(s),S=h.call(o,s));const g=m.call(o,s);return o.set(s,a),S?Ms(a,g)&&is(o,"set",s,a):is(o,"add",s,a),this},delete(s){const a=kt(this),{has:o,get:h}=Qi(a);let m=o.call(a,s);m||(s=kt(s),m=o.call(a,s)),h&&h.call(a,s);const S=a.delete(s);return m&&is(a,"delete",s,void 0),S},clear(){const s=kt(this),a=s.size!==0,o=s.clear();return a&&is(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=R2(s,e,t)}),n}function lc(e,t){const n=M2(e,t);return(r,s,a)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(Lt(n,s)&&s in r?n:r,s,a)}const T2={get:lc(!1,!1)},C2={get:lc(!1,!0)},B2={get:lc(!0,!1)};const cf=new WeakMap,uf=new WeakMap,ff=new WeakMap,I2=new WeakMap;function O2(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function P2(e){return e.__v_skip||!Object.isExtensible(e)?0:O2(r2(e))}function Ls(e){return ra(e)?e:cc(e,!1,x2,T2,cf)}function hf(e){return cc(e,!1,E2,C2,uf)}function df(e){return cc(e,!0,A2,B2,ff)}function cc(e,t,n,r,s){if(!Wt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=s.get(e);if(a)return a;const o=P2(e);if(o===0)return e;const h=new Proxy(e,o===2?r:n);return s.set(e,h),h}function Ts(e){return ra(e)?Ts(e.__v_raw):!!(e&&e.__v_isReactive)}function ra(e){return!!(e&&e.__v_isReadonly)}function pr(e){return!!(e&&e.__v_isShallow)}function uc(e){return e?!!e.__v_raw:!1}function kt(e){const t=e&&e.__v_raw;return t?kt(t):e}function fc(e){return!Lt(e,"__v_skip")&&Object.isExtensible(e)&&q1(e,"__v_skip",!0),e}const Ln=e=>Wt(e)?Ls(e):e,xl=e=>Wt(e)?df(e):e;function on(e){return e?e.__v_isRef===!0:!1}function Ft(e){return _f(e,!1)}function k2(e){return _f(e,!0)}function _f(e,t){return on(e)?e:new L2(e,t)}class L2{constructor(t,n){this.dep=new oc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:kt(t),this._value=n?t:Ln(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||pr(t)||ra(t);t=r?t:kt(t),Ms(t,n)&&(this._rawValue=t,this._value=r?t:Ln(t),this.dep.trigger())}}function us(e){return on(e)?e.value:e}const N2={get:(e,t,n)=>t==="__v_raw"?e:us(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return on(s)&&!on(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function mf(e){return Ts(e)?e:new Proxy(e,N2)}function F2(e){const t=wt(e)?new Array(e.length):{};for(const n in e)t[n]=V2(e,n);return t}class $2{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return p2(kt(this._object),this._key)}}function V2(e,t,n){const r=e[t];return on(r)?r:new $2(e,t,n)}class H2{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new oc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ai-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ut!==this)return J1(this,!0),!0}get value(){const t=this.dep.track();return nf(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function D2(e,t,n=!1){let r,s;return Et(e)?r=e:(r=e.get,s=e.set),new H2(r,s,n)}const Ji={},So=new WeakMap;let zs;function j2(e,t=!1,n=zs){if(n){let r=So.get(n);r||So.set(n,r=[]),r.push(e)}}function X2(e,t,n=Xt){const{immediate:r,deep:s,once:a,scheduler:o,augmentJob:h,call:m}=n,S=de=>s?de:pr(de)||s===!1||s===0?os(de,1):os(de);let g,b,C,V,ne=!1,J=!1;if(on(e)?(b=()=>e.value,ne=pr(e)):Ts(e)?(b=()=>S(e),ne=!0):wt(e)?(J=!0,ne=e.some(de=>Ts(de)||pr(de)),b=()=>e.map(de=>{if(on(de))return de.value;if(Ts(de))return S(de);if(Et(de))return m?m(de,2):de()})):Et(e)?t?b=m?()=>m(e,2):e:b=()=>{if(C){Ps();try{C()}finally{ks()}}const de=zs;zs=g;try{return m?m(e,3,[V]):e(V)}finally{zs=de}}:b=Kr,t&&s){const de=b,We=s===!0?1/0:s;b=()=>os(de(),We)}const pe=z1(),Ne=()=>{g.stop(),pe&&ec(pe.effects,g)};if(a&&t){const de=t;t=(...We)=>{de(...We),Ne()}}let K=J?new Array(e.length).fill(Ji):Ji;const Ce=de=>{if(!(!(g.flags&1)||!g.dirty&&!de))if(t){const We=g.run();if(s||ne||(J?We.some((Ve,He)=>Ms(Ve,K[He])):Ms(We,K))){C&&C();const Ve=zs;zs=g;try{const He=[We,K===Ji?void 0:J&&K[0]===Ji?[]:K,V];m?m(t,3,He):t(...He),K=We}finally{zs=Ve}}}else g.run()};return h&&h(Ce),g=new Q1(b),g.scheduler=o?()=>o(Ce,!1):Ce,V=de=>j2(de,!1,g),C=g.onStop=()=>{const de=So.get(g);if(de){if(m)m(de,4);else for(const We of de)We();So.delete(g)}},t?r?Ce(!0):K=g.run():o?o(Ce.bind(null,!0),!0):g.run(),Ne.pause=g.pause.bind(g),Ne.resume=g.resume.bind(g),Ne.stop=Ne,Ne}function os(e,t=1/0,n){if(t<=0||!Wt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,on(e))os(e.value,t,n);else if(wt(e))for(let r=0;r<e.length;r++)os(e[r],t,n);else if(V1(e)||Ma(e))e.forEach(r=>{os(r,t,n)});else if(j1(e)){for(const r in e)os(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&os(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Li(e,t,n,r){try{return r?e(...r):e()}catch(s){h0(s,t,n)}}function Ir(e,t,n,r){if(Et(e)){const s=Li(e,t,n,r);return s&&H1(s)&&s.catch(a=>{h0(a,t,n)}),s}if(wt(e)){const s=[];for(let a=0;a<e.length;a++)s.push(Ir(e[a],t,n,r));return s}}function h0(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Xt;if(t){let h=t.parent;const m=t.proxy,S=`https://vuejs.org/error-reference/#runtime-${n}`;for(;h;){const g=h.ec;if(g){for(let b=0;b<g.length;b++)if(g[b](e,m,S)===!1)return}h=h.parent}if(a){Ps(),Li(a,null,10,[e,m,S]),ks();return}}q2(e,n,s,r,o)}function q2(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const Dn=[];let Dr=-1;const Ta=[];let xs=null,wa=0;const vf=Promise.resolve();let go=null;function ls(e){const t=go||vf;return e?t.then(this?e.bind(this):e):t}function U2(e){let t=Dr+1,n=Dn.length;for(;t<n;){const r=t+n>>>1,s=Dn[r],a=Ri(s);a<e||a===e&&s.flags&2?t=r+1:n=r}return t}function hc(e){if(!(e.flags&1)){const t=Ri(e),n=Dn[Dn.length-1];!n||!(e.flags&2)&&t>=Ri(n)?Dn.push(e):Dn.splice(U2(t),0,e),e.flags|=1,pf()}}function pf(){go||(go=vf.then(yf))}function Y2(e){wt(e)?Ta.push(...e):xs&&e.id===-1?xs.splice(wa+1,0,e):e.flags&1||(Ta.push(e),e.flags|=1),pf()}function lu(e,t,n=Dr+1){for(;n<Dn.length;n++){const r=Dn[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;Dn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function bf(e){if(Ta.length){const t=[...new Set(Ta)].sort((n,r)=>Ri(n)-Ri(r));if(Ta.length=0,xs){xs.push(...t);return}for(xs=t,wa=0;wa<xs.length;wa++){const n=xs[wa];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}xs=null,wa=0}}const Ri=e=>e.id==null?e.flags&2?-1:1/0:e.id;function yf(e){try{for(Dr=0;Dr<Dn.length;Dr++){const t=Dn[Dr];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Li(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Dr<Dn.length;Dr++){const t=Dn[Dr];t&&(t.flags&=-2)}Dr=-1,Dn.length=0,bf(),go=null,(Dn.length||Ta.length)&&yf()}}let Qn=null,wf=null;function xo(e){const t=Qn;return Qn=e,wf=e&&e.type.__scopeId||null,t}function Mr(e,t=Qn,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&yu(-1);const a=xo(t);let o;try{o=e(...s)}finally{xo(a),r._d&&yu(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Sf(e,t){if(Qn===null)return e;const n=b0(Qn),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[a,o,h,m=Xt]=t[s];a&&(Et(a)&&(a={mounted:a,updated:a}),a.deep&&os(o),r.push({dir:a,instance:n,value:o,oldValue:void 0,arg:h,modifiers:m}))}return e}function Us(e,t,n,r){const s=e.dirs,a=t&&t.dirs;for(let o=0;o<s.length;o++){const h=s[o];a&&(h.oldValue=a[o].value);let m=h.dir[r];m&&(Ps(),Ir(m,n,8,[e.el,h,e,t]),ks())}}const gf=Symbol("_vte"),xf=e=>e.__isTeleport,_i=e=>e&&(e.disabled||e.disabled===""),K2=e=>e&&(e.defer||e.defer===""),cu=e=>typeof SVGElement<"u"&&e instanceof SVGElement,uu=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Al=(e,t)=>{const n=e&&e.to;return cn(n)?t?t(n):null:n},W2={name:"Teleport",__isTeleport:!0,process(e,t,n,r,s,a,o,h,m,S){const{mc:g,pc:b,pbc:C,o:{insert:V,querySelector:ne,createText:J,createComment:pe}}=S,Ne=_i(t.props);let{shapeFlag:K,children:Ce,dynamicChildren:de}=t;if(e==null){const We=t.el=J(""),Ve=t.anchor=J("");V(We,n,r),V(Ve,n,r);const He=(Se,ze)=>{K&16&&(s&&s.isCE&&(s.ce._teleportTarget=Se),g(Ce,Se,ze,s,a,o,h,m))},Ge=()=>{const Se=t.target=Al(t.props,ne),ze=Ef(Se,t,J,V);Se&&(o!=="svg"&&cu(Se)?o="svg":o!=="mathml"&&uu(Se)&&(o="mathml"),Ne||(He(Se,ze),uo(t,!1)))};Ne&&(He(n,Ve),uo(t,!0)),K2(t.props)?Wn(Ge,a):Ge()}else{t.el=e.el,t.targetStart=e.targetStart;const We=t.anchor=e.anchor,Ve=t.target=e.target,He=t.targetAnchor=e.targetAnchor,Ge=_i(e.props),Se=Ge?n:Ve,ze=Ge?We:He;if(o==="svg"||cu(Ve)?o="svg":(o==="mathml"||uu(Ve))&&(o="mathml"),de?(C(e.dynamicChildren,de,Se,s,a,o,h),mc(e,t,!0)):m||b(e,t,Se,ze,s,a,o,h,!1),Ne)Ge?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):eo(t,n,We,S,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const nt=t.target=Al(t.props,ne);nt&&eo(t,nt,null,S,0)}else Ge&&eo(t,Ve,He,S,1);uo(t,Ne)}},remove(e,t,n,{um:r,o:{remove:s}},a){const{shapeFlag:o,children:h,anchor:m,targetStart:S,targetAnchor:g,target:b,props:C}=e;if(b&&(s(S),s(g)),a&&s(m),o&16){const V=a||!_i(C);for(let ne=0;ne<h.length;ne++){const J=h[ne];r(J,t,n,V,!!J.dynamicChildren)}}},move:eo,hydrate:G2};function eo(e,t,n,{o:{insert:r},m:s},a=2){a===0&&r(e.targetAnchor,t,n);const{el:o,anchor:h,shapeFlag:m,children:S,props:g}=e,b=a===2;if(b&&r(o,t,n),(!b||_i(g))&&m&16)for(let C=0;C<S.length;C++)s(S[C],t,n,2);b&&r(h,t,n)}function G2(e,t,n,r,s,a,{o:{nextSibling:o,parentNode:h,querySelector:m,insert:S,createText:g}},b){const C=t.target=Al(t.props,m);if(C){const V=_i(t.props),ne=C._lpa||C.firstChild;if(t.shapeFlag&16)if(V)t.anchor=b(o(e),t,h(e),n,r,s,a),t.targetStart=ne,t.targetAnchor=ne&&o(ne);else{t.anchor=o(e);let J=ne;for(;J;){if(J&&J.nodeType===8){if(J.data==="teleport start anchor")t.targetStart=J;else if(J.data==="teleport anchor"){t.targetAnchor=J,C._lpa=t.targetAnchor&&o(t.targetAnchor);break}}J=o(J)}t.targetAnchor||Ef(C,t,g,S),b(ne&&o(ne),t,C,n,r,s,a)}uo(t,V)}return t.anchor&&o(t.anchor)}const Af=W2;function uo(e,t){const n=e.ctx;if(n&&n.ut){let r,s;for(t?(r=e.el,s=e.anchor):(r=e.targetStart,s=e.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function Ef(e,t,n,r){const s=t.targetStart=n(""),a=t.targetAnchor=n("");return s[gf]=a,e&&(r(s,e),r(a,e)),a}const As=Symbol("_leaveCb"),to=Symbol("_enterCb");function z2(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ia(()=>{e.isMounted=!0}),Fi(()=>{e.isUnmounting=!0}),e}const mr=[Function,Array],Rf={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:mr,onEnter:mr,onAfterEnter:mr,onEnterCancelled:mr,onBeforeLeave:mr,onLeave:mr,onAfterLeave:mr,onLeaveCancelled:mr,onBeforeAppear:mr,onAppear:mr,onAfterAppear:mr,onAppearCancelled:mr},Mf=e=>{const t=e.subTree;return t.component?Mf(t.component):t},Q2={name:"BaseTransition",props:Rf,setup(e,{slots:t}){const n=oa(),r=z2();return()=>{const s=t.default&&Bf(t.default(),!0);if(!s||!s.length)return;const a=Tf(s),o=kt(e),{mode:h}=o;if(r.isLeaving)return G0(a);const m=fu(a);if(!m)return G0(a);let S=El(m,o,r,n,C=>S=C);m.type!==zn&&Mi(m,S);const g=n.subTree,b=g&&fu(g);if(b&&b.type!==zn&&!Qs(m,b)&&Mf(n).type!==zn){const C=El(b,o,r,n);if(Mi(b,C),h==="out-in"&&m.type!==zn)return r.isLeaving=!0,C.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete C.afterLeave},G0(a);h==="in-out"&&m.type!==zn&&(C.delayLeave=(V,ne,J)=>{const pe=Cf(r,b);pe[String(b.key)]=b,V[As]=()=>{ne(),V[As]=void 0,delete S.delayedLeave},S.delayedLeave=J})}return a}}};function Tf(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==zn){t=n;break}}return t}const Z2=Q2;function Cf(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function El(e,t,n,r,s){const{appear:a,mode:o,persisted:h=!1,onBeforeEnter:m,onEnter:S,onAfterEnter:g,onEnterCancelled:b,onBeforeLeave:C,onLeave:V,onAfterLeave:ne,onLeaveCancelled:J,onBeforeAppear:pe,onAppear:Ne,onAfterAppear:K,onAppearCancelled:Ce}=t,de=String(e.key),We=Cf(n,e),Ve=(Se,ze)=>{Se&&Ir(Se,r,9,ze)},He=(Se,ze)=>{const nt=ze[1];Ve(Se,ze),wt(Se)?Se.every(Je=>Je.length<=1)&&nt():Se.length<=1&&nt()},Ge={mode:o,persisted:h,beforeEnter(Se){let ze=m;if(!n.isMounted)if(a)ze=pe||m;else return;Se[As]&&Se[As](!0);const nt=We[de];nt&&Qs(e,nt)&&nt.el[As]&&nt.el[As](),Ve(ze,[Se])},enter(Se){let ze=S,nt=g,Je=b;if(!n.isMounted)if(a)ze=Ne||S,nt=K||g,Je=Ce||b;else return;let bt=!1;const _t=Se[to]=Xe=>{bt||(bt=!0,Xe?Ve(Je,[Se]):Ve(nt,[Se]),Ge.delayedLeave&&Ge.delayedLeave(),Se[to]=void 0)};ze?He(ze,[Se,_t]):_t()},leave(Se,ze){const nt=String(e.key);if(Se[to]&&Se[to](!0),n.isUnmounting)return ze();Ve(C,[Se]);let Je=!1;const bt=Se[As]=_t=>{Je||(Je=!0,ze(),_t?Ve(J,[Se]):Ve(ne,[Se]),Se[As]=void 0,We[nt]===e&&delete We[nt])};We[nt]=e,V?He(V,[Se,bt]):bt()},clone(Se){const ze=El(Se,t,n,r,s);return s&&s(ze),ze}};return Ge}function G0(e){if(d0(e))return e=Is(e),e.children=null,e}function fu(e){if(!d0(e))return xf(e.type)&&e.children?Tf(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Et(n.default))return n.default()}}function Mi(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Mi(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Bf(e,t=!1,n){let r=[],s=0;for(let a=0;a<e.length;a++){let o=e[a];const h=n==null?o.key:String(n)+String(o.key!=null?o.key:a);o.type===cr?(o.patchFlag&128&&s++,r=r.concat(Bf(o.children,t,h))):(t||o.type!==zn)&&r.push(h!=null?Is(o,{key:h}):o)}if(s>1)for(let a=0;a<r.length;a++)r[a].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Jn(e,t){return Et(e)?vn({name:e.name},t,{setup:e}):e}function If(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Rl(e,t,n,r,s=!1){if(wt(e)){e.forEach((ne,J)=>Rl(ne,t&&(wt(t)?t[J]:t),n,r,s));return}if(mi(r)&&!s)return;const a=r.shapeFlag&4?b0(r.component):r.el,o=s?null:a,{i:h,r:m}=e,S=t&&t.r,g=h.refs===Xt?h.refs={}:h.refs,b=h.setupState,C=kt(b),V=b===Xt?()=>!1:ne=>Lt(C,ne);if(S!=null&&S!==m&&(cn(S)?(g[S]=null,V(S)&&(b[S]=null)):on(S)&&(S.value=null)),Et(m))Li(m,h,12,[o,g]);else{const ne=cn(m),J=on(m);if(ne||J){const pe=()=>{if(e.f){const Ne=ne?V(m)?b[m]:g[m]:m.value;s?wt(Ne)&&ec(Ne,a):wt(Ne)?Ne.includes(a)||Ne.push(a):ne?(g[m]=[a],V(m)&&(b[m]=g[m])):(m.value=[a],e.k&&(g[e.k]=m.value))}else ne?(g[m]=o,V(m)&&(b[m]=o)):J&&(m.value=o,e.k&&(g[e.k]=o))};o?(pe.id=-1,Wn(pe,n)):pe()}}}u0().requestIdleCallback;u0().cancelIdleCallback;const mi=e=>!!e.type.__asyncLoader,d0=e=>e.type.__isKeepAlive;function _0(e,t){Of(e,"a",t)}function Ni(e,t){Of(e,"da",t)}function Of(e,t,n=Mn){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(m0(t,r,n),n){let s=n.parent;for(;s&&s.parent;)d0(s.parent.vnode)&&J2(r,t,n,s),s=s.parent}}function J2(e,t,n,r){const s=m0(t,e,r,!0);$i(()=>{ec(r[t],s)},n)}function m0(e,t,n=Mn,r=!1){if(n){const s=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...o)=>{Ps();const h=Vi(n),m=Ir(t,n,e,o);return h(),ks(),m});return r?s.unshift(a):s.push(a),a}}const hs=e=>(t,n=Mn)=>{(!Ci||e==="sp")&&m0(e,(...r)=>t(...r),n)},e3=hs("bm"),ia=hs("m"),t3=hs("bu"),n3=hs("u"),Fi=hs("bum"),$i=hs("um"),r3=hs("sp"),s3=hs("rtg"),a3=hs("rtc");function i3(e,t=Mn){m0("ec",e,t)}const o3=Symbol.for("v-ndc");function l3(e,t,n,r){let s;const a=n,o=wt(e);if(o||cn(e)){const h=o&&Ts(e);let m=!1;h&&(m=!pr(e),e=f0(e)),s=new Array(e.length);for(let S=0,g=e.length;S<g;S++)s[S]=t(m?Ln(e[S]):e[S],S,void 0,a)}else if(typeof e=="number"){s=new Array(e);for(let h=0;h<e;h++)s[h]=t(h+1,h,void 0,a)}else if(Wt(e))if(e[Symbol.iterator])s=Array.from(e,(h,m)=>t(h,m,void 0,a));else{const h=Object.keys(e);s=new Array(h.length);for(let m=0,S=h.length;m<S;m++){const g=h[m];s[m]=t(e[g],g,m,a)}}else s=[];return s}const Ml=e=>e?zf(e)?b0(e):Ml(e.parent):null,vi=vn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ml(e.parent),$root:e=>Ml(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>dc(e),$forceUpdate:e=>e.f||(e.f=()=>{hc(e.update)}),$nextTick:e=>e.n||(e.n=ls.bind(e.proxy)),$watch:e=>I3.bind(e)}),z0=(e,t)=>e!==Xt&&!e.__isScriptSetup&&Lt(e,t),c3={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:a,accessCache:o,type:h,appContext:m}=e;let S;if(t[0]!=="$"){const V=o[t];if(V!==void 0)switch(V){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return a[t]}else{if(z0(r,t))return o[t]=1,r[t];if(s!==Xt&&Lt(s,t))return o[t]=2,s[t];if((S=e.propsOptions[0])&&Lt(S,t))return o[t]=3,a[t];if(n!==Xt&&Lt(n,t))return o[t]=4,n[t];Tl&&(o[t]=0)}}const g=vi[t];let b,C;if(g)return t==="$attrs"&&kn(e.attrs,"get",""),g(e);if((b=h.__cssModules)&&(b=b[t]))return b;if(n!==Xt&&Lt(n,t))return o[t]=4,n[t];if(C=m.config.globalProperties,Lt(C,t))return C[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:a}=e;return z0(s,t)?(s[t]=n,!0):r!==Xt&&Lt(r,t)?(r[t]=n,!0):Lt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:a}},o){let h;return!!n[o]||e!==Xt&&Lt(e,o)||z0(t,o)||(h=a[0])&&Lt(h,o)||Lt(r,o)||Lt(vi,o)||Lt(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Lt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function hu(e){return wt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Tl=!0;function u3(e){const t=dc(e),n=e.proxy,r=e.ctx;Tl=!1,t.beforeCreate&&du(t.beforeCreate,e,"bc");const{data:s,computed:a,methods:o,watch:h,provide:m,inject:S,created:g,beforeMount:b,mounted:C,beforeUpdate:V,updated:ne,activated:J,deactivated:pe,beforeDestroy:Ne,beforeUnmount:K,destroyed:Ce,unmounted:de,render:We,renderTracked:Ve,renderTriggered:He,errorCaptured:Ge,serverPrefetch:Se,expose:ze,inheritAttrs:nt,components:Je,directives:bt,filters:_t}=t;if(S&&f3(S,r,null),o)for(const it in o){const At=o[it];Et(At)&&(r[it]=At.bind(n))}if(s){const it=s.call(n,n);Wt(it)&&(e.data=Ls(it))}if(Tl=!0,a)for(const it in a){const At=a[it],Cn=Et(At)?At.bind(n,n):Et(At.get)?At.get.bind(n,n):Kr,Fn=!Et(At)&&Et(At.set)?At.set.bind(n):Kr,Bn=tn({get:Cn,set:Fn});Object.defineProperty(r,it,{enumerable:!0,configurable:!0,get:()=>Bn.value,set:nn=>Bn.value=nn})}if(h)for(const it in h)Pf(h[it],r,n,it);if(m){const it=Et(m)?m.call(n):m;Reflect.ownKeys(it).forEach(At=>{na(At,it[At])})}g&&du(g,e,"c");function pt(it,At){wt(At)?At.forEach(Cn=>it(Cn.bind(n))):At&&it(At.bind(n))}if(pt(e3,b),pt(ia,C),pt(t3,V),pt(n3,ne),pt(_0,J),pt(Ni,pe),pt(i3,Ge),pt(a3,Ve),pt(s3,He),pt(Fi,K),pt($i,de),pt(r3,Se),wt(ze))if(ze.length){const it=e.exposed||(e.exposed={});ze.forEach(At=>{Object.defineProperty(it,At,{get:()=>n[At],set:Cn=>n[At]=Cn})})}else e.exposed||(e.exposed={});We&&e.render===Kr&&(e.render=We),nt!=null&&(e.inheritAttrs=nt),Je&&(e.components=Je),bt&&(e.directives=bt),Se&&If(e)}function f3(e,t,n=Kr){wt(e)&&(e=Cl(e));for(const r in e){const s=e[r];let a;Wt(s)?"default"in s?a=hr(s.from||r,s.default,!0):a=hr(s.from||r):a=hr(s),on(a)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):t[r]=a}}function du(e,t,n){Ir(wt(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Pf(e,t,n,r){let s=r.includes(".")?Uf(n,r):()=>n[r];if(cn(e)){const a=t[e];Et(a)&&Nn(s,a)}else if(Et(e))Nn(s,e.bind(n));else if(Wt(e))if(wt(e))e.forEach(a=>Pf(a,t,n,r));else{const a=Et(e.handler)?e.handler.bind(n):t[e.handler];Et(a)&&Nn(s,a,e)}}function dc(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:a,config:{optionMergeStrategies:o}}=e.appContext,h=a.get(t);let m;return h?m=h:!s.length&&!n&&!r?m=t:(m={},s.length&&s.forEach(S=>Ao(m,S,o,!0)),Ao(m,t,o)),Wt(t)&&a.set(t,m),m}function Ao(e,t,n,r=!1){const{mixins:s,extends:a}=t;a&&Ao(e,a,n,!0),s&&s.forEach(o=>Ao(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const h=h3[o]||n&&n[o];e[o]=h?h(e[o],t[o]):t[o]}return e}const h3={data:_u,props:mu,emits:mu,methods:si,computed:si,beforeCreate:Vn,created:Vn,beforeMount:Vn,mounted:Vn,beforeUpdate:Vn,updated:Vn,beforeDestroy:Vn,beforeUnmount:Vn,destroyed:Vn,unmounted:Vn,activated:Vn,deactivated:Vn,errorCaptured:Vn,serverPrefetch:Vn,components:si,directives:si,watch:_3,provide:_u,inject:d3};function _u(e,t){return t?e?function(){return vn(Et(e)?e.call(this,this):e,Et(t)?t.call(this,this):t)}:t:e}function d3(e,t){return si(Cl(e),Cl(t))}function Cl(e){if(wt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Vn(e,t){return e?[...new Set([].concat(e,t))]:t}function si(e,t){return e?vn(Object.create(null),e,t):t}function mu(e,t){return e?wt(e)&&wt(t)?[...new Set([...e,...t])]:vn(Object.create(null),hu(e),hu(t??{})):t}function _3(e,t){if(!e)return t;if(!t)return e;const n=vn(Object.create(null),e);for(const r in t)n[r]=Vn(e[r],t[r]);return n}function kf(){return{app:null,config:{isNativeTag:t2,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let m3=0;function v3(e,t){return function(r,s=null){Et(r)||(r=vn({},r)),s!=null&&!Wt(s)&&(s=null);const a=kf(),o=new WeakSet,h=[];let m=!1;const S=a.app={_uid:m3++,_component:r,_props:s,_container:null,_context:a,_instance:null,version:Q3,get config(){return a.config},set config(g){},use(g,...b){return o.has(g)||(g&&Et(g.install)?(o.add(g),g.install(S,...b)):Et(g)&&(o.add(g),g(S,...b))),S},mixin(g){return a.mixins.includes(g)||a.mixins.push(g),S},component(g,b){return b?(a.components[g]=b,S):a.components[g]},directive(g,b){return b?(a.directives[g]=b,S):a.directives[g]},mount(g,b,C){if(!m){const V=S._ceVNode||Ze(r,s);return V.appContext=a,C===!0?C="svg":C===!1&&(C=void 0),b&&t?t(V,g):e(V,g,C),m=!0,S._container=g,g.__vue_app__=S,b0(V.component)}},onUnmount(g){h.push(g)},unmount(){m&&(Ir(h,S._instance,16),e(null,S._container),delete S._container.__vue_app__)},provide(g,b){return a.provides[g]=b,S},runWithContext(g){const b=ta;ta=S;try{return g()}finally{ta=b}}};return S}}let ta=null;function na(e,t){if(Mn){let n=Mn.provides;const r=Mn.parent&&Mn.parent.provides;r===n&&(n=Mn.provides=Object.create(r)),n[e]=t}}function hr(e,t,n=!1){const r=Mn||Qn;if(r||ta){const s=ta?ta._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&Et(t)?t.call(r&&r.proxy):t}}function p3(){return!!(Mn||Qn||ta)}const Lf={},Nf=()=>Object.create(Lf),Ff=e=>Object.getPrototypeOf(e)===Lf;function b3(e,t,n,r=!1){const s={},a=Nf();e.propsDefaults=Object.create(null),$f(e,t,s,a);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:hf(s):e.type.props?e.props=s:e.props=a,e.attrs=a}function y3(e,t,n,r){const{props:s,attrs:a,vnode:{patchFlag:o}}=e,h=kt(s),[m]=e.propsOptions;let S=!1;if((r||o>0)&&!(o&16)){if(o&8){const g=e.vnode.dynamicProps;for(let b=0;b<g.length;b++){let C=g[b];if(v0(e.emitsOptions,C))continue;const V=t[C];if(m)if(Lt(a,C))V!==a[C]&&(a[C]=V,S=!0);else{const ne=Bs(C);s[ne]=Bl(m,h,ne,V,e,!1)}else V!==a[C]&&(a[C]=V,S=!0)}}}else{$f(e,t,s,a)&&(S=!0);let g;for(const b in h)(!t||!Lt(t,b)&&((g=aa(b))===b||!Lt(t,g)))&&(m?n&&(n[b]!==void 0||n[g]!==void 0)&&(s[b]=Bl(m,h,b,void 0,e,!0)):delete s[b]);if(a!==h)for(const b in a)(!t||!Lt(t,b))&&(delete a[b],S=!0)}S&&is(e.attrs,"set","")}function $f(e,t,n,r){const[s,a]=e.propsOptions;let o=!1,h;if(t)for(let m in t){if(fi(m))continue;const S=t[m];let g;s&&Lt(s,g=Bs(m))?!a||!a.includes(g)?n[g]=S:(h||(h={}))[g]=S:v0(e.emitsOptions,m)||(!(m in r)||S!==r[m])&&(r[m]=S,o=!0)}if(a){const m=kt(n),S=h||Xt;for(let g=0;g<a.length;g++){const b=a[g];n[b]=Bl(s,m,b,S[b],e,!Lt(S,b))}}return o}function Bl(e,t,n,r,s,a){const o=e[n];if(o!=null){const h=Lt(o,"default");if(h&&r===void 0){const m=o.default;if(o.type!==Function&&!o.skipFactory&&Et(m)){const{propsDefaults:S}=s;if(n in S)r=S[n];else{const g=Vi(s);r=S[n]=m.call(null,t),g()}}else r=m;s.ce&&s.ce._setProp(n,r)}o[0]&&(a&&!h?r=!1:o[1]&&(r===""||r===aa(n))&&(r=!0))}return r}const w3=new WeakMap;function Vf(e,t,n=!1){const r=n?w3:t.propsCache,s=r.get(e);if(s)return s;const a=e.props,o={},h=[];let m=!1;if(!Et(e)){const g=b=>{m=!0;const[C,V]=Vf(b,t,!0);vn(o,C),V&&h.push(...V)};!n&&t.mixins.length&&t.mixins.forEach(g),e.extends&&g(e.extends),e.mixins&&e.mixins.forEach(g)}if(!a&&!m)return Wt(e)&&r.set(e,Ra),Ra;if(wt(a))for(let g=0;g<a.length;g++){const b=Bs(a[g]);vu(b)&&(o[b]=Xt)}else if(a)for(const g in a){const b=Bs(g);if(vu(b)){const C=a[g],V=o[b]=wt(C)||Et(C)?{type:C}:vn({},C),ne=V.type;let J=!1,pe=!0;if(wt(ne))for(let Ne=0;Ne<ne.length;++Ne){const K=ne[Ne],Ce=Et(K)&&K.name;if(Ce==="Boolean"){J=!0;break}else Ce==="String"&&(pe=!1)}else J=Et(ne)&&ne.name==="Boolean";V[0]=J,V[1]=pe,(J||Lt(V,"default"))&&h.push(b)}}const S=[o,h];return Wt(e)&&r.set(e,S),S}function vu(e){return e[0]!=="$"&&!fi(e)}const Hf=e=>e[0]==="_"||e==="$stable",_c=e=>wt(e)?e.map(Ur):[Ur(e)],S3=(e,t,n)=>{if(t._n)return t;const r=Mr((...s)=>_c(t(...s)),n);return r._c=!1,r},Df=(e,t,n)=>{const r=e._ctx;for(const s in e){if(Hf(s))continue;const a=e[s];if(Et(a))t[s]=S3(s,a,r);else if(a!=null){const o=_c(a);t[s]=()=>o}}},jf=(e,t)=>{const n=_c(t);e.slots.default=()=>n},Xf=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},g3=(e,t,n)=>{const r=e.slots=Nf();if(e.vnode.shapeFlag&32){const s=t._;s?(Xf(r,t,n),n&&q1(r,"_",s,!0)):Df(t,r)}else t&&jf(e,t)},x3=(e,t,n)=>{const{vnode:r,slots:s}=e;let a=!0,o=Xt;if(r.shapeFlag&32){const h=t._;h?n&&h===1?a=!1:Xf(s,t,n):(a=!t.$stable,Df(t,s)),o=t}else t&&(jf(e,t),o={default:1});if(a)for(const h in s)!Hf(h)&&o[h]==null&&delete s[h]},Wn=$3;function A3(e){return E3(e)}function E3(e,t){const n=u0();n.__VUE__=!0;const{insert:r,remove:s,patchProp:a,createElement:o,createText:h,createComment:m,setText:S,setElementText:g,parentNode:b,nextSibling:C,setScopeId:V=Kr,insertStaticContent:ne}=e,J=($,D,ie,Ae=null,le=null,Pe=null,et=void 0,je=null,Ke=!!D.dynamicChildren)=>{if($===D)return;$&&!Qs($,D)&&(Ae=W($),nn($,le,Pe,!0),$=null),D.patchFlag===-2&&(Ke=!1,D.dynamicChildren=null);const{type:Fe,ref:mt,shapeFlag:rt}=D;switch(Fe){case p0:pe($,D,ie,Ae);break;case zn:Ne($,D,ie,Ae);break;case J0:$==null&&K(D,ie,Ae,et);break;case cr:Je($,D,ie,Ae,le,Pe,et,je,Ke);break;default:rt&1?We($,D,ie,Ae,le,Pe,et,je,Ke):rt&6?bt($,D,ie,Ae,le,Pe,et,je,Ke):(rt&64||rt&128)&&Fe.process($,D,ie,Ae,le,Pe,et,je,Ke,Qe)}mt!=null&&le&&Rl(mt,$&&$.ref,Pe,D||$,!D)},pe=($,D,ie,Ae)=>{if($==null)r(D.el=h(D.children),ie,Ae);else{const le=D.el=$.el;D.children!==$.children&&S(le,D.children)}},Ne=($,D,ie,Ae)=>{$==null?r(D.el=m(D.children||""),ie,Ae):D.el=$.el},K=($,D,ie,Ae)=>{[$.el,$.anchor]=ne($.children,D,ie,Ae,$.el,$.anchor)},Ce=({el:$,anchor:D},ie,Ae)=>{let le;for(;$&&$!==D;)le=C($),r($,ie,Ae),$=le;r(D,ie,Ae)},de=({el:$,anchor:D})=>{let ie;for(;$&&$!==D;)ie=C($),s($),$=ie;s(D)},We=($,D,ie,Ae,le,Pe,et,je,Ke)=>{D.type==="svg"?et="svg":D.type==="math"&&(et="mathml"),$==null?Ve(D,ie,Ae,le,Pe,et,je,Ke):Se($,D,le,Pe,et,je,Ke)},Ve=($,D,ie,Ae,le,Pe,et,je)=>{let Ke,Fe;const{props:mt,shapeFlag:rt,transition:ot,dirs:St}=$;if(Ke=$.el=o($.type,Pe,mt&&mt.is,mt),rt&8?g(Ke,$.children):rt&16&&Ge($.children,Ke,null,Ae,le,Q0($,Pe),et,je),St&&Us($,null,Ae,"created"),He(Ke,$,$.scopeId,et,Ae),mt){for(const Vt in mt)Vt!=="value"&&!fi(Vt)&&a(Ke,Vt,null,mt[Vt],Pe,Ae);"value"in mt&&a(Ke,"value",null,mt.value,Pe),(Fe=mt.onVnodeBeforeMount)&&Vr(Fe,Ae,$)}St&&Us($,null,Ae,"beforeMount");const Rt=R3(le,ot);Rt&&ot.beforeEnter(Ke),r(Ke,D,ie),((Fe=mt&&mt.onVnodeMounted)||Rt||St)&&Wn(()=>{Fe&&Vr(Fe,Ae,$),Rt&&ot.enter(Ke),St&&Us($,null,Ae,"mounted")},le)},He=($,D,ie,Ae,le)=>{if(ie&&V($,ie),Ae)for(let Pe=0;Pe<Ae.length;Pe++)V($,Ae[Pe]);if(le){let Pe=le.subTree;if(D===Pe||Kf(Pe.type)&&(Pe.ssContent===D||Pe.ssFallback===D)){const et=le.vnode;He($,et,et.scopeId,et.slotScopeIds,le.parent)}}},Ge=($,D,ie,Ae,le,Pe,et,je,Ke=0)=>{for(let Fe=Ke;Fe<$.length;Fe++){const mt=$[Fe]=je?Es($[Fe]):Ur($[Fe]);J(null,mt,D,ie,Ae,le,Pe,et,je)}},Se=($,D,ie,Ae,le,Pe,et)=>{const je=D.el=$.el;let{patchFlag:Ke,dynamicChildren:Fe,dirs:mt}=D;Ke|=$.patchFlag&16;const rt=$.props||Xt,ot=D.props||Xt;let St;if(ie&&Ys(ie,!1),(St=ot.onVnodeBeforeUpdate)&&Vr(St,ie,D,$),mt&&Us(D,$,ie,"beforeUpdate"),ie&&Ys(ie,!0),(rt.innerHTML&&ot.innerHTML==null||rt.textContent&&ot.textContent==null)&&g(je,""),Fe?ze($.dynamicChildren,Fe,je,ie,Ae,Q0(D,le),Pe):et||At($,D,je,null,ie,Ae,Q0(D,le),Pe,!1),Ke>0){if(Ke&16)nt(je,rt,ot,ie,le);else if(Ke&2&&rt.class!==ot.class&&a(je,"class",null,ot.class,le),Ke&4&&a(je,"style",rt.style,ot.style,le),Ke&8){const Rt=D.dynamicProps;for(let Vt=0;Vt<Rt.length;Vt++){const It=Rt[Vt],In=rt[It],yn=ot[It];(yn!==In||It==="value")&&a(je,It,In,yn,le,ie)}}Ke&1&&$.children!==D.children&&g(je,D.children)}else!et&&Fe==null&&nt(je,rt,ot,ie,le);((St=ot.onVnodeUpdated)||mt)&&Wn(()=>{St&&Vr(St,ie,D,$),mt&&Us(D,$,ie,"updated")},Ae)},ze=($,D,ie,Ae,le,Pe,et)=>{for(let je=0;je<D.length;je++){const Ke=$[je],Fe=D[je],mt=Ke.el&&(Ke.type===cr||!Qs(Ke,Fe)||Ke.shapeFlag&70)?b(Ke.el):ie;J(Ke,Fe,mt,null,Ae,le,Pe,et,!0)}},nt=($,D,ie,Ae,le)=>{if(D!==ie){if(D!==Xt)for(const Pe in D)!fi(Pe)&&!(Pe in ie)&&a($,Pe,D[Pe],null,le,Ae);for(const Pe in ie){if(fi(Pe))continue;const et=ie[Pe],je=D[Pe];et!==je&&Pe!=="value"&&a($,Pe,je,et,le,Ae)}"value"in ie&&a($,"value",D.value,ie.value,le)}},Je=($,D,ie,Ae,le,Pe,et,je,Ke)=>{const Fe=D.el=$?$.el:h(""),mt=D.anchor=$?$.anchor:h("");let{patchFlag:rt,dynamicChildren:ot,slotScopeIds:St}=D;St&&(je=je?je.concat(St):St),$==null?(r(Fe,ie,Ae),r(mt,ie,Ae),Ge(D.children||[],ie,mt,le,Pe,et,je,Ke)):rt>0&&rt&64&&ot&&$.dynamicChildren?(ze($.dynamicChildren,ot,ie,le,Pe,et,je),(D.key!=null||le&&D===le.subTree)&&mc($,D,!0)):At($,D,ie,mt,le,Pe,et,je,Ke)},bt=($,D,ie,Ae,le,Pe,et,je,Ke)=>{D.slotScopeIds=je,$==null?D.shapeFlag&512?le.ctx.activate(D,ie,Ae,et,Ke):_t(D,ie,Ae,le,Pe,et,Ke):Xe($,D,Ke)},_t=($,D,ie,Ae,le,Pe,et)=>{const je=$.component=U3($,Ae,le);if(d0($)&&(je.ctx.renderer=Qe),Y3(je,!1,et),je.asyncDep){if(le&&le.registerDep(je,pt,et),!$.el){const Ke=je.subTree=Ze(zn);Ne(null,Ke,D,ie)}}else pt(je,$,D,ie,le,Pe,et)},Xe=($,D,ie)=>{const Ae=D.component=$.component;if(N3($,D,ie))if(Ae.asyncDep&&!Ae.asyncResolved){it(Ae,D,ie);return}else Ae.next=D,Ae.update();else D.el=$.el,Ae.vnode=D},pt=($,D,ie,Ae,le,Pe,et)=>{const je=()=>{if($.isMounted){let{next:rt,bu:ot,u:St,parent:Rt,vnode:Vt}=$;{const wn=qf($);if(wn){rt&&(rt.el=Vt.el,it($,rt,et)),wn.asyncDep.then(()=>{$.isUnmounted||je()});return}}let It=rt,In;Ys($,!1),rt?(rt.el=Vt.el,it($,rt,et)):rt=Vt,ot&&q0(ot),(In=rt.props&&rt.props.onVnodeBeforeUpdate)&&Vr(In,Rt,rt,Vt),Ys($,!0);const yn=Z0($),tr=$.subTree;$.subTree=yn,J(tr,yn,b(tr.el),W(tr),$,le,Pe),rt.el=yn.el,It===null&&F3($,yn.el),St&&Wn(St,le),(In=rt.props&&rt.props.onVnodeUpdated)&&Wn(()=>Vr(In,Rt,rt,Vt),le)}else{let rt;const{el:ot,props:St}=D,{bm:Rt,m:Vt,parent:It,root:In,type:yn}=$,tr=mi(D);if(Ys($,!1),Rt&&q0(Rt),!tr&&(rt=St&&St.onVnodeBeforeMount)&&Vr(rt,It,D),Ys($,!0),ot&&gt){const wn=()=>{$.subTree=Z0($),gt(ot,$.subTree,$,le,null)};tr&&yn.__asyncHydrate?yn.__asyncHydrate(ot,$,wn):wn()}else{In.ce&&In.ce._injectChildStyle(yn);const wn=$.subTree=Z0($);J(null,wn,ie,Ae,$,le,Pe),D.el=wn.el}if(Vt&&Wn(Vt,le),!tr&&(rt=St&&St.onVnodeMounted)){const wn=D;Wn(()=>Vr(rt,It,wn),le)}(D.shapeFlag&256||It&&mi(It.vnode)&&It.vnode.shapeFlag&256)&&$.a&&Wn($.a,le),$.isMounted=!0,D=ie=Ae=null}};$.scope.on();const Ke=$.effect=new Q1(je);$.scope.off();const Fe=$.update=Ke.run.bind(Ke),mt=$.job=Ke.runIfDirty.bind(Ke);mt.i=$,mt.id=$.uid,Ke.scheduler=()=>hc(mt),Ys($,!0),Fe()},it=($,D,ie)=>{D.component=$;const Ae=$.vnode.props;$.vnode=D,$.next=null,y3($,D.props,Ae,ie),x3($,D.children,ie),Ps(),lu($),ks()},At=($,D,ie,Ae,le,Pe,et,je,Ke=!1)=>{const Fe=$&&$.children,mt=$?$.shapeFlag:0,rt=D.children,{patchFlag:ot,shapeFlag:St}=D;if(ot>0){if(ot&128){Fn(Fe,rt,ie,Ae,le,Pe,et,je,Ke);return}else if(ot&256){Cn(Fe,rt,ie,Ae,le,Pe,et,je,Ke);return}}St&8?(mt&16&&An(Fe,le,Pe),rt!==Fe&&g(ie,rt)):mt&16?St&16?Fn(Fe,rt,ie,Ae,le,Pe,et,je,Ke):An(Fe,le,Pe,!0):(mt&8&&g(ie,""),St&16&&Ge(rt,ie,Ae,le,Pe,et,je,Ke))},Cn=($,D,ie,Ae,le,Pe,et,je,Ke)=>{$=$||Ra,D=D||Ra;const Fe=$.length,mt=D.length,rt=Math.min(Fe,mt);let ot;for(ot=0;ot<rt;ot++){const St=D[ot]=Ke?Es(D[ot]):Ur(D[ot]);J($[ot],St,ie,null,le,Pe,et,je,Ke)}Fe>mt?An($,le,Pe,!0,!1,rt):Ge(D,ie,Ae,le,Pe,et,je,Ke,rt)},Fn=($,D,ie,Ae,le,Pe,et,je,Ke)=>{let Fe=0;const mt=D.length;let rt=$.length-1,ot=mt-1;for(;Fe<=rt&&Fe<=ot;){const St=$[Fe],Rt=D[Fe]=Ke?Es(D[Fe]):Ur(D[Fe]);if(Qs(St,Rt))J(St,Rt,ie,null,le,Pe,et,je,Ke);else break;Fe++}for(;Fe<=rt&&Fe<=ot;){const St=$[rt],Rt=D[ot]=Ke?Es(D[ot]):Ur(D[ot]);if(Qs(St,Rt))J(St,Rt,ie,null,le,Pe,et,je,Ke);else break;rt--,ot--}if(Fe>rt){if(Fe<=ot){const St=ot+1,Rt=St<mt?D[St].el:Ae;for(;Fe<=ot;)J(null,D[Fe]=Ke?Es(D[Fe]):Ur(D[Fe]),ie,Rt,le,Pe,et,je,Ke),Fe++}}else if(Fe>ot)for(;Fe<=rt;)nn($[Fe],le,Pe,!0),Fe++;else{const St=Fe,Rt=Fe,Vt=new Map;for(Fe=Rt;Fe<=ot;Fe++){const Gt=D[Fe]=Ke?Es(D[Fe]):Ur(D[Fe]);Gt.key!=null&&Vt.set(Gt.key,Fe)}let It,In=0;const yn=ot-Rt+1;let tr=!1,wn=0;const kr=new Array(yn);for(Fe=0;Fe<yn;Fe++)kr[Fe]=0;for(Fe=St;Fe<=rt;Fe++){const Gt=$[Fe];if(In>=yn){nn(Gt,le,Pe,!0);continue}let jn;if(Gt.key!=null)jn=Vt.get(Gt.key);else for(It=Rt;It<=ot;It++)if(kr[It-Rt]===0&&Qs(Gt,D[It])){jn=It;break}jn===void 0?nn(Gt,le,Pe,!0):(kr[jn-Rt]=Fe+1,jn>=wn?wn=jn:tr=!0,J(Gt,D[jn],ie,null,le,Pe,et,je,Ke),In++)}const ji=tr?M3(kr):Ra;for(It=ji.length-1,Fe=yn-1;Fe>=0;Fe--){const Gt=Rt+Fe,jn=D[Gt],Xi=Gt+1<mt?D[Gt+1].el:Ae;kr[Fe]===0?J(null,jn,ie,Xi,le,Pe,et,je,Ke):tr&&(It<0||Fe!==ji[It]?Bn(jn,ie,Xi,2):It--)}}},Bn=($,D,ie,Ae,le=null)=>{const{el:Pe,type:et,transition:je,children:Ke,shapeFlag:Fe}=$;if(Fe&6){Bn($.component.subTree,D,ie,Ae);return}if(Fe&128){$.suspense.move(D,ie,Ae);return}if(Fe&64){et.move($,D,ie,Qe);return}if(et===cr){r(Pe,D,ie);for(let rt=0;rt<Ke.length;rt++)Bn(Ke[rt],D,ie,Ae);r($.anchor,D,ie);return}if(et===J0){Ce($,D,ie);return}if(Ae!==2&&Fe&1&&je)if(Ae===0)je.beforeEnter(Pe),r(Pe,D,ie),Wn(()=>je.enter(Pe),le);else{const{leave:rt,delayLeave:ot,afterLeave:St}=je,Rt=()=>r(Pe,D,ie),Vt=()=>{rt(Pe,()=>{Rt(),St&&St()})};ot?ot(Pe,Rt,Vt):Vt()}else r(Pe,D,ie)},nn=($,D,ie,Ae=!1,le=!1)=>{const{type:Pe,props:et,ref:je,children:Ke,dynamicChildren:Fe,shapeFlag:mt,patchFlag:rt,dirs:ot,cacheIndex:St}=$;if(rt===-2&&(le=!1),je!=null&&Rl(je,null,ie,$,!0),St!=null&&(D.renderCache[St]=void 0),mt&256){D.ctx.deactivate($);return}const Rt=mt&1&&ot,Vt=!mi($);let It;if(Vt&&(It=et&&et.onVnodeBeforeUnmount)&&Vr(It,D,$),mt&6)Gr($.component,ie,Ae);else{if(mt&128){$.suspense.unmount(ie,Ae);return}Rt&&Us($,null,D,"beforeUnmount"),mt&64?$.type.remove($,D,ie,Qe,Ae):Fe&&!Fe.hasOnce&&(Pe!==cr||rt>0&&rt&64)?An(Fe,D,ie,!1,!0):(Pe===cr&&rt&384||!le&&mt&16)&&An(Ke,D,ie),Ae&&vt($)}(Vt&&(It=et&&et.onVnodeUnmounted)||Rt)&&Wn(()=>{It&&Vr(It,D,$),Rt&&Us($,null,D,"unmounted")},ie)},vt=$=>{const{type:D,el:ie,anchor:Ae,transition:le}=$;if(D===cr){M(ie,Ae);return}if(D===J0){de($);return}const Pe=()=>{s(ie),le&&!le.persisted&&le.afterLeave&&le.afterLeave()};if($.shapeFlag&1&&le&&!le.persisted){const{leave:et,delayLeave:je}=le,Ke=()=>et(ie,Pe);je?je($.el,Pe,Ke):Ke()}else Pe()},M=($,D)=>{let ie;for(;$!==D;)ie=C($),s($),$=ie;s(D)},Gr=($,D,ie)=>{const{bum:Ae,scope:le,job:Pe,subTree:et,um:je,m:Ke,a:Fe}=$;pu(Ke),pu(Fe),Ae&&q0(Ae),le.stop(),Pe&&(Pe.flags|=8,nn(et,$,D,ie)),je&&Wn(je,D),Wn(()=>{$.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&$.asyncDep&&!$.asyncResolved&&$.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},An=($,D,ie,Ae=!1,le=!1,Pe=0)=>{for(let et=Pe;et<$.length;et++)nn($[et],D,ie,Ae,le)},W=$=>{if($.shapeFlag&6)return W($.component.subTree);if($.shapeFlag&128)return $.suspense.next();const D=C($.anchor||$.el),ie=D&&D[gf];return ie?C(ie):D};let Be=!1;const ge=($,D,ie)=>{$==null?D._vnode&&nn(D._vnode,null,null,!0):J(D._vnode||null,$,D,null,null,null,ie),D._vnode=$,Be||(Be=!0,lu(),bf(),Be=!1)},Qe={p:J,um:nn,m:Bn,r:vt,mt:_t,mc:Ge,pc:At,pbc:ze,n:W,o:e};let ht,gt;return{render:ge,hydrate:ht,createApp:v3(ge,ht)}}function Q0({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Ys({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function R3(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function mc(e,t,n=!1){const r=e.children,s=t.children;if(wt(r)&&wt(s))for(let a=0;a<r.length;a++){const o=r[a];let h=s[a];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=s[a]=Es(s[a]),h.el=o.el),!n&&h.patchFlag!==-2&&mc(o,h)),h.type===p0&&(h.el=o.el)}}function M3(e){const t=e.slice(),n=[0];let r,s,a,o,h;const m=e.length;for(r=0;r<m;r++){const S=e[r];if(S!==0){if(s=n[n.length-1],e[s]<S){t[r]=s,n.push(r);continue}for(a=0,o=n.length-1;a<o;)h=a+o>>1,e[n[h]]<S?a=h+1:o=h;S<e[n[a]]&&(a>0&&(t[r]=n[a-1]),n[a]=r)}}for(a=n.length,o=n[a-1];a-- >0;)n[a]=o,o=t[o];return n}function qf(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:qf(t)}function pu(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const T3=Symbol.for("v-scx"),C3=()=>hr(T3);function B3(e,t){return vc(e,null,t)}function Nn(e,t,n){return vc(e,t,n)}function vc(e,t,n=Xt){const{immediate:r,deep:s,flush:a,once:o}=n,h=vn({},n),m=t&&r||!t&&a!=="post";let S;if(Ci){if(a==="sync"){const V=C3();S=V.__watcherHandles||(V.__watcherHandles=[])}else if(!m){const V=()=>{};return V.stop=Kr,V.resume=Kr,V.pause=Kr,V}}const g=Mn;h.call=(V,ne,J)=>Ir(V,g,ne,J);let b=!1;a==="post"?h.scheduler=V=>{Wn(V,g&&g.suspense)}:a!=="sync"&&(b=!0,h.scheduler=(V,ne)=>{ne?V():hc(V)}),h.augmentJob=V=>{t&&(V.flags|=4),b&&(V.flags|=2,g&&(V.id=g.uid,V.i=g))};const C=X2(e,t,h);return Ci&&(S?S.push(C):m&&C()),C}function I3(e,t,n){const r=this.proxy,s=cn(e)?e.includes(".")?Uf(r,e):()=>r[e]:e.bind(r,r);let a;Et(t)?a=t:(a=t.handler,n=t);const o=Vi(this),h=vc(s,a.bind(r),n);return o(),h}function Uf(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const O3=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Bs(t)}Modifiers`]||e[`${aa(t)}Modifiers`];function P3(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Xt;let s=n;const a=t.startsWith("update:"),o=a&&O3(r,t.slice(7));o&&(o.trim&&(s=n.map(g=>cn(g)?g.trim():g)),o.number&&(s=n.map(i2)));let h,m=r[h=X0(t)]||r[h=X0(Bs(t))];!m&&a&&(m=r[h=X0(aa(t))]),m&&Ir(m,e,6,s);const S=r[h+"Once"];if(S){if(!e.emitted)e.emitted={};else if(e.emitted[h])return;e.emitted[h]=!0,Ir(S,e,6,s)}}function Yf(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const a=e.emits;let o={},h=!1;if(!Et(e)){const m=S=>{const g=Yf(S,t,!0);g&&(h=!0,vn(o,g))};!n&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}return!a&&!h?(Wt(e)&&r.set(e,null),null):(wt(a)?a.forEach(m=>o[m]=null):vn(o,a),Wt(e)&&r.set(e,o),o)}function v0(e,t){return!e||!o0(t)?!1:(t=t.slice(2).replace(/Once$/,""),Lt(e,t[0].toLowerCase()+t.slice(1))||Lt(e,aa(t))||Lt(e,t))}function Z0(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[a],slots:o,attrs:h,emit:m,render:S,renderCache:g,props:b,data:C,setupState:V,ctx:ne,inheritAttrs:J}=e,pe=xo(e);let Ne,K;try{if(n.shapeFlag&4){const de=s||r,We=de;Ne=Ur(S.call(We,de,g,b,V,C,ne)),K=h}else{const de=t;Ne=Ur(de.length>1?de(b,{attrs:h,slots:o,emit:m}):de(b,null)),K=t.props?h:k3(h)}}catch(de){pi.length=0,h0(de,e,1),Ne=Ze(zn)}let Ce=Ne;if(K&&J!==!1){const de=Object.keys(K),{shapeFlag:We}=Ce;de.length&&We&7&&(a&&de.some(Jl)&&(K=L3(K,a)),Ce=Is(Ce,K,!1,!0))}return n.dirs&&(Ce=Is(Ce,null,!1,!0),Ce.dirs=Ce.dirs?Ce.dirs.concat(n.dirs):n.dirs),n.transition&&Mi(Ce,n.transition),Ne=Ce,xo(pe),Ne}const k3=e=>{let t;for(const n in e)(n==="class"||n==="style"||o0(n))&&((t||(t={}))[n]=e[n]);return t},L3=(e,t)=>{const n={};for(const r in e)(!Jl(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function N3(e,t,n){const{props:r,children:s,component:a}=e,{props:o,children:h,patchFlag:m}=t,S=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&m>=0){if(m&1024)return!0;if(m&16)return r?bu(r,o,S):!!o;if(m&8){const g=t.dynamicProps;for(let b=0;b<g.length;b++){const C=g[b];if(o[C]!==r[C]&&!v0(S,C))return!0}}}else return(s||h)&&(!h||!h.$stable)?!0:r===o?!1:r?o?bu(r,o,S):!0:!!o;return!1}function bu(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const a=r[s];if(t[a]!==e[a]&&!v0(n,a))return!0}return!1}function F3({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Kf=e=>e.__isSuspense;function $3(e,t){t&&t.pendingBranch?wt(e)?t.effects.push(...e):t.effects.push(e):Y2(e)}const cr=Symbol.for("v-fgt"),p0=Symbol.for("v-txt"),zn=Symbol.for("v-cmt"),J0=Symbol.for("v-stc"),pi=[];let fr=null;function Er(e=!1){pi.push(fr=e?null:[])}function V3(){pi.pop(),fr=pi[pi.length-1]||null}let Ti=1;function yu(e){Ti+=e,e<0&&fr&&(fr.hasOnce=!0)}function Wf(e){return e.dynamicChildren=Ti>0?fr||Ra:null,V3(),Ti>0&&fr&&fr.push(e),e}function Qa(e,t,n,r,s,a){return Wf(Gn(e,t,n,r,s,a,!0))}function Ca(e,t,n,r,s){return Wf(Ze(e,t,n,r,s,!0))}function Eo(e){return e?e.__v_isVNode===!0:!1}function Qs(e,t){return e.type===t.type&&e.key===t.key}const Gf=({key:e})=>e??null,fo=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?cn(e)||on(e)||Et(e)?{i:Qn,r:e,k:t,f:!!n}:e:null);function Gn(e,t=null,n=null,r=0,s=null,a=e===cr?0:1,o=!1,h=!1){const m={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Gf(t),ref:t&&fo(t),scopeId:wf,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Qn};return h?(pc(m,n),a&128&&e.normalize(m)):n&&(m.shapeFlag|=cn(n)?8:16),Ti>0&&!o&&fr&&(m.patchFlag>0||a&6)&&m.patchFlag!==32&&fr.push(m),m}const Ze=H3;function H3(e,t=null,n=null,r=0,s=null,a=!1){if((!e||e===o3)&&(e=zn),Eo(e)){const h=Is(e,t,!0);return n&&pc(h,n),Ti>0&&!a&&fr&&(h.shapeFlag&6?fr[fr.indexOf(e)]=h:fr.push(h)),h.patchFlag=-2,h}if(z3(e)&&(e=e.__vccOpts),t){t=D3(t);let{class:h,style:m}=t;h&&!cn(h)&&(t.class=rc(h)),Wt(m)&&(uc(m)&&!wt(m)&&(m=vn({},m)),t.style=nc(m))}const o=cn(e)?1:Kf(e)?128:xf(e)?64:Wt(e)?4:Et(e)?2:0;return Gn(e,t,n,r,s,o,a,!0)}function D3(e){return e?uc(e)||Ff(e)?vn({},e):e:null}function Is(e,t,n=!1,r=!1){const{props:s,ref:a,patchFlag:o,children:h,transition:m}=e,S=t?Wr(s||{},t):s,g={__v_isVNode:!0,__v_skip:!0,type:e.type,props:S,key:S&&Gf(S),ref:t&&t.ref?n&&a?wt(a)?a.concat(fo(t)):[a,fo(t)]:fo(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:h,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==cr?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:m,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Is(e.ssContent),ssFallback:e.ssFallback&&Is(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return m&&r&&Mi(g,m.clone(g)),g}function jr(e=" ",t=0){return Ze(p0,null,e,t)}function j3(e="",t=!1){return t?(Er(),Ca(zn,null,e)):Ze(zn,null,e)}function Ur(e){return e==null||typeof e=="boolean"?Ze(zn):wt(e)?Ze(cr,null,e.slice()):Eo(e)?Es(e):Ze(p0,null,String(e))}function Es(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Is(e)}function pc(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(wt(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),pc(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!Ff(t)?t._ctx=Qn:s===3&&Qn&&(Qn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Et(t)?(t={default:t,_ctx:Qn},n=32):(t=String(t),r&64?(n=16,t=[jr(t)]):n=8);e.children=t,e.shapeFlag|=n}function Wr(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=rc([t.class,r.class]));else if(s==="style")t.style=nc([t.style,r.style]);else if(o0(s)){const a=t[s],o=r[s];o&&a!==o&&!(wt(a)&&a.includes(o))&&(t[s]=a?[].concat(a,o):o)}else s!==""&&(t[s]=r[s])}return t}function Vr(e,t,n,r=null){Ir(e,t,7,[n,r])}const X3=kf();let q3=0;function U3(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||X3,a={uid:q3++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new W1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Vf(r,s),emitsOptions:Yf(r,s),emit:null,emitted:null,propsDefaults:Xt,inheritAttrs:r.inheritAttrs,ctx:Xt,data:Xt,props:Xt,attrs:Xt,slots:Xt,refs:Xt,setupState:Xt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=P3.bind(null,a),e.ce&&e.ce(a),a}let Mn=null;const oa=()=>Mn||Qn;let Ro,Il;{const e=u0(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),a=>{s.length>1?s.forEach(o=>o(a)):s[0](a)}};Ro=t("__VUE_INSTANCE_SETTERS__",n=>Mn=n),Il=t("__VUE_SSR_SETTERS__",n=>Ci=n)}const Vi=e=>{const t=Mn;return Ro(e),e.scope.on(),()=>{e.scope.off(),Ro(t)}},wu=()=>{Mn&&Mn.scope.off(),Ro(null)};function zf(e){return e.vnode.shapeFlag&4}let Ci=!1;function Y3(e,t=!1,n=!1){t&&Il(t);const{props:r,children:s}=e.vnode,a=zf(e);b3(e,r,a,t),g3(e,s,n);const o=a?K3(e,t):void 0;return t&&Il(!1),o}function K3(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,c3);const{setup:r}=n;if(r){Ps();const s=e.setupContext=r.length>1?G3(e):null,a=Vi(e),o=Li(r,e,0,[e.props,s]),h=H1(o);if(ks(),a(),(h||e.sp)&&!mi(e)&&If(e),h){if(o.then(wu,wu),t)return o.then(m=>{Su(e,m,t)}).catch(m=>{h0(m,e,0)});e.asyncDep=o}else Su(e,o,t)}else Qf(e,t)}function Su(e,t,n){Et(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Wt(t)&&(e.setupState=mf(t)),Qf(e,n)}let gu;function Qf(e,t,n){const r=e.type;if(!e.render){if(!t&&gu&&!r.render){const s=r.template||dc(e).template;if(s){const{isCustomElement:a,compilerOptions:o}=e.appContext.config,{delimiters:h,compilerOptions:m}=r,S=vn(vn({isCustomElement:a,delimiters:h},o),m);r.render=gu(s,S)}}e.render=r.render||Kr}{const s=Vi(e);Ps();try{u3(e)}finally{ks(),s()}}}const W3={get(e,t){return kn(e,"get",""),e[t]}};function G3(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,W3),slots:e.slots,emit:e.emit,expose:t}}function b0(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(mf(fc(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in vi)return vi[n](e)},has(t,n){return n in t||n in vi}})):e.proxy}function z3(e){return Et(e)&&"__vccOpts"in e}const tn=(e,t)=>D2(e,t,Ci);function bc(e,t,n){const r=arguments.length;return r===2?Wt(t)&&!wt(t)?Eo(t)?Ze(e,null,[t]):Ze(e,t):Ze(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Eo(n)&&(n=[n]),Ze(e,t,n))}const Q3="3.5.12";/**
* @vue/runtime-dom v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ol;const xu=typeof window<"u"&&window.trustedTypes;if(xu)try{Ol=xu.createPolicy("vue",{createHTML:e=>e})}catch{}const Zf=Ol?e=>Ol.createHTML(e):e=>e,Z3="http://www.w3.org/2000/svg",J3="http://www.w3.org/1998/Math/MathML",as=typeof document<"u"?document:null,Au=as&&as.createElement("template"),em={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?as.createElementNS(Z3,e):t==="mathml"?as.createElementNS(J3,e):n?as.createElement(e,{is:n}):as.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>as.createTextNode(e),createComment:e=>as.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>as.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,a){const o=n?n.previousSibling:t.lastChild;if(s&&(s===a||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===a||!(s=s.nextSibling)););else{Au.innerHTML=Zf(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const h=Au.content;if(r==="svg"||r==="mathml"){const m=h.firstChild;for(;m.firstChild;)h.appendChild(m.firstChild);h.removeChild(m)}t.insertBefore(h,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},bs="transition",Za="animation",Bi=Symbol("_vtc"),Jf={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},tm=vn({},Rf,Jf),nm=e=>(e.displayName="Transition",e.props=tm,e),eh=nm((e,{slots:t})=>bc(Z2,rm(e),t)),Ks=(e,t=[])=>{wt(e)?e.forEach(n=>n(...t)):e&&e(...t)},Eu=e=>e?wt(e)?e.some(t=>t.length>1):e.length>1:!1;function rm(e){const t={};for(const Je in e)Je in Jf||(t[Je]=e[Je]);if(e.css===!1)return t;const{name:n="v",type:r,duration:s,enterFromClass:a=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:h=`${n}-enter-to`,appearFromClass:m=a,appearActiveClass:S=o,appearToClass:g=h,leaveFromClass:b=`${n}-leave-from`,leaveActiveClass:C=`${n}-leave-active`,leaveToClass:V=`${n}-leave-to`}=e,ne=sm(s),J=ne&&ne[0],pe=ne&&ne[1],{onBeforeEnter:Ne,onEnter:K,onEnterCancelled:Ce,onLeave:de,onLeaveCancelled:We,onBeforeAppear:Ve=Ne,onAppear:He=K,onAppearCancelled:Ge=Ce}=t,Se=(Je,bt,_t)=>{Ws(Je,bt?g:h),Ws(Je,bt?S:o),_t&&_t()},ze=(Je,bt)=>{Je._isLeaving=!1,Ws(Je,b),Ws(Je,V),Ws(Je,C),bt&&bt()},nt=Je=>(bt,_t)=>{const Xe=Je?He:K,pt=()=>Se(bt,Je,_t);Ks(Xe,[bt,pt]),Ru(()=>{Ws(bt,Je?m:a),ys(bt,Je?g:h),Eu(Xe)||Mu(bt,r,J,pt)})};return vn(t,{onBeforeEnter(Je){Ks(Ne,[Je]),ys(Je,a),ys(Je,o)},onBeforeAppear(Je){Ks(Ve,[Je]),ys(Je,m),ys(Je,S)},onEnter:nt(!1),onAppear:nt(!0),onLeave(Je,bt){Je._isLeaving=!0;const _t=()=>ze(Je,bt);ys(Je,b),ys(Je,C),om(),Ru(()=>{Je._isLeaving&&(Ws(Je,b),ys(Je,V),Eu(de)||Mu(Je,r,pe,_t))}),Ks(de,[Je,_t])},onEnterCancelled(Je){Se(Je,!1),Ks(Ce,[Je])},onAppearCancelled(Je){Se(Je,!0),Ks(Ge,[Je])},onLeaveCancelled(Je){ze(Je),Ks(We,[Je])}})}function sm(e){if(e==null)return null;if(Wt(e))return[el(e.enter),el(e.leave)];{const t=el(e);return[t,t]}}function el(e){return o2(e)}function ys(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Bi]||(e[Bi]=new Set)).add(t)}function Ws(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[Bi];n&&(n.delete(t),n.size||(e[Bi]=void 0))}function Ru(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let am=0;function Mu(e,t,n,r){const s=e._endId=++am,a=()=>{s===e._endId&&r()};if(n!=null)return setTimeout(a,n);const{type:o,timeout:h,propCount:m}=im(e,t);if(!o)return r();const S=o+"end";let g=0;const b=()=>{e.removeEventListener(S,C),a()},C=V=>{V.target===e&&++g>=m&&b()};setTimeout(()=>{g<m&&b()},h+1),e.addEventListener(S,C)}function im(e,t){const n=window.getComputedStyle(e),r=ne=>(n[ne]||"").split(", "),s=r(`${bs}Delay`),a=r(`${bs}Duration`),o=Tu(s,a),h=r(`${Za}Delay`),m=r(`${Za}Duration`),S=Tu(h,m);let g=null,b=0,C=0;t===bs?o>0&&(g=bs,b=o,C=a.length):t===Za?S>0&&(g=Za,b=S,C=m.length):(b=Math.max(o,S),g=b>0?o>S?bs:Za:null,C=g?g===bs?a.length:m.length:0);const V=g===bs&&/\b(transform|all)(,|$)/.test(r(`${bs}Property`).toString());return{type:g,timeout:b,propCount:C,hasTransform:V}}function Tu(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>Cu(n)+Cu(e[r])))}function Cu(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function om(){return document.body.offsetHeight}function lm(e,t,n){const r=e[Bi];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Mo=Symbol("_vod"),th=Symbol("_vsh"),nh={beforeMount(e,{value:t},{transition:n}){e[Mo]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Ja(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Ja(e,!0),r.enter(e)):r.leave(e,()=>{Ja(e,!1)}):Ja(e,t))},beforeUnmount(e,{value:t}){Ja(e,t)}};function Ja(e,t){e.style.display=t?e[Mo]:"none",e[th]=!t}const cm=Symbol(""),um=/(^|;)\s*display\s*:/;function fm(e,t,n){const r=e.style,s=cn(n);let a=!1;if(n&&!s){if(t)if(cn(t))for(const o of t.split(";")){const h=o.slice(0,o.indexOf(":")).trim();n[h]==null&&ho(r,h,"")}else for(const o in t)n[o]==null&&ho(r,o,"");for(const o in n)o==="display"&&(a=!0),ho(r,o,n[o])}else if(s){if(t!==n){const o=r[cm];o&&(n+=";"+o),r.cssText=n,a=um.test(n)}}else t&&e.removeAttribute("style");Mo in e&&(e[Mo]=a?r.display:"",e[th]&&(r.display="none"))}const Bu=/\s*!important$/;function ho(e,t,n){if(wt(n))n.forEach(r=>ho(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=hm(e,t);Bu.test(n)?e.setProperty(aa(r),n.replace(Bu,""),"important"):e[r]=n}}const Iu=["Webkit","Moz","ms"],tl={};function hm(e,t){const n=tl[t];if(n)return n;let r=Bs(t);if(r!=="filter"&&r in e)return tl[t]=r;r=X1(r);for(let s=0;s<Iu.length;s++){const a=Iu[s]+r;if(a in e)return tl[t]=a}return t}const Ou="http://www.w3.org/1999/xlink";function Pu(e,t,n,r,s,a=d2(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Ou,t.slice(6,t.length)):e.setAttributeNS(Ou,t,n):n==null||a&&!U1(n)?e.removeAttribute(t):e.setAttribute(t,a?"":Os(n)?String(n):n)}function ku(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Zf(n):n);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const h=a==="OPTION"?e.getAttribute("value")||"":e.value,m=n==null?e.type==="checkbox"?"on":"":String(n);(h!==m||!("_value"in e))&&(e.value=m),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const h=typeof e[t];h==="boolean"?n=U1(n):n==null&&h==="string"?(n="",o=!0):h==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(s||t)}function dm(e,t,n,r){e.addEventListener(t,n,r)}function _m(e,t,n,r){e.removeEventListener(t,n,r)}const Lu=Symbol("_vei");function mm(e,t,n,r,s=null){const a=e[Lu]||(e[Lu]={}),o=a[t];if(r&&o)o.value=r;else{const[h,m]=vm(t);if(r){const S=a[t]=ym(r,s);dm(e,h,S,m)}else o&&(_m(e,h,o,m),a[t]=void 0)}}const Nu=/(?:Once|Passive|Capture)$/;function vm(e){let t;if(Nu.test(e)){t={};let r;for(;r=e.match(Nu);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):aa(e.slice(2)),t]}let nl=0;const pm=Promise.resolve(),bm=()=>nl||(pm.then(()=>nl=0),nl=Date.now());function ym(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ir(wm(r,n.value),t,5,[r])};return n.value=e,n.attached=bm(),n}function wm(e,t){if(wt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Fu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Sm=(e,t,n,r,s,a)=>{const o=s==="svg";t==="class"?lm(e,r,o):t==="style"?fm(e,n,r):o0(t)?Jl(t)||mm(e,t,n,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):gm(e,t,r,o))?(ku(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Pu(e,t,r,o,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!cn(r))?ku(e,Bs(t),r,a,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Pu(e,t,r,o))};function gm(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Fu(t)&&Et(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Fu(t)&&cn(n)?!1:t in e}const xm=["ctrl","shift","alt","meta"],Am={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>xm.some(n=>e[`${n}Key`]&&!t.includes(n))},Gs=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(s,...a)=>{for(let o=0;o<t.length;o++){const h=Am[t[o]];if(h&&h(s,t))return}return e(s,...a)})},Em=vn({patchProp:Sm},em);let $u;function Rm(){return $u||($u=A3(Em))}const rh=(...e)=>{const t=Rm().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=Tm(r);if(!s)return;const a=t._component;!Et(a)&&!a.render&&!a.template&&(a.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,Mm(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function Mm(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Tm(e){return cn(e)?document.querySelector(e):e}var Cm=!1;/*!
 * pinia v2.2.4
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let sh;const y0=e=>sh=e,ah=Symbol();function Pl(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var bi;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(bi||(bi={}));function Bm(){const e=G1(!0),t=e.run(()=>Ft({}));let n=[],r=[];const s=fc({install(a){y0(s),s._a=a,a.provide(ah,s),a.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(a){return!this._a&&!Cm?r.push(a):n.push(a),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const ih=()=>{};function Vu(e,t,n,r=ih){e.push(t);const s=()=>{const a=e.indexOf(t);a>-1&&(e.splice(a,1),r())};return!n&&z1()&&_2(s),s}function _a(e,...t){e.slice().forEach(n=>{n(...t)})}const Im=e=>e(),Hu=Symbol(),rl=Symbol();function kl(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];Pl(s)&&Pl(r)&&e.hasOwnProperty(n)&&!on(r)&&!Ts(r)?e[n]=kl(s,r):e[n]=r}return e}const Om=Symbol();function Pm(e){return!Pl(e)||!e.hasOwnProperty(Om)}const{assign:gs}=Object;function km(e){return!!(on(e)&&e.effect)}function Lm(e,t,n,r){const{state:s,actions:a,getters:o}=t,h=n.state.value[e];let m;function S(){h||(n.state.value[e]=s?s():{});const g=F2(n.state.value[e]);return gs(g,a,Object.keys(o||{}).reduce((b,C)=>(b[C]=fc(tn(()=>{y0(n);const V=n._s.get(e);return o[C].call(V,V)})),b),{}))}return m=oh(e,S,t,n,r,!0),m}function oh(e,t,n={},r,s,a){let o;const h=gs({actions:{}},n),m={deep:!0};let S,g,b=[],C=[],V;const ne=r.state.value[e];!a&&!ne&&(r.state.value[e]={}),Ft({});let J;function pe(Ge){let Se;S=g=!1,typeof Ge=="function"?(Ge(r.state.value[e]),Se={type:bi.patchFunction,storeId:e,events:V}):(kl(r.state.value[e],Ge),Se={type:bi.patchObject,payload:Ge,storeId:e,events:V});const ze=J=Symbol();ls().then(()=>{J===ze&&(S=!0)}),g=!0,_a(b,Se,r.state.value[e])}const Ne=a?function(){const{state:Se}=n,ze=Se?Se():{};this.$patch(nt=>{gs(nt,ze)})}:ih;function K(){o.stop(),b=[],C=[],r._s.delete(e)}const Ce=(Ge,Se="")=>{if(Hu in Ge)return Ge[rl]=Se,Ge;const ze=function(){y0(r);const nt=Array.from(arguments),Je=[],bt=[];function _t(it){Je.push(it)}function Xe(it){bt.push(it)}_a(C,{args:nt,name:ze[rl],store:We,after:_t,onError:Xe});let pt;try{pt=Ge.apply(this&&this.$id===e?this:We,nt)}catch(it){throw _a(bt,it),it}return pt instanceof Promise?pt.then(it=>(_a(Je,it),it)).catch(it=>(_a(bt,it),Promise.reject(it))):(_a(Je,pt),pt)};return ze[Hu]=!0,ze[rl]=Se,ze},de={_p:r,$id:e,$onAction:Vu.bind(null,C),$patch:pe,$reset:Ne,$subscribe(Ge,Se={}){const ze=Vu(b,Ge,Se.detached,()=>nt()),nt=o.run(()=>Nn(()=>r.state.value[e],Je=>{(Se.flush==="sync"?g:S)&&Ge({storeId:e,type:bi.direct,events:V},Je)},gs({},m,Se)));return ze},$dispose:K},We=Ls(de);r._s.set(e,We);const He=(r._a&&r._a.runWithContext||Im)(()=>r._e.run(()=>(o=G1()).run(()=>t({action:Ce}))));for(const Ge in He){const Se=He[Ge];if(on(Se)&&!km(Se)||Ts(Se))a||(ne&&Pm(Se)&&(on(Se)?Se.value=ne[Ge]:kl(Se,ne[Ge])),r.state.value[e][Ge]=Se);else if(typeof Se=="function"){const ze=Ce(Se,Ge);He[Ge]=ze,h.actions[Ge]=Se}}return gs(We,He),gs(kt(We),He),Object.defineProperty(We,"$state",{get:()=>r.state.value[e],set:Ge=>{pe(Se=>{gs(Se,Ge)})}}),r._p.forEach(Ge=>{gs(We,o.run(()=>Ge({store:We,app:r._a,pinia:r,options:h})))}),ne&&a&&n.hydrate&&n.hydrate(We.$state,ne),S=!0,g=!0,We}function lh(e,t,n){let r,s;const a=typeof t=="function";typeof e=="string"?(r=e,s=a?n:t):(s=e,r=e.id);function o(h,m){const S=p3();return h=h||(S?hr(ah,null):null),h&&y0(h),h=sh,h._s.has(r)||(a?oh(r,t,s,h):Lm(r,s,h)),h._s.get(r)}return o.$id=r,o}/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Sa=typeof document<"u";function ch(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Nm(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&ch(e.default)}const Nt=Object.assign;function sl(e,t){const n={};for(const r in t){const s=t[r];n[r]=Or(s)?s.map(e):e(s)}return n}const yi=()=>{},Or=Array.isArray,uh=/#/g,Fm=/&/g,$m=/\//g,Vm=/=/g,Hm=/\?/g,fh=/\+/g,Dm=/%5B/g,jm=/%5D/g,hh=/%5E/g,Xm=/%60/g,dh=/%7B/g,qm=/%7C/g,_h=/%7D/g,Um=/%20/g;function yc(e){return encodeURI(""+e).replace(qm,"|").replace(Dm,"[").replace(jm,"]")}function Ym(e){return yc(e).replace(dh,"{").replace(_h,"}").replace(hh,"^")}function Ll(e){return yc(e).replace(fh,"%2B").replace(Um,"+").replace(uh,"%23").replace(Fm,"%26").replace(Xm,"`").replace(dh,"{").replace(_h,"}").replace(hh,"^")}function Km(e){return Ll(e).replace(Vm,"%3D")}function Wm(e){return yc(e).replace(uh,"%23").replace(Hm,"%3F")}function Gm(e){return e==null?"":Wm(e).replace($m,"%2F")}function Ii(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const zm=/\/$/,Qm=e=>e.replace(zm,"");function al(e,t,n="/"){let r,s={},a="",o="";const h=t.indexOf("#");let m=t.indexOf("?");return h<m&&h>=0&&(m=-1),m>-1&&(r=t.slice(0,m),a=t.slice(m+1,h>-1?h:t.length),s=e(a)),h>-1&&(r=r||t.slice(0,h),o=t.slice(h,t.length)),r=t4(r??t,n),{fullPath:r+(a&&"?")+a+o,path:r,query:s,hash:Ii(o)}}function Zm(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Du(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Jm(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Na(t.matched[r],n.matched[s])&&mh(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Na(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function mh(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!e4(e[n],t[n]))return!1;return!0}function e4(e,t){return Or(e)?ju(e,t):Or(t)?ju(t,e):e===t}function ju(e,t){return Or(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function t4(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let a=n.length-1,o,h;for(o=0;o<r.length;o++)if(h=r[o],h!==".")if(h==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+r.slice(o).join("/")}const ws={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Oi;(function(e){e.pop="pop",e.push="push"})(Oi||(Oi={}));var wi;(function(e){e.back="back",e.forward="forward",e.unknown=""})(wi||(wi={}));function n4(e){if(!e)if(Sa){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Qm(e)}const r4=/^[^#]+#/;function s4(e,t){return e.replace(r4,"#")+t}function a4(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const w0=()=>({left:window.scrollX,top:window.scrollY});function i4(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=a4(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Xu(e,t){return(history.state?history.state.position-t:-1)+e}const Nl=new Map;function o4(e,t){Nl.set(e,t)}function l4(e){const t=Nl.get(e);return Nl.delete(e),t}let c4=()=>location.protocol+"//"+location.host;function vh(e,t){const{pathname:n,search:r,hash:s}=t,a=e.indexOf("#");if(a>-1){let h=s.includes(e.slice(a))?e.slice(a).length:1,m=s.slice(h);return m[0]!=="/"&&(m="/"+m),Du(m,"")}return Du(n,e)+r+s}function u4(e,t,n,r){let s=[],a=[],o=null;const h=({state:C})=>{const V=vh(e,location),ne=n.value,J=t.value;let pe=0;if(C){if(n.value=V,t.value=C,o&&o===ne){o=null;return}pe=J?C.position-J.position:0}else r(V);s.forEach(Ne=>{Ne(n.value,ne,{delta:pe,type:Oi.pop,direction:pe?pe>0?wi.forward:wi.back:wi.unknown})})};function m(){o=n.value}function S(C){s.push(C);const V=()=>{const ne=s.indexOf(C);ne>-1&&s.splice(ne,1)};return a.push(V),V}function g(){const{history:C}=window;C.state&&C.replaceState(Nt({},C.state,{scroll:w0()}),"")}function b(){for(const C of a)C();a=[],window.removeEventListener("popstate",h),window.removeEventListener("beforeunload",g)}return window.addEventListener("popstate",h),window.addEventListener("beforeunload",g,{passive:!0}),{pauseListeners:m,listen:S,destroy:b}}function qu(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?w0():null}}function f4(e){const{history:t,location:n}=window,r={value:vh(e,n)},s={value:t.state};s.value||a(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(m,S,g){const b=e.indexOf("#"),C=b>-1?(n.host&&document.querySelector("base")?e:e.slice(b))+m:c4()+e+m;try{t[g?"replaceState":"pushState"](S,"",C),s.value=S}catch(V){console.error(V),n[g?"replace":"assign"](C)}}function o(m,S){const g=Nt({},t.state,qu(s.value.back,m,s.value.forward,!0),S,{position:s.value.position});a(m,g,!0),r.value=m}function h(m,S){const g=Nt({},s.value,t.state,{forward:m,scroll:w0()});a(g.current,g,!0);const b=Nt({},qu(r.value,m,null),{position:g.position+1},S);a(m,b,!1),r.value=m}return{location:r,state:s,push:h,replace:o}}function h4(e){e=n4(e);const t=f4(e),n=u4(e,t.state,t.location,t.replace);function r(a,o=!0){o||n.pauseListeners(),history.go(a)}const s=Nt({location:"",base:e,go:r,createHref:s4.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function d4(e){return typeof e=="string"||e&&typeof e=="object"}function ph(e){return typeof e=="string"||typeof e=="symbol"}const bh=Symbol("");var Uu;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Uu||(Uu={}));function Fa(e,t){return Nt(new Error,{type:e,[bh]:!0},t)}function ts(e,t){return e instanceof Error&&bh in e&&(t==null||!!(e.type&t))}const Yu="[^/]+?",_4={sensitive:!1,strict:!1,start:!0,end:!0},m4=/[.+*?^${}()[\]/\\]/g;function v4(e,t){const n=Nt({},_4,t),r=[];let s=n.start?"^":"";const a=[];for(const S of e){const g=S.length?[]:[90];n.strict&&!S.length&&(s+="/");for(let b=0;b<S.length;b++){const C=S[b];let V=40+(n.sensitive?.25:0);if(C.type===0)b||(s+="/"),s+=C.value.replace(m4,"\\$&"),V+=40;else if(C.type===1){const{value:ne,repeatable:J,optional:pe,regexp:Ne}=C;a.push({name:ne,repeatable:J,optional:pe});const K=Ne||Yu;if(K!==Yu){V+=10;try{new RegExp(`(${K})`)}catch(de){throw new Error(`Invalid custom RegExp for param "${ne}" (${K}): `+de.message)}}let Ce=J?`((?:${K})(?:/(?:${K}))*)`:`(${K})`;b||(Ce=pe&&S.length<2?`(?:/${Ce})`:"/"+Ce),pe&&(Ce+="?"),s+=Ce,V+=20,pe&&(V+=-8),J&&(V+=-20),K===".*"&&(V+=-50)}g.push(V)}r.push(g)}if(n.strict&&n.end){const S=r.length-1;r[S][r[S].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function h(S){const g=S.match(o),b={};if(!g)return null;for(let C=1;C<g.length;C++){const V=g[C]||"",ne=a[C-1];b[ne.name]=V&&ne.repeatable?V.split("/"):V}return b}function m(S){let g="",b=!1;for(const C of e){(!b||!g.endsWith("/"))&&(g+="/"),b=!1;for(const V of C)if(V.type===0)g+=V.value;else if(V.type===1){const{value:ne,repeatable:J,optional:pe}=V,Ne=ne in S?S[ne]:"";if(Or(Ne)&&!J)throw new Error(`Provided param "${ne}" is an array but it is not repeatable (* or + modifiers)`);const K=Or(Ne)?Ne.join("/"):Ne;if(!K)if(pe)C.length<2&&(g.endsWith("/")?g=g.slice(0,-1):b=!0);else throw new Error(`Missing required param "${ne}"`);g+=K}}return g||"/"}return{re:o,score:r,keys:a,parse:h,stringify:m}}function p4(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function yh(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const a=p4(r[n],s[n]);if(a)return a;n++}if(Math.abs(s.length-r.length)===1){if(Ku(r))return 1;if(Ku(s))return-1}return s.length-r.length}function Ku(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const b4={type:0,value:""},y4=/[a-zA-Z0-9_]/;function w4(e){if(!e)return[[]];if(e==="/")return[[b4]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(V){throw new Error(`ERR (${n})/"${S}": ${V}`)}let n=0,r=n;const s=[];let a;function o(){a&&s.push(a),a=[]}let h=0,m,S="",g="";function b(){S&&(n===0?a.push({type:0,value:S}):n===1||n===2||n===3?(a.length>1&&(m==="*"||m==="+")&&t(`A repeatable param (${S}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:S,regexp:g,repeatable:m==="*"||m==="+",optional:m==="*"||m==="?"})):t("Invalid state to consume buffer"),S="")}function C(){S+=m}for(;h<e.length;){if(m=e[h++],m==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:m==="/"?(S&&b(),o()):m===":"?(b(),n=1):C();break;case 4:C(),n=r;break;case 1:m==="("?n=2:y4.test(m)?C():(b(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&h--);break;case 2:m===")"?g[g.length-1]=="\\"?g=g.slice(0,-1)+m:n=3:g+=m;break;case 3:b(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&h--,g="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${S}"`),b(),o(),s}function S4(e,t,n){const r=v4(w4(e.path),n),s=Nt(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function g4(e,t){const n=[],r=new Map;t=Qu({strict:!1,end:!0,sensitive:!1},t);function s(b){return r.get(b)}function a(b,C,V){const ne=!V,J=Gu(b);J.aliasOf=V&&V.record;const pe=Qu(t,b),Ne=[J];if("alias"in b){const de=typeof b.alias=="string"?[b.alias]:b.alias;for(const We of de)Ne.push(Gu(Nt({},J,{components:V?V.record.components:J.components,path:We,aliasOf:V?V.record:J})))}let K,Ce;for(const de of Ne){const{path:We}=de;if(C&&We[0]!=="/"){const Ve=C.record.path,He=Ve[Ve.length-1]==="/"?"":"/";de.path=C.record.path+(We&&He+We)}if(K=S4(de,C,pe),V?V.alias.push(K):(Ce=Ce||K,Ce!==K&&Ce.alias.push(K),ne&&b.name&&!zu(K)&&o(b.name)),wh(K)&&m(K),J.children){const Ve=J.children;for(let He=0;He<Ve.length;He++)a(Ve[He],K,V&&V.children[He])}V=V||K}return Ce?()=>{o(Ce)}:yi}function o(b){if(ph(b)){const C=r.get(b);C&&(r.delete(b),n.splice(n.indexOf(C),1),C.children.forEach(o),C.alias.forEach(o))}else{const C=n.indexOf(b);C>-1&&(n.splice(C,1),b.record.name&&r.delete(b.record.name),b.children.forEach(o),b.alias.forEach(o))}}function h(){return n}function m(b){const C=E4(b,n);n.splice(C,0,b),b.record.name&&!zu(b)&&r.set(b.record.name,b)}function S(b,C){let V,ne={},J,pe;if("name"in b&&b.name){if(V=r.get(b.name),!V)throw Fa(1,{location:b});pe=V.record.name,ne=Nt(Wu(C.params,V.keys.filter(Ce=>!Ce.optional).concat(V.parent?V.parent.keys.filter(Ce=>Ce.optional):[]).map(Ce=>Ce.name)),b.params&&Wu(b.params,V.keys.map(Ce=>Ce.name))),J=V.stringify(ne)}else if(b.path!=null)J=b.path,V=n.find(Ce=>Ce.re.test(J)),V&&(ne=V.parse(J),pe=V.record.name);else{if(V=C.name?r.get(C.name):n.find(Ce=>Ce.re.test(C.path)),!V)throw Fa(1,{location:b,currentLocation:C});pe=V.record.name,ne=Nt({},C.params,b.params),J=V.stringify(ne)}const Ne=[];let K=V;for(;K;)Ne.unshift(K.record),K=K.parent;return{name:pe,path:J,params:ne,matched:Ne,meta:A4(Ne)}}e.forEach(b=>a(b));function g(){n.length=0,r.clear()}return{addRoute:a,resolve:S,removeRoute:o,clearRoutes:g,getRoutes:h,getRecordMatcher:s}}function Wu(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Gu(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:x4(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function x4(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function zu(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function A4(e){return e.reduce((t,n)=>Nt(t,n.meta),{})}function Qu(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function E4(e,t){let n=0,r=t.length;for(;n!==r;){const a=n+r>>1;yh(e,t[a])<0?r=a:n=a+1}const s=R4(e);return s&&(r=t.lastIndexOf(s,r-1)),r}function R4(e){let t=e;for(;t=t.parent;)if(wh(t)&&yh(e,t)===0)return t}function wh({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function M4(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const a=r[s].replace(fh," "),o=a.indexOf("="),h=Ii(o<0?a:a.slice(0,o)),m=o<0?null:Ii(a.slice(o+1));if(h in t){let S=t[h];Or(S)||(S=t[h]=[S]),S.push(m)}else t[h]=m}return t}function Zu(e){let t="";for(let n in e){const r=e[n];if(n=Km(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Or(r)?r.map(a=>a&&Ll(a)):[r&&Ll(r)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+n,a!=null&&(t+="="+a))})}return t}function T4(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Or(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const C4=Symbol(""),Ju=Symbol(""),S0=Symbol(""),Sh=Symbol(""),Fl=Symbol("");function ei(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Rs(e,t,n,r,s,a=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((h,m)=>{const S=C=>{C===!1?m(Fa(4,{from:n,to:t})):C instanceof Error?m(C):d4(C)?m(Fa(2,{from:t,to:C})):(o&&r.enterCallbacks[s]===o&&typeof C=="function"&&o.push(C),h())},g=a(()=>e.call(r&&r.instances[s],t,n,S));let b=Promise.resolve(g);e.length<3&&(b=b.then(S)),b.catch(C=>m(C))})}function il(e,t,n,r,s=a=>a()){const a=[];for(const o of e)for(const h in o.components){let m=o.components[h];if(!(t!=="beforeRouteEnter"&&!o.instances[h]))if(ch(m)){const g=(m.__vccOpts||m)[t];g&&a.push(Rs(g,n,r,o,h,s))}else{let S=m();a.push(()=>S.then(g=>{if(!g)throw new Error(`Couldn't resolve component "${h}" at "${o.path}"`);const b=Nm(g)?g.default:g;o.mods[h]=g,o.components[h]=b;const V=(b.__vccOpts||b)[t];return V&&Rs(V,n,r,o,h,s)()}))}}return a}function e1(e){const t=hr(S0),n=hr(Sh),r=tn(()=>{const m=us(e.to);return t.resolve(m)}),s=tn(()=>{const{matched:m}=r.value,{length:S}=m,g=m[S-1],b=n.matched;if(!g||!b.length)return-1;const C=b.findIndex(Na.bind(null,g));if(C>-1)return C;const V=t1(m[S-2]);return S>1&&t1(g)===V&&b[b.length-1].path!==V?b.findIndex(Na.bind(null,m[S-2])):C}),a=tn(()=>s.value>-1&&P4(n.params,r.value.params)),o=tn(()=>s.value>-1&&s.value===n.matched.length-1&&mh(n.params,r.value.params));function h(m={}){return O4(m)?t[us(e.replace)?"replace":"push"](us(e.to)).catch(yi):Promise.resolve()}return{route:r,href:tn(()=>r.value.href),isActive:a,isExactActive:o,navigate:h}}const B4=Jn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:e1,setup(e,{slots:t}){const n=Ls(e1(e)),{options:r}=hr(S0),s=tn(()=>({[n1(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[n1(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=t.default&&t.default(n);return e.custom?a:bc("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},a)}}}),I4=B4;function O4(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function P4(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Or(s)||s.length!==r.length||r.some((a,o)=>a!==s[o]))return!1}return!0}function t1(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const n1=(e,t,n)=>e??t??n,k4=Jn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=hr(Fl),s=tn(()=>e.route||r.value),a=hr(Ju,0),o=tn(()=>{let S=us(a);const{matched:g}=s.value;let b;for(;(b=g[S])&&!b.components;)S++;return S}),h=tn(()=>s.value.matched[o.value]);na(Ju,tn(()=>o.value+1)),na(C4,h),na(Fl,s);const m=Ft();return Nn(()=>[m.value,h.value,e.name],([S,g,b],[C,V,ne])=>{g&&(g.instances[b]=S,V&&V!==g&&S&&S===C&&(g.leaveGuards.size||(g.leaveGuards=V.leaveGuards),g.updateGuards.size||(g.updateGuards=V.updateGuards))),S&&g&&(!V||!Na(g,V)||!C)&&(g.enterCallbacks[b]||[]).forEach(J=>J(S))},{flush:"post"}),()=>{const S=s.value,g=e.name,b=h.value,C=b&&b.components[g];if(!C)return r1(n.default,{Component:C,route:S});const V=b.props[g],ne=V?V===!0?S.params:typeof V=="function"?V(S):V:null,pe=bc(C,Nt({},ne,t,{onVnodeUnmounted:Ne=>{Ne.component.isUnmounted&&(b.instances[g]=null)},ref:m}));return r1(n.default,{Component:pe,route:S})||pe}}});function r1(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const gh=k4;function L4(e){const t=g4(e.routes,e),n=e.parseQuery||M4,r=e.stringifyQuery||Zu,s=e.history,a=ei(),o=ei(),h=ei(),m=k2(ws);let S=ws;Sa&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const g=sl.bind(null,W=>""+W),b=sl.bind(null,Gm),C=sl.bind(null,Ii);function V(W,Be){let ge,Qe;return ph(W)?(ge=t.getRecordMatcher(W),Qe=Be):Qe=W,t.addRoute(Qe,ge)}function ne(W){const Be=t.getRecordMatcher(W);Be&&t.removeRoute(Be)}function J(){return t.getRoutes().map(W=>W.record)}function pe(W){return!!t.getRecordMatcher(W)}function Ne(W,Be){if(Be=Nt({},Be||m.value),typeof W=="string"){const D=al(n,W,Be.path),ie=t.resolve({path:D.path},Be),Ae=s.createHref(D.fullPath);return Nt(D,ie,{params:C(ie.params),hash:Ii(D.hash),redirectedFrom:void 0,href:Ae})}let ge;if(W.path!=null)ge=Nt({},W,{path:al(n,W.path,Be.path).path});else{const D=Nt({},W.params);for(const ie in D)D[ie]==null&&delete D[ie];ge=Nt({},W,{params:b(D)}),Be.params=b(Be.params)}const Qe=t.resolve(ge,Be),ht=W.hash||"";Qe.params=g(C(Qe.params));const gt=Zm(r,Nt({},W,{hash:Ym(ht),path:Qe.path})),$=s.createHref(gt);return Nt({fullPath:gt,hash:ht,query:r===Zu?T4(W.query):W.query||{}},Qe,{redirectedFrom:void 0,href:$})}function K(W){return typeof W=="string"?al(n,W,m.value.path):Nt({},W)}function Ce(W,Be){if(S!==W)return Fa(8,{from:Be,to:W})}function de(W){return He(W)}function We(W){return de(Nt(K(W),{replace:!0}))}function Ve(W){const Be=W.matched[W.matched.length-1];if(Be&&Be.redirect){const{redirect:ge}=Be;let Qe=typeof ge=="function"?ge(W):ge;return typeof Qe=="string"&&(Qe=Qe.includes("?")||Qe.includes("#")?Qe=K(Qe):{path:Qe},Qe.params={}),Nt({query:W.query,hash:W.hash,params:Qe.path!=null?{}:W.params},Qe)}}function He(W,Be){const ge=S=Ne(W),Qe=m.value,ht=W.state,gt=W.force,$=W.replace===!0,D=Ve(ge);if(D)return He(Nt(K(D),{state:typeof D=="object"?Nt({},ht,D.state):ht,force:gt,replace:$}),Be||ge);const ie=ge;ie.redirectedFrom=Be;let Ae;return!gt&&Jm(r,Qe,ge)&&(Ae=Fa(16,{to:ie,from:Qe}),Bn(Qe,Qe,!0,!1)),(Ae?Promise.resolve(Ae):ze(ie,Qe)).catch(le=>ts(le)?ts(le,2)?le:Fn(le):At(le,ie,Qe)).then(le=>{if(le){if(ts(le,2))return He(Nt({replace:$},K(le.to),{state:typeof le.to=="object"?Nt({},ht,le.to.state):ht,force:gt}),Be||ie)}else le=Je(ie,Qe,!0,$,ht);return nt(ie,Qe,le),le})}function Ge(W,Be){const ge=Ce(W,Be);return ge?Promise.reject(ge):Promise.resolve()}function Se(W){const Be=M.values().next().value;return Be&&typeof Be.runWithContext=="function"?Be.runWithContext(W):W()}function ze(W,Be){let ge;const[Qe,ht,gt]=N4(W,Be);ge=il(Qe.reverse(),"beforeRouteLeave",W,Be);for(const D of Qe)D.leaveGuards.forEach(ie=>{ge.push(Rs(ie,W,Be))});const $=Ge.bind(null,W,Be);return ge.push($),An(ge).then(()=>{ge=[];for(const D of a.list())ge.push(Rs(D,W,Be));return ge.push($),An(ge)}).then(()=>{ge=il(ht,"beforeRouteUpdate",W,Be);for(const D of ht)D.updateGuards.forEach(ie=>{ge.push(Rs(ie,W,Be))});return ge.push($),An(ge)}).then(()=>{ge=[];for(const D of gt)if(D.beforeEnter)if(Or(D.beforeEnter))for(const ie of D.beforeEnter)ge.push(Rs(ie,W,Be));else ge.push(Rs(D.beforeEnter,W,Be));return ge.push($),An(ge)}).then(()=>(W.matched.forEach(D=>D.enterCallbacks={}),ge=il(gt,"beforeRouteEnter",W,Be,Se),ge.push($),An(ge))).then(()=>{ge=[];for(const D of o.list())ge.push(Rs(D,W,Be));return ge.push($),An(ge)}).catch(D=>ts(D,8)?D:Promise.reject(D))}function nt(W,Be,ge){h.list().forEach(Qe=>Se(()=>Qe(W,Be,ge)))}function Je(W,Be,ge,Qe,ht){const gt=Ce(W,Be);if(gt)return gt;const $=Be===ws,D=Sa?history.state:{};ge&&(Qe||$?s.replace(W.fullPath,Nt({scroll:$&&D&&D.scroll},ht)):s.push(W.fullPath,ht)),m.value=W,Bn(W,Be,ge,$),Fn()}let bt;function _t(){bt||(bt=s.listen((W,Be,ge)=>{if(!Gr.listening)return;const Qe=Ne(W),ht=Ve(Qe);if(ht){He(Nt(ht,{replace:!0}),Qe).catch(yi);return}S=Qe;const gt=m.value;Sa&&o4(Xu(gt.fullPath,ge.delta),w0()),ze(Qe,gt).catch($=>ts($,12)?$:ts($,2)?(He($.to,Qe).then(D=>{ts(D,20)&&!ge.delta&&ge.type===Oi.pop&&s.go(-1,!1)}).catch(yi),Promise.reject()):(ge.delta&&s.go(-ge.delta,!1),At($,Qe,gt))).then($=>{$=$||Je(Qe,gt,!1),$&&(ge.delta&&!ts($,8)?s.go(-ge.delta,!1):ge.type===Oi.pop&&ts($,20)&&s.go(-1,!1)),nt(Qe,gt,$)}).catch(yi)}))}let Xe=ei(),pt=ei(),it;function At(W,Be,ge){Fn(W);const Qe=pt.list();return Qe.length?Qe.forEach(ht=>ht(W,Be,ge)):console.error(W),Promise.reject(W)}function Cn(){return it&&m.value!==ws?Promise.resolve():new Promise((W,Be)=>{Xe.add([W,Be])})}function Fn(W){return it||(it=!W,_t(),Xe.list().forEach(([Be,ge])=>W?ge(W):Be()),Xe.reset()),W}function Bn(W,Be,ge,Qe){const{scrollBehavior:ht}=e;if(!Sa||!ht)return Promise.resolve();const gt=!ge&&l4(Xu(W.fullPath,0))||(Qe||!ge)&&history.state&&history.state.scroll||null;return ls().then(()=>ht(W,Be,gt)).then($=>$&&i4($)).catch($=>At($,W,Be))}const nn=W=>s.go(W);let vt;const M=new Set,Gr={currentRoute:m,listening:!0,addRoute:V,removeRoute:ne,clearRoutes:t.clearRoutes,hasRoute:pe,getRoutes:J,resolve:Ne,options:e,push:de,replace:We,go:nn,back:()=>nn(-1),forward:()=>nn(1),beforeEach:a.add,beforeResolve:o.add,afterEach:h.add,onError:pt.add,isReady:Cn,install(W){const Be=this;W.component("RouterLink",I4),W.component("RouterView",gh),W.config.globalProperties.$router=Be,Object.defineProperty(W.config.globalProperties,"$route",{enumerable:!0,get:()=>us(m)}),Sa&&!vt&&m.value===ws&&(vt=!0,de(s.location).catch(ht=>{}));const ge={};for(const ht in ws)Object.defineProperty(ge,ht,{get:()=>m.value[ht],enumerable:!0});W.provide(S0,Be),W.provide(Sh,hf(ge)),W.provide(Fl,m);const Qe=W.unmount;M.add(W),W.unmount=function(){M.delete(W),M.size<1&&(S=ws,bt&&bt(),bt=null,m.value=ws,vt=!1,it=!1),Qe()}}};function An(W){return W.reduce((Be,ge)=>Be.then(()=>Se(ge)),Promise.resolve())}return Gr}function N4(e,t){const n=[],r=[],s=[],a=Math.max(t.matched.length,e.matched.length);for(let o=0;o<a;o++){const h=t.matched[o];h&&(e.matched.find(S=>Na(S,h))?r.push(h):n.push(h));const m=e.matched[o];m&&(t.matched.find(S=>Na(S,m))||s.push(m))}return[n,r,s]}function xh(){return hr(S0)}const F4={__name:"App",setup(e){return(t,n)=>(Er(),Ca(us(gh)))}};function $4(){}const er=Object.assign,g0=typeof window<"u",Va=e=>e!==null&&typeof e=="object",Rn=e=>e!=null,To=e=>typeof e=="function",Ah=e=>Va(e)&&To(e.then)&&To(e.catch),Eh=e=>typeof e=="number"||/^\d+(\.\d+)?$/.test(e),V4=()=>g0?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;function s1(e,t){const n=t.split(".");let r=e;return n.forEach(s=>{var a;r=Va(r)&&(a=r[s])!=null?a:""}),r}function Rh(e,t,n){return t.reduce((r,s)=>(r[s]=e[s],r),{})}const a1=e=>Array.isArray(e)?e:[e],fs=null,ln=[Number,String],cs={type:Boolean,default:!0},H4=e=>({type:Number,default:e}),D4=e=>({type:ln,default:e}),Kt=e=>({type:String,default:e});var wc=typeof window<"u";function j4(e){const t=hr(e,null);if(t){const n=oa(),{link:r,unlink:s,internalChildren:a}=t;r(n),$i(()=>s(n));const o=tn(()=>a.indexOf(n));return{parent:t,index:o}}return{parent:null,index:Ft(-1)}}function Mh(e){let t;ia(()=>{e(),ls(()=>{t=!0})}),_0(()=>{t&&e()})}function Sc(e,t,n={}){if(!wc)return;const{target:r=window,passive:s=!1,capture:a=!1}=n;let o=!1,h;const m=b=>{if(o)return;const C=us(b);C&&!h&&(C.addEventListener(e,t,{capture:a,passive:s}),h=!0)},S=b=>{if(o)return;const C=us(b);C&&h&&(C.removeEventListener(e,t,a),h=!1)};$i(()=>S(r)),Ni(()=>S(r)),Mh(()=>m(r));let g;return on(r)&&(g=Nn(r,(b,C)=>{S(C),m(b)})),()=>{g==null||g(),S(r),o=!0}}var no,ol;function X4(){if(!no&&(no=Ft(0),ol=Ft(0),wc)){const e=()=>{no.value=window.innerWidth,ol.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:no,height:ol}}var q4=/scroll|auto|overlay/i,U4=wc?window:void 0;function Y4(e){return e.tagName!=="HTML"&&e.tagName!=="BODY"&&e.nodeType===1}function K4(e,t=U4){let n=e;for(;n&&n!==t&&Y4(n);){const{overflowY:r}=window.getComputedStyle(n);if(q4.test(r))return n;n=n.parentNode}return t}var W4=Symbol("van-field");function i1(e,t){"scrollTop"in e?e.scrollTop=t:e.scrollTo(e.scrollX,t)}function Th(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function Ch(e){i1(window,e),i1(document.body,e)}const G4=V4();function z4(){G4&&Ch(Th())}const Q4=e=>e.stopPropagation();function Ba(e,t){(typeof e.cancelable!="boolean"||e.cancelable)&&e.preventDefault(),t&&Q4(e)}X4();function ur(e){if(Rn(e))return Eh(e)?`${e}px`:String(e)}function Z4(e){if(Rn(e)){if(Array.isArray(e))return{width:ur(e[0]),height:ur(e[1])};const t=ur(e);return{width:t,height:t}}}function J4(e){const t={};return e!==void 0&&(t.zIndex=+e),t}const ev=/-(\w)/g,Bh=e=>e.replace(ev,(t,n)=>n.toUpperCase()),tv=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,""),nv=(e,t,n)=>Math.min(Math.max(e,t),n);function o1(e,t,n){const r=e.indexOf(t);return r===-1?e:t==="-"&&r!==0?e.slice(0,r):e.slice(0,r+1)+e.slice(r).replace(n,"")}function rv(e,t=!0,n=!0){t?e=o1(e,".",/\./g):e=e.split(".")[0],n?e=o1(e,"-",/-/g):e=e.replace(/-/,"");const r=t?/[^-0-9.]/g:/[^-0-9]/g;return e.replace(r,"")}const{hasOwnProperty:sv}=Object.prototype;function av(e,t,n){const r=t[n];Rn(r)&&(!sv.call(e,n)||!Va(r)?e[n]=r:e[n]=Ih(Object(e[n]),r))}function Ih(e,t){return Object.keys(t).forEach(n=>{av(e,t,n)}),e}var iv={name:"",tel:"",save:"",clear:"",cancel:"",confirm:"",delete:"",loading:"...",noCoupon:"",nameEmpty:"",addContact:"",telInvalid:"",vanCalendar:{end:"",start:"",title:"",weekdays:["","","","","","",""],monthTitle:(e,t)=>`${e}${t}`,rangePrompt:e=>` ${e} `},vanCascader:{select:""},vanPagination:{prev:"",next:""},vanPullRefresh:{pulling:"...",loosing:"..."},vanSubmitBar:{label:":"},vanCoupon:{unlimited:"",discount:e=>`${e}`,condition:e=>`${e}`},vanCouponCell:{title:"",count:e=>`${e}`},vanCouponList:{exchange:"",close:"",enable:"",disabled:"",placeholder:""},vanAddressEdit:{area:"",areaEmpty:"",addressEmpty:"",addressDetail:"",defaultAddress:""},vanAddressList:{add:""}};const l1=Ft("zh-CN"),c1=Ls({"zh-CN":iv}),ov={messages(){return c1[l1.value]},use(e,t){l1.value=e,this.add({[e]:t})},add(e={}){Ih(c1,e)}};var lv=ov;function cv(e){const t=Bh(e)+".";return(n,...r)=>{const s=lv.messages(),a=s1(s,t+n)||s1(s,n);return To(a)?a(...r):a}}function $l(e,t){return t?typeof t=="string"?` ${e}--${t}`:Array.isArray(t)?t.reduce((n,r)=>n+$l(e,r),""):Object.keys(t).reduce((n,r)=>n+(t[r]?$l(e,r):""),""):""}function uv(e){return(t,n)=>(t&&typeof t!="string"&&(n=t,t=""),t=t?`${e}__${t}`:e,`${t}${$l(t,n)}`)}function br(e){const t=`van-${e}`;return[t,uv(t),cv(t)]}const Oh="van-hairline",fv=`${Oh}--surround`,hv=`${Oh}--top-bottom`,dv="van-haptics-feedback",_v=Symbol("van-form"),u1=5;function mv(e,{args:t=[],done:n,canceled:r,error:s}){if(e){const a=e.apply(null,t);Ah(a)?a.then(o=>{o?n():r&&r()}).catch(s||$4):a?n():r&&r()}else n()}function yr(e){return e.install=t=>{const{name:n}=e;n&&(t.component(n,e),t.component(Bh(`-${n}`),e))},e}const vv=Symbol();function gc(e){const t=oa();t&&er(t.proxy,e)}const Ph={to:[String,Object],url:String,replace:Boolean};function pv({to:e,url:t,replace:n,$router:r}){e&&r?r[n?"replace":"push"](e):t&&(n?location.replace(t):location.href=t)}function kh(){const e=oa().proxy;return()=>pv(e)}const[bv,f1]=br("badge"),yv={dot:Boolean,max:ln,tag:Kt("div"),color:String,offset:Array,content:ln,showZero:cs,position:Kt("top-right")};var wv=Jn({name:bv,props:yv,setup(e,{slots:t}){const n=()=>{if(t.content)return!0;const{content:h,showZero:m}=e;return Rn(h)&&h!==""&&(m||h!==0&&h!=="0")},r=()=>{const{dot:h,max:m,content:S}=e;if(!h&&n())return t.content?t.content():Rn(m)&&Eh(S)&&+S>+m?`${m}+`:S},s=h=>h.startsWith("-")?h.replace("-",""):`-${h}`,a=tn(()=>{const h={background:e.color};if(e.offset){const[m,S]=e.offset,{position:g}=e,[b,C]=g.split("-");t.default?(typeof S=="number"?h[b]=ur(b==="top"?S:-S):h[b]=b==="top"?ur(S):s(S),typeof m=="number"?h[C]=ur(C==="left"?m:-m):h[C]=C==="left"?ur(m):s(m)):(h.marginTop=ur(S),h.marginLeft=ur(m))}return h}),o=()=>{if(n()||e.dot)return Ze("div",{class:f1([e.position,{dot:e.dot,fixed:!!t.default}]),style:a.value},[r()])};return()=>{if(t.default){const{tag:h}=e;return Ze(h,{class:f1("wrapper")},{default:()=>[t.default(),o()]})}return o()}}});const Sv=yr(wv);let Lh=2e3;const gv=()=>++Lh,xv=e=>{Lh=e},[Nh,Av]=br("config-provider"),Fh=Symbol(Nh),Ev={tag:Kt("div"),theme:Kt("light"),zIndex:Number,themeVars:Object,themeVarsDark:Object,themeVarsLight:Object,themeVarsScope:Kt("local"),iconPrefix:String};function Rv(e){return e.replace(/([a-zA-Z])(\d)/g,"$1-$2")}function Mv(e){const t={};return Object.keys(e).forEach(n=>{const r=Rv(tv(n));t[`--van-${r}`]=e[n]}),t}function ro(e={},t={}){Object.keys(e).forEach(n=>{e[n]!==t[n]&&document.documentElement.style.setProperty(n,e[n])}),Object.keys(t).forEach(n=>{e[n]||document.documentElement.style.removeProperty(n)})}var Tv=Jn({name:Nh,props:Ev,setup(e,{slots:t}){const n=tn(()=>Mv(er({},e.themeVars,e.theme==="dark"?e.themeVarsDark:e.themeVarsLight)));if(g0){const r=()=>{document.documentElement.classList.add(`van-theme-${e.theme}`)},s=(a=e.theme)=>{document.documentElement.classList.remove(`van-theme-${a}`)};Nn(()=>e.theme,(a,o)=>{o&&s(o),r()},{immediate:!0}),_0(r),Ni(s),Fi(s),Nn(n,(a,o)=>{e.themeVarsScope==="global"&&ro(a,o)}),Nn(()=>e.themeVarsScope,(a,o)=>{o==="global"&&ro({},n.value),a==="global"&&ro(n.value,{})}),e.themeVarsScope==="global"&&ro(n.value,{})}return na(Fh,e),B3(()=>{e.zIndex!==void 0&&xv(e.zIndex)}),()=>Ze(e.tag,{class:Av(),style:e.themeVarsScope==="local"?n.value:void 0},{default:()=>{var r;return[(r=t.default)==null?void 0:r.call(t)]}})}});const[Cv,h1]=br("icon"),Bv=e=>e==null?void 0:e.includes("/"),Iv={dot:Boolean,tag:Kt("i"),name:String,size:ln,badge:ln,color:String,badgeProps:Object,classPrefix:String};var Ov=Jn({name:Cv,props:Iv,setup(e,{slots:t}){const n=hr(Fh,null),r=tn(()=>e.classPrefix||(n==null?void 0:n.iconPrefix)||h1());return()=>{const{tag:s,dot:a,name:o,size:h,badge:m,color:S}=e,g=Bv(o);return Ze(Sv,Wr({dot:a,tag:s,class:[r.value,g?"":`${r.value}-${o}`],style:{color:S,fontSize:ur(h)},content:m},e.badgeProps),{default:()=>{var b;return[(b=t.default)==null?void 0:b.call(t),g&&Ze("img",{class:h1("image"),src:o},null)]}})}}});const Cs=yr(Ov),[Pv,Si]=br("loading"),kv=Array(12).fill(null).map((e,t)=>Ze("i",{class:Si("line",String(t+1))},null)),Lv=Ze("svg",{class:Si("circular"),viewBox:"25 25 50 50"},[Ze("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),Nv={size:ln,type:Kt("circular"),color:String,vertical:Boolean,textSize:ln,textColor:String};var Fv=Jn({name:Pv,props:Nv,setup(e,{slots:t}){const n=tn(()=>er({color:e.color},Z4(e.size))),r=()=>{const a=e.type==="spinner"?kv:Lv;return Ze("span",{class:Si("spinner",e.type),style:n.value},[t.icon?t.icon():a])},s=()=>{var a;if(t.default)return Ze("span",{class:Si("text"),style:{fontSize:ur(e.textSize),color:(a=e.textColor)!=null?a:e.color}},[t.default()])};return()=>{const{type:a,vertical:o}=e;return Ze("div",{class:Si([a,{vertical:o}]),"aria-live":"polite","aria-busy":!0},[r(),s()])}}});const $h=yr(Fv),[$v,ma]=br("button"),Vv=er({},Ph,{tag:Kt("button"),text:String,icon:String,type:Kt("default"),size:Kt("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:Kt("button"),loadingSize:ln,loadingText:String,loadingType:String,iconPosition:Kt("left")});var Hv=Jn({name:$v,props:Vv,emits:["click"],setup(e,{emit:t,slots:n}){const r=kh(),s=()=>n.loading?n.loading():Ze($h,{size:e.loadingSize,type:e.loadingType,class:ma("loading")},null),a=()=>{if(e.loading)return s();if(n.icon)return Ze("div",{class:ma("icon")},[n.icon()]);if(e.icon)return Ze(Cs,{name:e.icon,class:ma("icon"),classPrefix:e.iconPrefix},null)},o=()=>{let S;if(e.loading?S=e.loadingText:S=n.default?n.default():e.text,S)return Ze("span",{class:ma("text")},[S])},h=()=>{const{color:S,plain:g}=e;if(S){const b={color:g?S:"white"};return g||(b.background=S),S.includes("gradient")?b.border=0:b.borderColor=S,b}},m=S=>{e.loading?Ba(S):e.disabled||(t("click",S),r())};return()=>{const{tag:S,type:g,size:b,block:C,round:V,plain:ne,square:J,loading:pe,disabled:Ne,hairline:K,nativeType:Ce,iconPosition:de}=e,We=[ma([g,b,{plain:ne,block:C,round:V,square:J,loading:pe,disabled:Ne,hairline:K}]),{[fv]:K}];return Ze(S,{type:Ce,class:We,style:h(),disabled:Ne,onClick:m},{default:()=>[Ze("div",{class:ma("content")},[de==="left"&&a(),o(),de==="right"&&a()])]})}}});const Vh=yr(Hv),Hh={show:Boolean,zIndex:ln,overlay:cs,duration:ln,teleport:[String,Object],lockScroll:cs,lazyRender:cs,beforeClose:Function,overlayStyle:Object,overlayClass:fs,transitionAppear:Boolean,closeOnClickOverlay:cs};function Dv(e,t){return e>t?"horizontal":t>e?"vertical":""}function jv(){const e=Ft(0),t=Ft(0),n=Ft(0),r=Ft(0),s=Ft(0),a=Ft(0),o=Ft(""),h=Ft(!0),m=()=>o.value==="vertical",S=()=>o.value==="horizontal",g=()=>{n.value=0,r.value=0,s.value=0,a.value=0,o.value="",h.value=!0};return{move:V=>{const ne=V.touches[0];n.value=(ne.clientX<0?0:ne.clientX)-e.value,r.value=ne.clientY-t.value,s.value=Math.abs(n.value),a.value=Math.abs(r.value);const J=10;(!o.value||s.value<J&&a.value<J)&&(o.value=Dv(s.value,a.value)),h.value&&(s.value>u1||a.value>u1)&&(h.value=!1)},start:V=>{g(),e.value=V.touches[0].clientX,t.value=V.touches[0].clientY},reset:g,startX:e,startY:t,deltaX:n,deltaY:r,offsetX:s,offsetY:a,direction:o,isVertical:m,isHorizontal:S,isTap:h}}let ti=0;const d1="van-overflow-hidden";function Xv(e,t){const n=jv(),r="01",s="10",a=g=>{n.move(g);const b=n.deltaY.value>0?s:r,C=K4(g.target,e.value),{scrollHeight:V,offsetHeight:ne,scrollTop:J}=C;let pe="11";J===0?pe=ne>=V?"00":"01":J+ne>=V&&(pe="10"),pe!=="11"&&n.isVertical()&&!(parseInt(pe,2)&parseInt(b,2))&&Ba(g,!0)},o=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",a,{passive:!1}),ti||document.body.classList.add(d1),ti++},h=()=>{ti&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",a),ti--,ti||document.body.classList.remove(d1))},m=()=>t()&&o(),S=()=>t()&&h();Mh(m),Ni(S),Fi(S),Nn(t,g=>{g?o():h()})}function Dh(e){const t=Ft(!1);return Nn(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const Vl=()=>{var e;const{scopeId:t}=((e=oa())==null?void 0:e.vnode)||{};return t?{[t]:""}:null},[qv,Uv]=br("overlay"),Yv={show:Boolean,zIndex:ln,duration:ln,className:fs,lockScroll:cs,lazyRender:cs,customStyle:Object,teleport:[String,Object]};var Kv=Jn({name:qv,props:Yv,setup(e,{slots:t}){const n=Ft(),r=Dh(()=>e.show||!e.lazyRender),s=o=>{e.lockScroll&&Ba(o,!0)},a=r(()=>{var o;const h=er(J4(e.zIndex),e.customStyle);return Rn(e.duration)&&(h.animationDuration=`${e.duration}s`),Sf(Ze("div",{ref:n,style:h,class:[Uv(),e.className]},[(o=t.default)==null?void 0:o.call(t)]),[[nh,e.show]])});return Sc("touchmove",s,{target:n}),()=>{const o=Ze(eh,{name:"van-fade",appear:!0},{default:a});return e.teleport?Ze(Af,{to:e.teleport},{default:()=>[o]}):o}}});const Wv=yr(Kv),Gv=er({},Hh,{round:Boolean,position:Kt("center"),closeIcon:Kt("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:Kt("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[zv,_1]=br("popup");var Qv=Jn({name:zv,inheritAttrs:!1,props:Gv,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:n,slots:r}){let s,a;const o=Ft(),h=Ft(),m=Dh(()=>e.show||!e.lazyRender),S=tn(()=>{const Ve={zIndex:o.value};if(Rn(e.duration)){const He=e.position==="center"?"animationDuration":"transitionDuration";Ve[He]=`${e.duration}s`}return Ve}),g=()=>{s||(s=!0,o.value=e.zIndex!==void 0?+e.zIndex:gv(),t("open"))},b=()=>{s&&mv(e.beforeClose,{done(){s=!1,t("close"),t("update:show",!1)}})},C=Ve=>{t("clickOverlay",Ve),e.closeOnClickOverlay&&b()},V=()=>{if(e.overlay)return Ze(Wv,Wr({show:e.show,class:e.overlayClass,zIndex:o.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},Vl(),{onClick:C}),{default:r["overlay-content"]})},ne=Ve=>{t("clickCloseIcon",Ve),b()},J=()=>{if(e.closeable)return Ze(Cs,{role:"button",tabindex:0,name:e.closeIcon,class:[_1("close-icon",e.closeIconPosition),dv],classPrefix:e.iconPrefix,onClick:ne},null)};let pe;const Ne=()=>{pe&&clearTimeout(pe),pe=setTimeout(()=>{t("opened")})},K=()=>t("closed"),Ce=Ve=>t("keydown",Ve),de=m(()=>{var Ve;const{round:He,position:Ge,safeAreaInsetTop:Se,safeAreaInsetBottom:ze}=e;return Sf(Ze("div",Wr({ref:h,style:S.value,role:"dialog",tabindex:0,class:[_1({round:He,[Ge]:Ge}),{"van-safe-area-top":Se,"van-safe-area-bottom":ze}],onKeydown:Ce},n,Vl()),[(Ve=r.default)==null?void 0:Ve.call(r),J()]),[[nh,e.show]])}),We=()=>{const{position:Ve,transition:He,transitionAppear:Ge}=e,Se=Ve==="center"?"van-fade":`van-popup-slide-${Ve}`;return Ze(eh,{name:He||Se,appear:Ge,onAfterEnter:Ne,onAfterLeave:K},{default:de})};return Nn(()=>e.show,Ve=>{Ve&&!s&&(g(),n.tabindex===0&&ls(()=>{var He;(He=h.value)==null||He.focus()})),!Ve&&s&&(s=!1,t("close"))}),gc({popupRef:h}),Xv(h,()=>e.show&&e.lockScroll),Sc("popstate",()=>{e.closeOnPopstate&&(b(),a=!1)}),ia(()=>{e.show&&g()}),_0(()=>{a&&(t("update:show",!0),a=!1)}),Ni(()=>{e.show&&e.teleport&&(b(),a=!0)}),na(vv,()=>e.show),()=>e.teleport?Ze(Af,{to:e.teleport},{default:()=>[V(),We()]}):Ze(cr,null,[V(),We()])}});const jh=yr(Qv);let Zv=0;function Jv(){const e=oa(),{name:t="unknown"}=(e==null?void 0:e.type)||{};return`${t}-${++Zv}`}const[e5,va]=br("cell"),Xh={tag:Kt("div"),icon:String,size:String,title:ln,value:ln,label:ln,center:Boolean,isLink:Boolean,border:cs,iconPrefix:String,valueClass:fs,labelClass:fs,titleClass:fs,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},t5=er({},Xh,Ph);var n5=Jn({name:e5,props:t5,setup(e,{slots:t}){const n=kh(),r=()=>{if(t.label||Rn(e.label))return Ze("div",{class:[va("label"),e.labelClass]},[t.label?t.label():e.label])},s=()=>{var m;if(t.title||Rn(e.title)){const S=(m=t.title)==null?void 0:m.call(t);return Array.isArray(S)&&S.length===0?void 0:Ze("div",{class:[va("title"),e.titleClass],style:e.titleStyle},[S||Ze("span",null,[e.title]),r()])}},a=()=>{const m=t.value||t.default;if(m||Rn(e.value))return Ze("div",{class:[va("value"),e.valueClass]},[m?m():Ze("span",null,[e.value])])},o=()=>{if(t.icon)return t.icon();if(e.icon)return Ze(Cs,{name:e.icon,class:va("left-icon"),classPrefix:e.iconPrefix},null)},h=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const m=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return Ze(Cs,{name:m,class:va("right-icon")},null)}};return()=>{var m;const{tag:S,size:g,center:b,border:C,isLink:V,required:ne}=e,J=(m=e.clickable)!=null?m:V,pe={center:b,required:!!ne,clickable:J,borderless:!C};return g&&(pe[g]=!!g),Ze(S,{class:va(pe),role:J?"button":void 0,tabindex:J?0:void 0,onClick:n},{default:()=>{var Ne;return[o(),s(),a(),h(),(Ne=t.extra)==null?void 0:Ne.call(t)]}})}}});const r5=yr(n5);function qh(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function s5(e,t){if(qh(e)){if(t.required)return!1;if(t.validateEmpty===!1)return!0}return!(t.pattern&&!t.pattern.test(String(e)))}function a5(e,t){return new Promise(n=>{const r=t.validator(e,t);if(Ah(r)){r.then(n);return}n(r)})}function m1(e,t){const{message:n}=t;return To(n)?n(e,t):n||""}function i5({target:e}){e.composing=!0}function v1({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function o5(e,t){const n=Th();e.style.height="auto";let r=e.scrollHeight;if(Va(t)){const{maxHeight:s,minHeight:a}=t;s!==void 0&&(r=Math.min(r,s)),a!==void 0&&(r=Math.max(r,a))}r&&(e.style.height=`${r}px`,Ch(n))}function l5(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function ns(e){return[...e].length}function ll(e,t){return[...e].slice(0,t).join("")}const[c5,vr]=br("field"),u5={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:ln,max:Number,min:Number,formatter:Function,clearIcon:Kt("clear"),modelValue:D4(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:Kt("focus"),formatTrigger:Kt("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},f5=er({},Xh,u5,{rows:ln,type:Kt("text"),rules:Array,autosize:[Boolean,Object],labelWidth:ln,labelClass:fs,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var h5=Jn({name:c5,props:f5,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:t,slots:n}){const r=Jv(),s=Ls({status:"unvalidated",focused:!1,validateMessage:""}),a=Ft(),o=Ft(),h=Ft(),{parent:m}=j4(_v),S=()=>{var W;return String((W=e.modelValue)!=null?W:"")},g=W=>{if(Rn(e[W]))return e[W];if(m&&Rn(m.props[W]))return m.props[W]},b=tn(()=>{const W=g("readonly");if(e.clearable&&!W){const Be=S()!=="",ge=e.clearTrigger==="always"||e.clearTrigger==="focus"&&s.focused;return Be&&ge}return!1}),C=tn(()=>h.value&&n.input?h.value():e.modelValue),V=tn(()=>{var W;const Be=g("required");return Be==="auto"?(W=e.rules)==null?void 0:W.some(ge=>ge.required):Be}),ne=W=>W.reduce((Be,ge)=>Be.then(()=>{if(s.status==="failed")return;let{value:Qe}=C;if(ge.formatter&&(Qe=ge.formatter(Qe,ge)),!s5(Qe,ge)){s.status="failed",s.validateMessage=m1(Qe,ge);return}if(ge.validator)return qh(Qe)&&ge.validateEmpty===!1?void 0:a5(Qe,ge).then(ht=>{ht&&typeof ht=="string"?(s.status="failed",s.validateMessage=ht):ht===!1&&(s.status="failed",s.validateMessage=m1(Qe,ge))})}),Promise.resolve()),J=()=>{s.status="unvalidated",s.validateMessage=""},pe=()=>t("endValidate",{status:s.status,message:s.validateMessage}),Ne=(W=e.rules)=>new Promise(Be=>{J(),W?(t("startValidate"),ne(W).then(()=>{s.status==="failed"?(Be({name:e.name,message:s.validateMessage}),pe()):(s.status="passed",Be(),pe())})):Be()}),K=W=>{if(m&&e.rules){const{validateTrigger:Be}=m.props,ge=a1(Be).includes(W),Qe=e.rules.filter(ht=>ht.trigger?a1(ht.trigger).includes(W):ge);Qe.length&&Ne(Qe)}},Ce=W=>{var Be;const{maxlength:ge}=e;if(Rn(ge)&&ns(W)>+ge){const Qe=S();if(Qe&&ns(Qe)===+ge)return Qe;const ht=(Be=a.value)==null?void 0:Be.selectionEnd;if(s.focused&&ht){const gt=[...W],$=gt.length-+ge;return gt.splice(ht-$,$),gt.join("")}return ll(W,+ge)}return W},de=(W,Be="onChange")=>{var ge,Qe;const ht=W;W=Ce(W);const gt=ns(ht)-ns(W);if(e.type==="number"||e.type==="digit"){const D=e.type==="number";W=rv(W,D,D),Be==="onBlur"&&W!==""&&(e.min!==void 0||e.max!==void 0)&&(W=nv(+W,(ge=e.min)!=null?ge:-1/0,(Qe=e.max)!=null?Qe:1/0).toString())}let $=0;if(e.formatter&&Be===e.formatTrigger){const{formatter:D,maxlength:ie}=e;if(W=D(W),Rn(ie)&&ns(W)>+ie&&(W=ll(W,+ie)),a.value&&s.focused){const{selectionEnd:Ae}=a.value,le=ll(ht,Ae);$=ns(D(le))-ns(le)}}if(a.value&&a.value.value!==W)if(s.focused){let{selectionStart:D,selectionEnd:ie}=a.value;if(a.value.value=W,Rn(D)&&Rn(ie)){const Ae=ns(W);gt?(D-=gt,ie-=gt):$&&(D+=$,ie+=$),a.value.setSelectionRange(Math.min(D,Ae),Math.min(ie,Ae))}}else a.value.value=W;W!==e.modelValue&&t("update:modelValue",W)},We=W=>{W.target.composing||de(W.target.value)},Ve=()=>{var W;return(W=a.value)==null?void 0:W.blur()},He=()=>{var W;return(W=a.value)==null?void 0:W.focus()},Ge=()=>{const W=a.value;e.type==="textarea"&&e.autosize&&W&&o5(W,e.autosize)},Se=W=>{s.focused=!0,t("focus",W),ls(Ge),g("readonly")&&Ve()},ze=W=>{s.focused=!1,de(S(),"onBlur"),t("blur",W),!g("readonly")&&(K("onBlur"),ls(Ge),z4())},nt=W=>t("clickInput",W),Je=W=>t("clickLeftIcon",W),bt=W=>t("clickRightIcon",W),_t=W=>{Ba(W),t("update:modelValue",""),t("clear",W)},Xe=tn(()=>{if(typeof e.error=="boolean")return e.error;if(m&&m.props.showError&&s.status==="failed")return!0}),pt=tn(()=>{const W=g("labelWidth"),Be=g("labelAlign");if(W&&Be!=="top")return{width:ur(W)}}),it=W=>{W.keyCode===13&&(!(m&&m.props.submitOnEnter)&&e.type!=="textarea"&&Ba(W),e.type==="search"&&Ve()),t("keypress",W)},At=()=>e.id||`${r}-input`,Cn=()=>s.status,Fn=()=>{const W=vr("control",[g("inputAlign"),{error:Xe.value,custom:!!n.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(n.input)return Ze("div",{class:W,onClick:nt},[n.input()]);const Be={id:At(),ref:a,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:W,disabled:g("disabled"),readonly:g("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${r}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:ze,onFocus:Se,onInput:We,onClick:nt,onChange:v1,onKeypress:it,onCompositionend:v1,onCompositionstart:i5};return e.type==="textarea"?Ze("textarea",Be,null):Ze("input",Wr(l5(e.type),Be),null)},Bn=()=>{const W=n["left-icon"];if(e.leftIcon||W)return Ze("div",{class:vr("left-icon"),onClick:Je},[W?W():Ze(Cs,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},nn=()=>{const W=n["right-icon"];if(e.rightIcon||W)return Ze("div",{class:vr("right-icon"),onClick:bt},[W?W():Ze(Cs,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},vt=()=>{if(e.showWordLimit&&e.maxlength){const W=ns(S());return Ze("div",{class:vr("word-limit")},[Ze("span",{class:vr("word-num")},[W]),jr("/"),e.maxlength])}},M=()=>{if(m&&m.props.showErrorMessage===!1)return;const W=e.errorMessage||s.validateMessage;if(W){const Be=n["error-message"],ge=g("errorMessageAlign");return Ze("div",{class:vr("error-message",ge)},[Be?Be({message:W}):W])}},Gr=()=>{const W=g("labelWidth"),Be=g("labelAlign"),ge=g("colon")?":":"";if(n.label)return[n.label(),ge];if(e.label)return Ze("label",{id:`${r}-label`,for:n.input?void 0:At(),"data-allow-mismatch":"attribute",onClick:Qe=>{Ba(Qe),He()},style:Be==="top"&&W?{width:ur(W)}:void 0},[e.label+ge])},An=()=>[Ze("div",{class:vr("body")},[Fn(),b.value&&Ze(Cs,{ref:o,name:e.clearIcon,class:vr("clear")},null),nn(),n.button&&Ze("div",{class:vr("button")},[n.button()])]),vt(),M()];return gc({blur:Ve,focus:He,validate:Ne,formValue:C,resetValidation:J,getValidationStatus:Cn}),na(W4,{customValue:h,resetValidation:J,validateWithTrigger:K}),Nn(()=>e.modelValue,()=>{de(S()),J(),K("onChange"),ls(Ge)}),ia(()=>{de(S(),e.formatTrigger),ls(Ge)}),Sc("touchstart",_t,{target:tn(()=>{var W;return(W=o.value)==null?void 0:W.$el})}),()=>{const W=g("disabled"),Be=g("labelAlign"),ge=Bn(),Qe=()=>{const ht=Gr();return Be==="top"?[ge,ht].filter(Boolean):ht||[]};return Ze(r5,{size:e.size,class:vr({error:Xe.value,disabled:W,[`label-${Be}`]:Be}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:pt.value,valueClass:vr("value"),titleClass:[vr("label",[Be,{required:V.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:ge&&Be!=="top"?()=>ge:null,title:Qe,value:An,extra:n.extra})}}});const d5=yr(h5);let ni=0;function _5(e){e?(ni||document.body.classList.add("van-toast--unclickable"),ni++):ni&&(ni--,ni||document.body.classList.remove("van-toast--unclickable"))}const[m5,pa]=br("toast"),v5=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],p5={icon:String,show:Boolean,type:Kt("text"),overlay:Boolean,message:ln,iconSize:ln,duration:H4(2e3),position:Kt("middle"),teleport:[String,Object],wordBreak:String,className:fs,iconPrefix:String,transition:Kt("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:fs,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:ln};var Uh=Jn({name:m5,props:p5,emits:["update:show"],setup(e,{emit:t,slots:n}){let r,s=!1;const a=()=>{const b=e.show&&e.forbidClick;s!==b&&(s=b,_5(s))},o=b=>t("update:show",b),h=()=>{e.closeOnClick&&o(!1)},m=()=>clearTimeout(r),S=()=>{const{icon:b,type:C,iconSize:V,iconPrefix:ne,loadingType:J}=e;if(b||C==="success"||C==="fail")return Ze(Cs,{name:b||C,size:V,class:pa("icon"),classPrefix:ne},null);if(C==="loading")return Ze($h,{class:pa("loading"),size:V,type:J},null)},g=()=>{const{type:b,message:C}=e;if(n.message)return Ze("div",{class:pa("text")},[n.message()]);if(Rn(C)&&C!=="")return b==="html"?Ze("div",{key:0,class:pa("text"),innerHTML:String(C)},null):Ze("div",{class:pa("text")},[C])};return Nn(()=>[e.show,e.forbidClick],a),Nn(()=>[e.show,e.type,e.message,e.duration],()=>{m(),e.show&&e.duration>0&&(r=setTimeout(()=>{o(!1)},e.duration))}),ia(a),$i(a),()=>Ze(jh,Wr({class:[pa([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:h,onClosed:m,"onUpdate:show":o},Rh(e,v5)),{default:()=>[S(),g()]})}});function Yh(){const e=Ls({show:!1}),t=s=>{e.show=s},n=s=>{er(e,s,{transitionAppear:!0}),t(!0)},r=()=>t(!1);return gc({open:n,close:r,toggle:t}),{open:n,close:r,state:e,toggle:t}}function Kh(e){const t=rh(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}const b5={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let Aa=[],y5=!1,p1=er({},b5);const w5=new Map;function Wh(e){return Va(e)?e:{message:e}}function S5(){const{instance:e,unmount:t}=Kh({setup(){const n=Ft(""),{open:r,state:s,close:a,toggle:o}=Yh(),h=()=>{},m=()=>Ze(Uh,Wr(s,{onClosed:h,"onUpdate:show":o}),null);return Nn(n,S=>{s.message=S}),oa().render=m,{open:r,close:a,message:n}}});return e}function g5(){if(!Aa.length||y5){const e=S5();Aa.push(e)}return Aa[Aa.length-1]}function x5(e={}){if(!g0)return{};const t=g5(),n=Wh(e);return t.open(er({},p1,w5.get(n.type||p1.type),n)),t}const A5=e=>t=>x5(er({type:e},Wh(t))),E5=A5("loading"),R5=e=>{Aa.length&&Aa[0].close()};yr(Uh);const[M5,b1]=br("cell-group"),T5={title:String,inset:Boolean,border:cs};var C5=Jn({name:M5,inheritAttrs:!1,props:T5,setup(e,{slots:t,attrs:n}){const r=()=>{var a;return Ze("div",Wr({class:[b1({inset:e.inset}),{[hv]:e.border&&!e.inset}]},n,Vl()),[(a=t.default)==null?void 0:a.call(t)])},s=()=>Ze("div",{class:b1("title",{inset:e.inset})},[t.title?t.title():e.title]);return()=>e.title||t.title?Ze(cr,null,[s(),r()]):r()}});const B5=yr(C5),I5=yr(Tv),[O5,P5]=br("notify"),k5=["lockScroll","position","show","teleport","zIndex"],L5=er({},Hh,{type:Kt("danger"),color:String,message:ln,position:Kt("top"),className:fs,background:String,lockScroll:Boolean});var Gh=Jn({name:O5,props:L5,emits:["update:show"],setup(e,{emit:t,slots:n}){const r=s=>t("update:show",s);return()=>Ze(jh,Wr({class:[P5([e.type]),e.className],style:{color:e.color,background:e.background},overlay:!1,duration:.2,"onUpdate:show":r},Rh(e,k5)),{default:()=>[n.default?n.default():e.message]})}});let y1,Ia;const N5=e=>Va(e)?e:{message:e};function F5(){({instance:Ia}=Kh({setup(){const{state:e,toggle:t}=Yh();return()=>Ze(Gh,Wr(e,{"onUpdate:show":t}),null)}}))}const $5=()=>({type:"danger",color:void 0,message:"",onClose:void 0,onClick:void 0,onOpened:void 0,duration:3e3,position:void 0,className:"",lockScroll:!1,background:void 0});let V5=$5();const H5=()=>{Ia&&Ia.toggle(!1)};function so(e){if(g0)return Ia||F5(),e=er({},V5,N5(e)),Ia.open(e),clearTimeout(y1),e.duration>0&&(y1=setTimeout(H5,e.duration)),Ia}yr(Gh);var D5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function j5(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zh={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(D5,function(){function n(L){return new Int8Array(L)}function r(L){return new Int16Array(L)}function s(L){return new Int32Array(L)}function a(L){return new Float32Array(L)}function o(L){return new Float64Array(L)}function h(L){if(L.length==1)return a(L[0]);var re=L[0];L=L.slice(1);for(var he=[],se=0;se<re;se++)he.push(h(L));return he}function m(L){if(L.length==1)return s(L[0]);var re=L[0];L=L.slice(1);for(var he=[],se=0;se<re;se++)he.push(m(L));return he}function S(L){if(L.length==1)return r(L[0]);var re=L[0];L=L.slice(1);for(var he=[],se=0;se<re;se++)he.push(S(L));return he}function g(L){if(L.length==1)return new Array(L[0]);var re=L[0];L=L.slice(1);for(var he=[],se=0;se<re;se++)he.push(g(L));return he}var b={};b.fill=function(L,re,he,se){if(arguments.length==2)for(var xe=0;xe<L.length;xe++)L[xe]=arguments[1];else for(var xe=re;xe<he;xe++)L[xe]=se};var C={};C.arraycopy=function(L,re,he,se,xe){for(var ae=re+xe;re<ae;)he[se++]=L[re++]};var V={};V.SQRT2=1.4142135623730951,V.FAST_LOG10=function(L){return Math.log10(L)},V.FAST_LOG10_X=function(L,re){return Math.log10(L)*re};function ne(L){this.ordinal=L}ne.short_block_allowed=new ne(0),ne.short_block_coupled=new ne(1),ne.short_block_dispensed=new ne(2),ne.short_block_forced=new ne(3);var J={};J.MAX_VALUE=34028235e31;function pe(L){this.ordinal=L}pe.vbr_off=new pe(0),pe.vbr_mt=new pe(1),pe.vbr_rh=new pe(2),pe.vbr_abr=new pe(3),pe.vbr_mtrh=new pe(4),pe.vbr_default=pe.vbr_mtrh;var Ne=function(L){},K={System:C,VbrMode:pe,Float:J,ShortBlock:ne,Util:V,Arrays:b,new_array_n:g,new_byte:n,new_double:o,new_float:a,new_float_n:h,new_int:s,new_int_n:m,new_short:r,new_short_n:S,assert:Ne},Ce=K.System,de=K.Util,We=K.Arrays,Ve=K.new_float;function He(){var L=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*de.SQRT2*.5/2384e-9,.017876148*de.SQRT2*.5/2384e-9,.003134727*de.SQRT2*.5/2384e-9,.002457142*de.SQRT2*.5/2384e-9,971317e-9*de.SQRT2*.5/2384e-9,218868e-9*de.SQRT2*.5/2384e-9,101566e-9*de.SQRT2*.5/2384e-9,13828e-9*de.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],re=12,he=36,se=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],xe=se[M.SHORT_TYPE],ae=se[M.SHORT_TYPE],me=se[M.SHORT_TYPE],Ie=se[M.SHORT_TYPE],ke=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function U(O,H,i){for(var z=10,G=H+238-14-286,j=-15;j<0;j++){var f,E,I;f=L[z+-10],E=O[G+-224]*f,I=O[H+224]*f,f=L[z+-9],E+=O[G+-160]*f,I+=O[H+160]*f,f=L[z+-8],E+=O[G+-96]*f,I+=O[H+96]*f,f=L[z+-7],E+=O[G+-32]*f,I+=O[H+32]*f,f=L[z+-6],E+=O[G+32]*f,I+=O[H+-32]*f,f=L[z+-5],E+=O[G+96]*f,I+=O[H+-96]*f,f=L[z+-4],E+=O[G+160]*f,I+=O[H+-160]*f,f=L[z+-3],E+=O[G+224]*f,I+=O[H+-224]*f,f=L[z+-2],E+=O[H+-256]*f,I-=O[G+256]*f,f=L[z+-1],E+=O[H+-192]*f,I-=O[G+192]*f,f=L[z+0],E+=O[H+-128]*f,I-=O[G+128]*f,f=L[z+1],E+=O[H+-64]*f,I-=O[G+64]*f,f=L[z+2],E+=O[H+0]*f,I-=O[G+0]*f,f=L[z+3],E+=O[H+64]*f,I-=O[G+-64]*f,f=L[z+4],E+=O[H+128]*f,I-=O[G+-128]*f,f=L[z+5],E+=O[H+192]*f,I-=O[G+-192]*f,E*=L[z+6],f=I-E,i[30+j*2]=I+E,i[31+j*2]=L[z+7]*f,z+=18,H--,G++}{var E,I,P,F;I=O[H+-16]*L[z+-10],E=O[H+-32]*L[z+-2],I+=(O[H+-48]-O[H+16])*L[z+-9],E+=O[H+-96]*L[z+-1],I+=(O[H+-80]+O[H+48])*L[z+-8],E+=O[H+-160]*L[z+0],I+=(O[H+-112]-O[H+80])*L[z+-7],E+=O[H+-224]*L[z+1],I+=(O[H+-144]+O[H+112])*L[z+-6],E-=O[H+32]*L[z+2],I+=(O[H+-176]-O[H+144])*L[z+-5],E-=O[H+96]*L[z+3],I+=(O[H+-208]+O[H+176])*L[z+-4],E-=O[H+160]*L[z+4],I+=(O[H+-240]-O[H+208])*L[z+-3],E-=O[H+224],P=E-I,F=E+I,I=i[14],E=i[15]-I,i[31]=F+I,i[30]=P+E,i[15]=P-E,i[14]=F-I}{var l;l=i[28]-i[0],i[0]+=i[28],i[28]=l*L[z+-2*18+7],l=i[29]-i[1],i[1]+=i[29],i[29]=l*L[z+-2*18+7],l=i[26]-i[2],i[2]+=i[26],i[26]=l*L[z+-4*18+7],l=i[27]-i[3],i[3]+=i[27],i[27]=l*L[z+-4*18+7],l=i[24]-i[4],i[4]+=i[24],i[24]=l*L[z+-6*18+7],l=i[25]-i[5],i[5]+=i[25],i[25]=l*L[z+-6*18+7],l=i[22]-i[6],i[6]+=i[22],i[22]=l*de.SQRT2,l=i[23]-i[7],i[7]+=i[23],i[23]=l*de.SQRT2-i[7],i[7]-=i[6],i[22]-=i[7],i[23]-=i[22],l=i[6],i[6]=i[31]-l,i[31]=i[31]+l,l=i[7],i[7]=i[30]-l,i[30]=i[30]+l,l=i[22],i[22]=i[15]-l,i[15]=i[15]+l,l=i[23],i[23]=i[14]-l,i[14]=i[14]+l,l=i[20]-i[8],i[8]+=i[20],i[20]=l*L[z+-10*18+7],l=i[21]-i[9],i[9]+=i[21],i[21]=l*L[z+-10*18+7],l=i[18]-i[10],i[10]+=i[18],i[18]=l*L[z+-12*18+7],l=i[19]-i[11],i[11]+=i[19],i[19]=l*L[z+-12*18+7],l=i[16]-i[12],i[12]+=i[16],i[16]=l*L[z+-14*18+7],l=i[17]-i[13],i[13]+=i[17],i[17]=l*L[z+-14*18+7],l=-i[20]+i[24],i[20]+=i[24],i[24]=l*L[z+-12*18+7],l=-i[21]+i[25],i[21]+=i[25],i[25]=l*L[z+-12*18+7],l=i[4]-i[8],i[4]+=i[8],i[8]=l*L[z+-12*18+7],l=i[5]-i[9],i[5]+=i[9],i[9]=l*L[z+-12*18+7],l=i[0]-i[12],i[0]+=i[12],i[12]=l*L[z+-4*18+7],l=i[1]-i[13],i[1]+=i[13],i[13]=l*L[z+-4*18+7],l=i[16]-i[28],i[16]+=i[28],i[28]=l*L[z+-4*18+7],l=-i[17]+i[29],i[17]+=i[29],i[29]=l*L[z+-4*18+7],l=de.SQRT2*(i[2]-i[10]),i[2]+=i[10],i[10]=l,l=de.SQRT2*(i[3]-i[11]),i[3]+=i[11],i[11]=l,l=de.SQRT2*(-i[18]+i[26]),i[18]+=i[26],i[26]=l-i[18],l=de.SQRT2*(-i[19]+i[27]),i[19]+=i[27],i[27]=l-i[19],l=i[2],i[19]-=i[3],i[3]-=l,i[2]=i[31]-l,i[31]+=l,l=i[3],i[11]-=i[19],i[18]-=l,i[3]=i[30]-l,i[30]+=l,l=i[18],i[27]-=i[11],i[19]-=l,i[18]=i[15]-l,i[15]+=l,l=i[19],i[10]-=l,i[19]=i[14]-l,i[14]+=l,l=i[10],i[11]-=l,i[10]=i[23]-l,i[23]+=l,l=i[11],i[26]-=l,i[11]=i[22]-l,i[22]+=l,l=i[26],i[27]-=l,i[26]=i[7]-l,i[7]+=l,l=i[27],i[27]=i[6]-l,i[6]+=l,l=de.SQRT2*(i[0]-i[4]),i[0]+=i[4],i[4]=l,l=de.SQRT2*(i[1]-i[5]),i[1]+=i[5],i[5]=l,l=de.SQRT2*(i[16]-i[20]),i[16]+=i[20],i[20]=l,l=de.SQRT2*(i[17]-i[21]),i[17]+=i[21],i[21]=l,l=-de.SQRT2*(i[8]-i[12]),i[8]+=i[12],i[12]=l-i[8],l=-de.SQRT2*(i[9]-i[13]),i[9]+=i[13],i[13]=l-i[9],l=-de.SQRT2*(i[25]-i[29]),i[25]+=i[29],i[29]=l-i[25],l=-de.SQRT2*(i[24]+i[28]),i[24]-=i[28],i[28]=l-i[24],l=i[24]-i[16],i[24]=l,l=i[20]-l,i[20]=l,l=i[28]-l,i[28]=l,l=i[25]-i[17],i[25]=l,l=i[21]-l,i[21]=l,l=i[29]-l,i[29]=l,l=i[17]-i[1],i[17]=l,l=i[9]-l,i[9]=l,l=i[25]-l,i[25]=l,l=i[5]-l,i[5]=l,l=i[21]-l,i[21]=l,l=i[13]-l,i[13]=l,l=i[29]-l,i[29]=l,l=i[1]-i[0],i[1]=l,l=i[16]-l,i[16]=l,l=i[17]-l,i[17]=l,l=i[8]-l,i[8]=l,l=i[9]-l,i[9]=l,l=i[24]-l,i[24]=l,l=i[25]-l,i[25]=l,l=i[4]-l,i[4]=l,l=i[5]-l,i[5]=l,l=i[20]-l,i[20]=l,l=i[21]-l,i[21]=l,l=i[12]-l,i[12]=l,l=i[13]-l,i[13]=l,l=i[28]-l,i[28]=l,l=i[29]-l,i[29]=l,l=i[0],i[0]+=i[31],i[31]-=l,l=i[1],i[1]+=i[30],i[30]-=l,l=i[16],i[16]+=i[15],i[15]-=l,l=i[17],i[17]+=i[14],i[14]-=l,l=i[8],i[8]+=i[23],i[23]-=l,l=i[9],i[9]+=i[22],i[22]-=l,l=i[24],i[24]+=i[7],i[7]-=l,l=i[25],i[25]+=i[6],i[6]-=l,l=i[4],i[4]+=i[27],i[27]-=l,l=i[5],i[5]+=i[26],i[26]-=l,l=i[20],i[20]+=i[11],i[11]-=l,l=i[21],i[21]+=i[10],i[10]-=l,l=i[12],i[12]+=i[19],i[19]-=l,l=i[13],i[13]+=i[18],i[18]-=l,l=i[28],i[28]+=i[3],i[3]-=l,l=i[29],i[29]+=i[2],i[2]-=l}}function we(O,H){for(var i=0;i<3;i++){var z,G,j,f,E,I;f=O[H+2*3]*se[M.SHORT_TYPE][0]-O[H+5*3],z=O[H+0*3]*se[M.SHORT_TYPE][2]-O[H+3*3],G=f+z,j=f-z,f=O[H+5*3]*se[M.SHORT_TYPE][0]+O[H+2*3],z=O[H+3*3]*se[M.SHORT_TYPE][2]+O[H+0*3],E=f+z,I=-f+z,z=(O[H+1*3]*se[M.SHORT_TYPE][1]-O[H+4*3])*2069978111953089e-26,f=(O[H+4*3]*se[M.SHORT_TYPE][1]+O[H+1*3])*2069978111953089e-26,O[H+3*0]=G*190752519173728e-25+z,O[H+3*5]=-E*190752519173728e-25+f,j=j*.8660254037844387*1907525191737281e-26,E=E*.5*1907525191737281e-26+f,O[H+3*1]=j-E,O[H+3*2]=j+E,G=G*.5*1907525191737281e-26-z,I=I*.8660254037844387*1907525191737281e-26,O[H+3*3]=G+I,O[H+3*4]=G-I,H++}}function B(O,H,i){var z,G;{var j,f,E,I,P,F,l,A;j=i[17]-i[9],E=i[15]-i[11],I=i[14]-i[12],P=i[0]+i[8],F=i[1]+i[7],l=i[2]+i[6],A=i[3]+i[5],O[H+17]=P+l-A-(F-i[4]),G=(P+l-A)*ae[19]+(F-i[4]),z=(j-E-I)*ae[18],O[H+5]=z+G,O[H+6]=z-G,f=(i[16]-i[10])*ae[18],F=F*ae[19]+i[4],z=j*ae[12]+f+E*ae[13]+I*ae[14],G=-P*ae[16]+F-l*ae[17]+A*ae[15],O[H+1]=z+G,O[H+2]=z-G,z=j*ae[13]-f-E*ae[14]+I*ae[12],G=-P*ae[17]+F-l*ae[15]+A*ae[16],O[H+9]=z+G,O[H+10]=z-G,z=j*ae[14]-f+E*ae[12]-I*ae[13],G=P*ae[15]-F+l*ae[16]-A*ae[17],O[H+13]=z+G,O[H+14]=z-G}{var y,d,w,x,u,_,v,k;y=i[8]-i[0],w=i[6]-i[2],x=i[5]-i[3],u=i[17]+i[9],_=i[16]+i[10],v=i[15]+i[11],k=i[14]+i[12],O[H+0]=u+v+k+(_+i[13]),z=(u+v+k)*ae[19]-(_+i[13]),G=(y-w+x)*ae[18],O[H+11]=z+G,O[H+12]=z-G,d=(i[7]-i[1])*ae[18],_=i[13]-_*ae[19],z=u*ae[15]-_+v*ae[16]+k*ae[17],G=y*ae[14]+d+w*ae[12]+x*ae[13],O[H+3]=z+G,O[H+4]=z-G,z=-u*ae[17]+_-v*ae[15]-k*ae[16],G=y*ae[13]+d-w*ae[14]-x*ae[12],O[H+7]=z+G,O[H+8]=z-G,z=-u*ae[16]+_-v*ae[17]-k*ae[15],G=y*ae[12]-d+w*ae[13]-x*ae[14],O[H+15]=z+G,O[H+16]=z-G}}this.mdct_sub48=function(O,H,i){for(var z=H,G=286,j=0;j<O.channels_out;j++){for(var f=0;f<O.mode_gr;f++){for(var E,I=O.l3_side.tt[f][j],P=I.xr,F=0,l=O.sb_sample[j][1-f],A=0,y=0;y<18/2;y++)for(U(z,G,l[A]),U(z,G+32,l[A+1]),A+=2,G+=64,E=1;E<32;E+=2)l[A-1][E]*=-1;for(E=0;E<32;E++,F+=18){var d=I.block_type,w=O.sb_sample[j][f],x=O.sb_sample[j][1-f];if(I.mixed_block_flag!=0&&E<2&&(d=0),O.amp_filter[E]<1e-12)We.fill(P,F+0,F+18,0);else{if(O.amp_filter[E]<1)for(var y=0;y<18;y++)x[y][ke[E]]*=O.amp_filter[E];if(d==M.SHORT_TYPE){for(var y=-re/4;y<0;y++){var u=se[M.SHORT_TYPE][y+3];P[F+y*3+9]=w[9+y][ke[E]]*u-w[8-y][ke[E]],P[F+y*3+18]=w[14-y][ke[E]]*u+w[15+y][ke[E]],P[F+y*3+10]=w[15+y][ke[E]]*u-w[14-y][ke[E]],P[F+y*3+19]=x[2-y][ke[E]]*u+x[3+y][ke[E]],P[F+y*3+11]=x[3+y][ke[E]]*u-x[2-y][ke[E]],P[F+y*3+20]=x[8-y][ke[E]]*u+x[9+y][ke[E]]}we(P,F)}else{for(var _=Ve(18),y=-he/4;y<0;y++){var v,k;v=se[d][y+27]*x[y+9][ke[E]]+se[d][y+36]*x[8-y][ke[E]],k=se[d][y+9]*w[y+9][ke[E]]-se[d][y+18]*w[8-y][ke[E]],_[y+9]=v-k*xe[3+y+9],_[y+18]=v*xe[3+y+9]+k}B(P,F,_)}}if(d!=M.SHORT_TYPE&&E!=0)for(var y=7;y>=0;--y){var ue,q;ue=P[F+y]*me[20+y]+P[F+-1-y]*Ie[28+y],q=P[F+y]*Ie[28+y]-P[F+-1-y]*me[20+y],P[F+-1-y]=ue,P[F+y]=q}}}if(z=i,G=286,O.mode_gr==1)for(var Q=0;Q<18;Q++)Ce.arraycopy(O.sb_sample[j][1][Q],0,O.sb_sample[j][0][Q],0,32)}}}var Ge=He,Se=K.System,ze=K.new_float,nt=K.new_float_n;function Je(){this.l=ze(M.SBMAX_l),this.s=nt([M.SBMAX_s,3]);var L=this;this.assign=function(re){Se.arraycopy(re.l,0,L.l,0,M.SBMAX_l);for(var he=0;he<M.SBMAX_s;he++)for(var se=0;se<3;se++)L.s[he][se]=re.s[he][se]}}var bt=Je;function _t(){this.thm=new bt,this.en=new bt}var Xe=_t,pt=K.System,it=K.VbrMode,At=K.new_array_n,Cn=K.new_float,Fn=K.new_float_n,Bn=K.new_int,nn=K.assert;vt.ENCDELAY=576,vt.POSTDELAY=1152,vt.MDCTDELAY=48,vt.FFTOFFSET=224+vt.MDCTDELAY,vt.DECDELAY=528,vt.SBLIMIT=32,vt.CBANDS=64,vt.SBPSY_l=21,vt.SBPSY_s=12,vt.SBMAX_l=22,vt.SBMAX_s=13,vt.PSFB21=6,vt.PSFB12=6,vt.BLKSIZE=1024,vt.HBLKSIZE=vt.BLKSIZE/2+1,vt.BLKSIZE_s=256,vt.HBLKSIZE_s=vt.BLKSIZE_s/2+1,vt.NORM_TYPE=0,vt.START_TYPE=1,vt.SHORT_TYPE=2,vt.STOP_TYPE=3,vt.MPG_MD_LR_LR=0,vt.MPG_MD_LR_I=1,vt.MPG_MD_MS_LR=2,vt.MPG_MD_MS_I=3,vt.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function vt(){var L=Ge,re=Xe,he=vt.FFTOFFSET,se=vt.MPG_MD_MS_LR,xe=null;this.psy=null;var ae=null,me=null,Ie=null;this.setModules=function(O,H,i,z){xe=O,this.psy=H,ae=H,me=z,Ie=i};var ke=new L;function U(O){var H,i;if(O.ATH.useAdjust==0){O.ATH.adjust=1;return}if(i=O.loudness_sq[0][0],H=O.loudness_sq[1][0],O.channels_out==2?(i+=O.loudness_sq[0][1],H+=O.loudness_sq[1][1]):(i+=i,H+=H),O.mode_gr==2&&(i=Math.max(i,H)),i*=.5,i*=O.ATH.aaSensitivityP,i>.03125)O.ATH.adjust>=1?O.ATH.adjust=1:O.ATH.adjust<O.ATH.adjustLimit&&(O.ATH.adjust=O.ATH.adjustLimit),O.ATH.adjustLimit=1;else{var z=31.98*i+625e-6;O.ATH.adjust>=z?(O.ATH.adjust*=z*.075+.925,O.ATH.adjust<z&&(O.ATH.adjust=z)):O.ATH.adjustLimit>=z?O.ATH.adjust=z:O.ATH.adjust<O.ATH.adjustLimit&&(O.ATH.adjust=O.ATH.adjustLimit),O.ATH.adjustLimit=z}}function we(O){var H,i;for(nn(0<=O.bitrate_index&&O.bitrate_index<16),nn(0<=O.mode_ext&&O.mode_ext<4),O.bitrate_stereoMode_Hist[O.bitrate_index][4]++,O.bitrate_stereoMode_Hist[15][4]++,O.channels_out==2&&(O.bitrate_stereoMode_Hist[O.bitrate_index][O.mode_ext]++,O.bitrate_stereoMode_Hist[15][O.mode_ext]++),H=0;H<O.mode_gr;++H)for(i=0;i<O.channels_out;++i){var z=O.l3_side.tt[H][i].block_type|0;O.l3_side.tt[H][i].mixed_block_flag!=0&&(z=4),O.bitrate_blockType_Hist[O.bitrate_index][z]++,O.bitrate_blockType_Hist[O.bitrate_index][5]++,O.bitrate_blockType_Hist[15][z]++,O.bitrate_blockType_Hist[15][5]++}}function B(O,H){var i=O.internal_flags,z,G;if(i.lame_encode_frame_init==0){var j,f,E=Cn(2014),I=Cn(2014);for(i.lame_encode_frame_init=1,j=0,f=0;j<286+576*(1+i.mode_gr);++j)j<576*i.mode_gr?(E[j]=0,i.channels_out==2&&(I[j]=0)):(E[j]=H[0][f],i.channels_out==2&&(I[j]=H[1][f]),++f);for(G=0;G<i.mode_gr;G++)for(z=0;z<i.channels_out;z++)i.l3_side.tt[G][z].block_type=vt.SHORT_TYPE;ke.mdct_sub48(i,E,I),nn(i.mf_size>=vt.BLKSIZE+O.framesize-vt.FFTOFFSET),nn(i.mf_size>=512+O.framesize-32)}}this.lame_encode_mp3_frame=function(O,H,i,z,G,j){var f,E=At([2,2]);E[0][0]=new re,E[0][1]=new re,E[1][0]=new re,E[1][1]=new re;var I=At([2,2]);I[0][0]=new re,I[0][1]=new re,I[1][0]=new re,I[1][1]=new re;var P,F=[null,null],l=O.internal_flags,A=Fn([2,4]),y=[.5,.5],d=[[0,0],[0,0]],w=[[0,0],[0,0]],x,u,_;if(F[0]=H,F[1]=i,l.lame_encode_frame_init==0&&B(O,F),l.padding=0,(l.slot_lag-=l.frac_SpF)<0&&(l.slot_lag+=O.out_samplerate,l.padding=1),l.psymodel!=0){var v,k=[null,null],ue=0,q=Bn(2);for(_=0;_<l.mode_gr;_++){for(u=0;u<l.channels_out;u++)k[u]=F[u],ue=576+_*576-vt.FFTOFFSET;if(O.VBR==it.vbr_mtrh||O.VBR==it.vbr_mt?v=ae.L3psycho_anal_vbr(O,k,ue,_,E,I,d[_],w[_],A[_],q):v=ae.L3psycho_anal_ns(O,k,ue,_,E,I,d[_],w[_],A[_],q),v!=0)return-4;for(O.mode==_n.JOINT_STEREO&&(y[_]=A[_][2]+A[_][3],y[_]>0&&(y[_]=A[_][3]/y[_])),u=0;u<l.channels_out;u++){var Q=l.l3_side.tt[_][u];Q.block_type=q[u],Q.mixed_block_flag=0}}}else for(_=0;_<l.mode_gr;_++)for(u=0;u<l.channels_out;u++)l.l3_side.tt[_][u].block_type=vt.NORM_TYPE,l.l3_side.tt[_][u].mixed_block_flag=0,w[_][u]=d[_][u]=700;if(U(l),ke.mdct_sub48(l,F[0],F[1]),l.mode_ext=vt.MPG_MD_LR_LR,O.force_ms)l.mode_ext=vt.MPG_MD_MS_LR;else if(O.mode==_n.JOINT_STEREO){var c=0,p=0;for(_=0;_<l.mode_gr;_++)for(u=0;u<l.channels_out;u++)c+=w[_][u],p+=d[_][u];if(c<=1*p){var fe=l.l3_side.tt[0],ve=l.l3_side.tt[l.mode_gr-1];fe[0].block_type==fe[1].block_type&&ve[0].block_type==ve[1].block_type&&(l.mode_ext=vt.MPG_MD_MS_LR)}}if(l.mode_ext==se?(P=I,x=w):(P=E,x=d),O.analysis&&l.pinfo!=null)for(_=0;_<l.mode_gr;_++)for(u=0;u<l.channels_out;u++)l.pinfo.ms_ratio[_]=l.ms_ratio[_],l.pinfo.ms_ener_ratio[_]=y[_],l.pinfo.blocktype[_][u]=l.l3_side.tt[_][u].block_type,l.pinfo.pe[_][u]=x[_][u],pt.arraycopy(l.l3_side.tt[_][u].xr,0,l.pinfo.xr[_][u],0,576),l.mode_ext==se&&(l.pinfo.ers[_][u]=l.pinfo.ers[_][u+2],pt.arraycopy(l.pinfo.energy[_][u+2],0,l.pinfo.energy[_][u],0,l.pinfo.energy[_][u].length));if(O.VBR==it.vbr_off||O.VBR==it.vbr_abr){var Oe,qe;for(Oe=0;Oe<18;Oe++)l.nsPsy.pefirbuf[Oe]=l.nsPsy.pefirbuf[Oe+1];for(qe=0,_=0;_<l.mode_gr;_++)for(u=0;u<l.channels_out;u++)qe+=x[_][u];for(l.nsPsy.pefirbuf[18]=qe,qe=l.nsPsy.pefirbuf[9],Oe=0;Oe<9;Oe++)qe+=(l.nsPsy.pefirbuf[Oe]+l.nsPsy.pefirbuf[18-Oe])*vt.fircoef[Oe];for(qe=670*5*l.mode_gr*l.channels_out/qe,_=0;_<l.mode_gr;_++)for(u=0;u<l.channels_out;u++)x[_][u]*=qe}if(l.iteration_loop.iteration_loop(O,x,y,P),xe.format_bitstream(O),f=xe.copy_buffer(l,z,G,j,1),O.bWriteVbrTag&&me.addVbrFrame(O),O.analysis&&l.pinfo!=null){for(u=0;u<l.channels_out;u++){var Le;for(Le=0;Le<he;Le++)l.pinfo.pcmdata[u][Le]=l.pinfo.pcmdata[u][Le+O.framesize];for(Le=he;Le<1600;Le++)l.pinfo.pcmdata[u][Le]=F[u][Le-he]}Ie.set_frame_pinfo(O,P)}return we(l),f}}var M=vt,Gr=K.Util,An=K.new_float;function W(){var L=An(M.BLKSIZE),re=An(M.BLKSIZE_s/2),he=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function se(ae,me,Ie){var ke=0,U,we,B;Ie<<=1;var O=me+Ie;U=4;do{var H,i,z,G,j,f,E;E=U>>1,G=U,j=U<<1,f=j+G,U=j<<1,we=me,B=we+E;do{var I,P,F,l;P=ae[we+0]-ae[we+G],I=ae[we+0]+ae[we+G],l=ae[we+j]-ae[we+f],F=ae[we+j]+ae[we+f],ae[we+j]=I-F,ae[we+0]=I+F,ae[we+f]=P-l,ae[we+G]=P+l,P=ae[B+0]-ae[B+G],I=ae[B+0]+ae[B+G],l=Gr.SQRT2*ae[B+f],F=Gr.SQRT2*ae[B+j],ae[B+j]=I-F,ae[B+0]=I+F,ae[B+f]=P-l,ae[B+G]=P+l,B+=U,we+=U}while(we<O);for(i=he[ke+0],H=he[ke+1],z=1;z<E;z++){var A,y;A=1-2*H*H,y=2*H*i,we=me+z,B=me+G-z;do{var d,w,x,I,P,u,F,_,l,v;w=y*ae[we+G]-A*ae[B+G],d=A*ae[we+G]+y*ae[B+G],P=ae[we+0]-d,I=ae[we+0]+d,u=ae[B+0]-w,x=ae[B+0]+w,w=y*ae[we+f]-A*ae[B+f],d=A*ae[we+f]+y*ae[B+f],l=ae[we+j]-d,F=ae[we+j]+d,v=ae[B+j]-w,_=ae[B+j]+w,w=H*F-i*v,d=i*F+H*v,ae[we+j]=I-d,ae[we+0]=I+d,ae[B+f]=u-w,ae[B+G]=u+w,w=i*_-H*l,d=H*_+i*l,ae[B+j]=x-d,ae[B+0]=x+d,ae[we+f]=P-w,ae[we+G]=P+w,B+=U,we+=U}while(we<O);A=i,i=A*he[ke+0]-H*he[ke+1],H=A*he[ke+1]+H*he[ke+0]}ke+=2}while(U<Ie)}var xe=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(ae,me,Ie,ke,U){for(var we=0;we<3;we++){var B=M.BLKSIZE_s/2,O=65535&576/3*(we+1),H=M.BLKSIZE_s/8-1;do{var i,z,G,j,f,E=xe[H<<2]&255;i=re[E]*ke[Ie][U+E+O],f=re[127-E]*ke[Ie][U+E+O+128],z=i-f,i=i+f,G=re[E+64]*ke[Ie][U+E+O+64],f=re[63-E]*ke[Ie][U+E+O+192],j=G-f,G=G+f,B-=4,me[we][B+0]=i+G,me[we][B+2]=i-G,me[we][B+1]=z+j,me[we][B+3]=z-j,i=re[E+1]*ke[Ie][U+E+O+1],f=re[126-E]*ke[Ie][U+E+O+129],z=i-f,i=i+f,G=re[E+65]*ke[Ie][U+E+O+65],f=re[62-E]*ke[Ie][U+E+O+193],j=G-f,G=G+f,me[we][B+M.BLKSIZE_s/2+0]=i+G,me[we][B+M.BLKSIZE_s/2+2]=i-G,me[we][B+M.BLKSIZE_s/2+1]=z+j,me[we][B+M.BLKSIZE_s/2+3]=z-j}while(--H>=0);se(me[we],B,M.BLKSIZE_s/2)}},this.fft_long=function(ae,me,Ie,ke,U){var we=M.BLKSIZE/8-1,B=M.BLKSIZE/2;do{var O,H,i,z,G,j=xe[we]&255;O=L[j]*ke[Ie][U+j],G=L[j+512]*ke[Ie][U+j+512],H=O-G,O=O+G,i=L[j+256]*ke[Ie][U+j+256],G=L[j+768]*ke[Ie][U+j+768],z=i-G,i=i+G,B-=4,me[B+0]=O+i,me[B+2]=O-i,me[B+1]=H+z,me[B+3]=H-z,O=L[j+1]*ke[Ie][U+j+1],G=L[j+513]*ke[Ie][U+j+513],H=O-G,O=O+G,i=L[j+257]*ke[Ie][U+j+257],G=L[j+769]*ke[Ie][U+j+769],z=i-G,i=i+G,me[B+M.BLKSIZE/2+0]=O+i,me[B+M.BLKSIZE/2+2]=O-i,me[B+M.BLKSIZE/2+1]=H+z,me[B+M.BLKSIZE/2+3]=H-z}while(--we>=0);se(me,B,M.BLKSIZE/2)},this.init_fft=function(ae){for(var me=0;me<M.BLKSIZE;me++)L[me]=.42-.5*Math.cos(2*Math.PI*(me+.5)/M.BLKSIZE)+.08*Math.cos(4*Math.PI*(me+.5)/M.BLKSIZE);for(var me=0;me<M.BLKSIZE_s/2;me++)re[me]=.5*(1-Math.cos(2*Math.PI*(me+.5)/M.BLKSIZE_s))}}var Be=W,ge=K.VbrMode,Qe=K.Float,ht=K.ShortBlock,gt=K.Util,$=K.Arrays,D=K.new_float,ie=K.new_float_n,Ae=K.new_int,le=K.assert;function Pe(){var L=new Be,re=2.302585092994046,he=2,se=16,xe=2,ae=16,me=.34,Ie=1/(14752*14752)/(M.BLKSIZE/2),ke=.01,U=.8,we=.6,B=.3,O=3.5,H=21,i=.2302585093;function z(R){return R}function G(R,T){for(var X=0,Y=0;Y<M.BLKSIZE/2;++Y)X+=R[Y]*T.ATH.eql_w[Y];return X*=Ie,X}function j(R,T,X,Y,te,N,ee,oe,Z,be,ce){var ye=R.internal_flags;if(Z<2)L.fft_long(ye,Y[te],Z,be,ce),L.fft_short(ye,N[ee],Z,be,ce);else if(Z==2){for(var Ue=M.BLKSIZE-1;Ue>=0;--Ue){var ct=Y[te+0][Ue],Ee=Y[te+1][Ue];Y[te+0][Ue]=(ct+Ee)*gt.SQRT2*.5,Y[te+1][Ue]=(ct-Ee)*gt.SQRT2*.5}for(var lt=2;lt>=0;--lt)for(var Ue=M.BLKSIZE_s-1;Ue>=0;--Ue){var ct=N[ee+0][lt][Ue],Ee=N[ee+1][lt][Ue];N[ee+0][lt][Ue]=(ct+Ee)*gt.SQRT2*.5,N[ee+1][lt][Ue]=(ct-Ee)*gt.SQRT2*.5}}T[0]=Y[te+0][0],T[0]*=T[0];for(var Ue=M.BLKSIZE/2-1;Ue>=0;--Ue){var _e=Y[te+0][M.BLKSIZE/2-Ue],tt=Y[te+0][M.BLKSIZE/2+Ue];T[M.BLKSIZE/2-Ue]=(_e*_e+tt*tt)*.5}for(var lt=2;lt>=0;--lt){X[lt][0]=N[ee+0][lt][0],X[lt][0]*=X[lt][0];for(var Ue=M.BLKSIZE_s/2-1;Ue>=0;--Ue){var _e=N[ee+0][lt][M.BLKSIZE_s/2-Ue],tt=N[ee+0][lt][M.BLKSIZE_s/2+Ue];X[lt][M.BLKSIZE_s/2-Ue]=(_e*_e+tt*tt)*.5}}{for(var xt=0,Ue=11;Ue<M.HBLKSIZE;Ue++)xt+=T[Ue];ye.tot_ener[Z]=xt}if(R.analysis){for(var Ue=0;Ue<M.HBLKSIZE;Ue++)ye.pinfo.energy[oe][Z][Ue]=ye.pinfo.energy_save[Z][Ue],ye.pinfo.energy_save[Z][Ue]=T[Ue];ye.pinfo.pe[oe][Z]=ye.pe[Z]}R.athaa_loudapprox==2&&Z<2&&(ye.loudness_sq[oe][Z]=ye.loudness_sq_save[Z],ye.loudness_sq_save[Z]=G(T,ye))}var f=8,E=23,I=15,P,F,l,A=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function y(){P=Math.pow(10,(f+1)/16),F=Math.pow(10,(E+1)/16),l=Math.pow(10,I/10)}var d=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],w=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],x=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function u(R,T,X,Y,te,N){var ee;if(T>R)if(T<R*F)ee=T/R;else return R+T;else{if(R>=T*F)return R+T;ee=R/T}if(R+=T,Y+3<=6){if(ee>=P)return R;var oe=0|gt.FAST_LOG10_X(ee,16);return R*w[oe]}var oe=0|gt.FAST_LOG10_X(ee,16);if(T=te.ATH.cb_l[X]*te.ATH.adjust,R<l*T){if(R>T){var Z,be;return Z=1,oe<=13&&(Z=x[oe]),be=gt.FAST_LOG10_X(R/T,10/15),R*((d[oe]-Z)*be+Z)}return oe>13?R:R*x[oe]}return R*d[oe]}var _=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function v(R,T,X){var Y;if(R<0&&(R=0),T<0&&(T=0),R<=0)return T;if(T<=0)return R;if(T>R?Y=T/R:Y=R/T,-2<=X&&X<=2){if(Y>=P)return R+T;var te=0|gt.FAST_LOG10_X(Y,16);return(R+T)*_[te]}return Y<F?R+T:(R<T&&(R=T),R)}function k(R,T){var X=R.internal_flags;if(X.channels_out>1){for(var Y=0;Y<M.SBMAX_l;Y++){var te=X.thm[0].l[Y],N=X.thm[1].l[Y];X.thm[0].l[Y]+=N*T,X.thm[1].l[Y]+=te*T}for(var Y=0;Y<M.SBMAX_s;Y++)for(var ee=0;ee<3;ee++){var te=X.thm[0].s[Y][ee],N=X.thm[1].s[Y][ee];X.thm[0].s[Y][ee]+=N*T,X.thm[1].s[Y][ee]+=te*T}}}function ue(R){for(var T=0;T<M.SBMAX_l;T++)if(!(R.thm[0].l[T]>1.58*R.thm[1].l[T]||R.thm[1].l[T]>1.58*R.thm[0].l[T])){var X=R.mld_l[T]*R.en[3].l[T],Y=Math.max(R.thm[2].l[T],Math.min(R.thm[3].l[T],X));X=R.mld_l[T]*R.en[2].l[T];var te=Math.max(R.thm[3].l[T],Math.min(R.thm[2].l[T],X));R.thm[2].l[T]=Y,R.thm[3].l[T]=te}for(var T=0;T<M.SBMAX_s;T++)for(var N=0;N<3;N++)if(!(R.thm[0].s[T][N]>1.58*R.thm[1].s[T][N]||R.thm[1].s[T][N]>1.58*R.thm[0].s[T][N])){var X=R.mld_s[T]*R.en[3].s[T][N],Y=Math.max(R.thm[2].s[T][N],Math.min(R.thm[3].s[T][N],X));X=R.mld_s[T]*R.en[2].s[T][N];var te=Math.max(R.thm[3].s[T][N],Math.min(R.thm[2].s[T][N],X));R.thm[2].s[T][N]=Y,R.thm[3].s[T][N]=te}}function q(R,T,X){var Y=T,te=Math.pow(10,X);T*=2,Y*=2;for(var N=0;N<M.SBMAX_l;N++){var ee,oe,Z,be;if(be=R.ATH.cb_l[R.bm_l[N]]*te,ee=Math.min(Math.max(R.thm[0].l[N],be),Math.max(R.thm[1].l[N],be)),oe=Math.max(R.thm[2].l[N],be),Z=Math.max(R.thm[3].l[N],be),ee*T<oe+Z){var ce=ee*Y/(oe+Z);oe*=ce,Z*=ce}R.thm[2].l[N]=Math.min(oe,R.thm[2].l[N]),R.thm[3].l[N]=Math.min(Z,R.thm[3].l[N])}te*=M.BLKSIZE_s/M.BLKSIZE;for(var N=0;N<M.SBMAX_s;N++)for(var ye=0;ye<3;ye++){var ee,oe,Z,be;if(be=R.ATH.cb_s[R.bm_s[N]]*te,ee=Math.min(Math.max(R.thm[0].s[N][ye],be),Math.max(R.thm[1].s[N][ye],be)),oe=Math.max(R.thm[2].s[N][ye],be),Z=Math.max(R.thm[3].s[N][ye],be),ee*T<oe+Z){var ce=ee*T/(oe+Z);oe*=ce,Z*=ce}R.thm[2].s[N][ye]=Math.min(R.thm[2].s[N][ye],oe),R.thm[3].s[N][ye]=Math.min(R.thm[3].s[N][ye],Z)}}function Q(R,T,X,Y,te){var N,ee,oe=0,Z=0;for(N=ee=0;N<M.SBMAX_s;++ee,++N){for(var be=R.bo_s[N],ce=R.npart_s,ye=be<ce?be:ce;ee<ye;)le(T[ee]>=0),le(X[ee]>=0),oe+=T[ee],Z+=X[ee],ee++;if(R.en[Y].s[N][te]=oe,R.thm[Y].s[N][te]=Z,ee>=ce){++N;break}le(T[ee]>=0),le(X[ee]>=0);{var Ue=R.PSY.bo_s_weight[N],ct=1-Ue;oe=Ue*T[ee],Z=Ue*X[ee],R.en[Y].s[N][te]+=oe,R.thm[Y].s[N][te]+=Z,oe=ct*T[ee],Z=ct*X[ee]}}for(;N<M.SBMAX_s;++N)R.en[Y].s[N][te]=0,R.thm[Y].s[N][te]=0}function c(R,T,X,Y){var te,N,ee=0,oe=0;for(te=N=0;te<M.SBMAX_l;++N,++te){for(var Z=R.bo_l[te],be=R.npart_l,ce=Z<be?Z:be;N<ce;)le(T[N]>=0),le(X[N]>=0),ee+=T[N],oe+=X[N],N++;if(R.en[Y].l[te]=ee,R.thm[Y].l[te]=oe,N>=be){++te;break}le(T[N]>=0),le(X[N]>=0);{var ye=R.PSY.bo_l_weight[te],Ue=1-ye;ee=ye*T[N],oe=ye*X[N],R.en[Y].l[te]+=ee,R.thm[Y].l[te]+=oe,ee=Ue*T[N],oe=Ue*X[N]}}for(;te<M.SBMAX_l;++te)R.en[Y].l[te]=0,R.thm[Y].l[te]=0}function p(R,T,X,Y,te,N){var ee=R.internal_flags,oe,Z;for(Z=oe=0;Z<ee.npart_s;++Z){for(var be=0,ce=ee.numlines_s[Z],ye=0;ye<ce;++ye,++oe){var Ue=T[N][oe];be+=Ue}X[Z]=be}for(le(Z==ee.npart_s),oe=Z=0;Z<ee.npart_s;Z++){var ct=ee.s3ind_s[Z][0],Ee=ee.s3_ss[oe++]*X[ct];for(++ct;ct<=ee.s3ind_s[Z][1];)Ee+=ee.s3_ss[oe]*X[ct],++oe,++ct;{var lt=xe*ee.nb_s1[te][Z];Y[Z]=Math.min(Ee,lt)}if(ee.blocktype_old[te&1]==M.SHORT_TYPE){var lt=ae*ee.nb_s2[te][Z],_e=Y[Z];Y[Z]=Math.min(lt,_e)}ee.nb_s2[te][Z]=ee.nb_s1[te][Z],ee.nb_s1[te][Z]=Ee,le(Y[Z]>=0)}for(;Z<=M.CBANDS;++Z)X[Z]=0,Y[Z]=0}function fe(R,T,X,Y){var te=R.internal_flags;R.short_blocks==ht.short_block_coupled&&!(T[0]!=0&&T[1]!=0)&&(T[0]=T[1]=0);for(var N=0;N<te.channels_out;N++)Y[N]=M.NORM_TYPE,R.short_blocks==ht.short_block_dispensed&&(T[N]=1),R.short_blocks==ht.short_block_forced&&(T[N]=0),T[N]!=0?(le(te.blocktype_old[N]!=M.START_TYPE),te.blocktype_old[N]==M.SHORT_TYPE&&(Y[N]=M.STOP_TYPE)):(Y[N]=M.SHORT_TYPE,te.blocktype_old[N]==M.NORM_TYPE&&(te.blocktype_old[N]=M.START_TYPE),te.blocktype_old[N]==M.STOP_TYPE&&(te.blocktype_old[N]=M.SHORT_TYPE)),X[N]=te.blocktype_old[N],te.blocktype_old[N]=Y[N]}function ve(R,T,X){return X>=1?R:X<=0?T:T>0?Math.pow(R/T,X)*T:0}var Oe=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function qe(R,T){for(var X=309.07,Y=0;Y<M.SBMAX_s-1;Y++)for(var te=0;te<3;te++){var N=R.thm.s[Y][te];if(N>0){var ee=N*T,oe=R.en.s[Y][te];oe>ee&&(oe>ee*1e10?X+=Oe[Y]*(10*re):X+=Oe[Y]*gt.FAST_LOG10(oe/ee))}}return X}var Le=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function De(R,T){for(var X=281.0575,Y=0;Y<M.SBMAX_l-1;Y++){var te=R.thm.l[Y];if(te>0){var N=te*T,ee=R.en.l[Y];ee>N&&(ee>N*1e10?X+=Le[Y]*(10*re):X+=Le[Y]*gt.FAST_LOG10(ee/N))}}return X}function dt(R,T,X,Y,te){var N,ee;for(N=ee=0;N<R.npart_l;++N){var oe=0,Z=0,be;for(be=0;be<R.numlines_l[N];++be,++ee){var ce=T[ee];oe+=ce,Z<ce&&(Z=ce)}X[N]=oe,Y[N]=Z,te[N]=oe*R.rnumlines_l[N],le(R.rnumlines_l[N]>=0),le(X[N]>=0),le(Y[N]>=0),le(te[N]>=0)}}function st(R,T,X,Y){var te=A.length-1,N=0,ee=X[N]+X[N+1];if(ee>0){var oe=T[N];oe<T[N+1]&&(oe=T[N+1]),le(R.numlines_l[N]+R.numlines_l[N+1]-1>0),ee=20*(oe*2-ee)/(ee*(R.numlines_l[N]+R.numlines_l[N+1]-1));var Z=0|ee;Z>te&&(Z=te),Y[N]=Z}else Y[N]=0;for(N=1;N<R.npart_l-1;N++)if(ee=X[N-1]+X[N]+X[N+1],ee>0){var oe=T[N-1];oe<T[N]&&(oe=T[N]),oe<T[N+1]&&(oe=T[N+1]),le(R.numlines_l[N-1]+R.numlines_l[N]+R.numlines_l[N+1]-1>0),ee=20*(oe*3-ee)/(ee*(R.numlines_l[N-1]+R.numlines_l[N]+R.numlines_l[N+1]-1));var Z=0|ee;Z>te&&(Z=te),Y[N]=Z}else Y[N]=0;if(le(N==R.npart_l-1),ee=X[N-1]+X[N],ee>0){var oe=T[N-1];oe<T[N]&&(oe=T[N]),le(R.numlines_l[N-1]+R.numlines_l[N]-1>0),ee=20*(oe*2-ee)/(ee*(R.numlines_l[N-1]+R.numlines_l[N]-1));var Z=0|ee;Z>te&&(Z=te),Y[N]=Z}else Y[N]=0;le(N==R.npart_l-1)}var $e=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(R,T,X,Y,te,N,ee,oe,Z,be){var ce=R.internal_flags,ye=ie([2,M.BLKSIZE]),Ue=ie([2,3,M.BLKSIZE_s]),ct=D(M.CBANDS+1),Ee=D(M.CBANDS+1),lt=D(M.CBANDS+2),_e=Ae(2),tt=Ae(2),xt,Re,at,Me,ut,qt,Ye,yt,Mt=ie([2,576]),Zt,sr=Ae(M.CBANDS+2),un=Ae(M.CBANDS+2);for($.fill(un,0),xt=ce.channels_out,R.mode==_n.JOINT_STEREO&&(xt=4),R.VBR==ge.vbr_off?Zt=ce.ResvMax==0?0:ce.ResvSize/ce.ResvMax*.5:R.VBR==ge.vbr_rh||R.VBR==ge.vbr_mtrh||R.VBR==ge.vbr_mt?Zt=.6:Zt=1,Re=0;Re<ce.channels_out;Re++){var Jt=T[Re],Un=X+576-350-H+192;for(Me=0;Me<576;Me++){var ar,ir;for(ar=Jt[Un+Me+10],ir=0,ut=0;ut<(H-1)/2-1;ut+=2)ar+=$e[ut]*(Jt[Un+Me+ut]+Jt[Un+Me+H-ut]),ir+=$e[ut+1]*(Jt[Un+Me+ut+1]+Jt[Un+Me+H-ut-1]);Mt[Re][Me]=ar+ir}te[Y][Re].en.assign(ce.en[Re]),te[Y][Re].thm.assign(ce.thm[Re]),xt>2&&(N[Y][Re].en.assign(ce.en[Re+2]),N[Y][Re].thm.assign(ce.thm[Re+2]))}for(Re=0;Re<xt;Re++){var gr,xr,On=D(12),$r=[0,0,0,0],ha=D(12),L0=1,Jc,eu=D(M.CBANDS),tu=D(M.CBANDS),en=[0,0,0,0],nu=D(M.HBLKSIZE),ru=ie([3,M.HBLKSIZE_s]);for(le(ce.npart_s<=M.CBANDS),le(ce.npart_l<=M.CBANDS),Me=0;Me<3;Me++)On[Me]=ce.nsPsy.last_en_subshort[Re][Me+6],le(ce.nsPsy.last_en_subshort[Re][Me+4]>0),ha[Me]=On[Me]/ce.nsPsy.last_en_subshort[Re][Me+4],$r[0]+=On[Me];if(Re==2)for(Me=0;Me<576;Me++){var N0,F0;N0=Mt[0][Me],F0=Mt[1][Me],Mt[0][Me]=N0+F0,Mt[1][Me]=N0-F0}{var su=Mt[Re&1],Ya=0;for(Me=0;Me<9;Me++){for(var e2=Ya+64,gn=1;Ya<e2;Ya++)gn<Math.abs(su[Ya])&&(gn=Math.abs(su[Ya]));ce.nsPsy.last_en_subshort[Re][Me]=On[Me+3]=gn,$r[1+Me/3]+=gn,gn>On[Me+3-2]?(le(On[Me+3-2]>0),gn=gn/On[Me+3-2]):On[Me+3-2]>gn*10?gn=On[Me+3-2]/(gn*10):gn=0,ha[Me+3]=gn}}if(R.analysis){var $0=ha[0];for(Me=1;Me<12;Me++)$0<ha[Me]&&($0=ha[Me]);ce.pinfo.ers[Y][Re]=ce.pinfo.ers_save[Re],ce.pinfo.ers_save[Re]=$0}for(Jc=Re==3?ce.nsPsy.attackthre_s:ce.nsPsy.attackthre,Me=0;Me<12;Me++)en[Me/3]==0&&ha[Me]>Jc&&(en[Me/3]=Me%3+1);for(Me=1;Me<4;Me++){var V0;$r[Me-1]>$r[Me]?(le($r[Me]>0),V0=$r[Me-1]/$r[Me]):(le($r[Me-1]>0),V0=$r[Me]/$r[Me-1]),V0<1.7&&(en[Me]=0,Me==1&&(en[0]=0))}for(en[0]!=0&&ce.nsPsy.lastAttacks[Re]!=0&&(en[0]=0),(ce.nsPsy.lastAttacks[Re]==3||en[0]+en[1]+en[2]+en[3]!=0)&&(L0=0,en[1]!=0&&en[0]!=0&&(en[1]=0),en[2]!=0&&en[1]!=0&&(en[2]=0),en[3]!=0&&en[2]!=0&&(en[3]=0)),Re<2?tt[Re]=L0:L0==0&&(tt[0]=tt[1]=0),Z[Re]=ce.tot_ener[Re],xr=Ue,gr=ye,j(R,nu,ru,gr,Re&1,xr,Re&1,Y,Re,T,X),dt(ce,nu,ct,eu,tu),st(ce,eu,tu,sr),yt=0;yt<3;yt++){var H0,Yn;for(p(R,ru,Ee,lt,Re,yt),Q(ce,Ee,lt,Re,yt),Ye=0;Ye<M.SBMAX_s;Ye++){if(Yn=ce.thm[Re].s[Ye][yt],Yn*=U,en[yt]>=2||en[yt+1]==1){var Ka=yt!=0?yt-1:2,gn=ve(ce.thm[Re].s[Ye][Ka],Yn,we*Zt);Yn=Math.min(Yn,gn)}if(en[yt]==1){var Ka=yt!=0?yt-1:2,gn=ve(ce.thm[Re].s[Ye][Ka],Yn,B*Zt);Yn=Math.min(Yn,gn)}else if(yt!=0&&en[yt-1]==3||yt==0&&ce.nsPsy.lastAttacks[Re]==3){var Ka=yt!=2?yt+1:0,gn=ve(ce.thm[Re].s[Ye][Ka],Yn,B*Zt);Yn=Math.min(Yn,gn)}H0=On[yt*3+3]+On[yt*3+4]+On[yt*3+5],On[yt*3+5]*6<H0&&(Yn*=.5,On[yt*3+4]*6<H0&&(Yn*=.5)),ce.thm[Re].s[Ye][yt]=Yn}}for(ce.nsPsy.lastAttacks[Re]=en[2],qt=0,at=0;at<ce.npart_l;at++){for(var Xs=ce.s3ind[at][0],D0=ct[Xs]*A[sr[Xs]],qs=ce.s3_ll[qt++]*D0;++Xs<=ce.s3ind[at][1];)D0=ct[Xs]*A[sr[Xs]],qs=u(qs,ce.s3_ll[qt++]*D0,Xs,Xs-at,ce);qs*=.158489319246111,ce.blocktype_old[Re&1]==M.SHORT_TYPE?lt[at]=qs:lt[at]=ve(Math.min(qs,Math.min(he*ce.nb_1[Re][at],se*ce.nb_2[Re][at])),qs,Zt),ce.nb_2[Re][at]=ce.nb_1[Re][at],ce.nb_1[Re][at]=qs}for(;at<=M.CBANDS;++at)ct[at]=0,lt[at]=0;c(ce,ct,lt,Re)}if((R.mode==_n.STEREO||R.mode==_n.JOINT_STEREO)&&R.interChRatio>0&&k(R,R.interChRatio),R.mode==_n.JOINT_STEREO){var j0;ue(ce),j0=R.msfix,Math.abs(j0)>0&&q(ce,j0,R.ATHlower*ce.ATH.adjust)}for(fe(R,tt,be,_e),Re=0;Re<xt;Re++){var Wa,Ga=0,Gi,zi;Re>1?(Wa=oe,Ga=-2,Gi=M.NORM_TYPE,(be[0]==M.SHORT_TYPE||be[1]==M.SHORT_TYPE)&&(Gi=M.SHORT_TYPE),zi=N[Y][Re-2]):(Wa=ee,Ga=0,Gi=be[Re],zi=te[Y][Re]),Gi==M.SHORT_TYPE?Wa[Ga+Re]=qe(zi,ce.masking_lower):Wa[Ga+Re]=De(zi,ce.masking_lower),R.analysis&&(ce.pinfo.pe[Y][Re]=Wa[Ga+Re])}return 0};function Pt(R,T,X,Y,te,N,ee,oe){var Z=R.internal_flags;if(Y<2)L.fft_long(Z,ee[oe],Y,T,X);else if(Y==2)for(var be=M.BLKSIZE-1;be>=0;--be){var ce=ee[oe+0][be],ye=ee[oe+1][be];ee[oe+0][be]=(ce+ye)*gt.SQRT2*.5,ee[oe+1][be]=(ce-ye)*gt.SQRT2*.5}N[0]=ee[oe+0][0],N[0]*=N[0];for(var be=M.BLKSIZE/2-1;be>=0;--be){var Ue=ee[oe+0][M.BLKSIZE/2-be],ct=ee[oe+0][M.BLKSIZE/2+be];N[M.BLKSIZE/2-be]=(Ue*Ue+ct*ct)*.5}{for(var Ee=0,be=11;be<M.HBLKSIZE;be++)Ee+=N[be];Z.tot_ener[Y]=Ee}if(R.analysis){for(var be=0;be<M.HBLKSIZE;be++)Z.pinfo.energy[te][Y][be]=Z.pinfo.energy_save[Y][be],Z.pinfo.energy_save[Y][be]=N[be];Z.pinfo.pe[te][Y]=Z.pe[Y]}}function mn(R,T,X,Y,te,N,ee,oe){var Z=R.internal_flags;if(te==0&&Y<2&&L.fft_short(Z,ee[oe],Y,T,X),Y==2)for(var be=M.BLKSIZE_s-1;be>=0;--be){var ce=ee[oe+0][te][be],ye=ee[oe+1][te][be];ee[oe+0][te][be]=(ce+ye)*gt.SQRT2*.5,ee[oe+1][te][be]=(ce-ye)*gt.SQRT2*.5}N[te][0]=ee[oe+0][te][0],N[te][0]*=N[te][0];for(var be=M.BLKSIZE_s/2-1;be>=0;--be){var Ue=ee[oe+0][te][M.BLKSIZE_s/2-be],ct=ee[oe+0][te][M.BLKSIZE_s/2+be];N[te][M.BLKSIZE_s/2-be]=(Ue*Ue+ct*ct)*.5}}function Tt(R,T,X,Y){var te=R.internal_flags;R.athaa_loudapprox==2&&X<2&&(te.loudness_sq[T][X]=te.loudness_sq_save[X],te.loudness_sq_save[X]=G(Y,te))}var zt=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function Qt(R,T,X,Y,te,N,ee,oe,Z,be){for(var ce=ie([2,576]),ye=R.internal_flags,Ue=ye.channels_out,ct=R.mode==_n.JOINT_STEREO?4:Ue,Ee=0;Ee<Ue;Ee++){firbuf=T[Ee];for(var lt=X+576-350-H+192,_e=0;_e<576;_e++){var tt,xt;tt=firbuf[lt+_e+10],xt=0;for(var Re=0;Re<(H-1)/2-1;Re+=2)tt+=zt[Re]*(firbuf[lt+_e+Re]+firbuf[lt+_e+H-Re]),xt+=zt[Re+1]*(firbuf[lt+_e+Re+1]+firbuf[lt+_e+H-Re-1]);ce[Ee][_e]=tt+xt}te[Y][Ee].en.assign(ye.en[Ee]),te[Y][Ee].thm.assign(ye.thm[Ee]),ct>2&&(N[Y][Ee].en.assign(ye.en[Ee+2]),N[Y][Ee].thm.assign(ye.thm[Ee+2]))}for(var Ee=0;Ee<ct;Ee++){var at=D(12),Me=D(12),ut=[0,0,0,0],qt=ce[Ee&1],Ye=0,yt=Ee==3?ye.nsPsy.attackthre_s:ye.nsPsy.attackthre,Mt=1;if(Ee==2)for(var _e=0,Re=576;Re>0;++_e,--Re){var Zt=ce[0][_e],sr=ce[1][_e];ce[0][_e]=Zt+sr,ce[1][_e]=Zt-sr}for(var _e=0;_e<3;_e++)Me[_e]=ye.nsPsy.last_en_subshort[Ee][_e+6],le(ye.nsPsy.last_en_subshort[Ee][_e+4]>0),at[_e]=Me[_e]/ye.nsPsy.last_en_subshort[Ee][_e+4],ut[0]+=Me[_e];for(var _e=0;_e<9;_e++){for(var un=Ye+64,Jt=1;Ye<un;Ye++)Jt<Math.abs(qt[Ye])&&(Jt=Math.abs(qt[Ye]));ye.nsPsy.last_en_subshort[Ee][_e]=Me[_e+3]=Jt,ut[1+_e/3]+=Jt,Jt>Me[_e+3-2]?(le(Me[_e+3-2]>0),Jt=Jt/Me[_e+3-2]):Me[_e+3-2]>Jt*10?Jt=Me[_e+3-2]/(Jt*10):Jt=0,at[_e+3]=Jt}for(var _e=0;_e<3;++_e){var Un=Me[_e*3+3]+Me[_e*3+4]+Me[_e*3+5],ar=1;Me[_e*3+5]*6<Un&&(ar*=.5,Me[_e*3+4]*6<Un&&(ar*=.5)),oe[Ee][_e]=ar}if(R.analysis){for(var ir=at[0],_e=1;_e<12;_e++)ir<at[_e]&&(ir=at[_e]);ye.pinfo.ers[Y][Ee]=ye.pinfo.ers_save[Ee],ye.pinfo.ers_save[Ee]=ir}for(var _e=0;_e<12;_e++)Z[Ee][_e/3]==0&&at[_e]>yt&&(Z[Ee][_e/3]=_e%3+1);for(var _e=1;_e<4;_e++){var gr=ut[_e-1],xr=ut[_e],On=Math.max(gr,xr);On<4e4&&gr<1.7*xr&&xr<1.7*gr&&(_e==1&&Z[Ee][0]<=Z[Ee][_e]&&(Z[Ee][0]=0),Z[Ee][_e]=0)}Z[Ee][0]<=ye.nsPsy.lastAttacks[Ee]&&(Z[Ee][0]=0),(ye.nsPsy.lastAttacks[Ee]==3||Z[Ee][0]+Z[Ee][1]+Z[Ee][2]+Z[Ee][3]!=0)&&(Mt=0,Z[Ee][1]!=0&&Z[Ee][0]!=0&&(Z[Ee][1]=0),Z[Ee][2]!=0&&Z[Ee][1]!=0&&(Z[Ee][2]=0),Z[Ee][3]!=0&&Z[Ee][2]!=0&&(Z[Ee][3]=0)),Ee<2?be[Ee]=Mt:Mt==0&&(be[0]=be[1]=0),ee[Ee]=ye.tot_ener[Ee]}}function an(R,T,X){if(X==0)for(var Y=0;Y<R.npart_s;Y++)R.nb_s2[T][Y]=R.nb_s1[T][Y],R.nb_s1[T][Y]=0}function Sn(R,T){for(var X=0;X<R.npart_l;X++)R.nb_2[T][X]=R.nb_1[T][X],R.nb_1[T][X]=0}function Fr(R,T,X,Y){var te=A.length-1,N=0,ee=X[N]+X[N+1];if(ee>0){var oe=T[N];oe<T[N+1]&&(oe=T[N+1]),le(R.numlines_s[N]+R.numlines_s[N+1]-1>0),ee=20*(oe*2-ee)/(ee*(R.numlines_s[N]+R.numlines_s[N+1]-1));var Z=0|ee;Z>te&&(Z=te),Y[N]=Z}else Y[N]=0;for(N=1;N<R.npart_s-1;N++)if(ee=X[N-1]+X[N]+X[N+1],le(N+1<R.npart_s),ee>0){var oe=T[N-1];oe<T[N]&&(oe=T[N]),oe<T[N+1]&&(oe=T[N+1]),le(R.numlines_s[N-1]+R.numlines_s[N]+R.numlines_s[N+1]-1>0),ee=20*(oe*3-ee)/(ee*(R.numlines_s[N-1]+R.numlines_s[N]+R.numlines_s[N+1]-1));var Z=0|ee;Z>te&&(Z=te),Y[N]=Z}else Y[N]=0;if(le(N==R.npart_s-1),ee=X[N-1]+X[N],ee>0){var oe=T[N-1];oe<T[N]&&(oe=T[N]),le(R.numlines_s[N-1]+R.numlines_s[N]-1>0),ee=20*(oe*2-ee)/(ee*(R.numlines_s[N-1]+R.numlines_s[N]-1));var Z=0|ee;Z>te&&(Z=te),Y[N]=Z}else Y[N]=0;le(N==R.npart_s-1)}function _r(R,T,X,Y,te,N){var ee=R.internal_flags,oe=new float[M.CBANDS],Z=D(M.CBANDS),be,ce,ye,Ue=new int[M.CBANDS];for(ye=ce=0;ye<ee.npart_s;++ye){var ct=0,Ee=0,lt=ee.numlines_s[ye];for(be=0;be<lt;++be,++ce){var _e=T[N][ce];ct+=_e,Ee<_e&&(Ee=_e)}X[ye]=ct,oe[ye]=Ee,Z[ye]=ct/lt,le(Z[ye]>=0)}for(le(ye==ee.npart_s);ye<M.CBANDS;++ye)oe[ye]=0,Z[ye]=0;for(Fr(ee,oe,Z,Ue),ce=ye=0;ye<ee.npart_s;ye++){var tt=ee.s3ind_s[ye][0],xt=ee.s3ind_s[ye][1],Re,at,Me,ut,qt;for(Re=Ue[tt],at=1,ut=ee.s3_ss[ce]*X[tt]*A[Ue[tt]],++ce,++tt;tt<=xt;)Re+=Ue[tt],at+=1,Me=ee.s3_ss[ce]*X[tt]*A[Ue[tt]],ut=v(ut,Me,tt-ye),++ce,++tt;Re=(1+2*Re)/(2*at),qt=A[Re]*.5,ut*=qt,Y[ye]=ut,ee.nb_s2[te][ye]=ee.nb_s1[te][ye],ee.nb_s1[te][ye]=ut,Me=oe[ye],Me*=ee.minval_s[ye],Me*=qt,Y[ye]>Me&&(Y[ye]=Me),ee.masking_lower>1&&(Y[ye]*=ee.masking_lower),Y[ye]>X[ye]&&(Y[ye]=X[ye]),ee.masking_lower<1&&(Y[ye]*=ee.masking_lower),le(Y[ye]>=0)}for(;ye<M.CBANDS;++ye)X[ye]=0,Y[ye]=0}function qn(R,T,X,Y,te){var N=D(M.CBANDS),ee=D(M.CBANDS),oe=Ae(M.CBANDS+2),Z;dt(R,T,X,N,ee),st(R,N,ee,oe);var be=0;for(Z=0;Z<R.npart_l;Z++){var ce,ye,Ue,ct,Ee=R.s3ind[Z][0],lt=R.s3ind[Z][1],_e=0,tt=0;for(_e=oe[Ee],tt+=1,ye=R.s3_ll[be]*X[Ee]*A[oe[Ee]],++be,++Ee;Ee<=lt;)_e+=oe[Ee],tt+=1,ce=R.s3_ll[be]*X[Ee]*A[oe[Ee]],ct=v(ye,ce,Ee-Z),ye=ct,++be,++Ee;if(_e=(1+2*_e)/(2*tt),Ue=A[_e]*.5,ye*=Ue,R.blocktype_old[te&1]==M.SHORT_TYPE){var xt=he*R.nb_1[te][Z];xt>0?Y[Z]=Math.min(ye,xt):Y[Z]=Math.min(ye,X[Z]*B)}else{var Re=se*R.nb_2[te][Z],at=he*R.nb_1[te][Z],xt;Re<=0&&(Re=ye),at<=0&&(at=ye),R.blocktype_old[te&1]==M.NORM_TYPE?xt=Math.min(at,Re):xt=at,Y[Z]=Math.min(ye,xt)}R.nb_2[te][Z]=R.nb_1[te][Z],R.nb_1[te][Z]=ye,ce=N[Z],ce*=R.minval_l[Z],ce*=Ue,Y[Z]>ce&&(Y[Z]=ce),R.masking_lower>1&&(Y[Z]*=R.masking_lower),Y[Z]>X[Z]&&(Y[Z]=X[Z]),R.masking_lower<1&&(Y[Z]*=R.masking_lower),le(Y[Z]>=0)}for(;Z<M.CBANDS;++Z)X[Z]=0,Y[Z]=0}function Sr(R,T){var X=R.internal_flags;R.short_blocks==ht.short_block_coupled&&!(T[0]!=0&&T[1]!=0)&&(T[0]=T[1]=0);for(var Y=0;Y<X.channels_out;Y++)R.short_blocks==ht.short_block_dispensed&&(T[Y]=1),R.short_blocks==ht.short_block_forced&&(T[Y]=0)}function Ds(R,T,X){for(var Y=R.internal_flags,te=0;te<Y.channels_out;te++){var N=M.NORM_TYPE;T[te]!=0?(le(Y.blocktype_old[te]!=M.START_TYPE),Y.blocktype_old[te]==M.SHORT_TYPE&&(N=M.STOP_TYPE)):(N=M.SHORT_TYPE,Y.blocktype_old[te]==M.NORM_TYPE&&(Y.blocktype_old[te]=M.START_TYPE),Y.blocktype_old[te]==M.STOP_TYPE&&(Y.blocktype_old[te]=M.SHORT_TYPE)),X[te]=Y.blocktype_old[te],Y.blocktype_old[te]=N}}function ps(R,T,X,Y,te,N,ee){for(var oe=N*2,Z=N>0?Math.pow(10,te):1,be,ce,ye=0;ye<ee;++ye){var Ue=R[2][ye],ct=R[3][ye],Ee=T[0][ye],lt=T[1][ye],_e=T[2][ye],tt=T[3][ye];if(Ee<=1.58*lt&&lt<=1.58*Ee){var xt=X[ye]*ct,Re=X[ye]*Ue;ce=Math.max(_e,Math.min(tt,xt)),be=Math.max(tt,Math.min(_e,Re))}else ce=_e,be=tt;if(N>0){var at,Me,ut=Y[ye]*Z;if(at=Math.min(Math.max(Ee,ut),Math.max(lt,ut)),_e=Math.max(ce,ut),tt=Math.max(be,ut),Me=_e+tt,Me>0&&at*oe<Me){var qt=at*oe/Me;_e*=qt,tt*=qt}ce=Math.min(_e,ce),be=Math.min(tt,be)}ce>Ue&&(ce=Ue),be>ct&&(be=ct),T[2][ye]=ce,T[3][ye]=be}}this.L3psycho_anal_vbr=function(R,T,X,Y,te,N,ee,oe,Z,be){var ce=R.internal_flags,ye,Ue,ct=D(M.HBLKSIZE),Ee=ie([3,M.HBLKSIZE_s]),lt=ie([2,M.BLKSIZE]),_e=ie([2,3,M.BLKSIZE_s]),tt=ie([4,M.CBANDS]),xt=ie([4,M.CBANDS]),Re=ie([4,3]),at=.6,Me=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],ut=Ae(2),qt=R.mode==_n.JOINT_STEREO?4:ce.channels_out;Qt(R,T,X,Y,te,N,Z,Re,Me,ut),Sr(R,ut);{for(var Ye=0;Ye<qt;Ye++){var yt=Ye&1;ye=lt,Pt(R,T,X,Ye,Y,ct,ye,yt),Tt(R,Y,Ye,ct),ut[yt]!=0?qn(ce,ct,tt[Ye],xt[Ye],Ye):Sn(ce,Ye)}ut[0]+ut[1]==2&&R.mode==_n.JOINT_STEREO&&ps(tt,xt,ce.mld_cb_l,ce.ATH.cb_l,R.ATHlower*ce.ATH.adjust,R.msfix,ce.npart_l);for(var Ye=0;Ye<qt;Ye++){var yt=Ye&1;ut[yt]!=0&&c(ce,tt[Ye],xt[Ye],Ye)}}{for(var Mt=0;Mt<3;Mt++){for(var Ye=0;Ye<qt;++Ye){var yt=Ye&1;ut[yt]!=0?an(ce,Ye,Mt):(Ue=_e,mn(R,T,X,Ye,Mt,Ee,Ue,yt),_r(R,Ee,tt[Ye],xt[Ye],Ye,Mt))}ut[0]+ut[1]==0&&R.mode==_n.JOINT_STEREO&&ps(tt,xt,ce.mld_cb_s,ce.ATH.cb_s,R.ATHlower*ce.ATH.adjust,R.msfix,ce.npart_s);for(var Ye=0;Ye<qt;++Ye){var yt=Ye&1;ut[yt]==0&&Q(ce,tt[Ye],xt[Ye],Ye,Mt)}}for(var Ye=0;Ye<qt;Ye++){var yt=Ye&1;if(ut[yt]==0)for(var Zt=0;Zt<M.SBMAX_s;Zt++){for(var sr=D(3),Mt=0;Mt<3;Mt++){var un=ce.thm[Ye].s[Zt][Mt];if(un*=U,Me[Ye][Mt]>=2||Me[Ye][Mt+1]==1){var Jt=Mt!=0?Mt-1:2,Un=ve(ce.thm[Ye].s[Zt][Jt],un,we*at);un=Math.min(un,Un)}else if(Me[Ye][Mt]==1){var Jt=Mt!=0?Mt-1:2,Un=ve(ce.thm[Ye].s[Zt][Jt],un,B*at);un=Math.min(un,Un)}else if(Mt!=0&&Me[Ye][Mt-1]==3||Mt==0&&ce.nsPsy.lastAttacks[Ye]==3){var Jt=Mt!=2?Mt+1:0,Un=ve(ce.thm[Ye].s[Zt][Jt],un,B*at);un=Math.min(un,Un)}un*=Re[Ye][Mt],sr[Mt]=un}for(var Mt=0;Mt<3;Mt++)ce.thm[Ye].s[Zt][Mt]=sr[Mt]}}}for(var Ye=0;Ye<qt;Ye++)ce.nsPsy.lastAttacks[Ye]=Me[Ye][2];Ds(R,ut,be);for(var Ye=0;Ye<qt;Ye++){var ar,ir,gr,xr;Ye>1?(ar=oe,ir=-2,gr=M.NORM_TYPE,(be[0]==M.SHORT_TYPE||be[1]==M.SHORT_TYPE)&&(gr=M.SHORT_TYPE),xr=N[Y][Ye-2]):(ar=ee,ir=0,gr=be[Ye],xr=te[Y][Ye]),gr==M.SHORT_TYPE?ar[ir+Ye]=qe(xr,ce.masking_lower):ar[ir+Ye]=De(xr,ce.masking_lower),R.analysis&&(ce.pinfo.pe[Y][Ye]=ar[ir+Ye])}return 0};function nr(R,T){var X=R,Y;return X>=0?Y=-X*27:Y=X*T,Y<=-72?0:Math.exp(Y*i)}function js(R){var T=0,X=0;{var Y=0,te,N;for(Y=0;nr(Y,R)>1e-20;Y-=1);for(te=Y,N=0;Math.abs(N-te)>1e-12;)Y=(N+te)/2,nr(Y,R)>0?N=Y:te=Y;T=te}{var Y=0,te,N;for(Y=0;nr(Y,R)>1e-20;Y+=1);for(te=0,N=Y;Math.abs(N-te)>1e-12;)Y=(N+te)/2,nr(Y,R)>0?te=Y:N=Y;X=N}{var ee=0,oe=1e3,Z;for(Z=0;Z<=oe;++Z){var Y=T+Z*(X-T)/oe,be=nr(Y,R);ee+=be}{var ce=(oe+1)/(ee*(X-T));return ce}}}function Jr(R){var T,X,Y,te;return T=R,T>=0?T*=3:T*=1.5,T>=.5&&T<=2.5?(te=T-.5,X=8*(te*te-2*te)):X=0,T+=.474,Y=15.811389+7.5*T-17.5*Math.sqrt(1+T*T),Y<=-60?0:(T=Math.exp((X+Y)*i),T/=.6609193,T)}function rr(R){return R<0&&(R=0),R=R*.001,13*Math.atan(.76*R)+3.5*Math.atan(R*R/(7.5*7.5))}function ua(R,T,X,Y,te,N,ee,oe,Z,be,ce,ye){var Ue=D(M.CBANDS+1),ct=oe/(ye>15?2*576:2*192),Ee=Ae(M.HBLKSIZE),lt;oe/=Z;var _e=0,tt=0;for(lt=0;lt<M.CBANDS;lt++){var xt,Re;for(xt=rr(oe*_e),Ue[lt]=oe*_e,Re=_e;rr(oe*Re)-xt<me&&Re<=Z/2;Re++);for(R[lt]=Re-_e,tt=lt+1;_e<Re;)Ee[_e++]=lt;if(_e>Z/2){_e=Z/2,++lt;break}}Ue[lt]=oe*_e;for(var at=0;at<ye;at++){var Me,ut,qt,Ye,yt;qt=be[at],Ye=be[at+1],Me=0|Math.floor(.5+ce*(qt-.5)),Me<0&&(Me=0),ut=0|Math.floor(.5+ce*(Ye-.5)),ut>Z/2&&(ut=Z/2),X[at]=(Ee[Me]+Ee[ut])/2,T[at]=Ee[ut];var Mt=ct*Ye;ee[at]=(Mt-Ue[T[at]])/(Ue[T[at]+1]-Ue[T[at]]),ee[at]<0?ee[at]=0:ee[at]>1&&(ee[at]=1),yt=rr(oe*be[at]*ce),yt=Math.min(yt,15.5)/15.5,N[at]=Math.pow(10,1.25*(1-Math.cos(Math.PI*yt))-2.5)}_e=0;for(var Zt=0;Zt<tt;Zt++){var sr=R[Zt],xt,un;xt=rr(oe*_e),un=rr(oe*(_e+sr-1)),Y[Zt]=.5*(xt+un),xt=rr(oe*(_e-.5)),un=rr(oe*(_e+sr-.5)),te[Zt]=un-xt,_e+=sr}return tt}function Qc(R,T,X,Y,te,N){var ee=ie([M.CBANDS,M.CBANDS]),oe,Z=0;if(N)for(var be=0;be<T;be++)for(oe=0;oe<T;oe++){var ce=Jr(X[be]-X[oe])*Y[oe];ee[be][oe]=ce*te[be]}else for(oe=0;oe<T;oe++)for(var ye=15+Math.min(21/X[oe],12),Ue=js(ye),be=0;be<T;be++){var ce=Ue*nr(X[be]-X[oe],ye)*Y[oe];ee[be][oe]=ce*te[be]}for(var be=0;be<T;be++){for(oe=0;oe<T&&!(ee[be][oe]>0);oe++);for(R[be][0]=oe,oe=T-1;oe>0&&!(ee[be][oe]>0);oe--);R[be][1]=oe,Z+=R[be][1]-R[be][0]+1}for(var ct=D(Z),Ee=0,be=0;be<T;be++)for(oe=R[be][0];oe<=R[be][1];oe++)ct[Ee++]=ee[be][oe];return ct}function Zc(R){var T=rr(R);return T=Math.min(T,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*T))-2.5)}this.psymodel_init=function(R){var T=R.internal_flags,X,Y=!0,te=13,N=24,ee=0,oe=0,Z=-8.25,be=-4.5,ce=D(M.CBANDS),ye=D(M.CBANDS),Ue=D(M.CBANDS),ct=R.out_samplerate;switch(R.experimentalZ){default:case 0:Y=!0;break;case 1:Y=!(R.VBR==ge.vbr_mtrh||R.VBR==ge.vbr_mt);break;case 2:Y=!1;break;case 3:te=8,ee=-1.75,oe=-.0125,Z=-8.25,be=-2.25;break}for(T.ms_ener_ratio_old=.25,T.blocktype_old[0]=T.blocktype_old[1]=M.NORM_TYPE,X=0;X<4;++X){for(var _e=0;_e<M.CBANDS;++_e)T.nb_1[X][_e]=1e20,T.nb_2[X][_e]=1e20,T.nb_s1[X][_e]=T.nb_s2[X][_e]=1;for(var Ee=0;Ee<M.SBMAX_l;Ee++)T.en[X].l[Ee]=1e20,T.thm[X].l[Ee]=1e20;for(var _e=0;_e<3;++_e){for(var Ee=0;Ee<M.SBMAX_s;Ee++)T.en[X].s[Ee][_e]=1e20,T.thm[X].s[Ee][_e]=1e20;T.nsPsy.lastAttacks[X]=0}for(var _e=0;_e<9;_e++)T.nsPsy.last_en_subshort[X][_e]=10}for(T.loudness_sq_save[0]=T.loudness_sq_save[1]=0,T.npart_l=ua(T.numlines_l,T.bo_l,T.bm_l,ce,ye,T.mld_l,T.PSY.bo_l_weight,ct,M.BLKSIZE,T.scalefac_band.l,M.BLKSIZE/(2*576),M.SBMAX_l),le(T.npart_l<M.CBANDS),X=0;X<T.npart_l;X++){var lt=ee;ce[X]>=te&&(lt=oe*(ce[X]-te)/(N-te)+ee*(N-ce[X])/(N-te)),Ue[X]=Math.pow(10,lt/10),T.numlines_l[X]>0?T.rnumlines_l[X]=1/T.numlines_l[X]:T.rnumlines_l[X]=0}T.s3_ll=Qc(T.s3ind,T.npart_l,ce,ye,Ue,Y);var _e=0;for(X=0;X<T.npart_l;X++){var tt;tt=Qe.MAX_VALUE;for(var xt=0;xt<T.numlines_l[X];xt++,_e++){var Re=ct*_e/(1e3*M.BLKSIZE),at;at=this.ATHformula(Re*1e3,R)-20,at=Math.pow(10,.1*at),at*=T.numlines_l[X],tt>at&&(tt=at)}T.ATH.cb_l[X]=tt,tt=-20+ce[X]*20/10,tt>6&&(tt=100),tt<-15&&(tt=-15),tt-=8,T.minval_l[X]=Math.pow(10,tt/10)*T.numlines_l[X]}for(T.npart_s=ua(T.numlines_s,T.bo_s,T.bm_s,ce,ye,T.mld_s,T.PSY.bo_s_weight,ct,M.BLKSIZE_s,T.scalefac_band.s,M.BLKSIZE_s/(2*192),M.SBMAX_s),le(T.npart_s<M.CBANDS),_e=0,X=0;X<T.npart_s;X++){var tt,lt=Z;ce[X]>=te&&(lt=be*(ce[X]-te)/(N-te)+Z*(N-ce[X])/(N-te)),Ue[X]=Math.pow(10,lt/10),tt=Qe.MAX_VALUE;for(var xt=0;xt<T.numlines_s[X];xt++,_e++){var Re=ct*_e/(1e3*M.BLKSIZE_s),at;at=this.ATHformula(Re*1e3,R)-20,at=Math.pow(10,.1*at),at*=T.numlines_s[X],tt>at&&(tt=at)}T.ATH.cb_s[X]=tt,tt=-7+ce[X]*7/12,ce[X]>12&&(tt*=1+Math.log(1+tt)*3.1),ce[X]<12&&(tt*=1+Math.log(1-tt)*2.3),tt<-15&&(tt=-15),tt-=8,T.minval_s[X]=Math.pow(10,tt/10)*T.numlines_s[X]}T.s3_ss=Qc(T.s3ind_s,T.npart_s,ce,ye,Ue,Y),y(),L.init_fft(T),T.decay=Math.exp(-1*re/(ke*ct/192));{var Me;Me=O,R.exp_nspsytune&2&&(Me=1),Math.abs(R.msfix)>0&&(Me=R.msfix),R.msfix=Me;for(var ut=0;ut<T.npart_l;ut++)T.s3ind[ut][1]>T.npart_l-1&&(T.s3ind[ut][1]=T.npart_l-1)}var qt=576*T.mode_gr/ct;if(T.ATH.decay=Math.pow(10,-12/10*qt),T.ATH.adjust=.01,T.ATH.adjustLimit=1,le(T.bo_l[M.SBMAX_l-1]<=T.npart_l),le(T.bo_s[M.SBMAX_s-1]<=T.npart_s),R.ATHtype!=-1){var Re,Ye=R.out_samplerate/M.BLKSIZE,yt=0;for(Re=0,X=0;X<M.BLKSIZE/2;++X)Re+=Ye,T.ATH.eql_w[X]=1/Math.pow(10,this.ATHformula(Re,R)/10),yt+=T.ATH.eql_w[X];for(yt=1/yt,X=M.BLKSIZE/2;--X>=0;)T.ATH.eql_w[X]*=yt}{for(var ut=_e=0;ut<T.npart_s;++ut)for(X=0;X<T.numlines_s[ut];++X)++_e;for(var ut=_e=0;ut<T.npart_l;++ut)for(X=0;X<T.numlines_l[ut];++X)++_e}for(_e=0,X=0;X<T.npart_l;X++){var Re=ct*(_e+T.numlines_l[X]/2)/(1*M.BLKSIZE);T.mld_cb_l[X]=Zc(Re),_e+=T.numlines_l[X]}for(;X<M.CBANDS;++X)T.mld_cb_l[X]=1;for(_e=0,X=0;X<T.npart_s;X++){var Re=ct*(_e+T.numlines_s[X]/2)/(1*M.BLKSIZE_s);T.mld_cb_s[X]=Zc(Re),_e+=T.numlines_s[X]}for(;X<M.CBANDS;++X)T.mld_cb_s[X]=1;return 0};function fa(R,T){R<-.3&&(R=3410),R/=1e3,R=Math.max(.1,R);var X=3.64*Math.pow(R,-.8)-6.8*Math.exp(-.6*Math.pow(R-3.4,2))+6*Math.exp(-.15*Math.pow(R-8.7,2))+(.6+.04*T)*.001*Math.pow(R,4);return X}this.ATHformula=function(R,T){var X;switch(T.ATHtype){case 0:X=fa(R,9);break;case 1:X=fa(R,-1);break;case 2:X=fa(R,0);break;case 3:X=fa(R,1)+6;break;case 4:X=fa(R,T.ATHcurve);break;default:X=fa(R,0);break}return X}}var et=Pe;function je(L){var re=L;this.ordinal=function(){return re}}je.STEREO=new je(0),je.JOINT_STEREO=new je(1),je.DUAL_CHANNEL=new je(2),je.MONO=new je(3),je.NOT_SET=new je(4);var Ke=je;function Fe(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=Ke.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var mt=Fe,rt={};rt.SFBMAX=M.SBMAX_s*3;var ot=rt,St=K.new_float,Rt=K.new_int;function Vt(){this.xr=St(576),this.l3_enc=Rt(576),this.scalefac=Rt(ot.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=Rt(3),this.subblock_gain=Rt(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=Rt(ot.SFBMAX),this.window=Rt(ot.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=Rt(4),this.max_nonzero_coeff=0;var L=this;function re(se){return new Int32Array(se)}function he(se){return new Float32Array(se)}this.assign=function(se){L.xr=he(se.xr),L.l3_enc=re(se.l3_enc),L.scalefac=re(se.scalefac),L.xrpow_max=se.xrpow_max,L.part2_3_length=se.part2_3_length,L.big_values=se.big_values,L.count1=se.count1,L.global_gain=se.global_gain,L.scalefac_compress=se.scalefac_compress,L.block_type=se.block_type,L.mixed_block_flag=se.mixed_block_flag,L.table_select=re(se.table_select),L.subblock_gain=re(se.subblock_gain),L.region0_count=se.region0_count,L.region1_count=se.region1_count,L.preflag=se.preflag,L.scalefac_scale=se.scalefac_scale,L.count1table_select=se.count1table_select,L.part2_length=se.part2_length,L.sfb_lmax=se.sfb_lmax,L.sfb_smin=se.sfb_smin,L.psy_lmax=se.psy_lmax,L.sfbmax=se.sfbmax,L.psymax=se.psymax,L.sfbdivide=se.sfbdivide,L.width=re(se.width),L.window=re(se.window),L.count1bits=se.count1bits,L.sfb_partition_table=se.sfb_partition_table.slice(0),L.slen=re(se.slen),L.max_nonzero_coeff=se.max_nonzero_coeff}}var It=Vt,In=K.new_int;function yn(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[In(4),In(4)];for(var L=0;L<2;L++)for(var re=0;re<2;re++)this.tt[L][re]=new It}var tr=yn,wn=K.System,kr=K.new_int;function ji(L,re,he,se){this.l=kr(1+M.SBMAX_l),this.s=kr(1+M.SBMAX_s),this.psfb21=kr(1+M.PSFB21),this.psfb12=kr(1+M.PSFB12);var xe=this.l,ae=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],wn.arraycopy(this.arrL,0,xe,0,Math.min(this.arrL.length,this.l.length)),wn.arraycopy(this.arrS,0,ae,0,Math.min(this.arrS.length,this.s.length)),wn.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),wn.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var Gt=ji,jn=K.new_float,Xi=K.new_float_n,Qd=K.new_int;function Zd(){this.last_en_subshort=Xi([4,9]),this.lastAttacks=Qd(4),this.pefirbuf=jn(19),this.longfact=jn(M.SBMAX_l),this.shortfact=jn(M.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var Jd=Zd;function e_(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var t_=e_,n_=K.new_byte,r_=K.new_double,dr=K.new_float,Ns=K.new_float_n,wr=K.new_int,qi=K.new_int_n;zr.MFSIZE=3*1152+M.ENCDELAY-M.MDCTDELAY,zr.MAX_HEADER_BUF=256,zr.MAX_BITS_PER_CHANNEL=4095,zr.MAX_BITS_PER_GRANULE=7680,zr.BPC=320;function zr(){var L=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=Ns([2,zr.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new tr,this.ms_ratio=dr(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=wr(2),this.CurrentStep=wr(2),this.masking_lower=0,this.bv_scf=wr(576),this.pseudohalf=wr(ot.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*zr.BPC+1),this.itime=r_(2),this.sideinfo_len=0,this.sb_sample=Ns([2,2,18,M.SBLIMIT]),this.amp_filter=dr(32);function re(){this.write_timing=0,this.ptr=0,this.buf=n_(L)}this.header=new Array(zr.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new Gt,this.minval_l=dr(M.CBANDS),this.minval_s=dr(M.CBANDS),this.nb_1=Ns([4,M.CBANDS]),this.nb_2=Ns([4,M.CBANDS]),this.nb_s1=Ns([4,M.CBANDS]),this.nb_s2=Ns([4,M.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=dr(4),this.loudness_sq=Ns([2,2]),this.loudness_sq_save=dr(2),this.mld_l=dr(M.SBMAX_l),this.mld_s=dr(M.SBMAX_s),this.bm_l=wr(M.SBMAX_l),this.bo_l=wr(M.SBMAX_l),this.bm_s=wr(M.SBMAX_s),this.bo_s=wr(M.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=qi([M.CBANDS,2]),this.s3ind_s=qi([M.CBANDS,2]),this.numlines_s=wr(M.CBANDS),this.numlines_l=wr(M.CBANDS),this.rnumlines_l=dr(M.CBANDS),this.mld_cb_l=dr(M.CBANDS),this.mld_cb_s=dr(M.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=dr(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=wr(2),this.nsPsy=new Jd,this.VBR_seek_table=new t_,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=qi([16,5]),this.bitrate_blockType_Hist=qi([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var he=0;he<this.en.length;he++)this.en[he]=new bt;for(var he=0;he<this.thm.length;he++)this.thm[he]=new bt;for(var he=0;he<this.header.length;he++)this.header[he]=new re}var Yt=zr,Fs=K.new_float;function s_(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=Fs(M.SBMAX_l),this.s=Fs(M.SBMAX_s),this.psfb21=Fs(M.PSFB21),this.psfb12=Fs(M.PSFB12),this.cb_l=Fs(M.CBANDS),this.cb_s=Fs(M.CBANDS),this.eql_w=Fs(M.BLKSIZE/2)}var a_=s_,Xn=K.System,$c=K.Arrays;sn.STEPS_per_dB=100,sn.MAX_dB=120,sn.GAIN_NOT_ENOUGH_SAMPLES=-24601,sn.GAIN_ANALYSIS_ERROR=0,sn.GAIN_ANALYSIS_OK=1,sn.INIT_GAIN_ANALYSIS_ERROR=0,sn.INIT_GAIN_ANALYSIS_OK=1,sn.YULE_ORDER=10,sn.MAX_ORDER=sn.YULE_ORDER,sn.MAX_SAMP_FREQ=48e3,sn.RMS_WINDOW_TIME_NUMERATOR=1,sn.RMS_WINDOW_TIME_DENOMINATOR=20,sn.MAX_SAMPLES_PER_WINDOW=sn.MAX_SAMP_FREQ*sn.RMS_WINDOW_TIME_NUMERATOR/sn.RMS_WINDOW_TIME_DENOMINATOR+1;function sn(){var L=64.82,re=.95,he=sn.RMS_WINDOW_TIME_NUMERATOR,se=sn.RMS_WINDOW_TIME_DENOMINATOR,xe=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],ae=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function me(B,O,H,i,z,G){for(;z--!=0;)H[i]=1e-10+B[O+0]*G[0]-H[i-1]*G[1]+B[O-1]*G[2]-H[i-2]*G[3]+B[O-2]*G[4]-H[i-3]*G[5]+B[O-3]*G[6]-H[i-4]*G[7]+B[O-4]*G[8]-H[i-5]*G[9]+B[O-5]*G[10]-H[i-6]*G[11]+B[O-6]*G[12]-H[i-7]*G[13]+B[O-7]*G[14]-H[i-8]*G[15]+B[O-8]*G[16]-H[i-9]*G[17]+B[O-9]*G[18]-H[i-10]*G[19]+B[O-10]*G[20],++i,++O}function Ie(B,O,H,i,z,G){for(;z--!=0;)H[i]=B[O+0]*G[0]-H[i-1]*G[1]+B[O-1]*G[2]-H[i-2]*G[3]+B[O-2]*G[4],++i,++O}function ke(B,O){for(var H=0;H<MAX_ORDER;H++)B.linprebuf[H]=B.lstepbuf[H]=B.loutbuf[H]=B.rinprebuf[H]=B.rstepbuf[H]=B.routbuf[H]=0;switch(0|O){case 48e3:B.reqindex=0;break;case 44100:B.reqindex=1;break;case 32e3:B.reqindex=2;break;case 24e3:B.reqindex=3;break;case 22050:B.reqindex=4;break;case 16e3:B.reqindex=5;break;case 12e3:B.reqindex=6;break;case 11025:B.reqindex=7;break;case 8e3:B.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return B.sampleWindow=0|(O*he+se-1)/se,B.lsum=0,B.rsum=0,B.totsamp=0,$c.ill(B.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(B,O){return ke(B,O)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(B.linpre=MAX_ORDER,B.rinpre=MAX_ORDER,B.lstep=MAX_ORDER,B.rstep=MAX_ORDER,B.lout=MAX_ORDER,B.rout=MAX_ORDER,$c.fill(B.B,0),INIT_GAIN_ANALYSIS_OK)};function U(B){return B*B}this.AnalyzeSamples=function(B,O,H,i,z,G,j){var f,E,I,P,F,l,A;if(G==0)return GAIN_ANALYSIS_OK;switch(A=0,F=G,j){case 1:i=O,z=H;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(G<MAX_ORDER?(Xn.arraycopy(O,H,B.linprebuf,MAX_ORDER,G),Xn.arraycopy(i,z,B.rinprebuf,MAX_ORDER,G)):(Xn.arraycopy(O,H,B.linprebuf,MAX_ORDER,MAX_ORDER),Xn.arraycopy(i,z,B.rinprebuf,MAX_ORDER,MAX_ORDER));F>0;){l=F>B.sampleWindow-B.totsamp?B.sampleWindow-B.totsamp:F,A<MAX_ORDER?(f=B.linpre+A,E=B.linprebuf,I=B.rinpre+A,P=B.rinprebuf,l>MAX_ORDER-A&&(l=MAX_ORDER-A)):(f=H+A,E=O,I=z+A,P=i),me(E,f,B.lstepbuf,B.lstep+B.totsamp,l,xe[B.reqindex]),me(P,I,B.rstepbuf,B.rstep+B.totsamp,l,xe[B.reqindex]),Ie(B.lstepbuf,B.lstep+B.totsamp,B.loutbuf,B.lout+B.totsamp,l,ae[B.reqindex]),Ie(B.rstepbuf,B.rstep+B.totsamp,B.routbuf,B.rout+B.totsamp,l,ae[B.reqindex]),f=B.lout+B.totsamp,E=B.loutbuf,I=B.rout+B.totsamp,P=B.routbuf;for(var y=l%8;y--!=0;)B.lsum+=U(E[f++]),B.rsum+=U(P[I++]);for(y=l/8;y--!=0;)B.lsum+=U(E[f+0])+U(E[f+1])+U(E[f+2])+U(E[f+3])+U(E[f+4])+U(E[f+5])+U(E[f+6])+U(E[f+7]),f+=8,B.rsum+=U(P[I+0])+U(P[I+1])+U(P[I+2])+U(P[I+3])+U(P[I+4])+U(P[I+5])+U(P[I+6])+U(P[I+7]),I+=8;if(F-=l,A+=l,B.totsamp+=l,B.totsamp==B.sampleWindow){var d=sn.STEPS_per_dB*10*Math.log10((B.lsum+B.rsum)/B.totsamp*.5+1e-37),w=d<=0?0:0|d;w>=B.A.length&&(w=B.A.length-1),B.A[w]++,B.lsum=B.rsum=0,Xn.arraycopy(B.loutbuf,B.totsamp,B.loutbuf,0,MAX_ORDER),Xn.arraycopy(B.routbuf,B.totsamp,B.routbuf,0,MAX_ORDER),Xn.arraycopy(B.lstepbuf,B.totsamp,B.lstepbuf,0,MAX_ORDER),Xn.arraycopy(B.rstepbuf,B.totsamp,B.rstepbuf,0,MAX_ORDER),B.totsamp=0}if(B.totsamp>B.sampleWindow)return GAIN_ANALYSIS_ERROR}return G<MAX_ORDER?(Xn.arraycopy(B.linprebuf,G,B.linprebuf,0,MAX_ORDER-G),Xn.arraycopy(B.rinprebuf,G,B.rinprebuf,0,MAX_ORDER-G),Xn.arraycopy(O,H,B.linprebuf,MAX_ORDER-G,G),Xn.arraycopy(i,z,B.rinprebuf,MAX_ORDER-G,G)):(Xn.arraycopy(O,H+G-MAX_ORDER,B.linprebuf,0,MAX_ORDER),Xn.arraycopy(i,z+G-MAX_ORDER,B.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function we(B,O){var H,i=0;for(H=0;H<O;H++)i+=B[H];if(i==0)return GAIN_NOT_ENOUGH_SAMPLES;var z=0|Math.ceil(i*(1-re));for(H=O;H-- >0&&!((z-=B[H])<=0););return L-H/sn.STEPS_per_dB}this.GetTitleGain=function(B){for(var O=we(B.A,B.A.length),H=0;H<B.A.length;H++)B.B[H]+=B.A[H],B.A[H]=0;for(var H=0;H<MAX_ORDER;H++)B.linprebuf[H]=B.lstepbuf[H]=B.loutbuf[H]=B.rinprebuf[H]=B.rstepbuf[H]=B.routbuf[H]=0;return B.totsamp=0,B.lsum=B.rsum=0,O}}var $n=sn,la=K.new_float,Vc=K.new_int;function i_(){this.linprebuf=la($n.MAX_ORDER*2),this.linpre=0,this.lstepbuf=la($n.MAX_SAMPLES_PER_WINDOW+$n.MAX_ORDER),this.lstep=0,this.loutbuf=la($n.MAX_SAMPLES_PER_WINDOW+$n.MAX_ORDER),this.lout=0,this.rinprebuf=la($n.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=la($n.MAX_SAMPLES_PER_WINDOW+$n.MAX_ORDER),this.rstep=0,this.routbuf=la($n.MAX_SAMPLES_PER_WINDOW+$n.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=Vc(0|$n.STEPS_per_dB*$n.MAX_dB),this.B=Vc(0|$n.STEPS_per_dB*$n.MAX_dB)}var o_=i_;function l_(L){this.bits=L}var Hc=l_,Dc=K.new_float,c_=K.new_int,jc=K.assert;function u_(L){var re=L;this.quantize=re,this.iteration_loop=function(he,se,xe,ae){var me=he.internal_flags,Ie=Dc(ot.SFBMAX),ke=Dc(576),U=c_(2),we=0,B,O=me.l3_side,H=new Hc(we);this.quantize.rv.ResvFrameBegin(he,H),we=H.bits;for(var i=0;i<me.mode_gr;i++){B=this.quantize.qupvt.on_pe(he,se,U,we,i,i),me.mode_ext==M.MPG_MD_MS_LR&&(this.quantize.ms_convert(me.l3_side,i),this.quantize.qupvt.reduce_side(U,xe[i],we,B));for(var z=0;z<me.channels_out;z++){var G,j,f=O.tt[i][z];f.block_type!=M.SHORT_TYPE?(G=0,j=me.PSY.mask_adjust-G):(G=0,j=me.PSY.mask_adjust_short-G),me.masking_lower=Math.pow(10,j*.1),this.quantize.init_outer_loop(me,f),this.quantize.init_xrpow(me,f,ke)&&(this.quantize.qupvt.calc_xmin(he,ae[i][z],f,Ie),this.quantize.outer_loop(he,f,Ie,ke,z,U[z])),this.quantize.iteration_finish_one(me,i,z),jc(f.part2_3_length<=Yt.MAX_BITS_PER_CHANNEL),jc(f.part2_3_length<=U[z])}}this.quantize.rv.ResvFrameEnd(me,we)}}var f_=u_;function Ot(L,re,he,se){this.xlen=L,this.linmax=re,this.table=he,this.hlen=se}var Te={};Te.t1HB=[1,1,1,0],Te.t2HB=[1,2,1,3,1,1,3,2,0],Te.t3HB=[3,2,1,1,1,1,3,2,0],Te.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],Te.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],Te.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],Te.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],Te.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],Te.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],Te.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],Te.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],Te.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],Te.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],Te.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],Te.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],Te.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],Te.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],Te.t1l=[1,4,3,5],Te.t2l=[1,4,7,4,5,7,6,7,8],Te.t3l=[2,3,7,4,4,7,6,7,8],Te.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],Te.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],Te.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],Te.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],Te.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],Te.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],Te.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],Te.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],Te.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],Te.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],Te.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],Te.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],Te.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],Te.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],Te.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],Te.ht=[new Ot(0,0,null,null),new Ot(2,0,Te.t1HB,Te.t1l),new Ot(3,0,Te.t2HB,Te.t2l),new Ot(3,0,Te.t3HB,Te.t3l),new Ot(0,0,null,null),new Ot(4,0,Te.t5HB,Te.t5l),new Ot(4,0,Te.t6HB,Te.t6l),new Ot(6,0,Te.t7HB,Te.t7l),new Ot(6,0,Te.t8HB,Te.t8l),new Ot(6,0,Te.t9HB,Te.t9l),new Ot(8,0,Te.t10HB,Te.t10l),new Ot(8,0,Te.t11HB,Te.t11l),new Ot(8,0,Te.t12HB,Te.t12l),new Ot(16,0,Te.t13HB,Te.t13l),new Ot(0,0,null,Te.t16_5l),new Ot(16,0,Te.t15HB,Te.t15l),new Ot(1,1,Te.t16HB,Te.t16l),new Ot(2,3,Te.t16HB,Te.t16l),new Ot(3,7,Te.t16HB,Te.t16l),new Ot(4,15,Te.t16HB,Te.t16l),new Ot(6,63,Te.t16HB,Te.t16l),new Ot(8,255,Te.t16HB,Te.t16l),new Ot(10,1023,Te.t16HB,Te.t16l),new Ot(13,8191,Te.t16HB,Te.t16l),new Ot(4,15,Te.t24HB,Te.t24l),new Ot(5,31,Te.t24HB,Te.t24l),new Ot(6,63,Te.t24HB,Te.t24l),new Ot(7,127,Te.t24HB,Te.t24l),new Ot(8,255,Te.t24HB,Te.t24l),new Ot(9,511,Te.t24HB,Te.t24l),new Ot(11,2047,Te.t24HB,Te.t24l),new Ot(13,8191,Te.t24HB,Te.t24l),new Ot(0,0,Te.t32HB,Te.t32l),new Ot(0,0,Te.t33HB,Te.t33l)],Te.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],Te.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],Te.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],Te.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],Te.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],Te.scfsi_band=[0,6,11,16,21];var Ct=Te,$s=K.VbrMode,Ui=K.Float,M0=K.Util,Vs=K.new_float,h_=K.new_int,Ha=K.assert;Qr.Q_MAX=257,Qr.Q_MAX2=116,Qr.LARGE_BITS=1e5,Qr.IXMAX_VAL=8206;function Qr(){var L=null,re=null,he=null;this.setModules=function(f,E,I){L=f,re=E,he=I};function se(f){return B[f+Qr.Q_MAX2]}this.IPOW20=function(f){return O[f]};var xe=2220446049250313e-31,ae=Qr.IXMAX_VAL,me=ae+2,Ie=Qr.Q_MAX,ke=Qr.Q_MAX2,U=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var we=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=we,this.sfBandIndex=[new Gt([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Gt([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Gt([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Gt([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Gt([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Gt([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Gt([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Gt([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Gt([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var B=Vs(Ie+ke+1),O=Vs(Ie),H=Vs(me),i=Vs(me);this.adj43=i;function z(f,E){var I=he.ATHformula(E,f);return I-=U,I=Math.pow(10,I/10+f.ATHlower),I}function G(f){for(var E=f.internal_flags.ATH.l,I=f.internal_flags.ATH.psfb21,P=f.internal_flags.ATH.s,F=f.internal_flags.ATH.psfb12,l=f.internal_flags,A=f.out_samplerate,y=0;y<M.SBMAX_l;y++){var d=l.scalefac_band.l[y],w=l.scalefac_band.l[y+1];E[y]=Ui.MAX_VALUE;for(var x=d;x<w;x++){var u=x*A/1152,_=z(f,u);E[y]=Math.min(E[y],_)}}for(var y=0;y<M.PSFB21;y++){var d=l.scalefac_band.psfb21[y],w=l.scalefac_band.psfb21[y+1];I[y]=Ui.MAX_VALUE;for(var x=d;x<w;x++){var u=x*A/1152,_=z(f,u);I[y]=Math.min(I[y],_)}}for(var y=0;y<M.SBMAX_s;y++){var d=l.scalefac_band.s[y],w=l.scalefac_band.s[y+1];P[y]=Ui.MAX_VALUE;for(var x=d;x<w;x++){var u=x*A/384,_=z(f,u);P[y]=Math.min(P[y],_)}P[y]*=l.scalefac_band.s[y+1]-l.scalefac_band.s[y]}for(var y=0;y<M.PSFB12;y++){var d=l.scalefac_band.psfb12[y],w=l.scalefac_band.psfb12[y+1];F[y]=Ui.MAX_VALUE;for(var x=d;x<w;x++){var u=x*A/384,_=z(f,u);F[y]=Math.min(F[y],_)}F[y]*=l.scalefac_band.s[13]-l.scalefac_band.s[12]}if(f.noATH){for(var y=0;y<M.SBMAX_l;y++)E[y]=1e-20;for(var y=0;y<M.PSFB21;y++)I[y]=1e-20;for(var y=0;y<M.SBMAX_s;y++)P[y]=1e-20;for(var y=0;y<M.PSFB12;y++)F[y]=1e-20}l.ATH.floor=10*Math.log10(z(f,-1))}this.iteration_init=function(f){var E=f.internal_flags,I=E.l3_side,P;if(E.iteration_init_init==0){for(E.iteration_init_init=1,I.main_data_begin=0,G(f),H[0]=0,P=1;P<me;P++)H[P]=Math.pow(P,4/3);for(P=0;P<me-1;P++)i[P]=P+1-Math.pow(.5*(H[P]+H[P+1]),.75);for(i[P]=.5,P=0;P<Ie;P++)O[P]=Math.pow(2,(P-210)*-.1875);for(P=0;P<=Ie+ke;P++)B[P]=Math.pow(2,(P-210-ke)*.25);L.huffman_init(E);{var F,l,A,y;for(P=f.exp_nspsytune>>2&63,P>=32&&(P-=64),F=Math.pow(10,P/4/10),P=f.exp_nspsytune>>8&63,P>=32&&(P-=64),l=Math.pow(10,P/4/10),P=f.exp_nspsytune>>14&63,P>=32&&(P-=64),A=Math.pow(10,P/4/10),P=f.exp_nspsytune>>20&63,P>=32&&(P-=64),y=A*Math.pow(10,P/4/10),P=0;P<M.SBMAX_l;P++){var d;P<=6?d=F:P<=13?d=l:P<=20?d=A:d=y,E.nsPsy.longfact[P]=d}for(P=0;P<M.SBMAX_s;P++){var d;P<=5?d=F:P<=10?d=l:P<=11?d=A:d=y,E.nsPsy.shortfact[P]=d}}}},this.on_pe=function(f,E,I,P,F,l){var A=f.internal_flags,y=0,d,w=h_(2),x,u=new Hc(y),_=re.ResvMaxBits(f,P,u,l);y=u.bits;var v=y+_;for(v>Yt.MAX_BITS_PER_GRANULE&&(v=Yt.MAX_BITS_PER_GRANULE),d=0,x=0;x<A.channels_out;++x)I[x]=Math.min(Yt.MAX_BITS_PER_CHANNEL,y/A.channels_out),w[x]=0|I[x]*E[F][x]/700-I[x],w[x]>P*3/4&&(w[x]=P*3/4),w[x]<0&&(w[x]=0),w[x]+I[x]>Yt.MAX_BITS_PER_CHANNEL&&(w[x]=Math.max(0,Yt.MAX_BITS_PER_CHANNEL-I[x])),d+=w[x];if(d>_)for(x=0;x<A.channels_out;++x)w[x]=_*w[x]/d;for(x=0;x<A.channels_out;++x)I[x]+=w[x],_-=w[x];for(d=0,x=0;x<A.channels_out;++x)d+=I[x];if(d>Yt.MAX_BITS_PER_GRANULE){var k=0;for(x=0;x<A.channels_out;++x)I[x]*=Yt.MAX_BITS_PER_GRANULE,I[x]/=d,k+=I[x]}return v},this.reduce_side=function(f,E,I,P){Ha(f[0]+f[1]<=Yt.MAX_BITS_PER_GRANULE);var F=.33*(.5-E)/.5;F<0&&(F=0),F>.5&&(F=.5);var l=0|F*.5*(f[0]+f[1]);l>Yt.MAX_BITS_PER_CHANNEL-f[0]&&(l=Yt.MAX_BITS_PER_CHANNEL-f[0]),l<0&&(l=0),f[1]>=125&&(f[1]-l>125?(f[0]<I&&(f[0]+=l),f[1]-=l):(f[0]+=f[1]-125,f[1]=125)),l=f[0]+f[1],l>P&&(f[0]=P*f[0]/l,f[1]=P*f[1]/l),Ha(f[0]<=Yt.MAX_BITS_PER_CHANNEL),Ha(f[1]<=Yt.MAX_BITS_PER_CHANNEL),Ha(f[0]+f[1]<=Yt.MAX_BITS_PER_GRANULE)},this.athAdjust=function(f,E,I){var P=90.30873362,F=94.82444863,l=M0.FAST_LOG10_X(E,10),A=f*f,y=0;return l-=I,A>1e-20&&(y=1+M0.FAST_LOG10_X(A,10/P)),y<0&&(y=0),l*=y,l+=I+P-F,Math.pow(10,.1*l)},this.calc_xmin=function(f,E,I,P){var F=0,l=f.internal_flags,A,y=0,d=0,w=l.ATH,x=I.xr,u=f.VBR==$s.vbr_mtrh?1:0,_=l.masking_lower;for((f.VBR==$s.vbr_mtrh||f.VBR==$s.vbr_mt)&&(_=1),A=0;A<I.psy_lmax;A++){var v,k,ue,q,Q,c;f.VBR==$s.vbr_rh||f.VBR==$s.vbr_mtrh?k=athAdjust(w.adjust,w.l[A],w.floor):k=w.adjust*w.l[A],Q=I.width[A],ue=k/Q,q=xe,c=Q>>1,v=0;do{var p,fe;p=x[y]*x[y],v+=p,q+=p<ue?p:ue,y++,fe=x[y]*x[y],v+=fe,q+=fe<ue?fe:ue,y++}while(--c>0);if(v>k&&d++,A==M.SBPSY_l){var ve=k*l.nsPsy.longfact[A];q<ve&&(q=ve)}if(u!=0&&(k=q),!f.ATHonly){var Oe=E.en.l[A];if(Oe>0){var ve;ve=v*E.thm.l[A]*_/Oe,u!=0&&(ve*=l.nsPsy.longfact[A]),k<ve&&(k=ve)}}u!=0?P[F++]=k:P[F++]=k*l.nsPsy.longfact[A]}var qe=575;if(I.block_type!=M.SHORT_TYPE)for(var Le=576;Le--!=0&&Zr.EQ(x[Le],0);)qe=Le;I.max_nonzero_coeff=qe;for(var De=I.sfb_smin;A<I.psymax;De++,A+=3){var Q,dt,st;for(f.VBR==$s.vbr_rh||f.VBR==$s.vbr_mtrh?st=athAdjust(w.adjust,w.s[De],w.floor):st=w.adjust*w.s[De],Q=I.width[A],dt=0;dt<3;dt++){var v=0,k,ue,q,c=Q>>1;ue=st/Q,q=xe;do{var p,fe;p=x[y]*x[y],v+=p,q+=p<ue?p:ue,y++,fe=x[y]*x[y],v+=fe,q+=fe<ue?fe:ue,y++}while(--c>0);if(v>st&&d++,De==M.SBPSY_s){var ve=st*l.nsPsy.shortfact[De];q<ve&&(q=ve)}if(u!=0?k=q:k=st,!f.ATHonly&&!f.ATHshort){var Oe=E.en.s[De][dt];if(Oe>0){var ve;ve=v*E.thm.s[De][dt]*_/Oe,u!=0&&(ve*=l.nsPsy.shortfact[De]),k<ve&&(k=ve)}}u!=0?P[F++]=k:P[F++]=k*l.nsPsy.shortfact[De]}f.useTemporal&&(P[F-3]>P[F-3+1]&&(P[F-3+1]+=(P[F-3]-P[F-3+1])*l.decay),P[F-3+1]>P[F-3+2]&&(P[F-3+2]+=(P[F-3+1]-P[F-3+2])*l.decay))}return d};function j(f){this.s=f}this.calc_noise_core=function(f,E,I,P){var F=0,l=E.s,A=f.l3_enc;if(l>f.count1)for(;I--!=0;){var y;y=f.xr[l],l++,F+=y*y,y=f.xr[l],l++,F+=y*y}else if(l>f.big_values){var d=Vs(2);for(d[0]=0,d[1]=P;I--!=0;){var y;y=Math.abs(f.xr[l])-d[A[l]],l++,F+=y*y,y=Math.abs(f.xr[l])-d[A[l]],l++,F+=y*y}}else for(;I--!=0;){var y;y=Math.abs(f.xr[l])-H[A[l]]*P,l++,F+=y*y,y=Math.abs(f.xr[l])-H[A[l]]*P,l++,F+=y*y}return E.s=l,F},this.calc_noise=function(f,E,I,P,F){var l=0,A=0,y,d,w=0,x=0,u=0,_=-20,v=0,k=f.scalefac,ue=0;for(P.over_SSD=0,y=0;y<f.psymax;y++){var q=f.global_gain-(k[ue++]+(f.preflag!=0?we[y]:0)<<f.scalefac_scale+1)-f.subblock_gain[f.window[y]]*8,Q=0;if(F!=null&&F.step[y]==q)Q=F.noise[y],v+=f.width[y],I[l++]=Q/E[A++],Q=F.noise_log[y];else{var c=se(q);if(d=f.width[y]>>1,v+f.width[y]>f.max_nonzero_coeff){var p;p=f.max_nonzero_coeff-v+1,p>0?d=p>>1:d=0}var fe=new j(v);Q=this.calc_noise_core(f,fe,d,c),v=fe.s,F!=null&&(F.step[y]=q,F.noise[y]=Q),Q=I[l++]=Q/E[A++],Q=M0.FAST_LOG10(Math.max(Q,1e-20)),F!=null&&(F.noise_log[y]=Q)}if(F!=null&&(F.global_gain=f.global_gain),u+=Q,Q>0){var ve;ve=Math.max(0|Q*10+.5,1),P.over_SSD+=ve*ve,w++,x+=Q}_=Math.max(_,Q)}return P.over_count=w,P.tot_noise=u,P.over_noise=x,P.max_noise=_,w},this.set_pinfo=function(f,E,I,P,F){var l=f.internal_flags,A,y,d,w,x,u=E.scalefac_scale==0?.5:1,_=E.scalefac,v=Vs(L3Side.SFBMAX),k=Vs(L3Side.SFBMAX),ue=new CalcNoiseResult;calc_xmin(f,I,E,v),calc_noise(E,v,k,ue,null);var q=0;for(y=E.sfb_lmax,E.block_type!=M.SHORT_TYPE&&E.mixed_block_flag==0&&(y=22),A=0;A<y;A++){var Q=l.scalefac_band.l[A],c=l.scalefac_band.l[A+1],p=c-Q;for(w=0;q<c;q++)w+=E.xr[q]*E.xr[q];w/=p,x=1e15,l.pinfo.en[P][F][A]=x*w,l.pinfo.xfsf[P][F][A]=x*v[A]*k[A]/p,I.en.l[A]>0&&!f.ATHonly?w=w/I.en.l[A]:w=0,l.pinfo.thr[P][F][A]=x*Math.max(w*I.thm.l[A],l.ATH.l[A]),l.pinfo.LAMEsfb[P][F][A]=0,E.preflag!=0&&A>=11&&(l.pinfo.LAMEsfb[P][F][A]=-u*we[A]),A<M.SBPSY_l&&(Ha(_[A]>=0),l.pinfo.LAMEsfb[P][F][A]-=u*_[A])}if(E.block_type==M.SHORT_TYPE)for(y=A,A=E.sfb_smin;A<M.SBMAX_s;A++)for(var Q=l.scalefac_band.s[A],c=l.scalefac_band.s[A+1],p=c-Q,fe=0;fe<3;fe++){for(w=0,d=Q;d<c;d++)w+=E.xr[q]*E.xr[q],q++;w=Math.max(w/p,1e-20),x=1e15,l.pinfo.en_s[P][F][3*A+fe]=x*w,l.pinfo.xfsf_s[P][F][3*A+fe]=x*v[y]*k[y]/p,I.en.s[A][fe]>0?w=w/I.en.s[A][fe]:w=0,(f.ATHonly||f.ATHshort)&&(w=0),l.pinfo.thr_s[P][F][3*A+fe]=x*Math.max(w*I.thm.s[A][fe],l.ATH.s[A]),l.pinfo.LAMEsfb_s[P][F][3*A+fe]=-2*E.subblock_gain[fe],A<M.SBPSY_s&&(l.pinfo.LAMEsfb_s[P][F][3*A+fe]-=u*_[y]),y++}l.pinfo.LAMEqss[P][F]=E.global_gain,l.pinfo.LAMEmainbits[P][F]=E.part2_3_length+E.part2_length,l.pinfo.LAMEsfbits[P][F]=E.part2_length,l.pinfo.over[P][F]=ue.over_count,l.pinfo.max_noise[P][F]=ue.max_noise*10,l.pinfo.over_noise[P][F]=ue.over_noise*10,l.pinfo.tot_noise[P][F]=ue.tot_noise*10,l.pinfo.over_SSD[P][F]=ue.over_SSD}}var ds=Qr,d_=K.System,__=K.Arrays,Da=K.new_int,T0=K.assert;function C0(){var L=null;this.qupvt=null,this.setModules=function(d){this.qupvt=d,L=d};function re(d){this.bits=0|d}var he=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function se(d,w,x,u,_,v){var k=.5946/w;for(d=d>>1;d--!=0;)_[v++]=k>x[u++]?0:1,_[v++]=k>x[u++]?0:1}function xe(d,w,x,u,_,v){d=d>>1;var k=d%2;for(d=d>>1;d--!=0;){var ue,q,Q,c,p,fe,ve,Oe;ue=x[u++]*w,q=x[u++]*w,p=0|ue,Q=x[u++]*w,fe=0|q,c=x[u++]*w,ve=0|Q,ue+=L.adj43[p],Oe=0|c,q+=L.adj43[fe],_[v++]=0|ue,Q+=L.adj43[ve],_[v++]=0|q,c+=L.adj43[Oe],_[v++]=0|Q,_[v++]=0|c}if(k!=0){var ue,q,p,fe;ue=x[u++]*w,q=x[u++]*w,p=0|ue,fe=0|q,ue+=L.adj43[p],q+=L.adj43[fe],_[v++]=0|ue,_[v++]=0|q}}function ae(d,w,x,u,_){var v,k,ue=0,q,Q=0,c=0,p=0,fe=w,ve=0,Oe=fe,qe=0,Le=d,De=0;for(q=_!=null&&u.global_gain==_.global_gain,u.block_type==M.SHORT_TYPE?k=38:k=21,v=0;v<=k;v++){var dt=-1;if((q||u.block_type==M.NORM_TYPE)&&(dt=u.global_gain-(u.scalefac[v]+(u.preflag!=0?L.pretab[v]:0)<<u.scalefac_scale+1)-u.subblock_gain[u.window[v]]*8),T0(u.width[v]>=0),q&&_.step[v]==dt)Q!=0&&(xe(Q,x,Le,De,Oe,qe),Q=0),c!=0&&(se(c,x,Le,De,Oe,qe),c=0);else{var st=u.width[v];if(ue+u.width[v]>u.max_nonzero_coeff){var $e;$e=u.max_nonzero_coeff-ue+1,__.fill(w,u.max_nonzero_coeff,576,0),st=$e,st<0&&(st=0),v=k+1}if(Q==0&&c==0&&(Oe=fe,qe=ve,Le=d,De=p),_!=null&&_.sfb_count1>0&&v>=_.sfb_count1&&_.step[v]>0&&dt>=_.step[v]?(Q!=0&&(xe(Q,x,Le,De,Oe,qe),Q=0,Oe=fe,qe=ve,Le=d,De=p),c+=st):(c!=0&&(se(c,x,Le,De,Oe,qe),c=0,Oe=fe,qe=ve,Le=d,De=p),Q+=st),st<=0){c!=0&&(se(c,x,Le,De,Oe,qe),c=0),Q!=0&&(xe(Q,x,Le,De,Oe,qe),Q=0);break}}v<=k&&(ve+=u.width[v],p+=u.width[v],ue+=u.width[v])}Q!=0&&(xe(Q,x,Le,De,Oe,qe),Q=0),c!=0&&(se(c,x,Le,De,Oe,qe),c=0)}function me(d,w,x){var u=0,_=0;do{var v=d[w++],k=d[w++];u<v&&(u=v),_<k&&(_=k)}while(w<x);return u<_&&(u=_),u}function Ie(d,w,x,u,_,v){var k=Ct.ht[u].xlen*65536+Ct.ht[_].xlen,ue=0,q;do{var Q=d[w++],c=d[w++];Q!=0&&(Q>14&&(Q=15,ue+=k),Q*=16),c!=0&&(c>14&&(c=15,ue+=k),Q+=c),ue+=Ct.largetbl[Q]}while(w<x);return q=ue&65535,ue>>=16,ue>q&&(ue=q,u=_),v.bits+=ue,u}function ke(d,w,x,u){var _=0,v=Ct.ht[1].hlen;do{var k=d[w+0]*2+d[w+1];w+=2,_+=v[k]}while(w<x);return u.bits+=_,1}function U(d,w,x,u,_){var v=0,k,ue=Ct.ht[u].xlen,q;u==2?q=Ct.table23:q=Ct.table56;do{var Q=d[w+0]*ue+d[w+1];w+=2,v+=q[Q]}while(w<x);return k=v&65535,v>>=16,v>k&&(v=k,u++),_.bits+=v,u}function we(d,w,x,u,_){var v=0,k=0,ue=0,q=Ct.ht[u].xlen,Q=Ct.ht[u].hlen,c=Ct.ht[u+1].hlen,p=Ct.ht[u+2].hlen;do{var fe=d[w+0]*q+d[w+1];w+=2,v+=Q[fe],k+=c[fe],ue+=p[fe]}while(w<x);var ve=u;return v>k&&(v=k,ve++),v>ue&&(v=ue,ve=u+2),_.bits+=v,ve}var B=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function O(d,w,x,u){var _=me(d,w,x);switch(_){case 0:return _;case 1:return ke(d,w,x,u);case 2:case 3:return U(d,w,x,B[_-1],u);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return we(d,w,x,B[_-1],u);default:if(_>ds.IXMAX_VAL)return u.bits=ds.LARGE_BITS,-1;_-=15;var v;for(v=24;v<32&&!(Ct.ht[v].linmax>=_);v++);var k;for(k=v-8;k<24&&!(Ct.ht[k].linmax>=_);k++);return Ie(d,w,x,k,v,u)}}this.noquant_count_bits=function(d,w,x){var u=w.l3_enc,_=Math.min(576,w.max_nonzero_coeff+2>>1<<1);for(x!=null&&(x.sfb_count1=0);_>1&&!(u[_-1]|u[_-2]);_-=2);w.count1=_;for(var v=0,k=0;_>3;_-=4){var ue;if(((u[_-1]|u[_-2]|u[_-3]|u[_-4])&2147483647)>1)break;ue=((u[_-4]*2+u[_-3])*2+u[_-2])*2+u[_-1],v+=Ct.t32l[ue],k+=Ct.t33l[ue]}var q=v;if(w.count1table_select=0,v>k&&(q=k,w.count1table_select=1),w.count1bits=q,w.big_values=_,_==0)return q;if(w.block_type==M.SHORT_TYPE)v=3*d.scalefac_band.s[3],v>w.big_values&&(v=w.big_values),k=w.big_values;else if(w.block_type==M.NORM_TYPE){if(v=w.region0_count=d.bv_scf[_-2],k=w.region1_count=d.bv_scf[_-1],k=d.scalefac_band.l[v+k+2],v=d.scalefac_band.l[v+1],k<_){var Q=new re(q);w.table_select[2]=O(u,k,_,Q),q=Q.bits}}else w.region0_count=7,w.region1_count=M.SBMAX_l-1-7-1,v=d.scalefac_band.l[8],k=_,v>k&&(v=k);if(v=Math.min(v,_),k=Math.min(k,_),0<v){var Q=new re(q);w.table_select[0]=O(u,0,v,Q),q=Q.bits}if(v<k){var Q=new re(q);w.table_select[1]=O(u,v,k,Q),q=Q.bits}if(d.use_best_huffman==2&&(w.part2_3_length=q,best_huffman_divide(d,w),q=w.part2_3_length),x!=null&&w.block_type==M.NORM_TYPE){for(var c=0;d.scalefac_band.l[c]<w.big_values;)c++;x.sfb_count1=c}return q},this.count_bits=function(d,w,x,u){var _=x.l3_enc,v=ds.IXMAX_VAL/L.IPOW20(x.global_gain);if(x.xrpow_max>v)return ds.LARGE_BITS;if(ae(w,_,L.IPOW20(x.global_gain),x,u),d.substep_shaping&2)for(var k=0,ue=x.global_gain+x.scalefac_scale,q=.634521682242439/L.IPOW20(ue),Q=0;Q<x.sfbmax;Q++){var c=x.width[Q];if(d.pseudohalf[Q]==0)k+=c;else{var p;for(p=k,k+=c;p<k;++p)_[p]=w[p]>=q?_[p]:0}}return this.noquant_count_bits(d,x,u)};function H(d,w,x,u,_,v,k){for(var ue=w.big_values,q=0;q<=22;q++)u[q]=ds.LARGE_BITS;for(var q=0;q<16;q++){var Q=d.scalefac_band.l[q+1];if(Q>=ue)break;var c=0,p=new re(c),fe=O(x,0,Q,p);c=p.bits;for(var ve=0;ve<8;ve++){var Oe=d.scalefac_band.l[q+ve+2];if(Oe>=ue)break;var qe=c;p=new re(qe);var Le=O(x,Q,Oe,p);qe=p.bits,u[q+ve]>qe&&(u[q+ve]=qe,_[q+ve]=q,v[q+ve]=fe,k[q+ve]=Le)}}}function i(d,w,x,u,_,v,k,ue){for(var q=w.big_values,Q=2;Q<M.SBMAX_l+1;Q++){var c=d.scalefac_band.l[Q];if(c>=q)break;var p=_[Q-2]+w.count1bits;if(x.part2_3_length<=p)break;var fe=new re(p),ve=O(u,c,q,fe);p=fe.bits,!(x.part2_3_length<=p)&&(x.assign(w),x.part2_3_length=p,x.region0_count=v[Q-2],x.region1_count=Q-2-v[Q-2],x.table_select[0]=k[Q-2],x.table_select[1]=ue[Q-2],x.table_select[2]=ve)}}this.best_huffman_divide=function(d,w){var x=new It,u=w.l3_enc,_=Da(23),v=Da(23),k=Da(23),ue=Da(23);if(!(w.block_type==M.SHORT_TYPE&&d.mode_gr==1)){x.assign(w),w.block_type==M.NORM_TYPE&&(H(d,w,u,_,v,k,ue),i(d,x,w,u,_,v,k,ue));var q=x.big_values;if(!(q==0||(u[q-2]|u[q-1])>1)&&(q=w.count1+2,!(q>576))){x.assign(w),x.count1=q;for(var Q=0,c=0;q>x.big_values;q-=4){var p=((u[q-4]*2+u[q-3])*2+u[q-2])*2+u[q-1];Q+=Ct.t32l[p],c+=Ct.t33l[p]}if(x.big_values=q,x.count1table_select=0,Q>c&&(Q=c,x.count1table_select=1),x.count1bits=Q,x.block_type==M.NORM_TYPE)i(d,x,w,u,_,v,k,ue);else{if(x.part2_3_length=Q,Q=d.scalefac_band.l[8],Q>q&&(Q=q),Q>0){var fe=new re(x.part2_3_length);x.table_select[0]=O(u,0,Q,fe),x.part2_3_length=fe.bits}if(q>Q){var fe=new re(x.part2_3_length);x.table_select[1]=O(u,Q,q,fe),x.part2_3_length=fe.bits}w.part2_3_length>x.part2_3_length&&w.assign(x)}}}};var z=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],G=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],j=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],f=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];C0.slen1_tab=j,C0.slen2_tab=f;function E(d,w){for(var x,u=w.tt[1][d],_=w.tt[0][d],v=0;v<Ct.scfsi_band.length-1;v++){for(x=Ct.scfsi_band[v];x<Ct.scfsi_band[v+1]&&!(_.scalefac[x]!=u.scalefac[x]&&u.scalefac[x]>=0);x++);if(x==Ct.scfsi_band[v+1]){for(x=Ct.scfsi_band[v];x<Ct.scfsi_band[v+1];x++)u.scalefac[x]=-1;w.scfsi[d][v]=1}}var k=0,ue=0;for(x=0;x<11;x++)u.scalefac[x]!=-1&&(ue++,k<u.scalefac[x]&&(k=u.scalefac[x]));for(var q=0,Q=0;x<M.SBPSY_l;x++)u.scalefac[x]!=-1&&(Q++,q<u.scalefac[x]&&(q=u.scalefac[x]));for(var v=0;v<16;v++)if(k<z[v]&&q<G[v]){var c=j[v]*ue+f[v]*Q;u.part2_length>c&&(u.part2_length=c,u.scalefac_compress=v)}}this.best_scalefac_store=function(d,w,x,u){var _=u.tt[w][x],v,k,ue,q,Q=0;for(ue=0,v=0;v<_.sfbmax;v++){var c=_.width[v];for(ue+=c,q=-c;q<0&&_.l3_enc[q+ue]==0;q++);q==0&&(_.scalefac[v]=Q=-2)}if(_.scalefac_scale==0&&_.preflag==0){var p=0;for(v=0;v<_.sfbmax;v++)_.scalefac[v]>0&&(p|=_.scalefac[v]);if(!(p&1)&&p!=0){for(v=0;v<_.sfbmax;v++)_.scalefac[v]>0&&(_.scalefac[v]>>=1);_.scalefac_scale=Q=1}}if(_.preflag==0&&_.block_type!=M.SHORT_TYPE&&d.mode_gr==2){for(v=11;v<M.SBPSY_l&&!(_.scalefac[v]<L.pretab[v]&&_.scalefac[v]!=-2);v++);if(v==M.SBPSY_l){for(v=11;v<M.SBPSY_l;v++)_.scalefac[v]>0&&(_.scalefac[v]-=L.pretab[v]);_.preflag=Q=1}}for(k=0;k<4;k++)u.scfsi[x][k]=0;for(d.mode_gr==2&&w==1&&u.tt[0][x].block_type!=M.SHORT_TYPE&&u.tt[1][x].block_type!=M.SHORT_TYPE&&(E(x,u),Q=0),v=0;v<_.sfbmax;v++)_.scalefac[v]==-2&&(_.scalefac[v]=0);Q!=0&&(d.mode_gr==2?this.scale_bitcount(_):this.scale_bitcount_lsf(d,_))};function I(d,w){for(var x=0;x<w;++x)if(d[x]<0)return!1;return!0}var P=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],F=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],l=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(d){var w,x,u=0,_=0,v,k=d.scalefac;if(T0(I(k,d.sfbmax)),d.block_type==M.SHORT_TYPE)v=P,d.mixed_block_flag!=0&&(v=F);else if(v=l,d.preflag==0){for(x=11;x<M.SBPSY_l&&!(k[x]<L.pretab[x]);x++);if(x==M.SBPSY_l)for(d.preflag=1,x=11;x<M.SBPSY_l;x++)k[x]-=L.pretab[x]}for(x=0;x<d.sfbdivide;x++)u<k[x]&&(u=k[x]);for(;x<d.sfbmax;x++)_<k[x]&&(_=k[x]);for(d.part2_length=ds.LARGE_BITS,w=0;w<16;w++)u<z[w]&&_<G[w]&&d.part2_length>v[w]&&(d.part2_length=v[w],d.scalefac_compress=w);return d.part2_length==ds.LARGE_BITS};var A=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(d,w){var x,u,_,v,k,ue,q,Q,c=Da(4),p=w.scalefac;for(w.preflag!=0?x=2:x=0,q=0;q<4;q++)c[q]=0;if(w.block_type==M.SHORT_TYPE){u=1;var fe=L.nr_of_sfb_block[x][u];for(Q=0,_=0;_<4;_++)for(v=fe[_]/3,q=0;q<v;q++,Q++)for(k=0;k<3;k++)p[Q*3+k]>c[_]&&(c[_]=p[Q*3+k])}else{u=0;var fe=L.nr_of_sfb_block[x][u];for(Q=0,_=0;_<4;_++)for(v=fe[_],q=0;q<v;q++,Q++)p[Q]>c[_]&&(c[_]=p[Q])}for(ue=!1,_=0;_<4;_++)c[_]>A[x][_]&&(ue=!0);if(!ue){var ve,Oe,qe,Le;for(w.sfb_partition_table=L.nr_of_sfb_block[x][u],_=0;_<4;_++)w.slen[_]=y[c[_]];switch(ve=w.slen[0],Oe=w.slen[1],qe=w.slen[2],Le=w.slen[3],x){case 0:w.scalefac_compress=(ve*5+Oe<<4)+(qe<<2)+Le;break;case 1:w.scalefac_compress=400+(ve*5+Oe<<2)+qe;break;case 2:w.scalefac_compress=500+ve*3+Oe;break;default:d_.err.printf(`intensity stereo not implemented yet
`);break}}if(!ue)for(T0(w.sfb_partition_table!=null),w.part2_length=0,_=0;_<4;_++)w.part2_length+=w.slen[_]*w.sfb_partition_table[_];return ue};var y=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(d){for(var w=2;w<=576;w+=2){for(var x=0,u;d.scalefac_band.l[++x]<w;);for(u=he[x][0];d.scalefac_band.l[u+1]>w;)u--;for(u<0&&(u=he[x][0]),d.bv_scf[w-2]=u,u=he[x][1];d.scalefac_band.l[u+d.bv_scf[w-2]+2]>w;)u--;u<0&&(u=he[x][1]),d.bv_scf[w-1]=u}}}var B0=C0,Lr=K.System,m_=K.Arrays,v_=K.new_byte,p_=K.new_float_n,b_=K.new_int,hn=K.assert;Yi.EQ=function(L,re){return Math.abs(L)>Math.abs(re)?Math.abs(L-re)<=Math.abs(L)*1e-6:Math.abs(L-re)<=Math.abs(re)*1e-6},Yi.NEQ=function(L,re){return!Yi.EQ(L,re)};function Yi(){var L=this,re=32773,he=null,se=null,xe=null,ae=null;this.setModules=function(A,y,d,w){he=A,se=y,xe=d,ae=w};var me=null,Ie=0,ke=0,U=0;this.getframebits=function(A){var y=A.internal_flags,d;y.bitrate_index!=0?d=Ct.bitrate_table[A.version][y.bitrate_index]:d=A.brate;var w=0|(A.version+1)*72e3*d/A.out_samplerate+y.padding;return 8*w};function we(A){Lr.arraycopy(A.header[A.w_ptr].buf,0,me,ke,A.sideinfo_len),ke+=A.sideinfo_len,Ie+=A.sideinfo_len*8,A.w_ptr=A.w_ptr+1&Yt.MAX_HEADER_BUF-1}function B(A,y,d){for(;d>0;){var w;U==0&&(U=8,ke++,hn(A.header[A.w_ptr].write_timing>=Ie),A.header[A.w_ptr].write_timing==Ie&&we(A),me[ke]=0),w=Math.min(d,U),d-=w,U-=w,me[ke]|=y>>d<<U,Ie+=w}}function O(A,y,d){for(;d>0;){var w;U==0&&(U=8,ke++,me[ke]=0),w=Math.min(d,U),d-=w,U-=w,me[ke]|=y>>d<<U,Ie+=w}}function H(A,y){var d=A.internal_flags,w;if(y>=8&&(B(d,76,8),y-=8),y>=8&&(B(d,65,8),y-=8),y>=8&&(B(d,77,8),y-=8),y>=8&&(B(d,69,8),y-=8),y>=32){var x=xe.getLameShortVersion();if(y>=32)for(w=0;w<x.length&&y>=8;++w)y-=8,B(d,x.charAt(w),8)}for(;y>=1;y-=1)B(d,d.ancillary_flag,1),d.ancillary_flag^=A.disable_reservoir?0:1}function i(A,y,d){for(var w=A.header[A.h_ptr].ptr;d>0;){var x=Math.min(d,8-(w&7));d-=x,A.header[A.h_ptr].buf[w>>3]|=y>>d<<8-(w&7)-x,w+=x}A.header[A.h_ptr].ptr=w}function z(A,y){A<<=8;for(var d=0;d<8;d++)A<<=1,y<<=1,(y^A)&65536&&(y^=re);return y}this.CRC_writeheader=function(A,y){var d=65535;d=z(y[2]&255,d),d=z(y[3]&255,d);for(var w=6;w<A.sideinfo_len;w++)d=z(y[w]&255,d);y[4]=byte(d>>8),y[5]=byte(d&255)};function G(A,y){var d=A.internal_flags,w,x,u;if(w=d.l3_side,d.header[d.h_ptr].ptr=0,m_.fill(d.header[d.h_ptr].buf,0,d.sideinfo_len,0),A.out_samplerate<16e3?i(d,4094,12):i(d,4095,12),i(d,A.version,1),i(d,1,2),i(d,A.error_protection?0:1,1),i(d,d.bitrate_index,4),i(d,d.samplerate_index,2),i(d,d.padding,1),i(d,A.extension,1),i(d,A.mode.ordinal(),2),i(d,d.mode_ext,2),i(d,A.copyright,1),i(d,A.original,1),i(d,A.emphasis,2),A.error_protection&&i(d,0,16),A.version==1){for(hn(w.main_data_begin>=0),i(d,w.main_data_begin,9),d.channels_out==2?i(d,w.private_bits,3):i(d,w.private_bits,5),u=0;u<d.channels_out;u++){var _;for(_=0;_<4;_++)i(d,w.scfsi[u][_],1)}for(x=0;x<2;x++)for(u=0;u<d.channels_out;u++){var v=w.tt[x][u];i(d,v.part2_3_length+v.part2_length,12),i(d,v.big_values/2,9),i(d,v.global_gain,8),i(d,v.scalefac_compress,4),v.block_type!=M.NORM_TYPE?(i(d,1,1),i(d,v.block_type,2),i(d,v.mixed_block_flag,1),v.table_select[0]==14&&(v.table_select[0]=16),i(d,v.table_select[0],5),v.table_select[1]==14&&(v.table_select[1]=16),i(d,v.table_select[1],5),i(d,v.subblock_gain[0],3),i(d,v.subblock_gain[1],3),i(d,v.subblock_gain[2],3)):(i(d,0,1),v.table_select[0]==14&&(v.table_select[0]=16),i(d,v.table_select[0],5),v.table_select[1]==14&&(v.table_select[1]=16),i(d,v.table_select[1],5),v.table_select[2]==14&&(v.table_select[2]=16),i(d,v.table_select[2],5),hn(0<=v.region0_count&&v.region0_count<16),hn(0<=v.region1_count&&v.region1_count<8),i(d,v.region0_count,4),i(d,v.region1_count,3)),i(d,v.preflag,1),i(d,v.scalefac_scale,1),i(d,v.count1table_select,1)}}else for(hn(w.main_data_begin>=0),i(d,w.main_data_begin,8),i(d,w.private_bits,d.channels_out),x=0,u=0;u<d.channels_out;u++){var v=w.tt[x][u];i(d,v.part2_3_length+v.part2_length,12),i(d,v.big_values/2,9),i(d,v.global_gain,8),i(d,v.scalefac_compress,9),v.block_type!=M.NORM_TYPE?(i(d,1,1),i(d,v.block_type,2),i(d,v.mixed_block_flag,1),v.table_select[0]==14&&(v.table_select[0]=16),i(d,v.table_select[0],5),v.table_select[1]==14&&(v.table_select[1]=16),i(d,v.table_select[1],5),i(d,v.subblock_gain[0],3),i(d,v.subblock_gain[1],3),i(d,v.subblock_gain[2],3)):(i(d,0,1),v.table_select[0]==14&&(v.table_select[0]=16),i(d,v.table_select[0],5),v.table_select[1]==14&&(v.table_select[1]=16),i(d,v.table_select[1],5),v.table_select[2]==14&&(v.table_select[2]=16),i(d,v.table_select[2],5),hn(0<=v.region0_count&&v.region0_count<16),hn(0<=v.region1_count&&v.region1_count<8),i(d,v.region0_count,4),i(d,v.region1_count,3)),i(d,v.scalefac_scale,1),i(d,v.count1table_select,1)}A.error_protection&&CRC_writeheader(d,d.header[d.h_ptr].buf);{var k=d.h_ptr;hn(d.header[k].ptr==d.sideinfo_len*8),d.h_ptr=k+1&Yt.MAX_HEADER_BUF-1,d.header[d.h_ptr].write_timing=d.header[k].write_timing+y,d.h_ptr==d.w_ptr&&Lr.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function j(A,y){var d=Ct.ht[y.count1table_select+32],w,x=0,u=y.big_values,_=y.big_values;for(hn(y.count1table_select<2),w=(y.count1-y.big_values)/4;w>0;--w){var v=0,k=0,ue;ue=y.l3_enc[u+0],ue!=0&&(k+=8,y.xr[_+0]<0&&v++),ue=y.l3_enc[u+1],ue!=0&&(k+=4,v*=2,y.xr[_+1]<0&&v++),ue=y.l3_enc[u+2],ue!=0&&(k+=2,v*=2,y.xr[_+2]<0&&v++),ue=y.l3_enc[u+3],ue!=0&&(k++,v*=2,y.xr[_+3]<0&&v++),u+=4,_+=4,B(A,v+d.table[k],d.hlen[k]),x+=d.hlen[k]}return x}function f(A,y,d,w,x){var u=Ct.ht[y],_=0;if(y==0)return _;for(var v=d;v<w;v+=2){var k=0,ue=0,q=u.xlen,Q=u.xlen,c=0,p=x.l3_enc[v],fe=x.l3_enc[v+1];if(p!=0&&(x.xr[v]<0&&c++,k--),y>15){if(p>14){var ve=p-15;hn(ve<=u.linmax),c|=ve<<1,ue=q,p=15}if(fe>14){var Oe=fe-15;hn(Oe<=u.linmax),c<<=q,c|=Oe,ue+=q,fe=15}Q=16}fe!=0&&(c<<=1,x.xr[v+1]<0&&c++,k--),p=p*Q+fe,ue-=k,k+=u.hlen[p],B(A,u.table[p],k),B(A,c,ue),_+=k+ue}return _}function E(A,y){var d=3*A.scalefac_band.s[3];d>y.big_values&&(d=y.big_values);var w=f(A,y.table_select[0],0,d,y);return w+=f(A,y.table_select[1],d,y.big_values,y),w}function I(A,y){var d,w,x,u;d=y.big_values;var _=y.region0_count+1;return hn(_<A.scalefac_band.l.length),x=A.scalefac_band.l[_],_+=y.region1_count+1,hn(_<A.scalefac_band.l.length),u=A.scalefac_band.l[_],x>d&&(x=d),u>d&&(u=d),w=f(A,y.table_select[0],0,x,y),w+=f(A,y.table_select[1],x,u,y),w+=f(A,y.table_select[2],u,d,y),w}function P(A){var y,d,w,x,u=0,_=A.internal_flags,v=_.l3_side;if(A.version==1)for(y=0;y<2;y++)for(d=0;d<_.channels_out;d++){var k=v.tt[y][d],ue=B0.slen1_tab[k.scalefac_compress],q=B0.slen2_tab[k.scalefac_compress];for(x=0,w=0;w<k.sfbdivide;w++)k.scalefac[w]!=-1&&(B(_,k.scalefac[w],ue),x+=ue);for(;w<k.sfbmax;w++)k.scalefac[w]!=-1&&(B(_,k.scalefac[w],q),x+=q);hn(x==k.part2_length),k.block_type==M.SHORT_TYPE?x+=E(_,k):x+=I(_,k),x+=j(_,k),hn(x==k.part2_3_length+k.part2_length),u+=x}else for(y=0,d=0;d<_.channels_out;d++){var k=v.tt[y][d],Q,c,p=0;if(hn(k.sfb_partition_table!=null),x=0,w=0,c=0,k.block_type==M.SHORT_TYPE){for(;c<4;c++){var fe=k.sfb_partition_table[c]/3,ve=k.slen[c];for(Q=0;Q<fe;Q++,w++)B(_,Math.max(k.scalefac[w*3+0],0),ve),B(_,Math.max(k.scalefac[w*3+1],0),ve),B(_,Math.max(k.scalefac[w*3+2],0),ve),p+=3*ve}x+=E(_,k)}else{for(;c<4;c++){var fe=k.sfb_partition_table[c],ve=k.slen[c];for(Q=0;Q<fe;Q++,w++)B(_,Math.max(k.scalefac[w],0),ve),p+=ve}x+=I(_,k)}x+=j(_,k),hn(x==k.part2_3_length),hn(p==k.part2_length),u+=p+x}return u}function F(){this.total=0}function l(A,y){var d=A.internal_flags,w,x,u,_,v;return v=d.w_ptr,_=d.h_ptr-1,_==-1&&(_=Yt.MAX_HEADER_BUF-1),w=d.header[_].write_timing-Ie,y.total=w,w>=0&&(x=1+_-v,_<v&&(x=1+_-v+Yt.MAX_HEADER_BUF),w-=x*8*d.sideinfo_len),u=L.getframebits(A),w+=u,y.total+=u,y.total%8!=0?y.total=1+y.total/8:y.total=y.total/8,y.total+=ke+1,w<0&&Lr.err.println(`strange error flushing buffer ... 
`),w}this.flush_bitstream=function(A){var y=A.internal_flags,d,w,x=y.h_ptr-1;if(x==-1&&(x=Yt.MAX_HEADER_BUF-1),d=y.l3_side,!((w=l(A,new F))<0)){if(H(A,w),hn(y.header[x].write_timing+this.getframebits(A)==Ie),y.ResvSize=0,d.main_data_begin=0,y.findReplayGain){var u=he.GetTitleGain(y.rgdata);hn(NEQ(u,Ua.GAIN_NOT_ENOUGH_SAMPLES)),y.RadioGain=Math.floor(u*10+.5)|0}y.findPeakSample&&(y.noclipGainChange=Math.ceil(Math.log10(y.PeakSample/32767)*20*10)|0,y.noclipGainChange>0&&(EQ(A.scale,1)||EQ(A.scale,0))?y.noclipScale=Math.floor(32767/y.PeakSample*100)/100:y.noclipScale=-1)}},this.add_dummy_byte=function(A,y,d){for(var w=A.internal_flags,x;d-- >0;)for(O(w,y,8),x=0;x<Yt.MAX_HEADER_BUF;++x)w.header[x].write_timing+=8},this.format_bitstream=function(A){var y=A.internal_flags,d;d=y.l3_side;var w=this.getframebits(A);H(A,d.resvDrain_pre),G(A,w);var x=8*y.sideinfo_len;if(x+=P(A),H(A,d.resvDrain_post),x+=d.resvDrain_post,d.main_data_begin+=(w-x)/8,l(A,new F)!=y.ResvSize&&Lr.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),d.main_data_begin*8!=y.ResvSize&&(Lr.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*d.main_data_begin,y.ResvSize,d.resvDrain_post,d.resvDrain_pre,8*y.sideinfo_len,x-d.resvDrain_post-8*y.sideinfo_len,x,x%8,w),Lr.err.println("This is a fatal error.  It has several possible causes:"),Lr.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),Lr.err.println(" 9%%  Your system is overclocked"),Lr.err.println(" 1%%  bug in LAME encoding library"),y.ResvSize=d.main_data_begin*8),Ie>1e9){var u;for(u=0;u<Yt.MAX_HEADER_BUF;++u)y.header[u].write_timing-=Ie;Ie=0}return 0},this.copy_buffer=function(A,y,d,w,x){var u=ke+1;if(u<=0)return 0;if(w!=0&&u>w)return-1;if(Lr.arraycopy(me,0,y,d,u),ke=-1,U=0,x!=0){var _=b_(1);if(_[0]=A.nMusicCRC,ae.updateMusicCRC(_,y,d,u),A.nMusicCRC=_[0],u>0&&(A.VBR_seek_table.nBytesWritten+=u),A.decode_on_the_fly){for(var v=p_([2,1152]),k=u,ue=-1,q;ue!=0;)if(ue=se.hip_decode1_unclipped(A.hip,y,d,k,v[0],v[1]),k=0,ue==-1&&(ue=0),ue>0){if(A.findPeakSample){for(q=0;q<ue;q++)v[0][q]>A.PeakSample?A.PeakSample=v[0][q]:-v[0][q]>A.PeakSample&&(A.PeakSample=-v[0][q]);if(A.channels_out>1)for(q=0;q<ue;q++)v[1][q]>A.PeakSample?A.PeakSample=v[1][q]:-v[1][q]>A.PeakSample&&(A.PeakSample=-v[1][q])}if(A.findReplayGain&&he.AnalyzeSamples(A.rgdata,v[0],0,v[1],0,ue,A.channels_out)==Ua.GAIN_ANALYSIS_ERROR)return-6}}}return u},this.init_bit_stream_w=function(A){me=v_(Ht.LAME_MAXMP3BUFFER),A.h_ptr=A.w_ptr=0,A.header[A.h_ptr].write_timing=0,ke=-1,U=0,Ie=0}}var _s=Yi,y_=K.System,jt=K.VbrMode,I0=K.ShortBlock,Hs=K.new_float,Xc=K.new_int_n,w_=K.new_short_n,ms=K.assert;function dn(){var L=this,re=128*1024;dn.V9=410,dn.V8=420,dn.V7=430,dn.V6=440,dn.V5=450,dn.V4=460,dn.V3=470,dn.V2=480,dn.V1=490,dn.V0=500,dn.R3MIX=1e3,dn.STANDARD=1001,dn.EXTREME=1002,dn.INSANE=1003,dn.STANDARD_FAST=1004,dn.EXTREME_FAST=1005,dn.MEDIUM=1006,dn.MEDIUM_FAST=1007;var he=16384+re;dn.LAME_MAXMP3BUFFER=he;var se,xe,ae,me,Ie,ke=new et,U,we,B;this.enc=new M,this.setModules=function(c,p,fe,ve,Oe,qe,Le,De,dt){se=c,xe=p,ae=fe,me=ve,Ie=Oe,U=qe,we=De,B=dt,this.enc.setModules(xe,ke,me,U)};function O(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=Hs(M.SBMAX_l),this.bo_s_weight=Hs(M.SBMAX_s)}function H(){this.lowerlimit=0}function i(c,p){this.lowpass=p}var z=4294479419;function G(c){var p;return c.class_id=z,p=c.internal_flags=new Yt,c.mode=_n.NOT_SET,c.original=1,c.in_samplerate=44100,c.num_channels=2,c.num_samples=-1,c.bWriteVbrTag=!0,c.quality=-1,c.short_blocks=null,p.subblock_gain=-1,c.lowpassfreq=0,c.highpassfreq=0,c.lowpasswidth=-1,c.highpasswidth=-1,c.VBR=jt.vbr_off,c.VBR_q=4,c.ATHcurve=-1,c.VBR_mean_bitrate_kbps=128,c.VBR_min_bitrate_kbps=0,c.VBR_max_bitrate_kbps=0,c.VBR_hard_min=0,p.VBR_min_bitrate=1,p.VBR_max_bitrate=13,c.quant_comp=-1,c.quant_comp_short=-1,c.msfix=-1,p.resample_ratio=1,p.OldValue[0]=180,p.OldValue[1]=180,p.CurrentStep[0]=4,p.CurrentStep[1]=4,p.masking_lower=1,p.nsPsy.attackthre=-1,p.nsPsy.attackthre_s=-1,c.scale=-1,c.athaa_type=-1,c.ATHtype=-1,c.athaa_loudapprox=-1,c.athaa_sensitivity=0,c.useTemporal=null,c.interChRatio=-1,p.mf_samples_to_encode=M.ENCDELAY+M.POSTDELAY,c.encoder_padding=0,p.mf_size=M.ENCDELAY-M.MDCTDELAY,c.findReplayGain=!1,c.decode_on_the_fly=!1,p.decode_on_the_fly=!1,p.findReplayGain=!1,p.findPeakSample=!1,p.RadioGain=0,p.AudiophileGain=0,p.noclipGainChange=0,p.noclipScale=-1,c.preset=0,c.write_id3tag_automatic=!0,0}this.lame_init=function(){var c=new mt;return G(c),c.lame_allocated_gfp=1,c};function j(c){return c>1?0:c<=0?1:Math.cos(Math.PI/2*c)}this.nearestBitrateFullIndex=function(c){var p=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],fe=0,ve=0,Oe=0,qe=0;qe=p[16],Oe=16,ve=p[16],fe=16;for(var Le=0;Le<16;Le++)if(Math.max(c,p[Le+1])!=c){qe=p[Le+1],Oe=Le+1,ve=p[Le],fe=Le;break}return qe-c>c-ve?fe:Oe};function f(c,p){var fe=44100;return p>=48e3?fe=48e3:p>=44100?fe=44100:p>=32e3?fe=32e3:p>=24e3?fe=24e3:p>=22050?fe=22050:p>=16e3?fe=16e3:p>=12e3?fe=12e3:p>=11025?fe=11025:p>=8e3&&(fe=8e3),c==-1?fe:(c<=15960&&(fe=44100),c<=15250&&(fe=32e3),c<=11220&&(fe=24e3),c<=9970&&(fe=22050),c<=7230&&(fe=16e3),c<=5420&&(fe=12e3),c<=4510&&(fe=11025),c<=3970&&(fe=8e3),p<fe?p>44100?48e3:p>32e3?44100:p>24e3?32e3:p>22050?24e3:p>16e3?22050:p>12e3?16e3:p>11025?12e3:p>8e3?11025:8e3:fe)}function E(c,p){switch(c){case 44100:return p.version=1,0;case 48e3:return p.version=1,1;case 32e3:return p.version=1,2;case 22050:return p.version=0,0;case 24e3:return p.version=0,1;case 16e3:return p.version=0,2;case 11025:return p.version=0,0;case 12e3:return p.version=0,1;case 8e3:return p.version=0,2;default:return p.version=0,-1}}function I(c,p,fe){fe<16e3&&(p=2);for(var ve=Ct.bitrate_table[p][1],Oe=2;Oe<=14;Oe++)Ct.bitrate_table[p][Oe]>0&&Math.abs(Ct.bitrate_table[p][Oe]-c)<Math.abs(ve-c)&&(ve=Ct.bitrate_table[p][Oe]);return ve}function P(c,p,fe){fe<16e3&&(p=2);for(var ve=0;ve<=14;ve++)if(Ct.bitrate_table[p][ve]>0&&Ct.bitrate_table[p][ve]==c)return ve;return-1}function F(c,p){var fe=[new i(8,2e3),new i(16,3700),new i(24,3900),new i(32,5500),new i(40,7e3),new i(48,7500),new i(56,1e4),new i(64,11e3),new i(80,13500),new i(96,15100),new i(112,15600),new i(128,17e3),new i(160,17500),new i(192,18600),new i(224,19400),new i(256,19700),new i(320,20500)],ve=L.nearestBitrateFullIndex(p);c.lowerlimit=fe[ve].lowpass}function l(c){var p=c.internal_flags,fe=32,ve=-1;if(p.lowpass1>0){for(var Oe=999,qe=0;qe<=31;qe++){var Le=qe/31;Le>=p.lowpass2&&(fe=Math.min(fe,qe)),p.lowpass1<Le&&Le<p.lowpass2&&(Oe=Math.min(Oe,qe))}Oe==999?p.lowpass1=(fe-.75)/31:p.lowpass1=(Oe-.75)/31,p.lowpass2=fe/31}if(p.highpass2>0&&p.highpass2<.9*(.75/31)&&(p.highpass1=0,p.highpass2=0,y_.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),p.highpass2>0){for(var De=-1,qe=0;qe<=31;qe++){var Le=qe/31;Le<=p.highpass1&&(ve=Math.max(ve,qe)),p.highpass1<Le&&Le<p.highpass2&&(De=Math.max(De,qe))}p.highpass1=ve/31,De==-1?p.highpass2=(ve+.75)/31:p.highpass2=(De+.75)/31}for(var qe=0;qe<32;qe++){var dt,st,Le=qe/31;p.highpass2>p.highpass1?dt=j((p.highpass2-Le)/(p.highpass2-p.highpass1+1e-20)):dt=1,p.lowpass2>p.lowpass1?st=j((Le-p.lowpass1)/(p.lowpass2-p.lowpass1+1e-20)):st=1,p.amp_filter[qe]=dt*st}}function A(c){var p=c.internal_flags;switch(c.quality){default:case 9:p.psymodel=0,p.noise_shaping=0,p.noise_shaping_amp=0,p.noise_shaping_stop=0,p.use_best_huffman=0,p.full_outer_loop=0;break;case 8:c.quality=7;case 7:p.psymodel=1,p.noise_shaping=0,p.noise_shaping_amp=0,p.noise_shaping_stop=0,p.use_best_huffman=0,p.full_outer_loop=0;break;case 6:p.psymodel=1,p.noise_shaping==0&&(p.noise_shaping=1),p.noise_shaping_amp=0,p.noise_shaping_stop=0,p.subblock_gain==-1&&(p.subblock_gain=1),p.use_best_huffman=0,p.full_outer_loop=0;break;case 5:p.psymodel=1,p.noise_shaping==0&&(p.noise_shaping=1),p.noise_shaping_amp=0,p.noise_shaping_stop=0,p.subblock_gain==-1&&(p.subblock_gain=1),p.use_best_huffman=0,p.full_outer_loop=0;break;case 4:p.psymodel=1,p.noise_shaping==0&&(p.noise_shaping=1),p.noise_shaping_amp=0,p.noise_shaping_stop=0,p.subblock_gain==-1&&(p.subblock_gain=1),p.use_best_huffman=1,p.full_outer_loop=0;break;case 3:p.psymodel=1,p.noise_shaping==0&&(p.noise_shaping=1),p.noise_shaping_amp=1,p.noise_shaping_stop=1,p.subblock_gain==-1&&(p.subblock_gain=1),p.use_best_huffman=1,p.full_outer_loop=0;break;case 2:p.psymodel=1,p.noise_shaping==0&&(p.noise_shaping=1),p.substep_shaping==0&&(p.substep_shaping=2),p.noise_shaping_amp=1,p.noise_shaping_stop=1,p.subblock_gain==-1&&(p.subblock_gain=1),p.use_best_huffman=1,p.full_outer_loop=0;break;case 1:p.psymodel=1,p.noise_shaping==0&&(p.noise_shaping=1),p.substep_shaping==0&&(p.substep_shaping=2),p.noise_shaping_amp=2,p.noise_shaping_stop=1,p.subblock_gain==-1&&(p.subblock_gain=1),p.use_best_huffman=1,p.full_outer_loop=0;break;case 0:p.psymodel=1,p.noise_shaping==0&&(p.noise_shaping=1),p.substep_shaping==0&&(p.substep_shaping=2),p.noise_shaping_amp=2,p.noise_shaping_stop=1,p.subblock_gain==-1&&(p.subblock_gain=1),p.use_best_huffman=1,p.full_outer_loop=0;break}}function y(c){var p=c.internal_flags;c.frameNum=0,c.write_id3tag_automatic&&we.id3tag_write_v2(c),p.bitrate_stereoMode_Hist=Xc([16,5]),p.bitrate_blockType_Hist=Xc([16,6]),p.PeakSample=0,c.bWriteVbrTag&&U.InitVbrTag(c)}this.lame_init_params=function(c){var p=c.internal_flags;if(p.Class_ID=0,p.ATH==null&&(p.ATH=new a_),p.PSY==null&&(p.PSY=new O),p.rgdata==null&&(p.rgdata=new o_),p.channels_in=c.num_channels,p.channels_in==1&&(c.mode=_n.MONO),p.channels_out=c.mode==_n.MONO?1:2,p.mode_ext=M.MPG_MD_MS_LR,c.mode==_n.MONO&&(c.force_ms=!1),c.VBR==jt.vbr_off&&c.VBR_mean_bitrate_kbps!=128&&c.brate==0&&(c.brate=c.VBR_mean_bitrate_kbps),c.VBR==jt.vbr_off||c.VBR==jt.vbr_mtrh||c.VBR==jt.vbr_mt||(c.free_format=!1),c.VBR==jt.vbr_off&&c.brate==0&&_s.EQ(c.compression_ratio,0)&&(c.compression_ratio=11.025),c.VBR==jt.vbr_off&&c.compression_ratio>0&&(c.out_samplerate==0&&(c.out_samplerate=map2MP3Frequency(int(.97*c.in_samplerate))),c.brate=0|c.out_samplerate*16*p.channels_out/(1e3*c.compression_ratio),p.samplerate_index=E(c.out_samplerate,c),c.free_format||(c.brate=I(c.brate,c.version,c.out_samplerate))),c.out_samplerate!=0&&(c.out_samplerate<16e3?(c.VBR_mean_bitrate_kbps=Math.max(c.VBR_mean_bitrate_kbps,8),c.VBR_mean_bitrate_kbps=Math.min(c.VBR_mean_bitrate_kbps,64)):c.out_samplerate<32e3?(c.VBR_mean_bitrate_kbps=Math.max(c.VBR_mean_bitrate_kbps,8),c.VBR_mean_bitrate_kbps=Math.min(c.VBR_mean_bitrate_kbps,160)):(c.VBR_mean_bitrate_kbps=Math.max(c.VBR_mean_bitrate_kbps,32),c.VBR_mean_bitrate_kbps=Math.min(c.VBR_mean_bitrate_kbps,320))),c.lowpassfreq==0){var fe=16e3;switch(c.VBR){case jt.vbr_off:{var ve=new H;F(ve,c.brate),fe=ve.lowerlimit;break}case jt.vbr_abr:{var ve=new H;F(ve,c.VBR_mean_bitrate_kbps),fe=ve.lowerlimit;break}case jt.vbr_rh:{var Oe=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=c.VBR_q&&c.VBR_q<=9){var qe=Oe[c.VBR_q],Le=Oe[c.VBR_q+1],De=c.VBR_q_frac;fe=linear_int(qe,Le,De)}else fe=19500;break}default:{var Oe=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=c.VBR_q&&c.VBR_q<=9){var qe=Oe[c.VBR_q],Le=Oe[c.VBR_q+1],De=c.VBR_q_frac;fe=linear_int(qe,Le,De)}else fe=19500}}c.mode==_n.MONO&&(c.VBR==jt.vbr_off||c.VBR==jt.vbr_abr)&&(fe*=1.5),c.lowpassfreq=fe|0}if(c.out_samplerate==0&&(2*c.lowpassfreq>c.in_samplerate&&(c.lowpassfreq=c.in_samplerate/2),c.out_samplerate=f(c.lowpassfreq|0,c.in_samplerate)),c.lowpassfreq=Math.min(20500,c.lowpassfreq),c.lowpassfreq=Math.min(c.out_samplerate/2,c.lowpassfreq),c.VBR==jt.vbr_off&&(c.compression_ratio=c.out_samplerate*16*p.channels_out/(1e3*c.brate)),c.VBR==jt.vbr_abr&&(c.compression_ratio=c.out_samplerate*16*p.channels_out/(1e3*c.VBR_mean_bitrate_kbps)),c.bWriteVbrTag||(c.findReplayGain=!1,c.decode_on_the_fly=!1,p.findPeakSample=!1),p.findReplayGain=c.findReplayGain,p.decode_on_the_fly=c.decode_on_the_fly,p.decode_on_the_fly&&(p.findPeakSample=!0),p.findReplayGain&&se.InitGainAnalysis(p.rgdata,c.out_samplerate)==Ua.INIT_GAIN_ANALYSIS_ERROR)return c.internal_flags=null,-6;switch(p.decode_on_the_fly&&!c.decode_only&&(p.hip!=null&&B.hip_decode_exit(p.hip),p.hip=B.hip_decode_init()),p.mode_gr=c.out_samplerate<=24e3?1:2,c.framesize=576*p.mode_gr,c.encoder_delay=M.ENCDELAY,p.resample_ratio=c.in_samplerate/c.out_samplerate,c.VBR){case jt.vbr_mt:case jt.vbr_rh:case jt.vbr_mtrh:{var dt=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];c.compression_ratio=dt[c.VBR_q]}break;case jt.vbr_abr:c.compression_ratio=c.out_samplerate*16*p.channels_out/(1e3*c.VBR_mean_bitrate_kbps);break;default:c.compression_ratio=c.out_samplerate*16*p.channels_out/(1e3*c.brate);break}if(c.mode==_n.NOT_SET&&(c.mode=_n.JOINT_STEREO),c.highpassfreq>0?(p.highpass1=2*c.highpassfreq,c.highpasswidth>=0?p.highpass2=2*(c.highpassfreq+c.highpasswidth):p.highpass2=1*2*c.highpassfreq,p.highpass1/=c.out_samplerate,p.highpass2/=c.out_samplerate):(p.highpass1=0,p.highpass2=0),c.lowpassfreq>0?(p.lowpass2=2*c.lowpassfreq,c.lowpasswidth>=0?(p.lowpass1=2*(c.lowpassfreq-c.lowpasswidth),p.lowpass1<0&&(p.lowpass1=0)):p.lowpass1=1*2*c.lowpassfreq,p.lowpass1/=c.out_samplerate,p.lowpass2/=c.out_samplerate):(p.lowpass1=0,p.lowpass2=0),l(c),p.samplerate_index=E(c.out_samplerate,c),p.samplerate_index<0)return c.internal_flags=null,-1;if(c.VBR==jt.vbr_off){if(c.free_format)p.bitrate_index=0;else if(c.brate=I(c.brate,c.version,c.out_samplerate),p.bitrate_index=P(c.brate,c.version,c.out_samplerate),p.bitrate_index<=0)return c.internal_flags=null,-1}else p.bitrate_index=1;c.analysis&&(c.bWriteVbrTag=!1),p.pinfo!=null&&(c.bWriteVbrTag=!1),xe.init_bit_stream_w(p);for(var st=p.samplerate_index+3*c.version+6*(c.out_samplerate<16e3?1:0),$e=0;$e<M.SBMAX_l+1;$e++)p.scalefac_band.l[$e]=me.sfBandIndex[st].l[$e];for(var $e=0;$e<M.PSFB21+1;$e++){var Pt=(p.scalefac_band.l[22]-p.scalefac_band.l[21])/M.PSFB21,mn=p.scalefac_band.l[21]+$e*Pt;p.scalefac_band.psfb21[$e]=mn}p.scalefac_band.psfb21[M.PSFB21]=576;for(var $e=0;$e<M.SBMAX_s+1;$e++)p.scalefac_band.s[$e]=me.sfBandIndex[st].s[$e];for(var $e=0;$e<M.PSFB12+1;$e++){var Pt=(p.scalefac_band.s[13]-p.scalefac_band.s[12])/M.PSFB12,mn=p.scalefac_band.s[12]+$e*Pt;p.scalefac_band.psfb12[$e]=mn}p.scalefac_band.psfb12[M.PSFB12]=192,c.version==1?p.sideinfo_len=p.channels_out==1?21:36:p.sideinfo_len=p.channels_out==1?13:21,c.error_protection&&(p.sideinfo_len+=2),y(c),p.Class_ID=z;{var Tt;for(Tt=0;Tt<19;Tt++)p.nsPsy.pefirbuf[Tt]=700*p.mode_gr*p.channels_out;c.ATHtype==-1&&(c.ATHtype=4)}switch(ms(c.VBR_q<=9),ms(c.VBR_q>=0),c.VBR){case jt.vbr_mt:c.VBR=jt.vbr_mtrh;case jt.vbr_mtrh:{c.useTemporal==null&&(c.useTemporal=!1),ae.apply_preset(c,500-c.VBR_q*10,0),c.quality<0&&(c.quality=LAME_DEFAULT_QUALITY),c.quality<5&&(c.quality=0),c.quality>5&&(c.quality=5),p.PSY.mask_adjust=c.maskingadjust,p.PSY.mask_adjust_short=c.maskingadjust_short,c.experimentalY?p.sfb21_extra=!1:p.sfb21_extra=c.out_samplerate>44e3,p.iteration_loop=new VBRNewIterationLoop(Ie);break}case jt.vbr_rh:{ae.apply_preset(c,500-c.VBR_q*10,0),p.PSY.mask_adjust=c.maskingadjust,p.PSY.mask_adjust_short=c.maskingadjust_short,c.experimentalY?p.sfb21_extra=!1:p.sfb21_extra=c.out_samplerate>44e3,c.quality>6&&(c.quality=6),c.quality<0&&(c.quality=LAME_DEFAULT_QUALITY),p.iteration_loop=new VBROldIterationLoop(Ie);break}default:{var zt;p.sfb21_extra=!1,c.quality<0&&(c.quality=LAME_DEFAULT_QUALITY),zt=c.VBR,zt==jt.vbr_off&&(c.VBR_mean_bitrate_kbps=c.brate),ae.apply_preset(c,c.VBR_mean_bitrate_kbps,0),c.VBR=zt,p.PSY.mask_adjust=c.maskingadjust,p.PSY.mask_adjust_short=c.maskingadjust_short,zt==jt.vbr_off?p.iteration_loop=new f_(Ie):p.iteration_loop=new ABRIterationLoop(Ie);break}}if(ms(c.scale>=0),c.VBR!=jt.vbr_off){if(p.VBR_min_bitrate=1,p.VBR_max_bitrate=14,c.out_samplerate<16e3&&(p.VBR_max_bitrate=8),c.VBR_min_bitrate_kbps!=0&&(c.VBR_min_bitrate_kbps=I(c.VBR_min_bitrate_kbps,c.version,c.out_samplerate),p.VBR_min_bitrate=P(c.VBR_min_bitrate_kbps,c.version,c.out_samplerate),p.VBR_min_bitrate<0)||c.VBR_max_bitrate_kbps!=0&&(c.VBR_max_bitrate_kbps=I(c.VBR_max_bitrate_kbps,c.version,c.out_samplerate),p.VBR_max_bitrate=P(c.VBR_max_bitrate_kbps,c.version,c.out_samplerate),p.VBR_max_bitrate<0))return-1;c.VBR_min_bitrate_kbps=Ct.bitrate_table[c.version][p.VBR_min_bitrate],c.VBR_max_bitrate_kbps=Ct.bitrate_table[c.version][p.VBR_max_bitrate],c.VBR_mean_bitrate_kbps=Math.min(Ct.bitrate_table[c.version][p.VBR_max_bitrate],c.VBR_mean_bitrate_kbps),c.VBR_mean_bitrate_kbps=Math.max(Ct.bitrate_table[c.version][p.VBR_min_bitrate],c.VBR_mean_bitrate_kbps)}return c.tune&&(p.PSY.mask_adjust+=c.tune_value_a,p.PSY.mask_adjust_short+=c.tune_value_a),A(c),ms(c.scale>=0),c.athaa_type<0?p.ATH.useAdjust=3:p.ATH.useAdjust=c.athaa_type,p.ATH.aaSensitivityP=Math.pow(10,c.athaa_sensitivity/-10),c.short_blocks==null&&(c.short_blocks=I0.short_block_allowed),c.short_blocks==I0.short_block_allowed&&(c.mode==_n.JOINT_STEREO||c.mode==_n.STEREO)&&(c.short_blocks=I0.short_block_coupled),c.quant_comp<0&&(c.quant_comp=1),c.quant_comp_short<0&&(c.quant_comp_short=0),c.msfix<0&&(c.msfix=0),c.exp_nspsytune=c.exp_nspsytune|1,c.internal_flags.nsPsy.attackthre<0&&(c.internal_flags.nsPsy.attackthre=et.NSATTACKTHRE),c.internal_flags.nsPsy.attackthre_s<0&&(c.internal_flags.nsPsy.attackthre_s=et.NSATTACKTHRE_S),ms(c.scale>=0),c.scale<0&&(c.scale=1),c.ATHtype<0&&(c.ATHtype=4),c.ATHcurve<0&&(c.ATHcurve=4),c.athaa_loudapprox<0&&(c.athaa_loudapprox=2),c.interChRatio<0&&(c.interChRatio=0),c.useTemporal==null&&(c.useTemporal=!0),p.slot_lag=p.frac_SpF=0,c.VBR==jt.vbr_off&&(p.slot_lag=p.frac_SpF=(c.version+1)*72e3*c.brate%c.out_samplerate|0),me.iteration_init(c),ke.psymodel_init(c),ms(c.scale>=0),0};function d(c,p){(c.in_buffer_0==null||c.in_buffer_nsamples<p)&&(c.in_buffer_0=Hs(p),c.in_buffer_1=Hs(p),c.in_buffer_nsamples=p)}this.lame_encode_flush=function(c,p,fe,ve){var Oe=c.internal_flags,qe=w_([2,1152]),Le=0,De,dt,st,$e,Pt=Oe.mf_samples_to_encode-M.POSTDELAY,mn=w(c);if(Oe.mf_samples_to_encode<1)return 0;for(De=0,c.in_samplerate!=c.out_samplerate&&(Pt+=16*c.out_samplerate/c.in_samplerate),st=c.framesize-Pt%c.framesize,st<576&&(st+=c.framesize),c.encoder_padding=st,$e=(Pt+st)/c.framesize;$e>0&&Le>=0;){var Tt=mn-Oe.mf_size,zt=c.frameNum;Tt*=c.in_samplerate,Tt/=c.out_samplerate,Tt>1152&&(Tt=1152),Tt<1&&(Tt=1),dt=ve-De,ve==0&&(dt=0),Le=this.lame_encode_buffer(c,qe[0],qe[1],Tt,p,fe,dt),fe+=Le,De+=Le,$e-=zt!=c.frameNum?1:0}if(Oe.mf_samples_to_encode=0,Le<0||(dt=ve-De,ve==0&&(dt=0),xe.flush_bitstream(c),Le=xe.copy_buffer(Oe,p,fe,dt,1),Le<0))return Le;if(fe+=Le,De+=Le,dt=ve-De,ve==0&&(dt=0),c.write_id3tag_automatic){if(we.id3tag_write_v1(c),Le=xe.copy_buffer(Oe,p,fe,dt,0),Le<0)return Le;De+=Le}return De},this.lame_encode_buffer=function(c,p,fe,ve,Oe,qe,Le){var De=c.internal_flags,dt=[null,null];if(De.Class_ID!=z)return-3;if(ve==0)return 0;d(De,ve),dt[0]=De.in_buffer_0,dt[1]=De.in_buffer_1;for(var st=0;st<ve;st++)dt[0][st]=p[st],De.channels_in>1&&(dt[1][st]=fe[st]);return x(c,dt[0],dt[1],ve,Oe,qe,Le)};function w(c){var p=M.BLKSIZE+c.framesize-M.FFTOFFSET;return p=Math.max(p,512+c.framesize-32),p}function x(c,p,fe,ve,Oe,qe,Le){var De=c.internal_flags,dt=0,st,$e,Pt,mn,Tt,zt=[null,null],Qt=[null,null];if(De.Class_ID!=z)return-3;if(ve==0)return 0;if(Tt=xe.copy_buffer(De,Oe,qe,Le,0),Tt<0)return Tt;if(qe+=Tt,dt+=Tt,Qt[0]=p,Qt[1]=fe,_s.NEQ(c.scale,0)&&_s.NEQ(c.scale,1))for($e=0;$e<ve;++$e)Qt[0][$e]*=c.scale,De.channels_out==2&&(Qt[1][$e]*=c.scale);if(_s.NEQ(c.scale_left,0)&&_s.NEQ(c.scale_left,1))for($e=0;$e<ve;++$e)Qt[0][$e]*=c.scale_left;if(_s.NEQ(c.scale_right,0)&&_s.NEQ(c.scale_right,1))for($e=0;$e<ve;++$e)Qt[1][$e]*=c.scale_right;if(c.num_channels==2&&De.channels_out==1)for($e=0;$e<ve;++$e)Qt[0][$e]=.5*(Qt[0][$e]+Qt[1][$e]),Qt[1][$e]=0;mn=w(c),zt[0]=De.mfbuf[0],zt[1]=De.mfbuf[1];for(var an=0;ve>0;){var Sn=[null,null],Fr=0,_r=0;Sn[0]=Qt[0],Sn[1]=Qt[1];var qn=new _;if(Q(c,zt,Sn,an,ve,qn),Fr=qn.n_in,_r=qn.n_out,De.findReplayGain&&!De.decode_on_the_fly&&se.AnalyzeSamples(De.rgdata,zt[0],De.mf_size,zt[1],De.mf_size,_r,De.channels_out)==Ua.GAIN_ANALYSIS_ERROR)return-6;if(ve-=Fr,an+=Fr,De.channels_out==2,De.mf_size+=_r,ms(De.mf_size<=Yt.MFSIZE),De.mf_samples_to_encode<1&&(De.mf_samples_to_encode=M.ENCDELAY+M.POSTDELAY),De.mf_samples_to_encode+=_r,De.mf_size>=mn){var Sr=Le-dt;if(Le==0&&(Sr=0),st=u(c,zt[0],zt[1],Oe,qe,Sr),st<0)return st;for(qe+=st,dt+=st,De.mf_size-=c.framesize,De.mf_samples_to_encode-=c.framesize,Pt=0;Pt<De.channels_out;Pt++)for($e=0;$e<De.mf_size;$e++)zt[Pt][$e]=zt[Pt][$e+c.framesize]}}return dt}function u(c,p,fe,ve,Oe,qe){var Le=L.enc.lame_encode_mp3_frame(c,p,fe,ve,Oe,qe);return c.frameNum++,Le}function _(){this.n_in=0,this.n_out=0}function v(){this.num_used=0}function k(c,p){return p!=0?k(p,c%p):c}function ue(c,p,fe){var ve=Math.PI*p;c/=fe,c<0&&(c=0),c>1&&(c=1);var Oe=c-.5,qe=.42-.5*Math.cos(2*c*Math.PI)+.08*Math.cos(4*c*Math.PI);return Math.abs(Oe)<1e-9?ve/Math.PI:qe*Math.sin(fe*ve*Oe)/(Math.PI*fe*Oe)}function q(c,p,fe,ve,Oe,qe,Le,De,dt){var st=c.internal_flags,$e,Pt=0,mn,Tt=c.out_samplerate/k(c.out_samplerate,c.in_samplerate);Tt>Yt.BPC&&(Tt=Yt.BPC);var zt=Math.abs(st.resample_ratio-Math.floor(.5+st.resample_ratio))<1e-4?1:0,Qt=1/st.resample_ratio;Qt>1&&(Qt=1);var an=31;an%2==0&&--an,an+=zt;var Sn=an+1;if(st.fill_buffer_resample_init==0){for(st.inbuf_old[0]=Hs(Sn),st.inbuf_old[1]=Hs(Sn),$e=0;$e<=2*Tt;++$e)st.blackfilt[$e]=Hs(Sn);for(st.itime[0]=0,st.itime[1]=0,Pt=0;Pt<=2*Tt;Pt++){var Fr=0,_r=(Pt-Tt)/(2*Tt);for($e=0;$e<=an;$e++)Fr+=st.blackfilt[Pt][$e]=ue($e-_r,Qt,an);for($e=0;$e<=an;$e++)st.blackfilt[Pt][$e]/=Fr}st.fill_buffer_resample_init=1}var qn=st.inbuf_old[dt];for(mn=0;mn<ve;mn++){var Sr,Ds;if(Sr=mn*st.resample_ratio,Pt=0|Math.floor(Sr-st.itime[dt]),an+Pt-an/2>=Le)break;var _r=Sr-st.itime[dt]-(Pt+.5*(an%2));Ds=0|Math.floor(_r*2*Tt+Tt+.5);var ps=0;for($e=0;$e<=an;++$e){var nr=$e+Pt-an/2,js;js=nr<0?qn[Sn+nr]:Oe[qe+nr],ps+=js*st.blackfilt[Ds][$e]}p[fe+mn]=ps}if(De.num_used=Math.min(Le,an+Pt-an/2),st.itime[dt]+=De.num_used-mn*st.resample_ratio,De.num_used>=Sn)for($e=0;$e<Sn;$e++)qn[$e]=Oe[qe+De.num_used+$e-Sn];else{var Jr=Sn-De.num_used;for($e=0;$e<Jr;++$e)qn[$e]=qn[$e+De.num_used];for(Pt=0;$e<Sn;++$e,++Pt)qn[$e]=Oe[qe+Pt];ms(Pt==De.num_used)}return mn}function Q(c,p,fe,ve,Oe,qe){var Le=c.internal_flags;if(Le.resample_ratio<.9999||Le.resample_ratio>1.0001)for(var De=0;De<Le.channels_out;De++){var dt=new v;qe.n_out=q(c,p[De],Le.mf_size,c.framesize,fe[De],ve,Oe,dt,De),qe.n_in=dt.num_used}else{qe.n_out=Math.min(c.framesize,Oe),qe.n_in=qe.n_out;for(var st=0;st<qe.n_out;++st)p[0][Le.mf_size+st]=fe[0][ve+st],Le.channels_out==2&&(p[1][Le.mf_size+st]=fe[1][ve+st])}}}var S_=dn,Nr=K.VbrMode;function g_(){function L(U,we,B,O,H,i,z,G,j,f,E,I,P,F,l){this.vbr_q=U,this.quant_comp=we,this.quant_comp_s=B,this.expY=O,this.st_lrm=H,this.st_s=i,this.masking_adj=z,this.masking_adj_short=G,this.ath_lower=j,this.ath_curve=f,this.ath_sensitivity=E,this.interch=I,this.safejoint=P,this.sfb21mod=F,this.msfix=l}function re(U,we,B,O,H,i,z,G,j,f,E,I,P,F){this.quant_comp=we,this.quant_comp_s=B,this.safejoint=O,this.nsmsfix=H,this.st_lrm=i,this.st_s=z,this.nsbass=G,this.scale=j,this.masking_adj=f,this.ath_lower=E,this.ath_curve=I,this.interch=P,this.sfscale=F}var he;this.setModules=function(U){he=U};var se=[new L(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new L(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new L(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new L(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new L(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new L(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new L(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new L(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new L(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new L(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new L(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],xe=[new L(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new L(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new L(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new L(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new L(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new L(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new L(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new L(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new L(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new L(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new L(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function ae(U,we,B){var O=U.VBR==Nr.vbr_rh?se:xe,H=U.VBR_q_frac,i=O[we],z=O[we+1],G=i;i.st_lrm=i.st_lrm+H*(z.st_lrm-i.st_lrm),i.st_s=i.st_s+H*(z.st_s-i.st_s),i.masking_adj=i.masking_adj+H*(z.masking_adj-i.masking_adj),i.masking_adj_short=i.masking_adj_short+H*(z.masking_adj_short-i.masking_adj_short),i.ath_lower=i.ath_lower+H*(z.ath_lower-i.ath_lower),i.ath_curve=i.ath_curve+H*(z.ath_curve-i.ath_curve),i.ath_sensitivity=i.ath_sensitivity+H*(z.ath_sensitivity-i.ath_sensitivity),i.interch=i.interch+H*(z.interch-i.interch),i.msfix=i.msfix+H*(z.msfix-i.msfix),ke(U,G.vbr_q),B!=0?U.quant_comp=G.quant_comp:Math.abs(U.quant_comp- -1)>0||(U.quant_comp=G.quant_comp),B!=0?U.quant_comp_short=G.quant_comp_s:Math.abs(U.quant_comp_short- -1)>0||(U.quant_comp_short=G.quant_comp_s),G.expY!=0&&(U.experimentalY=G.expY!=0),B!=0?U.internal_flags.nsPsy.attackthre=G.st_lrm:Math.abs(U.internal_flags.nsPsy.attackthre- -1)>0||(U.internal_flags.nsPsy.attackthre=G.st_lrm),B!=0?U.internal_flags.nsPsy.attackthre_s=G.st_s:Math.abs(U.internal_flags.nsPsy.attackthre_s- -1)>0||(U.internal_flags.nsPsy.attackthre_s=G.st_s),B!=0?U.maskingadjust=G.masking_adj:Math.abs(U.maskingadjust-0)>0||(U.maskingadjust=G.masking_adj),B!=0?U.maskingadjust_short=G.masking_adj_short:Math.abs(U.maskingadjust_short-0)>0||(U.maskingadjust_short=G.masking_adj_short),B!=0?U.ATHlower=-G.ath_lower/10:Math.abs(-U.ATHlower*10-0)>0||(U.ATHlower=-G.ath_lower/10),B!=0?U.ATHcurve=G.ath_curve:Math.abs(U.ATHcurve- -1)>0||(U.ATHcurve=G.ath_curve),B!=0?U.athaa_sensitivity=G.ath_sensitivity:Math.abs(U.athaa_sensitivity- -1)>0||(U.athaa_sensitivity=G.ath_sensitivity),G.interch>0&&(B!=0?U.interChRatio=G.interch:Math.abs(U.interChRatio- -1)>0||(U.interChRatio=G.interch)),G.safejoint>0&&(U.exp_nspsytune=U.exp_nspsytune|G.safejoint),G.sfb21mod>0&&(U.exp_nspsytune=U.exp_nspsytune|G.sfb21mod<<20),B!=0?U.msfix=G.msfix:Math.abs(U.msfix- -1)>0||(U.msfix=G.msfix),B==0&&(U.VBR_q=we,U.VBR_q_frac=H)}var me=[new re(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new re(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new re(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new re(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new re(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new re(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new re(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new re(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new re(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new re(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new re(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new re(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new re(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new re(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new re(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new re(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new re(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function Ie(U,we,B){var O=we,H=he.nearestBitrateFullIndex(we);if(U.VBR=Nr.vbr_abr,U.VBR_mean_bitrate_kbps=O,U.VBR_mean_bitrate_kbps=Math.min(U.VBR_mean_bitrate_kbps,320),U.VBR_mean_bitrate_kbps=Math.max(U.VBR_mean_bitrate_kbps,8),U.brate=U.VBR_mean_bitrate_kbps,U.VBR_mean_bitrate_kbps>320&&(U.disable_reservoir=!0),me[H].safejoint>0&&(U.exp_nspsytune=U.exp_nspsytune|2),me[H].sfscale>0&&(U.internal_flags.noise_shaping=2),Math.abs(me[H].nsbass)>0){var i=int(me[H].nsbass*4);i<0&&(i+=64),U.exp_nspsytune=U.exp_nspsytune|i<<2}return B!=0?U.quant_comp=me[H].quant_comp:Math.abs(U.quant_comp- -1)>0||(U.quant_comp=me[H].quant_comp),B!=0?U.quant_comp_short=me[H].quant_comp_s:Math.abs(U.quant_comp_short- -1)>0||(U.quant_comp_short=me[H].quant_comp_s),B!=0?U.msfix=me[H].nsmsfix:Math.abs(U.msfix- -1)>0||(U.msfix=me[H].nsmsfix),B!=0?U.internal_flags.nsPsy.attackthre=me[H].st_lrm:Math.abs(U.internal_flags.nsPsy.attackthre- -1)>0||(U.internal_flags.nsPsy.attackthre=me[H].st_lrm),B!=0?U.internal_flags.nsPsy.attackthre_s=me[H].st_s:Math.abs(U.internal_flags.nsPsy.attackthre_s- -1)>0||(U.internal_flags.nsPsy.attackthre_s=me[H].st_s),B!=0?U.scale=me[H].scale:Math.abs(U.scale- -1)>0||(U.scale=me[H].scale),B!=0?U.maskingadjust=me[H].masking_adj:Math.abs(U.maskingadjust-0)>0||(U.maskingadjust=me[H].masking_adj),me[H].masking_adj>0?B!=0?U.maskingadjust_short=me[H].masking_adj*.9:Math.abs(U.maskingadjust_short-0)>0||(U.maskingadjust_short=me[H].masking_adj*.9):B!=0?U.maskingadjust_short=me[H].masking_adj*1.1:Math.abs(U.maskingadjust_short-0)>0||(U.maskingadjust_short=me[H].masking_adj*1.1),B!=0?U.ATHlower=-me[H].ath_lower/10:Math.abs(-U.ATHlower*10-0)>0||(U.ATHlower=-me[H].ath_lower/10),B!=0?U.ATHcurve=me[H].ath_curve:Math.abs(U.ATHcurve- -1)>0||(U.ATHcurve=me[H].ath_curve),B!=0?U.interChRatio=me[H].interch:Math.abs(U.interChRatio- -1)>0||(U.interChRatio=me[H].interch),we}this.apply_preset=function(U,we,B){switch(we){case Ht.R3MIX:{we=Ht.V3,U.VBR=Nr.vbr_mtrh;break}case Ht.MEDIUM:{we=Ht.V4,U.VBR=Nr.vbr_rh;break}case Ht.MEDIUM_FAST:{we=Ht.V4,U.VBR=Nr.vbr_mtrh;break}case Ht.STANDARD:{we=Ht.V2,U.VBR=Nr.vbr_rh;break}case Ht.STANDARD_FAST:{we=Ht.V2,U.VBR=Nr.vbr_mtrh;break}case Ht.EXTREME:{we=Ht.V0,U.VBR=Nr.vbr_rh;break}case Ht.EXTREME_FAST:{we=Ht.V0,U.VBR=Nr.vbr_mtrh;break}case Ht.INSANE:return we=320,U.preset=we,Ie(U,we,B),U.VBR=Nr.vbr_off,we}switch(U.preset=we,we){case Ht.V9:return ae(U,9,B),we;case Ht.V8:return ae(U,8,B),we;case Ht.V7:return ae(U,7,B),we;case Ht.V6:return ae(U,6,B),we;case Ht.V5:return ae(U,5,B),we;case Ht.V4:return ae(U,4,B),we;case Ht.V3:return ae(U,3,B),we;case Ht.V2:return ae(U,2,B),we;case Ht.V1:return ae(U,1,B),we;case Ht.V0:return ae(U,0,B),we}return 8<=we&&we<=320?Ie(U,we,B):(U.preset=0,we)};function ke(U,we){var B=0;return 0>we&&(B=-1,we=0),9<we&&(B=-1,we=9),U.VBR_q=we,U.VBR_q_frac=0,B}}var x_=g_;function A_(){this.setModules=function(L,re){}}var E_=A_;function R_(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var O0=R_,qc=K.new_float,M_=K.new_int;function T_(){this.global_gain=0,this.sfb_count1=0,this.step=M_(39),this.noise=qc(39),this.noise_log=qc(39)}var C_=T_,vs=K.System,Uc=K.VbrMode,P0=K.Util,ca=K.Arrays,ja=K.new_float,Xa=K.assert;function B_(){var L;this.rv=null;var re;this.qupvt=null;var he,se=new E_,xe;this.setModules=function(j,f,E,I){L=j,re=f,this.rv=f,he=E,this.qupvt=E,xe=I,se.setModules(he,xe)},this.ms_convert=function(j,f){for(var E=0;E<576;++E){var I=j.tt[f][0].xr[E],P=j.tt[f][1].xr[E];j.tt[f][0].xr[E]=(I+P)*(P0.SQRT2*.5),j.tt[f][1].xr[E]=(I-P)*(P0.SQRT2*.5)}};function ae(j,f,E,I){I=0;for(var P=0;P<=E;++P){var F=Math.abs(j.xr[P]);I+=F,f[P]=Math.sqrt(F*Math.sqrt(F)),f[P]>j.xrpow_max&&(j.xrpow_max=f[P])}return I}this.init_xrpow=function(j,f,E){var I=0,P=0|f.max_nonzero_coeff;if(f.xrpow_max=0,ca.fill(E,P,576,0),I=ae(f,E,P,I),I>1e-20){var F=0;j.substep_shaping&2&&(F=1);for(var l=0;l<f.psymax;l++)j.pseudohalf[l]=F;return!0}return ca.fill(f.l3_enc,0,576,0),!1};function me(j,f){var E=j.ATH,I=f.xr;if(f.block_type!=M.SHORT_TYPE)for(var P=!1,F=M.PSFB21-1;F>=0&&!P;F--){var l=j.scalefac_band.psfb21[F],A=j.scalefac_band.psfb21[F+1],y=he.athAdjust(E.adjust,E.psfb21[F],E.floor);j.nsPsy.longfact[21]>1e-12&&(y*=j.nsPsy.longfact[21]);for(var d=A-1;d>=l;d--)if(Math.abs(I[d])<y)I[d]=0;else{P=!0;break}}else for(var w=0;w<3;w++)for(var P=!1,F=M.PSFB12-1;F>=0&&!P;F--){var l=j.scalefac_band.s[12]*3+(j.scalefac_band.s[13]-j.scalefac_band.s[12])*w+(j.scalefac_band.psfb12[F]-j.scalefac_band.psfb12[0]),A=l+(j.scalefac_band.psfb12[F+1]-j.scalefac_band.psfb12[F]),x=he.athAdjust(E.adjust,E.psfb12[F],E.floor);j.nsPsy.shortfact[12]>1e-12&&(x*=j.nsPsy.shortfact[12]);for(var d=A-1;d>=l;d--)if(Math.abs(I[d])<x)I[d]=0;else{P=!0;break}}}this.init_outer_loop=function(j,f){f.part2_3_length=0,f.big_values=0,f.count1=0,f.global_gain=210,f.scalefac_compress=0,f.table_select[0]=0,f.table_select[1]=0,f.table_select[2]=0,f.subblock_gain[0]=0,f.subblock_gain[1]=0,f.subblock_gain[2]=0,f.subblock_gain[3]=0,f.region0_count=0,f.region1_count=0,f.preflag=0,f.scalefac_scale=0,f.count1table_select=0,f.part2_length=0,f.sfb_lmax=M.SBPSY_l,f.sfb_smin=M.SBPSY_s,f.psy_lmax=j.sfb21_extra?M.SBMAX_l:M.SBPSY_l,f.psymax=f.psy_lmax,f.sfbmax=f.sfb_lmax,f.sfbdivide=11;for(var E=0;E<M.SBMAX_l;E++)f.width[E]=j.scalefac_band.l[E+1]-j.scalefac_band.l[E],f.window[E]=3;if(f.block_type==M.SHORT_TYPE){var I=ja(576);f.sfb_smin=0,f.sfb_lmax=0,f.mixed_block_flag!=0&&(f.sfb_smin=3,f.sfb_lmax=j.mode_gr*2+4),f.psymax=f.sfb_lmax+3*((j.sfb21_extra?M.SBMAX_s:M.SBPSY_s)-f.sfb_smin),f.sfbmax=f.sfb_lmax+3*(M.SBPSY_s-f.sfb_smin),f.sfbdivide=f.sfbmax-18,f.psy_lmax=f.sfb_lmax;var P=j.scalefac_band.l[f.sfb_lmax];vs.arraycopy(f.xr,0,I,0,576);for(var E=f.sfb_smin;E<M.SBMAX_s;E++)for(var F=j.scalefac_band.s[E],l=j.scalefac_band.s[E+1],A=0;A<3;A++)for(var y=F;y<l;y++)f.xr[P++]=I[3*y+A];for(var d=f.sfb_lmax,E=f.sfb_smin;E<M.SBMAX_s;E++)f.width[d]=f.width[d+1]=f.width[d+2]=j.scalefac_band.s[E+1]-j.scalefac_band.s[E],f.window[d]=0,f.window[d+1]=1,f.window[d+2]=2,d+=3}f.count1bits=0,f.sfb_partition_table=he.nr_of_sfb_block[0][0],f.slen[0]=0,f.slen[1]=0,f.slen[2]=0,f.slen[3]=0,f.max_nonzero_coeff=575,ca.fill(f.scalefac,0),me(j,f)};function Ie(j){this.ordinal=j}Ie.BINSEARCH_NONE=new Ie(0),Ie.BINSEARCH_UP=new Ie(1),Ie.BINSEARCH_DOWN=new Ie(2);function ke(j,f,E,I,P){var F,l=j.CurrentStep[I],A=!1,y=j.OldValue[I],d=Ie.BINSEARCH_NONE;for(f.global_gain=y,E-=f.part2_length;;){var w;if(F=xe.count_bits(j,P,f,null),l==1||F==E)break;F>E?(d==Ie.BINSEARCH_DOWN&&(A=!0),A&&(l/=2),d=Ie.BINSEARCH_UP,w=l):(d==Ie.BINSEARCH_UP&&(A=!0),A&&(l/=2),d=Ie.BINSEARCH_DOWN,w=-l),f.global_gain+=w,f.global_gain<0&&(f.global_gain=0,A=!0),f.global_gain>255&&(f.global_gain=255,A=!0)}for(Xa(f.global_gain>=0),Xa(f.global_gain<256);F>E&&f.global_gain<255;)f.global_gain++,F=xe.count_bits(j,P,f,null);return j.CurrentStep[I]=y-f.global_gain>=4?4:2,j.OldValue[I]=f.global_gain,f.part2_3_length=F,F}this.trancate_smallspectrums=function(j,f,E,I){var P=ja(ot.SFBMAX);if(!(!(j.substep_shaping&4)&&f.block_type==M.SHORT_TYPE||j.substep_shaping&128)){he.calc_noise(f,E,P,new O0,null);for(var l=0;l<576;l++){var F=0;f.l3_enc[l]!=0&&(F=Math.abs(f.xr[l])),I[l]=F}var l=0,A=8;f.block_type==M.SHORT_TYPE&&(A=6);do{var y,d,w,x,u=f.width[A];if(l+=u,!(P[A]>=1)&&(ca.sort(I,l-u,u),!Zr.EQ(I[l-1],0))){y=(1-P[A])*E[A],d=0,x=0;do{var _;for(w=1;x+w<u&&!Zr.NEQ(I[x+l-u],I[x+l+w-u]);w++);if(_=I[x+l-u]*I[x+l-u]*w,y<_){x!=0&&(d=I[x+l-u-1]);break}y-=_,x+=w}while(x<u);if(!Zr.EQ(d,0))do Math.abs(f.xr[l-u])<=d&&(f.l3_enc[l-u]=0);while(--u>0)}}while(++A<f.psymax);f.part2_3_length=xe.noquant_count_bits(j,f,null)}};function U(j){for(var f=0;f<j.sfbmax;f++)if(j.scalefac[f]+j.subblock_gain[j.window[f]]==0)return!1;return!0}function we(j){return P0.FAST_LOG10(.368+.632*j*j*j)}function B(j,f){for(var E=1e-37,I=0;I<f.psymax;I++)E+=we(j[I]);return Math.max(1e-20,E)}function O(j,f,E,I,P){var F;switch(j){default:case 9:{f.over_count>0?(F=E.over_SSD<=f.over_SSD,E.over_SSD==f.over_SSD&&(F=E.bits<f.bits)):F=E.max_noise<0&&E.max_noise*10+E.bits<=f.max_noise*10+f.bits;break}case 0:F=E.over_count<f.over_count||E.over_count==f.over_count&&E.over_noise<f.over_noise||E.over_count==f.over_count&&Zr.EQ(E.over_noise,f.over_noise)&&E.tot_noise<f.tot_noise;break;case 8:E.max_noise=B(P,I);case 1:F=E.max_noise<f.max_noise;break;case 2:F=E.tot_noise<f.tot_noise;break;case 3:F=E.tot_noise<f.tot_noise&&E.max_noise<f.max_noise;break;case 4:F=E.max_noise<=0&&f.max_noise>.2||E.max_noise<=0&&f.max_noise<0&&f.max_noise>E.max_noise-.2&&E.tot_noise<f.tot_noise||E.max_noise<=0&&f.max_noise>0&&f.max_noise>E.max_noise-.2&&E.tot_noise<f.tot_noise+f.over_noise||E.max_noise>0&&f.max_noise>-.05&&f.max_noise>E.max_noise-.1&&E.tot_noise+E.over_noise<f.tot_noise+f.over_noise||E.max_noise>0&&f.max_noise>-.1&&f.max_noise>E.max_noise-.15&&E.tot_noise+E.over_noise+E.over_noise<f.tot_noise+f.over_noise+f.over_noise;break;case 5:F=E.over_noise<f.over_noise||Zr.EQ(E.over_noise,f.over_noise)&&E.tot_noise<f.tot_noise;break;case 6:F=E.over_noise<f.over_noise||Zr.EQ(E.over_noise,f.over_noise)&&(E.max_noise<f.max_noise||Zr.EQ(E.max_noise,f.max_noise)&&E.tot_noise<=f.tot_noise);break;case 7:F=E.over_count<f.over_count||E.over_noise<f.over_noise;break}return f.over_count==0&&(F=F&&E.bits<f.bits),F}function H(j,f,E,I,P){var F=j.internal_flags,l;f.scalefac_scale==0?l=1.2968395546510096:l=1.6817928305074292;for(var A=0,y=0;y<f.sfbmax;y++)A<E[y]&&(A=E[y]);var d=F.noise_shaping_amp;switch(d==3&&(P?d=2:d=1),d){case 2:break;case 1:A>1?A=Math.pow(A,.5):A*=.95;break;case 0:default:A>1?A=1:A*=.95;break}for(var w=0,y=0;y<f.sfbmax;y++){var x=f.width[y],u;if(w+=x,!(E[y]<A)){if(F.substep_shaping&2&&(F.pseudohalf[y]=F.pseudohalf[y]==0?1:0,F.pseudohalf[y]==0&&F.noise_shaping_amp==2))return;for(f.scalefac[y]++,u=-x;u<0;u++)I[w+u]*=l,I[w+u]>f.xrpow_max&&(f.xrpow_max=I[w+u]);if(F.noise_shaping_amp==2)return}}}function i(j,f){for(var E=1.2968395546510096,I=0,P=0;P<j.sfbmax;P++){var F=j.width[P],l=j.scalefac[P];if(j.preflag!=0&&(l+=he.pretab[P]),I+=F,l&1){l++;for(var A=-F;A<0;A++)f[I+A]*=E,f[I+A]>j.xrpow_max&&(j.xrpow_max=f[I+A])}j.scalefac[P]=l>>1}j.preflag=0,j.scalefac_scale=1}function z(j,f,E){var I,P=f.scalefac;for(I=0;I<f.sfb_lmax;I++)if(P[I]>=16)return!0;for(var F=0;F<3;F++){var l=0,A=0;for(I=f.sfb_lmax+F;I<f.sfbdivide;I+=3)l<P[I]&&(l=P[I]);for(;I<f.sfbmax;I+=3)A<P[I]&&(A=P[I]);if(!(l<16&&A<8)){if(f.subblock_gain[F]>=7)return!0;f.subblock_gain[F]++;var y=j.scalefac_band.l[f.sfb_lmax];for(I=f.sfb_lmax+F;I<f.sfbmax;I+=3){var d,w=f.width[I],x=P[I];if(x=x-(4>>f.scalefac_scale),x>=0){P[I]=x,y+=w*3;continue}P[I]=0;{var u=210+(x<<f.scalefac_scale+1);d=he.IPOW20(u)}y+=w*(F+1);for(var _=-w;_<0;_++)E[y+_]*=d,E[y+_]>f.xrpow_max&&(f.xrpow_max=E[y+_]);y+=w*(3-F-1)}{var d=he.IPOW20(202);y+=f.width[I]*(F+1);for(var _=-f.width[I];_<0;_++)E[y+_]*=d,E[y+_]>f.xrpow_max&&(f.xrpow_max=E[y+_])}}}return!1}function G(j,f,E,I,P){var F=j.internal_flags;H(j,f,E,I,P);var l=U(f);return l?!1:(F.mode_gr==2?l=xe.scale_bitcount(f):l=xe.scale_bitcount_lsf(F,f),l?(F.noise_shaping>1&&(ca.fill(F.pseudohalf,0),f.scalefac_scale==0?(i(f,I),l=!1):f.block_type==M.SHORT_TYPE&&F.subblock_gain>0&&(l=z(F,f,I)||U(f))),l||(F.mode_gr==2?l=xe.scale_bitcount(f):l=xe.scale_bitcount_lsf(F,f)),!l):!0)}this.outer_loop=function(j,f,E,I,P,F){var l=j.internal_flags,A=new It,y=ja(576),d=ja(ot.SFBMAX),w=new O0,x,u=new C_,_=9999999,v=!1,k=!1,ue=0;if(ke(l,f,F,P,I),l.noise_shaping==0)return 100;he.calc_noise(f,E,d,w,u),w.bits=f.part2_3_length,A.assign(f);var q=0;for(vs.arraycopy(I,0,y,0,576);!v;){do{var Q=new O0,c,p=255;if(l.substep_shaping&2?c=20:c=3,l.sfb21_extra&&(d[A.sfbmax]>1||A.block_type==M.SHORT_TYPE&&(d[A.sfbmax+1]>1||d[A.sfbmax+2]>1))||!G(j,A,d,I,k))break;A.scalefac_scale!=0&&(p=254);var fe=F-A.part2_length;if(fe<=0)break;for(;(A.part2_3_length=xe.count_bits(l,I,A,u))>fe&&A.global_gain<=p;)A.global_gain++;if(A.global_gain>p)break;if(w.over_count==0){for(;(A.part2_3_length=xe.count_bits(l,I,A,u))>_&&A.global_gain<=p;)A.global_gain++;if(A.global_gain>p)break}if(he.calc_noise(A,E,d,Q,u),Q.bits=A.part2_3_length,f.block_type!=M.SHORT_TYPE?x=j.quant_comp:x=j.quant_comp_short,x=O(x,w,Q,A,d)?1:0,x!=0)_=f.part2_3_length,w=Q,f.assign(A),q=0,vs.arraycopy(I,0,y,0,576);else if(l.full_outer_loop==0&&(++q>c&&w.over_count==0||l.noise_shaping_amp==3&&k&&q>30||l.noise_shaping_amp==3&&k&&A.global_gain-ue>15))break}while(A.global_gain+A.scalefac_scale<255);l.noise_shaping_amp==3?k?v=!0:(A.assign(f),vs.arraycopy(y,0,I,0,576),q=0,ue=A.global_gain,k=!0):v=!0}return Xa(f.global_gain+f.scalefac_scale<=255),j.VBR==Uc.vbr_rh||j.VBR==Uc.vbr_mtrh?vs.arraycopy(y,0,I,0,576):l.substep_shaping&1&&trancate_smallspectrums(l,f,E,I),w.over_count},this.iteration_finish_one=function(j,f,E){var I=j.l3_side,P=I.tt[f][E];xe.best_scalefac_store(j,f,E,I),j.use_best_huffman==1&&xe.best_huffman_divide(j,P),re.ResvAdjust(j,P)},this.VBR_encode_granule=function(j,f,E,I,P,F,l){var A=j.internal_flags,y=new It,d=ja(576),w=l,x=l+1,u=(l+F)/2,_,v,k=0,ue=A.sfb21_extra;Xa(w<=LameInternalFlags.MAX_BITS_PER_CHANNEL),ca.fill(y.l3_enc,0);do u>w-42?A.sfb21_extra=!1:A.sfb21_extra=ue,v=outer_loop(j,f,E,I,P,u),v<=0?(k=1,x=f.part2_3_length,y.assign(f),vs.arraycopy(I,0,d,0,576),l=x-32,_=l-F,u=(l+F)/2):(F=u+32,_=l-F,u=(l+F)/2,k!=0&&(k=2,f.assign(y),vs.arraycopy(d,0,I,0,576)));while(_>12);A.sfb21_extra=ue,k==2&&vs.arraycopy(y.l3_enc,0,f.l3_enc,0,576),Xa(f.part2_3_length<=w)},this.get_framebits=function(j,f){var E=j.internal_flags;E.bitrate_index=E.VBR_min_bitrate;var I=L.getframebits(j);E.bitrate_index=1,I=L.getframebits(j);for(var P=1;P<=E.VBR_max_bitrate;P++){E.bitrate_index=P;var F=new MeanBits(I);f[P]=re.ResvFrameBegin(j,F),I=F.bits}},this.VBR_old_prepare=function(j,f,E,I,P,F,l,A,y){var d=j.internal_flags,w,x=0,u=1,_=0;d.bitrate_index=d.VBR_max_bitrate;var v=re.ResvFrameBegin(j,new MeanBits(0))/d.mode_gr;get_framebits(j,F);for(var k=0;k<d.mode_gr;k++){var ue=he.on_pe(j,f,A[k],v,k,0);d.mode_ext==M.MPG_MD_MS_LR&&(ms_convert(d.l3_side,k),he.reduce_side(A[k],E[k],v,ue));for(var q=0;q<d.channels_out;++q){var Q=d.l3_side.tt[k][q];Q.block_type!=M.SHORT_TYPE?(x=1.28/(1+Math.exp(3.5-f[k][q]/300))-.05,w=d.PSY.mask_adjust-x):(x=2.56/(1+Math.exp(3.5-f[k][q]/300))-.14,w=d.PSY.mask_adjust_short-x),d.masking_lower=Math.pow(10,w*.1),init_outer_loop(d,Q),y[k][q]=he.calc_xmin(j,I[k][q],Q,P[k][q]),y[k][q]!=0&&(u=0),l[k][q]=126,_+=A[k][q]}}for(var k=0;k<d.mode_gr;k++)for(var q=0;q<d.channels_out;q++)_>F[d.VBR_max_bitrate]&&(A[k][q]*=F[d.VBR_max_bitrate],A[k][q]/=_),l[k][q]>A[k][q]&&(l[k][q]=A[k][q]);return u},this.bitpressure_strategy=function(j,f,E,I){for(var P=0;P<j.mode_gr;P++)for(var F=0;F<j.channels_out;F++){for(var l=j.l3_side.tt[P][F],A=f[P][F],y=0,d=0;d<l.psy_lmax;d++)A[y++]*=1+.029*d*d/M.SBMAX_l/M.SBMAX_l;if(l.block_type==M.SHORT_TYPE)for(var d=l.sfb_smin;d<M.SBMAX_s;d++)A[y++]*=1+.029*d*d/M.SBMAX_s/M.SBMAX_s,A[y++]*=1+.029*d*d/M.SBMAX_s/M.SBMAX_s,A[y++]*=1+.029*d*d/M.SBMAX_s/M.SBMAX_s;I[P][F]=0|Math.max(E[P][F],.9*I[P][F])}},this.VBR_new_prepare=function(j,f,E,I,P,F){var l=j.internal_flags,A=1,y=0,d=0,w;if(j.free_format){l.bitrate_index=0;var x=new MeanBits(y);w=re.ResvFrameBegin(j,x),y=x.bits,P[0]=w}else{l.bitrate_index=l.VBR_max_bitrate;var x=new MeanBits(y);re.ResvFrameBegin(j,x),y=x.bits,get_framebits(j,P),w=P[l.VBR_max_bitrate]}for(var u=0;u<l.mode_gr;u++){he.on_pe(j,f,F[u],y,u,0),l.mode_ext==M.MPG_MD_MS_LR&&ms_convert(l.l3_side,u);for(var _=0;_<l.channels_out;++_){var v=l.l3_side.tt[u][_];l.masking_lower=Math.pow(10,l.PSY.mask_adjust*.1),init_outer_loop(l,v),he.calc_xmin(j,E[u][_],v,I[u][_])!=0&&(A=0),d+=F[u][_]}}for(var u=0;u<l.mode_gr;u++)for(var _=0;_<l.channels_out;_++)d>w&&(F[u][_]*=w,F[u][_]/=d);return A},this.calc_target_bits=function(j,f,E,I,P,F){var l=j.internal_flags,A=l.l3_side,y,d,w,x,u=0;l.bitrate_index=l.VBR_max_bitrate;var _=new MeanBits(u);for(F[0]=re.ResvFrameBegin(j,_),u=_.bits,l.bitrate_index=1,u=L.getframebits(j)-l.sideinfo_len*8,P[0]=u/(l.mode_gr*l.channels_out),u=j.VBR_mean_bitrate_kbps*j.framesize*1e3,l.substep_shaping&1&&(u*=1.09),u/=j.out_samplerate,u-=l.sideinfo_len*8,u/=l.mode_gr*l.channels_out,y=.93+.07*(11-j.compression_ratio)/(11-5.5),y<.9&&(y=.9),y>1&&(y=1),d=0;d<l.mode_gr;d++){var v=0;for(w=0;w<l.channels_out;w++){if(I[d][w]=int(y*u),f[d][w]>700){var k=int((f[d][w]-700)/1.4),ue=A.tt[d][w];I[d][w]=int(y*u),ue.block_type==M.SHORT_TYPE&&k<u/2&&(k=u/2),k>u*3/2?k=u*3/2:k<0&&(k=0),I[d][w]+=k}I[d][w]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(I[d][w]=LameInternalFlags.MAX_BITS_PER_CHANNEL),v+=I[d][w]}if(v>LameInternalFlags.MAX_BITS_PER_GRANULE)for(w=0;w<l.channels_out;++w)I[d][w]*=LameInternalFlags.MAX_BITS_PER_GRANULE,I[d][w]/=v}if(l.mode_ext==M.MPG_MD_MS_LR)for(d=0;d<l.mode_gr;d++)he.reduce_side(I[d],E[d],u*l.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(x=0,d=0;d<l.mode_gr;d++)for(w=0;w<l.channels_out;w++)I[d][w]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(I[d][w]=LameInternalFlags.MAX_BITS_PER_CHANNEL),x+=I[d][w];if(x>F[0])for(d=0;d<l.mode_gr;d++)for(w=0;w<l.channels_out;w++)I[d][w]*=F[0],I[d][w]/=x}}var I_=B_,Yc=K.assert;function O_(){var L;this.setModules=function(re){L=re},this.ResvFrameBegin=function(re,he){var se=re.internal_flags,xe,ae=se.l3_side,me=L.getframebits(re);he.bits=(me-se.sideinfo_len*8)/se.mode_gr;var Ie=8*256*se.mode_gr-8;re.brate>320?xe=8*int(re.brate*1e3/(re.out_samplerate/1152)/8+.5):(xe=8*1440,re.strict_ISO&&(xe=8*int(32e4/(re.out_samplerate/1152)/8+.5))),se.ResvMax=xe-me,se.ResvMax>Ie&&(se.ResvMax=Ie),(se.ResvMax<0||re.disable_reservoir)&&(se.ResvMax=0);var ke=he.bits*se.mode_gr+Math.min(se.ResvSize,se.ResvMax);return ke>xe&&(ke=xe),Yc(se.ResvMax%8==0),Yc(se.ResvMax>=0),ae.resvDrain_pre=0,se.pinfo!=null&&(se.pinfo.mean_bits=he.bits/2,se.pinfo.resvsize=se.ResvSize),ke},this.ResvMaxBits=function(re,he,se,xe){var ae=re.internal_flags,me,Ie=ae.ResvSize,ke=ae.ResvMax;xe!=0&&(Ie+=he),ae.substep_shaping&1&&(ke*=.9),se.bits=he,Ie*10>ke*9?(me=Ie-ke*9/10,se.bits+=me,ae.substep_shaping|=128):(me=0,ae.substep_shaping&=127,!re.disable_reservoir&&!(ae.substep_shaping&1)&&(se.bits-=.1*he));var U=Ie<ae.ResvMax*6/10?Ie:ae.ResvMax*6/10;return U-=me,U<0&&(U=0),U},this.ResvAdjust=function(re,he){re.ResvSize-=he.part2_3_length+he.part2_length},this.ResvFrameEnd=function(re,he){var se,xe=re.l3_side;re.ResvSize+=he*re.mode_gr;var ae=0;xe.resvDrain_post=0,xe.resvDrain_pre=0,(se=re.ResvSize%8)!=0&&(ae+=se),se=re.ResvSize-ae-re.ResvMax,se>0&&(ae+=se);{var me=Math.min(xe.main_data_begin*8,ae)/8;xe.resvDrain_pre+=8*me,ae-=8*me,re.ResvSize-=8*me,xe.main_data_begin-=me}xe.resvDrain_post+=ae,re.ResvSize-=ae}}var P_=O_;function k_(){var L="http://www.mp3dev.org/",re=3,he=98,se=4,xe=0,ae=93;this.getLameVersion=function(){return re+"."+he+"."+se},this.getLameShortVersion=function(){return re+"."+he+"."+se},this.getLameVeryShortVersion=function(){return"LAME"+re+"."+he+"r"},this.getPsyVersion=function(){return xe+"."+ae},this.getLameUrl=function(){return L},this.getLameOsBitness=function(){return"32bits"}}var L_=k_,N_=K.System,k0=K.VbrMode,Kc=K.ShortBlock,F_=K.Arrays,Ki=K.new_byte,$_=K.assert;qa.NUMTOCENTRIES=100,qa.MAXFRAMESIZE=2880;function qa(){var L,re,he;this.setModules=function(u,_,v){L=u,re=_,he=v};var se=1,xe=2,ae=4,me=8,Ie=qa.NUMTOCENTRIES,ke=qa.MAXFRAMESIZE,U=Ie+4+4+4+4+4,we=U+9+1+1+8+1+1+3+1+1+2+4+2+2,B=128,O=64,H=32,i=null,z="Xing",G="Info",j=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function f(u,_){if(u.nVbrNumFrames++,u.sum+=_,u.seen++,!(u.seen<u.want)&&(u.pos<u.size&&(u.bag[u.pos]=u.sum,u.pos++,u.seen=0),u.pos==u.size)){for(var v=1;v<u.size;v+=2)u.bag[v/2]=u.bag[v];u.want*=2,u.pos/=2}}function E(u,_){if(!(u.pos<=0))for(var v=1;v<Ie;++v){var k=v/Ie,ue,q,Q=0|Math.floor(k*u.pos);Q>u.pos-1&&(Q=u.pos-1),ue=u.bag[Q],q=u.sum;var c=0|256*ue/q;c>255&&(c=255),_[v]=255&c}}this.addVbrFrame=function(u){var _=u.internal_flags,v=Tables.bitrate_table[u.version][_.bitrate_index];$_(_.VBR_seek_table.bag!=null),f(_.VBR_seek_table,v)};function I(u,_){var v=u[_+0]&255;return v<<=8,v|=u[_+1]&255,v<<=8,v|=u[_+2]&255,v<<=8,v|=u[_+3]&255,v}function P(u,_,v){u[_+0]=255&(v>>24&255),u[_+1]=255&(v>>16&255),u[_+2]=255&(v>>8&255),u[_+3]=255&(v&255)}function F(u,_,v){u[_+0]=255&(v>>8&255),u[_+1]=255&(v&255)}function l(u,_){return new String(u,_,z.length(),i).equals(z)||new String(u,_,G.length(),i).equals(G)}function A(u,_,v){return 255&(u<<_|v&~(-1<<_))}function y(u,_){var v=u.internal_flags;_[0]=A(_[0],8,255),_[1]=A(_[1],3,7),_[1]=A(_[1],1,u.out_samplerate<16e3?0:1),_[1]=A(_[1],1,u.version),_[1]=A(_[1],2,1),_[1]=A(_[1],1,u.error_protection?0:1),_[2]=A(_[2],4,v.bitrate_index),_[2]=A(_[2],2,v.samplerate_index),_[2]=A(_[2],1,0),_[2]=A(_[2],1,u.extension),_[3]=A(_[3],2,u.mode.ordinal()),_[3]=A(_[3],2,v.mode_ext),_[3]=A(_[3],1,u.copyright),_[3]=A(_[3],1,u.original),_[3]=A(_[3],2,u.emphasis),_[0]=255;var k=255&(_[1]&241),ue;u.version==1?ue=B:u.out_samplerate<16e3?ue=H:ue=O,u.VBR==k0.vbr_off&&(ue=u.brate);var q;u.free_format?q=0:q=255&16*L.BitrateIndex(ue,u.version,u.out_samplerate),u.version==1?(_[1]=255&(k|10),k=255&(_[2]&13),_[2]=255&(q|k)):(_[1]=255&(k|2),k=255&(_[2]&13),_[2]=255&(q|k))}this.getVbrTag=function(u){var _=new VBRTagData,v=0;_.flags=0;var k=u[v+1]>>3&1,ue=u[v+2]>>2&3,q=u[v+3]>>6&3,Q=u[v+2]>>4&15;if(Q=Tables.bitrate_table[k][Q],u[v+1]>>4==14?_.samprate=Tables.samplerate_table[2][ue]:_.samprate=Tables.samplerate_table[k][ue],k!=0?q!=3?v+=36:v+=21:q!=3?v+=21:v+=13,!l(u,v))return null;v+=4,_.hId=k;var c=_.flags=I(u,v);if(v+=4,c&se&&(_.frames=I(u,v),v+=4),c&xe&&(_.bytes=I(u,v),v+=4),c&ae){if(_.toc!=null)for(var p=0;p<Ie;p++)_.toc[p]=u[v+p];v+=Ie}_.vbrScale=-1,c&me&&(_.vbrScale=I(u,v),v+=4),_.headersize=(k+1)*72e3*Q/_.samprate,v+=21;var fe=u[v+0]<<4;fe+=u[v+1]>>4;var ve=(u[v+1]&15)<<8;return ve+=u[v+2]&255,(fe<0||fe>3e3)&&(fe=-1),(ve<0||ve>3e3)&&(ve=-1),_.encDelay=fe,_.encPadding=ve,_},this.InitVbrTag=function(u){var _=u.internal_flags,v;u.version==1?v=B:u.out_samplerate<16e3?v=H:v=O,u.VBR==k0.vbr_off&&(v=u.brate);var k=(u.version+1)*72e3*v/u.out_samplerate,ue=_.sideinfo_len+we;if(_.VBR_seek_table.TotalFrameSize=k,k<ue||k>ke){u.bWriteVbrTag=!1;return}_.VBR_seek_table.nVbrNumFrames=0,_.VBR_seek_table.nBytesWritten=0,_.VBR_seek_table.sum=0,_.VBR_seek_table.seen=0,_.VBR_seek_table.want=1,_.VBR_seek_table.pos=0,_.VBR_seek_table.bag==null&&(_.VBR_seek_table.bag=new int[400],_.VBR_seek_table.size=400);var q=Ki(ke);y(u,q);for(var Q=_.VBR_seek_table.TotalFrameSize,c=0;c<Q;++c)re.add_dummy_byte(u,q[c]&255,1)};function d(u,_){var v=_^u;return _=_>>8^j[v&255],_}this.updateMusicCRC=function(u,_,v,k){for(var ue=0;ue<k;++ue)u[0]=d(_[v+ue],u[0])};function w(u,_,v,k,ue){var q=u.internal_flags,Q=0,c=u.encoder_delay,p=u.encoder_padding,fe=100-10*u.VBR_q-u.quality,ve=he.getLameVeryShortVersion(),Oe,qe=0,Le,De=[1,5,3,2,4,0,3],dt=0|(u.lowpassfreq/100+.5>255?255:u.lowpassfreq/100+.5),st=0,$e=0,Pt=0,mn=u.internal_flags.noise_shaping,Tt=0,zt=0,Qt=0,an=0,Sn=0,Fr=(u.exp_nspsytune&1)!=0,_r=(u.exp_nspsytune&2)!=0,qn=!1,Sr=!1,Ds=u.internal_flags.nogap_total,ps=u.internal_flags.nogap_current,nr=u.ATHtype,js=0,Jr;switch(u.VBR){case vbr_abr:Jr=u.VBR_mean_bitrate_kbps;break;case vbr_off:Jr=u.brate;break;default:Jr=u.VBR_min_bitrate_kbps}switch(u.VBR.ordinal()<De.length?Oe=De[u.VBR.ordinal()]:Oe=0,Le=16*qe+Oe,q.findReplayGain&&(q.RadioGain>510&&(q.RadioGain=510),q.RadioGain<-510&&(q.RadioGain=-510),$e=8192,$e|=3072,q.RadioGain>=0?$e|=q.RadioGain:($e|=512,$e|=-q.RadioGain)),q.findPeakSample&&(st=Math.abs(0|q.PeakSample/32767*Math.pow(2,23)+.5)),Ds!=-1&&(ps>0&&(Sr=!0),ps<Ds-1&&(qn=!0)),js=nr+((Fr?1:0)<<4)+((_r?1:0)<<5)+((qn?1:0)<<6)+((Sr?1:0)<<7),fe<0&&(fe=0),u.mode){case MONO:Tt=0;break;case STEREO:Tt=1;break;case DUAL_CHANNEL:Tt=2;break;case JOINT_STEREO:u.force_ms?Tt=4:Tt=3;break;case NOT_SET:default:Tt=7;break}u.in_samplerate<=32e3?Qt=0:u.in_samplerate==48e3?Qt=2:u.in_samplerate>48e3?Qt=3:Qt=1,(u.short_blocks==Kc.short_block_forced||u.short_blocks==Kc.short_block_dispensed||u.lowpassfreq==-1&&u.highpassfreq==-1||u.scale_left<u.scale_right||u.scale_left>u.scale_right||u.disable_reservoir&&u.brate<320||u.noATH||u.ATHonly||nr==0||u.in_samplerate<=32e3)&&(zt=1),an=mn+(Tt<<2)+(zt<<5)+(Qt<<6),Sn=q.nMusicCRC,P(v,k+Q,fe),Q+=4;for(var rr=0;rr<9;rr++)v[k+Q+rr]=255&ve.charAt(rr);Q+=9,v[k+Q]=255&Le,Q++,v[k+Q]=255&dt,Q++,P(v,k+Q,st),Q+=4,F(v,k+Q,$e),Q+=2,F(v,k+Q,Pt),Q+=2,v[k+Q]=255&js,Q++,Jr>=255?v[k+Q]=255:v[k+Q]=255&Jr,Q++,v[k+Q]=255&c>>4,v[k+Q+1]=255&(c<<4)+(p>>8),v[k+Q+2]=255&p,Q+=3,v[k+Q]=255&an,Q++,v[k+Q++]=0,F(v,k+Q,u.preset),Q+=2,P(v,k+Q,_),Q+=4,F(v,k+Q,Sn),Q+=2;for(var ua=0;ua<Q;ua++)ue=d(v[k+ua],ue);return F(v,k+Q,ue),Q+=2,Q}function x(u){u.seek(0);var _=Ki(10);u.readFully(_);var v;return new String(_,"ISO-8859-1").startsWith("ID3")?v=0:v=((_[6]&127)<<21|(_[7]&127)<<14|(_[8]&127)<<7|_[9]&127)+_.length,v}this.getLameTagFrame=function(u,_){var v=u.internal_flags;if(!u.bWriteVbrTag||v.Class_ID!=Ht.LAME_ID||v.VBR_seek_table.pos<=0)return 0;if(_.length<v.VBR_seek_table.TotalFrameSize)return v.VBR_seek_table.TotalFrameSize;F_.fill(_,0,v.VBR_seek_table.TotalFrameSize,0),y(u,_);var k=Ki(Ie);if(u.free_format)for(var ue=1;ue<Ie;++ue)k[ue]=255&255*ue/100;else E(v.VBR_seek_table,k);var q=v.sideinfo_len;u.error_protection&&(q-=2),u.VBR==k0.vbr_off?(_[q++]=255&G.charAt(0),_[q++]=255&G.charAt(1),_[q++]=255&G.charAt(2),_[q++]=255&G.charAt(3)):(_[q++]=255&z.charAt(0),_[q++]=255&z.charAt(1),_[q++]=255&z.charAt(2),_[q++]=255&z.charAt(3)),P(_,q,se+xe+ae+me),q+=4,P(_,q,v.VBR_seek_table.nVbrNumFrames),q+=4;var Q=v.VBR_seek_table.nBytesWritten+v.VBR_seek_table.TotalFrameSize;P(_,q,0|Q),q+=4,N_.arraycopy(k,0,_,q,k.length),q+=k.length,u.error_protection&&re.CRC_writeheader(v,_);for(var c=0,ue=0;ue<q;ue++)c=d(_[ue],c);return q+=w(u,Q,_,q,c),v.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(u,_){var v=u.internal_flags;if(v.VBR_seek_table.pos<=0||(_.seek(_.length()),_.length()==0))return-1;var k=x(_);_.seek(k);var ue=Ki(ke),q=getLameTagFrame(u,ue);return q>ue.length?-1:(q<1||_.write(ue,0,q),0)}}var V_=qa,Wc=K.new_byte,H_=K.assert,Ht=S_,D_=x_,Ua=$n,j_=ds,X_=I_,q_=B0,U_=P_,_n=Ke,Zr=_s;function Y_(){this.setModules=function(L,re){}}function K_(){this.setModules=function(L,re,he){}}function W_(){}function G_(){this.setModules=function(L,re){}}function z_(L,re,he){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),L=1,re=44100,he=128);var se=new Ht,xe=new Y_,ae=new Ua,me=new Zr,Ie=new D_,ke=new j_,U=new X_,we=new V_,B=new L_,O=new G_,H=new U_,i=new q_,z=new K_,G=new W_;se.setModules(ae,me,Ie,ke,U,we,B,O,G),me.setModules(ae,G,B,we),O.setModules(me,B),Ie.setModules(se),U.setModules(me,H,ke,i),ke.setModules(i,H,se.enc.psy),H.setModules(me),i.setModules(ke),we.setModules(se,me,B),xe.setModules(z,G),z.setModules(B,O,Ie);var j=se.lame_init();j.num_channels=L,j.in_samplerate=re,j.brate=he,j.mode=_n.STEREO,j.quality=3,j.bWriteVbrTag=!1,j.disable_reservoir=!0,j.write_id3tag_automatic=!1,se.lame_init_params(j);var f=1152,E=0|1.25*f+7200,I=Wc(E);this.encodeBuffer=function(P,F){L==1&&(F=P),H_(P.length==F.length),P.length>f&&(f=P.length,E=0|1.25*f+7200,I=Wc(E));var l=se.lame_encode_buffer(j,P,F,P.length,I,0,E);return new Int8Array(I.subarray(0,l))},this.flush=function(){var P=se.lame_encode_flush(j,I,0,E);return new Int8Array(I.subarray(0,P))}}function Wi(L){return L.charCodeAt(0)<<24|L.charCodeAt(1)<<16|L.charCodeAt(2)<<8|L.charCodeAt(3)}Wi("RIFF"),Wi("WAVE"),Wi("fmt "),Wi("data");var Q_=z_,Gc=function(L,re){if(!(L instanceof re))throw new TypeError("Cannot call a class as a function")},zc=function(){function L(re,he){for(var se=0;se<he.length;se++){var xe=he[se];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty(re,xe.key,xe)}}return function(re,he,se){return he&&L(re.prototype,he),se&&L(re,se),re}}(),Z_=function(){function L(re){Gc(this,L),this.config={sampleRate:44100,bitRate:128},Object.assign(this.config,re),this.mp3Encoder=new Q_(1,this.config.sampleRate,this.config.bitRate),this.maxSamples=1152,this.samplesMono=null,this.clearBuffer()}return zc(L,[{key:"clearBuffer",value:function(){this.dataBuffer=[]}},{key:"appendToBuffer",value:function(he){this.dataBuffer.push(new Int8Array(he))}},{key:"floatTo16BitPCM",value:function(he,se){for(var xe=0;xe<he.length;xe++){var ae=Math.max(-1,Math.min(1,he[xe]));se[xe]=ae<0?ae*32768:ae*32767}}},{key:"convertBuffer",value:function(he){var se=new Float32Array(he),xe=new Int16Array(he.length);return this.floatTo16BitPCM(se,xe),xe}},{key:"encode",value:function(he){this.samplesMono=this.convertBuffer(he);for(var se=this.samplesMono.length,xe=0;se>=0;xe+=this.maxSamples){var ae=this.samplesMono.subarray(xe,xe+this.maxSamples),me=this.mp3Encoder.encodeBuffer(ae);this.appendToBuffer(me),se-=this.maxSamples}}},{key:"finish",value:function(){return this.appendToBuffer(this.mp3Encoder.flush()),this.dataBuffer}}]),L}(),J_=function(){function L(re){Gc(this,L),this.config={bitRate:128,startRecordingAt:300,deviceId:null},this.activeStream=null,this.context=null,this.microphone=null,this.processor=null,this.startTime=0,Object.assign(this.config,re)}return zc(L,[{key:"addMicrophoneListener",value:function(he){var se=this;this.activeStream=he,this.timerToStart=setTimeout(function(){delete se.timerToStart},this.config.startRecordingAt),this.microphone=this.context.createMediaStreamSource(he),this.processor=this.context.createScriptProcessor(0,1,1),this.processor.onaudioprocess=function(xe){se.timerToStart||se.lameEncoder.encode(xe.inputBuffer.getChannelData(0))},this.microphone.connect(this.processor),this.processor.connect(this.context.destination)}},{key:"stop",value:function(){return this.processor&&this.microphone&&(this.microphone.disconnect(),this.processor.disconnect(),this.context&&this.context.state!=="closed"&&this.context.close(),this.processor.onaudioprocess=null,this.activeStream.getAudioTracks().forEach(function(he){return he.stop()})),this}},{key:"start",value:function(){var he=this,se=window.AudioContext||window.webkitAudioContext;this.context=new se,this.config.sampleRate=this.context.sampleRate,this.lameEncoder=new Z_(this.config);var xe=this.config.deviceId?{deviceId:{exact:this.config.deviceId}}:!0;return new Promise(function(ae,me){navigator.mediaDevices.getUserMedia({audio:xe}).then(function(Ie){he.addMicrophoneListener(Ie),ae(Ie)}).catch(function(Ie){me(Ie)})})}},{key:"getMp3",value:function(){var he=this,se=this.lameEncoder.finish();return new Promise(function(xe,ae){se.length===0?ae(new Error("No buffer to send")):(xe([se,new Blob(se,{type:"audio/mp3"})]),he.lameEncoder.clearBuffer())})}}]),L}();return J_})})(zh);var X5=zh.exports;const q5=j5(X5),ga="4.68.4";let w1=!1,gi,Qh,Zh,Hl,Jh,ed,td,nd,rd;function U5(e,t={auto:!1}){if(w1)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(gi)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${gi}'\``);w1=t.auto,gi=e.kind,Qh=e.fetch,Zh=e.FormData,Hl=e.File,Jh=e.ReadableStream,ed=e.getMultipartRequestOptions,td=e.getDefaultAgent,nd=e.fileFromPath,rd=e.isFsReadStream}class Y5{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function K5({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,s,a;try{n=fetch,r=Request,s=Response,a=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${t}`)}return{kind:"web",fetch:n,Request:r,Response:s,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(o,h)=>({...h,body:new Y5(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}gi||U5(K5(),{auto:!0});class sa{constructor(){this.buffer=[],this.trailingCR=!1}decode(t){let n=this.decodeText(t);if(this.trailingCR&&(n="\r"+n,this.trailingCR=!1),n.endsWith("\r")&&(this.trailingCR=!0,n=n.slice(0,-1)),!n)return[];const r=sa.NEWLINE_CHARS.has(n[n.length-1]||"");let s=n.split(sa.NEWLINE_REGEXP);return r&&s.pop(),s.length===1&&!r?(this.buffer.push(s[0]),[]):(this.buffer.length>0&&(s=[this.buffer.join("")+s[0],...s.slice(1)],this.buffer=[]),r||(this.buffer=[s.pop()||""]),s)}decodeText(t){if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new Bt(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new Bt(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new Bt("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const t=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,t}}sa.NEWLINE_CHARS=new Set([`
`,"\r"]);sa.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class Yr{constructor(t,n){this.iterator=t,this.controller=n}static fromSSEResponse(t,n){let r=!1;async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const o of W5(t,n))if(!a){if(o.data.startsWith("[DONE]")){a=!0;continue}if(o.event===null){let h;try{h=JSON.parse(o.data)}catch(m){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),m}if(h&&h.error)throw new Tn(void 0,h.error,void 0,void 0);yield h}else{let h;try{h=JSON.parse(o.data)}catch(m){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),m}if(o.event=="error")throw new Tn(void 0,h.error,h.message,void 0);yield{event:o.event,data:h}}}a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||n.abort()}}return new Yr(s,n)}static fromReadableStream(t,n){let r=!1;async function*s(){const o=new sa,h=sd(t);for await(const m of h)for(const S of o.decode(m))yield S;for(const m of o.flush())yield m}async function*a(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const h of s())o||h&&(yield JSON.parse(h));o=!0}catch(h){if(h instanceof Error&&h.name==="AbortError")return;throw h}finally{o||n.abort()}}return new Yr(a,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const o=r.next();t.push(o),n.push(o)}return a.shift()}});return[new Yr(()=>s(t),this.controller),new Yr(()=>s(n),this.controller)]}toReadableStream(){const t=this;let n;const r=new TextEncoder;return new Jh({async start(){n=t[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:o}=await n.next();if(o)return s.close();const h=r.encode(JSON.stringify(a)+`
`);s.enqueue(h)}catch(a){s.error(a)}},async cancel(){var s;await((s=n.return)==null?void 0:s.call(n))}})}}async function*W5(e,t){if(!e.body)throw t.abort(),new Bt("Attempted to iterate over a response with no body");const n=new Q5,r=new sa,s=sd(e.body);for await(const a of G5(s))for(const o of r.decode(a)){const h=n.decode(o);h&&(yield h)}for(const a of r.flush()){const o=n.decode(a);o&&(yield o)}}async function*G5(e){let t=new Uint8Array;for await(const n of e){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let s=new Uint8Array(t.length+r.length);s.set(t),s.set(r,t.length),t=s;let a;for(;(a=z5(t))!==-1;)yield t.slice(0,a),t=t.slice(a)}t.length>0&&(yield t)}function z5(e){for(let r=0;r<e.length-2;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}class Q5{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,s]=Z5(t,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function Z5(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}function sd(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const ad=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function",id=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&x0(e),x0=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",J5=e=>id(e)||ad(e)||rd(e);async function od(e,t,n){var s;if(e=await e,id(e))return e;if(ad(e)){const a=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const o=x0(a)?[await a.arrayBuffer()]:[a];return new Hl(o,t,n)}const r=await e6(e);if(t||(t=n6(e)??"unknown_file"),!(n!=null&&n.type)){const a=(s=r[0])==null?void 0:s.type;typeof a=="string"&&(n={...n,type:a})}return new Hl(r,t,n)}async function e6(e){var n;let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(x0(e))t.push(await e.arrayBuffer());else if(r6(e))for await(const r of e)t.push(r);else throw new Error(`Unexpected data type: ${typeof e}; constructor: ${(n=e==null?void 0:e.constructor)==null?void 0:n.name}; props: ${t6(e)}`);return t}function t6(e){return`[${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}function n6(e){var t;return cl(e.name)||cl(e.filename)||((t=cl(e.path))==null?void 0:t.split(/[\\/]/).pop())}const cl=e=>{if(typeof e=="string")return e;if(typeof Buffer<"u"&&e instanceof Buffer)return String(e)},r6=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",S1=e=>e&&typeof e=="object"&&e.body&&e[Symbol.toStringTag]==="MultipartBody",$a=async e=>{const t=await s6(e.body);return ed(t,e)},s6=async e=>{const t=new Zh;return await Promise.all(Object.entries(e||{}).map(([n,r])=>Dl(t,n,r))),t},Dl=async(e,t,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")e.append(t,String(n));else if(J5(n)){const r=await od(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>Dl(e,t+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>Dl(e,`${t}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var Oa={},a6=function(e,t,n,r,s){if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n},i6=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},ao;async function ld(e){const{response:t}=e;if(e.options.stream)return Pa("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):Yr.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const n=t.headers.get("content-type");if((n==null?void 0:n.includes("application/json"))||(n==null?void 0:n.includes("application/vnd.api+json"))){const a=await t.json();return Pa("response",t.status,t.url,t.headers,a),cd(a,t)}const s=await t.text();return Pa("response",t.status,t.url,t.headers,s),s}function cd(e,t){return!e||typeof e!="object"||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}class A0 extends Promise{constructor(t,n=ld){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=n}_thenUnwrap(t){return new A0(this.responsePromise,async n=>cd(t(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class o6{constructor({baseURL:t,maxRetries:n=2,timeout:r=6e5,httpAgent:s,fetch:a}){this.baseURL=t,this.maxRetries=ul("maxRetries",n),this.timeout=ul("timeout",r),this.httpAgent=s,this.fetch=a??Qh}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...d6(),...this.authHeaders(t)}}validateHeaders(t,n){}defaultIdempotencyKey(){return`stainless-node-retry-${p6()}`}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(async s=>{const a=s&&x0(s==null?void 0:s.body)?new DataView(await s.body.arrayBuffer()):(s==null?void 0:s.body)instanceof DataView?s.body:(s==null?void 0:s.body)instanceof ArrayBuffer?new DataView(s.body):s&&ArrayBuffer.isView(s==null?void 0:s.body)?new DataView(s.body.buffer):s==null?void 0:s.body;return{method:t,path:n,...s,body:a}}))}getAPIList(t,n,r){return this.requestAPIList(n,{method:"get",path:t,...r})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}else if(ArrayBuffer.isView(t))return t.byteLength.toString();return null}buildRequest(t,{retryCount:n=0}={}){var J;const{method:r,path:s,query:a,headers:o={}}=t,h=ArrayBuffer.isView(t.body)||t.__binaryRequest&&typeof t.body=="string"?t.body:S1(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,m=this.calculateContentLength(h),S=this.buildURL(s,a);"timeout"in t&&ul("timeout",t.timeout);const g=t.timeout??this.timeout,b=t.httpAgent??this.httpAgent??td(S),C=g+1e3;typeof((J=b==null?void 0:b.options)==null?void 0:J.timeout)=="number"&&C>(b.options.timeout??0)&&(b.options.timeout=C),this.idempotencyHeader&&r!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=t.idempotencyKey);const V=this.buildHeaders({options:t,headers:o,contentLength:m,retryCount:n});return{req:{method:r,...h&&{body:h},headers:V,...b&&{agent:b},signal:t.signal??null},url:S,timeout:g}}buildHeaders({options:t,headers:n,contentLength:r,retryCount:s}){const a={};r&&(a["content-length"]=r);const o=this.defaultHeaders(t);return E1(a,o),E1(a,n),S1(t.body)&&gi!=="node"&&delete a["content-type"],R1(o,"x-stainless-retry-count")===void 0&&R1(n,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(s)),this.validateHeaders(a,n),a}async prepareOptions(t){}async prepareRequest(t,{url:n,options:r}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(n=>[...n])):{...t}:{}}makeStatusError(t,n,r,s){return Tn.generate(t,n,r,s)}request(t,n=null){return new A0(this.makeRequest(t,n))}async makeRequest(t,n){var b,C;const r=await t,s=r.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(r);const{req:a,url:o,timeout:h}=this.buildRequest(r,{retryCount:s-n});if(await this.prepareRequest(a,{url:o,options:r}),Pa("request",o,r,a.headers),(b=r.signal)!=null&&b.aborted)throw new Tr;const m=new AbortController,S=await this.fetchWithTimeout(o,a,h,m).catch(jl);if(S instanceof Error){if((C=r.signal)!=null&&C.aborted)throw new Tr;if(n)return this.retryRequest(r,n);throw S.name==="AbortError"?new xc:new E0({cause:S})}const g=c6(S.headers);if(!S.ok){if(n&&this.shouldRetry(S)){const K=`retrying, ${n} attempts remaining`;return Pa(`response (error; ${K})`,S.status,o,g),this.retryRequest(r,n,g)}const V=await S.text().catch(K=>jl(K).message),ne=_6(V),J=ne?void 0:V;throw Pa(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,S.status,o,g,J),this.makeStatusError(S.status,ne,J,g)}return{response:S,options:r,controller:m}}requestAPIList(t,n){const r=this.makeRequest(n,null);return new l6(this,r,t)}buildURL(t,n){const r=v6(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),s=this.defaultQuery();return fd(s)||(n={...s,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(t){return Object.entries(t).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Bt(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,n,r,s){const{signal:a,...o}=n||{};a&&a.addEventListener("abort",()=>s.abort());const h=setTimeout(()=>s.abort(),r);return this.getRequestClient().fetch.call(void 0,t,{signal:s.signal,...o}).finally(()=>{clearTimeout(h)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r){let s;const a=r==null?void 0:r["retry-after-ms"];if(a){const h=parseFloat(a);Number.isNaN(h)||(s=h)}const o=r==null?void 0:r["retry-after"];if(o&&!s){const h=parseFloat(o);Number.isNaN(h)?s=Date.parse(o)-Date.now():s=h*1e3}if(!(s&&0<=s&&s<60*1e3)){const h=t.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,h)}return await Hi(s),this.makeRequest(t,n-1)}calculateDefaultRetryTimeoutMillis(t,n){const a=n-t,o=Math.min(.5*Math.pow(2,a),8),h=1-Math.random()*.25;return o*h*1e3}getUserAgent(){return`${this.constructor.name}/JS ${ga}`}}class ud{constructor(t,n,r,s){ao.set(this,void 0),a6(this,ao,t),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new Bt("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in t&&typeof n.query=="object")n.query={...n.query,...t.params};else if("url"in t){const r=[...Object.entries(n.query||{}),...t.url.searchParams.entries()];for(const[s,a]of r)t.url.searchParams.set(s,a);n.query=void 0,n.path=t.url.toString()}return await i6(this,ao,"f").requestAPIList(this.constructor,n)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(ao=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const n of t.getPaginatedItems())yield n}}class l6 extends A0{constructor(t,n,r){super(n,async s=>new r(t,s.response,await ld(s),s.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const n of t)yield n}}const c6=e=>new Proxy(Object.fromEntries(e.entries()),{get(t,n){const r=n.toString();return t[r.toLowerCase()]||t[r]}}),u6={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Zn=e=>typeof e=="object"&&e!==null&&!fd(e)&&Object.keys(e).every(t=>hd(u6,t)),f6=()=>{var t;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ga,"X-Stainless-OS":x1(Deno.build.os),"X-Stainless-Arch":g1(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ga,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ga,"X-Stainless-OS":x1(process.platform),"X-Stainless-Arch":g1(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=h6();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ga,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ga,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function h6(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,o=r[3]||0;return{browser:t,version:`${s}.${a}.${o}`}}}return null}const g1=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",x1=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let A1;const d6=()=>A1??(A1=f6()),_6=e=>{try{return JSON.parse(e)}catch{return}},m6=new RegExp("^(?:[a-z]+:)?//","i"),v6=e=>m6.test(e),Hi=e=>new Promise(t=>setTimeout(t,e)),ul=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Bt(`${e} must be an integer`);if(t<0)throw new Bt(`${e} must be a positive integer`);return t},jl=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},io=e=>{var t,n,r,s;if(typeof process<"u")return((t=Oa==null?void 0:Oa[e])==null?void 0:t.trim())??void 0;if(typeof Deno<"u")return(s=(r=(n=Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,e))==null?void 0:s.trim()};function fd(e){if(!e)return!0;for(const t in e)return!1;return!0}function hd(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function E1(e,t){for(const n in t){if(!hd(t,n))continue;const r=n.toLowerCase();if(!r)continue;const s=t[n];s===null?delete e[r]:s!==void 0&&(e[r]=s)}}function Pa(e,...t){typeof process<"u"&&(Oa==null?void 0:Oa.DEBUG)==="true"&&console.log(`OpenAI:DEBUG:${e}`,...t)}const p6=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),b6=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",y6=e=>typeof(e==null?void 0:e.get)=="function",R1=(e,t)=>{var r;const n=t.toLowerCase();if(y6(e)){const s=((r=t[0])==null?void 0:r.toUpperCase())+t.substring(1).replace(/([^\w])(\w)/g,(a,o,h)=>o+h.toUpperCase());for(const a of[t,n,t.toUpperCase(),s]){const o=e.get(a);if(o)return o}}for(const[s,a]of Object.entries(e))if(s.toLowerCase()===n)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${t} header, using the first entry.`),a[0]):a};function fl(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}class Bt extends Error{}class Tn extends Bt{constructor(t,n,r,s){super(`${Tn.makeMessage(t,n,r)}`),this.status=t,this.headers=s,this.request_id=s==null?void 0:s["x-request-id"];const a=n;this.error=a,this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(t,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&s?`${t} ${s}`:t?`${t} status code (no body)`:s||"(no status code or body)"}static generate(t,n,r,s){if(!t)return new E0({message:r,cause:jl(n)});const a=n==null?void 0:n.error;return t===400?new dd(t,a,r,s):t===401?new _d(t,a,r,s):t===403?new md(t,a,r,s):t===404?new vd(t,a,r,s):t===409?new pd(t,a,r,s):t===422?new bd(t,a,r,s):t===429?new yd(t,a,r,s):t>=500?new wd(t,a,r,s):new Tn(t,a,r,s)}}class Tr extends Tn{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0),this.status=void 0}}class E0 extends Tn{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),this.status=void 0,n&&(this.cause=n)}}class xc extends E0{constructor({message:t}={}){super({message:t??"Request timed out."})}}class dd extends Tn{constructor(){super(...arguments),this.status=400}}class _d extends Tn{constructor(){super(...arguments),this.status=401}}class md extends Tn{constructor(){super(...arguments),this.status=403}}class vd extends Tn{constructor(){super(...arguments),this.status=404}}class pd extends Tn{constructor(){super(...arguments),this.status=409}}class bd extends Tn{constructor(){super(...arguments),this.status=422}}class yd extends Tn{constructor(){super(...arguments),this.status=429}}class wd extends Tn{}class Sd extends Bt{constructor(){super("Could not parse response content as the length limit was reached")}}class gd extends Bt{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}const Xl="RFC3986",ql={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},w6="RFC1738",S6=Array.isArray,Hr=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),hl=1024,g6=(e,t,n,r,s)=>{if(e.length===0)return e;let a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});let o="";for(let h=0;h<a.length;h+=hl){const m=a.length>=hl?a.slice(h,h+hl):a,S=[];for(let g=0;g<m.length;++g){let b=m.charCodeAt(g);if(b===45||b===46||b===95||b===126||b>=48&&b<=57||b>=65&&b<=90||b>=97&&b<=122||s===w6&&(b===40||b===41)){S[S.length]=m.charAt(g);continue}if(b<128){S[S.length]=Hr[b];continue}if(b<2048){S[S.length]=Hr[192|b>>6]+Hr[128|b&63];continue}if(b<55296||b>=57344){S[S.length]=Hr[224|b>>12]+Hr[128|b>>6&63]+Hr[128|b&63];continue}g+=1,b=65536+((b&1023)<<10|m.charCodeAt(g)&1023),S[S.length]=Hr[240|b>>18]+Hr[128|b>>12&63]+Hr[128|b>>6&63]+Hr[128|b&63]}o+=S.join("")}return o};function x6(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function M1(e,t){if(S6(e)){const n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}const A6=Object.prototype.hasOwnProperty,xd={brackets(e){return String(e)+"[]"},comma:"comma",indices(e,t){return String(e)+"["+t+"]"},repeat(e){return String(e)}},Xr=Array.isArray,E6=Array.prototype.push,Ad=function(e,t){E6.apply(e,Xr(t)?t:[t])},R6=Date.prototype.toISOString,bn={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:g6,encodeValuesOnly:!1,format:Xl,formatter:ql[Xl],indices:!1,serializeDate(e){return R6.call(e)},skipNulls:!1,strictNullHandling:!1};function M6(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"}const dl={};function Ed(e,t,n,r,s,a,o,h,m,S,g,b,C,V,ne,J,pe,Ne){let K=e,Ce=Ne,de=0,We=!1;for(;(Ce=Ce.get(dl))!==void 0&&!We;){const ze=Ce.get(e);if(de+=1,typeof ze<"u"){if(ze===de)throw new RangeError("Cyclic object value");We=!0}typeof Ce.get(dl)>"u"&&(de=0)}if(typeof S=="function"?K=S(t,K):K instanceof Date?K=C==null?void 0:C(K):n==="comma"&&Xr(K)&&(K=M1(K,function(ze){return ze instanceof Date?C==null?void 0:C(ze):ze})),K===null){if(a)return m&&!J?m(t,bn.encoder,pe,"key",V):t;K=""}if(M6(K)||x6(K)){if(m){const ze=J?t:m(t,bn.encoder,pe,"key",V);return[(ne==null?void 0:ne(ze))+"="+(ne==null?void 0:ne(m(K,bn.encoder,pe,"value",V)))]}return[(ne==null?void 0:ne(t))+"="+(ne==null?void 0:ne(String(K)))]}const Ve=[];if(typeof K>"u")return Ve;let He;if(n==="comma"&&Xr(K))J&&m&&(K=M1(K,m)),He=[{value:K.length>0?K.join(",")||null:void 0}];else if(Xr(S))He=S;else{const ze=Object.keys(K);He=g?ze.sort(g):ze}const Ge=h?String(t).replace(/\./g,"%2E"):String(t),Se=r&&Xr(K)&&K.length===1?Ge+"[]":Ge;if(s&&Xr(K)&&K.length===0)return Se+"[]";for(let ze=0;ze<He.length;++ze){const nt=He[ze],Je=typeof nt=="object"&&typeof nt.value<"u"?nt.value:K[nt];if(o&&Je===null)continue;const bt=b&&h?nt.replace(/\./g,"%2E"):nt,_t=Xr(K)?typeof n=="function"?n(Se,bt):Se:Se+(b?"."+bt:"["+bt+"]");Ne.set(e,de);const Xe=new WeakMap;Xe.set(dl,Ne),Ad(Ve,Ed(Je,_t,n,r,s,a,o,h,n==="comma"&&J&&Xr(K)?null:m,S,g,b,C,V,ne,J,pe,Xe))}return Ve}function T6(e=bn){if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");const t=e.charset||bn.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=Xl;if(typeof e.format<"u"){if(!A6.call(ql,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const r=ql[n];let s=bn.filter;(typeof e.filter=="function"||Xr(e.filter))&&(s=e.filter);let a;if(e.arrayFormat&&e.arrayFormat in xd?a=e.arrayFormat:"indices"in e?a=e.indices?"indices":"repeat":a=bn.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof e.allowDots>"u"?e.encodeDotInKeys?!0:bn.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:bn.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:bn.allowEmptyArrays,arrayFormat:a,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:bn.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?bn.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:bn.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:bn.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:bn.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:bn.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:bn.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:bn.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:bn.strictNullHandling}}function C6(e,t={}){let n=e;const r=T6(t);let s,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):Xr(r.filter)&&(a=r.filter,s=a);const o=[];if(typeof n!="object"||n===null)return"";const h=xd[r.arrayFormat],m=h==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const S=new WeakMap;for(let C=0;C<s.length;++C){const V=s[C];r.skipNulls&&n[V]===null||Ad(o,Ed(n[V],V,h,m,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,S))}const g=o.join(r.delimiter);let b=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),g.length>0?b+g:""}class Ac extends ud{constructor(t,n,r,s){super(t,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Pr extends ud{constructor(t,n,r,s){super(t,n,r,s),this.data=r.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const n=Object.fromEntries(t.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var r;const t=this.getPaginatedItems();if(!t.length)return null;const n=(r=t[t.length-1])==null?void 0:r.id;return n?{params:{after:n}}:null}}class $t{constructor(t){this._client=t}}let Co=class extends $t{create(t,n){return this._client.post("/chat/completions",{body:t,...n,stream:t.stream??!1})}};Co||(Co={});let Bo=class extends $t{constructor(){super(...arguments),this.completions=new Co(this._client)}};(function(e){e.Completions=Co})(Bo||(Bo={}));class Io extends $t{create(t,n){return this._client.post("/audio/speech",{body:t,...n,__binaryResponse:!0})}}Io||(Io={});class Oo extends $t{create(t,n){return this._client.post("/audio/transcriptions",$a({body:t,...n}))}}Oo||(Oo={});class Po extends $t{create(t,n){return this._client.post("/audio/translations",$a({body:t,...n}))}}Po||(Po={});let ko=class extends $t{constructor(){super(...arguments),this.transcriptions=new Oo(this._client),this.translations=new Po(this._client),this.speech=new Io(this._client)}};(function(e){e.Transcriptions=Oo,e.Translations=Po,e.Speech=Io})(ko||(ko={}));class Lo extends $t{create(t,n){return this._client.post("/batches",{body:t,...n})}retrieve(t,n){return this._client.get(`/batches/${t}`,n)}list(t={},n){return Zn(t)?this.list({},t):this._client.getAPIList("/batches",Ec,{query:t,...n})}cancel(t,n){return this._client.post(`/batches/${t}/cancel`,n)}}class Ec extends Pr{}(function(e){e.BatchesPage=Ec})(Lo||(Lo={}));class No extends $t{create(t,n){return this._client.post("/assistants",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/assistants/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/assistants/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(t={},n){return Zn(t)?this.list({},t):this._client.getAPIList("/assistants",Rc,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(t,n){return this._client.delete(`/assistants/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Rc extends Pr{}(function(e){e.AssistantsPage=Rc})(No||(No={}));function T1(e){return typeof e.parse=="function"}const ka=e=>(e==null?void 0:e.role)==="assistant",Rd=e=>(e==null?void 0:e.role)==="function",Md=e=>(e==null?void 0:e.role)==="tool";var Ar=function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},rn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Ul,_o,mo,ai,ii,vo,oi,ss,li,Fo,$o,xa,Td;class Cd{constructor(){Ul.add(this),this.controller=new AbortController,_o.set(this,void 0),mo.set(this,()=>{}),ai.set(this,()=>{}),ii.set(this,void 0),vo.set(this,()=>{}),oi.set(this,()=>{}),ss.set(this,{}),li.set(this,!1),Fo.set(this,!1),$o.set(this,!1),xa.set(this,!1),Ar(this,_o,new Promise((t,n)=>{Ar(this,mo,t,"f"),Ar(this,ai,n,"f")}),"f"),Ar(this,ii,new Promise((t,n)=>{Ar(this,vo,t,"f"),Ar(this,oi,n,"f")}),"f"),rn(this,_o,"f").catch(()=>{}),rn(this,ii,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},rn(this,Ul,"m",Td).bind(this))},0)}_connected(){this.ended||(rn(this,mo,"f").call(this),this._emit("connect"))}get ended(){return rn(this,li,"f")}get errored(){return rn(this,Fo,"f")}get aborted(){return rn(this,$o,"f")}abort(){this.controller.abort()}on(t,n){return(rn(this,ss,"f")[t]||(rn(this,ss,"f")[t]=[])).push({listener:n}),this}off(t,n){const r=rn(this,ss,"f")[t];if(!r)return this;const s=r.findIndex(a=>a.listener===n);return s>=0&&r.splice(s,1),this}once(t,n){return(rn(this,ss,"f")[t]||(rn(this,ss,"f")[t]=[])).push({listener:n,once:!0}),this}emitted(t){return new Promise((n,r)=>{Ar(this,xa,!0,"f"),t!=="error"&&this.once("error",r),this.once(t,n)})}async done(){Ar(this,xa,!0,"f"),await rn(this,ii,"f")}_emit(t,...n){if(rn(this,li,"f"))return;t==="end"&&(Ar(this,li,!0,"f"),rn(this,vo,"f").call(this));const r=rn(this,ss,"f")[t];if(r&&(rn(this,ss,"f")[t]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),t==="abort"){const s=n[0];!rn(this,xa,"f")&&!(r!=null&&r.length)&&Promise.reject(s),rn(this,ai,"f").call(this,s),rn(this,oi,"f").call(this,s),this._emit("end");return}if(t==="error"){const s=n[0];!rn(this,xa,"f")&&!(r!=null&&r.length)&&Promise.reject(s),rn(this,ai,"f").call(this,s),rn(this,oi,"f").call(this,s),this._emit("end")}}_emitFinal(){}}_o=new WeakMap,mo=new WeakMap,ai=new WeakMap,ii=new WeakMap,vo=new WeakMap,oi=new WeakMap,ss=new WeakMap,li=new WeakMap,Fo=new WeakMap,$o=new WeakMap,xa=new WeakMap,Ul=new WeakSet,Td=function(t){if(Ar(this,Fo,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new Tr),t instanceof Tr)return Ar(this,$o,!0,"f"),this._emit("abort",t);if(t instanceof Bt)return this._emit("error",t);if(t instanceof Error){const n=new Bt(t.message);return n.cause=t,this._emit("error",n)}return this._emit("error",new Bt(String(t)))};function Bd(e){return(e==null?void 0:e.$brand)==="auto-parseable-response-format"}function Di(e){return(e==null?void 0:e.$brand)==="auto-parseable-tool"}function B6(e,t){return!t||!Id(t)?{...e,choices:e.choices.map(n=>({...n,message:{...n.message,parsed:null,tool_calls:n.message.tool_calls??[]}}))}:Mc(e,t)}function Mc(e,t){const n=e.choices.map(r=>{var s;if(r.finish_reason==="length")throw new Sd;if(r.finish_reason==="content_filter")throw new gd;return{...r,message:{...r.message,tool_calls:((s=r.message.tool_calls)==null?void 0:s.map(a=>O6(t,a)))??[],parsed:r.message.content&&!r.message.refusal?I6(t,r.message.content):null}}});return{...e,choices:n}}function I6(e,t){var n,r;return((n=e.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=e.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function O6(e,t){var r;const n=(r=e.tools)==null?void 0:r.find(s=>{var a;return((a=s.function)==null?void 0:a.name)===t.function.name});return{...t,function:{...t.function,parsed_arguments:Di(n)?n.$parseRaw(t.function.arguments):n!=null&&n.function.strict?JSON.parse(t.function.arguments):null}}}function P6(e,t){var r;if(!e)return!1;const n=(r=e.tools)==null?void 0:r.find(s=>{var a;return((a=s.function)==null?void 0:a.name)===t.function.name});return Di(n)||(n==null?void 0:n.function.strict)||!1}function Id(e){var t;return Bd(e.response_format)?!0:((t=e.tools)==null?void 0:t.some(n=>Di(n)||n.type==="function"&&n.function.strict===!0))??!1}function k6(e){for(const t of e??[]){if(t.type!=="function")throw new Bt(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(t.function.strict!==!0)throw new Bt(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Kn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Pn,Yl,Vo,Kl,Wl,Gl,Od,zl;const C1=10;class Pd extends Cd{constructor(){super(...arguments),Pn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(t){var r;this._chatCompletions.push(t),this._emit("chatCompletion",t);const n=(r=t.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),t}_addMessage(t,n=!0){if("content"in t||(t.content=null),this.messages.push(t),n){if(this._emit("message",t),(Rd(t)||Md(t))&&t.content)this._emit("functionCallResult",t.content);else if(ka(t)&&t.function_call)this._emit("functionCall",t.function_call);else if(ka(t)&&t.tool_calls)for(const r of t.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new Bt("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),Kn(this,Pn,"m",Yl).call(this)}async finalMessage(){return await this.done(),Kn(this,Pn,"m",Vo).call(this)}async finalFunctionCall(){return await this.done(),Kn(this,Pn,"m",Kl).call(this)}async finalFunctionCallResult(){return await this.done(),Kn(this,Pn,"m",Wl).call(this)}async totalUsage(){return await this.done(),Kn(this,Pn,"m",Gl).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const n=Kn(this,Pn,"m",Vo).call(this);n&&this._emit("finalMessage",n);const r=Kn(this,Pn,"m",Yl).call(this);r&&this._emit("finalContent",r);const s=Kn(this,Pn,"m",Kl).call(this);s&&this._emit("finalFunctionCall",s);const a=Kn(this,Pn,"m",Wl).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",Kn(this,Pn,"m",Gl).call(this))}async _createChatCompletion(t,n,r){const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),Kn(this,Pn,"m",Od).call(this,n);const a=await t.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Mc(a,n))}async _runChatCompletion(t,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(t,n,r)}async _runFunctions(t,n,r){var C;const s="function",{function_call:a="auto",stream:o,...h}=n,m=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:S=C1}=r||{},g={};for(const V of n.functions)g[V.name||V.function.name]=V;const b=n.functions.map(V=>({name:V.name||V.function.name,parameters:V.parameters,description:V.description}));for(const V of n.messages)this._addMessage(V,!1);for(let V=0;V<S;++V){const J=(C=(await this._createChatCompletion(t,{...h,function_call:a,functions:b,messages:[...this.messages]},r)).choices[0])==null?void 0:C.message;if(!J)throw new Bt("missing message in ChatCompletion response");if(!J.function_call)return;const{name:pe,arguments:Ne}=J.function_call,K=g[pe];if(K){if(m&&m!==pe){const Ve=`Invalid function_call: ${JSON.stringify(pe)}. ${JSON.stringify(m)} requested. Please try again`;this._addMessage({role:s,name:pe,content:Ve});continue}}else{const Ve=`Invalid function_call: ${JSON.stringify(pe)}. Available options are: ${b.map(He=>JSON.stringify(He.name)).join(", ")}. Please try again`;this._addMessage({role:s,name:pe,content:Ve});continue}let Ce;try{Ce=T1(K)?await K.parse(Ne):Ne}catch(Ve){this._addMessage({role:s,name:pe,content:Ve instanceof Error?Ve.message:String(Ve)});continue}const de=await K.function(Ce,this),We=Kn(this,Pn,"m",zl).call(this,de);if(this._addMessage({role:s,name:pe,content:We}),m)return}}async _runTools(t,n,r){var V,ne,J;const s="tool",{tool_choice:a="auto",stream:o,...h}=n,m=typeof a!="string"&&((V=a==null?void 0:a.function)==null?void 0:V.name),{maxChatCompletions:S=C1}=r||{},g=n.tools.map(pe=>{if(Di(pe)){if(!pe.$callback)throw new Bt("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:pe.$callback,name:pe.function.name,description:pe.function.description||"",parameters:pe.function.parameters,parse:pe.$parseRaw,strict:!0}}}return pe}),b={};for(const pe of g)pe.type==="function"&&(b[pe.function.name||pe.function.function.name]=pe.function);const C="tools"in n?g.map(pe=>pe.type==="function"?{type:"function",function:{name:pe.function.name||pe.function.function.name,parameters:pe.function.parameters,description:pe.function.description,strict:pe.function.strict}}:pe):void 0;for(const pe of n.messages)this._addMessage(pe,!1);for(let pe=0;pe<S;++pe){const K=(ne=(await this._createChatCompletion(t,{...h,tool_choice:a,tools:C,messages:[...this.messages]},r)).choices[0])==null?void 0:ne.message;if(!K)throw new Bt("missing message in ChatCompletion response");if(!((J=K.tool_calls)!=null&&J.length))return;for(const Ce of K.tool_calls){if(Ce.type!=="function")continue;const de=Ce.id,{name:We,arguments:Ve}=Ce.function,He=b[We];if(He){if(m&&m!==We){const nt=`Invalid tool_call: ${JSON.stringify(We)}. ${JSON.stringify(m)} requested. Please try again`;this._addMessage({role:s,tool_call_id:de,content:nt});continue}}else{const nt=`Invalid tool_call: ${JSON.stringify(We)}. Available options are: ${Object.keys(b).map(Je=>JSON.stringify(Je)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:de,content:nt});continue}let Ge;try{Ge=T1(He)?await He.parse(Ve):Ve}catch(nt){const Je=nt instanceof Error?nt.message:String(nt);this._addMessage({role:s,tool_call_id:de,content:Je});continue}const Se=await He.function(Ge,this),ze=Kn(this,Pn,"m",zl).call(this,Se);if(this._addMessage({role:s,tool_call_id:de,content:ze}),m)return}}}}Pn=new WeakSet,Yl=function(){return Kn(this,Pn,"m",Vo).call(this).content??null},Vo=function(){let t=this.messages.length;for(;t-- >0;){const n=this.messages[t];if(ka(n)){const{function_call:r,...s}=n,a={...s,content:n.content??null,refusal:n.refusal??null};return r&&(a.function_call=r),a}}throw new Bt("stream ended without producing a ChatCompletionMessage with role=assistant")},Kl=function(){var t,n;for(let r=this.messages.length-1;r>=0;r--){const s=this.messages[r];if(ka(s)&&(s!=null&&s.function_call))return s.function_call;if(ka(s)&&((t=s==null?void 0:s.tool_calls)!=null&&t.length))return(n=s.tool_calls.at(-1))==null?void 0:n.function}},Wl=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(Rd(n)&&n.content!=null||Md(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var s;return r.role==="assistant"&&((s=r.tool_calls)==null?void 0:s.some(a=>a.type==="function"&&a.id===n.tool_call_id))}))return n.content}},Gl=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(t.completion_tokens+=n.completion_tokens,t.prompt_tokens+=n.prompt_tokens,t.total_tokens+=n.total_tokens);return t},Od=function(t){if(t.n!=null&&t.n>1)throw new Bt("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},zl=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class Pi extends Pd{static runFunctions(t,n,r){const s=new Pi,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(t,n,a)),s}static runTools(t,n,r){const s=new Pi,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(t,n,a)),s}_addMessage(t,n=!0){super._addMessage(t,n),ka(t)&&t.content&&this._emit("content",t.content)}}const kd=1,Ld=2,Nd=4,Fd=8,$d=16,Vd=32,Hd=64,Dd=128,jd=256,Xd=Dd|jd,qd=$d|Vd|Xd|Hd,Ud=kd|Ld|qd,Yd=Nd|Fd,L6=Ud|Yd,xn={STR:kd,NUM:Ld,ARR:Nd,OBJ:Fd,NULL:$d,BOOL:Vd,NAN:Hd,INFINITY:Dd,MINUS_INFINITY:jd,INF:Xd,SPECIAL:qd,ATOM:Ud,COLLECTION:Yd,ALL:L6};class N6 extends Error{}class F6 extends Error{}function $6(e,t=xn.ALL){if(typeof e!="string")throw new TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw new Error(`${e} is empty`);return V6(e.trim(),t)}const V6=(e,t)=>{const n=e.length;let r=0;const s=C=>{throw new N6(`${C} at position ${r}`)},a=C=>{throw new F6(`${C} at position ${r}`)},o=()=>(b(),r>=n&&s("Unexpected end of input"),e[r]==='"'?h():e[r]==="{"?m():e[r]==="["?S():e.substring(r,r+4)==="null"||xn.NULL&t&&n-r<4&&"null".startsWith(e.substring(r))?(r+=4,null):e.substring(r,r+4)==="true"||xn.BOOL&t&&n-r<4&&"true".startsWith(e.substring(r))?(r+=4,!0):e.substring(r,r+5)==="false"||xn.BOOL&t&&n-r<5&&"false".startsWith(e.substring(r))?(r+=5,!1):e.substring(r,r+8)==="Infinity"||xn.INFINITY&t&&n-r<8&&"Infinity".startsWith(e.substring(r))?(r+=8,1/0):e.substring(r,r+9)==="-Infinity"||xn.MINUS_INFINITY&t&&1<n-r&&n-r<9&&"-Infinity".startsWith(e.substring(r))?(r+=9,-1/0):e.substring(r,r+3)==="NaN"||xn.NAN&t&&n-r<3&&"NaN".startsWith(e.substring(r))?(r+=3,NaN):g()),h=()=>{const C=r;let V=!1;for(r++;r<n&&(e[r]!=='"'||V&&e[r-1]==="\\");)V=e[r]==="\\"?!V:!1,r++;if(e.charAt(r)=='"')try{return JSON.parse(e.substring(C,++r-Number(V)))}catch(ne){a(String(ne))}else if(xn.STR&t)try{return JSON.parse(e.substring(C,r-Number(V))+'"')}catch{return JSON.parse(e.substring(C,e.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},m=()=>{r++,b();const C={};try{for(;e[r]!=="}";){if(b(),r>=n&&xn.OBJ&t)return C;const V=h();b(),r++;try{const ne=o();Object.defineProperty(C,V,{value:ne,writable:!0,enumerable:!0,configurable:!0})}catch(ne){if(xn.OBJ&t)return C;throw ne}b(),e[r]===","&&r++}}catch{if(xn.OBJ&t)return C;s("Expected '}' at end of object")}return r++,C},S=()=>{r++;const C=[];try{for(;e[r]!=="]";)C.push(o()),b(),e[r]===","&&r++}catch{if(xn.ARR&t)return C;s("Expected ']' at end of array")}return r++,C},g=()=>{if(r===0){e==="-"&&xn.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e)}catch(V){if(xn.NUM&t)try{return e[e.length-1]==="."?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch{}a(String(V))}}const C=r;for(e[r]==="-"&&r++;e[r]&&!",]}".includes(e[r]);)r++;r==n&&!(xn.NUM&t)&&s("Unterminated number literal");try{return JSON.parse(e.substring(C,r))}catch{e.substring(C,r)==="-"&&xn.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e.substring(C,e.lastIndexOf("e")))}catch(ne){a(String(ne))}}},b=()=>{for(;r<n&&` 
\r	`.includes(e[r]);)r++};return o()},B1=e=>$6(e,xn.ALL^xn.NUM);var ba=function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},Dt=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},pn,rs,ya,Ss,_l,oo,ml,vl,pl,lo,bl,I1;class ki extends Pd{constructor(t){super(),pn.add(this),rs.set(this,void 0),ya.set(this,void 0),Ss.set(this,void 0),ba(this,rs,t,"f"),ba(this,ya,[],"f")}get currentChatCompletionSnapshot(){return Dt(this,Ss,"f")}static fromReadableStream(t){const n=new ki(null);return n._run(()=>n._fromReadableStream(t)),n}static createChatCompletion(t,n,r){const s=new ki(n);return s._run(()=>s._runChatCompletion(t,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(t,n,r){var o;super._createChatCompletion;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),Dt(this,pn,"m",_l).call(this);const a=await t.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const h of a)Dt(this,pn,"m",ml).call(this,h);if((o=a.controller.signal)!=null&&o.aborted)throw new Tr;return this._addChatCompletion(Dt(this,pn,"m",lo).call(this))}async _fromReadableStream(t,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Dt(this,pn,"m",_l).call(this),this._connected();const s=Yr.fromReadableStream(t,this.controller);let a;for await(const h of s)a&&a!==h.id&&this._addChatCompletion(Dt(this,pn,"m",lo).call(this)),Dt(this,pn,"m",ml).call(this,h),a=h.id;if((o=s.controller.signal)!=null&&o.aborted)throw new Tr;return this._addChatCompletion(Dt(this,pn,"m",lo).call(this))}[(rs=new WeakMap,ya=new WeakMap,Ss=new WeakMap,pn=new WeakSet,_l=function(){this.ended||ba(this,Ss,void 0,"f")},oo=function(n){let r=Dt(this,ya,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Dt(this,ya,"f")[n.index]=r,r)},ml=function(n){var s,a,o,h,m,S,g,b,C,V,ne,J,pe,Ne,K;if(this.ended)return;const r=Dt(this,pn,"m",I1).call(this,n);this._emit("chunk",n,r);for(const Ce of n.choices){const de=r.choices[Ce.index];Ce.delta.content!=null&&((s=de.message)==null?void 0:s.role)==="assistant"&&((a=de.message)!=null&&a.content)&&(this._emit("content",Ce.delta.content,de.message.content),this._emit("content.delta",{delta:Ce.delta.content,snapshot:de.message.content,parsed:de.message.parsed})),Ce.delta.refusal!=null&&((o=de.message)==null?void 0:o.role)==="assistant"&&((h=de.message)!=null&&h.refusal)&&this._emit("refusal.delta",{delta:Ce.delta.refusal,snapshot:de.message.refusal}),((m=Ce.logprobs)==null?void 0:m.content)!=null&&((S=de.message)==null?void 0:S.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(g=Ce.logprobs)==null?void 0:g.content,snapshot:((b=de.logprobs)==null?void 0:b.content)??[]}),((C=Ce.logprobs)==null?void 0:C.refusal)!=null&&((V=de.message)==null?void 0:V.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(ne=Ce.logprobs)==null?void 0:ne.refusal,snapshot:((J=de.logprobs)==null?void 0:J.refusal)??[]});const We=Dt(this,pn,"m",oo).call(this,de);de.finish_reason&&(Dt(this,pn,"m",pl).call(this,de),We.current_tool_call_index!=null&&Dt(this,pn,"m",vl).call(this,de,We.current_tool_call_index));for(const Ve of Ce.delta.tool_calls??[])We.current_tool_call_index!==Ve.index&&(Dt(this,pn,"m",pl).call(this,de),We.current_tool_call_index!=null&&Dt(this,pn,"m",vl).call(this,de,We.current_tool_call_index)),We.current_tool_call_index=Ve.index;for(const Ve of Ce.delta.tool_calls??[]){const He=(pe=de.message.tool_calls)==null?void 0:pe[Ve.index];He!=null&&He.type&&((He==null?void 0:He.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(Ne=He.function)==null?void 0:Ne.name,index:Ve.index,arguments:He.function.arguments,parsed_arguments:He.function.parsed_arguments,arguments_delta:((K=Ve.function)==null?void 0:K.arguments)??""}):(He==null||He.type,void 0))}}},vl=function(n,r){var o,h,m;if(Dt(this,pn,"m",oo).call(this,n).done_tool_calls.has(r))return;const a=(o=n.message.tool_calls)==null?void 0:o[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const S=(m=(h=Dt(this,rs,"f"))==null?void 0:h.tools)==null?void 0:m.find(g=>g.type==="function"&&g.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:Di(S)?S.$parseRaw(a.function.arguments):S!=null&&S.function.strict?JSON.parse(a.function.arguments):null})}else a.type},pl=function(n){var s,a;const r=Dt(this,pn,"m",oo).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const o=Dt(this,pn,"m",bl).call(this);this._emit("content.done",{content:n.message.content,parsed:o?o.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(s=n.logprobs)!=null&&s.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(a=n.logprobs)!=null&&a.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},lo=function(){if(this.ended)throw new Bt("stream has ended, this shouldn't happen");const n=Dt(this,Ss,"f");if(!n)throw new Bt("request ended without sending any chunks");return ba(this,Ss,void 0,"f"),ba(this,ya,[],"f"),H6(n,Dt(this,rs,"f"))},bl=function(){var r;const n=(r=Dt(this,rs,"f"))==null?void 0:r.response_format;return Bd(n)?n:null},I1=function(n){var r,s,a,o;let h=Dt(this,Ss,"f");const{choices:m,...S}=n;h?Object.assign(h,S):h=ba(this,Ss,{...S,choices:[]},"f");for(const{delta:g,finish_reason:b,index:C,logprobs:V=null,...ne}of n.choices){let J=h.choices[C];if(J||(J=h.choices[C]={finish_reason:b,index:C,message:{},logprobs:V,...ne}),V)if(!J.logprobs)J.logprobs=Object.assign({},V);else{const{content:Ve,refusal:He,...Ge}=V;Object.assign(J.logprobs,Ge),Ve&&((r=J.logprobs).content??(r.content=[]),J.logprobs.content.push(...Ve)),He&&((s=J.logprobs).refusal??(s.refusal=[]),J.logprobs.refusal.push(...He))}if(b&&(J.finish_reason=b,Dt(this,rs,"f")&&Id(Dt(this,rs,"f")))){if(b==="length")throw new Sd;if(b==="content_filter")throw new gd}if(Object.assign(J,ne),!g)continue;const{content:pe,refusal:Ne,function_call:K,role:Ce,tool_calls:de,...We}=g;if(Object.assign(J.message,We),Ne&&(J.message.refusal=(J.message.refusal||"")+Ne),Ce&&(J.message.role=Ce),K&&(J.message.function_call?(K.name&&(J.message.function_call.name=K.name),K.arguments&&((a=J.message.function_call).arguments??(a.arguments=""),J.message.function_call.arguments+=K.arguments)):J.message.function_call=K),pe&&(J.message.content=(J.message.content||"")+pe,!J.message.refusal&&Dt(this,pn,"m",bl).call(this)&&(J.message.parsed=B1(J.message.content))),de){J.message.tool_calls||(J.message.tool_calls=[]);for(const{index:Ve,id:He,type:Ge,function:Se,...ze}of de){const nt=(o=J.message.tool_calls)[Ve]??(o[Ve]={});Object.assign(nt,ze),He&&(nt.id=He),Ge&&(nt.type=Ge),Se&&(nt.function??(nt.function={name:Se.name??"",arguments:""})),Se!=null&&Se.name&&(nt.function.name=Se.name),Se!=null&&Se.arguments&&(nt.function.arguments+=Se.arguments,P6(Dt(this,rs,"f"),nt)&&(nt.function.parsed_arguments=B1(nt.function.arguments)))}}}return h},Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("chunk",s=>{const a=n.shift();a?a.resolve(s):t.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,o)=>n.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Yr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function H6(e,t){const{id:n,choices:r,created:s,model:a,system_fingerprint:o,...h}=e,m={...h,id:n,choices:r.map(({message:S,finish_reason:g,index:b,logprobs:C,...V})=>{if(!g)throw new Bt(`missing finish_reason for choice ${b}`);const{content:ne=null,function_call:J,tool_calls:pe,...Ne}=S,K=S.role;if(!K)throw new Bt(`missing role for choice ${b}`);if(J){const{arguments:Ce,name:de}=J;if(Ce==null)throw new Bt(`missing function_call.arguments for choice ${b}`);if(!de)throw new Bt(`missing function_call.name for choice ${b}`);return{...V,message:{content:ne,function_call:{arguments:Ce,name:de},role:K,refusal:S.refusal??null},finish_reason:g,index:b,logprobs:C}}return pe?{...V,index:b,finish_reason:g,logprobs:C,message:{...Ne,role:K,content:ne,refusal:S.refusal??null,tool_calls:pe.map((Ce,de)=>{const{function:We,type:Ve,id:He,...Ge}=Ce,{arguments:Se,name:ze,...nt}=We||{};if(He==null)throw new Bt(`missing choices[${b}].tool_calls[${de}].id
${co(e)}`);if(Ve==null)throw new Bt(`missing choices[${b}].tool_calls[${de}].type
${co(e)}`);if(ze==null)throw new Bt(`missing choices[${b}].tool_calls[${de}].function.name
${co(e)}`);if(Se==null)throw new Bt(`missing choices[${b}].tool_calls[${de}].function.arguments
${co(e)}`);return{...Ge,id:He,type:Ve,function:{...nt,name:ze,arguments:Se}}})}}:{...V,message:{...Ne,content:ne,role:K,refusal:S.refusal??null},finish_reason:g,index:b,logprobs:C}}),created:s,model:a,object:"chat.completion",...o?{system_fingerprint:o}:{}};return B6(m,t)}function co(e){return JSON.stringify(e)}class La extends ki{static fromReadableStream(t){const n=new La(null);return n._run(()=>n._fromReadableStream(t)),n}static runFunctions(t,n,r){const s=new La(null),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(t,n,a)),s}static runTools(t,n,r){const s=new La(n),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(t,n,a)),s}}let Kd=class extends $t{parse(t,n){return k6(t.tools),this._client.chat.completions.create(t,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>Mc(r,t))}runFunctions(t,n){return t.stream?La.runFunctions(this._client,t,n):Pi.runFunctions(this._client,t,n)}runTools(t,n){return t.stream?La.runTools(this._client,t,n):Pi.runTools(this._client,t,n)}stream(t,n){return ki.createChatCompletion(this._client,t,n)}};class Ho extends $t{constructor(){super(...arguments),this.completions=new Kd(this._client)}}(function(e){e.Completions=Kd})(Ho||(Ho={}));var ft=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},or=function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},En,Ql,qr,po,Rr,Js,Ea,Zs,Do,lr,bo,yo,xi,ci,ui,O1,P1,k1,L1,N1,F1,$1;class Cr extends Cd{constructor(){super(...arguments),En.add(this),Ql.set(this,[]),qr.set(this,{}),po.set(this,{}),Rr.set(this,void 0),Js.set(this,void 0),Ea.set(this,void 0),Zs.set(this,void 0),Do.set(this,void 0),lr.set(this,void 0),bo.set(this,void 0),yo.set(this,void 0),xi.set(this,void 0)}[(Ql=new WeakMap,qr=new WeakMap,po=new WeakMap,Rr=new WeakMap,Js=new WeakMap,Ea=new WeakMap,Zs=new WeakMap,Do=new WeakMap,lr=new WeakMap,bo=new WeakMap,yo=new WeakMap,xi=new WeakMap,En=new WeakSet,Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):t.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,o)=>n.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const n=new Cr;return n._run(()=>n._fromReadableStream(t)),n}async _fromReadableStream(t,n){var a;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Yr.fromReadableStream(t,this.controller);for await(const o of s)ft(this,En,"m",ci).call(this,o);if((a=s.controller.signal)!=null&&a.aborted)throw new Tr;return this._addRun(ft(this,En,"m",ui).call(this))}toReadableStream(){return new Yr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,n,r,s,a){const o=new Cr;return o._run(()=>o._runToolAssistantStream(t,n,r,s,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(t,n,r,s,a){var S;const o=a==null?void 0:a.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const h={...s,stream:!0},m=await t.submitToolOutputs(n,r,h,{...a,signal:this.controller.signal});this._connected();for await(const g of m)ft(this,En,"m",ci).call(this,g);if((S=m.controller.signal)!=null&&S.aborted)throw new Tr;return this._addRun(ft(this,En,"m",ui).call(this))}static createThreadAssistantStream(t,n,r){const s=new Cr;return s._run(()=>s._threadAssistantStream(t,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(t,n,r,s){const a=new Cr;return a._run(()=>a._runAssistantStream(t,n,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return ft(this,bo,"f")}currentRun(){return ft(this,yo,"f")}currentMessageSnapshot(){return ft(this,Rr,"f")}currentRunStepSnapshot(){return ft(this,xi,"f")}async finalRunSteps(){return await this.done(),Object.values(ft(this,qr,"f"))}async finalMessages(){return await this.done(),Object.values(ft(this,po,"f"))}async finalRun(){if(await this.done(),!ft(this,Js,"f"))throw Error("Final run was not received.");return ft(this,Js,"f")}async _createThreadAssistantStream(t,n,r){var h;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},o=await t.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const m of o)ft(this,En,"m",ci).call(this,m);if((h=o.controller.signal)!=null&&h.aborted)throw new Tr;return this._addRun(ft(this,En,"m",ui).call(this))}async _createAssistantStream(t,n,r,s){var m;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},h=await t.create(n,o,{...s,signal:this.controller.signal});this._connected();for await(const S of h)ft(this,En,"m",ci).call(this,S);if((m=h.controller.signal)!=null&&m.aborted)throw new Tr;return this._addRun(ft(this,En,"m",ui).call(this))}static accumulateDelta(t,n){for(const[r,s]of Object.entries(n)){if(!t.hasOwnProperty(r)){t[r]=s;continue}let a=t[r];if(a==null){t[r]=s;continue}if(r==="index"||r==="type"){t[r]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(fl(a)&&fl(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(o=>typeof o=="string"||typeof o=="number")){a.push(...s);continue}for(const o of s){if(!fl(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const h=o.index;if(h==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof h!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${h}`);const m=a[h];m==null?a.push(o):a[h]=this.accumulateDelta(m,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${a}`);t[r]=a}return t}_addRun(t){return t}async _threadAssistantStream(t,n,r){return await this._createThreadAssistantStream(n,t,r)}async _runAssistantStream(t,n,r,s){return await this._createAssistantStream(n,t,r,s)}async _runToolAssistantStream(t,n,r,s,a){return await this._createToolAssistantStream(r,t,n,s,a)}}ci=function(t){if(!this.ended)switch(or(this,bo,t,"f"),ft(this,En,"m",k1).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ft(this,En,"m",$1).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ft(this,En,"m",P1).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ft(this,En,"m",O1).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},ui=function(){if(this.ended)throw new Bt("stream has ended, this shouldn't happen");if(!ft(this,Js,"f"))throw Error("Final run has not been received");return ft(this,Js,"f")},O1=function(t){const[n,r]=ft(this,En,"m",N1).call(this,t,ft(this,Rr,"f"));or(this,Rr,n,"f"),ft(this,po,"f")[n.id]=n;for(const s of r){const a=n.content[s.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,n),t.data.delta.content)for(const s of t.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,o=n.content[s.index];if(o&&o.type=="text")this._emit("textDelta",a,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=ft(this,Ea,"f")){if(ft(this,Zs,"f"))switch(ft(this,Zs,"f").type){case"text":this._emit("textDone",ft(this,Zs,"f").text,ft(this,Rr,"f"));break;case"image_file":this._emit("imageFileDone",ft(this,Zs,"f").image_file,ft(this,Rr,"f"));break}or(this,Ea,s.index,"f")}or(this,Zs,n.content[s.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(ft(this,Ea,"f")!==void 0){const s=t.data.content[ft(this,Ea,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,ft(this,Rr,"f"));break;case"text":this._emit("textDone",s.text,ft(this,Rr,"f"));break}}ft(this,Rr,"f")&&this._emit("messageDone",t.data),or(this,Rr,void 0,"f")}},P1=function(t){const n=ft(this,En,"m",L1).call(this,t);switch(or(this,xi,n,"f"),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const r=t.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==ft(this,Do,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(ft(this,lr,"f")&&this._emit("toolCallDone",ft(this,lr,"f")),or(this,Do,a.index,"f"),or(this,lr,n.step_details.tool_calls[a.index],"f"),ft(this,lr,"f")&&this._emit("toolCallCreated",ft(this,lr,"f")));this._emit("runStepDelta",t.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":or(this,xi,void 0,"f"),t.data.step_details.type=="tool_calls"&&ft(this,lr,"f")&&(this._emit("toolCallDone",ft(this,lr,"f")),or(this,lr,void 0,"f")),this._emit("runStepDone",t.data,n);break}},k1=function(t){ft(this,Ql,"f").push(t),this._emit("event",t)},L1=function(t){switch(t.event){case"thread.run.step.created":return ft(this,qr,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let n=ft(this,qr,"f")[t.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=t.data;if(r.delta){const s=Cr.accumulateDelta(n,r.delta);ft(this,qr,"f")[t.data.id]=s}return ft(this,qr,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ft(this,qr,"f")[t.data.id]=t.data;break}if(ft(this,qr,"f")[t.data.id])return ft(this,qr,"f")[t.data.id];throw new Error("No snapshot available")},N1=function(t,n){let r=[];switch(t.event){case"thread.message.created":return[t.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=t.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in n.content){let o=n.content[a.index];n.content[a.index]=ft(this,En,"m",F1).call(this,a,o)}else n.content[a.index]=a,r.push(a);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},F1=function(t,n){return Cr.accumulateDelta(n,t)},$1=function(t){switch(or(this,yo,t.data,"f"),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":or(this,Js,t.data,"f"),ft(this,lr,"f")&&(this._emit("toolCallDone",ft(this,lr,"f")),or(this,lr,void 0,"f"));break}};class jo extends $t{create(t,n,r){return this._client.post(`/threads/${t}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/threads/${t}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(t,n,r,s){return this._client.post(`/threads/${t}/messages/${n}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(t,n={},r){return Zn(n)?this.list(t,{},n):this._client.getAPIList(`/threads/${t}/messages`,Tc,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n,r){return this._client.delete(`/threads/${t}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Tc extends Pr{}(function(e){e.MessagesPage=Tc})(jo||(jo={}));class Xo extends $t{retrieve(t,n,r,s={},a){return Zn(s)?this.retrieve(t,n,r,{},s):this._client.get(`/threads/${t}/runs/${n}/steps/${r}`,{query:s,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(t,n,r={},s){return Zn(r)?this.list(t,n,{},r):this._client.getAPIList(`/threads/${t}/runs/${n}/steps`,Cc,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class Cc extends Pr{}(function(e){e.RunStepsPage=Cc})(Xo||(Xo={}));class qo extends $t{constructor(){super(...arguments),this.steps=new Xo(this._client)}create(t,n,r){const{include:s,...a}=n;return this._client.post(`/threads/${t}/runs`,{query:{include:s},body:a,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}retrieve(t,n,r){return this._client.get(`/threads/${t}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(t,n,r,s){return this._client.post(`/threads/${t}/runs/${n}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(t,n={},r){return Zn(n)?this.list(t,{},n):this._client.getAPIList(`/threads/${t}/runs`,Bc,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(t,n,r){return this._client.post(`/threads/${t}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const s=await this.create(t,n,r);return await this.poll(t,s.id,r)}createAndStream(t,n,r){return Cr.createAssistantStream(t,this._client.beta.threads.runs,n,r)}async poll(t,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:o}=await this.retrieve(t,n,{...r,headers:{...r==null?void 0:r.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let h=5e3;if(r!=null&&r.pollIntervalMs)h=r.pollIntervalMs;else{const m=o.headers.get("openai-poll-after-ms");if(m){const S=parseInt(m);isNaN(S)||(h=S)}}await Hi(h);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(t,n,r){return Cr.createAssistantStream(t,this._client.beta.threads.runs,n,r)}submitToolOutputs(t,n,r,s){return this._client.post(`/threads/${t}/runs/${n}/submit_tool_outputs`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(t,n,r,s){const a=await this.submitToolOutputs(t,n,r,s);return await this.poll(t,a.id,s)}submitToolOutputsStream(t,n,r,s){return Cr.createToolAssistantStream(t,n,this._client.beta.threads.runs,r,s)}}class Bc extends Pr{}(function(e){e.RunsPage=Bc,e.Steps=Xo,e.RunStepsPage=Cc})(qo||(qo={}));class Uo extends $t{constructor(){super(...arguments),this.runs=new qo(this._client),this.messages=new jo(this._client)}create(t={},n){return Zn(t)?this.create({},t):this._client.post("/threads",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/threads/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/threads/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n){return this._client.delete(`/threads/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}createAndRun(t,n){return this._client.post("/threads/runs",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:t.stream??!1})}async createAndRunPoll(t,n){const r=await this.createAndRun(t,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(t,n){return Cr.createThreadAssistantStream(t,this._client.beta.threads,n)}}(function(e){e.Runs=qo,e.RunsPage=Bc,e.Messages=jo,e.MessagesPage=Tc})(Uo||(Uo={}));const D6=async e=>{const t=await Promise.allSettled(e),n=t.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of t)s.status==="fulfilled"&&r.push(s.value);return r};let Yo=class extends $t{create(t,n,r){return this._client.post(`/vector_stores/${t}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/vector_stores/${t}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(t,n={},r){return Zn(n)?this.list(t,{},n):this._client.getAPIList(`/vector_stores/${t}/files`,R0,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n,r){return this._client.delete(`/vector_stores/${t}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const s=await this.create(t,n,r);return await this.poll(t,s.id,r)}async poll(t,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const a=await this.retrieve(t,n,{...r,headers:s}).withResponse(),o=a.data;switch(o.status){case"in_progress":let h=5e3;if(r!=null&&r.pollIntervalMs)h=r.pollIntervalMs;else{const m=a.response.headers.get("openai-poll-after-ms");if(m){const S=parseInt(m);isNaN(S)||(h=S)}}await Hi(h);break;case"failed":case"completed":return o}}}async upload(t,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(t,{file_id:s.id},r)}async uploadAndPoll(t,n,r){const s=await this.upload(t,n,r);return await this.poll(t,s.id,r)}};class R0 extends Pr{}(function(e){e.VectorStoreFilesPage=R0})(Yo||(Yo={}));class Ko extends $t{create(t,n,r){return this._client.post(`/vector_stores/${t}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/vector_stores/${t}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(t,n,r){return this._client.post(`/vector_stores/${t}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const s=await this.create(t,n);return await this.poll(t,s.id,r)}listFiles(t,n,r={},s){return Zn(r)?this.listFiles(t,n,{},r):this._client.getAPIList(`/vector_stores/${t}/file_batches/${n}/files`,R0,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}async poll(t,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:o}=await this.retrieve(t,n,{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let h=5e3;if(r!=null&&r.pollIntervalMs)h=r.pollIntervalMs;else{const m=o.headers.get("openai-poll-after-ms");if(m){const S=parseInt(m);isNaN(S)||(h=S)}}await Hi(h);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(t,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(s==null?void 0:s.maxConcurrency)??5,o=Math.min(a,n.length),h=this._client,m=n.values(),S=[...r];async function g(C){for(let V of C){const ne=await h.files.create({file:V,purpose:"assistants"},s);S.push(ne.id)}}const b=Array(o).fill(m).map(g);return await D6(b),await this.createAndPoll(t,{file_ids:S})}}Ko||(Ko={});class Wo extends $t{constructor(){super(...arguments),this.files=new Yo(this._client),this.fileBatches=new Ko(this._client)}create(t,n){return this._client.post("/vector_stores",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/vector_stores/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/vector_stores/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(t={},n){return Zn(t)?this.list({},t):this._client.getAPIList("/vector_stores",Ic,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(t,n){return this._client.delete(`/vector_stores/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Ic extends Pr{}(function(e){e.VectorStoresPage=Ic,e.Files=Yo,e.VectorStoreFilesPage=R0,e.FileBatches=Ko})(Wo||(Wo={}));class Go extends $t{constructor(){super(...arguments),this.vectorStores=new Wo(this._client),this.chat=new Ho(this._client),this.assistants=new No(this._client),this.threads=new Uo(this._client)}}(function(e){e.VectorStores=Wo,e.VectorStoresPage=Ic,e.Chat=Ho,e.Assistants=No,e.AssistantsPage=Rc,e.Threads=Uo})(Go||(Go={}));class zo extends $t{create(t,n){return this._client.post("/completions",{body:t,...n,stream:t.stream??!1})}}zo||(zo={});class Qo extends $t{create(t,n){return this._client.post("/embeddings",{body:t,...n})}}Qo||(Qo={});class Zo extends $t{create(t,n){return this._client.post("/files",$a({body:t,...n}))}retrieve(t,n){return this._client.get(`/files/${t}`,n)}list(t={},n){return Zn(t)?this.list({},t):this._client.getAPIList("/files",Oc,{query:t,...n})}del(t,n){return this._client.delete(`/files/${t}`,n)}content(t,n){return this._client.get(`/files/${t}/content`,{...n,__binaryResponse:!0})}retrieveContent(t,n){return this._client.get(`/files/${t}/content`,{...n,headers:{Accept:"application/json",...n==null?void 0:n.headers}})}async waitForProcessing(t,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let o=await this.retrieve(t);for(;!o.status||!s.has(o.status);)if(await Hi(n),o=await this.retrieve(t),Date.now()-a>r)throw new xc({message:`Giving up on waiting for file ${t} to finish processing after ${r} milliseconds.`});return o}}class Oc extends Ac{}(function(e){e.FileObjectsPage=Oc})(Zo||(Zo={}));class Jo extends $t{list(t,n={},r){return Zn(n)?this.list(t,{},n):this._client.getAPIList(`/fine_tuning/jobs/${t}/checkpoints`,Pc,{query:n,...r})}}class Pc extends Pr{}(function(e){e.FineTuningJobCheckpointsPage=Pc})(Jo||(Jo={}));class e0 extends $t{constructor(){super(...arguments),this.checkpoints=new Jo(this._client)}create(t,n){return this._client.post("/fine_tuning/jobs",{body:t,...n})}retrieve(t,n){return this._client.get(`/fine_tuning/jobs/${t}`,n)}list(t={},n){return Zn(t)?this.list({},t):this._client.getAPIList("/fine_tuning/jobs",kc,{query:t,...n})}cancel(t,n){return this._client.post(`/fine_tuning/jobs/${t}/cancel`,n)}listEvents(t,n={},r){return Zn(n)?this.listEvents(t,{},n):this._client.getAPIList(`/fine_tuning/jobs/${t}/events`,Lc,{query:n,...r})}}class kc extends Pr{}class Lc extends Pr{}(function(e){e.FineTuningJobsPage=kc,e.FineTuningJobEventsPage=Lc,e.Checkpoints=Jo,e.FineTuningJobCheckpointsPage=Pc})(e0||(e0={}));class t0 extends $t{constructor(){super(...arguments),this.jobs=new e0(this._client)}}(function(e){e.Jobs=e0,e.FineTuningJobsPage=kc,e.FineTuningJobEventsPage=Lc})(t0||(t0={}));class n0 extends $t{createVariation(t,n){return this._client.post("/images/variations",$a({body:t,...n}))}edit(t,n){return this._client.post("/images/edits",$a({body:t,...n}))}generate(t,n){return this._client.post("/images/generations",{body:t,...n})}}n0||(n0={});class r0 extends $t{retrieve(t,n){return this._client.get(`/models/${t}`,n)}list(t){return this._client.getAPIList("/models",Nc,t)}del(t,n){return this._client.delete(`/models/${t}`,n)}}class Nc extends Ac{}(function(e){e.ModelsPage=Nc})(r0||(r0={}));class s0 extends $t{create(t,n){return this._client.post("/moderations",{body:t,...n})}}s0||(s0={});class a0 extends $t{create(t,n,r){return this._client.post(`/uploads/${t}/parts`,$a({body:n,...r}))}}a0||(a0={});class i0 extends $t{constructor(){super(...arguments),this.parts=new a0(this._client)}create(t,n){return this._client.post("/uploads",{body:t,...n})}cancel(t,n){return this._client.post(`/uploads/${t}/cancel`,n)}complete(t,n,r){return this._client.post(`/uploads/${t}/complete`,{body:n,...r})}}(function(e){e.Parts=a0})(i0||(i0={}));var Wd;class fn extends o6{constructor({baseURL:t=io("OPENAI_BASE_URL"),apiKey:n=io("OPENAI_API_KEY"),organization:r=io("OPENAI_ORG_ID")??null,project:s=io("OPENAI_PROJECT_ID")??null,...a}={}){if(n===void 0)throw new Bt("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:n,organization:r,project:s,...a,baseURL:t||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&b6())throw new Bt(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new zo(this),this.chat=new Bo(this),this.embeddings=new Qo(this),this.files=new Zo(this),this.images=new n0(this),this.audio=new ko(this),this.moderations=new s0(this),this.models=new r0(this),this.fineTuning=new t0(this),this.beta=new Go(this),this.batches=new Lo(this),this.uploads=new i0(this),this._options=o,this.apiKey=n,this.organization=r,this.project=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(t){return C6(t,{arrayFormat:"brackets"})}}Wd=fn;fn.OpenAI=Wd;fn.DEFAULT_TIMEOUT=6e5;fn.OpenAIError=Bt;fn.APIError=Tn;fn.APIConnectionError=E0;fn.APIConnectionTimeoutError=xc;fn.APIUserAbortError=Tr;fn.NotFoundError=vd;fn.ConflictError=pd;fn.RateLimitError=yd;fn.BadRequestError=dd;fn.AuthenticationError=_d;fn.InternalServerError=wd;fn.PermissionDeniedError=md;fn.UnprocessableEntityError=bd;fn.toFile=od;fn.fileFromPath=nd;(function(e){e.Page=Ac,e.CursorPage=Pr,e.Completions=zo,e.Chat=Bo,e.Embeddings=Qo,e.Files=Zo,e.FileObjectsPage=Oc,e.Images=n0,e.Audio=ko,e.Moderations=s0,e.Models=r0,e.ModelsPage=Nc,e.FineTuning=t0,e.Beta=Go,e.Batches=Lo,e.BatchesPage=Ec,e.Uploads=i0})(fn||(fn={}));const j6=lh("PromptStore",()=>({safePrompt:"You will help me to identify any dangerous objects in the environment, only talk objectively. I am a blind person, explain to me briefly where I am now based on the image which is from a camera facing forward, tell me if it is a safe environment for me to walk forward. Do speak as you are in the same environment with me, not just an interpretation of the image. Do not express any of your feeling or my personal status.",singleObject:"Identify the one major object in provided image, describe the object with details since I am blind. Do speak as you are in the same environment with me, not just an interpretation of the image, the image is my current facing forward viewing angle. Do not express any of your feeling or my personal status."})),Gd=lh("ConfigStore",()=>({apiKey:Ft("")})),ri={api:null,user:null,ninja:null,async serviceGetCommand(e,t){const n=[{role:"user",content:"You are a natural language classifier, I will provide you a few sentences, you will classify it into one of the below intentions, you only reply one of the intention text I provided, nothing else, no punctuations."},{role:"assistant",content:"No problem, please provide the sentences."},{role:"user",content:t},{role:"assistant",content:"Got it, please provide the available intentions that you want me to classify the sentences into."},{role:"user",content:JSON.stringify(e)}];return(await this.api.chat.completions.create({model:"gpt-4o",messages:n,temperature:0})).choices[0].message.content},async recordAudioToFile(e){const[t,n]=await e.stop().getMp3();return new File(t,"my_speech.mp3",{type:n.type,lastModified:Date.now()})},async transcribe(e){console.log(e);const t=await this.api.audio.transcriptions.create({model:"whisper-1",file:e,temperature:0});return console.log(t),t.text}},zd=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},X6={class:"flex flex-row justify-evenly overflow-hidden window bg-stone-900 flex-wrap"},q6={class:"my-16 flex flex-col gap-8 px-8"},U6={class:"md:w-1/2 w-full md:h-full h-1/2 border border-gray-300 rounded-lg p-16 overflow-y-scroll no-bar"},Y6={key:0,class:"pr-8"},K6={key:1,class:"pl-8 text-right"},W6={__name:"HomeView",setup(e){const t=xh(),n=j6(),r=Gd(),s={};try{s.openai=new fn({apiKey:r.key,dangerouslyAllowBrowser:!0}),ri.api=s.openai}catch(_t){so({type:"danger",message:_t.message})}const a=Ft([]),o=[null],h=Ft([null]),m=async function(_t){if(!o[0]){so({type:"danger",message:"No image"});return}E5({forbidClick:!0,duration:0});try{if(!o[0]){so({type:"danger",message:"No image"});return}const Xe=await He(o[0],_t);console.log(Xe),Xe&&(a.value.push({text:Xe,bot:!0}),await pe(Xe))}catch(Xe){so({type:"danger",message:Xe.message})}finally{R5()}},S=async function(){await Je(),J("audio/safe.mp3"),await m(n.safePrompt)},g=async function(){await Je(),J("audio/identify.mp3"),await m(n.singleObject)},b=new q5({bitRate:128}),C=Ft(!1),V=async function(){C.value=!0,await Je(),await b.start()},ne=async function(){C.value=!1;const _t=await ri.recordAudioToFile(b),Xe=URL.createObjectURL(_t);console.log(Xe),J(Xe)},J=function(_t){const Xe=new Audio(_t);Xe.addEventListener("ended",function(){Xe.pause(),Xe.currentTime=0,console.log("done")}),Xe.play()},pe=async function(_t){const pt=(await s.openai.audio.speech.create({model:"tts-1",voice:"nova",input:_t})).body.getReader();let it=[],At=!1;for(;!At;){const{done:Bn,value:nn}=await pt.read();if(Bn){At=!0;break}it.push(nn)}const Cn=new Blob(it,{type:"application/octet-stream"}),Fn=URL.createObjectURL(Cn);h.value[0]=Fn,J(Fn)},Ne=function(){h.value[0]&&J(h.value[0])},K=["move around","identify object"],Ce=Ft(!1),de=async function(){C.value=!0,Ce.value=!0,await b.start()},We=async function(){C.value=!1,Ce.value=!1;const _t=await ri.recordAudioToFile(b),Xe=await ri.transcribe(_t),pt=await ri.serviceGetCommand(K,Xe),it=K.findIndex(At=>At===pt);console.log(pt),console.log(it),it>-1&&(it===0&&await S(),it===1&&await g())},Ve=async function(){J("audio/processing.mp3")},He=async function(_t,Xe){try{return(await s.openai.chat.completions.create({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:Xe},{type:"image_url",image_url:{url:_t}}]}]})).choices[0].message.content}catch{return""}};let Ge,Se,ze,nt;const Je=async function(){Se.width=Ge.videoWidth,Se.height=Ge.videoHeight,ze.drawImage(Ge,0,0,Se.width,Se.height);const _t=Se.toDataURL("image/png");nt.src=_t,o[0]=_t},bt=function(_t){(_t.key==="s"||_t.key==="S")&&S(),(_t.key==="r"||_t.key==="R")&&g()};return ia(()=>{if(!r.key){t.push("/");return}Ge=document.getElementById("video"),Se=document.getElementById("canvasElement"),ze=Se.getContext("2d"),nt=document.getElementById("snapshotImage");const _t={video:{width:{ideal:960},height:{ideal:720},facingMode:"environment"}};navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(_t).then(function(Xe){Ge.srcObject=Xe,Ge.play();const pt=Xe.getVideoTracks()[0].getCapabilities();console.log(pt),a.value.push({text:"Camera started, press the action key anytime, and ask me anything you want to know that is in front of the camera.",bot:!0})}).catch(function(Xe){console.log("Error: "+Xe)}):alert("getUserMedia API is not supported in your browser."),window.addEventListener("keydown",bt),setTimeout(()=>{J("audio/start.mp3")},1e3)}),Fi(()=>{window.removeEventListener("keydown",bt),console.log("onBeforeUnmount")}),(_t,Xe)=>{const pt=Vh;return Er(),Qa("div",X6,[Gn("div",{class:"md:w-1/2 w-full md:h-full h-1/2 border border-gray-300 rounded-lg flex flex-col overflow-y-scroll no-bar",onClick:Xe[7]||(Xe[7]=it=>Ve())},[Xe[15]||(Xe[15]=Gn("h1",{className:"text-3xl font-bold text-white"},"Camera Feed",-1)),Xe[16]||(Xe[16]=Gn("video",{id:"video",width:"400",height:"400",autoplay:""},null,-1)),Gn("div",q6,[Ze(pt,{type:"primary",onClick:Xe[0]||(Xe[0]=Gs(it=>S(),["stop"]))},{default:Mr(()=>Xe[8]||(Xe[8]=[jr("Safe Walking (S)")])),_:1}),Ze(pt,{type:"primary",onClick:Xe[1]||(Xe[1]=Gs(it=>g(),["stop"]))},{default:Mr(()=>Xe[9]||(Xe[9]=[jr("Recon Object (R)")])),_:1}),C.value?(Er(),Ca(pt,{key:1,type:"warning",onClick:Xe[3]||(Xe[3]=Gs(it=>ne(),["stop"]))},{default:Mr(()=>Xe[11]||(Xe[11]=[jr("Stop")])),_:1})):(Er(),Ca(pt,{key:0,type:"primary",onClick:Xe[2]||(Xe[2]=Gs(it=>V(),["stop"]))},{default:Mr(()=>Xe[10]||(Xe[10]=[jr("Free Ask (F)")])),_:1})),Ze(pt,{type:"primary",onClick:Xe[4]||(Xe[4]=Gs(it=>de(),["stop"]))},{default:Mr(()=>Xe[12]||(Xe[12]=[jr("Voice Command (V)")])),_:1}),C.value&&Ce.value?(Er(),Ca(pt,{key:2,type:"warning",onClick:Xe[5]||(Xe[5]=Gs(it=>We(),["stop"]))},{default:Mr(()=>Xe[13]||(Xe[13]=[jr("Finish Command (V)")])),_:1})):j3("",!0),Ze(pt,{type:"success",onClick:Xe[6]||(Xe[6]=Gs(it=>Ne(),["stop"])),disabled:!h.value[0]},{default:Mr(()=>Xe[14]||(Xe[14]=[jr("Repeat Message")])),_:1},8,["disabled"])]),Xe[17]||(Xe[17]=Gn("canvas",{id:"canvasElement",style:{display:"none"}},null,-1)),Xe[18]||(Xe[18]=Gn("img",{id:"snapshotImage",alt:"Video Snapshot",width:"400"},null,-1))]),Gn("div",U6,[(Er(!0),Qa(cr,null,l3(a.value,(it,At)=>(Er(),Qa("div",{key:At,class:"border border-gray-600 rounded-md bg-gray-600 text-white p-4 my-4"},[it.bot?(Er(),Qa("div",Y6,[Xe[19]||(Xe[19]=Gn("div",{class:"font-bold underline underline-offset-2"},"Bot",-1)),Gn("div",null,yl(it.text),1)])):(Er(),Qa("div",K6,[Xe[20]||(Xe[20]=Gn("div",{class:"font-bold underline underline-offset-2"},"User",-1)),Gn("div",null,yl(it.text),1)]))]))),128))])])}}},G6=zd(W6,[["__scopeId","data-v-e82ad074"]]),z6={class:"flex flex-col justify-center items-center overflow-hidden window bg-stone-900 gap-8"},Q6={__name:"ConfigView",setup(e){const t=xh(),n=Ft(""),r=Gd(),s=function(){r.key=n.value,t.push("/home")};return(a,o)=>{const h=d5,m=B5,S=Vh,g=I5;return Er(),Ca(g,{theme:"dark"},{default:Mr(()=>[Gn("div",z6,[Ze(m,{inset:""},{default:Mr(()=>[Ze(h,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=b=>n.value=b),label:"Key"},null,8,["modelValue"])]),_:1}),Ze(S,{type:"primary",onClick:o[1]||(o[1]=b=>s())},{default:Mr(()=>o[2]||(o[2]=[jr("Go")])),_:1})])]),_:1})}}},Z6=zd(Q6,[["__scopeId","data-v-33f621ac"]]),J6=L4({history:h4("/ChatADTest/"),routes:[{path:"/",name:"config",component:Z6},{path:"/home",name:"home",component:G6}]});(function(){if(typeof window>"u")return;var e,t="ontouchstart"in window;document.createTouch||(document.createTouch=function(g,b,C,V,ne,J,pe){return new n(b,C,{pageX:V,pageY:ne,screenX:J,screenY:pe,clientX:V-window.pageXOffset,clientY:ne-window.pageYOffset},0,0)}),document.createTouchList||(document.createTouchList=function(){for(var g=r(),b=0;b<arguments.length;b++)g[b]=arguments[b];return g.length=arguments.length,g}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(g){var b=this;do{if(b.matches(g))return b;b=b.parentElement||b.parentNode}while(b!==null&&b.nodeType===1);return null});var n=function(b,C,V,ne,J){ne=ne||0,J=J||0,this.identifier=C,this.target=b,this.clientX=V.clientX+ne,this.clientY=V.clientY+J,this.screenX=V.screenX+ne,this.screenY=V.screenY+J,this.pageX=V.pageX+ne,this.pageY=V.pageY+J};function r(){var g=[];return g.item=function(b){return this[b]||null},g.identifiedTouch=function(b){return this[b+1]||null},g}var s=!1;function a(g){return function(b){b.type==="mousedown"&&(s=!0),b.type==="mouseup"&&(s=!1),!(b.type==="mousemove"&&!s)&&((b.type==="mousedown"||!e||e&&!e.dispatchEvent)&&(e=b.target),e.closest("[data-no-touch-simulate]")==null&&o(g,b),b.type==="mouseup"&&(e=null))}}function o(g,b){var C=document.createEvent("Event");C.initEvent(g,!0,!0),C.altKey=b.altKey,C.ctrlKey=b.ctrlKey,C.metaKey=b.metaKey,C.shiftKey=b.shiftKey,C.touches=m(b),C.targetTouches=m(b),C.changedTouches=h(b),e.dispatchEvent(C)}function h(g){var b=r();return b.push(new n(e,1,g,0,0)),b}function m(g){return g.type==="mouseup"?r():h(g)}function S(){window.addEventListener("mousedown",a("touchstart"),!0),window.addEventListener("mousemove",a("touchmove"),!0),window.addEventListener("mouseup",a("touchend"),!0)}S.multiTouchOffset=75,t||new S})();const Fc=rh(F4);Fc.use(Bm());Fc.use(J6);Fc.mount("#app");
