(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();/**
* @vue/shared v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Gl(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Vt={},Ks=[],Cr=()=>{},s_=()=>!1,d0=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ql=e=>e.startsWith("onUpdate:"),pn=Object.assign,zl=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},a_=Object.prototype.hasOwnProperty,Bt=(e,t)=>a_.call(e,t),dt=Array.isArray,Ws=e=>m0(e)==="[object Map]",bc=e=>m0(e)==="[object Set]",bt=e=>typeof e=="function",on=e=>typeof e=="string",ls=e=>typeof e=="symbol",Wt=e=>e!==null&&typeof e=="object",yc=e=>(Wt(e)||bt(e))&&bt(e.then)&&bt(e.catch),wc=Object.prototype.toString,m0=e=>wc.call(e),i_=e=>m0(e).slice(8,-1),Sc=e=>m0(e)==="[object Object]",Zl=e=>on(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ga=Gl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),v0=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},l_=/-(\w)/g,as=v0(e=>e.replace(l_,(t,n)=>n?n.toUpperCase():"")),o_=/\B([A-Z])/g,Is=v0(e=>e.replace(o_,"-$1").toLowerCase()),xc=v0(e=>e.charAt(0).toUpperCase()+e.slice(1)),Y0=v0(e=>e?`on${xc(e)}`:""),rs=(e,t)=>!Object.is(e,t),K0=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Ac=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},c_=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let n1;const p0=()=>n1||(n1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Jl(e){if(dt(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=on(r)?__(r):Jl(r);if(s)for(const a in s)t[a]=s[a]}return t}else if(on(e)||Wt(e))return e}const u_=/;(?![^(]*\))/g,f_=/:([^]+)/,h_=/\/\*[^]*?\*\//g;function __(e){const t={};return e.replace(h_,"").split(u_).forEach(n=>{if(n){const r=n.split(f_);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function eo(e){let t="";if(on(e))t=e;else if(dt(e))for(let n=0;n<e.length;n++){const r=eo(e[n]);r&&(t+=r+" ")}else if(Wt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const d_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",m_=Gl(d_);function Ec(e){return!!e||e===""}const Rc=e=>!!(e&&e.__v_isRef===!0),gc=e=>on(e)?e:e==null?"":dt(e)||Wt(e)&&(e.toString===wc||!bt(e.toString))?Rc(e)?gc(e.value):JSON.stringify(e,Mc,2):String(e),Mc=(e,t)=>Rc(t)?Mc(e,t.value):Ws(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],a)=>(n[W0(r,a)+" =>"]=s,n),{})}:bc(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>W0(n))}:ls(t)?W0(t):Wt(t)&&!dt(t)&&!Sc(t)?String(t):t,W0=(e,t="")=>{var n;return ls(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Bn;class Tc{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Bn,!t&&Bn&&(this.index=(Bn.scopes||(Bn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Bn;try{return Bn=this,t()}finally{Bn=n}}}on(){Bn=this}off(){Bn=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Bc(e){return new Tc(e)}function Cc(){return Bn}function v_(e,t=!1){Bn&&Bn.cleanups.push(e)}let $t;const G0=new WeakSet;class Ic{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Bn&&Bn.active&&Bn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,G0.has(this)&&(G0.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Pc(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,r1(this),Nc(this);const t=$t,n=_r;$t=this,_r=!0;try{return this.fn()}finally{Lc(this),$t=t,_r=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ro(t);this.deps=this.depsTail=void 0,r1(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?G0.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){wl(this)&&this.run()}get dirty(){return wl(this)}}let Oc=0,Ma,Ta;function Pc(e,t=!1){if(e.flags|=8,t){e.next=Ta,Ta=e;return}e.next=Ma,Ma=e}function to(){Oc++}function no(){if(--Oc>0)return;if(Ta){let t=Ta;for(Ta=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Ma;){let t=Ma;for(Ma=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function Nc(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Lc(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),ro(r),p_(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function wl(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Fc(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Fc(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===$a))return;e.globalVersion=$a;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!wl(e)){e.flags&=-3;return}const n=$t,r=_r;$t=e,_r=!0;try{Nc(e);const s=e.fn(e._value);(t.version===0||rs(s,e._value))&&(e._value=s,t.version++)}catch(s){throw t.version++,s}finally{$t=n,_r=r,Lc(e),e.flags&=-3}}function ro(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)ro(a,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function p_(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let _r=!0;const kc=[];function os(){kc.push(_r),_r=!1}function cs(){const e=kc.pop();_r=e===void 0?!0:e}function r1(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=$t;$t=void 0;try{t()}finally{$t=n}}}let $a=0;class b_{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class so{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!$t||!_r||$t===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==$t)n=this.activeLink=new b_($t,this),$t.deps?(n.prevDep=$t.depsTail,$t.depsTail.nextDep=n,$t.depsTail=n):$t.deps=$t.depsTail=n,Hc(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=$t.depsTail,n.nextDep=void 0,$t.depsTail.nextDep=n,$t.depsTail=n,$t.deps===n&&($t.deps=r)}return n}trigger(t){this.version++,$a++,this.notify(t)}notify(t){to();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{no()}}}function Hc(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Hc(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Bi=new WeakMap,Rs=Symbol(""),Sl=Symbol(""),Va=Symbol("");function En(e,t,n){if(_r&&$t){let r=Bi.get(e);r||Bi.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new so),s.map=r,s.key=n),s.track()}}function Xr(e,t,n,r,s,a){const c=Bi.get(e);if(!c){$a++;return}const d=y=>{y&&y.trigger()};if(to(),t==="clear")c.forEach(d);else{const y=dt(e),R=y&&Zl(n);if(y&&n==="length"){const T=Number(r);c.forEach((x,X)=>{(X==="length"||X===Va||!ls(X)&&X>=T)&&d(x)})}else switch((n!==void 0||c.has(void 0))&&d(c.get(n)),R&&d(c.get(Va)),t){case"add":y?R&&d(c.get("length")):(d(c.get(Rs)),Ws(e)&&d(c.get(Sl)));break;case"delete":y||(d(c.get(Rs)),Ws(e)&&d(c.get(Sl)));break;case"set":Ws(e)&&d(c.get(Rs));break}}no()}function y_(e,t){const n=Bi.get(e);return n&&n.get(t)}function ks(e){const t=Tt(e);return t===e?t:(En(t,"iterate",Va),tr(e)?t:t.map(Rn))}function b0(e){return En(e=Tt(e),"iterate",Va),e}const w_={__proto__:null,[Symbol.iterator](){return Q0(this,Symbol.iterator,Rn)},concat(...e){return ks(this).concat(...e.map(t=>dt(t)?ks(t):t))},entries(){return Q0(this,"entries",e=>(e[1]=Rn(e[1]),e))},every(e,t){return Fr(this,"every",e,t,void 0,arguments)},filter(e,t){return Fr(this,"filter",e,t,n=>n.map(Rn),arguments)},find(e,t){return Fr(this,"find",e,t,Rn,arguments)},findIndex(e,t){return Fr(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Fr(this,"findLast",e,t,Rn,arguments)},findLastIndex(e,t){return Fr(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Fr(this,"forEach",e,t,void 0,arguments)},includes(...e){return z0(this,"includes",e)},indexOf(...e){return z0(this,"indexOf",e)},join(e){return ks(this).join(e)},lastIndexOf(...e){return z0(this,"lastIndexOf",e)},map(e,t){return Fr(this,"map",e,t,void 0,arguments)},pop(){return va(this,"pop")},push(...e){return va(this,"push",e)},reduce(e,...t){return s1(this,"reduce",e,t)},reduceRight(e,...t){return s1(this,"reduceRight",e,t)},shift(){return va(this,"shift")},some(e,t){return Fr(this,"some",e,t,void 0,arguments)},splice(...e){return va(this,"splice",e)},toReversed(){return ks(this).toReversed()},toSorted(e){return ks(this).toSorted(e)},toSpliced(...e){return ks(this).toSpliced(...e)},unshift(...e){return va(this,"unshift",e)},values(){return Q0(this,"values",Rn)}};function Q0(e,t,n){const r=b0(e),s=r[t]();return r!==e&&!tr(e)&&(s._next=s.next,s.next=()=>{const a=s._next();return a.value&&(a.value=n(a.value)),a}),s}const S_=Array.prototype;function Fr(e,t,n,r,s,a){const c=b0(e),d=c!==e&&!tr(e),y=c[t];if(y!==S_[t]){const x=y.apply(e,a);return d?Rn(x):x}let R=n;c!==e&&(d?R=function(x,X){return n.call(this,Rn(x),X,e)}:n.length>2&&(R=function(x,X){return n.call(this,x,X,e)}));const T=y.call(c,R,r);return d&&s?s(T):T}function s1(e,t,n,r){const s=b0(e);let a=n;return s!==e&&(tr(e)?n.length>3&&(a=function(c,d,y){return n.call(this,c,d,y,e)}):a=function(c,d,y){return n.call(this,c,Rn(d),y,e)}),s[t](a,...r)}function z0(e,t,n){const r=Tt(e);En(r,"iterate",Va);const s=r[t](...n);return(s===-1||s===!1)&&lo(n[0])?(n[0]=Tt(n[0]),r[t](...n)):s}function va(e,t,n=[]){os(),to();const r=Tt(e)[t].apply(e,n);return no(),cs(),r}const x_=Gl("__proto__,__v_isRef,__isVue"),$c=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ls));function A_(e){ls(e)||(e=String(e));const t=Tt(this);return En(t,"has",e),t.hasOwnProperty(e)}class Vc{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){const s=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return a;if(n==="__v_raw")return r===(s?a?P_:qc:a?jc:Xc).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const c=dt(t);if(!s){let y;if(c&&(y=w_[n]))return y;if(n==="hasOwnProperty")return A_}const d=Reflect.get(t,n,tn(t)?t:r);return(ls(n)?$c.has(n):x_(n))||(s||En(t,"get",n),a)?d:tn(d)?c&&Zl(n)?d:d.value:Wt(d)?s?Yc(d):sa(d):d}}class Dc extends Vc{constructor(t=!1){super(!1,t)}set(t,n,r,s){let a=t[n];if(!this._isShallow){const y=Ts(a);if(!tr(r)&&!Ts(r)&&(a=Tt(a),r=Tt(r)),!dt(t)&&tn(a)&&!tn(r))return y?!1:(a.value=r,!0)}const c=dt(t)&&Zl(n)?Number(n)<t.length:Bt(t,n),d=Reflect.set(t,n,r,tn(t)?t:s);return t===Tt(s)&&(c?rs(r,a)&&Xr(t,"set",n,r):Xr(t,"add",n,r)),d}deleteProperty(t,n){const r=Bt(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Xr(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!ls(n)||!$c.has(n))&&En(t,"has",n),r}ownKeys(t){return En(t,"iterate",dt(t)?"length":Rs),Reflect.ownKeys(t)}}class E_ extends Vc{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const R_=new Dc,g_=new E_,M_=new Dc(!0);const xl=e=>e,ui=e=>Reflect.getPrototypeOf(e);function T_(e,t,n){return function(...r){const s=this.__v_raw,a=Tt(s),c=Ws(a),d=e==="entries"||e===Symbol.iterator&&c,y=e==="keys"&&c,R=s[e](...r),T=n?xl:t?Al:Rn;return!t&&En(a,"iterate",y?Sl:Rs),{next(){const{value:x,done:X}=R.next();return X?{value:x,done:X}:{value:d?[T(x[0]),T(x[1])]:T(x),done:X}},[Symbol.iterator](){return this}}}}function fi(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function B_(e,t){const n={get(s){const a=this.__v_raw,c=Tt(a),d=Tt(s);e||(rs(s,d)&&En(c,"get",s),En(c,"get",d));const{has:y}=ui(c),R=t?xl:e?Al:Rn;if(y.call(c,s))return R(a.get(s));if(y.call(c,d))return R(a.get(d));a!==c&&a.get(s)},get size(){const s=this.__v_raw;return!e&&En(Tt(s),"iterate",Rs),Reflect.get(s,"size",s)},has(s){const a=this.__v_raw,c=Tt(a),d=Tt(s);return e||(rs(s,d)&&En(c,"has",s),En(c,"has",d)),s===d?a.has(s):a.has(s)||a.has(d)},forEach(s,a){const c=this,d=c.__v_raw,y=Tt(d),R=t?xl:e?Al:Rn;return!e&&En(y,"iterate",Rs),d.forEach((T,x)=>s.call(a,R(T),R(x),c))}};return pn(n,e?{add:fi("add"),set:fi("set"),delete:fi("delete"),clear:fi("clear")}:{add(s){!t&&!tr(s)&&!Ts(s)&&(s=Tt(s));const a=Tt(this);return ui(a).has.call(a,s)||(a.add(s),Xr(a,"add",s,s)),this},set(s,a){!t&&!tr(a)&&!Ts(a)&&(a=Tt(a));const c=Tt(this),{has:d,get:y}=ui(c);let R=d.call(c,s);R||(s=Tt(s),R=d.call(c,s));const T=y.call(c,s);return c.set(s,a),R?rs(a,T)&&Xr(c,"set",s,a):Xr(c,"add",s,a),this},delete(s){const a=Tt(this),{has:c,get:d}=ui(a);let y=c.call(a,s);y||(s=Tt(s),y=c.call(a,s)),d&&d.call(a,s);const R=a.delete(s);return y&&Xr(a,"delete",s,void 0),R},clear(){const s=Tt(this),a=s.size!==0,c=s.clear();return a&&Xr(s,"clear",void 0,void 0),c}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=T_(s,e,t)}),n}function ao(e,t){const n=B_(e,t);return(r,s,a)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(Bt(n,s)&&s in r?n:r,s,a)}const C_={get:ao(!1,!1)},I_={get:ao(!1,!0)},O_={get:ao(!0,!1)};const Xc=new WeakMap,jc=new WeakMap,qc=new WeakMap,P_=new WeakMap;function N_(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function L_(e){return e.__v_skip||!Object.isExtensible(e)?0:N_(i_(e))}function sa(e){return Ts(e)?e:io(e,!1,R_,C_,Xc)}function Uc(e){return io(e,!1,M_,I_,jc)}function Yc(e){return io(e,!0,g_,O_,qc)}function io(e,t,n,r,s){if(!Wt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=s.get(e);if(a)return a;const c=L_(e);if(c===0)return e;const d=new Proxy(e,c===2?r:n);return s.set(e,d),d}function ss(e){return Ts(e)?ss(e.__v_raw):!!(e&&e.__v_isReactive)}function Ts(e){return!!(e&&e.__v_isReadonly)}function tr(e){return!!(e&&e.__v_isShallow)}function lo(e){return e?!!e.__v_raw:!1}function Tt(e){const t=e&&e.__v_raw;return t?Tt(t):e}function oo(e){return!Bt(e,"__v_skip")&&Object.isExtensible(e)&&Ac(e,"__v_skip",!0),e}const Rn=e=>Wt(e)?sa(e):e,Al=e=>Wt(e)?Yc(e):e;function tn(e){return e?e.__v_isRef===!0:!1}function is(e){return Kc(e,!1)}function F_(e){return Kc(e,!0)}function Kc(e,t){return tn(e)?e:new k_(e,t)}class k_{constructor(t,n){this.dep=new so,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Tt(t),this._value=n?t:Rn(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||tr(t)||Ts(t);t=r?t:Tt(t),rs(t,n)&&(this._rawValue=t,this._value=r?t:Rn(t),this.dep.trigger())}}function gs(e){return tn(e)?e.value:e}const H_={get:(e,t,n)=>t==="__v_raw"?e:gs(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return tn(s)&&!tn(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Wc(e){return ss(e)?e:new Proxy(e,H_)}function $_(e){const t=dt(e)?new Array(e.length):{};for(const n in e)t[n]=D_(e,n);return t}class V_{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return y_(Tt(this._object),this._key)}}function D_(e,t,n){const r=e[t];return tn(r)?r:new V_(e,t,n)}class X_{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new so(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=$a-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&$t!==this)return Pc(this,!0),!0}get value(){const t=this.dep.track();return Fc(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function j_(e,t,n=!1){let r,s;return bt(e)?r=e:(r=e.get,s=e.set),new X_(r,s,n)}const hi={},Ci=new WeakMap;let xs;function q_(e,t=!1,n=xs){if(n){let r=Ci.get(n);r||Ci.set(n,r=[]),r.push(e)}}function U_(e,t,n=Vt){const{immediate:r,deep:s,once:a,scheduler:c,augmentJob:d,call:y}=n,R=pe=>s?pe:tr(pe)||s===!1||s===0?ns(pe,1):ns(pe);let T,x,X,q,he=!1,ve=!1;if(tn(e)?(x=()=>e.value,he=tr(e)):ss(e)?(x=()=>R(e),he=!0):dt(e)?(ve=!0,he=e.some(pe=>ss(pe)||tr(pe)),x=()=>e.map(pe=>{if(tn(pe))return pe.value;if(ss(pe))return R(pe);if(bt(pe))return y?y(pe,2):pe()})):bt(e)?t?x=y?()=>y(e,2):e:x=()=>{if(X){os();try{X()}finally{cs()}}const pe=xs;xs=T;try{return y?y(e,3,[q]):e(q)}finally{xs=pe}}:x=Cr,t&&s){const pe=x,Ue=s===!0?1/0:s;x=()=>ns(pe(),Ue)}const we=Cc(),Xe=()=>{T.stop(),we&&zl(we.effects,T)};if(a&&t){const pe=t;t=(...Ue)=>{pe(...Ue),Xe()}}let K=ve?new Array(e.length).fill(hi):hi;const ye=pe=>{if(!(!(T.flags&1)||!T.dirty&&!pe))if(t){const Ue=T.run();if(s||he||(ve?Ue.some((rt,Ge)=>rs(rt,K[Ge])):rs(Ue,K))){X&&X();const rt=xs;xs=T;try{const Ge=[Ue,K===hi?void 0:ve&&K[0]===hi?[]:K,q];y?y(t,3,Ge):t(...Ge),K=Ue}finally{xs=rt}}}else T.run()};return d&&d(ye),T=new Ic(x),T.scheduler=c?()=>c(ye,!1):ye,q=pe=>q_(pe,!1,T),X=T.onStop=()=>{const pe=Ci.get(T);if(pe){if(y)y(pe,4);else for(const Ue of pe)Ue();Ci.delete(T)}},t?r?ye(!0):K=T.run():c?c(ye.bind(null,!0),!0):T.run(),Xe.pause=T.pause.bind(T),Xe.resume=T.resume.bind(T),Xe.stop=Xe,Xe}function ns(e,t=1/0,n){if(t<=0||!Wt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,tn(e))ns(e.value,t,n);else if(dt(e))for(let r=0;r<e.length;r++)ns(e[r],t,n);else if(bc(e)||Ws(e))e.forEach(r=>{ns(r,t,n)});else if(Sc(e)){for(const r in e)ns(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&ns(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Qa(e,t,n,r){try{return r?e(...r):e()}catch(s){y0(s,t,n)}}function Ir(e,t,n,r){if(bt(e)){const s=Qa(e,t,n,r);return s&&yc(s)&&s.catch(a=>{y0(a,t,n)}),s}if(dt(e)){const s=[];for(let a=0;a<e.length;a++)s.push(Ir(e[a],t,n,r));return s}}function y0(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:c}=t&&t.appContext.config||Vt;if(t){let d=t.parent;const y=t.proxy,R=`https://vuejs.org/error-reference/#runtime-${n}`;for(;d;){const T=d.ec;if(T){for(let x=0;x<T.length;x++)if(T[x](e,y,R)===!1)return}d=d.parent}if(a){os(),Qa(a,null,10,[e,y,R]),cs();return}}Y_(e,n,s,r,c)}function Y_(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const Cn=[];let Er=-1;const Gs=[];let Jr=null,Xs=0;const Gc=Promise.resolve();let Ii=null;function co(e){const t=Ii||Gc;return e?t.then(this?e.bind(this):e):t}function K_(e){let t=Er+1,n=Cn.length;for(;t<n;){const r=t+n>>>1,s=Cn[r],a=Da(s);a<e||a===e&&s.flags&2?t=r+1:n=r}return t}function uo(e){if(!(e.flags&1)){const t=Da(e),n=Cn[Cn.length-1];!n||!(e.flags&2)&&t>=Da(n)?Cn.push(e):Cn.splice(K_(t),0,e),e.flags|=1,Qc()}}function Qc(){Ii||(Ii=Gc.then(Zc))}function W_(e){dt(e)?Gs.push(...e):Jr&&e.id===-1?Jr.splice(Xs+1,0,e):e.flags&1||(Gs.push(e),e.flags|=1),Qc()}function a1(e,t,n=Er+1){for(;n<Cn.length;n++){const r=Cn[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;Cn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function zc(e){if(Gs.length){const t=[...new Set(Gs)].sort((n,r)=>Da(n)-Da(r));if(Gs.length=0,Jr){Jr.push(...t);return}for(Jr=t,Xs=0;Xs<Jr.length;Xs++){const n=Jr[Xs];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Jr=null,Xs=0}}const Da=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Zc(e){try{for(Er=0;Er<Cn.length;Er++){const t=Cn[Er];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Qa(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Er<Cn.length;Er++){const t=Cn[Er];t&&(t.flags&=-2)}Er=-1,Cn.length=0,zc(),Ii=null,(Cn.length||Gs.length)&&Zc()}}let er=null,Jc=null;function Oi(e){const t=er;return er=e,Jc=e&&e.type.__scopeId||null,t}function eu(e,t=er,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&_1(-1);const a=Oi(t);let c;try{c=e(...s)}finally{Oi(a),r._d&&_1(1)}return c};return r._n=!0,r._c=!0,r._d=!0,r}function ws(e,t,n,r){const s=e.dirs,a=t&&t.dirs;for(let c=0;c<s.length;c++){const d=s[c];a&&(d.oldValue=a[c].value);let y=d.dir[r];y&&(os(),Ir(y,n,8,[e.el,d,e,t]),cs())}}const G_=Symbol("_vte"),Q_=e=>e.__isTeleport;function fo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,fo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function aa(e,t){return bt(e)?pn({name:e.name},t,{setup:e}):e}function tu(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function El(e,t,n,r,s=!1){if(dt(e)){e.forEach((he,ve)=>El(he,t&&(dt(t)?t[ve]:t),n,r,s));return}if(Ba(r)&&!s)return;const a=r.shapeFlag&4?vo(r.component):r.el,c=s?null:a,{i:d,r:y}=e,R=t&&t.r,T=d.refs===Vt?d.refs={}:d.refs,x=d.setupState,X=Tt(x),q=x===Vt?()=>!1:he=>Bt(X,he);if(R!=null&&R!==y&&(on(R)?(T[R]=null,q(R)&&(x[R]=null)):tn(R)&&(R.value=null)),bt(y))Qa(y,d,12,[c,T]);else{const he=on(y),ve=tn(y);if(he||ve){const we=()=>{if(e.f){const Xe=he?q(y)?x[y]:T[y]:y.value;s?dt(Xe)&&zl(Xe,a):dt(Xe)?Xe.includes(a)||Xe.push(a):he?(T[y]=[a],q(y)&&(x[y]=T[y])):(y.value=[a],e.k&&(T[e.k]=y.value))}else he?(T[y]=c,q(y)&&(x[y]=c)):ve&&(y.value=c,e.k&&(T[e.k]=c))};c?(we.id=-1,Kn(we,n)):we()}}}p0().requestIdleCallback;p0().cancelIdleCallback;const Ba=e=>!!e.type.__asyncLoader,nu=e=>e.type.__isKeepAlive;function z_(e,t){ru(e,"a",t)}function Z_(e,t){ru(e,"da",t)}function ru(e,t,n=yn){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(w0(t,r,n),n){let s=n.parent;for(;s&&s.parent;)nu(s.parent.vnode)&&J_(r,t,n,s),s=s.parent}}function J_(e,t,n,r){const s=w0(t,e,r,!0);iu(()=>{zl(r[t],s)},n)}function w0(e,t,n=yn,r=!1){if(n){const s=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...c)=>{os();const d=za(n),y=Ir(t,n,e,c);return d(),cs(),y});return r?s.unshift(a):s.push(a),a}}const qr=e=>(t,n=yn)=>{(!qa||e==="sp")&&w0(e,(...r)=>t(...r),n)},e2=qr("bm"),su=qr("m"),t2=qr("bu"),n2=qr("u"),au=qr("bum"),iu=qr("um"),r2=qr("sp"),s2=qr("rtg"),a2=qr("rtc");function i2(e,t=yn){w0("ec",e,t)}const l2=Symbol.for("v-ndc");function o2(e,t,n,r){let s;const a=n,c=dt(e);if(c||on(e)){const d=c&&ss(e);let y=!1;d&&(y=!tr(e),e=b0(e)),s=new Array(e.length);for(let R=0,T=e.length;R<T;R++)s[R]=t(y?Rn(e[R]):e[R],R,void 0,a)}else if(typeof e=="number"){s=new Array(e);for(let d=0;d<e;d++)s[d]=t(d+1,d,void 0,a)}else if(Wt(e))if(e[Symbol.iterator])s=Array.from(e,(d,y)=>t(d,y,void 0,a));else{const d=Object.keys(e);s=new Array(d.length);for(let y=0,R=d.length;y<R;y++){const T=d[y];s[y]=t(e[T],T,y,a)}}else s=[];return s}const Rl=e=>e?Tu(e)?vo(e):Rl(e.parent):null,Ca=pn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Rl(e.parent),$root:e=>Rl(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ho(e),$forceUpdate:e=>e.f||(e.f=()=>{uo(e.update)}),$nextTick:e=>e.n||(e.n=co.bind(e.proxy)),$watch:e=>C2.bind(e)}),Z0=(e,t)=>e!==Vt&&!e.__isScriptSetup&&Bt(e,t),c2={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:a,accessCache:c,type:d,appContext:y}=e;let R;if(t[0]!=="$"){const q=c[t];if(q!==void 0)switch(q){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return a[t]}else{if(Z0(r,t))return c[t]=1,r[t];if(s!==Vt&&Bt(s,t))return c[t]=2,s[t];if((R=e.propsOptions[0])&&Bt(R,t))return c[t]=3,a[t];if(n!==Vt&&Bt(n,t))return c[t]=4,n[t];gl&&(c[t]=0)}}const T=Ca[t];let x,X;if(T)return t==="$attrs"&&En(e.attrs,"get",""),T(e);if((x=d.__cssModules)&&(x=x[t]))return x;if(n!==Vt&&Bt(n,t))return c[t]=4,n[t];if(X=y.config.globalProperties,Bt(X,t))return X[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:a}=e;return Z0(s,t)?(s[t]=n,!0):r!==Vt&&Bt(r,t)?(r[t]=n,!0):Bt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:a}},c){let d;return!!n[c]||e!==Vt&&Bt(e,c)||Z0(t,c)||(d=a[0])&&Bt(d,c)||Bt(r,c)||Bt(Ca,c)||Bt(s.config.globalProperties,c)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Bt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function i1(e){return dt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let gl=!0;function u2(e){const t=ho(e),n=e.proxy,r=e.ctx;gl=!1,t.beforeCreate&&l1(t.beforeCreate,e,"bc");const{data:s,computed:a,methods:c,watch:d,provide:y,inject:R,created:T,beforeMount:x,mounted:X,beforeUpdate:q,updated:he,activated:ve,deactivated:we,beforeDestroy:Xe,beforeUnmount:K,destroyed:ye,unmounted:pe,render:Ue,renderTracked:rt,renderTriggered:Ge,errorCaptured:at,serverPrefetch:Ze,expose:ot,inheritAttrs:_t,components:zt,directives:Gt,filters:rr}=t;if(R&&f2(R,r,null),c)for(const ht in c){const gt=c[ht];bt(gt)&&(r[ht]=gt.bind(n))}if(s){const ht=s.call(n,n);Wt(ht)&&(e.data=sa(ht))}if(gl=!0,a)for(const ht in a){const gt=a[ht],Qn=bt(gt)?gt.bind(n,n):bt(gt.get)?gt.get.bind(n,n):Cr,vr=!bt(gt)&&bt(gt.set)?gt.set.bind(n):Cr,zn=In({get:Qn,set:vr});Object.defineProperty(r,ht,{enumerable:!0,configurable:!0,get:()=>zn.value,set:cn=>zn.value=cn})}if(d)for(const ht in d)lu(d[ht],r,n,ht);if(y){const ht=bt(y)?y.call(n):y;Reflect.ownKeys(ht).forEach(gt=>{yi(gt,ht[gt])})}T&&l1(T,e,"c");function Ft(ht,gt){dt(gt)?gt.forEach(Qn=>ht(Qn.bind(n))):gt&&ht(gt.bind(n))}if(Ft(e2,x),Ft(su,X),Ft(t2,q),Ft(n2,he),Ft(z_,ve),Ft(Z_,we),Ft(i2,at),Ft(a2,rt),Ft(s2,Ge),Ft(au,K),Ft(iu,pe),Ft(r2,Ze),dt(ot))if(ot.length){const ht=e.exposed||(e.exposed={});ot.forEach(gt=>{Object.defineProperty(ht,gt,{get:()=>n[gt],set:Qn=>n[gt]=Qn})})}else e.exposed||(e.exposed={});Ue&&e.render===Cr&&(e.render=Ue),_t!=null&&(e.inheritAttrs=_t),zt&&(e.components=zt),Gt&&(e.directives=Gt),Ze&&tu(e)}function f2(e,t,n=Cr){dt(e)&&(e=Ml(e));for(const r in e){const s=e[r];let a;Wt(s)?"default"in s?a=nr(s.from||r,s.default,!0):a=nr(s.from||r):a=nr(s),tn(a)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:c=>a.value=c}):t[r]=a}}function l1(e,t,n){Ir(dt(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function lu(e,t,n,r){let s=r.includes(".")?Su(n,r):()=>n[r];if(on(e)){const a=t[e];bt(a)&&Ia(s,a)}else if(bt(e))Ia(s,e.bind(n));else if(Wt(e))if(dt(e))e.forEach(a=>lu(a,t,n,r));else{const a=bt(e.handler)?e.handler.bind(n):t[e.handler];bt(a)&&Ia(s,a,e)}}function ho(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:a,config:{optionMergeStrategies:c}}=e.appContext,d=a.get(t);let y;return d?y=d:!s.length&&!n&&!r?y=t:(y={},s.length&&s.forEach(R=>Pi(y,R,c,!0)),Pi(y,t,c)),Wt(t)&&a.set(t,y),y}function Pi(e,t,n,r=!1){const{mixins:s,extends:a}=t;a&&Pi(e,a,n,!0),s&&s.forEach(c=>Pi(e,c,n,!0));for(const c in t)if(!(r&&c==="expose")){const d=h2[c]||n&&n[c];e[c]=d?d(e[c],t[c]):t[c]}return e}const h2={data:o1,props:c1,emits:c1,methods:ya,computed:ya,beforeCreate:Tn,created:Tn,beforeMount:Tn,mounted:Tn,beforeUpdate:Tn,updated:Tn,beforeDestroy:Tn,beforeUnmount:Tn,destroyed:Tn,unmounted:Tn,activated:Tn,deactivated:Tn,errorCaptured:Tn,serverPrefetch:Tn,components:ya,directives:ya,watch:d2,provide:o1,inject:_2};function o1(e,t){return t?e?function(){return pn(bt(e)?e.call(this,this):e,bt(t)?t.call(this,this):t)}:t:e}function _2(e,t){return ya(Ml(e),Ml(t))}function Ml(e){if(dt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Tn(e,t){return e?[...new Set([].concat(e,t))]:t}function ya(e,t){return e?pn(Object.create(null),e,t):t}function c1(e,t){return e?dt(e)&&dt(t)?[...new Set([...e,...t])]:pn(Object.create(null),i1(e),i1(t??{})):t}function d2(e,t){if(!e)return t;if(!t)return e;const n=pn(Object.create(null),e);for(const r in t)n[r]=Tn(e[r],t[r]);return n}function ou(){return{app:null,config:{isNativeTag:s_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let m2=0;function v2(e,t){return function(r,s=null){bt(r)||(r=pn({},r)),s!=null&&!Wt(s)&&(s=null);const a=ou(),c=new WeakSet,d=[];let y=!1;const R=a.app={_uid:m2++,_component:r,_props:s,_container:null,_context:a,_instance:null,version:z2,get config(){return a.config},set config(T){},use(T,...x){return c.has(T)||(T&&bt(T.install)?(c.add(T),T.install(R,...x)):bt(T)&&(c.add(T),T(R,...x))),R},mixin(T){return a.mixins.includes(T)||a.mixins.push(T),R},component(T,x){return x?(a.components[T]=x,R):a.components[T]},directive(T,x){return x?(a.directives[T]=x,R):a.directives[T]},mount(T,x,X){if(!y){const q=R._ceVNode||It(r,s);return q.appContext=a,X===!0?X="svg":X===!1&&(X=void 0),x&&t?t(q,T):e(q,T,X),y=!0,R._container=T,T.__vue_app__=R,vo(q.component)}},onUnmount(T){d.push(T)},unmount(){y&&(Ir(d,R._instance,16),e(null,R._container),delete R._container.__vue_app__)},provide(T,x){return a.provides[T]=x,R},runWithContext(T){const x=Ms;Ms=R;try{return T()}finally{Ms=x}}};return R}}let Ms=null;function yi(e,t){if(yn){let n=yn.provides;const r=yn.parent&&yn.parent.provides;r===n&&(n=yn.provides=Object.create(r)),n[e]=t}}function nr(e,t,n=!1){const r=yn||er;if(r||Ms){const s=Ms?Ms._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&bt(t)?t.call(r&&r.proxy):t}}function p2(){return!!(yn||er||Ms)}const cu={},uu=()=>Object.create(cu),fu=e=>Object.getPrototypeOf(e)===cu;function b2(e,t,n,r=!1){const s={},a=uu();e.propsDefaults=Object.create(null),hu(e,t,s,a);for(const c in e.propsOptions[0])c in s||(s[c]=void 0);n?e.props=r?s:Uc(s):e.type.props?e.props=s:e.props=a,e.attrs=a}function y2(e,t,n,r){const{props:s,attrs:a,vnode:{patchFlag:c}}=e,d=Tt(s),[y]=e.propsOptions;let R=!1;if((r||c>0)&&!(c&16)){if(c&8){const T=e.vnode.dynamicProps;for(let x=0;x<T.length;x++){let X=T[x];if(S0(e.emitsOptions,X))continue;const q=t[X];if(y)if(Bt(a,X))q!==a[X]&&(a[X]=q,R=!0);else{const he=as(X);s[he]=Tl(y,d,he,q,e,!1)}else q!==a[X]&&(a[X]=q,R=!0)}}}else{hu(e,t,s,a)&&(R=!0);let T;for(const x in d)(!t||!Bt(t,x)&&((T=Is(x))===x||!Bt(t,T)))&&(y?n&&(n[x]!==void 0||n[T]!==void 0)&&(s[x]=Tl(y,d,x,void 0,e,!0)):delete s[x]);if(a!==d)for(const x in a)(!t||!Bt(t,x))&&(delete a[x],R=!0)}R&&Xr(e.attrs,"set","")}function hu(e,t,n,r){const[s,a]=e.propsOptions;let c=!1,d;if(t)for(let y in t){if(ga(y))continue;const R=t[y];let T;s&&Bt(s,T=as(y))?!a||!a.includes(T)?n[T]=R:(d||(d={}))[T]=R:S0(e.emitsOptions,y)||(!(y in r)||R!==r[y])&&(r[y]=R,c=!0)}if(a){const y=Tt(n),R=d||Vt;for(let T=0;T<a.length;T++){const x=a[T];n[x]=Tl(s,y,x,R[x],e,!Bt(R,x))}}return c}function Tl(e,t,n,r,s,a){const c=e[n];if(c!=null){const d=Bt(c,"default");if(d&&r===void 0){const y=c.default;if(c.type!==Function&&!c.skipFactory&&bt(y)){const{propsDefaults:R}=s;if(n in R)r=R[n];else{const T=za(s);r=R[n]=y.call(null,t),T()}}else r=y;s.ce&&s.ce._setProp(n,r)}c[0]&&(a&&!d?r=!1:c[1]&&(r===""||r===Is(n))&&(r=!0))}return r}const w2=new WeakMap;function _u(e,t,n=!1){const r=n?w2:t.propsCache,s=r.get(e);if(s)return s;const a=e.props,c={},d=[];let y=!1;if(!bt(e)){const T=x=>{y=!0;const[X,q]=_u(x,t,!0);pn(c,X),q&&d.push(...q)};!n&&t.mixins.length&&t.mixins.forEach(T),e.extends&&T(e.extends),e.mixins&&e.mixins.forEach(T)}if(!a&&!y)return Wt(e)&&r.set(e,Ks),Ks;if(dt(a))for(let T=0;T<a.length;T++){const x=as(a[T]);u1(x)&&(c[x]=Vt)}else if(a)for(const T in a){const x=as(T);if(u1(x)){const X=a[T],q=c[x]=dt(X)||bt(X)?{type:X}:pn({},X),he=q.type;let ve=!1,we=!0;if(dt(he))for(let Xe=0;Xe<he.length;++Xe){const K=he[Xe],ye=bt(K)&&K.name;if(ye==="Boolean"){ve=!0;break}else ye==="String"&&(we=!1)}else ve=bt(he)&&he.name==="Boolean";q[0]=ve,q[1]=we,(ve||Bt(q,"default"))&&d.push(x)}}const R=[c,d];return Wt(e)&&r.set(e,R),R}function u1(e){return e[0]!=="$"&&!ga(e)}const du=e=>e[0]==="_"||e==="$stable",_o=e=>dt(e)?e.map(Tr):[Tr(e)],S2=(e,t,n)=>{if(t._n)return t;const r=eu((...s)=>_o(t(...s)),n);return r._c=!1,r},mu=(e,t,n)=>{const r=e._ctx;for(const s in e){if(du(s))continue;const a=e[s];if(bt(a))t[s]=S2(s,a,r);else if(a!=null){const c=_o(a);t[s]=()=>c}}},vu=(e,t)=>{const n=_o(t);e.slots.default=()=>n},pu=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},x2=(e,t,n)=>{const r=e.slots=uu();if(e.vnode.shapeFlag&32){const s=t._;s?(pu(r,t,n),n&&Ac(r,"_",s,!0)):mu(t,r)}else t&&vu(e,t)},A2=(e,t,n)=>{const{vnode:r,slots:s}=e;let a=!0,c=Vt;if(r.shapeFlag&32){const d=t._;d?n&&d===1?a=!1:pu(s,t,n):(a=!t.$stable,mu(t,s)),c=t}else t&&(vu(e,t),c={default:1});if(a)for(const d in s)!du(d)&&c[d]==null&&delete s[d]},Kn=k2;function E2(e){return R2(e)}function R2(e,t){const n=p0();n.__VUE__=!0;const{insert:r,remove:s,patchProp:a,createElement:c,createText:d,createComment:y,setText:R,setElementText:T,parentNode:x,nextSibling:X,setScopeId:q=Cr,insertStaticContent:he}=e,ve=(H,$,le,ge=null,ie=null,Ce=null,je=void 0,Fe=null,Ve=!!$.dynamicChildren)=>{if(H===$)return;H&&!pa(H,$)&&(ge=Se(H),cn(H,ie,Ce,!0),H=null),$.patchFlag===-2&&(Ve=!1,$.dynamicChildren=null);const{type:Pe,ref:lt,shapeFlag:Ye}=$;switch(Pe){case x0:we(H,$,le,ge);break;case Xa:Xe(H,$,le,ge);break;case tl:H==null&&K($,le,ge,je);break;case Mr:zt(H,$,le,ge,ie,Ce,je,Fe,Ve);break;default:Ye&1?Ue(H,$,le,ge,ie,Ce,je,Fe,Ve):Ye&6?Gt(H,$,le,ge,ie,Ce,je,Fe,Ve):(Ye&64||Ye&128)&&Pe.process(H,$,le,ge,ie,Ce,je,Fe,Ve,Je)}lt!=null&&ie&&El(lt,H&&H.ref,Ce,$||H,!$)},we=(H,$,le,ge)=>{if(H==null)r($.el=d($.children),le,ge);else{const ie=$.el=H.el;$.children!==H.children&&R(ie,$.children)}},Xe=(H,$,le,ge)=>{H==null?r($.el=y($.children||""),le,ge):$.el=H.el},K=(H,$,le,ge)=>{[H.el,H.anchor]=he(H.children,$,le,ge,H.el,H.anchor)},ye=({el:H,anchor:$},le,ge)=>{let ie;for(;H&&H!==$;)ie=X(H),r(H,le,ge),H=ie;r($,le,ge)},pe=({el:H,anchor:$})=>{let le;for(;H&&H!==$;)le=X(H),s(H),H=le;s($)},Ue=(H,$,le,ge,ie,Ce,je,Fe,Ve)=>{$.type==="svg"?je="svg":$.type==="math"&&(je="mathml"),H==null?rt($,le,ge,ie,Ce,je,Fe,Ve):Ze(H,$,ie,Ce,je,Fe,Ve)},rt=(H,$,le,ge,ie,Ce,je,Fe)=>{let Ve,Pe;const{props:lt,shapeFlag:Ye,transition:ze,dirs:ft}=H;if(Ve=H.el=c(H.type,Ce,lt&&lt.is,lt),Ye&8?T(Ve,H.children):Ye&16&&at(H.children,Ve,null,ge,ie,J0(H,Ce),je,Fe),ft&&ws(H,null,ge,"created"),Ge(Ve,H,H.scopeId,je,ge),lt){for(const Pt in lt)Pt!=="value"&&!ga(Pt)&&a(Ve,Pt,null,lt[Pt],Ce,ge);"value"in lt&&a(Ve,"value",null,lt.value,Ce),(Pe=lt.onVnodeBeforeMount)&&xr(Pe,ge,H)}ft&&ws(H,null,ge,"beforeMount");const vt=g2(ie,ze);vt&&ze.beforeEnter(Ve),r(Ve,$,le),((Pe=lt&&lt.onVnodeMounted)||vt||ft)&&Kn(()=>{Pe&&xr(Pe,ge,H),vt&&ze.enter(Ve),ft&&ws(H,null,ge,"mounted")},ie)},Ge=(H,$,le,ge,ie)=>{if(le&&q(H,le),ge)for(let Ce=0;Ce<ge.length;Ce++)q(H,ge[Ce]);if(ie){let Ce=ie.subTree;if($===Ce||Au(Ce.type)&&(Ce.ssContent===$||Ce.ssFallback===$)){const je=ie.vnode;Ge(H,je,je.scopeId,je.slotScopeIds,ie.parent)}}},at=(H,$,le,ge,ie,Ce,je,Fe,Ve=0)=>{for(let Pe=Ve;Pe<H.length;Pe++){const lt=H[Pe]=Fe?es(H[Pe]):Tr(H[Pe]);ve(null,lt,$,le,ge,ie,Ce,je,Fe)}},Ze=(H,$,le,ge,ie,Ce,je)=>{const Fe=$.el=H.el;let{patchFlag:Ve,dynamicChildren:Pe,dirs:lt}=$;Ve|=H.patchFlag&16;const Ye=H.props||Vt,ze=$.props||Vt;let ft;if(le&&Ss(le,!1),(ft=ze.onVnodeBeforeUpdate)&&xr(ft,le,$,H),lt&&ws($,H,le,"beforeUpdate"),le&&Ss(le,!0),(Ye.innerHTML&&ze.innerHTML==null||Ye.textContent&&ze.textContent==null)&&T(Fe,""),Pe?ot(H.dynamicChildren,Pe,Fe,le,ge,J0($,ie),Ce):je||gt(H,$,Fe,null,le,ge,J0($,ie),Ce,!1),Ve>0){if(Ve&16)_t(Fe,Ye,ze,le,ie);else if(Ve&2&&Ye.class!==ze.class&&a(Fe,"class",null,ze.class,ie),Ve&4&&a(Fe,"style",Ye.style,ze.style,ie),Ve&8){const vt=$.dynamicProps;for(let Pt=0;Pt<vt.length;Pt++){const Et=vt[Pt],Sn=Ye[Et],hn=ze[Et];(hn!==Sn||Et==="value")&&a(Fe,Et,Sn,hn,ie,le)}}Ve&1&&H.children!==$.children&&T(Fe,$.children)}else!je&&Pe==null&&_t(Fe,Ye,ze,le,ie);((ft=ze.onVnodeUpdated)||lt)&&Kn(()=>{ft&&xr(ft,le,$,H),lt&&ws($,H,le,"updated")},ge)},ot=(H,$,le,ge,ie,Ce,je)=>{for(let Fe=0;Fe<$.length;Fe++){const Ve=H[Fe],Pe=$[Fe],lt=Ve.el&&(Ve.type===Mr||!pa(Ve,Pe)||Ve.shapeFlag&70)?x(Ve.el):le;ve(Ve,Pe,lt,null,ge,ie,Ce,je,!0)}},_t=(H,$,le,ge,ie)=>{if($!==le){if($!==Vt)for(const Ce in $)!ga(Ce)&&!(Ce in le)&&a(H,Ce,$[Ce],null,ie,ge);for(const Ce in le){if(ga(Ce))continue;const je=le[Ce],Fe=$[Ce];je!==Fe&&Ce!=="value"&&a(H,Ce,Fe,je,ie,ge)}"value"in le&&a(H,"value",$.value,le.value,ie)}},zt=(H,$,le,ge,ie,Ce,je,Fe,Ve)=>{const Pe=$.el=H?H.el:d(""),lt=$.anchor=H?H.anchor:d("");let{patchFlag:Ye,dynamicChildren:ze,slotScopeIds:ft}=$;ft&&(Fe=Fe?Fe.concat(ft):ft),H==null?(r(Pe,le,ge),r(lt,le,ge),at($.children||[],le,lt,ie,Ce,je,Fe,Ve)):Ye>0&&Ye&64&&ze&&H.dynamicChildren?(ot(H.dynamicChildren,ze,le,ie,Ce,je,Fe),($.key!=null||ie&&$===ie.subTree)&&bu(H,$,!0)):gt(H,$,le,lt,ie,Ce,je,Fe,Ve)},Gt=(H,$,le,ge,ie,Ce,je,Fe,Ve)=>{$.slotScopeIds=Fe,H==null?$.shapeFlag&512?ie.ctx.activate($,le,ge,je,Ve):rr($,le,ge,ie,Ce,je,Ve):$n(H,$,Ve)},rr=(H,$,le,ge,ie,Ce,je)=>{const Fe=H.component=q2(H,ge,ie);if(nu(H)&&(Fe.ctx.renderer=Je),Y2(Fe,!1,je),Fe.asyncDep){if(ie&&ie.registerDep(Fe,Ft,je),!H.el){const Ve=Fe.subTree=It(Xa);Xe(null,Ve,$,le)}}else Ft(Fe,H,$,le,ie,Ce,je)},$n=(H,$,le)=>{const ge=$.component=H.component;if(L2(H,$,le))if(ge.asyncDep&&!ge.asyncResolved){ht(ge,$,le);return}else ge.next=$,ge.update();else $.el=H.el,ge.vnode=$},Ft=(H,$,le,ge,ie,Ce,je)=>{const Fe=()=>{if(H.isMounted){let{next:Ye,bu:ze,u:ft,parent:vt,vnode:Pt}=H;{const _n=yu(H);if(_n){Ye&&(Ye.el=Pt.el,ht(H,Ye,je)),_n.asyncDep.then(()=>{H.isUnmounted||Fe()});return}}let Et=Ye,Sn;Ss(H,!1),Ye?(Ye.el=Pt.el,ht(H,Ye,je)):Ye=Pt,ze&&K0(ze),(Sn=Ye.props&&Ye.props.onVnodeBeforeUpdate)&&xr(Sn,vt,Ye,Pt),Ss(H,!0);const hn=el(H),Vn=H.subTree;H.subTree=hn,ve(Vn,hn,x(Vn.el),Se(Vn),H,ie,Ce),Ye.el=hn.el,Et===null&&F2(H,hn.el),ft&&Kn(ft,ie),(Sn=Ye.props&&Ye.props.onVnodeUpdated)&&Kn(()=>xr(Sn,vt,Ye,Pt),ie)}else{let Ye;const{el:ze,props:ft}=$,{bm:vt,m:Pt,parent:Et,root:Sn,type:hn}=H,Vn=Ba($);if(Ss(H,!1),vt&&K0(vt),!Vn&&(Ye=ft&&ft.onVnodeBeforeMount)&&xr(Ye,Et,$),Ss(H,!0),ze&&yt){const _n=()=>{H.subTree=el(H),yt(ze,H.subTree,H,ie,null)};Vn&&hn.__asyncHydrate?hn.__asyncHydrate(ze,H,_n):_n()}else{Sn.ce&&Sn.ce._injectChildStyle(hn);const _n=H.subTree=el(H);ve(null,_n,le,ge,H,ie,Ce),$.el=_n.el}if(Pt&&Kn(Pt,ie),!Vn&&(Ye=ft&&ft.onVnodeMounted)){const _n=$;Kn(()=>xr(Ye,Et,_n),ie)}($.shapeFlag&256||Et&&Ba(Et.vnode)&&Et.vnode.shapeFlag&256)&&H.a&&Kn(H.a,ie),H.isMounted=!0,$=le=ge=null}};H.scope.on();const Ve=H.effect=new Ic(Fe);H.scope.off();const Pe=H.update=Ve.run.bind(Ve),lt=H.job=Ve.runIfDirty.bind(Ve);lt.i=H,lt.id=H.uid,Ve.scheduler=()=>uo(lt),Ss(H,!0),Pe()},ht=(H,$,le)=>{$.component=H;const ge=H.vnode.props;H.vnode=$,H.next=null,y2(H,$.props,ge,le),A2(H,$.children,le),os(),a1(H),cs()},gt=(H,$,le,ge,ie,Ce,je,Fe,Ve=!1)=>{const Pe=H&&H.children,lt=H?H.shapeFlag:0,Ye=$.children,{patchFlag:ze,shapeFlag:ft}=$;if(ze>0){if(ze&128){vr(Pe,Ye,le,ge,ie,Ce,je,Fe,Ve);return}else if(ze&256){Qn(Pe,Ye,le,ge,ie,Ce,je,Fe,Ve);return}}ft&8?(lt&16&&gn(Pe,ie,Ce),Ye!==Pe&&T(le,Ye)):lt&16?ft&16?vr(Pe,Ye,le,ge,ie,Ce,je,Fe,Ve):gn(Pe,ie,Ce,!0):(lt&8&&T(le,""),ft&16&&at(Ye,le,ge,ie,Ce,je,Fe,Ve))},Qn=(H,$,le,ge,ie,Ce,je,Fe,Ve)=>{H=H||Ks,$=$||Ks;const Pe=H.length,lt=$.length,Ye=Math.min(Pe,lt);let ze;for(ze=0;ze<Ye;ze++){const ft=$[ze]=Ve?es($[ze]):Tr($[ze]);ve(H[ze],ft,le,null,ie,Ce,je,Fe,Ve)}Pe>lt?gn(H,ie,Ce,!0,!1,Ye):at($,le,ge,ie,Ce,je,Fe,Ve,Ye)},vr=(H,$,le,ge,ie,Ce,je,Fe,Ve)=>{let Pe=0;const lt=$.length;let Ye=H.length-1,ze=lt-1;for(;Pe<=Ye&&Pe<=ze;){const ft=H[Pe],vt=$[Pe]=Ve?es($[Pe]):Tr($[Pe]);if(pa(ft,vt))ve(ft,vt,le,null,ie,Ce,je,Fe,Ve);else break;Pe++}for(;Pe<=Ye&&Pe<=ze;){const ft=H[Ye],vt=$[ze]=Ve?es($[ze]):Tr($[ze]);if(pa(ft,vt))ve(ft,vt,le,null,ie,Ce,je,Fe,Ve);else break;Ye--,ze--}if(Pe>Ye){if(Pe<=ze){const ft=ze+1,vt=ft<lt?$[ft].el:ge;for(;Pe<=ze;)ve(null,$[Pe]=Ve?es($[Pe]):Tr($[Pe]),le,vt,ie,Ce,je,Fe,Ve),Pe++}}else if(Pe>ze)for(;Pe<=Ye;)cn(H[Pe],ie,Ce,!0),Pe++;else{const ft=Pe,vt=Pe,Pt=new Map;for(Pe=vt;Pe<=ze;Pe++){const Xt=$[Pe]=Ve?es($[Pe]):Tr($[Pe]);Xt.key!=null&&Pt.set(Xt.key,Pe)}let Et,Sn=0;const hn=ze-vt+1;let Vn=!1,_n=0;const pr=new Array(hn);for(Pe=0;Pe<hn;Pe++)pr[Pe]=0;for(Pe=ft;Pe<=Ye;Pe++){const Xt=H[Pe];if(Sn>=hn){cn(Xt,ie,Ce,!0);continue}let On;if(Xt.key!=null)On=Pt.get(Xt.key);else for(Et=vt;Et<=ze;Et++)if(pr[Et-vt]===0&&pa(Xt,$[Et])){On=Et;break}On===void 0?cn(Xt,ie,Ce,!0):(pr[On-vt]=Pe+1,On>=_n?_n=On:Vn=!0,ve(Xt,$[On],le,null,ie,Ce,je,Fe,Ve),Sn++)}const ti=Vn?M2(pr):Ks;for(Et=ti.length-1,Pe=hn-1;Pe>=0;Pe--){const Xt=vt+Pe,On=$[Xt],ni=Xt+1<lt?$[Xt+1].el:ge;pr[Pe]===0?ve(null,On,le,ni,ie,Ce,je,Fe,Ve):Vn&&(Et<0||Pe!==ti[Et]?zn(On,le,ni,2):Et--)}}},zn=(H,$,le,ge,ie=null)=>{const{el:Ce,type:je,transition:Fe,children:Ve,shapeFlag:Pe}=H;if(Pe&6){zn(H.component.subTree,$,le,ge);return}if(Pe&128){H.suspense.move($,le,ge);return}if(Pe&64){je.move(H,$,le,Je);return}if(je===Mr){r(Ce,$,le);for(let Ye=0;Ye<Ve.length;Ye++)zn(Ve[Ye],$,le,ge);r(H.anchor,$,le);return}if(je===tl){ye(H,$,le);return}if(ge!==2&&Pe&1&&Fe)if(ge===0)Fe.beforeEnter(Ce),r(Ce,$,le),Kn(()=>Fe.enter(Ce),ie);else{const{leave:Ye,delayLeave:ze,afterLeave:ft}=Fe,vt=()=>r(Ce,$,le),Pt=()=>{Ye(Ce,()=>{vt(),ft&&ft()})};ze?ze(Ce,vt,Pt):Pt()}else r(Ce,$,le)},cn=(H,$,le,ge=!1,ie=!1)=>{const{type:Ce,props:je,ref:Fe,children:Ve,dynamicChildren:Pe,shapeFlag:lt,patchFlag:Ye,dirs:ze,cacheIndex:ft}=H;if(Ye===-2&&(ie=!1),Fe!=null&&El(Fe,null,le,H,!0),ft!=null&&($.renderCache[ft]=void 0),lt&256){$.ctx.deactivate(H);return}const vt=lt&1&&ze,Pt=!Ba(H);let Et;if(Pt&&(Et=je&&je.onVnodeBeforeUnmount)&&xr(Et,$,H),lt&6)us(H.component,le,ge);else{if(lt&128){H.suspense.unmount(le,ge);return}vt&&ws(H,null,$,"beforeUnmount"),lt&64?H.type.remove(H,$,le,Je,ge):Pe&&!Pe.hasOnce&&(Ce!==Mr||Ye>0&&Ye&64)?gn(Pe,$,le,!1,!0):(Ce===Mr&&Ye&384||!ie&&lt&16)&&gn(Ve,$,le),ge&&ct(H)}(Pt&&(Et=je&&je.onVnodeUnmounted)||vt)&&Kn(()=>{Et&&xr(Et,$,H),vt&&ws(H,null,$,"unmounted")},le)},ct=H=>{const{type:$,el:le,anchor:ge,transition:ie}=H;if($===Mr){g(le,ge);return}if($===tl){pe(H);return}const Ce=()=>{s(le),ie&&!ie.persisted&&ie.afterLeave&&ie.afterLeave()};if(H.shapeFlag&1&&ie&&!ie.persisted){const{leave:je,delayLeave:Fe}=ie,Ve=()=>je(le,Ce);Fe?Fe(H.el,Ce,Ve):Ve()}else Ce()},g=(H,$)=>{let le;for(;H!==$;)le=X(H),s(H),H=le;s($)},us=(H,$,le)=>{const{bum:ge,scope:ie,job:Ce,subTree:je,um:Fe,m:Ve,a:Pe}=H;f1(Ve),f1(Pe),ge&&K0(ge),ie.stop(),Ce&&(Ce.flags|=8,cn(je,H,$,le)),Fe&&Kn(Fe,$),Kn(()=>{H.isUnmounted=!0},$),$&&$.pendingBranch&&!$.isUnmounted&&H.asyncDep&&!H.asyncResolved&&H.suspenseId===$.pendingId&&($.deps--,$.deps===0&&$.resolve())},gn=(H,$,le,ge=!1,ie=!1,Ce=0)=>{for(let je=Ce;je<H.length;je++)cn(H[je],$,le,ge,ie)},Se=H=>{if(H.shapeFlag&6)return Se(H.component.subTree);if(H.shapeFlag&128)return H.suspense.next();const $=X(H.anchor||H.el),le=$&&$[G_];return le?X(le):$};let Qe=!1;const De=(H,$,le)=>{H==null?$._vnode&&cn($._vnode,null,null,!0):ve($._vnode||null,H,$,null,null,null,le),$._vnode=H,Qe||(Qe=!0,a1(),zc(),Qe=!1)},Je={p:ve,um:cn,m:zn,r:ct,mt:rr,mc:at,pc:gt,pbc:ot,n:Se,o:e};let St,yt;return{render:De,hydrate:St,createApp:v2(De,St)}}function J0({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Ss({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function g2(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function bu(e,t,n=!1){const r=e.children,s=t.children;if(dt(r)&&dt(s))for(let a=0;a<r.length;a++){const c=r[a];let d=s[a];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=s[a]=es(s[a]),d.el=c.el),!n&&d.patchFlag!==-2&&bu(c,d)),d.type===x0&&(d.el=c.el)}}function M2(e){const t=e.slice(),n=[0];let r,s,a,c,d;const y=e.length;for(r=0;r<y;r++){const R=e[r];if(R!==0){if(s=n[n.length-1],e[s]<R){t[r]=s,n.push(r);continue}for(a=0,c=n.length-1;a<c;)d=a+c>>1,e[n[d]]<R?a=d+1:c=d;R<e[n[a]]&&(a>0&&(t[r]=n[a-1]),n[a]=r)}}for(a=n.length,c=n[a-1];a-- >0;)n[a]=c,c=t[c];return n}function yu(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:yu(t)}function f1(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const T2=Symbol.for("v-scx"),B2=()=>nr(T2);function Ia(e,t,n){return wu(e,t,n)}function wu(e,t,n=Vt){const{immediate:r,deep:s,flush:a,once:c}=n,d=pn({},n),y=t&&r||!t&&a!=="post";let R;if(qa){if(a==="sync"){const q=B2();R=q.__watcherHandles||(q.__watcherHandles=[])}else if(!y){const q=()=>{};return q.stop=Cr,q.resume=Cr,q.pause=Cr,q}}const T=yn;d.call=(q,he,ve)=>Ir(q,T,he,ve);let x=!1;a==="post"?d.scheduler=q=>{Kn(q,T&&T.suspense)}:a!=="sync"&&(x=!0,d.scheduler=(q,he)=>{he?q():uo(q)}),d.augmentJob=q=>{t&&(q.flags|=4),x&&(q.flags|=2,T&&(q.id=T.uid,q.i=T))};const X=U_(e,t,d);return qa&&(R?R.push(X):y&&X()),X}function C2(e,t,n){const r=this.proxy,s=on(e)?e.includes(".")?Su(r,e):()=>r[e]:e.bind(r,r);let a;bt(t)?a=t:(a=t.handler,n=t);const c=za(this),d=wu(s,a.bind(r),n);return c(),d}function Su(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const I2=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${as(t)}Modifiers`]||e[`${Is(t)}Modifiers`];function O2(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Vt;let s=n;const a=t.startsWith("update:"),c=a&&I2(r,t.slice(7));c&&(c.trim&&(s=n.map(T=>on(T)?T.trim():T)),c.number&&(s=n.map(c_)));let d,y=r[d=Y0(t)]||r[d=Y0(as(t))];!y&&a&&(y=r[d=Y0(Is(t))]),y&&Ir(y,e,6,s);const R=r[d+"Once"];if(R){if(!e.emitted)e.emitted={};else if(e.emitted[d])return;e.emitted[d]=!0,Ir(R,e,6,s)}}function xu(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const a=e.emits;let c={},d=!1;if(!bt(e)){const y=R=>{const T=xu(R,t,!0);T&&(d=!0,pn(c,T))};!n&&t.mixins.length&&t.mixins.forEach(y),e.extends&&y(e.extends),e.mixins&&e.mixins.forEach(y)}return!a&&!d?(Wt(e)&&r.set(e,null),null):(dt(a)?a.forEach(y=>c[y]=null):pn(c,a),Wt(e)&&r.set(e,c),c)}function S0(e,t){return!e||!d0(t)?!1:(t=t.slice(2).replace(/Once$/,""),Bt(e,t[0].toLowerCase()+t.slice(1))||Bt(e,Is(t))||Bt(e,t))}function el(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[a],slots:c,attrs:d,emit:y,render:R,renderCache:T,props:x,data:X,setupState:q,ctx:he,inheritAttrs:ve}=e,we=Oi(e);let Xe,K;try{if(n.shapeFlag&4){const pe=s||r,Ue=pe;Xe=Tr(R.call(Ue,pe,T,x,q,X,he)),K=d}else{const pe=t;Xe=Tr(pe.length>1?pe(x,{attrs:d,slots:c,emit:y}):pe(x,null)),K=t.props?d:P2(d)}}catch(pe){Oa.length=0,y0(pe,e,1),Xe=It(Xa)}let ye=Xe;if(K&&ve!==!1){const pe=Object.keys(K),{shapeFlag:Ue}=ye;pe.length&&Ue&7&&(a&&pe.some(Ql)&&(K=N2(K,a)),ye=ea(ye,K,!1,!0))}return n.dirs&&(ye=ea(ye,null,!1,!0),ye.dirs=ye.dirs?ye.dirs.concat(n.dirs):n.dirs),n.transition&&fo(ye,n.transition),Xe=ye,Oi(we),Xe}const P2=e=>{let t;for(const n in e)(n==="class"||n==="style"||d0(n))&&((t||(t={}))[n]=e[n]);return t},N2=(e,t)=>{const n={};for(const r in e)(!Ql(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function L2(e,t,n){const{props:r,children:s,component:a}=e,{props:c,children:d,patchFlag:y}=t,R=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&y>=0){if(y&1024)return!0;if(y&16)return r?h1(r,c,R):!!c;if(y&8){const T=t.dynamicProps;for(let x=0;x<T.length;x++){const X=T[x];if(c[X]!==r[X]&&!S0(R,X))return!0}}}else return(s||d)&&(!d||!d.$stable)?!0:r===c?!1:r?c?h1(r,c,R):!0:!!c;return!1}function h1(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const a=r[s];if(t[a]!==e[a]&&!S0(n,a))return!0}return!1}function F2({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Au=e=>e.__isSuspense;function k2(e,t){t&&t.pendingBranch?dt(e)?t.effects.push(...e):t.effects.push(e):W_(e)}const Mr=Symbol.for("v-fgt"),x0=Symbol.for("v-txt"),Xa=Symbol.for("v-cmt"),tl=Symbol.for("v-stc"),Oa=[];let Gn=null;function wi(e=!1){Oa.push(Gn=e?null:[])}function H2(){Oa.pop(),Gn=Oa[Oa.length-1]||null}let ja=1;function _1(e){ja+=e,e<0&&Gn&&(Gn.hasOnce=!0)}function Eu(e){return e.dynamicChildren=ja>0?Gn||Ks:null,H2(),ja>0&&Gn&&Gn.push(e),e}function nl(e,t,n,r,s,a){return Eu(Vr(e,t,n,r,s,a,!0))}function $2(e,t,n,r,s){return Eu(It(e,t,n,r,s,!0))}function Ni(e){return e?e.__v_isVNode===!0:!1}function pa(e,t){return e.type===t.type&&e.key===t.key}const Ru=({key:e})=>e??null,Si=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?on(e)||tn(e)||bt(e)?{i:er,r:e,k:t,f:!!n}:e:null);function Vr(e,t=null,n=null,r=0,s=null,a=e===Mr?0:1,c=!1,d=!1){const y={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ru(t),ref:t&&Si(t),scopeId:Jc,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:er};return d?(mo(y,n),a&128&&e.normalize(y)):n&&(y.shapeFlag|=on(n)?8:16),ja>0&&!c&&Gn&&(y.patchFlag>0||a&6)&&y.patchFlag!==32&&Gn.push(y),y}const It=V2;function V2(e,t=null,n=null,r=0,s=null,a=!1){if((!e||e===l2)&&(e=Xa),Ni(e)){const d=ea(e,t,!0);return n&&mo(d,n),ja>0&&!a&&Gn&&(d.shapeFlag&6?Gn[Gn.indexOf(e)]=d:Gn.push(d)),d.patchFlag=-2,d}if(Q2(e)&&(e=e.__vccOpts),t){t=D2(t);let{class:d,style:y}=t;d&&!on(d)&&(t.class=eo(d)),Wt(y)&&(lo(y)&&!dt(y)&&(y=pn({},y)),t.style=Jl(y))}const c=on(e)?1:Au(e)?128:Q_(e)?64:Wt(e)?4:bt(e)?2:0;return Vr(e,t,n,r,s,c,a,!0)}function D2(e){return e?lo(e)||fu(e)?pn({},e):e:null}function ea(e,t,n=!1,r=!1){const{props:s,ref:a,patchFlag:c,children:d,transition:y}=e,R=t?Mu(s||{},t):s,T={__v_isVNode:!0,__v_skip:!0,type:e.type,props:R,key:R&&Ru(R),ref:t&&t.ref?n&&a?dt(a)?a.concat(Si(t)):[a,Si(t)]:Si(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:d,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Mr?c===-1?16:c|16:c,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:y,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ea(e.ssContent),ssFallback:e.ssFallback&&ea(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return y&&r&&fo(T,y.clone(T)),T}function gu(e=" ",t=0){return It(x0,null,e,t)}function Tr(e){return e==null||typeof e=="boolean"?It(Xa):dt(e)?It(Mr,null,e.slice()):Ni(e)?es(e):It(x0,null,String(e))}function es(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ea(e)}function mo(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(dt(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),mo(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!fu(t)?t._ctx=er:s===3&&er&&(er.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else bt(t)?(t={default:t,_ctx:er},n=32):(t=String(t),r&64?(n=16,t=[gu(t)]):n=8);e.children=t,e.shapeFlag|=n}function Mu(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=eo([t.class,r.class]));else if(s==="style")t.style=Jl([t.style,r.style]);else if(d0(s)){const a=t[s],c=r[s];c&&a!==c&&!(dt(a)&&a.includes(c))&&(t[s]=a?[].concat(a,c):c)}else s!==""&&(t[s]=r[s])}return t}function xr(e,t,n,r=null){Ir(e,t,7,[n,r])}const X2=ou();let j2=0;function q2(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||X2,a={uid:j2++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Tc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:_u(r,s),emitsOptions:xu(r,s),emit:null,emitted:null,propsDefaults:Vt,inheritAttrs:r.inheritAttrs,ctx:Vt,data:Vt,props:Vt,attrs:Vt,slots:Vt,refs:Vt,setupState:Vt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=O2.bind(null,a),e.ce&&e.ce(a),a}let yn=null;const U2=()=>yn||er;let Li,Bl;{const e=p0(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),a=>{s.length>1?s.forEach(c=>c(a)):s[0](a)}};Li=t("__VUE_INSTANCE_SETTERS__",n=>yn=n),Bl=t("__VUE_SSR_SETTERS__",n=>qa=n)}const za=e=>{const t=yn;return Li(e),e.scope.on(),()=>{e.scope.off(),Li(t)}},d1=()=>{yn&&yn.scope.off(),Li(null)};function Tu(e){return e.vnode.shapeFlag&4}let qa=!1;function Y2(e,t=!1,n=!1){t&&Bl(t);const{props:r,children:s}=e.vnode,a=Tu(e);b2(e,r,a,t),x2(e,s,n);const c=a?K2(e,t):void 0;return t&&Bl(!1),c}function K2(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,c2);const{setup:r}=n;if(r){os();const s=e.setupContext=r.length>1?G2(e):null,a=za(e),c=Qa(r,e,0,[e.props,s]),d=yc(c);if(cs(),a(),(d||e.sp)&&!Ba(e)&&tu(e),d){if(c.then(d1,d1),t)return c.then(y=>{m1(e,y,t)}).catch(y=>{y0(y,e,0)});e.asyncDep=c}else m1(e,c,t)}else Bu(e,t)}function m1(e,t,n){bt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Wt(t)&&(e.setupState=Wc(t)),Bu(e,n)}let v1;function Bu(e,t,n){const r=e.type;if(!e.render){if(!t&&v1&&!r.render){const s=r.template||ho(e).template;if(s){const{isCustomElement:a,compilerOptions:c}=e.appContext.config,{delimiters:d,compilerOptions:y}=r,R=pn(pn({isCustomElement:a,delimiters:d},c),y);r.render=v1(s,R)}}e.render=r.render||Cr}{const s=za(e);os();try{u2(e)}finally{cs(),s()}}}const W2={get(e,t){return En(e,"get",""),e[t]}};function G2(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,W2),slots:e.slots,emit:e.emit,expose:t}}function vo(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Wc(oo(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Ca)return Ca[n](e)},has(t,n){return n in t||n in Ca}})):e.proxy}function Q2(e){return bt(e)&&"__vccOpts"in e}const In=(e,t)=>j_(e,t,qa);function Cu(e,t,n){const r=arguments.length;return r===2?Wt(t)&&!dt(t)?Ni(t)?It(e,null,[t]):It(e,t):It(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ni(n)&&(n=[n]),It(e,t,n))}const z2="3.5.12";/**
* @vue/runtime-dom v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Cl;const p1=typeof window<"u"&&window.trustedTypes;if(p1)try{Cl=p1.createPolicy("vue",{createHTML:e=>e})}catch{}const Iu=Cl?e=>Cl.createHTML(e):e=>e,Z2="http://www.w3.org/2000/svg",J2="http://www.w3.org/1998/Math/MathML",Dr=typeof document<"u"?document:null,b1=Dr&&Dr.createElement("template"),ed={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?Dr.createElementNS(Z2,e):t==="mathml"?Dr.createElementNS(J2,e):n?Dr.createElement(e,{is:n}):Dr.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Dr.createTextNode(e),createComment:e=>Dr.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Dr.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,a){const c=n?n.previousSibling:t.lastChild;if(s&&(s===a||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===a||!(s=s.nextSibling)););else{b1.innerHTML=Iu(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const d=b1.content;if(r==="svg"||r==="mathml"){const y=d.firstChild;for(;y.firstChild;)d.appendChild(y.firstChild);d.removeChild(y)}t.insertBefore(d,n)}return[c?c.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},td=Symbol("_vtc");function nd(e,t,n){const r=e[td];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const y1=Symbol("_vod"),rd=Symbol("_vsh"),sd=Symbol(""),ad=/(^|;)\s*display\s*:/;function id(e,t,n){const r=e.style,s=on(n);let a=!1;if(n&&!s){if(t)if(on(t))for(const c of t.split(";")){const d=c.slice(0,c.indexOf(":")).trim();n[d]==null&&xi(r,d,"")}else for(const c in t)n[c]==null&&xi(r,c,"");for(const c in n)c==="display"&&(a=!0),xi(r,c,n[c])}else if(s){if(t!==n){const c=r[sd];c&&(n+=";"+c),r.cssText=n,a=ad.test(n)}}else t&&e.removeAttribute("style");y1 in e&&(e[y1]=a?r.display:"",e[rd]&&(r.display="none"))}const w1=/\s*!important$/;function xi(e,t,n){if(dt(n))n.forEach(r=>xi(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=ld(e,t);w1.test(n)?e.setProperty(Is(r),n.replace(w1,""),"important"):e[r]=n}}const S1=["Webkit","Moz","ms"],rl={};function ld(e,t){const n=rl[t];if(n)return n;let r=as(t);if(r!=="filter"&&r in e)return rl[t]=r;r=xc(r);for(let s=0;s<S1.length;s++){const a=S1[s]+r;if(a in e)return rl[t]=a}return t}const x1="http://www.w3.org/1999/xlink";function A1(e,t,n,r,s,a=m_(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(x1,t.slice(6,t.length)):e.setAttributeNS(x1,t,n):n==null||a&&!Ec(n)?e.removeAttribute(t):e.setAttribute(t,a?"":ls(n)?String(n):n)}function E1(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Iu(n):n);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const d=a==="OPTION"?e.getAttribute("value")||"":e.value,y=n==null?e.type==="checkbox"?"on":"":String(n);(d!==y||!("_value"in e))&&(e.value=y),n==null&&e.removeAttribute(t),e._value=n;return}let c=!1;if(n===""||n==null){const d=typeof e[t];d==="boolean"?n=Ec(n):n==null&&d==="string"?(n="",c=!0):d==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(s||t)}function od(e,t,n,r){e.addEventListener(t,n,r)}function cd(e,t,n,r){e.removeEventListener(t,n,r)}const R1=Symbol("_vei");function ud(e,t,n,r,s=null){const a=e[R1]||(e[R1]={}),c=a[t];if(r&&c)c.value=r;else{const[d,y]=fd(t);if(r){const R=a[t]=dd(r,s);od(e,d,R,y)}else c&&(cd(e,d,c,y),a[t]=void 0)}}const g1=/(?:Once|Passive|Capture)$/;function fd(e){let t;if(g1.test(e)){t={};let r;for(;r=e.match(g1);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Is(e.slice(2)),t]}let sl=0;const hd=Promise.resolve(),_d=()=>sl||(hd.then(()=>sl=0),sl=Date.now());function dd(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ir(md(r,n.value),t,5,[r])};return n.value=e,n.attached=_d(),n}function md(e,t){if(dt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const M1=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,vd=(e,t,n,r,s,a)=>{const c=s==="svg";t==="class"?nd(e,r,c):t==="style"?id(e,n,r):d0(t)?Ql(t)||ud(e,t,n,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):pd(e,t,r,c))?(E1(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&A1(e,t,r,c,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!on(r))?E1(e,as(t),r,a,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),A1(e,t,r,c))};function pd(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&M1(t)&&bt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return M1(t)&&on(n)?!1:t in e}const bd=["ctrl","shift","alt","meta"],yd={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>bd.some(n=>e[`${n}Key`]&&!t.includes(n))},wd=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(s,...a)=>{for(let c=0;c<t.length;c++){const d=yd[t[c]];if(d&&d(s,t))return}return e(s,...a)})},Sd=pn({patchProp:vd},ed);let T1;function xd(){return T1||(T1=E2(Sd))}const Ad=(...e)=>{const t=xd().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=Rd(r);if(!s)return;const a=t._component;!bt(a)&&!a.render&&!a.template&&(a.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const c=n(s,!1,Ed(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),c},t};function Ed(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Rd(e){return on(e)?document.querySelector(e):e}var gd=!1;/*!
 * pinia v2.2.4
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let Ou;const A0=e=>Ou=e,Pu=Symbol();function Il(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Pa;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Pa||(Pa={}));function Md(){const e=Bc(!0),t=e.run(()=>is({}));let n=[],r=[];const s=oo({install(a){A0(s),s._a=a,a.provide(Pu,s),a.config.globalProperties.$pinia=s,r.forEach(c=>n.push(c)),r=[]},use(a){return!this._a&&!gd?r.push(a):n.push(a),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const Nu=()=>{};function B1(e,t,n,r=Nu){e.push(t);const s=()=>{const a=e.indexOf(t);a>-1&&(e.splice(a,1),r())};return!n&&Cc()&&v_(s),s}function Hs(e,...t){e.slice().forEach(n=>{n(...t)})}const Td=e=>e(),C1=Symbol(),al=Symbol();function Ol(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];Il(s)&&Il(r)&&e.hasOwnProperty(n)&&!tn(r)&&!ss(r)?e[n]=Ol(s,r):e[n]=r}return e}const Bd=Symbol();function Cd(e){return!Il(e)||!e.hasOwnProperty(Bd)}const{assign:Zr}=Object;function Id(e){return!!(tn(e)&&e.effect)}function Od(e,t,n,r){const{state:s,actions:a,getters:c}=t,d=n.state.value[e];let y;function R(){d||(n.state.value[e]=s?s():{});const T=$_(n.state.value[e]);return Zr(T,a,Object.keys(c||{}).reduce((x,X)=>(x[X]=oo(In(()=>{A0(n);const q=n._s.get(e);return c[X].call(q,q)})),x),{}))}return y=Lu(e,R,t,n,r,!0),y}function Lu(e,t,n={},r,s,a){let c;const d=Zr({actions:{}},n),y={deep:!0};let R,T,x=[],X=[],q;const he=r.state.value[e];!a&&!he&&(r.state.value[e]={}),is({});let ve;function we(at){let Ze;R=T=!1,typeof at=="function"?(at(r.state.value[e]),Ze={type:Pa.patchFunction,storeId:e,events:q}):(Ol(r.state.value[e],at),Ze={type:Pa.patchObject,payload:at,storeId:e,events:q});const ot=ve=Symbol();co().then(()=>{ve===ot&&(R=!0)}),T=!0,Hs(x,Ze,r.state.value[e])}const Xe=a?function(){const{state:Ze}=n,ot=Ze?Ze():{};this.$patch(_t=>{Zr(_t,ot)})}:Nu;function K(){c.stop(),x=[],X=[],r._s.delete(e)}const ye=(at,Ze="")=>{if(C1 in at)return at[al]=Ze,at;const ot=function(){A0(r);const _t=Array.from(arguments),zt=[],Gt=[];function rr(ht){zt.push(ht)}function $n(ht){Gt.push(ht)}Hs(X,{args:_t,name:ot[al],store:Ue,after:rr,onError:$n});let Ft;try{Ft=at.apply(this&&this.$id===e?this:Ue,_t)}catch(ht){throw Hs(Gt,ht),ht}return Ft instanceof Promise?Ft.then(ht=>(Hs(zt,ht),ht)).catch(ht=>(Hs(Gt,ht),Promise.reject(ht))):(Hs(zt,Ft),Ft)};return ot[C1]=!0,ot[al]=Ze,ot},pe={_p:r,$id:e,$onAction:B1.bind(null,X),$patch:we,$reset:Xe,$subscribe(at,Ze={}){const ot=B1(x,at,Ze.detached,()=>_t()),_t=c.run(()=>Ia(()=>r.state.value[e],zt=>{(Ze.flush==="sync"?T:R)&&at({storeId:e,type:Pa.direct,events:q},zt)},Zr({},y,Ze)));return ot},$dispose:K},Ue=sa(pe);r._s.set(e,Ue);const Ge=(r._a&&r._a.runWithContext||Td)(()=>r._e.run(()=>(c=Bc()).run(()=>t({action:ye}))));for(const at in Ge){const Ze=Ge[at];if(tn(Ze)&&!Id(Ze)||ss(Ze))a||(he&&Cd(Ze)&&(tn(Ze)?Ze.value=he[at]:Ol(Ze,he[at])),r.state.value[e][at]=Ze);else if(typeof Ze=="function"){const ot=ye(Ze,at);Ge[at]=ot,d.actions[at]=Ze}}return Zr(Ue,Ge),Zr(Tt(Ue),Ge),Object.defineProperty(Ue,"$state",{get:()=>r.state.value[e],set:at=>{we(Ze=>{Zr(Ze,at)})}}),r._p.forEach(at=>{Zr(Ue,c.run(()=>at({store:Ue,app:r._a,pinia:r,options:d})))}),he&&a&&n.hydrate&&n.hydrate(Ue.$state,he),R=!0,T=!0,Ue}function Pd(e,t,n){let r,s;const a=typeof t=="function";r=e,s=a?n:t;function c(d,y){const R=p2();return d=d||(R?nr(Pu,null):null),d&&A0(d),d=Ou,d._s.has(r)||(a?Lu(r,t,s,d):Od(r,s,d)),d._s.get(r)}return c.$id=r,c}/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const js=typeof document<"u";function Fu(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Nd(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Fu(e.default)}const Ct=Object.assign;function il(e,t){const n={};for(const r in t){const s=t[r];n[r]=dr(s)?s.map(e):e(s)}return n}const Na=()=>{},dr=Array.isArray,ku=/#/g,Ld=/&/g,Fd=/\//g,kd=/=/g,Hd=/\?/g,Hu=/\+/g,$d=/%5B/g,Vd=/%5D/g,$u=/%5E/g,Dd=/%60/g,Vu=/%7B/g,Xd=/%7C/g,Du=/%7D/g,jd=/%20/g;function po(e){return encodeURI(""+e).replace(Xd,"|").replace($d,"[").replace(Vd,"]")}function qd(e){return po(e).replace(Vu,"{").replace(Du,"}").replace($u,"^")}function Pl(e){return po(e).replace(Hu,"%2B").replace(jd,"+").replace(ku,"%23").replace(Ld,"%26").replace(Dd,"`").replace(Vu,"{").replace(Du,"}").replace($u,"^")}function Ud(e){return Pl(e).replace(kd,"%3D")}function Yd(e){return po(e).replace(ku,"%23").replace(Hd,"%3F")}function Kd(e){return e==null?"":Yd(e).replace(Fd,"%2F")}function Ua(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Wd=/\/$/,Gd=e=>e.replace(Wd,"");function ll(e,t,n="/"){let r,s={},a="",c="";const d=t.indexOf("#");let y=t.indexOf("?");return d<y&&d>=0&&(y=-1),y>-1&&(r=t.slice(0,y),a=t.slice(y+1,d>-1?d:t.length),s=e(a)),d>-1&&(r=r||t.slice(0,d),c=t.slice(d,t.length)),r=Jd(r??t,n),{fullPath:r+(a&&"?")+a+c,path:r,query:s,hash:Ua(c)}}function Qd(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function I1(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function zd(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&ta(t.matched[r],n.matched[s])&&Xu(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function ta(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Xu(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Zd(e[n],t[n]))return!1;return!0}function Zd(e,t){return dr(e)?O1(e,t):dr(t)?O1(t,e):e===t}function O1(e,t){return dr(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function Jd(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let a=n.length-1,c,d;for(c=0;c<r.length;c++)if(d=r[c],d!==".")if(d==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+r.slice(c).join("/")}const Qr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ya;(function(e){e.pop="pop",e.push="push"})(Ya||(Ya={}));var La;(function(e){e.back="back",e.forward="forward",e.unknown=""})(La||(La={}));function e3(e){if(!e)if(js){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Gd(e)}const t3=/^[^#]+#/;function n3(e,t){return e.replace(t3,"#")+t}function r3(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const E0=()=>({left:window.scrollX,top:window.scrollY});function s3(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=r3(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function P1(e,t){return(history.state?history.state.position-t:-1)+e}const Nl=new Map;function a3(e,t){Nl.set(e,t)}function i3(e){const t=Nl.get(e);return Nl.delete(e),t}let l3=()=>location.protocol+"//"+location.host;function ju(e,t){const{pathname:n,search:r,hash:s}=t,a=e.indexOf("#");if(a>-1){let d=s.includes(e.slice(a))?e.slice(a).length:1,y=s.slice(d);return y[0]!=="/"&&(y="/"+y),I1(y,"")}return I1(n,e)+r+s}function o3(e,t,n,r){let s=[],a=[],c=null;const d=({state:X})=>{const q=ju(e,location),he=n.value,ve=t.value;let we=0;if(X){if(n.value=q,t.value=X,c&&c===he){c=null;return}we=ve?X.position-ve.position:0}else r(q);s.forEach(Xe=>{Xe(n.value,he,{delta:we,type:Ya.pop,direction:we?we>0?La.forward:La.back:La.unknown})})};function y(){c=n.value}function R(X){s.push(X);const q=()=>{const he=s.indexOf(X);he>-1&&s.splice(he,1)};return a.push(q),q}function T(){const{history:X}=window;X.state&&X.replaceState(Ct({},X.state,{scroll:E0()}),"")}function x(){for(const X of a)X();a=[],window.removeEventListener("popstate",d),window.removeEventListener("beforeunload",T)}return window.addEventListener("popstate",d),window.addEventListener("beforeunload",T,{passive:!0}),{pauseListeners:y,listen:R,destroy:x}}function N1(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?E0():null}}function c3(e){const{history:t,location:n}=window,r={value:ju(e,n)},s={value:t.state};s.value||a(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(y,R,T){const x=e.indexOf("#"),X=x>-1?(n.host&&document.querySelector("base")?e:e.slice(x))+y:l3()+e+y;try{t[T?"replaceState":"pushState"](R,"",X),s.value=R}catch(q){console.error(q),n[T?"replace":"assign"](X)}}function c(y,R){const T=Ct({},t.state,N1(s.value.back,y,s.value.forward,!0),R,{position:s.value.position});a(y,T,!0),r.value=y}function d(y,R){const T=Ct({},s.value,t.state,{forward:y,scroll:E0()});a(T.current,T,!0);const x=Ct({},N1(r.value,y,null),{position:T.position+1},R);a(y,x,!1),r.value=y}return{location:r,state:s,push:d,replace:c}}function u3(e){e=e3(e);const t=c3(e),n=o3(e,t.state,t.location,t.replace);function r(a,c=!0){c||n.pauseListeners(),history.go(a)}const s=Ct({location:"",base:e,go:r,createHref:n3.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function f3(e){return typeof e=="string"||e&&typeof e=="object"}function qu(e){return typeof e=="string"||typeof e=="symbol"}const Uu=Symbol("");var L1;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(L1||(L1={}));function na(e,t){return Ct(new Error,{type:e,[Uu]:!0},t)}function kr(e,t){return e instanceof Error&&Uu in e&&(t==null||!!(e.type&t))}const F1="[^/]+?",h3={sensitive:!1,strict:!1,start:!0,end:!0},_3=/[.+*?^${}()[\]/\\]/g;function d3(e,t){const n=Ct({},h3,t),r=[];let s=n.start?"^":"";const a=[];for(const R of e){const T=R.length?[]:[90];n.strict&&!R.length&&(s+="/");for(let x=0;x<R.length;x++){const X=R[x];let q=40+(n.sensitive?.25:0);if(X.type===0)x||(s+="/"),s+=X.value.replace(_3,"\\$&"),q+=40;else if(X.type===1){const{value:he,repeatable:ve,optional:we,regexp:Xe}=X;a.push({name:he,repeatable:ve,optional:we});const K=Xe||F1;if(K!==F1){q+=10;try{new RegExp(`(${K})`)}catch(pe){throw new Error(`Invalid custom RegExp for param "${he}" (${K}): `+pe.message)}}let ye=ve?`((?:${K})(?:/(?:${K}))*)`:`(${K})`;x||(ye=we&&R.length<2?`(?:/${ye})`:"/"+ye),we&&(ye+="?"),s+=ye,q+=20,we&&(q+=-8),ve&&(q+=-20),K===".*"&&(q+=-50)}T.push(q)}r.push(T)}if(n.strict&&n.end){const R=r.length-1;r[R][r[R].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const c=new RegExp(s,n.sensitive?"":"i");function d(R){const T=R.match(c),x={};if(!T)return null;for(let X=1;X<T.length;X++){const q=T[X]||"",he=a[X-1];x[he.name]=q&&he.repeatable?q.split("/"):q}return x}function y(R){let T="",x=!1;for(const X of e){(!x||!T.endsWith("/"))&&(T+="/"),x=!1;for(const q of X)if(q.type===0)T+=q.value;else if(q.type===1){const{value:he,repeatable:ve,optional:we}=q,Xe=he in R?R[he]:"";if(dr(Xe)&&!ve)throw new Error(`Provided param "${he}" is an array but it is not repeatable (* or + modifiers)`);const K=dr(Xe)?Xe.join("/"):Xe;if(!K)if(we)X.length<2&&(T.endsWith("/")?T=T.slice(0,-1):x=!0);else throw new Error(`Missing required param "${he}"`);T+=K}}return T||"/"}return{re:c,score:r,keys:a,parse:d,stringify:y}}function m3(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Yu(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const a=m3(r[n],s[n]);if(a)return a;n++}if(Math.abs(s.length-r.length)===1){if(k1(r))return 1;if(k1(s))return-1}return s.length-r.length}function k1(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const v3={type:0,value:""},p3=/[a-zA-Z0-9_]/;function b3(e){if(!e)return[[]];if(e==="/")return[[v3]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(q){throw new Error(`ERR (${n})/"${R}": ${q}`)}let n=0,r=n;const s=[];let a;function c(){a&&s.push(a),a=[]}let d=0,y,R="",T="";function x(){R&&(n===0?a.push({type:0,value:R}):n===1||n===2||n===3?(a.length>1&&(y==="*"||y==="+")&&t(`A repeatable param (${R}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:R,regexp:T,repeatable:y==="*"||y==="+",optional:y==="*"||y==="?"})):t("Invalid state to consume buffer"),R="")}function X(){R+=y}for(;d<e.length;){if(y=e[d++],y==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:y==="/"?(R&&x(),c()):y===":"?(x(),n=1):X();break;case 4:X(),n=r;break;case 1:y==="("?n=2:p3.test(y)?X():(x(),n=0,y!=="*"&&y!=="?"&&y!=="+"&&d--);break;case 2:y===")"?T[T.length-1]=="\\"?T=T.slice(0,-1)+y:n=3:T+=y;break;case 3:x(),n=0,y!=="*"&&y!=="?"&&y!=="+"&&d--,T="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${R}"`),x(),c(),s}function y3(e,t,n){const r=d3(b3(e.path),n),s=Ct(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function w3(e,t){const n=[],r=new Map;t=D1({strict:!1,end:!0,sensitive:!1},t);function s(x){return r.get(x)}function a(x,X,q){const he=!q,ve=$1(x);ve.aliasOf=q&&q.record;const we=D1(t,x),Xe=[ve];if("alias"in x){const pe=typeof x.alias=="string"?[x.alias]:x.alias;for(const Ue of pe)Xe.push($1(Ct({},ve,{components:q?q.record.components:ve.components,path:Ue,aliasOf:q?q.record:ve})))}let K,ye;for(const pe of Xe){const{path:Ue}=pe;if(X&&Ue[0]!=="/"){const rt=X.record.path,Ge=rt[rt.length-1]==="/"?"":"/";pe.path=X.record.path+(Ue&&Ge+Ue)}if(K=y3(pe,X,we),q?q.alias.push(K):(ye=ye||K,ye!==K&&ye.alias.push(K),he&&x.name&&!V1(K)&&c(x.name)),Ku(K)&&y(K),ve.children){const rt=ve.children;for(let Ge=0;Ge<rt.length;Ge++)a(rt[Ge],K,q&&q.children[Ge])}q=q||K}return ye?()=>{c(ye)}:Na}function c(x){if(qu(x)){const X=r.get(x);X&&(r.delete(x),n.splice(n.indexOf(X),1),X.children.forEach(c),X.alias.forEach(c))}else{const X=n.indexOf(x);X>-1&&(n.splice(X,1),x.record.name&&r.delete(x.record.name),x.children.forEach(c),x.alias.forEach(c))}}function d(){return n}function y(x){const X=A3(x,n);n.splice(X,0,x),x.record.name&&!V1(x)&&r.set(x.record.name,x)}function R(x,X){let q,he={},ve,we;if("name"in x&&x.name){if(q=r.get(x.name),!q)throw na(1,{location:x});we=q.record.name,he=Ct(H1(X.params,q.keys.filter(ye=>!ye.optional).concat(q.parent?q.parent.keys.filter(ye=>ye.optional):[]).map(ye=>ye.name)),x.params&&H1(x.params,q.keys.map(ye=>ye.name))),ve=q.stringify(he)}else if(x.path!=null)ve=x.path,q=n.find(ye=>ye.re.test(ve)),q&&(he=q.parse(ve),we=q.record.name);else{if(q=X.name?r.get(X.name):n.find(ye=>ye.re.test(X.path)),!q)throw na(1,{location:x,currentLocation:X});we=q.record.name,he=Ct({},X.params,x.params),ve=q.stringify(he)}const Xe=[];let K=q;for(;K;)Xe.unshift(K.record),K=K.parent;return{name:we,path:ve,params:he,matched:Xe,meta:x3(Xe)}}e.forEach(x=>a(x));function T(){n.length=0,r.clear()}return{addRoute:a,resolve:R,removeRoute:c,clearRoutes:T,getRoutes:d,getRecordMatcher:s}}function H1(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function $1(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:S3(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function S3(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function V1(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function x3(e){return e.reduce((t,n)=>Ct(t,n.meta),{})}function D1(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function A3(e,t){let n=0,r=t.length;for(;n!==r;){const a=n+r>>1;Yu(e,t[a])<0?r=a:n=a+1}const s=E3(e);return s&&(r=t.lastIndexOf(s,r-1)),r}function E3(e){let t=e;for(;t=t.parent;)if(Ku(t)&&Yu(e,t)===0)return t}function Ku({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function R3(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const a=r[s].replace(Hu," "),c=a.indexOf("="),d=Ua(c<0?a:a.slice(0,c)),y=c<0?null:Ua(a.slice(c+1));if(d in t){let R=t[d];dr(R)||(R=t[d]=[R]),R.push(y)}else t[d]=y}return t}function X1(e){let t="";for(let n in e){const r=e[n];if(n=Ud(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(dr(r)?r.map(a=>a&&Pl(a)):[r&&Pl(r)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+n,a!=null&&(t+="="+a))})}return t}function g3(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=dr(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const M3=Symbol(""),j1=Symbol(""),bo=Symbol(""),yo=Symbol(""),Ll=Symbol("");function ba(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function ts(e,t,n,r,s,a=c=>c()){const c=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((d,y)=>{const R=X=>{X===!1?y(na(4,{from:n,to:t})):X instanceof Error?y(X):f3(X)?y(na(2,{from:t,to:X})):(c&&r.enterCallbacks[s]===c&&typeof X=="function"&&c.push(X),d())},T=a(()=>e.call(r&&r.instances[s],t,n,R));let x=Promise.resolve(T);e.length<3&&(x=x.then(R)),x.catch(X=>y(X))})}function ol(e,t,n,r,s=a=>a()){const a=[];for(const c of e)for(const d in c.components){let y=c.components[d];if(!(t!=="beforeRouteEnter"&&!c.instances[d]))if(Fu(y)){const T=(y.__vccOpts||y)[t];T&&a.push(ts(T,n,r,c,d,s))}else{let R=y();a.push(()=>R.then(T=>{if(!T)throw new Error(`Couldn't resolve component "${d}" at "${c.path}"`);const x=Nd(T)?T.default:T;c.mods[d]=T,c.components[d]=x;const q=(x.__vccOpts||x)[t];return q&&ts(q,n,r,c,d,s)()}))}}return a}function q1(e){const t=nr(bo),n=nr(yo),r=In(()=>{const y=gs(e.to);return t.resolve(y)}),s=In(()=>{const{matched:y}=r.value,{length:R}=y,T=y[R-1],x=n.matched;if(!T||!x.length)return-1;const X=x.findIndex(ta.bind(null,T));if(X>-1)return X;const q=U1(y[R-2]);return R>1&&U1(T)===q&&x[x.length-1].path!==q?x.findIndex(ta.bind(null,y[R-2])):X}),a=In(()=>s.value>-1&&I3(n.params,r.value.params)),c=In(()=>s.value>-1&&s.value===n.matched.length-1&&Xu(n.params,r.value.params));function d(y={}){return C3(y)?t[gs(e.replace)?"replace":"push"](gs(e.to)).catch(Na):Promise.resolve()}return{route:r,href:In(()=>r.value.href),isActive:a,isExactActive:c,navigate:d}}const T3=aa({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:q1,setup(e,{slots:t}){const n=sa(q1(e)),{options:r}=nr(bo),s=In(()=>({[Y1(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Y1(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=t.default&&t.default(n);return e.custom?a:Cu("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},a)}}}),B3=T3;function C3(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function I3(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!dr(s)||s.length!==r.length||r.some((a,c)=>a!==s[c]))return!1}return!0}function U1(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Y1=(e,t,n)=>e??t??n,O3=aa({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=nr(Ll),s=In(()=>e.route||r.value),a=nr(j1,0),c=In(()=>{let R=gs(a);const{matched:T}=s.value;let x;for(;(x=T[R])&&!x.components;)R++;return R}),d=In(()=>s.value.matched[c.value]);yi(j1,In(()=>c.value+1)),yi(M3,d),yi(Ll,s);const y=is();return Ia(()=>[y.value,d.value,e.name],([R,T,x],[X,q,he])=>{T&&(T.instances[x]=R,q&&q!==T&&R&&R===X&&(T.leaveGuards.size||(T.leaveGuards=q.leaveGuards),T.updateGuards.size||(T.updateGuards=q.updateGuards))),R&&T&&(!q||!ta(T,q)||!X)&&(T.enterCallbacks[x]||[]).forEach(ve=>ve(R))},{flush:"post"}),()=>{const R=s.value,T=e.name,x=d.value,X=x&&x.components[T];if(!X)return K1(n.default,{Component:X,route:R});const q=x.props[T],he=q?q===!0?R.params:typeof q=="function"?q(R):q:null,we=Cu(X,Ct({},he,t,{onVnodeUnmounted:Xe=>{Xe.component.isUnmounted&&(x.instances[T]=null)},ref:y}));return K1(n.default,{Component:we,route:R})||we}}});function K1(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Wu=O3;function P3(e){const t=w3(e.routes,e),n=e.parseQuery||R3,r=e.stringifyQuery||X1,s=e.history,a=ba(),c=ba(),d=ba(),y=F_(Qr);let R=Qr;js&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const T=il.bind(null,Se=>""+Se),x=il.bind(null,Kd),X=il.bind(null,Ua);function q(Se,Qe){let De,Je;return qu(Se)?(De=t.getRecordMatcher(Se),Je=Qe):Je=Se,t.addRoute(Je,De)}function he(Se){const Qe=t.getRecordMatcher(Se);Qe&&t.removeRoute(Qe)}function ve(){return t.getRoutes().map(Se=>Se.record)}function we(Se){return!!t.getRecordMatcher(Se)}function Xe(Se,Qe){if(Qe=Ct({},Qe||y.value),typeof Se=="string"){const $=ll(n,Se,Qe.path),le=t.resolve({path:$.path},Qe),ge=s.createHref($.fullPath);return Ct($,le,{params:X(le.params),hash:Ua($.hash),redirectedFrom:void 0,href:ge})}let De;if(Se.path!=null)De=Ct({},Se,{path:ll(n,Se.path,Qe.path).path});else{const $=Ct({},Se.params);for(const le in $)$[le]==null&&delete $[le];De=Ct({},Se,{params:x($)}),Qe.params=x(Qe.params)}const Je=t.resolve(De,Qe),St=Se.hash||"";Je.params=T(X(Je.params));const yt=Qd(r,Ct({},Se,{hash:qd(St),path:Je.path})),H=s.createHref(yt);return Ct({fullPath:yt,hash:St,query:r===X1?g3(Se.query):Se.query||{}},Je,{redirectedFrom:void 0,href:H})}function K(Se){return typeof Se=="string"?ll(n,Se,y.value.path):Ct({},Se)}function ye(Se,Qe){if(R!==Se)return na(8,{from:Qe,to:Se})}function pe(Se){return Ge(Se)}function Ue(Se){return pe(Ct(K(Se),{replace:!0}))}function rt(Se){const Qe=Se.matched[Se.matched.length-1];if(Qe&&Qe.redirect){const{redirect:De}=Qe;let Je=typeof De=="function"?De(Se):De;return typeof Je=="string"&&(Je=Je.includes("?")||Je.includes("#")?Je=K(Je):{path:Je},Je.params={}),Ct({query:Se.query,hash:Se.hash,params:Je.path!=null?{}:Se.params},Je)}}function Ge(Se,Qe){const De=R=Xe(Se),Je=y.value,St=Se.state,yt=Se.force,H=Se.replace===!0,$=rt(De);if($)return Ge(Ct(K($),{state:typeof $=="object"?Ct({},St,$.state):St,force:yt,replace:H}),Qe||De);const le=De;le.redirectedFrom=Qe;let ge;return!yt&&zd(r,Je,De)&&(ge=na(16,{to:le,from:Je}),zn(Je,Je,!0,!1)),(ge?Promise.resolve(ge):ot(le,Je)).catch(ie=>kr(ie)?kr(ie,2)?ie:vr(ie):gt(ie,le,Je)).then(ie=>{if(ie){if(kr(ie,2))return Ge(Ct({replace:H},K(ie.to),{state:typeof ie.to=="object"?Ct({},St,ie.to.state):St,force:yt}),Qe||le)}else ie=zt(le,Je,!0,H,St);return _t(le,Je,ie),ie})}function at(Se,Qe){const De=ye(Se,Qe);return De?Promise.reject(De):Promise.resolve()}function Ze(Se){const Qe=g.values().next().value;return Qe&&typeof Qe.runWithContext=="function"?Qe.runWithContext(Se):Se()}function ot(Se,Qe){let De;const[Je,St,yt]=N3(Se,Qe);De=ol(Je.reverse(),"beforeRouteLeave",Se,Qe);for(const $ of Je)$.leaveGuards.forEach(le=>{De.push(ts(le,Se,Qe))});const H=at.bind(null,Se,Qe);return De.push(H),gn(De).then(()=>{De=[];for(const $ of a.list())De.push(ts($,Se,Qe));return De.push(H),gn(De)}).then(()=>{De=ol(St,"beforeRouteUpdate",Se,Qe);for(const $ of St)$.updateGuards.forEach(le=>{De.push(ts(le,Se,Qe))});return De.push(H),gn(De)}).then(()=>{De=[];for(const $ of yt)if($.beforeEnter)if(dr($.beforeEnter))for(const le of $.beforeEnter)De.push(ts(le,Se,Qe));else De.push(ts($.beforeEnter,Se,Qe));return De.push(H),gn(De)}).then(()=>(Se.matched.forEach($=>$.enterCallbacks={}),De=ol(yt,"beforeRouteEnter",Se,Qe,Ze),De.push(H),gn(De))).then(()=>{De=[];for(const $ of c.list())De.push(ts($,Se,Qe));return De.push(H),gn(De)}).catch($=>kr($,8)?$:Promise.reject($))}function _t(Se,Qe,De){d.list().forEach(Je=>Ze(()=>Je(Se,Qe,De)))}function zt(Se,Qe,De,Je,St){const yt=ye(Se,Qe);if(yt)return yt;const H=Qe===Qr,$=js?history.state:{};De&&(Je||H?s.replace(Se.fullPath,Ct({scroll:H&&$&&$.scroll},St)):s.push(Se.fullPath,St)),y.value=Se,zn(Se,Qe,De,H),vr()}let Gt;function rr(){Gt||(Gt=s.listen((Se,Qe,De)=>{if(!us.listening)return;const Je=Xe(Se),St=rt(Je);if(St){Ge(Ct(St,{replace:!0}),Je).catch(Na);return}R=Je;const yt=y.value;js&&a3(P1(yt.fullPath,De.delta),E0()),ot(Je,yt).catch(H=>kr(H,12)?H:kr(H,2)?(Ge(H.to,Je).then($=>{kr($,20)&&!De.delta&&De.type===Ya.pop&&s.go(-1,!1)}).catch(Na),Promise.reject()):(De.delta&&s.go(-De.delta,!1),gt(H,Je,yt))).then(H=>{H=H||zt(Je,yt,!1),H&&(De.delta&&!kr(H,8)?s.go(-De.delta,!1):De.type===Ya.pop&&kr(H,20)&&s.go(-1,!1)),_t(Je,yt,H)}).catch(Na)}))}let $n=ba(),Ft=ba(),ht;function gt(Se,Qe,De){vr(Se);const Je=Ft.list();return Je.length?Je.forEach(St=>St(Se,Qe,De)):console.error(Se),Promise.reject(Se)}function Qn(){return ht&&y.value!==Qr?Promise.resolve():new Promise((Se,Qe)=>{$n.add([Se,Qe])})}function vr(Se){return ht||(ht=!Se,rr(),$n.list().forEach(([Qe,De])=>Se?De(Se):Qe()),$n.reset()),Se}function zn(Se,Qe,De,Je){const{scrollBehavior:St}=e;if(!js||!St)return Promise.resolve();const yt=!De&&i3(P1(Se.fullPath,0))||(Je||!De)&&history.state&&history.state.scroll||null;return co().then(()=>St(Se,Qe,yt)).then(H=>H&&s3(H)).catch(H=>gt(H,Se,Qe))}const cn=Se=>s.go(Se);let ct;const g=new Set,us={currentRoute:y,listening:!0,addRoute:q,removeRoute:he,clearRoutes:t.clearRoutes,hasRoute:we,getRoutes:ve,resolve:Xe,options:e,push:pe,replace:Ue,go:cn,back:()=>cn(-1),forward:()=>cn(1),beforeEach:a.add,beforeResolve:c.add,afterEach:d.add,onError:Ft.add,isReady:Qn,install(Se){const Qe=this;Se.component("RouterLink",B3),Se.component("RouterView",Wu),Se.config.globalProperties.$router=Qe,Object.defineProperty(Se.config.globalProperties,"$route",{enumerable:!0,get:()=>gs(y)}),js&&!ct&&y.value===Qr&&(ct=!0,pe(s.location).catch(St=>{}));const De={};for(const St in Qr)Object.defineProperty(De,St,{get:()=>y.value[St],enumerable:!0});Se.provide(bo,Qe),Se.provide(yo,Uc(De)),Se.provide(Ll,y);const Je=Se.unmount;g.add(Se),Se.unmount=function(){g.delete(Se),g.size<1&&(R=Qr,Gt&&Gt(),Gt=null,y.value=Qr,ct=!1,ht=!1),Je()}}};function gn(Se){return Se.reduce((Qe,De)=>Qe.then(()=>Ze(De)),Promise.resolve())}return us}function N3(e,t){const n=[],r=[],s=[],a=Math.max(t.matched.length,e.matched.length);for(let c=0;c<a;c++){const d=t.matched[c];d&&(e.matched.find(R=>ta(R,d))?r.push(d):n.push(d));const y=e.matched[c];y&&(t.matched.find(R=>ta(R,y))||s.push(y))}return[n,r,s]}function L3(e){return nr(yo)}const F3={__name:"App",setup(e){return(t,n)=>(wi(),$2(gs(Wu)))}},Gu=Object.assign,k3=typeof window<"u",Qu=e=>e!==null&&typeof e=="object",Ka=e=>e!=null,H3=e=>typeof e=="function",zu=e=>typeof e=="number"||/^\d+(\.\d+)?$/.test(e),$3=()=>k3?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;function W1(e,t){const n=t.split(".");let r=e;return n.forEach(s=>{var a;r=Qu(r)&&(a=r[s])!=null?a:""}),r}const Bs=[Number,String],V3={type:Boolean,default:!0},jr=e=>({type:String,default:e});var D3=typeof window<"u",_i,cl;function X3(){if(!_i&&(_i=is(0),cl=is(0),D3)){const e=()=>{_i.value=window.innerWidth,cl.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:_i,height:cl}}$3();function j3(e,t){(typeof e.cancelable!="boolean"||e.cancelable)&&e.preventDefault()}X3();function ur(e){if(Ka(e))return zu(e)?`${e}px`:String(e)}function q3(e){if(Ka(e)){if(Array.isArray(e))return{width:ur(e[0]),height:ur(e[1])};const t=ur(e);return{width:t,height:t}}}const U3=/-(\w)/g,Zu=e=>e.replace(U3,(t,n)=>n.toUpperCase()),{hasOwnProperty:Y3}=Object.prototype;function K3(e,t,n){const r=t[n];Ka(r)&&(!Y3.call(e,n)||!Qu(r)?e[n]=r:e[n]=Ju(Object(e[n]),r))}function Ju(e,t){return Object.keys(t).forEach(n=>{K3(e,t,n)}),e}var W3={name:"姓名",tel:"电话",save:"保存",clear:"清空",cancel:"取消",confirm:"确认",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(e,t)=>`${e}年${t}月`,rangePrompt:e=>`最多选择 ${e} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:e=>`${e}折`,condition:e=>`满${e}元可用`},vanCouponCell:{title:"优惠券",count:e=>`${e}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}};const G1=is("zh-CN"),Q1=sa({"zh-CN":W3}),G3={messages(){return Q1[G1.value]},use(e,t){G1.value=e,this.add({[e]:t})},add(e={}){Ju(Q1,e)}};var Q3=G3;function z3(e){const t=Zu(e)+".";return(n,...r)=>{const s=Q3.messages(),a=W1(s,t+n)||W1(s,n);return H3(a)?a(...r):a}}function Fl(e,t){return t?typeof t=="string"?` ${e}--${t}`:Array.isArray(t)?t.reduce((n,r)=>n+Fl(e,r),""):Object.keys(t).reduce((n,r)=>n+(t[r]?Fl(e,r):""),""):""}function Z3(e){return(t,n)=>(t&&typeof t!="string"&&(n=t,t=""),t=t?`${e}__${t}`:e,`${t}${Fl(t,n)}`)}function Za(e){const t=`van-${e}`;return[t,Z3(t),z3(t)]}const J3="van-hairline",e4=`${J3}--surround`;function R0(e){return e.install=t=>{const{name:n}=e;n&&(t.component(n,e),t.component(Zu(`-${n}`),e))},e}const t4={to:[String,Object],url:String,replace:Boolean};function n4({to:e,url:t,replace:n,$router:r}){e&&r?r[n?"replace":"push"](e):t&&(n?location.replace(t):location.href=t)}function r4(){const e=U2().proxy;return()=>n4(e)}const[s4,z1]=Za("badge"),a4={dot:Boolean,max:Bs,tag:jr("div"),color:String,offset:Array,content:Bs,showZero:V3,position:jr("top-right")};var i4=aa({name:s4,props:a4,setup(e,{slots:t}){const n=()=>{if(t.content)return!0;const{content:d,showZero:y}=e;return Ka(d)&&d!==""&&(y||d!==0&&d!=="0")},r=()=>{const{dot:d,max:y,content:R}=e;if(!d&&n())return t.content?t.content():Ka(y)&&zu(R)&&+R>+y?`${y}+`:R},s=d=>d.startsWith("-")?d.replace("-",""):`-${d}`,a=In(()=>{const d={background:e.color};if(e.offset){const[y,R]=e.offset,{position:T}=e,[x,X]=T.split("-");t.default?(typeof R=="number"?d[x]=ur(x==="top"?R:-R):d[x]=x==="top"?ur(R):s(R),typeof y=="number"?d[X]=ur(X==="left"?y:-y):d[X]=X==="left"?ur(y):s(y)):(d.marginTop=ur(R),d.marginLeft=ur(y))}return d}),c=()=>{if(n()||e.dot)return It("div",{class:z1([e.position,{dot:e.dot,fixed:!!t.default}]),style:a.value},[r()])};return()=>{if(t.default){const{tag:d}=e;return It(d,{class:z1("wrapper")},{default:()=>[t.default(),c()]})}return c()}}});const l4=R0(i4),[o4,Nm]=Za("config-provider"),c4=Symbol(o4),[u4,Z1]=Za("icon"),f4=e=>e==null?void 0:e.includes("/"),h4={dot:Boolean,tag:jr("i"),name:String,size:Bs,badge:Bs,color:String,badgeProps:Object,classPrefix:String};var _4=aa({name:u4,props:h4,setup(e,{slots:t}){const n=nr(c4,null),r=In(()=>e.classPrefix||(n==null?void 0:n.iconPrefix)||Z1());return()=>{const{tag:s,dot:a,name:c,size:d,badge:y,color:R}=e,T=f4(c);return It(l4,Mu({dot:a,tag:s,class:[r.value,T?"":`${r.value}-${c}`],style:{color:R,fontSize:ur(d)},content:y},e.badgeProps),{default:()=>{var x;return[(x=t.default)==null?void 0:x.call(t),T&&It("img",{class:Z1("image"),src:c},null)]}})}}});const d4=R0(_4),[m4,Fa]=Za("loading"),v4=Array(12).fill(null).map((e,t)=>It("i",{class:Fa("line",String(t+1))},null)),p4=It("svg",{class:Fa("circular"),viewBox:"25 25 50 50"},[It("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),b4={size:Bs,type:jr("circular"),color:String,vertical:Boolean,textSize:Bs,textColor:String};var y4=aa({name:m4,props:b4,setup(e,{slots:t}){const n=In(()=>Gu({color:e.color},q3(e.size))),r=()=>{const a=e.type==="spinner"?v4:p4;return It("span",{class:Fa("spinner",e.type),style:n.value},[t.icon?t.icon():a])},s=()=>{var a;if(t.default)return It("span",{class:Fa("text"),style:{fontSize:ur(e.textSize),color:(a=e.textColor)!=null?a:e.color}},[t.default()])};return()=>{const{type:a,vertical:c}=e;return It("div",{class:Fa([a,{vertical:c}]),"aria-live":"polite","aria-busy":!0},[r(),s()])}}});const w4=R0(y4),[S4,$s]=Za("button"),x4=Gu({},t4,{tag:jr("button"),text:String,icon:String,type:jr("default"),size:jr("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:jr("button"),loadingSize:Bs,loadingText:String,loadingType:String,iconPosition:jr("left")});var A4=aa({name:S4,props:x4,emits:["click"],setup(e,{emit:t,slots:n}){const r=r4(),s=()=>n.loading?n.loading():It(w4,{size:e.loadingSize,type:e.loadingType,class:$s("loading")},null),a=()=>{if(e.loading)return s();if(n.icon)return It("div",{class:$s("icon")},[n.icon()]);if(e.icon)return It(d4,{name:e.icon,class:$s("icon"),classPrefix:e.iconPrefix},null)},c=()=>{let R;if(e.loading?R=e.loadingText:R=n.default?n.default():e.text,R)return It("span",{class:$s("text")},[R])},d=()=>{const{color:R,plain:T}=e;if(R){const x={color:T?R:"white"};return T||(x.background=R),R.includes("gradient")?x.border=0:x.borderColor=R,x}},y=R=>{e.loading?j3(R):e.disabled||(t("click",R),r())};return()=>{const{tag:R,type:T,size:x,block:X,round:q,plain:he,square:ve,loading:we,disabled:Xe,hairline:K,nativeType:ye,iconPosition:pe}=e,Ue=[$s([T,x,{plain:he,block:X,round:q,square:ve,loading:we,disabled:Xe,hairline:K}]),{[e4]:K}];return It(R,{type:ye,class:Ue,style:d(),disabled:Xe,onClick:y},{default:()=>[It("div",{class:$s("content")},[pe==="left"&&a(),c(),pe==="right"&&a()])]})}}});const E4=R0(A4);var R4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function g4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ef={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(R4,function(){function n(N){return new Int8Array(N)}function r(N){return new Int16Array(N)}function s(N){return new Int32Array(N)}function a(N){return new Float32Array(N)}function c(N){return new Float64Array(N)}function d(N){if(N.length==1)return a(N[0]);var ee=N[0];N=N.slice(1);for(var ce=[],te=0;te<ee;te++)ce.push(d(N));return ce}function y(N){if(N.length==1)return s(N[0]);var ee=N[0];N=N.slice(1);for(var ce=[],te=0;te<ee;te++)ce.push(y(N));return ce}function R(N){if(N.length==1)return r(N[0]);var ee=N[0];N=N.slice(1);for(var ce=[],te=0;te<ee;te++)ce.push(R(N));return ce}function T(N){if(N.length==1)return new Array(N[0]);var ee=N[0];N=N.slice(1);for(var ce=[],te=0;te<ee;te++)ce.push(T(N));return ce}var x={};x.fill=function(N,ee,ce,te){if(arguments.length==2)for(var xe=0;xe<N.length;xe++)N[xe]=arguments[1];else for(var xe=ee;xe<ce;xe++)N[xe]=te};var X={};X.arraycopy=function(N,ee,ce,te,xe){for(var ne=ee+xe;ee<ne;)ce[te++]=N[ee++]};var q={};q.SQRT2=1.4142135623730951,q.FAST_LOG10=function(N){return Math.log10(N)},q.FAST_LOG10_X=function(N,ee){return Math.log10(N)*ee};function he(N){this.ordinal=N}he.short_block_allowed=new he(0),he.short_block_coupled=new he(1),he.short_block_dispensed=new he(2),he.short_block_forced=new he(3);var ve={};ve.MAX_VALUE=34028235e31;function we(N){this.ordinal=N}we.vbr_off=new we(0),we.vbr_mt=new we(1),we.vbr_rh=new we(2),we.vbr_abr=new we(3),we.vbr_mtrh=new we(4),we.vbr_default=we.vbr_mtrh;var Xe=function(N){},K={System:X,VbrMode:we,Float:ve,ShortBlock:he,Util:q,Arrays:x,new_array_n:T,new_byte:n,new_double:c,new_float:a,new_float_n:d,new_int:s,new_int_n:y,new_short:r,new_short_n:R,assert:Xe},ye=K.System,pe=K.Util,Ue=K.Arrays,rt=K.new_float;function Ge(){var N=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*pe.SQRT2*.5/2384e-9,.017876148*pe.SQRT2*.5/2384e-9,.003134727*pe.SQRT2*.5/2384e-9,.002457142*pe.SQRT2*.5/2384e-9,971317e-9*pe.SQRT2*.5/2384e-9,218868e-9*pe.SQRT2*.5/2384e-9,101566e-9*pe.SQRT2*.5/2384e-9,13828e-9*pe.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],ee=12,ce=36,te=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],xe=te[g.SHORT_TYPE],ne=te[g.SHORT_TYPE],fe=te[g.SHORT_TYPE],Te=te[g.SHORT_TYPE],Ie=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function U(I,k,i){for(var G=10,W=k+238-14-286,V=-15;V<0;V++){var f,A,C;f=N[G+-10],A=I[W+-224]*f,C=I[k+224]*f,f=N[G+-9],A+=I[W+-160]*f,C+=I[k+160]*f,f=N[G+-8],A+=I[W+-96]*f,C+=I[k+96]*f,f=N[G+-7],A+=I[W+-32]*f,C+=I[k+32]*f,f=N[G+-6],A+=I[W+32]*f,C+=I[k+-32]*f,f=N[G+-5],A+=I[W+96]*f,C+=I[k+-96]*f,f=N[G+-4],A+=I[W+160]*f,C+=I[k+-160]*f,f=N[G+-3],A+=I[W+224]*f,C+=I[k+-224]*f,f=N[G+-2],A+=I[k+-256]*f,C-=I[W+256]*f,f=N[G+-1],A+=I[k+-192]*f,C-=I[W+192]*f,f=N[G+0],A+=I[k+-128]*f,C-=I[W+128]*f,f=N[G+1],A+=I[k+-64]*f,C-=I[W+64]*f,f=N[G+2],A+=I[k+0]*f,C-=I[W+0]*f,f=N[G+3],A+=I[k+64]*f,C-=I[W+-64]*f,f=N[G+4],A+=I[k+128]*f,C-=I[W+-128]*f,f=N[G+5],A+=I[k+192]*f,C-=I[W+-192]*f,A*=N[G+6],f=C-A,i[30+V*2]=C+A,i[31+V*2]=N[G+7]*f,G+=18,k--,W++}{var A,C,O,F;C=I[k+-16]*N[G+-10],A=I[k+-32]*N[G+-2],C+=(I[k+-48]-I[k+16])*N[G+-9],A+=I[k+-96]*N[G+-1],C+=(I[k+-80]+I[k+48])*N[G+-8],A+=I[k+-160]*N[G+0],C+=(I[k+-112]-I[k+80])*N[G+-7],A+=I[k+-224]*N[G+1],C+=(I[k+-144]+I[k+112])*N[G+-6],A-=I[k+32]*N[G+2],C+=(I[k+-176]-I[k+144])*N[G+-5],A-=I[k+96]*N[G+3],C+=(I[k+-208]+I[k+176])*N[G+-4],A-=I[k+160]*N[G+4],C+=(I[k+-240]-I[k+208])*N[G+-3],A-=I[k+224],O=A-C,F=A+C,C=i[14],A=i[15]-C,i[31]=F+C,i[30]=O+A,i[15]=O-A,i[14]=F-C}{var l;l=i[28]-i[0],i[0]+=i[28],i[28]=l*N[G+-2*18+7],l=i[29]-i[1],i[1]+=i[29],i[29]=l*N[G+-2*18+7],l=i[26]-i[2],i[2]+=i[26],i[26]=l*N[G+-4*18+7],l=i[27]-i[3],i[3]+=i[27],i[27]=l*N[G+-4*18+7],l=i[24]-i[4],i[4]+=i[24],i[24]=l*N[G+-6*18+7],l=i[25]-i[5],i[5]+=i[25],i[25]=l*N[G+-6*18+7],l=i[22]-i[6],i[6]+=i[22],i[22]=l*pe.SQRT2,l=i[23]-i[7],i[7]+=i[23],i[23]=l*pe.SQRT2-i[7],i[7]-=i[6],i[22]-=i[7],i[23]-=i[22],l=i[6],i[6]=i[31]-l,i[31]=i[31]+l,l=i[7],i[7]=i[30]-l,i[30]=i[30]+l,l=i[22],i[22]=i[15]-l,i[15]=i[15]+l,l=i[23],i[23]=i[14]-l,i[14]=i[14]+l,l=i[20]-i[8],i[8]+=i[20],i[20]=l*N[G+-10*18+7],l=i[21]-i[9],i[9]+=i[21],i[21]=l*N[G+-10*18+7],l=i[18]-i[10],i[10]+=i[18],i[18]=l*N[G+-12*18+7],l=i[19]-i[11],i[11]+=i[19],i[19]=l*N[G+-12*18+7],l=i[16]-i[12],i[12]+=i[16],i[16]=l*N[G+-14*18+7],l=i[17]-i[13],i[13]+=i[17],i[17]=l*N[G+-14*18+7],l=-i[20]+i[24],i[20]+=i[24],i[24]=l*N[G+-12*18+7],l=-i[21]+i[25],i[21]+=i[25],i[25]=l*N[G+-12*18+7],l=i[4]-i[8],i[4]+=i[8],i[8]=l*N[G+-12*18+7],l=i[5]-i[9],i[5]+=i[9],i[9]=l*N[G+-12*18+7],l=i[0]-i[12],i[0]+=i[12],i[12]=l*N[G+-4*18+7],l=i[1]-i[13],i[1]+=i[13],i[13]=l*N[G+-4*18+7],l=i[16]-i[28],i[16]+=i[28],i[28]=l*N[G+-4*18+7],l=-i[17]+i[29],i[17]+=i[29],i[29]=l*N[G+-4*18+7],l=pe.SQRT2*(i[2]-i[10]),i[2]+=i[10],i[10]=l,l=pe.SQRT2*(i[3]-i[11]),i[3]+=i[11],i[11]=l,l=pe.SQRT2*(-i[18]+i[26]),i[18]+=i[26],i[26]=l-i[18],l=pe.SQRT2*(-i[19]+i[27]),i[19]+=i[27],i[27]=l-i[19],l=i[2],i[19]-=i[3],i[3]-=l,i[2]=i[31]-l,i[31]+=l,l=i[3],i[11]-=i[19],i[18]-=l,i[3]=i[30]-l,i[30]+=l,l=i[18],i[27]-=i[11],i[19]-=l,i[18]=i[15]-l,i[15]+=l,l=i[19],i[10]-=l,i[19]=i[14]-l,i[14]+=l,l=i[10],i[11]-=l,i[10]=i[23]-l,i[23]+=l,l=i[11],i[26]-=l,i[11]=i[22]-l,i[22]+=l,l=i[26],i[27]-=l,i[26]=i[7]-l,i[7]+=l,l=i[27],i[27]=i[6]-l,i[6]+=l,l=pe.SQRT2*(i[0]-i[4]),i[0]+=i[4],i[4]=l,l=pe.SQRT2*(i[1]-i[5]),i[1]+=i[5],i[5]=l,l=pe.SQRT2*(i[16]-i[20]),i[16]+=i[20],i[20]=l,l=pe.SQRT2*(i[17]-i[21]),i[17]+=i[21],i[21]=l,l=-pe.SQRT2*(i[8]-i[12]),i[8]+=i[12],i[12]=l-i[8],l=-pe.SQRT2*(i[9]-i[13]),i[9]+=i[13],i[13]=l-i[9],l=-pe.SQRT2*(i[25]-i[29]),i[25]+=i[29],i[29]=l-i[25],l=-pe.SQRT2*(i[24]+i[28]),i[24]-=i[28],i[28]=l-i[24],l=i[24]-i[16],i[24]=l,l=i[20]-l,i[20]=l,l=i[28]-l,i[28]=l,l=i[25]-i[17],i[25]=l,l=i[21]-l,i[21]=l,l=i[29]-l,i[29]=l,l=i[17]-i[1],i[17]=l,l=i[9]-l,i[9]=l,l=i[25]-l,i[25]=l,l=i[5]-l,i[5]=l,l=i[21]-l,i[21]=l,l=i[13]-l,i[13]=l,l=i[29]-l,i[29]=l,l=i[1]-i[0],i[1]=l,l=i[16]-l,i[16]=l,l=i[17]-l,i[17]=l,l=i[8]-l,i[8]=l,l=i[9]-l,i[9]=l,l=i[24]-l,i[24]=l,l=i[25]-l,i[25]=l,l=i[4]-l,i[4]=l,l=i[5]-l,i[5]=l,l=i[20]-l,i[20]=l,l=i[21]-l,i[21]=l,l=i[12]-l,i[12]=l,l=i[13]-l,i[13]=l,l=i[28]-l,i[28]=l,l=i[29]-l,i[29]=l,l=i[0],i[0]+=i[31],i[31]-=l,l=i[1],i[1]+=i[30],i[30]-=l,l=i[16],i[16]+=i[15],i[15]-=l,l=i[17],i[17]+=i[14],i[14]-=l,l=i[8],i[8]+=i[23],i[23]-=l,l=i[9],i[9]+=i[22],i[22]-=l,l=i[24],i[24]+=i[7],i[7]-=l,l=i[25],i[25]+=i[6],i[6]-=l,l=i[4],i[4]+=i[27],i[27]-=l,l=i[5],i[5]+=i[26],i[26]-=l,l=i[20],i[20]+=i[11],i[11]-=l,l=i[21],i[21]+=i[10],i[10]-=l,l=i[12],i[12]+=i[19],i[19]-=l,l=i[13],i[13]+=i[18],i[18]-=l,l=i[28],i[28]+=i[3],i[3]-=l,l=i[29],i[29]+=i[2],i[2]-=l}}function be(I,k){for(var i=0;i<3;i++){var G,W,V,f,A,C;f=I[k+2*3]*te[g.SHORT_TYPE][0]-I[k+5*3],G=I[k+0*3]*te[g.SHORT_TYPE][2]-I[k+3*3],W=f+G,V=f-G,f=I[k+5*3]*te[g.SHORT_TYPE][0]+I[k+2*3],G=I[k+3*3]*te[g.SHORT_TYPE][2]+I[k+0*3],A=f+G,C=-f+G,G=(I[k+1*3]*te[g.SHORT_TYPE][1]-I[k+4*3])*2069978111953089e-26,f=(I[k+4*3]*te[g.SHORT_TYPE][1]+I[k+1*3])*2069978111953089e-26,I[k+3*0]=W*190752519173728e-25+G,I[k+3*5]=-A*190752519173728e-25+f,V=V*.8660254037844387*1907525191737281e-26,A=A*.5*1907525191737281e-26+f,I[k+3*1]=V-A,I[k+3*2]=V+A,W=W*.5*1907525191737281e-26-G,C=C*.8660254037844387*1907525191737281e-26,I[k+3*3]=W+C,I[k+3*4]=W-C,k++}}function B(I,k,i){var G,W;{var V,f,A,C,O,F,l,S;V=i[17]-i[9],A=i[15]-i[11],C=i[14]-i[12],O=i[0]+i[8],F=i[1]+i[7],l=i[2]+i[6],S=i[3]+i[5],I[k+17]=O+l-S-(F-i[4]),W=(O+l-S)*ne[19]+(F-i[4]),G=(V-A-C)*ne[18],I[k+5]=G+W,I[k+6]=G-W,f=(i[16]-i[10])*ne[18],F=F*ne[19]+i[4],G=V*ne[12]+f+A*ne[13]+C*ne[14],W=-O*ne[16]+F-l*ne[17]+S*ne[15],I[k+1]=G+W,I[k+2]=G-W,G=V*ne[13]-f-A*ne[14]+C*ne[12],W=-O*ne[17]+F-l*ne[15]+S*ne[16],I[k+9]=G+W,I[k+10]=G-W,G=V*ne[14]-f+A*ne[12]-C*ne[13],W=O*ne[15]-F+l*ne[16]-S*ne[17],I[k+13]=G+W,I[k+14]=G-W}{var p,h,b,w,u,_,m,P;p=i[8]-i[0],b=i[6]-i[2],w=i[5]-i[3],u=i[17]+i[9],_=i[16]+i[10],m=i[15]+i[11],P=i[14]+i[12],I[k+0]=u+m+P+(_+i[13]),G=(u+m+P)*ne[19]-(_+i[13]),W=(p-b+w)*ne[18],I[k+11]=G+W,I[k+12]=G-W,h=(i[7]-i[1])*ne[18],_=i[13]-_*ne[19],G=u*ne[15]-_+m*ne[16]+P*ne[17],W=p*ne[14]+h+b*ne[12]+w*ne[13],I[k+3]=G+W,I[k+4]=G-W,G=-u*ne[17]+_-m*ne[15]-P*ne[16],W=p*ne[13]+h-b*ne[14]-w*ne[12],I[k+7]=G+W,I[k+8]=G-W,G=-u*ne[16]+_-m*ne[17]-P*ne[15],W=p*ne[12]-h+b*ne[13]-w*ne[14],I[k+15]=G+W,I[k+16]=G-W}}this.mdct_sub48=function(I,k,i){for(var G=k,W=286,V=0;V<I.channels_out;V++){for(var f=0;f<I.mode_gr;f++){for(var A,C=I.l3_side.tt[f][V],O=C.xr,F=0,l=I.sb_sample[V][1-f],S=0,p=0;p<18/2;p++)for(U(G,W,l[S]),U(G,W+32,l[S+1]),S+=2,W+=64,A=1;A<32;A+=2)l[S-1][A]*=-1;for(A=0;A<32;A++,F+=18){var h=C.block_type,b=I.sb_sample[V][f],w=I.sb_sample[V][1-f];if(C.mixed_block_flag!=0&&A<2&&(h=0),I.amp_filter[A]<1e-12)Ue.fill(O,F+0,F+18,0);else{if(I.amp_filter[A]<1)for(var p=0;p<18;p++)w[p][Ie[A]]*=I.amp_filter[A];if(h==g.SHORT_TYPE){for(var p=-ee/4;p<0;p++){var u=te[g.SHORT_TYPE][p+3];O[F+p*3+9]=b[9+p][Ie[A]]*u-b[8-p][Ie[A]],O[F+p*3+18]=b[14-p][Ie[A]]*u+b[15+p][Ie[A]],O[F+p*3+10]=b[15+p][Ie[A]]*u-b[14-p][Ie[A]],O[F+p*3+19]=w[2-p][Ie[A]]*u+w[3+p][Ie[A]],O[F+p*3+11]=w[3+p][Ie[A]]*u-w[2-p][Ie[A]],O[F+p*3+20]=w[8-p][Ie[A]]*u+w[9+p][Ie[A]]}be(O,F)}else{for(var _=rt(18),p=-ce/4;p<0;p++){var m,P;m=te[h][p+27]*w[p+9][Ie[A]]+te[h][p+36]*w[8-p][Ie[A]],P=te[h][p+9]*b[p+9][Ie[A]]-te[h][p+18]*b[8-p][Ie[A]],_[p+9]=m-P*xe[3+p+9],_[p+18]=m*xe[3+p+9]+P}B(O,F,_)}}if(h!=g.SHORT_TYPE&&A!=0)for(var p=7;p>=0;--p){var ae,j;ae=O[F+p]*fe[20+p]+O[F+-1-p]*Te[28+p],j=O[F+p]*Te[28+p]-O[F+-1-p]*fe[20+p],O[F+-1-p]=ae,O[F+p]=j}}}if(G=i,W=286,I.mode_gr==1)for(var Q=0;Q<18;Q++)ye.arraycopy(I.sb_sample[V][1][Q],0,I.sb_sample[V][0][Q],0,32)}}}var at=Ge,Ze=K.System,ot=K.new_float,_t=K.new_float_n;function zt(){this.l=ot(g.SBMAX_l),this.s=_t([g.SBMAX_s,3]);var N=this;this.assign=function(ee){Ze.arraycopy(ee.l,0,N.l,0,g.SBMAX_l);for(var ce=0;ce<g.SBMAX_s;ce++)for(var te=0;te<3;te++)N.s[ce][te]=ee.s[ce][te]}}var Gt=zt;function rr(){this.thm=new Gt,this.en=new Gt}var $n=rr,Ft=K.System,ht=K.VbrMode,gt=K.new_array_n,Qn=K.new_float,vr=K.new_float_n,zn=K.new_int,cn=K.assert;ct.ENCDELAY=576,ct.POSTDELAY=1152,ct.MDCTDELAY=48,ct.FFTOFFSET=224+ct.MDCTDELAY,ct.DECDELAY=528,ct.SBLIMIT=32,ct.CBANDS=64,ct.SBPSY_l=21,ct.SBPSY_s=12,ct.SBMAX_l=22,ct.SBMAX_s=13,ct.PSFB21=6,ct.PSFB12=6,ct.BLKSIZE=1024,ct.HBLKSIZE=ct.BLKSIZE/2+1,ct.BLKSIZE_s=256,ct.HBLKSIZE_s=ct.BLKSIZE_s/2+1,ct.NORM_TYPE=0,ct.START_TYPE=1,ct.SHORT_TYPE=2,ct.STOP_TYPE=3,ct.MPG_MD_LR_LR=0,ct.MPG_MD_LR_I=1,ct.MPG_MD_MS_LR=2,ct.MPG_MD_MS_I=3,ct.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function ct(){var N=at,ee=$n,ce=ct.FFTOFFSET,te=ct.MPG_MD_MS_LR,xe=null;this.psy=null;var ne=null,fe=null,Te=null;this.setModules=function(I,k,i,G){xe=I,this.psy=k,ne=k,fe=G,Te=i};var Ie=new N;function U(I){var k,i;if(I.ATH.useAdjust==0){I.ATH.adjust=1;return}if(i=I.loudness_sq[0][0],k=I.loudness_sq[1][0],I.channels_out==2?(i+=I.loudness_sq[0][1],k+=I.loudness_sq[1][1]):(i+=i,k+=k),I.mode_gr==2&&(i=Math.max(i,k)),i*=.5,i*=I.ATH.aaSensitivityP,i>.03125)I.ATH.adjust>=1?I.ATH.adjust=1:I.ATH.adjust<I.ATH.adjustLimit&&(I.ATH.adjust=I.ATH.adjustLimit),I.ATH.adjustLimit=1;else{var G=31.98*i+625e-6;I.ATH.adjust>=G?(I.ATH.adjust*=G*.075+.925,I.ATH.adjust<G&&(I.ATH.adjust=G)):I.ATH.adjustLimit>=G?I.ATH.adjust=G:I.ATH.adjust<I.ATH.adjustLimit&&(I.ATH.adjust=I.ATH.adjustLimit),I.ATH.adjustLimit=G}}function be(I){var k,i;for(cn(0<=I.bitrate_index&&I.bitrate_index<16),cn(0<=I.mode_ext&&I.mode_ext<4),I.bitrate_stereoMode_Hist[I.bitrate_index][4]++,I.bitrate_stereoMode_Hist[15][4]++,I.channels_out==2&&(I.bitrate_stereoMode_Hist[I.bitrate_index][I.mode_ext]++,I.bitrate_stereoMode_Hist[15][I.mode_ext]++),k=0;k<I.mode_gr;++k)for(i=0;i<I.channels_out;++i){var G=I.l3_side.tt[k][i].block_type|0;I.l3_side.tt[k][i].mixed_block_flag!=0&&(G=4),I.bitrate_blockType_Hist[I.bitrate_index][G]++,I.bitrate_blockType_Hist[I.bitrate_index][5]++,I.bitrate_blockType_Hist[15][G]++,I.bitrate_blockType_Hist[15][5]++}}function B(I,k){var i=I.internal_flags,G,W;if(i.lame_encode_frame_init==0){var V,f,A=Qn(2014),C=Qn(2014);for(i.lame_encode_frame_init=1,V=0,f=0;V<286+576*(1+i.mode_gr);++V)V<576*i.mode_gr?(A[V]=0,i.channels_out==2&&(C[V]=0)):(A[V]=k[0][f],i.channels_out==2&&(C[V]=k[1][f]),++f);for(W=0;W<i.mode_gr;W++)for(G=0;G<i.channels_out;G++)i.l3_side.tt[W][G].block_type=ct.SHORT_TYPE;Ie.mdct_sub48(i,A,C),cn(i.mf_size>=ct.BLKSIZE+I.framesize-ct.FFTOFFSET),cn(i.mf_size>=512+I.framesize-32)}}this.lame_encode_mp3_frame=function(I,k,i,G,W,V){var f,A=gt([2,2]);A[0][0]=new ee,A[0][1]=new ee,A[1][0]=new ee,A[1][1]=new ee;var C=gt([2,2]);C[0][0]=new ee,C[0][1]=new ee,C[1][0]=new ee,C[1][1]=new ee;var O,F=[null,null],l=I.internal_flags,S=vr([2,4]),p=[.5,.5],h=[[0,0],[0,0]],b=[[0,0],[0,0]],w,u,_;if(F[0]=k,F[1]=i,l.lame_encode_frame_init==0&&B(I,F),l.padding=0,(l.slot_lag-=l.frac_SpF)<0&&(l.slot_lag+=I.out_samplerate,l.padding=1),l.psymodel!=0){var m,P=[null,null],ae=0,j=zn(2);for(_=0;_<l.mode_gr;_++){for(u=0;u<l.channels_out;u++)P[u]=F[u],ae=576+_*576-ct.FFTOFFSET;if(I.VBR==ht.vbr_mtrh||I.VBR==ht.vbr_mt?m=ne.L3psycho_anal_vbr(I,P,ae,_,A,C,h[_],b[_],S[_],j):m=ne.L3psycho_anal_ns(I,P,ae,_,A,C,h[_],b[_],S[_],j),m!=0)return-4;for(I.mode==an.JOINT_STEREO&&(p[_]=S[_][2]+S[_][3],p[_]>0&&(p[_]=S[_][3]/p[_])),u=0;u<l.channels_out;u++){var Q=l.l3_side.tt[_][u];Q.block_type=j[u],Q.mixed_block_flag=0}}}else for(_=0;_<l.mode_gr;_++)for(u=0;u<l.channels_out;u++)l.l3_side.tt[_][u].block_type=ct.NORM_TYPE,l.l3_side.tt[_][u].mixed_block_flag=0,b[_][u]=h[_][u]=700;if(U(l),Ie.mdct_sub48(l,F[0],F[1]),l.mode_ext=ct.MPG_MD_LR_LR,I.force_ms)l.mode_ext=ct.MPG_MD_MS_LR;else if(I.mode==an.JOINT_STEREO){var o=0,v=0;for(_=0;_<l.mode_gr;_++)for(u=0;u<l.channels_out;u++)o+=b[_][u],v+=h[_][u];if(o<=1*v){var oe=l.l3_side.tt[0],_e=l.l3_side.tt[l.mode_gr-1];oe[0].block_type==oe[1].block_type&&_e[0].block_type==_e[1].block_type&&(l.mode_ext=ct.MPG_MD_MS_LR)}}if(l.mode_ext==te?(O=C,w=b):(O=A,w=h),I.analysis&&l.pinfo!=null)for(_=0;_<l.mode_gr;_++)for(u=0;u<l.channels_out;u++)l.pinfo.ms_ratio[_]=l.ms_ratio[_],l.pinfo.ms_ener_ratio[_]=p[_],l.pinfo.blocktype[_][u]=l.l3_side.tt[_][u].block_type,l.pinfo.pe[_][u]=w[_][u],Ft.arraycopy(l.l3_side.tt[_][u].xr,0,l.pinfo.xr[_][u],0,576),l.mode_ext==te&&(l.pinfo.ers[_][u]=l.pinfo.ers[_][u+2],Ft.arraycopy(l.pinfo.energy[_][u+2],0,l.pinfo.energy[_][u],0,l.pinfo.energy[_][u].length));if(I.VBR==ht.vbr_off||I.VBR==ht.vbr_abr){var Be,ke;for(Be=0;Be<18;Be++)l.nsPsy.pefirbuf[Be]=l.nsPsy.pefirbuf[Be+1];for(ke=0,_=0;_<l.mode_gr;_++)for(u=0;u<l.channels_out;u++)ke+=w[_][u];for(l.nsPsy.pefirbuf[18]=ke,ke=l.nsPsy.pefirbuf[9],Be=0;Be<9;Be++)ke+=(l.nsPsy.pefirbuf[Be]+l.nsPsy.pefirbuf[18-Be])*ct.fircoef[Be];for(ke=670*5*l.mode_gr*l.channels_out/ke,_=0;_<l.mode_gr;_++)for(u=0;u<l.channels_out;u++)w[_][u]*=ke}if(l.iteration_loop.iteration_loop(I,w,p,O),xe.format_bitstream(I),f=xe.copy_buffer(l,G,W,V,1),I.bWriteVbrTag&&fe.addVbrFrame(I),I.analysis&&l.pinfo!=null){for(u=0;u<l.channels_out;u++){var Oe;for(Oe=0;Oe<ce;Oe++)l.pinfo.pcmdata[u][Oe]=l.pinfo.pcmdata[u][Oe+I.framesize];for(Oe=ce;Oe<1600;Oe++)l.pinfo.pcmdata[u][Oe]=F[u][Oe-ce]}Te.set_frame_pinfo(I,O)}return be(l),f}}var g=ct,us=K.Util,gn=K.new_float;function Se(){var N=gn(g.BLKSIZE),ee=gn(g.BLKSIZE_s/2),ce=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function te(ne,fe,Te){var Ie=0,U,be,B;Te<<=1;var I=fe+Te;U=4;do{var k,i,G,W,V,f,A;A=U>>1,W=U,V=U<<1,f=V+W,U=V<<1,be=fe,B=be+A;do{var C,O,F,l;O=ne[be+0]-ne[be+W],C=ne[be+0]+ne[be+W],l=ne[be+V]-ne[be+f],F=ne[be+V]+ne[be+f],ne[be+V]=C-F,ne[be+0]=C+F,ne[be+f]=O-l,ne[be+W]=O+l,O=ne[B+0]-ne[B+W],C=ne[B+0]+ne[B+W],l=us.SQRT2*ne[B+f],F=us.SQRT2*ne[B+V],ne[B+V]=C-F,ne[B+0]=C+F,ne[B+f]=O-l,ne[B+W]=O+l,B+=U,be+=U}while(be<I);for(i=ce[Ie+0],k=ce[Ie+1],G=1;G<A;G++){var S,p;S=1-2*k*k,p=2*k*i,be=fe+G,B=fe+W-G;do{var h,b,w,C,O,u,F,_,l,m;b=p*ne[be+W]-S*ne[B+W],h=S*ne[be+W]+p*ne[B+W],O=ne[be+0]-h,C=ne[be+0]+h,u=ne[B+0]-b,w=ne[B+0]+b,b=p*ne[be+f]-S*ne[B+f],h=S*ne[be+f]+p*ne[B+f],l=ne[be+V]-h,F=ne[be+V]+h,m=ne[B+V]-b,_=ne[B+V]+b,b=k*F-i*m,h=i*F+k*m,ne[be+V]=C-h,ne[be+0]=C+h,ne[B+f]=u-b,ne[B+W]=u+b,b=i*_-k*l,h=k*_+i*l,ne[B+V]=w-h,ne[B+0]=w+h,ne[be+f]=O-b,ne[be+W]=O+b,B+=U,be+=U}while(be<I);S=i,i=S*ce[Ie+0]-k*ce[Ie+1],k=S*ce[Ie+1]+k*ce[Ie+0]}Ie+=2}while(U<Te)}var xe=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(ne,fe,Te,Ie,U){for(var be=0;be<3;be++){var B=g.BLKSIZE_s/2,I=65535&576/3*(be+1),k=g.BLKSIZE_s/8-1;do{var i,G,W,V,f,A=xe[k<<2]&255;i=ee[A]*Ie[Te][U+A+I],f=ee[127-A]*Ie[Te][U+A+I+128],G=i-f,i=i+f,W=ee[A+64]*Ie[Te][U+A+I+64],f=ee[63-A]*Ie[Te][U+A+I+192],V=W-f,W=W+f,B-=4,fe[be][B+0]=i+W,fe[be][B+2]=i-W,fe[be][B+1]=G+V,fe[be][B+3]=G-V,i=ee[A+1]*Ie[Te][U+A+I+1],f=ee[126-A]*Ie[Te][U+A+I+129],G=i-f,i=i+f,W=ee[A+65]*Ie[Te][U+A+I+65],f=ee[62-A]*Ie[Te][U+A+I+193],V=W-f,W=W+f,fe[be][B+g.BLKSIZE_s/2+0]=i+W,fe[be][B+g.BLKSIZE_s/2+2]=i-W,fe[be][B+g.BLKSIZE_s/2+1]=G+V,fe[be][B+g.BLKSIZE_s/2+3]=G-V}while(--k>=0);te(fe[be],B,g.BLKSIZE_s/2)}},this.fft_long=function(ne,fe,Te,Ie,U){var be=g.BLKSIZE/8-1,B=g.BLKSIZE/2;do{var I,k,i,G,W,V=xe[be]&255;I=N[V]*Ie[Te][U+V],W=N[V+512]*Ie[Te][U+V+512],k=I-W,I=I+W,i=N[V+256]*Ie[Te][U+V+256],W=N[V+768]*Ie[Te][U+V+768],G=i-W,i=i+W,B-=4,fe[B+0]=I+i,fe[B+2]=I-i,fe[B+1]=k+G,fe[B+3]=k-G,I=N[V+1]*Ie[Te][U+V+1],W=N[V+513]*Ie[Te][U+V+513],k=I-W,I=I+W,i=N[V+257]*Ie[Te][U+V+257],W=N[V+769]*Ie[Te][U+V+769],G=i-W,i=i+W,fe[B+g.BLKSIZE/2+0]=I+i,fe[B+g.BLKSIZE/2+2]=I-i,fe[B+g.BLKSIZE/2+1]=k+G,fe[B+g.BLKSIZE/2+3]=k-G}while(--be>=0);te(fe,B,g.BLKSIZE/2)},this.init_fft=function(ne){for(var fe=0;fe<g.BLKSIZE;fe++)N[fe]=.42-.5*Math.cos(2*Math.PI*(fe+.5)/g.BLKSIZE)+.08*Math.cos(4*Math.PI*(fe+.5)/g.BLKSIZE);for(var fe=0;fe<g.BLKSIZE_s/2;fe++)ee[fe]=.5*(1-Math.cos(2*Math.PI*(fe+.5)/g.BLKSIZE_s))}}var Qe=Se,De=K.VbrMode,Je=K.Float,St=K.ShortBlock,yt=K.Util,H=K.Arrays,$=K.new_float,le=K.new_float_n,ge=K.new_int,ie=K.assert;function Ce(){var N=new Qe,ee=2.302585092994046,ce=2,te=16,xe=2,ne=16,fe=.34,Te=1/(14752*14752)/(g.BLKSIZE/2),Ie=.01,U=.8,be=.6,B=.3,I=3.5,k=21,i=.2302585093;function G(E){return E}function W(E,M){for(var D=0,Y=0;Y<g.BLKSIZE/2;++Y)D+=E[Y]*M.ATH.eql_w[Y];return D*=Te,D}function V(E,M,D,Y,J,L,Z,re,z,de,se){var me=E.internal_flags;if(z<2)N.fft_long(me,Y[J],z,de,se),N.fft_short(me,L[Z],z,de,se);else if(z==2){for(var He=g.BLKSIZE-1;He>=0;--He){var tt=Y[J+0][He],Ae=Y[J+1][He];Y[J+0][He]=(tt+Ae)*yt.SQRT2*.5,Y[J+1][He]=(tt-Ae)*yt.SQRT2*.5}for(var et=2;et>=0;--et)for(var He=g.BLKSIZE_s-1;He>=0;--He){var tt=L[Z+0][et][He],Ae=L[Z+1][et][He];L[Z+0][et][He]=(tt+Ae)*yt.SQRT2*.5,L[Z+1][et][He]=(tt-Ae)*yt.SQRT2*.5}}M[0]=Y[J+0][0],M[0]*=M[0];for(var He=g.BLKSIZE/2-1;He>=0;--He){var ue=Y[J+0][g.BLKSIZE/2-He],qe=Y[J+0][g.BLKSIZE/2+He];M[g.BLKSIZE/2-He]=(ue*ue+qe*qe)*.5}for(var et=2;et>=0;--et){D[et][0]=L[Z+0][et][0],D[et][0]*=D[et][0];for(var He=g.BLKSIZE_s/2-1;He>=0;--He){var ue=L[Z+0][et][g.BLKSIZE_s/2-He],qe=L[Z+0][et][g.BLKSIZE_s/2+He];D[et][g.BLKSIZE_s/2-He]=(ue*ue+qe*qe)*.5}}{for(var mt=0,He=11;He<g.HBLKSIZE;He++)mt+=M[He];me.tot_ener[z]=mt}if(E.analysis){for(var He=0;He<g.HBLKSIZE;He++)me.pinfo.energy[re][z][He]=me.pinfo.energy_save[z][He],me.pinfo.energy_save[z][He]=M[He];me.pinfo.pe[re][z]=me.pe[z]}E.athaa_loudapprox==2&&z<2&&(me.loudness_sq[re][z]=me.loudness_sq_save[z],me.loudness_sq_save[z]=W(M,me))}var f=8,A=23,C=15,O,F,l,S=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function p(){O=Math.pow(10,(f+1)/16),F=Math.pow(10,(A+1)/16),l=Math.pow(10,C/10)}var h=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],b=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],w=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function u(E,M,D,Y,J,L){var Z;if(M>E)if(M<E*F)Z=M/E;else return E+M;else{if(E>=M*F)return E+M;Z=E/M}if(E+=M,Y+3<=6){if(Z>=O)return E;var re=0|yt.FAST_LOG10_X(Z,16);return E*b[re]}var re=0|yt.FAST_LOG10_X(Z,16);if(M=J.ATH.cb_l[D]*J.ATH.adjust,E<l*M){if(E>M){var z,de;return z=1,re<=13&&(z=w[re]),de=yt.FAST_LOG10_X(E/M,10/15),E*((h[re]-z)*de+z)}return re>13?E:E*w[re]}return E*h[re]}var _=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function m(E,M,D){var Y;if(E<0&&(E=0),M<0&&(M=0),E<=0)return M;if(M<=0)return E;if(M>E?Y=M/E:Y=E/M,-2<=D&&D<=2){if(Y>=O)return E+M;var J=0|yt.FAST_LOG10_X(Y,16);return(E+M)*_[J]}return Y<F?E+M:(E<M&&(E=M),E)}function P(E,M){var D=E.internal_flags;if(D.channels_out>1){for(var Y=0;Y<g.SBMAX_l;Y++){var J=D.thm[0].l[Y],L=D.thm[1].l[Y];D.thm[0].l[Y]+=L*M,D.thm[1].l[Y]+=J*M}for(var Y=0;Y<g.SBMAX_s;Y++)for(var Z=0;Z<3;Z++){var J=D.thm[0].s[Y][Z],L=D.thm[1].s[Y][Z];D.thm[0].s[Y][Z]+=L*M,D.thm[1].s[Y][Z]+=J*M}}}function ae(E){for(var M=0;M<g.SBMAX_l;M++)if(!(E.thm[0].l[M]>1.58*E.thm[1].l[M]||E.thm[1].l[M]>1.58*E.thm[0].l[M])){var D=E.mld_l[M]*E.en[3].l[M],Y=Math.max(E.thm[2].l[M],Math.min(E.thm[3].l[M],D));D=E.mld_l[M]*E.en[2].l[M];var J=Math.max(E.thm[3].l[M],Math.min(E.thm[2].l[M],D));E.thm[2].l[M]=Y,E.thm[3].l[M]=J}for(var M=0;M<g.SBMAX_s;M++)for(var L=0;L<3;L++)if(!(E.thm[0].s[M][L]>1.58*E.thm[1].s[M][L]||E.thm[1].s[M][L]>1.58*E.thm[0].s[M][L])){var D=E.mld_s[M]*E.en[3].s[M][L],Y=Math.max(E.thm[2].s[M][L],Math.min(E.thm[3].s[M][L],D));D=E.mld_s[M]*E.en[2].s[M][L];var J=Math.max(E.thm[3].s[M][L],Math.min(E.thm[2].s[M][L],D));E.thm[2].s[M][L]=Y,E.thm[3].s[M][L]=J}}function j(E,M,D){var Y=M,J=Math.pow(10,D);M*=2,Y*=2;for(var L=0;L<g.SBMAX_l;L++){var Z,re,z,de;if(de=E.ATH.cb_l[E.bm_l[L]]*J,Z=Math.min(Math.max(E.thm[0].l[L],de),Math.max(E.thm[1].l[L],de)),re=Math.max(E.thm[2].l[L],de),z=Math.max(E.thm[3].l[L],de),Z*M<re+z){var se=Z*Y/(re+z);re*=se,z*=se}E.thm[2].l[L]=Math.min(re,E.thm[2].l[L]),E.thm[3].l[L]=Math.min(z,E.thm[3].l[L])}J*=g.BLKSIZE_s/g.BLKSIZE;for(var L=0;L<g.SBMAX_s;L++)for(var me=0;me<3;me++){var Z,re,z,de;if(de=E.ATH.cb_s[E.bm_s[L]]*J,Z=Math.min(Math.max(E.thm[0].s[L][me],de),Math.max(E.thm[1].s[L][me],de)),re=Math.max(E.thm[2].s[L][me],de),z=Math.max(E.thm[3].s[L][me],de),Z*M<re+z){var se=Z*M/(re+z);re*=se,z*=se}E.thm[2].s[L][me]=Math.min(E.thm[2].s[L][me],re),E.thm[3].s[L][me]=Math.min(E.thm[3].s[L][me],z)}}function Q(E,M,D,Y,J){var L,Z,re=0,z=0;for(L=Z=0;L<g.SBMAX_s;++Z,++L){for(var de=E.bo_s[L],se=E.npart_s,me=de<se?de:se;Z<me;)ie(M[Z]>=0),ie(D[Z]>=0),re+=M[Z],z+=D[Z],Z++;if(E.en[Y].s[L][J]=re,E.thm[Y].s[L][J]=z,Z>=se){++L;break}ie(M[Z]>=0),ie(D[Z]>=0);{var He=E.PSY.bo_s_weight[L],tt=1-He;re=He*M[Z],z=He*D[Z],E.en[Y].s[L][J]+=re,E.thm[Y].s[L][J]+=z,re=tt*M[Z],z=tt*D[Z]}}for(;L<g.SBMAX_s;++L)E.en[Y].s[L][J]=0,E.thm[Y].s[L][J]=0}function o(E,M,D,Y){var J,L,Z=0,re=0;for(J=L=0;J<g.SBMAX_l;++L,++J){for(var z=E.bo_l[J],de=E.npart_l,se=z<de?z:de;L<se;)ie(M[L]>=0),ie(D[L]>=0),Z+=M[L],re+=D[L],L++;if(E.en[Y].l[J]=Z,E.thm[Y].l[J]=re,L>=de){++J;break}ie(M[L]>=0),ie(D[L]>=0);{var me=E.PSY.bo_l_weight[J],He=1-me;Z=me*M[L],re=me*D[L],E.en[Y].l[J]+=Z,E.thm[Y].l[J]+=re,Z=He*M[L],re=He*D[L]}}for(;J<g.SBMAX_l;++J)E.en[Y].l[J]=0,E.thm[Y].l[J]=0}function v(E,M,D,Y,J,L){var Z=E.internal_flags,re,z;for(z=re=0;z<Z.npart_s;++z){for(var de=0,se=Z.numlines_s[z],me=0;me<se;++me,++re){var He=M[L][re];de+=He}D[z]=de}for(ie(z==Z.npart_s),re=z=0;z<Z.npart_s;z++){var tt=Z.s3ind_s[z][0],Ae=Z.s3_ss[re++]*D[tt];for(++tt;tt<=Z.s3ind_s[z][1];)Ae+=Z.s3_ss[re]*D[tt],++re,++tt;{var et=xe*Z.nb_s1[J][z];Y[z]=Math.min(Ae,et)}if(Z.blocktype_old[J&1]==g.SHORT_TYPE){var et=ne*Z.nb_s2[J][z],ue=Y[z];Y[z]=Math.min(et,ue)}Z.nb_s2[J][z]=Z.nb_s1[J][z],Z.nb_s1[J][z]=Ae,ie(Y[z]>=0)}for(;z<=g.CBANDS;++z)D[z]=0,Y[z]=0}function oe(E,M,D,Y){var J=E.internal_flags;E.short_blocks==St.short_block_coupled&&!(M[0]!=0&&M[1]!=0)&&(M[0]=M[1]=0);for(var L=0;L<J.channels_out;L++)Y[L]=g.NORM_TYPE,E.short_blocks==St.short_block_dispensed&&(M[L]=1),E.short_blocks==St.short_block_forced&&(M[L]=0),M[L]!=0?(ie(J.blocktype_old[L]!=g.START_TYPE),J.blocktype_old[L]==g.SHORT_TYPE&&(Y[L]=g.STOP_TYPE)):(Y[L]=g.SHORT_TYPE,J.blocktype_old[L]==g.NORM_TYPE&&(J.blocktype_old[L]=g.START_TYPE),J.blocktype_old[L]==g.STOP_TYPE&&(J.blocktype_old[L]=g.SHORT_TYPE)),D[L]=J.blocktype_old[L],J.blocktype_old[L]=Y[L]}function _e(E,M,D){return D>=1?E:D<=0?M:M>0?Math.pow(E/M,D)*M:0}var Be=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function ke(E,M){for(var D=309.07,Y=0;Y<g.SBMAX_s-1;Y++)for(var J=0;J<3;J++){var L=E.thm.s[Y][J];if(L>0){var Z=L*M,re=E.en.s[Y][J];re>Z&&(re>Z*1e10?D+=Be[Y]*(10*ee):D+=Be[Y]*yt.FAST_LOG10(re/Z))}}return D}var Oe=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function Le(E,M){for(var D=281.0575,Y=0;Y<g.SBMAX_l-1;Y++){var J=E.thm.l[Y];if(J>0){var L=J*M,Z=E.en.l[Y];Z>L&&(Z>L*1e10?D+=Oe[Y]*(10*ee):D+=Oe[Y]*yt.FAST_LOG10(Z/L))}}return D}function it(E,M,D,Y,J){var L,Z;for(L=Z=0;L<E.npart_l;++L){var re=0,z=0,de;for(de=0;de<E.numlines_l[L];++de,++Z){var se=M[Z];re+=se,z<se&&(z=se)}D[L]=re,Y[L]=z,J[L]=re*E.rnumlines_l[L],ie(E.rnumlines_l[L]>=0),ie(D[L]>=0),ie(Y[L]>=0),ie(J[L]>=0)}}function Ke(E,M,D,Y){var J=S.length-1,L=0,Z=D[L]+D[L+1];if(Z>0){var re=M[L];re<M[L+1]&&(re=M[L+1]),ie(E.numlines_l[L]+E.numlines_l[L+1]-1>0),Z=20*(re*2-Z)/(Z*(E.numlines_l[L]+E.numlines_l[L+1]-1));var z=0|Z;z>J&&(z=J),Y[L]=z}else Y[L]=0;for(L=1;L<E.npart_l-1;L++)if(Z=D[L-1]+D[L]+D[L+1],Z>0){var re=M[L-1];re<M[L]&&(re=M[L]),re<M[L+1]&&(re=M[L+1]),ie(E.numlines_l[L-1]+E.numlines_l[L]+E.numlines_l[L+1]-1>0),Z=20*(re*3-Z)/(Z*(E.numlines_l[L-1]+E.numlines_l[L]+E.numlines_l[L+1]-1));var z=0|Z;z>J&&(z=J),Y[L]=z}else Y[L]=0;if(ie(L==E.npart_l-1),Z=D[L-1]+D[L],Z>0){var re=M[L-1];re<M[L]&&(re=M[L]),ie(E.numlines_l[L-1]+E.numlines_l[L]-1>0),Z=20*(re*2-Z)/(Z*(E.numlines_l[L-1]+E.numlines_l[L]-1));var z=0|Z;z>J&&(z=J),Y[L]=z}else Y[L]=0;ie(L==E.npart_l-1)}var Ne=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(E,M,D,Y,J,L,Z,re,z,de){var se=E.internal_flags,me=le([2,g.BLKSIZE]),He=le([2,3,g.BLKSIZE_s]),tt=$(g.CBANDS+1),Ae=$(g.CBANDS+1),et=$(g.CBANDS+2),ue=ge(2),qe=ge(2),mt,Ee,We,Re,nt,Ht,$e,ut,pt=le([2,576]),Ut,jn=ge(g.CBANDS+2),en=ge(g.CBANDS+2);for(H.fill(en,0),mt=se.channels_out,E.mode==an.JOINT_STEREO&&(mt=4),E.VBR==De.vbr_off?Ut=se.ResvMax==0?0:se.ResvSize/se.ResvMax*.5:E.VBR==De.vbr_rh||E.VBR==De.vbr_mtrh||E.VBR==De.vbr_mt?Ut=.6:Ut=1,Ee=0;Ee<se.channels_out;Ee++){var Yt=M[Ee],Ln=D+576-350-k+192;for(Re=0;Re<576;Re++){var qn,Un;for(qn=Yt[Ln+Re+10],Un=0,nt=0;nt<(k-1)/2-1;nt+=2)qn+=Ne[nt]*(Yt[Ln+Re+nt]+Yt[Ln+Re+k-nt]),Un+=Ne[nt+1]*(Yt[Ln+Re+nt+1]+Yt[Ln+Re+k-nt-1]);pt[Ee][Re]=qn+Un}J[Y][Ee].en.assign(se.en[Ee]),J[Y][Ee].thm.assign(se.thm[Ee]),mt>2&&(L[Y][Ee].en.assign(se.en[Ee+2]),L[Y][Ee].thm.assign(se.thm[Ee+2]))}for(Ee=0;Ee<mt;Ee++){var ir,lr,xn=$(12),Sr=[0,0,0,0],Fs=$(12),H0=1,Qo,zo=$(g.CBANDS),Zo=$(g.CBANDS),Kt=[0,0,0,0],Jo=$(g.HBLKSIZE),e1=le([3,g.HBLKSIZE_s]);for(ie(se.npart_s<=g.CBANDS),ie(se.npart_l<=g.CBANDS),Re=0;Re<3;Re++)xn[Re]=se.nsPsy.last_en_subshort[Ee][Re+6],ie(se.nsPsy.last_en_subshort[Ee][Re+4]>0),Fs[Re]=xn[Re]/se.nsPsy.last_en_subshort[Ee][Re+4],Sr[0]+=xn[Re];if(Ee==2)for(Re=0;Re<576;Re++){var $0,V0;$0=pt[0][Re],V0=pt[1][Re],pt[0][Re]=$0+V0,pt[1][Re]=$0-V0}{var t1=pt[Ee&1],ha=0;for(Re=0;Re<9;Re++){for(var r_=ha+64,mn=1;ha<r_;ha++)mn<Math.abs(t1[ha])&&(mn=Math.abs(t1[ha]));se.nsPsy.last_en_subshort[Ee][Re]=xn[Re+3]=mn,Sr[1+Re/3]+=mn,mn>xn[Re+3-2]?(ie(xn[Re+3-2]>0),mn=mn/xn[Re+3-2]):xn[Re+3-2]>mn*10?mn=xn[Re+3-2]/(mn*10):mn=0,Fs[Re+3]=mn}}if(E.analysis){var D0=Fs[0];for(Re=1;Re<12;Re++)D0<Fs[Re]&&(D0=Fs[Re]);se.pinfo.ers[Y][Ee]=se.pinfo.ers_save[Ee],se.pinfo.ers_save[Ee]=D0}for(Qo=Ee==3?se.nsPsy.attackthre_s:se.nsPsy.attackthre,Re=0;Re<12;Re++)Kt[Re/3]==0&&Fs[Re]>Qo&&(Kt[Re/3]=Re%3+1);for(Re=1;Re<4;Re++){var X0;Sr[Re-1]>Sr[Re]?(ie(Sr[Re]>0),X0=Sr[Re-1]/Sr[Re]):(ie(Sr[Re-1]>0),X0=Sr[Re]/Sr[Re-1]),X0<1.7&&(Kt[Re]=0,Re==1&&(Kt[0]=0))}for(Kt[0]!=0&&se.nsPsy.lastAttacks[Ee]!=0&&(Kt[0]=0),(se.nsPsy.lastAttacks[Ee]==3||Kt[0]+Kt[1]+Kt[2]+Kt[3]!=0)&&(H0=0,Kt[1]!=0&&Kt[0]!=0&&(Kt[1]=0),Kt[2]!=0&&Kt[1]!=0&&(Kt[2]=0),Kt[3]!=0&&Kt[2]!=0&&(Kt[3]=0)),Ee<2?qe[Ee]=H0:H0==0&&(qe[0]=qe[1]=0),z[Ee]=se.tot_ener[Ee],lr=He,ir=me,V(E,Jo,e1,ir,Ee&1,lr,Ee&1,Y,Ee,M,D),it(se,Jo,tt,zo,Zo),Ke(se,zo,Zo,jn),ut=0;ut<3;ut++){var j0,Fn;for(v(E,e1,Ae,et,Ee,ut),Q(se,Ae,et,Ee,ut),$e=0;$e<g.SBMAX_s;$e++){if(Fn=se.thm[Ee].s[$e][ut],Fn*=U,Kt[ut]>=2||Kt[ut+1]==1){var _a=ut!=0?ut-1:2,mn=_e(se.thm[Ee].s[$e][_a],Fn,be*Ut);Fn=Math.min(Fn,mn)}if(Kt[ut]==1){var _a=ut!=0?ut-1:2,mn=_e(se.thm[Ee].s[$e][_a],Fn,B*Ut);Fn=Math.min(Fn,mn)}else if(ut!=0&&Kt[ut-1]==3||ut==0&&se.nsPsy.lastAttacks[Ee]==3){var _a=ut!=2?ut+1:0,mn=_e(se.thm[Ee].s[$e][_a],Fn,B*Ut);Fn=Math.min(Fn,mn)}j0=xn[ut*3+3]+xn[ut*3+4]+xn[ut*3+5],xn[ut*3+5]*6<j0&&(Fn*=.5,xn[ut*3+4]*6<j0&&(Fn*=.5)),se.thm[Ee].s[$e][ut]=Fn}}for(se.nsPsy.lastAttacks[Ee]=Kt[2],Ht=0,We=0;We<se.npart_l;We++){for(var bs=se.s3ind[We][0],q0=tt[bs]*S[jn[bs]],ys=se.s3_ll[Ht++]*q0;++bs<=se.s3ind[We][1];)q0=tt[bs]*S[jn[bs]],ys=u(ys,se.s3_ll[Ht++]*q0,bs,bs-We,se);ys*=.158489319246111,se.blocktype_old[Ee&1]==g.SHORT_TYPE?et[We]=ys:et[We]=_e(Math.min(ys,Math.min(ce*se.nb_1[Ee][We],te*se.nb_2[Ee][We])),ys,Ut),se.nb_2[Ee][We]=se.nb_1[Ee][We],se.nb_1[Ee][We]=ys}for(;We<=g.CBANDS;++We)tt[We]=0,et[We]=0;o(se,tt,et,Ee)}if((E.mode==an.STEREO||E.mode==an.JOINT_STEREO)&&E.interChRatio>0&&P(E,E.interChRatio),E.mode==an.JOINT_STEREO){var U0;ae(se),U0=E.msfix,Math.abs(U0)>0&&j(se,U0,E.ATHlower*se.ATH.adjust)}for(oe(E,qe,de,ue),Ee=0;Ee<mt;Ee++){var da,ma=0,oi,ci;Ee>1?(da=re,ma=-2,oi=g.NORM_TYPE,(de[0]==g.SHORT_TYPE||de[1]==g.SHORT_TYPE)&&(oi=g.SHORT_TYPE),ci=L[Y][Ee-2]):(da=Z,ma=0,oi=de[Ee],ci=J[Y][Ee]),oi==g.SHORT_TYPE?da[ma+Ee]=ke(ci,se.masking_lower):da[ma+Ee]=Le(ci,se.masking_lower),E.analysis&&(se.pinfo.pe[Y][Ee]=da[ma+Ee])}return 0};function Mt(E,M,D,Y,J,L,Z,re){var z=E.internal_flags;if(Y<2)N.fft_long(z,Z[re],Y,M,D);else if(Y==2)for(var de=g.BLKSIZE-1;de>=0;--de){var se=Z[re+0][de],me=Z[re+1][de];Z[re+0][de]=(se+me)*yt.SQRT2*.5,Z[re+1][de]=(se-me)*yt.SQRT2*.5}L[0]=Z[re+0][0],L[0]*=L[0];for(var de=g.BLKSIZE/2-1;de>=0;--de){var He=Z[re+0][g.BLKSIZE/2-de],tt=Z[re+0][g.BLKSIZE/2+de];L[g.BLKSIZE/2-de]=(He*He+tt*tt)*.5}{for(var Ae=0,de=11;de<g.HBLKSIZE;de++)Ae+=L[de];z.tot_ener[Y]=Ae}if(E.analysis){for(var de=0;de<g.HBLKSIZE;de++)z.pinfo.energy[J][Y][de]=z.pinfo.energy_save[Y][de],z.pinfo.energy_save[Y][de]=L[de];z.pinfo.pe[J][Y]=z.pe[Y]}}function ln(E,M,D,Y,J,L,Z,re){var z=E.internal_flags;if(J==0&&Y<2&&N.fft_short(z,Z[re],Y,M,D),Y==2)for(var de=g.BLKSIZE_s-1;de>=0;--de){var se=Z[re+0][J][de],me=Z[re+1][J][de];Z[re+0][J][de]=(se+me)*yt.SQRT2*.5,Z[re+1][J][de]=(se-me)*yt.SQRT2*.5}L[J][0]=Z[re+0][J][0],L[J][0]*=L[J][0];for(var de=g.BLKSIZE_s/2-1;de>=0;--de){var He=Z[re+0][J][g.BLKSIZE_s/2-de],tt=Z[re+0][J][g.BLKSIZE_s/2+de];L[J][g.BLKSIZE_s/2-de]=(He*He+tt*tt)*.5}}function wt(E,M,D,Y){var J=E.internal_flags;E.athaa_loudapprox==2&&D<2&&(J.loudness_sq[M][D]=J.loudness_sq_save[D],J.loudness_sq_save[D]=W(Y,J))}var jt=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function qt(E,M,D,Y,J,L,Z,re,z,de){for(var se=le([2,576]),me=E.internal_flags,He=me.channels_out,tt=E.mode==an.JOINT_STEREO?4:He,Ae=0;Ae<He;Ae++){firbuf=M[Ae];for(var et=D+576-350-k+192,ue=0;ue<576;ue++){var qe,mt;qe=firbuf[et+ue+10],mt=0;for(var Ee=0;Ee<(k-1)/2-1;Ee+=2)qe+=jt[Ee]*(firbuf[et+ue+Ee]+firbuf[et+ue+k-Ee]),mt+=jt[Ee+1]*(firbuf[et+ue+Ee+1]+firbuf[et+ue+k-Ee-1]);se[Ae][ue]=qe+mt}J[Y][Ae].en.assign(me.en[Ae]),J[Y][Ae].thm.assign(me.thm[Ae]),tt>2&&(L[Y][Ae].en.assign(me.en[Ae+2]),L[Y][Ae].thm.assign(me.thm[Ae+2]))}for(var Ae=0;Ae<tt;Ae++){var We=$(12),Re=$(12),nt=[0,0,0,0],Ht=se[Ae&1],$e=0,ut=Ae==3?me.nsPsy.attackthre_s:me.nsPsy.attackthre,pt=1;if(Ae==2)for(var ue=0,Ee=576;Ee>0;++ue,--Ee){var Ut=se[0][ue],jn=se[1][ue];se[0][ue]=Ut+jn,se[1][ue]=Ut-jn}for(var ue=0;ue<3;ue++)Re[ue]=me.nsPsy.last_en_subshort[Ae][ue+6],ie(me.nsPsy.last_en_subshort[Ae][ue+4]>0),We[ue]=Re[ue]/me.nsPsy.last_en_subshort[Ae][ue+4],nt[0]+=Re[ue];for(var ue=0;ue<9;ue++){for(var en=$e+64,Yt=1;$e<en;$e++)Yt<Math.abs(Ht[$e])&&(Yt=Math.abs(Ht[$e]));me.nsPsy.last_en_subshort[Ae][ue]=Re[ue+3]=Yt,nt[1+ue/3]+=Yt,Yt>Re[ue+3-2]?(ie(Re[ue+3-2]>0),Yt=Yt/Re[ue+3-2]):Re[ue+3-2]>Yt*10?Yt=Re[ue+3-2]/(Yt*10):Yt=0,We[ue+3]=Yt}for(var ue=0;ue<3;++ue){var Ln=Re[ue*3+3]+Re[ue*3+4]+Re[ue*3+5],qn=1;Re[ue*3+5]*6<Ln&&(qn*=.5,Re[ue*3+4]*6<Ln&&(qn*=.5)),re[Ae][ue]=qn}if(E.analysis){for(var Un=We[0],ue=1;ue<12;ue++)Un<We[ue]&&(Un=We[ue]);me.pinfo.ers[Y][Ae]=me.pinfo.ers_save[Ae],me.pinfo.ers_save[Ae]=Un}for(var ue=0;ue<12;ue++)z[Ae][ue/3]==0&&We[ue]>ut&&(z[Ae][ue/3]=ue%3+1);for(var ue=1;ue<4;ue++){var ir=nt[ue-1],lr=nt[ue],xn=Math.max(ir,lr);xn<4e4&&ir<1.7*lr&&lr<1.7*ir&&(ue==1&&z[Ae][0]<=z[Ae][ue]&&(z[Ae][0]=0),z[Ae][ue]=0)}z[Ae][0]<=me.nsPsy.lastAttacks[Ae]&&(z[Ae][0]=0),(me.nsPsy.lastAttacks[Ae]==3||z[Ae][0]+z[Ae][1]+z[Ae][2]+z[Ae][3]!=0)&&(pt=0,z[Ae][1]!=0&&z[Ae][0]!=0&&(z[Ae][1]=0),z[Ae][2]!=0&&z[Ae][1]!=0&&(z[Ae][2]=0),z[Ae][3]!=0&&z[Ae][2]!=0&&(z[Ae][3]=0)),Ae<2?de[Ae]=pt:pt==0&&(de[0]=de[1]=0),Z[Ae]=me.tot_ener[Ae]}}function Jt(E,M,D){if(D==0)for(var Y=0;Y<E.npart_s;Y++)E.nb_s2[M][Y]=E.nb_s1[M][Y],E.nb_s1[M][Y]=0}function dn(E,M){for(var D=0;D<E.npart_l;D++)E.nb_2[M][D]=E.nb_1[M][D],E.nb_1[M][D]=0}function wr(E,M,D,Y){var J=S.length-1,L=0,Z=D[L]+D[L+1];if(Z>0){var re=M[L];re<M[L+1]&&(re=M[L+1]),ie(E.numlines_s[L]+E.numlines_s[L+1]-1>0),Z=20*(re*2-Z)/(Z*(E.numlines_s[L]+E.numlines_s[L+1]-1));var z=0|Z;z>J&&(z=J),Y[L]=z}else Y[L]=0;for(L=1;L<E.npart_s-1;L++)if(Z=D[L-1]+D[L]+D[L+1],ie(L+1<E.npart_s),Z>0){var re=M[L-1];re<M[L]&&(re=M[L]),re<M[L+1]&&(re=M[L+1]),ie(E.numlines_s[L-1]+E.numlines_s[L]+E.numlines_s[L+1]-1>0),Z=20*(re*3-Z)/(Z*(E.numlines_s[L-1]+E.numlines_s[L]+E.numlines_s[L+1]-1));var z=0|Z;z>J&&(z=J),Y[L]=z}else Y[L]=0;if(ie(L==E.npart_s-1),Z=D[L-1]+D[L],Z>0){var re=M[L-1];re<M[L]&&(re=M[L]),ie(E.numlines_s[L-1]+E.numlines_s[L]-1>0),Z=20*(re*2-Z)/(Z*(E.numlines_s[L-1]+E.numlines_s[L]-1));var z=0|Z;z>J&&(z=J),Y[L]=z}else Y[L]=0;ie(L==E.npart_s-1)}function Jn(E,M,D,Y,J,L){var Z=E.internal_flags,re=new float[g.CBANDS],z=$(g.CBANDS),de,se,me,He=new int[g.CBANDS];for(me=se=0;me<Z.npart_s;++me){var tt=0,Ae=0,et=Z.numlines_s[me];for(de=0;de<et;++de,++se){var ue=M[L][se];tt+=ue,Ae<ue&&(Ae=ue)}D[me]=tt,re[me]=Ae,z[me]=tt/et,ie(z[me]>=0)}for(ie(me==Z.npart_s);me<g.CBANDS;++me)re[me]=0,z[me]=0;for(wr(Z,re,z,He),se=me=0;me<Z.npart_s;me++){var qe=Z.s3ind_s[me][0],mt=Z.s3ind_s[me][1],Ee,We,Re,nt,Ht;for(Ee=He[qe],We=1,nt=Z.s3_ss[se]*D[qe]*S[He[qe]],++se,++qe;qe<=mt;)Ee+=He[qe],We+=1,Re=Z.s3_ss[se]*D[qe]*S[He[qe]],nt=m(nt,Re,qe-me),++se,++qe;Ee=(1+2*Ee)/(2*We),Ht=S[Ee]*.5,nt*=Ht,Y[me]=nt,Z.nb_s2[J][me]=Z.nb_s1[J][me],Z.nb_s1[J][me]=nt,Re=re[me],Re*=Z.minval_s[me],Re*=Ht,Y[me]>Re&&(Y[me]=Re),Z.masking_lower>1&&(Y[me]*=Z.masking_lower),Y[me]>D[me]&&(Y[me]=D[me]),Z.masking_lower<1&&(Y[me]*=Z.masking_lower),ie(Y[me]>=0)}for(;me<g.CBANDS;++me)D[me]=0,Y[me]=0}function Nn(E,M,D,Y,J){var L=$(g.CBANDS),Z=$(g.CBANDS),re=ge(g.CBANDS+2),z;it(E,M,D,L,Z),Ke(E,L,Z,re);var de=0;for(z=0;z<E.npart_l;z++){var se,me,He,tt,Ae=E.s3ind[z][0],et=E.s3ind[z][1],ue=0,qe=0;for(ue=re[Ae],qe+=1,me=E.s3_ll[de]*D[Ae]*S[re[Ae]],++de,++Ae;Ae<=et;)ue+=re[Ae],qe+=1,se=E.s3_ll[de]*D[Ae]*S[re[Ae]],tt=m(me,se,Ae-z),me=tt,++de,++Ae;if(ue=(1+2*ue)/(2*qe),He=S[ue]*.5,me*=He,E.blocktype_old[J&1]==g.SHORT_TYPE){var mt=ce*E.nb_1[J][z];mt>0?Y[z]=Math.min(me,mt):Y[z]=Math.min(me,D[z]*B)}else{var Ee=te*E.nb_2[J][z],We=ce*E.nb_1[J][z],mt;Ee<=0&&(Ee=me),We<=0&&(We=me),E.blocktype_old[J&1]==g.NORM_TYPE?mt=Math.min(We,Ee):mt=We,Y[z]=Math.min(me,mt)}E.nb_2[J][z]=E.nb_1[J][z],E.nb_1[J][z]=me,se=L[z],se*=E.minval_l[z],se*=He,Y[z]>se&&(Y[z]=se),E.masking_lower>1&&(Y[z]*=E.masking_lower),Y[z]>D[z]&&(Y[z]=D[z]),E.masking_lower<1&&(Y[z]*=E.masking_lower),ie(Y[z]>=0)}for(;z<g.CBANDS;++z)D[z]=0,Y[z]=0}function ar(E,M){var D=E.internal_flags;E.short_blocks==St.short_block_coupled&&!(M[0]!=0&&M[1]!=0)&&(M[0]=M[1]=0);for(var Y=0;Y<D.channels_out;Y++)E.short_blocks==St.short_block_dispensed&&(M[Y]=1),E.short_blocks==St.short_block_forced&&(M[Y]=0)}function vs(E,M,D){for(var Y=E.internal_flags,J=0;J<Y.channels_out;J++){var L=g.NORM_TYPE;M[J]!=0?(ie(Y.blocktype_old[J]!=g.START_TYPE),Y.blocktype_old[J]==g.SHORT_TYPE&&(L=g.STOP_TYPE)):(L=g.SHORT_TYPE,Y.blocktype_old[J]==g.NORM_TYPE&&(Y.blocktype_old[J]=g.START_TYPE),Y.blocktype_old[J]==g.STOP_TYPE&&(Y.blocktype_old[J]=g.SHORT_TYPE)),D[J]=Y.blocktype_old[J],Y.blocktype_old[J]=L}}function Gr(E,M,D,Y,J,L,Z){for(var re=L*2,z=L>0?Math.pow(10,J):1,de,se,me=0;me<Z;++me){var He=E[2][me],tt=E[3][me],Ae=M[0][me],et=M[1][me],ue=M[2][me],qe=M[3][me];if(Ae<=1.58*et&&et<=1.58*Ae){var mt=D[me]*tt,Ee=D[me]*He;se=Math.max(ue,Math.min(qe,mt)),de=Math.max(qe,Math.min(ue,Ee))}else se=ue,de=qe;if(L>0){var We,Re,nt=Y[me]*z;if(We=Math.min(Math.max(Ae,nt),Math.max(et,nt)),ue=Math.max(se,nt),qe=Math.max(de,nt),Re=ue+qe,Re>0&&We*re<Re){var Ht=We*re/Re;ue*=Ht,qe*=Ht}se=Math.min(ue,se),de=Math.min(qe,de)}se>He&&(se=He),de>tt&&(de=tt),M[2][me]=se,M[3][me]=de}}this.L3psycho_anal_vbr=function(E,M,D,Y,J,L,Z,re,z,de){var se=E.internal_flags,me,He,tt=$(g.HBLKSIZE),Ae=le([3,g.HBLKSIZE_s]),et=le([2,g.BLKSIZE]),ue=le([2,3,g.BLKSIZE_s]),qe=le([4,g.CBANDS]),mt=le([4,g.CBANDS]),Ee=le([4,3]),We=.6,Re=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],nt=ge(2),Ht=E.mode==an.JOINT_STEREO?4:se.channels_out;qt(E,M,D,Y,J,L,z,Ee,Re,nt),ar(E,nt);{for(var $e=0;$e<Ht;$e++){var ut=$e&1;me=et,Mt(E,M,D,$e,Y,tt,me,ut),wt(E,Y,$e,tt),nt[ut]!=0?Nn(se,tt,qe[$e],mt[$e],$e):dn(se,$e)}nt[0]+nt[1]==2&&E.mode==an.JOINT_STEREO&&Gr(qe,mt,se.mld_cb_l,se.ATH.cb_l,E.ATHlower*se.ATH.adjust,E.msfix,se.npart_l);for(var $e=0;$e<Ht;$e++){var ut=$e&1;nt[ut]!=0&&o(se,qe[$e],mt[$e],$e)}}{for(var pt=0;pt<3;pt++){for(var $e=0;$e<Ht;++$e){var ut=$e&1;nt[ut]!=0?Jt(se,$e,pt):(He=ue,ln(E,M,D,$e,pt,Ae,He,ut),Jn(E,Ae,qe[$e],mt[$e],$e,pt))}nt[0]+nt[1]==0&&E.mode==an.JOINT_STEREO&&Gr(qe,mt,se.mld_cb_s,se.ATH.cb_s,E.ATHlower*se.ATH.adjust,E.msfix,se.npart_s);for(var $e=0;$e<Ht;++$e){var ut=$e&1;nt[ut]==0&&Q(se,qe[$e],mt[$e],$e,pt)}}for(var $e=0;$e<Ht;$e++){var ut=$e&1;if(nt[ut]==0)for(var Ut=0;Ut<g.SBMAX_s;Ut++){for(var jn=$(3),pt=0;pt<3;pt++){var en=se.thm[$e].s[Ut][pt];if(en*=U,Re[$e][pt]>=2||Re[$e][pt+1]==1){var Yt=pt!=0?pt-1:2,Ln=_e(se.thm[$e].s[Ut][Yt],en,be*We);en=Math.min(en,Ln)}else if(Re[$e][pt]==1){var Yt=pt!=0?pt-1:2,Ln=_e(se.thm[$e].s[Ut][Yt],en,B*We);en=Math.min(en,Ln)}else if(pt!=0&&Re[$e][pt-1]==3||pt==0&&se.nsPsy.lastAttacks[$e]==3){var Yt=pt!=2?pt+1:0,Ln=_e(se.thm[$e].s[Ut][Yt],en,B*We);en=Math.min(en,Ln)}en*=Ee[$e][pt],jn[pt]=en}for(var pt=0;pt<3;pt++)se.thm[$e].s[Ut][pt]=jn[pt]}}}for(var $e=0;$e<Ht;$e++)se.nsPsy.lastAttacks[$e]=Re[$e][2];vs(E,nt,de);for(var $e=0;$e<Ht;$e++){var qn,Un,ir,lr;$e>1?(qn=re,Un=-2,ir=g.NORM_TYPE,(de[0]==g.SHORT_TYPE||de[1]==g.SHORT_TYPE)&&(ir=g.SHORT_TYPE),lr=L[Y][$e-2]):(qn=Z,Un=0,ir=de[$e],lr=J[Y][$e]),ir==g.SHORT_TYPE?qn[Un+$e]=ke(lr,se.masking_lower):qn[Un+$e]=Le(lr,se.masking_lower),E.analysis&&(se.pinfo.pe[Y][$e]=qn[Un+$e])}return 0};function Dn(E,M){var D=E,Y;return D>=0?Y=-D*27:Y=D*M,Y<=-72?0:Math.exp(Y*i)}function ps(E){var M=0,D=0;{var Y=0,J,L;for(Y=0;Dn(Y,E)>1e-20;Y-=1);for(J=Y,L=0;Math.abs(L-J)>1e-12;)Y=(L+J)/2,Dn(Y,E)>0?L=Y:J=Y;M=J}{var Y=0,J,L;for(Y=0;Dn(Y,E)>1e-20;Y+=1);for(J=0,L=Y;Math.abs(L-J)>1e-12;)Y=(L+J)/2,Dn(Y,E)>0?J=Y:L=Y;D=L}{var Z=0,re=1e3,z;for(z=0;z<=re;++z){var Y=M+z*(D-M)/re,de=Dn(Y,E);Z+=de}{var se=(re+1)/(Z*(D-M));return se}}}function Lr(E){var M,D,Y,J;return M=E,M>=0?M*=3:M*=1.5,M>=.5&&M<=2.5?(J=M-.5,D=8*(J*J-2*J)):D=0,M+=.474,Y=15.811389+7.5*M-17.5*Math.sqrt(1+M*M),Y<=-60?0:(M=Math.exp((D+Y)*i),M/=.6609193,M)}function Xn(E){return E<0&&(E=0),E=E*.001,13*Math.atan(.76*E)+3.5*Math.atan(E*E/(7.5*7.5))}function Ns(E,M,D,Y,J,L,Z,re,z,de,se,me){var He=$(g.CBANDS+1),tt=re/(me>15?2*576:2*192),Ae=ge(g.HBLKSIZE),et;re/=z;var ue=0,qe=0;for(et=0;et<g.CBANDS;et++){var mt,Ee;for(mt=Xn(re*ue),He[et]=re*ue,Ee=ue;Xn(re*Ee)-mt<fe&&Ee<=z/2;Ee++);for(E[et]=Ee-ue,qe=et+1;ue<Ee;)Ae[ue++]=et;if(ue>z/2){ue=z/2,++et;break}}He[et]=re*ue;for(var We=0;We<me;We++){var Re,nt,Ht,$e,ut;Ht=de[We],$e=de[We+1],Re=0|Math.floor(.5+se*(Ht-.5)),Re<0&&(Re=0),nt=0|Math.floor(.5+se*($e-.5)),nt>z/2&&(nt=z/2),D[We]=(Ae[Re]+Ae[nt])/2,M[We]=Ae[nt];var pt=tt*$e;Z[We]=(pt-He[M[We]])/(He[M[We]+1]-He[M[We]]),Z[We]<0?Z[We]=0:Z[We]>1&&(Z[We]=1),ut=Xn(re*de[We]*se),ut=Math.min(ut,15.5)/15.5,L[We]=Math.pow(10,1.25*(1-Math.cos(Math.PI*ut))-2.5)}ue=0;for(var Ut=0;Ut<qe;Ut++){var jn=E[Ut],mt,en;mt=Xn(re*ue),en=Xn(re*(ue+jn-1)),Y[Ut]=.5*(mt+en),mt=Xn(re*(ue-.5)),en=Xn(re*(ue+jn-.5)),J[Ut]=en-mt,ue+=jn}return qe}function Wo(E,M,D,Y,J,L){var Z=le([g.CBANDS,g.CBANDS]),re,z=0;if(L)for(var de=0;de<M;de++)for(re=0;re<M;re++){var se=Lr(D[de]-D[re])*Y[re];Z[de][re]=se*J[de]}else for(re=0;re<M;re++)for(var me=15+Math.min(21/D[re],12),He=ps(me),de=0;de<M;de++){var se=He*Dn(D[de]-D[re],me)*Y[re];Z[de][re]=se*J[de]}for(var de=0;de<M;de++){for(re=0;re<M&&!(Z[de][re]>0);re++);for(E[de][0]=re,re=M-1;re>0&&!(Z[de][re]>0);re--);E[de][1]=re,z+=E[de][1]-E[de][0]+1}for(var tt=$(z),Ae=0,de=0;de<M;de++)for(re=E[de][0];re<=E[de][1];re++)tt[Ae++]=Z[de][re];return tt}function Go(E){var M=Xn(E);return M=Math.min(M,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*M))-2.5)}this.psymodel_init=function(E){var M=E.internal_flags,D,Y=!0,J=13,L=24,Z=0,re=0,z=-8.25,de=-4.5,se=$(g.CBANDS),me=$(g.CBANDS),He=$(g.CBANDS),tt=E.out_samplerate;switch(E.experimentalZ){default:case 0:Y=!0;break;case 1:Y=!(E.VBR==De.vbr_mtrh||E.VBR==De.vbr_mt);break;case 2:Y=!1;break;case 3:J=8,Z=-1.75,re=-.0125,z=-8.25,de=-2.25;break}for(M.ms_ener_ratio_old=.25,M.blocktype_old[0]=M.blocktype_old[1]=g.NORM_TYPE,D=0;D<4;++D){for(var ue=0;ue<g.CBANDS;++ue)M.nb_1[D][ue]=1e20,M.nb_2[D][ue]=1e20,M.nb_s1[D][ue]=M.nb_s2[D][ue]=1;for(var Ae=0;Ae<g.SBMAX_l;Ae++)M.en[D].l[Ae]=1e20,M.thm[D].l[Ae]=1e20;for(var ue=0;ue<3;++ue){for(var Ae=0;Ae<g.SBMAX_s;Ae++)M.en[D].s[Ae][ue]=1e20,M.thm[D].s[Ae][ue]=1e20;M.nsPsy.lastAttacks[D]=0}for(var ue=0;ue<9;ue++)M.nsPsy.last_en_subshort[D][ue]=10}for(M.loudness_sq_save[0]=M.loudness_sq_save[1]=0,M.npart_l=Ns(M.numlines_l,M.bo_l,M.bm_l,se,me,M.mld_l,M.PSY.bo_l_weight,tt,g.BLKSIZE,M.scalefac_band.l,g.BLKSIZE/(2*576),g.SBMAX_l),ie(M.npart_l<g.CBANDS),D=0;D<M.npart_l;D++){var et=Z;se[D]>=J&&(et=re*(se[D]-J)/(L-J)+Z*(L-se[D])/(L-J)),He[D]=Math.pow(10,et/10),M.numlines_l[D]>0?M.rnumlines_l[D]=1/M.numlines_l[D]:M.rnumlines_l[D]=0}M.s3_ll=Wo(M.s3ind,M.npart_l,se,me,He,Y);var ue=0;for(D=0;D<M.npart_l;D++){var qe;qe=Je.MAX_VALUE;for(var mt=0;mt<M.numlines_l[D];mt++,ue++){var Ee=tt*ue/(1e3*g.BLKSIZE),We;We=this.ATHformula(Ee*1e3,E)-20,We=Math.pow(10,.1*We),We*=M.numlines_l[D],qe>We&&(qe=We)}M.ATH.cb_l[D]=qe,qe=-20+se[D]*20/10,qe>6&&(qe=100),qe<-15&&(qe=-15),qe-=8,M.minval_l[D]=Math.pow(10,qe/10)*M.numlines_l[D]}for(M.npart_s=Ns(M.numlines_s,M.bo_s,M.bm_s,se,me,M.mld_s,M.PSY.bo_s_weight,tt,g.BLKSIZE_s,M.scalefac_band.s,g.BLKSIZE_s/(2*192),g.SBMAX_s),ie(M.npart_s<g.CBANDS),ue=0,D=0;D<M.npart_s;D++){var qe,et=z;se[D]>=J&&(et=de*(se[D]-J)/(L-J)+z*(L-se[D])/(L-J)),He[D]=Math.pow(10,et/10),qe=Je.MAX_VALUE;for(var mt=0;mt<M.numlines_s[D];mt++,ue++){var Ee=tt*ue/(1e3*g.BLKSIZE_s),We;We=this.ATHformula(Ee*1e3,E)-20,We=Math.pow(10,.1*We),We*=M.numlines_s[D],qe>We&&(qe=We)}M.ATH.cb_s[D]=qe,qe=-7+se[D]*7/12,se[D]>12&&(qe*=1+Math.log(1+qe)*3.1),se[D]<12&&(qe*=1+Math.log(1-qe)*2.3),qe<-15&&(qe=-15),qe-=8,M.minval_s[D]=Math.pow(10,qe/10)*M.numlines_s[D]}M.s3_ss=Wo(M.s3ind_s,M.npart_s,se,me,He,Y),p(),N.init_fft(M),M.decay=Math.exp(-1*ee/(Ie*tt/192));{var Re;Re=I,E.exp_nspsytune&2&&(Re=1),Math.abs(E.msfix)>0&&(Re=E.msfix),E.msfix=Re;for(var nt=0;nt<M.npart_l;nt++)M.s3ind[nt][1]>M.npart_l-1&&(M.s3ind[nt][1]=M.npart_l-1)}var Ht=576*M.mode_gr/tt;if(M.ATH.decay=Math.pow(10,-12/10*Ht),M.ATH.adjust=.01,M.ATH.adjustLimit=1,ie(M.bo_l[g.SBMAX_l-1]<=M.npart_l),ie(M.bo_s[g.SBMAX_s-1]<=M.npart_s),E.ATHtype!=-1){var Ee,$e=E.out_samplerate/g.BLKSIZE,ut=0;for(Ee=0,D=0;D<g.BLKSIZE/2;++D)Ee+=$e,M.ATH.eql_w[D]=1/Math.pow(10,this.ATHformula(Ee,E)/10),ut+=M.ATH.eql_w[D];for(ut=1/ut,D=g.BLKSIZE/2;--D>=0;)M.ATH.eql_w[D]*=ut}{for(var nt=ue=0;nt<M.npart_s;++nt)for(D=0;D<M.numlines_s[nt];++D)++ue;for(var nt=ue=0;nt<M.npart_l;++nt)for(D=0;D<M.numlines_l[nt];++D)++ue}for(ue=0,D=0;D<M.npart_l;D++){var Ee=tt*(ue+M.numlines_l[D]/2)/(1*g.BLKSIZE);M.mld_cb_l[D]=Go(Ee),ue+=M.numlines_l[D]}for(;D<g.CBANDS;++D)M.mld_cb_l[D]=1;for(ue=0,D=0;D<M.npart_s;D++){var Ee=tt*(ue+M.numlines_s[D]/2)/(1*g.BLKSIZE_s);M.mld_cb_s[D]=Go(Ee),ue+=M.numlines_s[D]}for(;D<g.CBANDS;++D)M.mld_cb_s[D]=1;return 0};function Ls(E,M){E<-.3&&(E=3410),E/=1e3,E=Math.max(.1,E);var D=3.64*Math.pow(E,-.8)-6.8*Math.exp(-.6*Math.pow(E-3.4,2))+6*Math.exp(-.15*Math.pow(E-8.7,2))+(.6+.04*M)*.001*Math.pow(E,4);return D}this.ATHformula=function(E,M){var D;switch(M.ATHtype){case 0:D=Ls(E,9);break;case 1:D=Ls(E,-1);break;case 2:D=Ls(E,0);break;case 3:D=Ls(E,1)+6;break;case 4:D=Ls(E,M.ATHcurve);break;default:D=Ls(E,0);break}return D}}var je=Ce;function Fe(N){var ee=N;this.ordinal=function(){return ee}}Fe.STEREO=new Fe(0),Fe.JOINT_STEREO=new Fe(1),Fe.DUAL_CHANNEL=new Fe(2),Fe.MONO=new Fe(3),Fe.NOT_SET=new Fe(4);var Ve=Fe;function Pe(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=Ve.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var lt=Pe,Ye={};Ye.SFBMAX=g.SBMAX_s*3;var ze=Ye,ft=K.new_float,vt=K.new_int;function Pt(){this.xr=ft(576),this.l3_enc=vt(576),this.scalefac=vt(ze.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=vt(3),this.subblock_gain=vt(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=vt(ze.SFBMAX),this.window=vt(ze.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=vt(4),this.max_nonzero_coeff=0;var N=this;function ee(te){return new Int32Array(te)}function ce(te){return new Float32Array(te)}this.assign=function(te){N.xr=ce(te.xr),N.l3_enc=ee(te.l3_enc),N.scalefac=ee(te.scalefac),N.xrpow_max=te.xrpow_max,N.part2_3_length=te.part2_3_length,N.big_values=te.big_values,N.count1=te.count1,N.global_gain=te.global_gain,N.scalefac_compress=te.scalefac_compress,N.block_type=te.block_type,N.mixed_block_flag=te.mixed_block_flag,N.table_select=ee(te.table_select),N.subblock_gain=ee(te.subblock_gain),N.region0_count=te.region0_count,N.region1_count=te.region1_count,N.preflag=te.preflag,N.scalefac_scale=te.scalefac_scale,N.count1table_select=te.count1table_select,N.part2_length=te.part2_length,N.sfb_lmax=te.sfb_lmax,N.sfb_smin=te.sfb_smin,N.psy_lmax=te.psy_lmax,N.sfbmax=te.sfbmax,N.psymax=te.psymax,N.sfbdivide=te.sfbdivide,N.width=ee(te.width),N.window=ee(te.window),N.count1bits=te.count1bits,N.sfb_partition_table=te.sfb_partition_table.slice(0),N.slen=ee(te.slen),N.max_nonzero_coeff=te.max_nonzero_coeff}}var Et=Pt,Sn=K.new_int;function hn(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[Sn(4),Sn(4)];for(var N=0;N<2;N++)for(var ee=0;ee<2;ee++)this.tt[N][ee]=new Et}var Vn=hn,_n=K.System,pr=K.new_int;function ti(N,ee,ce,te){this.l=pr(1+g.SBMAX_l),this.s=pr(1+g.SBMAX_s),this.psfb21=pr(1+g.PSFB21),this.psfb12=pr(1+g.PSFB12);var xe=this.l,ne=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],_n.arraycopy(this.arrL,0,xe,0,Math.min(this.arrL.length,this.l.length)),_n.arraycopy(this.arrS,0,ne,0,Math.min(this.arrS.length,this.s.length)),_n.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),_n.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var Xt=ti,On=K.new_float,ni=K.new_float_n,eh=K.new_int;function th(){this.last_en_subshort=ni([4,9]),this.lastAttacks=eh(4),this.pefirbuf=On(19),this.longfact=On(g.SBMAX_l),this.shortfact=On(g.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var nh=th;function rh(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var sh=rh,ah=K.new_byte,ih=K.new_double,Zn=K.new_float,fs=K.new_float_n,sr=K.new_int,ri=K.new_int_n;Or.MFSIZE=3*1152+g.ENCDELAY-g.MDCTDELAY,Or.MAX_HEADER_BUF=256,Or.MAX_BITS_PER_CHANNEL=4095,Or.MAX_BITS_PER_GRANULE=7680,Or.BPC=320;function Or(){var N=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=fs([2,Or.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new Vn,this.ms_ratio=Zn(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=sr(2),this.CurrentStep=sr(2),this.masking_lower=0,this.bv_scf=sr(576),this.pseudohalf=sr(ze.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*Or.BPC+1),this.itime=ih(2),this.sideinfo_len=0,this.sb_sample=fs([2,2,18,g.SBLIMIT]),this.amp_filter=Zn(32);function ee(){this.write_timing=0,this.ptr=0,this.buf=ah(N)}this.header=new Array(Or.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new Xt,this.minval_l=Zn(g.CBANDS),this.minval_s=Zn(g.CBANDS),this.nb_1=fs([4,g.CBANDS]),this.nb_2=fs([4,g.CBANDS]),this.nb_s1=fs([4,g.CBANDS]),this.nb_s2=fs([4,g.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=Zn(4),this.loudness_sq=fs([2,2]),this.loudness_sq_save=Zn(2),this.mld_l=Zn(g.SBMAX_l),this.mld_s=Zn(g.SBMAX_s),this.bm_l=sr(g.SBMAX_l),this.bo_l=sr(g.SBMAX_l),this.bm_s=sr(g.SBMAX_s),this.bo_s=sr(g.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=ri([g.CBANDS,2]),this.s3ind_s=ri([g.CBANDS,2]),this.numlines_s=sr(g.CBANDS),this.numlines_l=sr(g.CBANDS),this.rnumlines_l=Zn(g.CBANDS),this.mld_cb_l=Zn(g.CBANDS),this.mld_cb_s=Zn(g.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=Zn(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=sr(2),this.nsPsy=new nh,this.VBR_seek_table=new sh,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=ri([16,5]),this.bitrate_blockType_Hist=ri([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var ce=0;ce<this.en.length;ce++)this.en[ce]=new Gt;for(var ce=0;ce<this.thm.length;ce++)this.thm[ce]=new Gt;for(var ce=0;ce<this.header.length;ce++)this.header[ce]=new ee}var Dt=Or,hs=K.new_float;function lh(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=hs(g.SBMAX_l),this.s=hs(g.SBMAX_s),this.psfb21=hs(g.PSFB21),this.psfb12=hs(g.PSFB12),this.cb_l=hs(g.CBANDS),this.cb_s=hs(g.CBANDS),this.eql_w=hs(g.BLKSIZE/2)}var oh=lh,Pn=K.System,Lo=K.Arrays;Zt.STEPS_per_dB=100,Zt.MAX_dB=120,Zt.GAIN_NOT_ENOUGH_SAMPLES=-24601,Zt.GAIN_ANALYSIS_ERROR=0,Zt.GAIN_ANALYSIS_OK=1,Zt.INIT_GAIN_ANALYSIS_ERROR=0,Zt.INIT_GAIN_ANALYSIS_OK=1,Zt.YULE_ORDER=10,Zt.MAX_ORDER=Zt.YULE_ORDER,Zt.MAX_SAMP_FREQ=48e3,Zt.RMS_WINDOW_TIME_NUMERATOR=1,Zt.RMS_WINDOW_TIME_DENOMINATOR=20,Zt.MAX_SAMPLES_PER_WINDOW=Zt.MAX_SAMP_FREQ*Zt.RMS_WINDOW_TIME_NUMERATOR/Zt.RMS_WINDOW_TIME_DENOMINATOR+1;function Zt(){var N=64.82,ee=.95,ce=Zt.RMS_WINDOW_TIME_NUMERATOR,te=Zt.RMS_WINDOW_TIME_DENOMINATOR,xe=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],ne=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function fe(B,I,k,i,G,W){for(;G--!=0;)k[i]=1e-10+B[I+0]*W[0]-k[i-1]*W[1]+B[I-1]*W[2]-k[i-2]*W[3]+B[I-2]*W[4]-k[i-3]*W[5]+B[I-3]*W[6]-k[i-4]*W[7]+B[I-4]*W[8]-k[i-5]*W[9]+B[I-5]*W[10]-k[i-6]*W[11]+B[I-6]*W[12]-k[i-7]*W[13]+B[I-7]*W[14]-k[i-8]*W[15]+B[I-8]*W[16]-k[i-9]*W[17]+B[I-9]*W[18]-k[i-10]*W[19]+B[I-10]*W[20],++i,++I}function Te(B,I,k,i,G,W){for(;G--!=0;)k[i]=B[I+0]*W[0]-k[i-1]*W[1]+B[I-1]*W[2]-k[i-2]*W[3]+B[I-2]*W[4],++i,++I}function Ie(B,I){for(var k=0;k<MAX_ORDER;k++)B.linprebuf[k]=B.lstepbuf[k]=B.loutbuf[k]=B.rinprebuf[k]=B.rstepbuf[k]=B.routbuf[k]=0;switch(0|I){case 48e3:B.reqindex=0;break;case 44100:B.reqindex=1;break;case 32e3:B.reqindex=2;break;case 24e3:B.reqindex=3;break;case 22050:B.reqindex=4;break;case 16e3:B.reqindex=5;break;case 12e3:B.reqindex=6;break;case 11025:B.reqindex=7;break;case 8e3:B.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return B.sampleWindow=0|(I*ce+te-1)/te,B.lsum=0,B.rsum=0,B.totsamp=0,Lo.ill(B.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(B,I){return Ie(B,I)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(B.linpre=MAX_ORDER,B.rinpre=MAX_ORDER,B.lstep=MAX_ORDER,B.rstep=MAX_ORDER,B.lout=MAX_ORDER,B.rout=MAX_ORDER,Lo.fill(B.B,0),INIT_GAIN_ANALYSIS_OK)};function U(B){return B*B}this.AnalyzeSamples=function(B,I,k,i,G,W,V){var f,A,C,O,F,l,S;if(W==0)return GAIN_ANALYSIS_OK;switch(S=0,F=W,V){case 1:i=I,G=k;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(W<MAX_ORDER?(Pn.arraycopy(I,k,B.linprebuf,MAX_ORDER,W),Pn.arraycopy(i,G,B.rinprebuf,MAX_ORDER,W)):(Pn.arraycopy(I,k,B.linprebuf,MAX_ORDER,MAX_ORDER),Pn.arraycopy(i,G,B.rinprebuf,MAX_ORDER,MAX_ORDER));F>0;){l=F>B.sampleWindow-B.totsamp?B.sampleWindow-B.totsamp:F,S<MAX_ORDER?(f=B.linpre+S,A=B.linprebuf,C=B.rinpre+S,O=B.rinprebuf,l>MAX_ORDER-S&&(l=MAX_ORDER-S)):(f=k+S,A=I,C=G+S,O=i),fe(A,f,B.lstepbuf,B.lstep+B.totsamp,l,xe[B.reqindex]),fe(O,C,B.rstepbuf,B.rstep+B.totsamp,l,xe[B.reqindex]),Te(B.lstepbuf,B.lstep+B.totsamp,B.loutbuf,B.lout+B.totsamp,l,ne[B.reqindex]),Te(B.rstepbuf,B.rstep+B.totsamp,B.routbuf,B.rout+B.totsamp,l,ne[B.reqindex]),f=B.lout+B.totsamp,A=B.loutbuf,C=B.rout+B.totsamp,O=B.routbuf;for(var p=l%8;p--!=0;)B.lsum+=U(A[f++]),B.rsum+=U(O[C++]);for(p=l/8;p--!=0;)B.lsum+=U(A[f+0])+U(A[f+1])+U(A[f+2])+U(A[f+3])+U(A[f+4])+U(A[f+5])+U(A[f+6])+U(A[f+7]),f+=8,B.rsum+=U(O[C+0])+U(O[C+1])+U(O[C+2])+U(O[C+3])+U(O[C+4])+U(O[C+5])+U(O[C+6])+U(O[C+7]),C+=8;if(F-=l,S+=l,B.totsamp+=l,B.totsamp==B.sampleWindow){var h=Zt.STEPS_per_dB*10*Math.log10((B.lsum+B.rsum)/B.totsamp*.5+1e-37),b=h<=0?0:0|h;b>=B.A.length&&(b=B.A.length-1),B.A[b]++,B.lsum=B.rsum=0,Pn.arraycopy(B.loutbuf,B.totsamp,B.loutbuf,0,MAX_ORDER),Pn.arraycopy(B.routbuf,B.totsamp,B.routbuf,0,MAX_ORDER),Pn.arraycopy(B.lstepbuf,B.totsamp,B.lstepbuf,0,MAX_ORDER),Pn.arraycopy(B.rstepbuf,B.totsamp,B.rstepbuf,0,MAX_ORDER),B.totsamp=0}if(B.totsamp>B.sampleWindow)return GAIN_ANALYSIS_ERROR}return W<MAX_ORDER?(Pn.arraycopy(B.linprebuf,W,B.linprebuf,0,MAX_ORDER-W),Pn.arraycopy(B.rinprebuf,W,B.rinprebuf,0,MAX_ORDER-W),Pn.arraycopy(I,k,B.linprebuf,MAX_ORDER-W,W),Pn.arraycopy(i,G,B.rinprebuf,MAX_ORDER-W,W)):(Pn.arraycopy(I,k+W-MAX_ORDER,B.linprebuf,0,MAX_ORDER),Pn.arraycopy(i,G+W-MAX_ORDER,B.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function be(B,I){var k,i=0;for(k=0;k<I;k++)i+=B[k];if(i==0)return GAIN_NOT_ENOUGH_SAMPLES;var G=0|Math.ceil(i*(1-ee));for(k=I;k-- >0&&!((G-=B[k])<=0););return N-k/Zt.STEPS_per_dB}this.GetTitleGain=function(B){for(var I=be(B.A,B.A.length),k=0;k<B.A.length;k++)B.B[k]+=B.A[k],B.A[k]=0;for(var k=0;k<MAX_ORDER;k++)B.linprebuf[k]=B.lstepbuf[k]=B.loutbuf[k]=B.rinprebuf[k]=B.rstepbuf[k]=B.routbuf[k]=0;return B.totsamp=0,B.lsum=B.rsum=0,I}}var Mn=Zt,Os=K.new_float,Fo=K.new_int;function ch(){this.linprebuf=Os(Mn.MAX_ORDER*2),this.linpre=0,this.lstepbuf=Os(Mn.MAX_SAMPLES_PER_WINDOW+Mn.MAX_ORDER),this.lstep=0,this.loutbuf=Os(Mn.MAX_SAMPLES_PER_WINDOW+Mn.MAX_ORDER),this.lout=0,this.rinprebuf=Os(Mn.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=Os(Mn.MAX_SAMPLES_PER_WINDOW+Mn.MAX_ORDER),this.rstep=0,this.routbuf=Os(Mn.MAX_SAMPLES_PER_WINDOW+Mn.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=Fo(0|Mn.STEPS_per_dB*Mn.MAX_dB),this.B=Fo(0|Mn.STEPS_per_dB*Mn.MAX_dB)}var uh=ch;function fh(N){this.bits=N}var ko=fh,Ho=K.new_float,hh=K.new_int,$o=K.assert;function _h(N){var ee=N;this.quantize=ee,this.iteration_loop=function(ce,te,xe,ne){var fe=ce.internal_flags,Te=Ho(ze.SFBMAX),Ie=Ho(576),U=hh(2),be=0,B,I=fe.l3_side,k=new ko(be);this.quantize.rv.ResvFrameBegin(ce,k),be=k.bits;for(var i=0;i<fe.mode_gr;i++){B=this.quantize.qupvt.on_pe(ce,te,U,be,i,i),fe.mode_ext==g.MPG_MD_MS_LR&&(this.quantize.ms_convert(fe.l3_side,i),this.quantize.qupvt.reduce_side(U,xe[i],be,B));for(var G=0;G<fe.channels_out;G++){var W,V,f=I.tt[i][G];f.block_type!=g.SHORT_TYPE?(W=0,V=fe.PSY.mask_adjust-W):(W=0,V=fe.PSY.mask_adjust_short-W),fe.masking_lower=Math.pow(10,V*.1),this.quantize.init_outer_loop(fe,f),this.quantize.init_xrpow(fe,f,Ie)&&(this.quantize.qupvt.calc_xmin(ce,ne[i][G],f,Te),this.quantize.outer_loop(ce,f,Te,Ie,G,U[G])),this.quantize.iteration_finish_one(fe,i,G),$o(f.part2_3_length<=Dt.MAX_BITS_PER_CHANNEL),$o(f.part2_3_length<=U[G])}}this.quantize.rv.ResvFrameEnd(fe,be)}}var dh=_h;function Rt(N,ee,ce,te){this.xlen=N,this.linmax=ee,this.table=ce,this.hlen=te}var Me={};Me.t1HB=[1,1,1,0],Me.t2HB=[1,2,1,3,1,1,3,2,0],Me.t3HB=[3,2,1,1,1,1,3,2,0],Me.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],Me.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],Me.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],Me.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],Me.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],Me.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],Me.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],Me.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],Me.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],Me.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],Me.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],Me.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],Me.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],Me.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],Me.t1l=[1,4,3,5],Me.t2l=[1,4,7,4,5,7,6,7,8],Me.t3l=[2,3,7,4,4,7,6,7,8],Me.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],Me.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],Me.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],Me.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],Me.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],Me.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],Me.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],Me.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],Me.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],Me.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],Me.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],Me.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],Me.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],Me.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],Me.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],Me.ht=[new Rt(0,0,null,null),new Rt(2,0,Me.t1HB,Me.t1l),new Rt(3,0,Me.t2HB,Me.t2l),new Rt(3,0,Me.t3HB,Me.t3l),new Rt(0,0,null,null),new Rt(4,0,Me.t5HB,Me.t5l),new Rt(4,0,Me.t6HB,Me.t6l),new Rt(6,0,Me.t7HB,Me.t7l),new Rt(6,0,Me.t8HB,Me.t8l),new Rt(6,0,Me.t9HB,Me.t9l),new Rt(8,0,Me.t10HB,Me.t10l),new Rt(8,0,Me.t11HB,Me.t11l),new Rt(8,0,Me.t12HB,Me.t12l),new Rt(16,0,Me.t13HB,Me.t13l),new Rt(0,0,null,Me.t16_5l),new Rt(16,0,Me.t15HB,Me.t15l),new Rt(1,1,Me.t16HB,Me.t16l),new Rt(2,3,Me.t16HB,Me.t16l),new Rt(3,7,Me.t16HB,Me.t16l),new Rt(4,15,Me.t16HB,Me.t16l),new Rt(6,63,Me.t16HB,Me.t16l),new Rt(8,255,Me.t16HB,Me.t16l),new Rt(10,1023,Me.t16HB,Me.t16l),new Rt(13,8191,Me.t16HB,Me.t16l),new Rt(4,15,Me.t24HB,Me.t24l),new Rt(5,31,Me.t24HB,Me.t24l),new Rt(6,63,Me.t24HB,Me.t24l),new Rt(7,127,Me.t24HB,Me.t24l),new Rt(8,255,Me.t24HB,Me.t24l),new Rt(9,511,Me.t24HB,Me.t24l),new Rt(11,2047,Me.t24HB,Me.t24l),new Rt(13,8191,Me.t24HB,Me.t24l),new Rt(0,0,Me.t32HB,Me.t32l),new Rt(0,0,Me.t33HB,Me.t33l)],Me.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],Me.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],Me.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],Me.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],Me.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],Me.scfsi_band=[0,6,11,16,21];var xt=Me,_s=K.VbrMode,si=K.Float,C0=K.Util,ds=K.new_float,mh=K.new_int,ia=K.assert;Pr.Q_MAX=257,Pr.Q_MAX2=116,Pr.LARGE_BITS=1e5,Pr.IXMAX_VAL=8206;function Pr(){var N=null,ee=null,ce=null;this.setModules=function(f,A,C){N=f,ee=A,ce=C};function te(f){return B[f+Pr.Q_MAX2]}this.IPOW20=function(f){return I[f]};var xe=2220446049250313e-31,ne=Pr.IXMAX_VAL,fe=ne+2,Te=Pr.Q_MAX,Ie=Pr.Q_MAX2,U=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var be=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=be,this.sfBandIndex=[new Xt([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Xt([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Xt([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Xt([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Xt([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Xt([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Xt([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Xt([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Xt([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var B=ds(Te+Ie+1),I=ds(Te),k=ds(fe),i=ds(fe);this.adj43=i;function G(f,A){var C=ce.ATHformula(A,f);return C-=U,C=Math.pow(10,C/10+f.ATHlower),C}function W(f){for(var A=f.internal_flags.ATH.l,C=f.internal_flags.ATH.psfb21,O=f.internal_flags.ATH.s,F=f.internal_flags.ATH.psfb12,l=f.internal_flags,S=f.out_samplerate,p=0;p<g.SBMAX_l;p++){var h=l.scalefac_band.l[p],b=l.scalefac_band.l[p+1];A[p]=si.MAX_VALUE;for(var w=h;w<b;w++){var u=w*S/1152,_=G(f,u);A[p]=Math.min(A[p],_)}}for(var p=0;p<g.PSFB21;p++){var h=l.scalefac_band.psfb21[p],b=l.scalefac_band.psfb21[p+1];C[p]=si.MAX_VALUE;for(var w=h;w<b;w++){var u=w*S/1152,_=G(f,u);C[p]=Math.min(C[p],_)}}for(var p=0;p<g.SBMAX_s;p++){var h=l.scalefac_band.s[p],b=l.scalefac_band.s[p+1];O[p]=si.MAX_VALUE;for(var w=h;w<b;w++){var u=w*S/384,_=G(f,u);O[p]=Math.min(O[p],_)}O[p]*=l.scalefac_band.s[p+1]-l.scalefac_band.s[p]}for(var p=0;p<g.PSFB12;p++){var h=l.scalefac_band.psfb12[p],b=l.scalefac_band.psfb12[p+1];F[p]=si.MAX_VALUE;for(var w=h;w<b;w++){var u=w*S/384,_=G(f,u);F[p]=Math.min(F[p],_)}F[p]*=l.scalefac_band.s[13]-l.scalefac_band.s[12]}if(f.noATH){for(var p=0;p<g.SBMAX_l;p++)A[p]=1e-20;for(var p=0;p<g.PSFB21;p++)C[p]=1e-20;for(var p=0;p<g.SBMAX_s;p++)O[p]=1e-20;for(var p=0;p<g.PSFB12;p++)F[p]=1e-20}l.ATH.floor=10*Math.log10(G(f,-1))}this.iteration_init=function(f){var A=f.internal_flags,C=A.l3_side,O;if(A.iteration_init_init==0){for(A.iteration_init_init=1,C.main_data_begin=0,W(f),k[0]=0,O=1;O<fe;O++)k[O]=Math.pow(O,4/3);for(O=0;O<fe-1;O++)i[O]=O+1-Math.pow(.5*(k[O]+k[O+1]),.75);for(i[O]=.5,O=0;O<Te;O++)I[O]=Math.pow(2,(O-210)*-.1875);for(O=0;O<=Te+Ie;O++)B[O]=Math.pow(2,(O-210-Ie)*.25);N.huffman_init(A);{var F,l,S,p;for(O=f.exp_nspsytune>>2&63,O>=32&&(O-=64),F=Math.pow(10,O/4/10),O=f.exp_nspsytune>>8&63,O>=32&&(O-=64),l=Math.pow(10,O/4/10),O=f.exp_nspsytune>>14&63,O>=32&&(O-=64),S=Math.pow(10,O/4/10),O=f.exp_nspsytune>>20&63,O>=32&&(O-=64),p=S*Math.pow(10,O/4/10),O=0;O<g.SBMAX_l;O++){var h;O<=6?h=F:O<=13?h=l:O<=20?h=S:h=p,A.nsPsy.longfact[O]=h}for(O=0;O<g.SBMAX_s;O++){var h;O<=5?h=F:O<=10?h=l:O<=11?h=S:h=p,A.nsPsy.shortfact[O]=h}}}},this.on_pe=function(f,A,C,O,F,l){var S=f.internal_flags,p=0,h,b=mh(2),w,u=new ko(p),_=ee.ResvMaxBits(f,O,u,l);p=u.bits;var m=p+_;for(m>Dt.MAX_BITS_PER_GRANULE&&(m=Dt.MAX_BITS_PER_GRANULE),h=0,w=0;w<S.channels_out;++w)C[w]=Math.min(Dt.MAX_BITS_PER_CHANNEL,p/S.channels_out),b[w]=0|C[w]*A[F][w]/700-C[w],b[w]>O*3/4&&(b[w]=O*3/4),b[w]<0&&(b[w]=0),b[w]+C[w]>Dt.MAX_BITS_PER_CHANNEL&&(b[w]=Math.max(0,Dt.MAX_BITS_PER_CHANNEL-C[w])),h+=b[w];if(h>_)for(w=0;w<S.channels_out;++w)b[w]=_*b[w]/h;for(w=0;w<S.channels_out;++w)C[w]+=b[w],_-=b[w];for(h=0,w=0;w<S.channels_out;++w)h+=C[w];if(h>Dt.MAX_BITS_PER_GRANULE){var P=0;for(w=0;w<S.channels_out;++w)C[w]*=Dt.MAX_BITS_PER_GRANULE,C[w]/=h,P+=C[w]}return m},this.reduce_side=function(f,A,C,O){ia(f[0]+f[1]<=Dt.MAX_BITS_PER_GRANULE);var F=.33*(.5-A)/.5;F<0&&(F=0),F>.5&&(F=.5);var l=0|F*.5*(f[0]+f[1]);l>Dt.MAX_BITS_PER_CHANNEL-f[0]&&(l=Dt.MAX_BITS_PER_CHANNEL-f[0]),l<0&&(l=0),f[1]>=125&&(f[1]-l>125?(f[0]<C&&(f[0]+=l),f[1]-=l):(f[0]+=f[1]-125,f[1]=125)),l=f[0]+f[1],l>O&&(f[0]=O*f[0]/l,f[1]=O*f[1]/l),ia(f[0]<=Dt.MAX_BITS_PER_CHANNEL),ia(f[1]<=Dt.MAX_BITS_PER_CHANNEL),ia(f[0]+f[1]<=Dt.MAX_BITS_PER_GRANULE)},this.athAdjust=function(f,A,C){var O=90.30873362,F=94.82444863,l=C0.FAST_LOG10_X(A,10),S=f*f,p=0;return l-=C,S>1e-20&&(p=1+C0.FAST_LOG10_X(S,10/O)),p<0&&(p=0),l*=p,l+=C+O-F,Math.pow(10,.1*l)},this.calc_xmin=function(f,A,C,O){var F=0,l=f.internal_flags,S,p=0,h=0,b=l.ATH,w=C.xr,u=f.VBR==_s.vbr_mtrh?1:0,_=l.masking_lower;for((f.VBR==_s.vbr_mtrh||f.VBR==_s.vbr_mt)&&(_=1),S=0;S<C.psy_lmax;S++){var m,P,ae,j,Q,o;f.VBR==_s.vbr_rh||f.VBR==_s.vbr_mtrh?P=athAdjust(b.adjust,b.l[S],b.floor):P=b.adjust*b.l[S],Q=C.width[S],ae=P/Q,j=xe,o=Q>>1,m=0;do{var v,oe;v=w[p]*w[p],m+=v,j+=v<ae?v:ae,p++,oe=w[p]*w[p],m+=oe,j+=oe<ae?oe:ae,p++}while(--o>0);if(m>P&&h++,S==g.SBPSY_l){var _e=P*l.nsPsy.longfact[S];j<_e&&(j=_e)}if(u!=0&&(P=j),!f.ATHonly){var Be=A.en.l[S];if(Be>0){var _e;_e=m*A.thm.l[S]*_/Be,u!=0&&(_e*=l.nsPsy.longfact[S]),P<_e&&(P=_e)}}u!=0?O[F++]=P:O[F++]=P*l.nsPsy.longfact[S]}var ke=575;if(C.block_type!=g.SHORT_TYPE)for(var Oe=576;Oe--!=0&&Nr.EQ(w[Oe],0);)ke=Oe;C.max_nonzero_coeff=ke;for(var Le=C.sfb_smin;S<C.psymax;Le++,S+=3){var Q,it,Ke;for(f.VBR==_s.vbr_rh||f.VBR==_s.vbr_mtrh?Ke=athAdjust(b.adjust,b.s[Le],b.floor):Ke=b.adjust*b.s[Le],Q=C.width[S],it=0;it<3;it++){var m=0,P,ae,j,o=Q>>1;ae=Ke/Q,j=xe;do{var v,oe;v=w[p]*w[p],m+=v,j+=v<ae?v:ae,p++,oe=w[p]*w[p],m+=oe,j+=oe<ae?oe:ae,p++}while(--o>0);if(m>Ke&&h++,Le==g.SBPSY_s){var _e=Ke*l.nsPsy.shortfact[Le];j<_e&&(j=_e)}if(u!=0?P=j:P=Ke,!f.ATHonly&&!f.ATHshort){var Be=A.en.s[Le][it];if(Be>0){var _e;_e=m*A.thm.s[Le][it]*_/Be,u!=0&&(_e*=l.nsPsy.shortfact[Le]),P<_e&&(P=_e)}}u!=0?O[F++]=P:O[F++]=P*l.nsPsy.shortfact[Le]}f.useTemporal&&(O[F-3]>O[F-3+1]&&(O[F-3+1]+=(O[F-3]-O[F-3+1])*l.decay),O[F-3+1]>O[F-3+2]&&(O[F-3+2]+=(O[F-3+1]-O[F-3+2])*l.decay))}return h};function V(f){this.s=f}this.calc_noise_core=function(f,A,C,O){var F=0,l=A.s,S=f.l3_enc;if(l>f.count1)for(;C--!=0;){var p;p=f.xr[l],l++,F+=p*p,p=f.xr[l],l++,F+=p*p}else if(l>f.big_values){var h=ds(2);for(h[0]=0,h[1]=O;C--!=0;){var p;p=Math.abs(f.xr[l])-h[S[l]],l++,F+=p*p,p=Math.abs(f.xr[l])-h[S[l]],l++,F+=p*p}}else for(;C--!=0;){var p;p=Math.abs(f.xr[l])-k[S[l]]*O,l++,F+=p*p,p=Math.abs(f.xr[l])-k[S[l]]*O,l++,F+=p*p}return A.s=l,F},this.calc_noise=function(f,A,C,O,F){var l=0,S=0,p,h,b=0,w=0,u=0,_=-20,m=0,P=f.scalefac,ae=0;for(O.over_SSD=0,p=0;p<f.psymax;p++){var j=f.global_gain-(P[ae++]+(f.preflag!=0?be[p]:0)<<f.scalefac_scale+1)-f.subblock_gain[f.window[p]]*8,Q=0;if(F!=null&&F.step[p]==j)Q=F.noise[p],m+=f.width[p],C[l++]=Q/A[S++],Q=F.noise_log[p];else{var o=te(j);if(h=f.width[p]>>1,m+f.width[p]>f.max_nonzero_coeff){var v;v=f.max_nonzero_coeff-m+1,v>0?h=v>>1:h=0}var oe=new V(m);Q=this.calc_noise_core(f,oe,h,o),m=oe.s,F!=null&&(F.step[p]=j,F.noise[p]=Q),Q=C[l++]=Q/A[S++],Q=C0.FAST_LOG10(Math.max(Q,1e-20)),F!=null&&(F.noise_log[p]=Q)}if(F!=null&&(F.global_gain=f.global_gain),u+=Q,Q>0){var _e;_e=Math.max(0|Q*10+.5,1),O.over_SSD+=_e*_e,b++,w+=Q}_=Math.max(_,Q)}return O.over_count=b,O.tot_noise=u,O.over_noise=w,O.max_noise=_,b},this.set_pinfo=function(f,A,C,O,F){var l=f.internal_flags,S,p,h,b,w,u=A.scalefac_scale==0?.5:1,_=A.scalefac,m=ds(L3Side.SFBMAX),P=ds(L3Side.SFBMAX),ae=new CalcNoiseResult;calc_xmin(f,C,A,m),calc_noise(A,m,P,ae,null);var j=0;for(p=A.sfb_lmax,A.block_type!=g.SHORT_TYPE&&A.mixed_block_flag==0&&(p=22),S=0;S<p;S++){var Q=l.scalefac_band.l[S],o=l.scalefac_band.l[S+1],v=o-Q;for(b=0;j<o;j++)b+=A.xr[j]*A.xr[j];b/=v,w=1e15,l.pinfo.en[O][F][S]=w*b,l.pinfo.xfsf[O][F][S]=w*m[S]*P[S]/v,C.en.l[S]>0&&!f.ATHonly?b=b/C.en.l[S]:b=0,l.pinfo.thr[O][F][S]=w*Math.max(b*C.thm.l[S],l.ATH.l[S]),l.pinfo.LAMEsfb[O][F][S]=0,A.preflag!=0&&S>=11&&(l.pinfo.LAMEsfb[O][F][S]=-u*be[S]),S<g.SBPSY_l&&(ia(_[S]>=0),l.pinfo.LAMEsfb[O][F][S]-=u*_[S])}if(A.block_type==g.SHORT_TYPE)for(p=S,S=A.sfb_smin;S<g.SBMAX_s;S++)for(var Q=l.scalefac_band.s[S],o=l.scalefac_band.s[S+1],v=o-Q,oe=0;oe<3;oe++){for(b=0,h=Q;h<o;h++)b+=A.xr[j]*A.xr[j],j++;b=Math.max(b/v,1e-20),w=1e15,l.pinfo.en_s[O][F][3*S+oe]=w*b,l.pinfo.xfsf_s[O][F][3*S+oe]=w*m[p]*P[p]/v,C.en.s[S][oe]>0?b=b/C.en.s[S][oe]:b=0,(f.ATHonly||f.ATHshort)&&(b=0),l.pinfo.thr_s[O][F][3*S+oe]=w*Math.max(b*C.thm.s[S][oe],l.ATH.s[S]),l.pinfo.LAMEsfb_s[O][F][3*S+oe]=-2*A.subblock_gain[oe],S<g.SBPSY_s&&(l.pinfo.LAMEsfb_s[O][F][3*S+oe]-=u*_[p]),p++}l.pinfo.LAMEqss[O][F]=A.global_gain,l.pinfo.LAMEmainbits[O][F]=A.part2_3_length+A.part2_length,l.pinfo.LAMEsfbits[O][F]=A.part2_length,l.pinfo.over[O][F]=ae.over_count,l.pinfo.max_noise[O][F]=ae.max_noise*10,l.pinfo.over_noise[O][F]=ae.over_noise*10,l.pinfo.tot_noise[O][F]=ae.tot_noise*10,l.pinfo.over_SSD[O][F]=ae.over_SSD}}var Ur=Pr,vh=K.System,ph=K.Arrays,la=K.new_int,I0=K.assert;function O0(){var N=null;this.qupvt=null,this.setModules=function(h){this.qupvt=h,N=h};function ee(h){this.bits=0|h}var ce=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function te(h,b,w,u,_,m){var P=.5946/b;for(h=h>>1;h--!=0;)_[m++]=P>w[u++]?0:1,_[m++]=P>w[u++]?0:1}function xe(h,b,w,u,_,m){h=h>>1;var P=h%2;for(h=h>>1;h--!=0;){var ae,j,Q,o,v,oe,_e,Be;ae=w[u++]*b,j=w[u++]*b,v=0|ae,Q=w[u++]*b,oe=0|j,o=w[u++]*b,_e=0|Q,ae+=N.adj43[v],Be=0|o,j+=N.adj43[oe],_[m++]=0|ae,Q+=N.adj43[_e],_[m++]=0|j,o+=N.adj43[Be],_[m++]=0|Q,_[m++]=0|o}if(P!=0){var ae,j,v,oe;ae=w[u++]*b,j=w[u++]*b,v=0|ae,oe=0|j,ae+=N.adj43[v],j+=N.adj43[oe],_[m++]=0|ae,_[m++]=0|j}}function ne(h,b,w,u,_){var m,P,ae=0,j,Q=0,o=0,v=0,oe=b,_e=0,Be=oe,ke=0,Oe=h,Le=0;for(j=_!=null&&u.global_gain==_.global_gain,u.block_type==g.SHORT_TYPE?P=38:P=21,m=0;m<=P;m++){var it=-1;if((j||u.block_type==g.NORM_TYPE)&&(it=u.global_gain-(u.scalefac[m]+(u.preflag!=0?N.pretab[m]:0)<<u.scalefac_scale+1)-u.subblock_gain[u.window[m]]*8),I0(u.width[m]>=0),j&&_.step[m]==it)Q!=0&&(xe(Q,w,Oe,Le,Be,ke),Q=0),o!=0&&(te(o,w,Oe,Le,Be,ke),o=0);else{var Ke=u.width[m];if(ae+u.width[m]>u.max_nonzero_coeff){var Ne;Ne=u.max_nonzero_coeff-ae+1,ph.fill(b,u.max_nonzero_coeff,576,0),Ke=Ne,Ke<0&&(Ke=0),m=P+1}if(Q==0&&o==0&&(Be=oe,ke=_e,Oe=h,Le=v),_!=null&&_.sfb_count1>0&&m>=_.sfb_count1&&_.step[m]>0&&it>=_.step[m]?(Q!=0&&(xe(Q,w,Oe,Le,Be,ke),Q=0,Be=oe,ke=_e,Oe=h,Le=v),o+=Ke):(o!=0&&(te(o,w,Oe,Le,Be,ke),o=0,Be=oe,ke=_e,Oe=h,Le=v),Q+=Ke),Ke<=0){o!=0&&(te(o,w,Oe,Le,Be,ke),o=0),Q!=0&&(xe(Q,w,Oe,Le,Be,ke),Q=0);break}}m<=P&&(_e+=u.width[m],v+=u.width[m],ae+=u.width[m])}Q!=0&&(xe(Q,w,Oe,Le,Be,ke),Q=0),o!=0&&(te(o,w,Oe,Le,Be,ke),o=0)}function fe(h,b,w){var u=0,_=0;do{var m=h[b++],P=h[b++];u<m&&(u=m),_<P&&(_=P)}while(b<w);return u<_&&(u=_),u}function Te(h,b,w,u,_,m){var P=xt.ht[u].xlen*65536+xt.ht[_].xlen,ae=0,j;do{var Q=h[b++],o=h[b++];Q!=0&&(Q>14&&(Q=15,ae+=P),Q*=16),o!=0&&(o>14&&(o=15,ae+=P),Q+=o),ae+=xt.largetbl[Q]}while(b<w);return j=ae&65535,ae>>=16,ae>j&&(ae=j,u=_),m.bits+=ae,u}function Ie(h,b,w,u){var _=0,m=xt.ht[1].hlen;do{var P=h[b+0]*2+h[b+1];b+=2,_+=m[P]}while(b<w);return u.bits+=_,1}function U(h,b,w,u,_){var m=0,P,ae=xt.ht[u].xlen,j;u==2?j=xt.table23:j=xt.table56;do{var Q=h[b+0]*ae+h[b+1];b+=2,m+=j[Q]}while(b<w);return P=m&65535,m>>=16,m>P&&(m=P,u++),_.bits+=m,u}function be(h,b,w,u,_){var m=0,P=0,ae=0,j=xt.ht[u].xlen,Q=xt.ht[u].hlen,o=xt.ht[u+1].hlen,v=xt.ht[u+2].hlen;do{var oe=h[b+0]*j+h[b+1];b+=2,m+=Q[oe],P+=o[oe],ae+=v[oe]}while(b<w);var _e=u;return m>P&&(m=P,_e++),m>ae&&(m=ae,_e=u+2),_.bits+=m,_e}var B=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function I(h,b,w,u){var _=fe(h,b,w);switch(_){case 0:return _;case 1:return Ie(h,b,w,u);case 2:case 3:return U(h,b,w,B[_-1],u);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return be(h,b,w,B[_-1],u);default:if(_>Ur.IXMAX_VAL)return u.bits=Ur.LARGE_BITS,-1;_-=15;var m;for(m=24;m<32&&!(xt.ht[m].linmax>=_);m++);var P;for(P=m-8;P<24&&!(xt.ht[P].linmax>=_);P++);return Te(h,b,w,P,m,u)}}this.noquant_count_bits=function(h,b,w){var u=b.l3_enc,_=Math.min(576,b.max_nonzero_coeff+2>>1<<1);for(w!=null&&(w.sfb_count1=0);_>1&&!(u[_-1]|u[_-2]);_-=2);b.count1=_;for(var m=0,P=0;_>3;_-=4){var ae;if(((u[_-1]|u[_-2]|u[_-3]|u[_-4])&2147483647)>1)break;ae=((u[_-4]*2+u[_-3])*2+u[_-2])*2+u[_-1],m+=xt.t32l[ae],P+=xt.t33l[ae]}var j=m;if(b.count1table_select=0,m>P&&(j=P,b.count1table_select=1),b.count1bits=j,b.big_values=_,_==0)return j;if(b.block_type==g.SHORT_TYPE)m=3*h.scalefac_band.s[3],m>b.big_values&&(m=b.big_values),P=b.big_values;else if(b.block_type==g.NORM_TYPE){if(m=b.region0_count=h.bv_scf[_-2],P=b.region1_count=h.bv_scf[_-1],P=h.scalefac_band.l[m+P+2],m=h.scalefac_band.l[m+1],P<_){var Q=new ee(j);b.table_select[2]=I(u,P,_,Q),j=Q.bits}}else b.region0_count=7,b.region1_count=g.SBMAX_l-1-7-1,m=h.scalefac_band.l[8],P=_,m>P&&(m=P);if(m=Math.min(m,_),P=Math.min(P,_),0<m){var Q=new ee(j);b.table_select[0]=I(u,0,m,Q),j=Q.bits}if(m<P){var Q=new ee(j);b.table_select[1]=I(u,m,P,Q),j=Q.bits}if(h.use_best_huffman==2&&(b.part2_3_length=j,best_huffman_divide(h,b),j=b.part2_3_length),w!=null&&b.block_type==g.NORM_TYPE){for(var o=0;h.scalefac_band.l[o]<b.big_values;)o++;w.sfb_count1=o}return j},this.count_bits=function(h,b,w,u){var _=w.l3_enc,m=Ur.IXMAX_VAL/N.IPOW20(w.global_gain);if(w.xrpow_max>m)return Ur.LARGE_BITS;if(ne(b,_,N.IPOW20(w.global_gain),w,u),h.substep_shaping&2)for(var P=0,ae=w.global_gain+w.scalefac_scale,j=.634521682242439/N.IPOW20(ae),Q=0;Q<w.sfbmax;Q++){var o=w.width[Q];if(h.pseudohalf[Q]==0)P+=o;else{var v;for(v=P,P+=o;v<P;++v)_[v]=b[v]>=j?_[v]:0}}return this.noquant_count_bits(h,w,u)};function k(h,b,w,u,_,m,P){for(var ae=b.big_values,j=0;j<=22;j++)u[j]=Ur.LARGE_BITS;for(var j=0;j<16;j++){var Q=h.scalefac_band.l[j+1];if(Q>=ae)break;var o=0,v=new ee(o),oe=I(w,0,Q,v);o=v.bits;for(var _e=0;_e<8;_e++){var Be=h.scalefac_band.l[j+_e+2];if(Be>=ae)break;var ke=o;v=new ee(ke);var Oe=I(w,Q,Be,v);ke=v.bits,u[j+_e]>ke&&(u[j+_e]=ke,_[j+_e]=j,m[j+_e]=oe,P[j+_e]=Oe)}}}function i(h,b,w,u,_,m,P,ae){for(var j=b.big_values,Q=2;Q<g.SBMAX_l+1;Q++){var o=h.scalefac_band.l[Q];if(o>=j)break;var v=_[Q-2]+b.count1bits;if(w.part2_3_length<=v)break;var oe=new ee(v),_e=I(u,o,j,oe);v=oe.bits,!(w.part2_3_length<=v)&&(w.assign(b),w.part2_3_length=v,w.region0_count=m[Q-2],w.region1_count=Q-2-m[Q-2],w.table_select[0]=P[Q-2],w.table_select[1]=ae[Q-2],w.table_select[2]=_e)}}this.best_huffman_divide=function(h,b){var w=new Et,u=b.l3_enc,_=la(23),m=la(23),P=la(23),ae=la(23);if(!(b.block_type==g.SHORT_TYPE&&h.mode_gr==1)){w.assign(b),b.block_type==g.NORM_TYPE&&(k(h,b,u,_,m,P,ae),i(h,w,b,u,_,m,P,ae));var j=w.big_values;if(!(j==0||(u[j-2]|u[j-1])>1)&&(j=b.count1+2,!(j>576))){w.assign(b),w.count1=j;for(var Q=0,o=0;j>w.big_values;j-=4){var v=((u[j-4]*2+u[j-3])*2+u[j-2])*2+u[j-1];Q+=xt.t32l[v],o+=xt.t33l[v]}if(w.big_values=j,w.count1table_select=0,Q>o&&(Q=o,w.count1table_select=1),w.count1bits=Q,w.block_type==g.NORM_TYPE)i(h,w,b,u,_,m,P,ae);else{if(w.part2_3_length=Q,Q=h.scalefac_band.l[8],Q>j&&(Q=j),Q>0){var oe=new ee(w.part2_3_length);w.table_select[0]=I(u,0,Q,oe),w.part2_3_length=oe.bits}if(j>Q){var oe=new ee(w.part2_3_length);w.table_select[1]=I(u,Q,j,oe),w.part2_3_length=oe.bits}b.part2_3_length>w.part2_3_length&&b.assign(w)}}}};var G=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],W=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],V=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],f=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];O0.slen1_tab=V,O0.slen2_tab=f;function A(h,b){for(var w,u=b.tt[1][h],_=b.tt[0][h],m=0;m<xt.scfsi_band.length-1;m++){for(w=xt.scfsi_band[m];w<xt.scfsi_band[m+1]&&!(_.scalefac[w]!=u.scalefac[w]&&u.scalefac[w]>=0);w++);if(w==xt.scfsi_band[m+1]){for(w=xt.scfsi_band[m];w<xt.scfsi_band[m+1];w++)u.scalefac[w]=-1;b.scfsi[h][m]=1}}var P=0,ae=0;for(w=0;w<11;w++)u.scalefac[w]!=-1&&(ae++,P<u.scalefac[w]&&(P=u.scalefac[w]));for(var j=0,Q=0;w<g.SBPSY_l;w++)u.scalefac[w]!=-1&&(Q++,j<u.scalefac[w]&&(j=u.scalefac[w]));for(var m=0;m<16;m++)if(P<G[m]&&j<W[m]){var o=V[m]*ae+f[m]*Q;u.part2_length>o&&(u.part2_length=o,u.scalefac_compress=m)}}this.best_scalefac_store=function(h,b,w,u){var _=u.tt[b][w],m,P,ae,j,Q=0;for(ae=0,m=0;m<_.sfbmax;m++){var o=_.width[m];for(ae+=o,j=-o;j<0&&_.l3_enc[j+ae]==0;j++);j==0&&(_.scalefac[m]=Q=-2)}if(_.scalefac_scale==0&&_.preflag==0){var v=0;for(m=0;m<_.sfbmax;m++)_.scalefac[m]>0&&(v|=_.scalefac[m]);if(!(v&1)&&v!=0){for(m=0;m<_.sfbmax;m++)_.scalefac[m]>0&&(_.scalefac[m]>>=1);_.scalefac_scale=Q=1}}if(_.preflag==0&&_.block_type!=g.SHORT_TYPE&&h.mode_gr==2){for(m=11;m<g.SBPSY_l&&!(_.scalefac[m]<N.pretab[m]&&_.scalefac[m]!=-2);m++);if(m==g.SBPSY_l){for(m=11;m<g.SBPSY_l;m++)_.scalefac[m]>0&&(_.scalefac[m]-=N.pretab[m]);_.preflag=Q=1}}for(P=0;P<4;P++)u.scfsi[w][P]=0;for(h.mode_gr==2&&b==1&&u.tt[0][w].block_type!=g.SHORT_TYPE&&u.tt[1][w].block_type!=g.SHORT_TYPE&&(A(w,u),Q=0),m=0;m<_.sfbmax;m++)_.scalefac[m]==-2&&(_.scalefac[m]=0);Q!=0&&(h.mode_gr==2?this.scale_bitcount(_):this.scale_bitcount_lsf(h,_))};function C(h,b){for(var w=0;w<b;++w)if(h[w]<0)return!1;return!0}var O=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],F=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],l=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(h){var b,w,u=0,_=0,m,P=h.scalefac;if(I0(C(P,h.sfbmax)),h.block_type==g.SHORT_TYPE)m=O,h.mixed_block_flag!=0&&(m=F);else if(m=l,h.preflag==0){for(w=11;w<g.SBPSY_l&&!(P[w]<N.pretab[w]);w++);if(w==g.SBPSY_l)for(h.preflag=1,w=11;w<g.SBPSY_l;w++)P[w]-=N.pretab[w]}for(w=0;w<h.sfbdivide;w++)u<P[w]&&(u=P[w]);for(;w<h.sfbmax;w++)_<P[w]&&(_=P[w]);for(h.part2_length=Ur.LARGE_BITS,b=0;b<16;b++)u<G[b]&&_<W[b]&&h.part2_length>m[b]&&(h.part2_length=m[b],h.scalefac_compress=b);return h.part2_length==Ur.LARGE_BITS};var S=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(h,b){var w,u,_,m,P,ae,j,Q,o=la(4),v=b.scalefac;for(b.preflag!=0?w=2:w=0,j=0;j<4;j++)o[j]=0;if(b.block_type==g.SHORT_TYPE){u=1;var oe=N.nr_of_sfb_block[w][u];for(Q=0,_=0;_<4;_++)for(m=oe[_]/3,j=0;j<m;j++,Q++)for(P=0;P<3;P++)v[Q*3+P]>o[_]&&(o[_]=v[Q*3+P])}else{u=0;var oe=N.nr_of_sfb_block[w][u];for(Q=0,_=0;_<4;_++)for(m=oe[_],j=0;j<m;j++,Q++)v[Q]>o[_]&&(o[_]=v[Q])}for(ae=!1,_=0;_<4;_++)o[_]>S[w][_]&&(ae=!0);if(!ae){var _e,Be,ke,Oe;for(b.sfb_partition_table=N.nr_of_sfb_block[w][u],_=0;_<4;_++)b.slen[_]=p[o[_]];switch(_e=b.slen[0],Be=b.slen[1],ke=b.slen[2],Oe=b.slen[3],w){case 0:b.scalefac_compress=(_e*5+Be<<4)+(ke<<2)+Oe;break;case 1:b.scalefac_compress=400+(_e*5+Be<<2)+ke;break;case 2:b.scalefac_compress=500+_e*3+Be;break;default:vh.err.printf(`intensity stereo not implemented yet
`);break}}if(!ae)for(I0(b.sfb_partition_table!=null),b.part2_length=0,_=0;_<4;_++)b.part2_length+=b.slen[_]*b.sfb_partition_table[_];return ae};var p=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(h){for(var b=2;b<=576;b+=2){for(var w=0,u;h.scalefac_band.l[++w]<b;);for(u=ce[w][0];h.scalefac_band.l[u+1]>b;)u--;for(u<0&&(u=ce[w][0]),h.bv_scf[b-2]=u,u=ce[w][1];h.scalefac_band.l[u+h.bv_scf[b-2]+2]>b;)u--;u<0&&(u=ce[w][1]),h.bv_scf[b-1]=u}}}var P0=O0,br=K.System,bh=K.Arrays,yh=K.new_byte,wh=K.new_float_n,Sh=K.new_int,rn=K.assert;ai.EQ=function(N,ee){return Math.abs(N)>Math.abs(ee)?Math.abs(N-ee)<=Math.abs(N)*1e-6:Math.abs(N-ee)<=Math.abs(ee)*1e-6},ai.NEQ=function(N,ee){return!ai.EQ(N,ee)};function ai(){var N=this,ee=32773,ce=null,te=null,xe=null,ne=null;this.setModules=function(S,p,h,b){ce=S,te=p,xe=h,ne=b};var fe=null,Te=0,Ie=0,U=0;this.getframebits=function(S){var p=S.internal_flags,h;p.bitrate_index!=0?h=xt.bitrate_table[S.version][p.bitrate_index]:h=S.brate;var b=0|(S.version+1)*72e3*h/S.out_samplerate+p.padding;return 8*b};function be(S){br.arraycopy(S.header[S.w_ptr].buf,0,fe,Ie,S.sideinfo_len),Ie+=S.sideinfo_len,Te+=S.sideinfo_len*8,S.w_ptr=S.w_ptr+1&Dt.MAX_HEADER_BUF-1}function B(S,p,h){for(;h>0;){var b;U==0&&(U=8,Ie++,rn(S.header[S.w_ptr].write_timing>=Te),S.header[S.w_ptr].write_timing==Te&&be(S),fe[Ie]=0),b=Math.min(h,U),h-=b,U-=b,fe[Ie]|=p>>h<<U,Te+=b}}function I(S,p,h){for(;h>0;){var b;U==0&&(U=8,Ie++,fe[Ie]=0),b=Math.min(h,U),h-=b,U-=b,fe[Ie]|=p>>h<<U,Te+=b}}function k(S,p){var h=S.internal_flags,b;if(p>=8&&(B(h,76,8),p-=8),p>=8&&(B(h,65,8),p-=8),p>=8&&(B(h,77,8),p-=8),p>=8&&(B(h,69,8),p-=8),p>=32){var w=xe.getLameShortVersion();if(p>=32)for(b=0;b<w.length&&p>=8;++b)p-=8,B(h,w.charAt(b),8)}for(;p>=1;p-=1)B(h,h.ancillary_flag,1),h.ancillary_flag^=S.disable_reservoir?0:1}function i(S,p,h){for(var b=S.header[S.h_ptr].ptr;h>0;){var w=Math.min(h,8-(b&7));h-=w,S.header[S.h_ptr].buf[b>>3]|=p>>h<<8-(b&7)-w,b+=w}S.header[S.h_ptr].ptr=b}function G(S,p){S<<=8;for(var h=0;h<8;h++)S<<=1,p<<=1,(p^S)&65536&&(p^=ee);return p}this.CRC_writeheader=function(S,p){var h=65535;h=G(p[2]&255,h),h=G(p[3]&255,h);for(var b=6;b<S.sideinfo_len;b++)h=G(p[b]&255,h);p[4]=byte(h>>8),p[5]=byte(h&255)};function W(S,p){var h=S.internal_flags,b,w,u;if(b=h.l3_side,h.header[h.h_ptr].ptr=0,bh.fill(h.header[h.h_ptr].buf,0,h.sideinfo_len,0),S.out_samplerate<16e3?i(h,4094,12):i(h,4095,12),i(h,S.version,1),i(h,1,2),i(h,S.error_protection?0:1,1),i(h,h.bitrate_index,4),i(h,h.samplerate_index,2),i(h,h.padding,1),i(h,S.extension,1),i(h,S.mode.ordinal(),2),i(h,h.mode_ext,2),i(h,S.copyright,1),i(h,S.original,1),i(h,S.emphasis,2),S.error_protection&&i(h,0,16),S.version==1){for(rn(b.main_data_begin>=0),i(h,b.main_data_begin,9),h.channels_out==2?i(h,b.private_bits,3):i(h,b.private_bits,5),u=0;u<h.channels_out;u++){var _;for(_=0;_<4;_++)i(h,b.scfsi[u][_],1)}for(w=0;w<2;w++)for(u=0;u<h.channels_out;u++){var m=b.tt[w][u];i(h,m.part2_3_length+m.part2_length,12),i(h,m.big_values/2,9),i(h,m.global_gain,8),i(h,m.scalefac_compress,4),m.block_type!=g.NORM_TYPE?(i(h,1,1),i(h,m.block_type,2),i(h,m.mixed_block_flag,1),m.table_select[0]==14&&(m.table_select[0]=16),i(h,m.table_select[0],5),m.table_select[1]==14&&(m.table_select[1]=16),i(h,m.table_select[1],5),i(h,m.subblock_gain[0],3),i(h,m.subblock_gain[1],3),i(h,m.subblock_gain[2],3)):(i(h,0,1),m.table_select[0]==14&&(m.table_select[0]=16),i(h,m.table_select[0],5),m.table_select[1]==14&&(m.table_select[1]=16),i(h,m.table_select[1],5),m.table_select[2]==14&&(m.table_select[2]=16),i(h,m.table_select[2],5),rn(0<=m.region0_count&&m.region0_count<16),rn(0<=m.region1_count&&m.region1_count<8),i(h,m.region0_count,4),i(h,m.region1_count,3)),i(h,m.preflag,1),i(h,m.scalefac_scale,1),i(h,m.count1table_select,1)}}else for(rn(b.main_data_begin>=0),i(h,b.main_data_begin,8),i(h,b.private_bits,h.channels_out),w=0,u=0;u<h.channels_out;u++){var m=b.tt[w][u];i(h,m.part2_3_length+m.part2_length,12),i(h,m.big_values/2,9),i(h,m.global_gain,8),i(h,m.scalefac_compress,9),m.block_type!=g.NORM_TYPE?(i(h,1,1),i(h,m.block_type,2),i(h,m.mixed_block_flag,1),m.table_select[0]==14&&(m.table_select[0]=16),i(h,m.table_select[0],5),m.table_select[1]==14&&(m.table_select[1]=16),i(h,m.table_select[1],5),i(h,m.subblock_gain[0],3),i(h,m.subblock_gain[1],3),i(h,m.subblock_gain[2],3)):(i(h,0,1),m.table_select[0]==14&&(m.table_select[0]=16),i(h,m.table_select[0],5),m.table_select[1]==14&&(m.table_select[1]=16),i(h,m.table_select[1],5),m.table_select[2]==14&&(m.table_select[2]=16),i(h,m.table_select[2],5),rn(0<=m.region0_count&&m.region0_count<16),rn(0<=m.region1_count&&m.region1_count<8),i(h,m.region0_count,4),i(h,m.region1_count,3)),i(h,m.scalefac_scale,1),i(h,m.count1table_select,1)}S.error_protection&&CRC_writeheader(h,h.header[h.h_ptr].buf);{var P=h.h_ptr;rn(h.header[P].ptr==h.sideinfo_len*8),h.h_ptr=P+1&Dt.MAX_HEADER_BUF-1,h.header[h.h_ptr].write_timing=h.header[P].write_timing+p,h.h_ptr==h.w_ptr&&br.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function V(S,p){var h=xt.ht[p.count1table_select+32],b,w=0,u=p.big_values,_=p.big_values;for(rn(p.count1table_select<2),b=(p.count1-p.big_values)/4;b>0;--b){var m=0,P=0,ae;ae=p.l3_enc[u+0],ae!=0&&(P+=8,p.xr[_+0]<0&&m++),ae=p.l3_enc[u+1],ae!=0&&(P+=4,m*=2,p.xr[_+1]<0&&m++),ae=p.l3_enc[u+2],ae!=0&&(P+=2,m*=2,p.xr[_+2]<0&&m++),ae=p.l3_enc[u+3],ae!=0&&(P++,m*=2,p.xr[_+3]<0&&m++),u+=4,_+=4,B(S,m+h.table[P],h.hlen[P]),w+=h.hlen[P]}return w}function f(S,p,h,b,w){var u=xt.ht[p],_=0;if(p==0)return _;for(var m=h;m<b;m+=2){var P=0,ae=0,j=u.xlen,Q=u.xlen,o=0,v=w.l3_enc[m],oe=w.l3_enc[m+1];if(v!=0&&(w.xr[m]<0&&o++,P--),p>15){if(v>14){var _e=v-15;rn(_e<=u.linmax),o|=_e<<1,ae=j,v=15}if(oe>14){var Be=oe-15;rn(Be<=u.linmax),o<<=j,o|=Be,ae+=j,oe=15}Q=16}oe!=0&&(o<<=1,w.xr[m+1]<0&&o++,P--),v=v*Q+oe,ae-=P,P+=u.hlen[v],B(S,u.table[v],P),B(S,o,ae),_+=P+ae}return _}function A(S,p){var h=3*S.scalefac_band.s[3];h>p.big_values&&(h=p.big_values);var b=f(S,p.table_select[0],0,h,p);return b+=f(S,p.table_select[1],h,p.big_values,p),b}function C(S,p){var h,b,w,u;h=p.big_values;var _=p.region0_count+1;return rn(_<S.scalefac_band.l.length),w=S.scalefac_band.l[_],_+=p.region1_count+1,rn(_<S.scalefac_band.l.length),u=S.scalefac_band.l[_],w>h&&(w=h),u>h&&(u=h),b=f(S,p.table_select[0],0,w,p),b+=f(S,p.table_select[1],w,u,p),b+=f(S,p.table_select[2],u,h,p),b}function O(S){var p,h,b,w,u=0,_=S.internal_flags,m=_.l3_side;if(S.version==1)for(p=0;p<2;p++)for(h=0;h<_.channels_out;h++){var P=m.tt[p][h],ae=P0.slen1_tab[P.scalefac_compress],j=P0.slen2_tab[P.scalefac_compress];for(w=0,b=0;b<P.sfbdivide;b++)P.scalefac[b]!=-1&&(B(_,P.scalefac[b],ae),w+=ae);for(;b<P.sfbmax;b++)P.scalefac[b]!=-1&&(B(_,P.scalefac[b],j),w+=j);rn(w==P.part2_length),P.block_type==g.SHORT_TYPE?w+=A(_,P):w+=C(_,P),w+=V(_,P),rn(w==P.part2_3_length+P.part2_length),u+=w}else for(p=0,h=0;h<_.channels_out;h++){var P=m.tt[p][h],Q,o,v=0;if(rn(P.sfb_partition_table!=null),w=0,b=0,o=0,P.block_type==g.SHORT_TYPE){for(;o<4;o++){var oe=P.sfb_partition_table[o]/3,_e=P.slen[o];for(Q=0;Q<oe;Q++,b++)B(_,Math.max(P.scalefac[b*3+0],0),_e),B(_,Math.max(P.scalefac[b*3+1],0),_e),B(_,Math.max(P.scalefac[b*3+2],0),_e),v+=3*_e}w+=A(_,P)}else{for(;o<4;o++){var oe=P.sfb_partition_table[o],_e=P.slen[o];for(Q=0;Q<oe;Q++,b++)B(_,Math.max(P.scalefac[b],0),_e),v+=_e}w+=C(_,P)}w+=V(_,P),rn(w==P.part2_3_length),rn(v==P.part2_length),u+=v+w}return u}function F(){this.total=0}function l(S,p){var h=S.internal_flags,b,w,u,_,m;return m=h.w_ptr,_=h.h_ptr-1,_==-1&&(_=Dt.MAX_HEADER_BUF-1),b=h.header[_].write_timing-Te,p.total=b,b>=0&&(w=1+_-m,_<m&&(w=1+_-m+Dt.MAX_HEADER_BUF),b-=w*8*h.sideinfo_len),u=N.getframebits(S),b+=u,p.total+=u,p.total%8!=0?p.total=1+p.total/8:p.total=p.total/8,p.total+=Ie+1,b<0&&br.err.println(`strange error flushing buffer ... 
`),b}this.flush_bitstream=function(S){var p=S.internal_flags,h,b,w=p.h_ptr-1;if(w==-1&&(w=Dt.MAX_HEADER_BUF-1),h=p.l3_side,!((b=l(S,new F))<0)){if(k(S,b),rn(p.header[w].write_timing+this.getframebits(S)==Te),p.ResvSize=0,h.main_data_begin=0,p.findReplayGain){var u=ce.GetTitleGain(p.rgdata);rn(NEQ(u,fa.GAIN_NOT_ENOUGH_SAMPLES)),p.RadioGain=Math.floor(u*10+.5)|0}p.findPeakSample&&(p.noclipGainChange=Math.ceil(Math.log10(p.PeakSample/32767)*20*10)|0,p.noclipGainChange>0&&(EQ(S.scale,1)||EQ(S.scale,0))?p.noclipScale=Math.floor(32767/p.PeakSample*100)/100:p.noclipScale=-1)}},this.add_dummy_byte=function(S,p,h){for(var b=S.internal_flags,w;h-- >0;)for(I(b,p,8),w=0;w<Dt.MAX_HEADER_BUF;++w)b.header[w].write_timing+=8},this.format_bitstream=function(S){var p=S.internal_flags,h;h=p.l3_side;var b=this.getframebits(S);k(S,h.resvDrain_pre),W(S,b);var w=8*p.sideinfo_len;if(w+=O(S),k(S,h.resvDrain_post),w+=h.resvDrain_post,h.main_data_begin+=(b-w)/8,l(S,new F)!=p.ResvSize&&br.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),h.main_data_begin*8!=p.ResvSize&&(br.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*h.main_data_begin,p.ResvSize,h.resvDrain_post,h.resvDrain_pre,8*p.sideinfo_len,w-h.resvDrain_post-8*p.sideinfo_len,w,w%8,b),br.err.println("This is a fatal error.  It has several possible causes:"),br.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),br.err.println(" 9%%  Your system is overclocked"),br.err.println(" 1%%  bug in LAME encoding library"),p.ResvSize=h.main_data_begin*8),Te>1e9){var u;for(u=0;u<Dt.MAX_HEADER_BUF;++u)p.header[u].write_timing-=Te;Te=0}return 0},this.copy_buffer=function(S,p,h,b,w){var u=Ie+1;if(u<=0)return 0;if(b!=0&&u>b)return-1;if(br.arraycopy(fe,0,p,h,u),Ie=-1,U=0,w!=0){var _=Sh(1);if(_[0]=S.nMusicCRC,ne.updateMusicCRC(_,p,h,u),S.nMusicCRC=_[0],u>0&&(S.VBR_seek_table.nBytesWritten+=u),S.decode_on_the_fly){for(var m=wh([2,1152]),P=u,ae=-1,j;ae!=0;)if(ae=te.hip_decode1_unclipped(S.hip,p,h,P,m[0],m[1]),P=0,ae==-1&&(ae=0),ae>0){if(S.findPeakSample){for(j=0;j<ae;j++)m[0][j]>S.PeakSample?S.PeakSample=m[0][j]:-m[0][j]>S.PeakSample&&(S.PeakSample=-m[0][j]);if(S.channels_out>1)for(j=0;j<ae;j++)m[1][j]>S.PeakSample?S.PeakSample=m[1][j]:-m[1][j]>S.PeakSample&&(S.PeakSample=-m[1][j])}if(S.findReplayGain&&ce.AnalyzeSamples(S.rgdata,m[0],0,m[1],0,ae,S.channels_out)==fa.GAIN_ANALYSIS_ERROR)return-6}}}return u},this.init_bit_stream_w=function(S){fe=yh(Nt.LAME_MAXMP3BUFFER),S.h_ptr=S.w_ptr=0,S.header[S.h_ptr].write_timing=0,Ie=-1,U=0,Te=0}}var Yr=ai,xh=K.System,kt=K.VbrMode,N0=K.ShortBlock,ms=K.new_float,Vo=K.new_int_n,Ah=K.new_short_n,Kr=K.assert;function sn(){var N=this,ee=128*1024;sn.V9=410,sn.V8=420,sn.V7=430,sn.V6=440,sn.V5=450,sn.V4=460,sn.V3=470,sn.V2=480,sn.V1=490,sn.V0=500,sn.R3MIX=1e3,sn.STANDARD=1001,sn.EXTREME=1002,sn.INSANE=1003,sn.STANDARD_FAST=1004,sn.EXTREME_FAST=1005,sn.MEDIUM=1006,sn.MEDIUM_FAST=1007;var ce=16384+ee;sn.LAME_MAXMP3BUFFER=ce;var te,xe,ne,fe,Te,Ie=new je,U,be,B;this.enc=new g,this.setModules=function(o,v,oe,_e,Be,ke,Oe,Le,it){te=o,xe=v,ne=oe,fe=_e,Te=Be,U=ke,be=Le,B=it,this.enc.setModules(xe,Ie,fe,U)};function I(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=ms(g.SBMAX_l),this.bo_s_weight=ms(g.SBMAX_s)}function k(){this.lowerlimit=0}function i(o,v){this.lowpass=v}var G=4294479419;function W(o){var v;return o.class_id=G,v=o.internal_flags=new Dt,o.mode=an.NOT_SET,o.original=1,o.in_samplerate=44100,o.num_channels=2,o.num_samples=-1,o.bWriteVbrTag=!0,o.quality=-1,o.short_blocks=null,v.subblock_gain=-1,o.lowpassfreq=0,o.highpassfreq=0,o.lowpasswidth=-1,o.highpasswidth=-1,o.VBR=kt.vbr_off,o.VBR_q=4,o.ATHcurve=-1,o.VBR_mean_bitrate_kbps=128,o.VBR_min_bitrate_kbps=0,o.VBR_max_bitrate_kbps=0,o.VBR_hard_min=0,v.VBR_min_bitrate=1,v.VBR_max_bitrate=13,o.quant_comp=-1,o.quant_comp_short=-1,o.msfix=-1,v.resample_ratio=1,v.OldValue[0]=180,v.OldValue[1]=180,v.CurrentStep[0]=4,v.CurrentStep[1]=4,v.masking_lower=1,v.nsPsy.attackthre=-1,v.nsPsy.attackthre_s=-1,o.scale=-1,o.athaa_type=-1,o.ATHtype=-1,o.athaa_loudapprox=-1,o.athaa_sensitivity=0,o.useTemporal=null,o.interChRatio=-1,v.mf_samples_to_encode=g.ENCDELAY+g.POSTDELAY,o.encoder_padding=0,v.mf_size=g.ENCDELAY-g.MDCTDELAY,o.findReplayGain=!1,o.decode_on_the_fly=!1,v.decode_on_the_fly=!1,v.findReplayGain=!1,v.findPeakSample=!1,v.RadioGain=0,v.AudiophileGain=0,v.noclipGainChange=0,v.noclipScale=-1,o.preset=0,o.write_id3tag_automatic=!0,0}this.lame_init=function(){var o=new lt;return W(o),o.lame_allocated_gfp=1,o};function V(o){return o>1?0:o<=0?1:Math.cos(Math.PI/2*o)}this.nearestBitrateFullIndex=function(o){var v=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],oe=0,_e=0,Be=0,ke=0;ke=v[16],Be=16,_e=v[16],oe=16;for(var Oe=0;Oe<16;Oe++)if(Math.max(o,v[Oe+1])!=o){ke=v[Oe+1],Be=Oe+1,_e=v[Oe],oe=Oe;break}return ke-o>o-_e?oe:Be};function f(o,v){var oe=44100;return v>=48e3?oe=48e3:v>=44100?oe=44100:v>=32e3?oe=32e3:v>=24e3?oe=24e3:v>=22050?oe=22050:v>=16e3?oe=16e3:v>=12e3?oe=12e3:v>=11025?oe=11025:v>=8e3&&(oe=8e3),o==-1?oe:(o<=15960&&(oe=44100),o<=15250&&(oe=32e3),o<=11220&&(oe=24e3),o<=9970&&(oe=22050),o<=7230&&(oe=16e3),o<=5420&&(oe=12e3),o<=4510&&(oe=11025),o<=3970&&(oe=8e3),v<oe?v>44100?48e3:v>32e3?44100:v>24e3?32e3:v>22050?24e3:v>16e3?22050:v>12e3?16e3:v>11025?12e3:v>8e3?11025:8e3:oe)}function A(o,v){switch(o){case 44100:return v.version=1,0;case 48e3:return v.version=1,1;case 32e3:return v.version=1,2;case 22050:return v.version=0,0;case 24e3:return v.version=0,1;case 16e3:return v.version=0,2;case 11025:return v.version=0,0;case 12e3:return v.version=0,1;case 8e3:return v.version=0,2;default:return v.version=0,-1}}function C(o,v,oe){oe<16e3&&(v=2);for(var _e=xt.bitrate_table[v][1],Be=2;Be<=14;Be++)xt.bitrate_table[v][Be]>0&&Math.abs(xt.bitrate_table[v][Be]-o)<Math.abs(_e-o)&&(_e=xt.bitrate_table[v][Be]);return _e}function O(o,v,oe){oe<16e3&&(v=2);for(var _e=0;_e<=14;_e++)if(xt.bitrate_table[v][_e]>0&&xt.bitrate_table[v][_e]==o)return _e;return-1}function F(o,v){var oe=[new i(8,2e3),new i(16,3700),new i(24,3900),new i(32,5500),new i(40,7e3),new i(48,7500),new i(56,1e4),new i(64,11e3),new i(80,13500),new i(96,15100),new i(112,15600),new i(128,17e3),new i(160,17500),new i(192,18600),new i(224,19400),new i(256,19700),new i(320,20500)],_e=N.nearestBitrateFullIndex(v);o.lowerlimit=oe[_e].lowpass}function l(o){var v=o.internal_flags,oe=32,_e=-1;if(v.lowpass1>0){for(var Be=999,ke=0;ke<=31;ke++){var Oe=ke/31;Oe>=v.lowpass2&&(oe=Math.min(oe,ke)),v.lowpass1<Oe&&Oe<v.lowpass2&&(Be=Math.min(Be,ke))}Be==999?v.lowpass1=(oe-.75)/31:v.lowpass1=(Be-.75)/31,v.lowpass2=oe/31}if(v.highpass2>0&&v.highpass2<.9*(.75/31)&&(v.highpass1=0,v.highpass2=0,xh.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),v.highpass2>0){for(var Le=-1,ke=0;ke<=31;ke++){var Oe=ke/31;Oe<=v.highpass1&&(_e=Math.max(_e,ke)),v.highpass1<Oe&&Oe<v.highpass2&&(Le=Math.max(Le,ke))}v.highpass1=_e/31,Le==-1?v.highpass2=(_e+.75)/31:v.highpass2=(Le+.75)/31}for(var ke=0;ke<32;ke++){var it,Ke,Oe=ke/31;v.highpass2>v.highpass1?it=V((v.highpass2-Oe)/(v.highpass2-v.highpass1+1e-20)):it=1,v.lowpass2>v.lowpass1?Ke=V((Oe-v.lowpass1)/(v.lowpass2-v.lowpass1+1e-20)):Ke=1,v.amp_filter[ke]=it*Ke}}function S(o){var v=o.internal_flags;switch(o.quality){default:case 9:v.psymodel=0,v.noise_shaping=0,v.noise_shaping_amp=0,v.noise_shaping_stop=0,v.use_best_huffman=0,v.full_outer_loop=0;break;case 8:o.quality=7;case 7:v.psymodel=1,v.noise_shaping=0,v.noise_shaping_amp=0,v.noise_shaping_stop=0,v.use_best_huffman=0,v.full_outer_loop=0;break;case 6:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.noise_shaping_amp=0,v.noise_shaping_stop=0,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=0,v.full_outer_loop=0;break;case 5:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.noise_shaping_amp=0,v.noise_shaping_stop=0,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=0,v.full_outer_loop=0;break;case 4:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.noise_shaping_amp=0,v.noise_shaping_stop=0,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=1,v.full_outer_loop=0;break;case 3:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.noise_shaping_amp=1,v.noise_shaping_stop=1,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=1,v.full_outer_loop=0;break;case 2:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.substep_shaping==0&&(v.substep_shaping=2),v.noise_shaping_amp=1,v.noise_shaping_stop=1,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=1,v.full_outer_loop=0;break;case 1:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.substep_shaping==0&&(v.substep_shaping=2),v.noise_shaping_amp=2,v.noise_shaping_stop=1,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=1,v.full_outer_loop=0;break;case 0:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.substep_shaping==0&&(v.substep_shaping=2),v.noise_shaping_amp=2,v.noise_shaping_stop=1,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=1,v.full_outer_loop=0;break}}function p(o){var v=o.internal_flags;o.frameNum=0,o.write_id3tag_automatic&&be.id3tag_write_v2(o),v.bitrate_stereoMode_Hist=Vo([16,5]),v.bitrate_blockType_Hist=Vo([16,6]),v.PeakSample=0,o.bWriteVbrTag&&U.InitVbrTag(o)}this.lame_init_params=function(o){var v=o.internal_flags;if(v.Class_ID=0,v.ATH==null&&(v.ATH=new oh),v.PSY==null&&(v.PSY=new I),v.rgdata==null&&(v.rgdata=new uh),v.channels_in=o.num_channels,v.channels_in==1&&(o.mode=an.MONO),v.channels_out=o.mode==an.MONO?1:2,v.mode_ext=g.MPG_MD_MS_LR,o.mode==an.MONO&&(o.force_ms=!1),o.VBR==kt.vbr_off&&o.VBR_mean_bitrate_kbps!=128&&o.brate==0&&(o.brate=o.VBR_mean_bitrate_kbps),o.VBR==kt.vbr_off||o.VBR==kt.vbr_mtrh||o.VBR==kt.vbr_mt||(o.free_format=!1),o.VBR==kt.vbr_off&&o.brate==0&&Yr.EQ(o.compression_ratio,0)&&(o.compression_ratio=11.025),o.VBR==kt.vbr_off&&o.compression_ratio>0&&(o.out_samplerate==0&&(o.out_samplerate=map2MP3Frequency(int(.97*o.in_samplerate))),o.brate=0|o.out_samplerate*16*v.channels_out/(1e3*o.compression_ratio),v.samplerate_index=A(o.out_samplerate,o),o.free_format||(o.brate=C(o.brate,o.version,o.out_samplerate))),o.out_samplerate!=0&&(o.out_samplerate<16e3?(o.VBR_mean_bitrate_kbps=Math.max(o.VBR_mean_bitrate_kbps,8),o.VBR_mean_bitrate_kbps=Math.min(o.VBR_mean_bitrate_kbps,64)):o.out_samplerate<32e3?(o.VBR_mean_bitrate_kbps=Math.max(o.VBR_mean_bitrate_kbps,8),o.VBR_mean_bitrate_kbps=Math.min(o.VBR_mean_bitrate_kbps,160)):(o.VBR_mean_bitrate_kbps=Math.max(o.VBR_mean_bitrate_kbps,32),o.VBR_mean_bitrate_kbps=Math.min(o.VBR_mean_bitrate_kbps,320))),o.lowpassfreq==0){var oe=16e3;switch(o.VBR){case kt.vbr_off:{var _e=new k;F(_e,o.brate),oe=_e.lowerlimit;break}case kt.vbr_abr:{var _e=new k;F(_e,o.VBR_mean_bitrate_kbps),oe=_e.lowerlimit;break}case kt.vbr_rh:{var Be=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=o.VBR_q&&o.VBR_q<=9){var ke=Be[o.VBR_q],Oe=Be[o.VBR_q+1],Le=o.VBR_q_frac;oe=linear_int(ke,Oe,Le)}else oe=19500;break}default:{var Be=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=o.VBR_q&&o.VBR_q<=9){var ke=Be[o.VBR_q],Oe=Be[o.VBR_q+1],Le=o.VBR_q_frac;oe=linear_int(ke,Oe,Le)}else oe=19500}}o.mode==an.MONO&&(o.VBR==kt.vbr_off||o.VBR==kt.vbr_abr)&&(oe*=1.5),o.lowpassfreq=oe|0}if(o.out_samplerate==0&&(2*o.lowpassfreq>o.in_samplerate&&(o.lowpassfreq=o.in_samplerate/2),o.out_samplerate=f(o.lowpassfreq|0,o.in_samplerate)),o.lowpassfreq=Math.min(20500,o.lowpassfreq),o.lowpassfreq=Math.min(o.out_samplerate/2,o.lowpassfreq),o.VBR==kt.vbr_off&&(o.compression_ratio=o.out_samplerate*16*v.channels_out/(1e3*o.brate)),o.VBR==kt.vbr_abr&&(o.compression_ratio=o.out_samplerate*16*v.channels_out/(1e3*o.VBR_mean_bitrate_kbps)),o.bWriteVbrTag||(o.findReplayGain=!1,o.decode_on_the_fly=!1,v.findPeakSample=!1),v.findReplayGain=o.findReplayGain,v.decode_on_the_fly=o.decode_on_the_fly,v.decode_on_the_fly&&(v.findPeakSample=!0),v.findReplayGain&&te.InitGainAnalysis(v.rgdata,o.out_samplerate)==fa.INIT_GAIN_ANALYSIS_ERROR)return o.internal_flags=null,-6;switch(v.decode_on_the_fly&&!o.decode_only&&(v.hip!=null&&B.hip_decode_exit(v.hip),v.hip=B.hip_decode_init()),v.mode_gr=o.out_samplerate<=24e3?1:2,o.framesize=576*v.mode_gr,o.encoder_delay=g.ENCDELAY,v.resample_ratio=o.in_samplerate/o.out_samplerate,o.VBR){case kt.vbr_mt:case kt.vbr_rh:case kt.vbr_mtrh:{var it=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];o.compression_ratio=it[o.VBR_q]}break;case kt.vbr_abr:o.compression_ratio=o.out_samplerate*16*v.channels_out/(1e3*o.VBR_mean_bitrate_kbps);break;default:o.compression_ratio=o.out_samplerate*16*v.channels_out/(1e3*o.brate);break}if(o.mode==an.NOT_SET&&(o.mode=an.JOINT_STEREO),o.highpassfreq>0?(v.highpass1=2*o.highpassfreq,o.highpasswidth>=0?v.highpass2=2*(o.highpassfreq+o.highpasswidth):v.highpass2=1*2*o.highpassfreq,v.highpass1/=o.out_samplerate,v.highpass2/=o.out_samplerate):(v.highpass1=0,v.highpass2=0),o.lowpassfreq>0?(v.lowpass2=2*o.lowpassfreq,o.lowpasswidth>=0?(v.lowpass1=2*(o.lowpassfreq-o.lowpasswidth),v.lowpass1<0&&(v.lowpass1=0)):v.lowpass1=1*2*o.lowpassfreq,v.lowpass1/=o.out_samplerate,v.lowpass2/=o.out_samplerate):(v.lowpass1=0,v.lowpass2=0),l(o),v.samplerate_index=A(o.out_samplerate,o),v.samplerate_index<0)return o.internal_flags=null,-1;if(o.VBR==kt.vbr_off){if(o.free_format)v.bitrate_index=0;else if(o.brate=C(o.brate,o.version,o.out_samplerate),v.bitrate_index=O(o.brate,o.version,o.out_samplerate),v.bitrate_index<=0)return o.internal_flags=null,-1}else v.bitrate_index=1;o.analysis&&(o.bWriteVbrTag=!1),v.pinfo!=null&&(o.bWriteVbrTag=!1),xe.init_bit_stream_w(v);for(var Ke=v.samplerate_index+3*o.version+6*(o.out_samplerate<16e3?1:0),Ne=0;Ne<g.SBMAX_l+1;Ne++)v.scalefac_band.l[Ne]=fe.sfBandIndex[Ke].l[Ne];for(var Ne=0;Ne<g.PSFB21+1;Ne++){var Mt=(v.scalefac_band.l[22]-v.scalefac_band.l[21])/g.PSFB21,ln=v.scalefac_band.l[21]+Ne*Mt;v.scalefac_band.psfb21[Ne]=ln}v.scalefac_band.psfb21[g.PSFB21]=576;for(var Ne=0;Ne<g.SBMAX_s+1;Ne++)v.scalefac_band.s[Ne]=fe.sfBandIndex[Ke].s[Ne];for(var Ne=0;Ne<g.PSFB12+1;Ne++){var Mt=(v.scalefac_band.s[13]-v.scalefac_band.s[12])/g.PSFB12,ln=v.scalefac_band.s[12]+Ne*Mt;v.scalefac_band.psfb12[Ne]=ln}v.scalefac_band.psfb12[g.PSFB12]=192,o.version==1?v.sideinfo_len=v.channels_out==1?21:36:v.sideinfo_len=v.channels_out==1?13:21,o.error_protection&&(v.sideinfo_len+=2),p(o),v.Class_ID=G;{var wt;for(wt=0;wt<19;wt++)v.nsPsy.pefirbuf[wt]=700*v.mode_gr*v.channels_out;o.ATHtype==-1&&(o.ATHtype=4)}switch(Kr(o.VBR_q<=9),Kr(o.VBR_q>=0),o.VBR){case kt.vbr_mt:o.VBR=kt.vbr_mtrh;case kt.vbr_mtrh:{o.useTemporal==null&&(o.useTemporal=!1),ne.apply_preset(o,500-o.VBR_q*10,0),o.quality<0&&(o.quality=LAME_DEFAULT_QUALITY),o.quality<5&&(o.quality=0),o.quality>5&&(o.quality=5),v.PSY.mask_adjust=o.maskingadjust,v.PSY.mask_adjust_short=o.maskingadjust_short,o.experimentalY?v.sfb21_extra=!1:v.sfb21_extra=o.out_samplerate>44e3,v.iteration_loop=new VBRNewIterationLoop(Te);break}case kt.vbr_rh:{ne.apply_preset(o,500-o.VBR_q*10,0),v.PSY.mask_adjust=o.maskingadjust,v.PSY.mask_adjust_short=o.maskingadjust_short,o.experimentalY?v.sfb21_extra=!1:v.sfb21_extra=o.out_samplerate>44e3,o.quality>6&&(o.quality=6),o.quality<0&&(o.quality=LAME_DEFAULT_QUALITY),v.iteration_loop=new VBROldIterationLoop(Te);break}default:{var jt;v.sfb21_extra=!1,o.quality<0&&(o.quality=LAME_DEFAULT_QUALITY),jt=o.VBR,jt==kt.vbr_off&&(o.VBR_mean_bitrate_kbps=o.brate),ne.apply_preset(o,o.VBR_mean_bitrate_kbps,0),o.VBR=jt,v.PSY.mask_adjust=o.maskingadjust,v.PSY.mask_adjust_short=o.maskingadjust_short,jt==kt.vbr_off?v.iteration_loop=new dh(Te):v.iteration_loop=new ABRIterationLoop(Te);break}}if(Kr(o.scale>=0),o.VBR!=kt.vbr_off){if(v.VBR_min_bitrate=1,v.VBR_max_bitrate=14,o.out_samplerate<16e3&&(v.VBR_max_bitrate=8),o.VBR_min_bitrate_kbps!=0&&(o.VBR_min_bitrate_kbps=C(o.VBR_min_bitrate_kbps,o.version,o.out_samplerate),v.VBR_min_bitrate=O(o.VBR_min_bitrate_kbps,o.version,o.out_samplerate),v.VBR_min_bitrate<0)||o.VBR_max_bitrate_kbps!=0&&(o.VBR_max_bitrate_kbps=C(o.VBR_max_bitrate_kbps,o.version,o.out_samplerate),v.VBR_max_bitrate=O(o.VBR_max_bitrate_kbps,o.version,o.out_samplerate),v.VBR_max_bitrate<0))return-1;o.VBR_min_bitrate_kbps=xt.bitrate_table[o.version][v.VBR_min_bitrate],o.VBR_max_bitrate_kbps=xt.bitrate_table[o.version][v.VBR_max_bitrate],o.VBR_mean_bitrate_kbps=Math.min(xt.bitrate_table[o.version][v.VBR_max_bitrate],o.VBR_mean_bitrate_kbps),o.VBR_mean_bitrate_kbps=Math.max(xt.bitrate_table[o.version][v.VBR_min_bitrate],o.VBR_mean_bitrate_kbps)}return o.tune&&(v.PSY.mask_adjust+=o.tune_value_a,v.PSY.mask_adjust_short+=o.tune_value_a),S(o),Kr(o.scale>=0),o.athaa_type<0?v.ATH.useAdjust=3:v.ATH.useAdjust=o.athaa_type,v.ATH.aaSensitivityP=Math.pow(10,o.athaa_sensitivity/-10),o.short_blocks==null&&(o.short_blocks=N0.short_block_allowed),o.short_blocks==N0.short_block_allowed&&(o.mode==an.JOINT_STEREO||o.mode==an.STEREO)&&(o.short_blocks=N0.short_block_coupled),o.quant_comp<0&&(o.quant_comp=1),o.quant_comp_short<0&&(o.quant_comp_short=0),o.msfix<0&&(o.msfix=0),o.exp_nspsytune=o.exp_nspsytune|1,o.internal_flags.nsPsy.attackthre<0&&(o.internal_flags.nsPsy.attackthre=je.NSATTACKTHRE),o.internal_flags.nsPsy.attackthre_s<0&&(o.internal_flags.nsPsy.attackthre_s=je.NSATTACKTHRE_S),Kr(o.scale>=0),o.scale<0&&(o.scale=1),o.ATHtype<0&&(o.ATHtype=4),o.ATHcurve<0&&(o.ATHcurve=4),o.athaa_loudapprox<0&&(o.athaa_loudapprox=2),o.interChRatio<0&&(o.interChRatio=0),o.useTemporal==null&&(o.useTemporal=!0),v.slot_lag=v.frac_SpF=0,o.VBR==kt.vbr_off&&(v.slot_lag=v.frac_SpF=(o.version+1)*72e3*o.brate%o.out_samplerate|0),fe.iteration_init(o),Ie.psymodel_init(o),Kr(o.scale>=0),0};function h(o,v){(o.in_buffer_0==null||o.in_buffer_nsamples<v)&&(o.in_buffer_0=ms(v),o.in_buffer_1=ms(v),o.in_buffer_nsamples=v)}this.lame_encode_flush=function(o,v,oe,_e){var Be=o.internal_flags,ke=Ah([2,1152]),Oe=0,Le,it,Ke,Ne,Mt=Be.mf_samples_to_encode-g.POSTDELAY,ln=b(o);if(Be.mf_samples_to_encode<1)return 0;for(Le=0,o.in_samplerate!=o.out_samplerate&&(Mt+=16*o.out_samplerate/o.in_samplerate),Ke=o.framesize-Mt%o.framesize,Ke<576&&(Ke+=o.framesize),o.encoder_padding=Ke,Ne=(Mt+Ke)/o.framesize;Ne>0&&Oe>=0;){var wt=ln-Be.mf_size,jt=o.frameNum;wt*=o.in_samplerate,wt/=o.out_samplerate,wt>1152&&(wt=1152),wt<1&&(wt=1),it=_e-Le,_e==0&&(it=0),Oe=this.lame_encode_buffer(o,ke[0],ke[1],wt,v,oe,it),oe+=Oe,Le+=Oe,Ne-=jt!=o.frameNum?1:0}if(Be.mf_samples_to_encode=0,Oe<0||(it=_e-Le,_e==0&&(it=0),xe.flush_bitstream(o),Oe=xe.copy_buffer(Be,v,oe,it,1),Oe<0))return Oe;if(oe+=Oe,Le+=Oe,it=_e-Le,_e==0&&(it=0),o.write_id3tag_automatic){if(be.id3tag_write_v1(o),Oe=xe.copy_buffer(Be,v,oe,it,0),Oe<0)return Oe;Le+=Oe}return Le},this.lame_encode_buffer=function(o,v,oe,_e,Be,ke,Oe){var Le=o.internal_flags,it=[null,null];if(Le.Class_ID!=G)return-3;if(_e==0)return 0;h(Le,_e),it[0]=Le.in_buffer_0,it[1]=Le.in_buffer_1;for(var Ke=0;Ke<_e;Ke++)it[0][Ke]=v[Ke],Le.channels_in>1&&(it[1][Ke]=oe[Ke]);return w(o,it[0],it[1],_e,Be,ke,Oe)};function b(o){var v=g.BLKSIZE+o.framesize-g.FFTOFFSET;return v=Math.max(v,512+o.framesize-32),v}function w(o,v,oe,_e,Be,ke,Oe){var Le=o.internal_flags,it=0,Ke,Ne,Mt,ln,wt,jt=[null,null],qt=[null,null];if(Le.Class_ID!=G)return-3;if(_e==0)return 0;if(wt=xe.copy_buffer(Le,Be,ke,Oe,0),wt<0)return wt;if(ke+=wt,it+=wt,qt[0]=v,qt[1]=oe,Yr.NEQ(o.scale,0)&&Yr.NEQ(o.scale,1))for(Ne=0;Ne<_e;++Ne)qt[0][Ne]*=o.scale,Le.channels_out==2&&(qt[1][Ne]*=o.scale);if(Yr.NEQ(o.scale_left,0)&&Yr.NEQ(o.scale_left,1))for(Ne=0;Ne<_e;++Ne)qt[0][Ne]*=o.scale_left;if(Yr.NEQ(o.scale_right,0)&&Yr.NEQ(o.scale_right,1))for(Ne=0;Ne<_e;++Ne)qt[1][Ne]*=o.scale_right;if(o.num_channels==2&&Le.channels_out==1)for(Ne=0;Ne<_e;++Ne)qt[0][Ne]=.5*(qt[0][Ne]+qt[1][Ne]),qt[1][Ne]=0;ln=b(o),jt[0]=Le.mfbuf[0],jt[1]=Le.mfbuf[1];for(var Jt=0;_e>0;){var dn=[null,null],wr=0,Jn=0;dn[0]=qt[0],dn[1]=qt[1];var Nn=new _;if(Q(o,jt,dn,Jt,_e,Nn),wr=Nn.n_in,Jn=Nn.n_out,Le.findReplayGain&&!Le.decode_on_the_fly&&te.AnalyzeSamples(Le.rgdata,jt[0],Le.mf_size,jt[1],Le.mf_size,Jn,Le.channels_out)==fa.GAIN_ANALYSIS_ERROR)return-6;if(_e-=wr,Jt+=wr,Le.channels_out==2,Le.mf_size+=Jn,Kr(Le.mf_size<=Dt.MFSIZE),Le.mf_samples_to_encode<1&&(Le.mf_samples_to_encode=g.ENCDELAY+g.POSTDELAY),Le.mf_samples_to_encode+=Jn,Le.mf_size>=ln){var ar=Oe-it;if(Oe==0&&(ar=0),Ke=u(o,jt[0],jt[1],Be,ke,ar),Ke<0)return Ke;for(ke+=Ke,it+=Ke,Le.mf_size-=o.framesize,Le.mf_samples_to_encode-=o.framesize,Mt=0;Mt<Le.channels_out;Mt++)for(Ne=0;Ne<Le.mf_size;Ne++)jt[Mt][Ne]=jt[Mt][Ne+o.framesize]}}return it}function u(o,v,oe,_e,Be,ke){var Oe=N.enc.lame_encode_mp3_frame(o,v,oe,_e,Be,ke);return o.frameNum++,Oe}function _(){this.n_in=0,this.n_out=0}function m(){this.num_used=0}function P(o,v){return v!=0?P(v,o%v):o}function ae(o,v,oe){var _e=Math.PI*v;o/=oe,o<0&&(o=0),o>1&&(o=1);var Be=o-.5,ke=.42-.5*Math.cos(2*o*Math.PI)+.08*Math.cos(4*o*Math.PI);return Math.abs(Be)<1e-9?_e/Math.PI:ke*Math.sin(oe*_e*Be)/(Math.PI*oe*Be)}function j(o,v,oe,_e,Be,ke,Oe,Le,it){var Ke=o.internal_flags,Ne,Mt=0,ln,wt=o.out_samplerate/P(o.out_samplerate,o.in_samplerate);wt>Dt.BPC&&(wt=Dt.BPC);var jt=Math.abs(Ke.resample_ratio-Math.floor(.5+Ke.resample_ratio))<1e-4?1:0,qt=1/Ke.resample_ratio;qt>1&&(qt=1);var Jt=31;Jt%2==0&&--Jt,Jt+=jt;var dn=Jt+1;if(Ke.fill_buffer_resample_init==0){for(Ke.inbuf_old[0]=ms(dn),Ke.inbuf_old[1]=ms(dn),Ne=0;Ne<=2*wt;++Ne)Ke.blackfilt[Ne]=ms(dn);for(Ke.itime[0]=0,Ke.itime[1]=0,Mt=0;Mt<=2*wt;Mt++){var wr=0,Jn=(Mt-wt)/(2*wt);for(Ne=0;Ne<=Jt;Ne++)wr+=Ke.blackfilt[Mt][Ne]=ae(Ne-Jn,qt,Jt);for(Ne=0;Ne<=Jt;Ne++)Ke.blackfilt[Mt][Ne]/=wr}Ke.fill_buffer_resample_init=1}var Nn=Ke.inbuf_old[it];for(ln=0;ln<_e;ln++){var ar,vs;if(ar=ln*Ke.resample_ratio,Mt=0|Math.floor(ar-Ke.itime[it]),Jt+Mt-Jt/2>=Oe)break;var Jn=ar-Ke.itime[it]-(Mt+.5*(Jt%2));vs=0|Math.floor(Jn*2*wt+wt+.5);var Gr=0;for(Ne=0;Ne<=Jt;++Ne){var Dn=Ne+Mt-Jt/2,ps;ps=Dn<0?Nn[dn+Dn]:Be[ke+Dn],Gr+=ps*Ke.blackfilt[vs][Ne]}v[oe+ln]=Gr}if(Le.num_used=Math.min(Oe,Jt+Mt-Jt/2),Ke.itime[it]+=Le.num_used-ln*Ke.resample_ratio,Le.num_used>=dn)for(Ne=0;Ne<dn;Ne++)Nn[Ne]=Be[ke+Le.num_used+Ne-dn];else{var Lr=dn-Le.num_used;for(Ne=0;Ne<Lr;++Ne)Nn[Ne]=Nn[Ne+Le.num_used];for(Mt=0;Ne<dn;++Ne,++Mt)Nn[Ne]=Be[ke+Mt];Kr(Mt==Le.num_used)}return ln}function Q(o,v,oe,_e,Be,ke){var Oe=o.internal_flags;if(Oe.resample_ratio<.9999||Oe.resample_ratio>1.0001)for(var Le=0;Le<Oe.channels_out;Le++){var it=new m;ke.n_out=j(o,v[Le],Oe.mf_size,o.framesize,oe[Le],_e,Be,it,Le),ke.n_in=it.num_used}else{ke.n_out=Math.min(o.framesize,Be),ke.n_in=ke.n_out;for(var Ke=0;Ke<ke.n_out;++Ke)v[0][Oe.mf_size+Ke]=oe[0][_e+Ke],Oe.channels_out==2&&(v[1][Oe.mf_size+Ke]=oe[1][_e+Ke])}}}var Eh=sn,yr=K.VbrMode;function Rh(){function N(U,be,B,I,k,i,G,W,V,f,A,C,O,F,l){this.vbr_q=U,this.quant_comp=be,this.quant_comp_s=B,this.expY=I,this.st_lrm=k,this.st_s=i,this.masking_adj=G,this.masking_adj_short=W,this.ath_lower=V,this.ath_curve=f,this.ath_sensitivity=A,this.interch=C,this.safejoint=O,this.sfb21mod=F,this.msfix=l}function ee(U,be,B,I,k,i,G,W,V,f,A,C,O,F){this.quant_comp=be,this.quant_comp_s=B,this.safejoint=I,this.nsmsfix=k,this.st_lrm=i,this.st_s=G,this.nsbass=W,this.scale=V,this.masking_adj=f,this.ath_lower=A,this.ath_curve=C,this.interch=O,this.sfscale=F}var ce;this.setModules=function(U){ce=U};var te=[new N(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new N(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new N(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new N(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new N(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new N(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new N(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new N(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new N(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new N(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new N(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],xe=[new N(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new N(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new N(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new N(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new N(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new N(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new N(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new N(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new N(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new N(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new N(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function ne(U,be,B){var I=U.VBR==yr.vbr_rh?te:xe,k=U.VBR_q_frac,i=I[be],G=I[be+1],W=i;i.st_lrm=i.st_lrm+k*(G.st_lrm-i.st_lrm),i.st_s=i.st_s+k*(G.st_s-i.st_s),i.masking_adj=i.masking_adj+k*(G.masking_adj-i.masking_adj),i.masking_adj_short=i.masking_adj_short+k*(G.masking_adj_short-i.masking_adj_short),i.ath_lower=i.ath_lower+k*(G.ath_lower-i.ath_lower),i.ath_curve=i.ath_curve+k*(G.ath_curve-i.ath_curve),i.ath_sensitivity=i.ath_sensitivity+k*(G.ath_sensitivity-i.ath_sensitivity),i.interch=i.interch+k*(G.interch-i.interch),i.msfix=i.msfix+k*(G.msfix-i.msfix),Ie(U,W.vbr_q),B!=0?U.quant_comp=W.quant_comp:Math.abs(U.quant_comp- -1)>0||(U.quant_comp=W.quant_comp),B!=0?U.quant_comp_short=W.quant_comp_s:Math.abs(U.quant_comp_short- -1)>0||(U.quant_comp_short=W.quant_comp_s),W.expY!=0&&(U.experimentalY=W.expY!=0),B!=0?U.internal_flags.nsPsy.attackthre=W.st_lrm:Math.abs(U.internal_flags.nsPsy.attackthre- -1)>0||(U.internal_flags.nsPsy.attackthre=W.st_lrm),B!=0?U.internal_flags.nsPsy.attackthre_s=W.st_s:Math.abs(U.internal_flags.nsPsy.attackthre_s- -1)>0||(U.internal_flags.nsPsy.attackthre_s=W.st_s),B!=0?U.maskingadjust=W.masking_adj:Math.abs(U.maskingadjust-0)>0||(U.maskingadjust=W.masking_adj),B!=0?U.maskingadjust_short=W.masking_adj_short:Math.abs(U.maskingadjust_short-0)>0||(U.maskingadjust_short=W.masking_adj_short),B!=0?U.ATHlower=-W.ath_lower/10:Math.abs(-U.ATHlower*10-0)>0||(U.ATHlower=-W.ath_lower/10),B!=0?U.ATHcurve=W.ath_curve:Math.abs(U.ATHcurve- -1)>0||(U.ATHcurve=W.ath_curve),B!=0?U.athaa_sensitivity=W.ath_sensitivity:Math.abs(U.athaa_sensitivity- -1)>0||(U.athaa_sensitivity=W.ath_sensitivity),W.interch>0&&(B!=0?U.interChRatio=W.interch:Math.abs(U.interChRatio- -1)>0||(U.interChRatio=W.interch)),W.safejoint>0&&(U.exp_nspsytune=U.exp_nspsytune|W.safejoint),W.sfb21mod>0&&(U.exp_nspsytune=U.exp_nspsytune|W.sfb21mod<<20),B!=0?U.msfix=W.msfix:Math.abs(U.msfix- -1)>0||(U.msfix=W.msfix),B==0&&(U.VBR_q=be,U.VBR_q_frac=k)}var fe=[new ee(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new ee(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new ee(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new ee(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new ee(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new ee(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new ee(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new ee(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new ee(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new ee(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new ee(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new ee(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new ee(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new ee(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new ee(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new ee(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new ee(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function Te(U,be,B){var I=be,k=ce.nearestBitrateFullIndex(be);if(U.VBR=yr.vbr_abr,U.VBR_mean_bitrate_kbps=I,U.VBR_mean_bitrate_kbps=Math.min(U.VBR_mean_bitrate_kbps,320),U.VBR_mean_bitrate_kbps=Math.max(U.VBR_mean_bitrate_kbps,8),U.brate=U.VBR_mean_bitrate_kbps,U.VBR_mean_bitrate_kbps>320&&(U.disable_reservoir=!0),fe[k].safejoint>0&&(U.exp_nspsytune=U.exp_nspsytune|2),fe[k].sfscale>0&&(U.internal_flags.noise_shaping=2),Math.abs(fe[k].nsbass)>0){var i=int(fe[k].nsbass*4);i<0&&(i+=64),U.exp_nspsytune=U.exp_nspsytune|i<<2}return B!=0?U.quant_comp=fe[k].quant_comp:Math.abs(U.quant_comp- -1)>0||(U.quant_comp=fe[k].quant_comp),B!=0?U.quant_comp_short=fe[k].quant_comp_s:Math.abs(U.quant_comp_short- -1)>0||(U.quant_comp_short=fe[k].quant_comp_s),B!=0?U.msfix=fe[k].nsmsfix:Math.abs(U.msfix- -1)>0||(U.msfix=fe[k].nsmsfix),B!=0?U.internal_flags.nsPsy.attackthre=fe[k].st_lrm:Math.abs(U.internal_flags.nsPsy.attackthre- -1)>0||(U.internal_flags.nsPsy.attackthre=fe[k].st_lrm),B!=0?U.internal_flags.nsPsy.attackthre_s=fe[k].st_s:Math.abs(U.internal_flags.nsPsy.attackthre_s- -1)>0||(U.internal_flags.nsPsy.attackthre_s=fe[k].st_s),B!=0?U.scale=fe[k].scale:Math.abs(U.scale- -1)>0||(U.scale=fe[k].scale),B!=0?U.maskingadjust=fe[k].masking_adj:Math.abs(U.maskingadjust-0)>0||(U.maskingadjust=fe[k].masking_adj),fe[k].masking_adj>0?B!=0?U.maskingadjust_short=fe[k].masking_adj*.9:Math.abs(U.maskingadjust_short-0)>0||(U.maskingadjust_short=fe[k].masking_adj*.9):B!=0?U.maskingadjust_short=fe[k].masking_adj*1.1:Math.abs(U.maskingadjust_short-0)>0||(U.maskingadjust_short=fe[k].masking_adj*1.1),B!=0?U.ATHlower=-fe[k].ath_lower/10:Math.abs(-U.ATHlower*10-0)>0||(U.ATHlower=-fe[k].ath_lower/10),B!=0?U.ATHcurve=fe[k].ath_curve:Math.abs(U.ATHcurve- -1)>0||(U.ATHcurve=fe[k].ath_curve),B!=0?U.interChRatio=fe[k].interch:Math.abs(U.interChRatio- -1)>0||(U.interChRatio=fe[k].interch),be}this.apply_preset=function(U,be,B){switch(be){case Nt.R3MIX:{be=Nt.V3,U.VBR=yr.vbr_mtrh;break}case Nt.MEDIUM:{be=Nt.V4,U.VBR=yr.vbr_rh;break}case Nt.MEDIUM_FAST:{be=Nt.V4,U.VBR=yr.vbr_mtrh;break}case Nt.STANDARD:{be=Nt.V2,U.VBR=yr.vbr_rh;break}case Nt.STANDARD_FAST:{be=Nt.V2,U.VBR=yr.vbr_mtrh;break}case Nt.EXTREME:{be=Nt.V0,U.VBR=yr.vbr_rh;break}case Nt.EXTREME_FAST:{be=Nt.V0,U.VBR=yr.vbr_mtrh;break}case Nt.INSANE:return be=320,U.preset=be,Te(U,be,B),U.VBR=yr.vbr_off,be}switch(U.preset=be,be){case Nt.V9:return ne(U,9,B),be;case Nt.V8:return ne(U,8,B),be;case Nt.V7:return ne(U,7,B),be;case Nt.V6:return ne(U,6,B),be;case Nt.V5:return ne(U,5,B),be;case Nt.V4:return ne(U,4,B),be;case Nt.V3:return ne(U,3,B),be;case Nt.V2:return ne(U,2,B),be;case Nt.V1:return ne(U,1,B),be;case Nt.V0:return ne(U,0,B),be}return 8<=be&&be<=320?Te(U,be,B):(U.preset=0,be)};function Ie(U,be){var B=0;return 0>be&&(B=-1,be=0),9<be&&(B=-1,be=9),U.VBR_q=be,U.VBR_q_frac=0,B}}var gh=Rh;function Mh(){this.setModules=function(N,ee){}}var Th=Mh;function Bh(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var L0=Bh,Do=K.new_float,Ch=K.new_int;function Ih(){this.global_gain=0,this.sfb_count1=0,this.step=Ch(39),this.noise=Do(39),this.noise_log=Do(39)}var Oh=Ih,Wr=K.System,Xo=K.VbrMode,F0=K.Util,Ps=K.Arrays,oa=K.new_float,ca=K.assert;function Ph(){var N;this.rv=null;var ee;this.qupvt=null;var ce,te=new Th,xe;this.setModules=function(V,f,A,C){N=V,ee=f,this.rv=f,ce=A,this.qupvt=A,xe=C,te.setModules(ce,xe)},this.ms_convert=function(V,f){for(var A=0;A<576;++A){var C=V.tt[f][0].xr[A],O=V.tt[f][1].xr[A];V.tt[f][0].xr[A]=(C+O)*(F0.SQRT2*.5),V.tt[f][1].xr[A]=(C-O)*(F0.SQRT2*.5)}};function ne(V,f,A,C){C=0;for(var O=0;O<=A;++O){var F=Math.abs(V.xr[O]);C+=F,f[O]=Math.sqrt(F*Math.sqrt(F)),f[O]>V.xrpow_max&&(V.xrpow_max=f[O])}return C}this.init_xrpow=function(V,f,A){var C=0,O=0|f.max_nonzero_coeff;if(f.xrpow_max=0,Ps.fill(A,O,576,0),C=ne(f,A,O,C),C>1e-20){var F=0;V.substep_shaping&2&&(F=1);for(var l=0;l<f.psymax;l++)V.pseudohalf[l]=F;return!0}return Ps.fill(f.l3_enc,0,576,0),!1};function fe(V,f){var A=V.ATH,C=f.xr;if(f.block_type!=g.SHORT_TYPE)for(var O=!1,F=g.PSFB21-1;F>=0&&!O;F--){var l=V.scalefac_band.psfb21[F],S=V.scalefac_band.psfb21[F+1],p=ce.athAdjust(A.adjust,A.psfb21[F],A.floor);V.nsPsy.longfact[21]>1e-12&&(p*=V.nsPsy.longfact[21]);for(var h=S-1;h>=l;h--)if(Math.abs(C[h])<p)C[h]=0;else{O=!0;break}}else for(var b=0;b<3;b++)for(var O=!1,F=g.PSFB12-1;F>=0&&!O;F--){var l=V.scalefac_band.s[12]*3+(V.scalefac_band.s[13]-V.scalefac_band.s[12])*b+(V.scalefac_band.psfb12[F]-V.scalefac_band.psfb12[0]),S=l+(V.scalefac_band.psfb12[F+1]-V.scalefac_band.psfb12[F]),w=ce.athAdjust(A.adjust,A.psfb12[F],A.floor);V.nsPsy.shortfact[12]>1e-12&&(w*=V.nsPsy.shortfact[12]);for(var h=S-1;h>=l;h--)if(Math.abs(C[h])<w)C[h]=0;else{O=!0;break}}}this.init_outer_loop=function(V,f){f.part2_3_length=0,f.big_values=0,f.count1=0,f.global_gain=210,f.scalefac_compress=0,f.table_select[0]=0,f.table_select[1]=0,f.table_select[2]=0,f.subblock_gain[0]=0,f.subblock_gain[1]=0,f.subblock_gain[2]=0,f.subblock_gain[3]=0,f.region0_count=0,f.region1_count=0,f.preflag=0,f.scalefac_scale=0,f.count1table_select=0,f.part2_length=0,f.sfb_lmax=g.SBPSY_l,f.sfb_smin=g.SBPSY_s,f.psy_lmax=V.sfb21_extra?g.SBMAX_l:g.SBPSY_l,f.psymax=f.psy_lmax,f.sfbmax=f.sfb_lmax,f.sfbdivide=11;for(var A=0;A<g.SBMAX_l;A++)f.width[A]=V.scalefac_band.l[A+1]-V.scalefac_band.l[A],f.window[A]=3;if(f.block_type==g.SHORT_TYPE){var C=oa(576);f.sfb_smin=0,f.sfb_lmax=0,f.mixed_block_flag!=0&&(f.sfb_smin=3,f.sfb_lmax=V.mode_gr*2+4),f.psymax=f.sfb_lmax+3*((V.sfb21_extra?g.SBMAX_s:g.SBPSY_s)-f.sfb_smin),f.sfbmax=f.sfb_lmax+3*(g.SBPSY_s-f.sfb_smin),f.sfbdivide=f.sfbmax-18,f.psy_lmax=f.sfb_lmax;var O=V.scalefac_band.l[f.sfb_lmax];Wr.arraycopy(f.xr,0,C,0,576);for(var A=f.sfb_smin;A<g.SBMAX_s;A++)for(var F=V.scalefac_band.s[A],l=V.scalefac_band.s[A+1],S=0;S<3;S++)for(var p=F;p<l;p++)f.xr[O++]=C[3*p+S];for(var h=f.sfb_lmax,A=f.sfb_smin;A<g.SBMAX_s;A++)f.width[h]=f.width[h+1]=f.width[h+2]=V.scalefac_band.s[A+1]-V.scalefac_band.s[A],f.window[h]=0,f.window[h+1]=1,f.window[h+2]=2,h+=3}f.count1bits=0,f.sfb_partition_table=ce.nr_of_sfb_block[0][0],f.slen[0]=0,f.slen[1]=0,f.slen[2]=0,f.slen[3]=0,f.max_nonzero_coeff=575,Ps.fill(f.scalefac,0),fe(V,f)};function Te(V){this.ordinal=V}Te.BINSEARCH_NONE=new Te(0),Te.BINSEARCH_UP=new Te(1),Te.BINSEARCH_DOWN=new Te(2);function Ie(V,f,A,C,O){var F,l=V.CurrentStep[C],S=!1,p=V.OldValue[C],h=Te.BINSEARCH_NONE;for(f.global_gain=p,A-=f.part2_length;;){var b;if(F=xe.count_bits(V,O,f,null),l==1||F==A)break;F>A?(h==Te.BINSEARCH_DOWN&&(S=!0),S&&(l/=2),h=Te.BINSEARCH_UP,b=l):(h==Te.BINSEARCH_UP&&(S=!0),S&&(l/=2),h=Te.BINSEARCH_DOWN,b=-l),f.global_gain+=b,f.global_gain<0&&(f.global_gain=0,S=!0),f.global_gain>255&&(f.global_gain=255,S=!0)}for(ca(f.global_gain>=0),ca(f.global_gain<256);F>A&&f.global_gain<255;)f.global_gain++,F=xe.count_bits(V,O,f,null);return V.CurrentStep[C]=p-f.global_gain>=4?4:2,V.OldValue[C]=f.global_gain,f.part2_3_length=F,F}this.trancate_smallspectrums=function(V,f,A,C){var O=oa(ze.SFBMAX);if(!(!(V.substep_shaping&4)&&f.block_type==g.SHORT_TYPE||V.substep_shaping&128)){ce.calc_noise(f,A,O,new L0,null);for(var l=0;l<576;l++){var F=0;f.l3_enc[l]!=0&&(F=Math.abs(f.xr[l])),C[l]=F}var l=0,S=8;f.block_type==g.SHORT_TYPE&&(S=6);do{var p,h,b,w,u=f.width[S];if(l+=u,!(O[S]>=1)&&(Ps.sort(C,l-u,u),!Nr.EQ(C[l-1],0))){p=(1-O[S])*A[S],h=0,w=0;do{var _;for(b=1;w+b<u&&!Nr.NEQ(C[w+l-u],C[w+l+b-u]);b++);if(_=C[w+l-u]*C[w+l-u]*b,p<_){w!=0&&(h=C[w+l-u-1]);break}p-=_,w+=b}while(w<u);if(!Nr.EQ(h,0))do Math.abs(f.xr[l-u])<=h&&(f.l3_enc[l-u]=0);while(--u>0)}}while(++S<f.psymax);f.part2_3_length=xe.noquant_count_bits(V,f,null)}};function U(V){for(var f=0;f<V.sfbmax;f++)if(V.scalefac[f]+V.subblock_gain[V.window[f]]==0)return!1;return!0}function be(V){return F0.FAST_LOG10(.368+.632*V*V*V)}function B(V,f){for(var A=1e-37,C=0;C<f.psymax;C++)A+=be(V[C]);return Math.max(1e-20,A)}function I(V,f,A,C,O){var F;switch(V){default:case 9:{f.over_count>0?(F=A.over_SSD<=f.over_SSD,A.over_SSD==f.over_SSD&&(F=A.bits<f.bits)):F=A.max_noise<0&&A.max_noise*10+A.bits<=f.max_noise*10+f.bits;break}case 0:F=A.over_count<f.over_count||A.over_count==f.over_count&&A.over_noise<f.over_noise||A.over_count==f.over_count&&Nr.EQ(A.over_noise,f.over_noise)&&A.tot_noise<f.tot_noise;break;case 8:A.max_noise=B(O,C);case 1:F=A.max_noise<f.max_noise;break;case 2:F=A.tot_noise<f.tot_noise;break;case 3:F=A.tot_noise<f.tot_noise&&A.max_noise<f.max_noise;break;case 4:F=A.max_noise<=0&&f.max_noise>.2||A.max_noise<=0&&f.max_noise<0&&f.max_noise>A.max_noise-.2&&A.tot_noise<f.tot_noise||A.max_noise<=0&&f.max_noise>0&&f.max_noise>A.max_noise-.2&&A.tot_noise<f.tot_noise+f.over_noise||A.max_noise>0&&f.max_noise>-.05&&f.max_noise>A.max_noise-.1&&A.tot_noise+A.over_noise<f.tot_noise+f.over_noise||A.max_noise>0&&f.max_noise>-.1&&f.max_noise>A.max_noise-.15&&A.tot_noise+A.over_noise+A.over_noise<f.tot_noise+f.over_noise+f.over_noise;break;case 5:F=A.over_noise<f.over_noise||Nr.EQ(A.over_noise,f.over_noise)&&A.tot_noise<f.tot_noise;break;case 6:F=A.over_noise<f.over_noise||Nr.EQ(A.over_noise,f.over_noise)&&(A.max_noise<f.max_noise||Nr.EQ(A.max_noise,f.max_noise)&&A.tot_noise<=f.tot_noise);break;case 7:F=A.over_count<f.over_count||A.over_noise<f.over_noise;break}return f.over_count==0&&(F=F&&A.bits<f.bits),F}function k(V,f,A,C,O){var F=V.internal_flags,l;f.scalefac_scale==0?l=1.2968395546510096:l=1.6817928305074292;for(var S=0,p=0;p<f.sfbmax;p++)S<A[p]&&(S=A[p]);var h=F.noise_shaping_amp;switch(h==3&&(O?h=2:h=1),h){case 2:break;case 1:S>1?S=Math.pow(S,.5):S*=.95;break;case 0:default:S>1?S=1:S*=.95;break}for(var b=0,p=0;p<f.sfbmax;p++){var w=f.width[p],u;if(b+=w,!(A[p]<S)){if(F.substep_shaping&2&&(F.pseudohalf[p]=F.pseudohalf[p]==0?1:0,F.pseudohalf[p]==0&&F.noise_shaping_amp==2))return;for(f.scalefac[p]++,u=-w;u<0;u++)C[b+u]*=l,C[b+u]>f.xrpow_max&&(f.xrpow_max=C[b+u]);if(F.noise_shaping_amp==2)return}}}function i(V,f){for(var A=1.2968395546510096,C=0,O=0;O<V.sfbmax;O++){var F=V.width[O],l=V.scalefac[O];if(V.preflag!=0&&(l+=ce.pretab[O]),C+=F,l&1){l++;for(var S=-F;S<0;S++)f[C+S]*=A,f[C+S]>V.xrpow_max&&(V.xrpow_max=f[C+S])}V.scalefac[O]=l>>1}V.preflag=0,V.scalefac_scale=1}function G(V,f,A){var C,O=f.scalefac;for(C=0;C<f.sfb_lmax;C++)if(O[C]>=16)return!0;for(var F=0;F<3;F++){var l=0,S=0;for(C=f.sfb_lmax+F;C<f.sfbdivide;C+=3)l<O[C]&&(l=O[C]);for(;C<f.sfbmax;C+=3)S<O[C]&&(S=O[C]);if(!(l<16&&S<8)){if(f.subblock_gain[F]>=7)return!0;f.subblock_gain[F]++;var p=V.scalefac_band.l[f.sfb_lmax];for(C=f.sfb_lmax+F;C<f.sfbmax;C+=3){var h,b=f.width[C],w=O[C];if(w=w-(4>>f.scalefac_scale),w>=0){O[C]=w,p+=b*3;continue}O[C]=0;{var u=210+(w<<f.scalefac_scale+1);h=ce.IPOW20(u)}p+=b*(F+1);for(var _=-b;_<0;_++)A[p+_]*=h,A[p+_]>f.xrpow_max&&(f.xrpow_max=A[p+_]);p+=b*(3-F-1)}{var h=ce.IPOW20(202);p+=f.width[C]*(F+1);for(var _=-f.width[C];_<0;_++)A[p+_]*=h,A[p+_]>f.xrpow_max&&(f.xrpow_max=A[p+_])}}}return!1}function W(V,f,A,C,O){var F=V.internal_flags;k(V,f,A,C,O);var l=U(f);return l?!1:(F.mode_gr==2?l=xe.scale_bitcount(f):l=xe.scale_bitcount_lsf(F,f),l?(F.noise_shaping>1&&(Ps.fill(F.pseudohalf,0),f.scalefac_scale==0?(i(f,C),l=!1):f.block_type==g.SHORT_TYPE&&F.subblock_gain>0&&(l=G(F,f,C)||U(f))),l||(F.mode_gr==2?l=xe.scale_bitcount(f):l=xe.scale_bitcount_lsf(F,f)),!l):!0)}this.outer_loop=function(V,f,A,C,O,F){var l=V.internal_flags,S=new Et,p=oa(576),h=oa(ze.SFBMAX),b=new L0,w,u=new Oh,_=9999999,m=!1,P=!1,ae=0;if(Ie(l,f,F,O,C),l.noise_shaping==0)return 100;ce.calc_noise(f,A,h,b,u),b.bits=f.part2_3_length,S.assign(f);var j=0;for(Wr.arraycopy(C,0,p,0,576);!m;){do{var Q=new L0,o,v=255;if(l.substep_shaping&2?o=20:o=3,l.sfb21_extra&&(h[S.sfbmax]>1||S.block_type==g.SHORT_TYPE&&(h[S.sfbmax+1]>1||h[S.sfbmax+2]>1))||!W(V,S,h,C,P))break;S.scalefac_scale!=0&&(v=254);var oe=F-S.part2_length;if(oe<=0)break;for(;(S.part2_3_length=xe.count_bits(l,C,S,u))>oe&&S.global_gain<=v;)S.global_gain++;if(S.global_gain>v)break;if(b.over_count==0){for(;(S.part2_3_length=xe.count_bits(l,C,S,u))>_&&S.global_gain<=v;)S.global_gain++;if(S.global_gain>v)break}if(ce.calc_noise(S,A,h,Q,u),Q.bits=S.part2_3_length,f.block_type!=g.SHORT_TYPE?w=V.quant_comp:w=V.quant_comp_short,w=I(w,b,Q,S,h)?1:0,w!=0)_=f.part2_3_length,b=Q,f.assign(S),j=0,Wr.arraycopy(C,0,p,0,576);else if(l.full_outer_loop==0&&(++j>o&&b.over_count==0||l.noise_shaping_amp==3&&P&&j>30||l.noise_shaping_amp==3&&P&&S.global_gain-ae>15))break}while(S.global_gain+S.scalefac_scale<255);l.noise_shaping_amp==3?P?m=!0:(S.assign(f),Wr.arraycopy(p,0,C,0,576),j=0,ae=S.global_gain,P=!0):m=!0}return ca(f.global_gain+f.scalefac_scale<=255),V.VBR==Xo.vbr_rh||V.VBR==Xo.vbr_mtrh?Wr.arraycopy(p,0,C,0,576):l.substep_shaping&1&&trancate_smallspectrums(l,f,A,C),b.over_count},this.iteration_finish_one=function(V,f,A){var C=V.l3_side,O=C.tt[f][A];xe.best_scalefac_store(V,f,A,C),V.use_best_huffman==1&&xe.best_huffman_divide(V,O),ee.ResvAdjust(V,O)},this.VBR_encode_granule=function(V,f,A,C,O,F,l){var S=V.internal_flags,p=new Et,h=oa(576),b=l,w=l+1,u=(l+F)/2,_,m,P=0,ae=S.sfb21_extra;ca(b<=LameInternalFlags.MAX_BITS_PER_CHANNEL),Ps.fill(p.l3_enc,0);do u>b-42?S.sfb21_extra=!1:S.sfb21_extra=ae,m=outer_loop(V,f,A,C,O,u),m<=0?(P=1,w=f.part2_3_length,p.assign(f),Wr.arraycopy(C,0,h,0,576),l=w-32,_=l-F,u=(l+F)/2):(F=u+32,_=l-F,u=(l+F)/2,P!=0&&(P=2,f.assign(p),Wr.arraycopy(h,0,C,0,576)));while(_>12);S.sfb21_extra=ae,P==2&&Wr.arraycopy(p.l3_enc,0,f.l3_enc,0,576),ca(f.part2_3_length<=b)},this.get_framebits=function(V,f){var A=V.internal_flags;A.bitrate_index=A.VBR_min_bitrate;var C=N.getframebits(V);A.bitrate_index=1,C=N.getframebits(V);for(var O=1;O<=A.VBR_max_bitrate;O++){A.bitrate_index=O;var F=new MeanBits(C);f[O]=ee.ResvFrameBegin(V,F),C=F.bits}},this.VBR_old_prepare=function(V,f,A,C,O,F,l,S,p){var h=V.internal_flags,b,w=0,u=1,_=0;h.bitrate_index=h.VBR_max_bitrate;var m=ee.ResvFrameBegin(V,new MeanBits(0))/h.mode_gr;get_framebits(V,F);for(var P=0;P<h.mode_gr;P++){var ae=ce.on_pe(V,f,S[P],m,P,0);h.mode_ext==g.MPG_MD_MS_LR&&(ms_convert(h.l3_side,P),ce.reduce_side(S[P],A[P],m,ae));for(var j=0;j<h.channels_out;++j){var Q=h.l3_side.tt[P][j];Q.block_type!=g.SHORT_TYPE?(w=1.28/(1+Math.exp(3.5-f[P][j]/300))-.05,b=h.PSY.mask_adjust-w):(w=2.56/(1+Math.exp(3.5-f[P][j]/300))-.14,b=h.PSY.mask_adjust_short-w),h.masking_lower=Math.pow(10,b*.1),init_outer_loop(h,Q),p[P][j]=ce.calc_xmin(V,C[P][j],Q,O[P][j]),p[P][j]!=0&&(u=0),l[P][j]=126,_+=S[P][j]}}for(var P=0;P<h.mode_gr;P++)for(var j=0;j<h.channels_out;j++)_>F[h.VBR_max_bitrate]&&(S[P][j]*=F[h.VBR_max_bitrate],S[P][j]/=_),l[P][j]>S[P][j]&&(l[P][j]=S[P][j]);return u},this.bitpressure_strategy=function(V,f,A,C){for(var O=0;O<V.mode_gr;O++)for(var F=0;F<V.channels_out;F++){for(var l=V.l3_side.tt[O][F],S=f[O][F],p=0,h=0;h<l.psy_lmax;h++)S[p++]*=1+.029*h*h/g.SBMAX_l/g.SBMAX_l;if(l.block_type==g.SHORT_TYPE)for(var h=l.sfb_smin;h<g.SBMAX_s;h++)S[p++]*=1+.029*h*h/g.SBMAX_s/g.SBMAX_s,S[p++]*=1+.029*h*h/g.SBMAX_s/g.SBMAX_s,S[p++]*=1+.029*h*h/g.SBMAX_s/g.SBMAX_s;C[O][F]=0|Math.max(A[O][F],.9*C[O][F])}},this.VBR_new_prepare=function(V,f,A,C,O,F){var l=V.internal_flags,S=1,p=0,h=0,b;if(V.free_format){l.bitrate_index=0;var w=new MeanBits(p);b=ee.ResvFrameBegin(V,w),p=w.bits,O[0]=b}else{l.bitrate_index=l.VBR_max_bitrate;var w=new MeanBits(p);ee.ResvFrameBegin(V,w),p=w.bits,get_framebits(V,O),b=O[l.VBR_max_bitrate]}for(var u=0;u<l.mode_gr;u++){ce.on_pe(V,f,F[u],p,u,0),l.mode_ext==g.MPG_MD_MS_LR&&ms_convert(l.l3_side,u);for(var _=0;_<l.channels_out;++_){var m=l.l3_side.tt[u][_];l.masking_lower=Math.pow(10,l.PSY.mask_adjust*.1),init_outer_loop(l,m),ce.calc_xmin(V,A[u][_],m,C[u][_])!=0&&(S=0),h+=F[u][_]}}for(var u=0;u<l.mode_gr;u++)for(var _=0;_<l.channels_out;_++)h>b&&(F[u][_]*=b,F[u][_]/=h);return S},this.calc_target_bits=function(V,f,A,C,O,F){var l=V.internal_flags,S=l.l3_side,p,h,b,w,u=0;l.bitrate_index=l.VBR_max_bitrate;var _=new MeanBits(u);for(F[0]=ee.ResvFrameBegin(V,_),u=_.bits,l.bitrate_index=1,u=N.getframebits(V)-l.sideinfo_len*8,O[0]=u/(l.mode_gr*l.channels_out),u=V.VBR_mean_bitrate_kbps*V.framesize*1e3,l.substep_shaping&1&&(u*=1.09),u/=V.out_samplerate,u-=l.sideinfo_len*8,u/=l.mode_gr*l.channels_out,p=.93+.07*(11-V.compression_ratio)/(11-5.5),p<.9&&(p=.9),p>1&&(p=1),h=0;h<l.mode_gr;h++){var m=0;for(b=0;b<l.channels_out;b++){if(C[h][b]=int(p*u),f[h][b]>700){var P=int((f[h][b]-700)/1.4),ae=S.tt[h][b];C[h][b]=int(p*u),ae.block_type==g.SHORT_TYPE&&P<u/2&&(P=u/2),P>u*3/2?P=u*3/2:P<0&&(P=0),C[h][b]+=P}C[h][b]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(C[h][b]=LameInternalFlags.MAX_BITS_PER_CHANNEL),m+=C[h][b]}if(m>LameInternalFlags.MAX_BITS_PER_GRANULE)for(b=0;b<l.channels_out;++b)C[h][b]*=LameInternalFlags.MAX_BITS_PER_GRANULE,C[h][b]/=m}if(l.mode_ext==g.MPG_MD_MS_LR)for(h=0;h<l.mode_gr;h++)ce.reduce_side(C[h],A[h],u*l.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(w=0,h=0;h<l.mode_gr;h++)for(b=0;b<l.channels_out;b++)C[h][b]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(C[h][b]=LameInternalFlags.MAX_BITS_PER_CHANNEL),w+=C[h][b];if(w>F[0])for(h=0;h<l.mode_gr;h++)for(b=0;b<l.channels_out;b++)C[h][b]*=F[0],C[h][b]/=w}}var Nh=Ph,jo=K.assert;function Lh(){var N;this.setModules=function(ee){N=ee},this.ResvFrameBegin=function(ee,ce){var te=ee.internal_flags,xe,ne=te.l3_side,fe=N.getframebits(ee);ce.bits=(fe-te.sideinfo_len*8)/te.mode_gr;var Te=8*256*te.mode_gr-8;ee.brate>320?xe=8*int(ee.brate*1e3/(ee.out_samplerate/1152)/8+.5):(xe=8*1440,ee.strict_ISO&&(xe=8*int(32e4/(ee.out_samplerate/1152)/8+.5))),te.ResvMax=xe-fe,te.ResvMax>Te&&(te.ResvMax=Te),(te.ResvMax<0||ee.disable_reservoir)&&(te.ResvMax=0);var Ie=ce.bits*te.mode_gr+Math.min(te.ResvSize,te.ResvMax);return Ie>xe&&(Ie=xe),jo(te.ResvMax%8==0),jo(te.ResvMax>=0),ne.resvDrain_pre=0,te.pinfo!=null&&(te.pinfo.mean_bits=ce.bits/2,te.pinfo.resvsize=te.ResvSize),Ie},this.ResvMaxBits=function(ee,ce,te,xe){var ne=ee.internal_flags,fe,Te=ne.ResvSize,Ie=ne.ResvMax;xe!=0&&(Te+=ce),ne.substep_shaping&1&&(Ie*=.9),te.bits=ce,Te*10>Ie*9?(fe=Te-Ie*9/10,te.bits+=fe,ne.substep_shaping|=128):(fe=0,ne.substep_shaping&=127,!ee.disable_reservoir&&!(ne.substep_shaping&1)&&(te.bits-=.1*ce));var U=Te<ne.ResvMax*6/10?Te:ne.ResvMax*6/10;return U-=fe,U<0&&(U=0),U},this.ResvAdjust=function(ee,ce){ee.ResvSize-=ce.part2_3_length+ce.part2_length},this.ResvFrameEnd=function(ee,ce){var te,xe=ee.l3_side;ee.ResvSize+=ce*ee.mode_gr;var ne=0;xe.resvDrain_post=0,xe.resvDrain_pre=0,(te=ee.ResvSize%8)!=0&&(ne+=te),te=ee.ResvSize-ne-ee.ResvMax,te>0&&(ne+=te);{var fe=Math.min(xe.main_data_begin*8,ne)/8;xe.resvDrain_pre+=8*fe,ne-=8*fe,ee.ResvSize-=8*fe,xe.main_data_begin-=fe}xe.resvDrain_post+=ne,ee.ResvSize-=ne}}var Fh=Lh;function kh(){var N="http://www.mp3dev.org/",ee=3,ce=98,te=4,xe=0,ne=93;this.getLameVersion=function(){return ee+"."+ce+"."+te},this.getLameShortVersion=function(){return ee+"."+ce+"."+te},this.getLameVeryShortVersion=function(){return"LAME"+ee+"."+ce+"r"},this.getPsyVersion=function(){return xe+"."+ne},this.getLameUrl=function(){return N},this.getLameOsBitness=function(){return"32bits"}}var Hh=kh,$h=K.System,k0=K.VbrMode,qo=K.ShortBlock,Vh=K.Arrays,ii=K.new_byte,Dh=K.assert;ua.NUMTOCENTRIES=100,ua.MAXFRAMESIZE=2880;function ua(){var N,ee,ce;this.setModules=function(u,_,m){N=u,ee=_,ce=m};var te=1,xe=2,ne=4,fe=8,Te=ua.NUMTOCENTRIES,Ie=ua.MAXFRAMESIZE,U=Te+4+4+4+4+4,be=U+9+1+1+8+1+1+3+1+1+2+4+2+2,B=128,I=64,k=32,i=null,G="Xing",W="Info",V=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function f(u,_){if(u.nVbrNumFrames++,u.sum+=_,u.seen++,!(u.seen<u.want)&&(u.pos<u.size&&(u.bag[u.pos]=u.sum,u.pos++,u.seen=0),u.pos==u.size)){for(var m=1;m<u.size;m+=2)u.bag[m/2]=u.bag[m];u.want*=2,u.pos/=2}}function A(u,_){if(!(u.pos<=0))for(var m=1;m<Te;++m){var P=m/Te,ae,j,Q=0|Math.floor(P*u.pos);Q>u.pos-1&&(Q=u.pos-1),ae=u.bag[Q],j=u.sum;var o=0|256*ae/j;o>255&&(o=255),_[m]=255&o}}this.addVbrFrame=function(u){var _=u.internal_flags,m=Tables.bitrate_table[u.version][_.bitrate_index];Dh(_.VBR_seek_table.bag!=null),f(_.VBR_seek_table,m)};function C(u,_){var m=u[_+0]&255;return m<<=8,m|=u[_+1]&255,m<<=8,m|=u[_+2]&255,m<<=8,m|=u[_+3]&255,m}function O(u,_,m){u[_+0]=255&(m>>24&255),u[_+1]=255&(m>>16&255),u[_+2]=255&(m>>8&255),u[_+3]=255&(m&255)}function F(u,_,m){u[_+0]=255&(m>>8&255),u[_+1]=255&(m&255)}function l(u,_){return new String(u,_,G.length(),i).equals(G)||new String(u,_,W.length(),i).equals(W)}function S(u,_,m){return 255&(u<<_|m&~(-1<<_))}function p(u,_){var m=u.internal_flags;_[0]=S(_[0],8,255),_[1]=S(_[1],3,7),_[1]=S(_[1],1,u.out_samplerate<16e3?0:1),_[1]=S(_[1],1,u.version),_[1]=S(_[1],2,1),_[1]=S(_[1],1,u.error_protection?0:1),_[2]=S(_[2],4,m.bitrate_index),_[2]=S(_[2],2,m.samplerate_index),_[2]=S(_[2],1,0),_[2]=S(_[2],1,u.extension),_[3]=S(_[3],2,u.mode.ordinal()),_[3]=S(_[3],2,m.mode_ext),_[3]=S(_[3],1,u.copyright),_[3]=S(_[3],1,u.original),_[3]=S(_[3],2,u.emphasis),_[0]=255;var P=255&(_[1]&241),ae;u.version==1?ae=B:u.out_samplerate<16e3?ae=k:ae=I,u.VBR==k0.vbr_off&&(ae=u.brate);var j;u.free_format?j=0:j=255&16*N.BitrateIndex(ae,u.version,u.out_samplerate),u.version==1?(_[1]=255&(P|10),P=255&(_[2]&13),_[2]=255&(j|P)):(_[1]=255&(P|2),P=255&(_[2]&13),_[2]=255&(j|P))}this.getVbrTag=function(u){var _=new VBRTagData,m=0;_.flags=0;var P=u[m+1]>>3&1,ae=u[m+2]>>2&3,j=u[m+3]>>6&3,Q=u[m+2]>>4&15;if(Q=Tables.bitrate_table[P][Q],u[m+1]>>4==14?_.samprate=Tables.samplerate_table[2][ae]:_.samprate=Tables.samplerate_table[P][ae],P!=0?j!=3?m+=36:m+=21:j!=3?m+=21:m+=13,!l(u,m))return null;m+=4,_.hId=P;var o=_.flags=C(u,m);if(m+=4,o&te&&(_.frames=C(u,m),m+=4),o&xe&&(_.bytes=C(u,m),m+=4),o&ne){if(_.toc!=null)for(var v=0;v<Te;v++)_.toc[v]=u[m+v];m+=Te}_.vbrScale=-1,o&fe&&(_.vbrScale=C(u,m),m+=4),_.headersize=(P+1)*72e3*Q/_.samprate,m+=21;var oe=u[m+0]<<4;oe+=u[m+1]>>4;var _e=(u[m+1]&15)<<8;return _e+=u[m+2]&255,(oe<0||oe>3e3)&&(oe=-1),(_e<0||_e>3e3)&&(_e=-1),_.encDelay=oe,_.encPadding=_e,_},this.InitVbrTag=function(u){var _=u.internal_flags,m;u.version==1?m=B:u.out_samplerate<16e3?m=k:m=I,u.VBR==k0.vbr_off&&(m=u.brate);var P=(u.version+1)*72e3*m/u.out_samplerate,ae=_.sideinfo_len+be;if(_.VBR_seek_table.TotalFrameSize=P,P<ae||P>Ie){u.bWriteVbrTag=!1;return}_.VBR_seek_table.nVbrNumFrames=0,_.VBR_seek_table.nBytesWritten=0,_.VBR_seek_table.sum=0,_.VBR_seek_table.seen=0,_.VBR_seek_table.want=1,_.VBR_seek_table.pos=0,_.VBR_seek_table.bag==null&&(_.VBR_seek_table.bag=new int[400],_.VBR_seek_table.size=400);var j=ii(Ie);p(u,j);for(var Q=_.VBR_seek_table.TotalFrameSize,o=0;o<Q;++o)ee.add_dummy_byte(u,j[o]&255,1)};function h(u,_){var m=_^u;return _=_>>8^V[m&255],_}this.updateMusicCRC=function(u,_,m,P){for(var ae=0;ae<P;++ae)u[0]=h(_[m+ae],u[0])};function b(u,_,m,P,ae){var j=u.internal_flags,Q=0,o=u.encoder_delay,v=u.encoder_padding,oe=100-10*u.VBR_q-u.quality,_e=ce.getLameVeryShortVersion(),Be,ke=0,Oe,Le=[1,5,3,2,4,0,3],it=0|(u.lowpassfreq/100+.5>255?255:u.lowpassfreq/100+.5),Ke=0,Ne=0,Mt=0,ln=u.internal_flags.noise_shaping,wt=0,jt=0,qt=0,Jt=0,dn=0,wr=(u.exp_nspsytune&1)!=0,Jn=(u.exp_nspsytune&2)!=0,Nn=!1,ar=!1,vs=u.internal_flags.nogap_total,Gr=u.internal_flags.nogap_current,Dn=u.ATHtype,ps=0,Lr;switch(u.VBR){case vbr_abr:Lr=u.VBR_mean_bitrate_kbps;break;case vbr_off:Lr=u.brate;break;default:Lr=u.VBR_min_bitrate_kbps}switch(u.VBR.ordinal()<Le.length?Be=Le[u.VBR.ordinal()]:Be=0,Oe=16*ke+Be,j.findReplayGain&&(j.RadioGain>510&&(j.RadioGain=510),j.RadioGain<-510&&(j.RadioGain=-510),Ne=8192,Ne|=3072,j.RadioGain>=0?Ne|=j.RadioGain:(Ne|=512,Ne|=-j.RadioGain)),j.findPeakSample&&(Ke=Math.abs(0|j.PeakSample/32767*Math.pow(2,23)+.5)),vs!=-1&&(Gr>0&&(ar=!0),Gr<vs-1&&(Nn=!0)),ps=Dn+((wr?1:0)<<4)+((Jn?1:0)<<5)+((Nn?1:0)<<6)+((ar?1:0)<<7),oe<0&&(oe=0),u.mode){case MONO:wt=0;break;case STEREO:wt=1;break;case DUAL_CHANNEL:wt=2;break;case JOINT_STEREO:u.force_ms?wt=4:wt=3;break;case NOT_SET:default:wt=7;break}u.in_samplerate<=32e3?qt=0:u.in_samplerate==48e3?qt=2:u.in_samplerate>48e3?qt=3:qt=1,(u.short_blocks==qo.short_block_forced||u.short_blocks==qo.short_block_dispensed||u.lowpassfreq==-1&&u.highpassfreq==-1||u.scale_left<u.scale_right||u.scale_left>u.scale_right||u.disable_reservoir&&u.brate<320||u.noATH||u.ATHonly||Dn==0||u.in_samplerate<=32e3)&&(jt=1),Jt=ln+(wt<<2)+(jt<<5)+(qt<<6),dn=j.nMusicCRC,O(m,P+Q,oe),Q+=4;for(var Xn=0;Xn<9;Xn++)m[P+Q+Xn]=255&_e.charAt(Xn);Q+=9,m[P+Q]=255&Oe,Q++,m[P+Q]=255&it,Q++,O(m,P+Q,Ke),Q+=4,F(m,P+Q,Ne),Q+=2,F(m,P+Q,Mt),Q+=2,m[P+Q]=255&ps,Q++,Lr>=255?m[P+Q]=255:m[P+Q]=255&Lr,Q++,m[P+Q]=255&o>>4,m[P+Q+1]=255&(o<<4)+(v>>8),m[P+Q+2]=255&v,Q+=3,m[P+Q]=255&Jt,Q++,m[P+Q++]=0,F(m,P+Q,u.preset),Q+=2,O(m,P+Q,_),Q+=4,F(m,P+Q,dn),Q+=2;for(var Ns=0;Ns<Q;Ns++)ae=h(m[P+Ns],ae);return F(m,P+Q,ae),Q+=2,Q}function w(u){u.seek(0);var _=ii(10);u.readFully(_);var m;return new String(_,"ISO-8859-1").startsWith("ID3")?m=0:m=((_[6]&127)<<21|(_[7]&127)<<14|(_[8]&127)<<7|_[9]&127)+_.length,m}this.getLameTagFrame=function(u,_){var m=u.internal_flags;if(!u.bWriteVbrTag||m.Class_ID!=Nt.LAME_ID||m.VBR_seek_table.pos<=0)return 0;if(_.length<m.VBR_seek_table.TotalFrameSize)return m.VBR_seek_table.TotalFrameSize;Vh.fill(_,0,m.VBR_seek_table.TotalFrameSize,0),p(u,_);var P=ii(Te);if(u.free_format)for(var ae=1;ae<Te;++ae)P[ae]=255&255*ae/100;else A(m.VBR_seek_table,P);var j=m.sideinfo_len;u.error_protection&&(j-=2),u.VBR==k0.vbr_off?(_[j++]=255&W.charAt(0),_[j++]=255&W.charAt(1),_[j++]=255&W.charAt(2),_[j++]=255&W.charAt(3)):(_[j++]=255&G.charAt(0),_[j++]=255&G.charAt(1),_[j++]=255&G.charAt(2),_[j++]=255&G.charAt(3)),O(_,j,te+xe+ne+fe),j+=4,O(_,j,m.VBR_seek_table.nVbrNumFrames),j+=4;var Q=m.VBR_seek_table.nBytesWritten+m.VBR_seek_table.TotalFrameSize;O(_,j,0|Q),j+=4,$h.arraycopy(P,0,_,j,P.length),j+=P.length,u.error_protection&&ee.CRC_writeheader(m,_);for(var o=0,ae=0;ae<j;ae++)o=h(_[ae],o);return j+=b(u,Q,_,j,o),m.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(u,_){var m=u.internal_flags;if(m.VBR_seek_table.pos<=0||(_.seek(_.length()),_.length()==0))return-1;var P=w(_);_.seek(P);var ae=ii(Ie),j=getLameTagFrame(u,ae);return j>ae.length?-1:(j<1||_.write(ae,0,j),0)}}var Xh=ua,Uo=K.new_byte,jh=K.assert,Nt=Eh,qh=gh,fa=Mn,Uh=Ur,Yh=Nh,Kh=P0,Wh=Fh,an=Ve,Nr=Yr;function Gh(){this.setModules=function(N,ee){}}function Qh(){this.setModules=function(N,ee,ce){}}function zh(){}function Zh(){this.setModules=function(N,ee){}}function Jh(N,ee,ce){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),N=1,ee=44100,ce=128);var te=new Nt,xe=new Gh,ne=new fa,fe=new Nr,Te=new qh,Ie=new Uh,U=new Yh,be=new Xh,B=new Hh,I=new Zh,k=new Wh,i=new Kh,G=new Qh,W=new zh;te.setModules(ne,fe,Te,Ie,U,be,B,I,W),fe.setModules(ne,W,B,be),I.setModules(fe,B),Te.setModules(te),U.setModules(fe,k,Ie,i),Ie.setModules(i,k,te.enc.psy),k.setModules(fe),i.setModules(Ie),be.setModules(te,fe,B),xe.setModules(G,W),G.setModules(B,I,Te);var V=te.lame_init();V.num_channels=N,V.in_samplerate=ee,V.brate=ce,V.mode=an.STEREO,V.quality=3,V.bWriteVbrTag=!1,V.disable_reservoir=!0,V.write_id3tag_automatic=!1,te.lame_init_params(V);var f=1152,A=0|1.25*f+7200,C=Uo(A);this.encodeBuffer=function(O,F){N==1&&(F=O),jh(O.length==F.length),O.length>f&&(f=O.length,A=0|1.25*f+7200,C=Uo(A));var l=te.lame_encode_buffer(V,O,F,O.length,C,0,A);return new Int8Array(C.subarray(0,l))},this.flush=function(){var O=te.lame_encode_flush(V,C,0,A);return new Int8Array(C.subarray(0,O))}}function li(N){return N.charCodeAt(0)<<24|N.charCodeAt(1)<<16|N.charCodeAt(2)<<8|N.charCodeAt(3)}li("RIFF"),li("WAVE"),li("fmt "),li("data");var e_=Jh,Yo=function(N,ee){if(!(N instanceof ee))throw new TypeError("Cannot call a class as a function")},Ko=function(){function N(ee,ce){for(var te=0;te<ce.length;te++){var xe=ce[te];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty(ee,xe.key,xe)}}return function(ee,ce,te){return ce&&N(ee.prototype,ce),te&&N(ee,te),ee}}(),t_=function(){function N(ee){Yo(this,N),this.config={sampleRate:44100,bitRate:128},Object.assign(this.config,ee),this.mp3Encoder=new e_(1,this.config.sampleRate,this.config.bitRate),this.maxSamples=1152,this.samplesMono=null,this.clearBuffer()}return Ko(N,[{key:"clearBuffer",value:function(){this.dataBuffer=[]}},{key:"appendToBuffer",value:function(ce){this.dataBuffer.push(new Int8Array(ce))}},{key:"floatTo16BitPCM",value:function(ce,te){for(var xe=0;xe<ce.length;xe++){var ne=Math.max(-1,Math.min(1,ce[xe]));te[xe]=ne<0?ne*32768:ne*32767}}},{key:"convertBuffer",value:function(ce){var te=new Float32Array(ce),xe=new Int16Array(ce.length);return this.floatTo16BitPCM(te,xe),xe}},{key:"encode",value:function(ce){this.samplesMono=this.convertBuffer(ce);for(var te=this.samplesMono.length,xe=0;te>=0;xe+=this.maxSamples){var ne=this.samplesMono.subarray(xe,xe+this.maxSamples),fe=this.mp3Encoder.encodeBuffer(ne);this.appendToBuffer(fe),te-=this.maxSamples}}},{key:"finish",value:function(){return this.appendToBuffer(this.mp3Encoder.flush()),this.dataBuffer}}]),N}(),n_=function(){function N(ee){Yo(this,N),this.config={bitRate:128,startRecordingAt:300,deviceId:null},this.activeStream=null,this.context=null,this.microphone=null,this.processor=null,this.startTime=0,Object.assign(this.config,ee)}return Ko(N,[{key:"addMicrophoneListener",value:function(ce){var te=this;this.activeStream=ce,this.timerToStart=setTimeout(function(){delete te.timerToStart},this.config.startRecordingAt),this.microphone=this.context.createMediaStreamSource(ce),this.processor=this.context.createScriptProcessor(0,1,1),this.processor.onaudioprocess=function(xe){te.timerToStart||te.lameEncoder.encode(xe.inputBuffer.getChannelData(0))},this.microphone.connect(this.processor),this.processor.connect(this.context.destination)}},{key:"stop",value:function(){return this.processor&&this.microphone&&(this.microphone.disconnect(),this.processor.disconnect(),this.context&&this.context.state!=="closed"&&this.context.close(),this.processor.onaudioprocess=null,this.activeStream.getAudioTracks().forEach(function(ce){return ce.stop()})),this}},{key:"start",value:function(){var ce=this,te=window.AudioContext||window.webkitAudioContext;this.context=new te,this.config.sampleRate=this.context.sampleRate,this.lameEncoder=new t_(this.config);var xe=this.config.deviceId?{deviceId:{exact:this.config.deviceId}}:!0;return new Promise(function(ne,fe){navigator.mediaDevices.getUserMedia({audio:xe}).then(function(Te){ce.addMicrophoneListener(Te),ne(Te)}).catch(function(Te){fe(Te)})})}},{key:"getMp3",value:function(){var ce=this,te=this.lameEncoder.finish();return new Promise(function(xe,ne){te.length===0?ne(new Error("No buffer to send")):(xe([te,new Blob(te,{type:"audio/mp3"})]),ce.lameEncoder.clearBuffer())})}}]),N}();return n_})})(ef);var M4=ef.exports;const T4=g4(M4),qs="4.68.4";let J1=!1,ka,tf,nf,kl,rf,sf,af,lf,of;function B4(e,t={auto:!1}){if(J1)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(ka)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${ka}'\``);J1=t.auto,ka=e.kind,tf=e.fetch,nf=e.FormData,kl=e.File,rf=e.ReadableStream,sf=e.getMultipartRequestOptions,af=e.getDefaultAgent,lf=e.fileFromPath,of=e.isFsReadStream}class C4{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function I4({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,s,a;try{n=fetch,r=Request,s=Response,a=Headers}catch(c){throw new Error(`this environment is missing the following Web Fetch API type: ${c.message}. ${t}`)}return{kind:"web",fetch:n,Request:r,Response:s,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(c,d)=>({...d,body:new C4(c)}),getDefaultAgent:c=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:c=>!1}}ka||B4(I4(),{auto:!0});class Cs{constructor(){this.buffer=[],this.trailingCR=!1}decode(t){let n=this.decodeText(t);if(this.trailingCR&&(n="\r"+n,this.trailingCR=!1),n.endsWith("\r")&&(this.trailingCR=!0,n=n.slice(0,-1)),!n)return[];const r=Cs.NEWLINE_CHARS.has(n[n.length-1]||"");let s=n.split(Cs.NEWLINE_REGEXP);return r&&s.pop(),s.length===1&&!r?(this.buffer.push(s[0]),[]):(this.buffer.length>0&&(s=[this.buffer.join("")+s[0],...s.slice(1)],this.buffer=[]),r||(this.buffer=[s.pop()||""]),s)}decodeText(t){if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new At(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new At(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new At("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const t=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,t}}Cs.NEWLINE_CHARS=new Set([`
`,"\r"]);Cs.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class Br{constructor(t,n){this.iterator=t,this.controller=n}static fromSSEResponse(t,n){let r=!1;async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const c of O4(t,n))if(!a){if(c.data.startsWith("[DONE]")){a=!0;continue}if(c.event===null){let d;try{d=JSON.parse(c.data)}catch(y){throw console.error("Could not parse message into JSON:",c.data),console.error("From chunk:",c.raw),y}if(d&&d.error)throw new wn(void 0,d.error,void 0,void 0);yield d}else{let d;try{d=JSON.parse(c.data)}catch(y){throw console.error("Could not parse message into JSON:",c.data),console.error("From chunk:",c.raw),y}if(c.event=="error")throw new wn(void 0,d.error,d.message,void 0);yield{event:c.event,data:d}}}a=!0}catch(c){if(c instanceof Error&&c.name==="AbortError")return;throw c}finally{a||n.abort()}}return new Br(s,n)}static fromReadableStream(t,n){let r=!1;async function*s(){const c=new Cs,d=cf(t);for await(const y of d)for(const R of c.decode(y))yield R;for(const y of c.flush())yield y}async function*a(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const d of s())c||d&&(yield JSON.parse(d));c=!0}catch(d){if(d instanceof Error&&d.name==="AbortError")return;throw d}finally{c||n.abort()}}return new Br(a,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const c=r.next();t.push(c),n.push(c)}return a.shift()}});return[new Br(()=>s(t),this.controller),new Br(()=>s(n),this.controller)]}toReadableStream(){const t=this;let n;const r=new TextEncoder;return new rf({async start(){n=t[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:c}=await n.next();if(c)return s.close();const d=r.encode(JSON.stringify(a)+`
`);s.enqueue(d)}catch(a){s.error(a)}},async cancel(){var s;await((s=n.return)==null?void 0:s.call(n))}})}}async function*O4(e,t){if(!e.body)throw t.abort(),new At("Attempted to iterate over a response with no body");const n=new L4,r=new Cs,s=cf(e.body);for await(const a of P4(s))for(const c of r.decode(a)){const d=n.decode(c);d&&(yield d)}for(const a of r.flush()){const c=n.decode(a);c&&(yield c)}}async function*P4(e){let t=new Uint8Array;for await(const n of e){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let s=new Uint8Array(t.length+r.length);s.set(t),s.set(r,t.length),t=s;let a;for(;(a=N4(t))!==-1;)yield t.slice(0,a),t=t.slice(a)}t.length>0&&(yield t)}function N4(e){for(let r=0;r<e.length-2;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}class L4{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,s]=F4(t,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function F4(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}function cf(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const uf=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function",ff=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&g0(e),g0=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",k4=e=>ff(e)||uf(e)||of(e);async function hf(e,t,n){var s;if(e=await e,ff(e))return e;if(uf(e)){const a=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const c=g0(a)?[await a.arrayBuffer()]:[a];return new kl(c,t,n)}const r=await H4(e);if(t||(t=V4(e)??"unknown_file"),!(n!=null&&n.type)){const a=(s=r[0])==null?void 0:s.type;typeof a=="string"&&(n={...n,type:a})}return new kl(r,t,n)}async function H4(e){var n;let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(g0(e))t.push(await e.arrayBuffer());else if(D4(e))for await(const r of e)t.push(r);else throw new Error(`Unexpected data type: ${typeof e}; constructor: ${(n=e==null?void 0:e.constructor)==null?void 0:n.name}; props: ${$4(e)}`);return t}function $4(e){return`[${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}function V4(e){var t;return ul(e.name)||ul(e.filename)||((t=ul(e.path))==null?void 0:t.split(/[\\/]/).pop())}const ul=e=>{if(typeof e=="string")return e;if(typeof Buffer<"u"&&e instanceof Buffer)return String(e)},D4=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",ec=e=>e&&typeof e=="object"&&e.body&&e[Symbol.toStringTag]==="MultipartBody",ra=async e=>{const t=await X4(e.body);return sf(t,e)},X4=async e=>{const t=new nf;return await Promise.all(Object.entries(e||{}).map(([n,r])=>Hl(t,n,r))),t},Hl=async(e,t,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")e.append(t,String(n));else if(k4(n)){const r=await hf(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>Hl(e,t+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>Hl(e,`${t}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var Qs={},j4=function(e,t,n,r,s){if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n},q4=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},di;async function _f(e){const{response:t}=e;if(e.options.stream)return zs("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):Br.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const n=t.headers.get("content-type");if((n==null?void 0:n.includes("application/json"))||(n==null?void 0:n.includes("application/vnd.api+json"))){const a=await t.json();return zs("response",t.status,t.url,t.headers,a),df(a,t)}const s=await t.text();return zs("response",t.status,t.url,t.headers,s),s}function df(e,t){return!e||typeof e!="object"||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}class M0 extends Promise{constructor(t,n=_f){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=n}_thenUnwrap(t){return new M0(this.responsePromise,async n=>df(t(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class U4{constructor({baseURL:t,maxRetries:n=2,timeout:r=6e5,httpAgent:s,fetch:a}){this.baseURL=t,this.maxRetries=fl("maxRetries",n),this.timeout=fl("timeout",r),this.httpAgent=s,this.fetch=a??tf}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...z4(),...this.authHeaders(t)}}validateHeaders(t,n){}defaultIdempotencyKey(){return`stainless-node-retry-${tm()}`}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(async s=>{const a=s&&g0(s==null?void 0:s.body)?new DataView(await s.body.arrayBuffer()):(s==null?void 0:s.body)instanceof DataView?s.body:(s==null?void 0:s.body)instanceof ArrayBuffer?new DataView(s.body):s&&ArrayBuffer.isView(s==null?void 0:s.body)?new DataView(s.body.buffer):s==null?void 0:s.body;return{method:t,path:n,...s,body:a}}))}getAPIList(t,n,r){return this.requestAPIList(n,{method:"get",path:t,...r})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}else if(ArrayBuffer.isView(t))return t.byteLength.toString();return null}buildRequest(t,{retryCount:n=0}={}){var ve;const{method:r,path:s,query:a,headers:c={}}=t,d=ArrayBuffer.isView(t.body)||t.__binaryRequest&&typeof t.body=="string"?t.body:ec(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,y=this.calculateContentLength(d),R=this.buildURL(s,a);"timeout"in t&&fl("timeout",t.timeout);const T=t.timeout??this.timeout,x=t.httpAgent??this.httpAgent??af(R),X=T+1e3;typeof((ve=x==null?void 0:x.options)==null?void 0:ve.timeout)=="number"&&X>(x.options.timeout??0)&&(x.options.timeout=X),this.idempotencyHeader&&r!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),c[this.idempotencyHeader]=t.idempotencyKey);const q=this.buildHeaders({options:t,headers:c,contentLength:y,retryCount:n});return{req:{method:r,...d&&{body:d},headers:q,...x&&{agent:x},signal:t.signal??null},url:R,timeout:T}}buildHeaders({options:t,headers:n,contentLength:r,retryCount:s}){const a={};r&&(a["content-length"]=r);const c=this.defaultHeaders(t);return sc(a,c),sc(a,n),ec(t.body)&&ka!=="node"&&delete a["content-type"],ac(c,"x-stainless-retry-count")===void 0&&ac(n,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(s)),this.validateHeaders(a,n),a}async prepareOptions(t){}async prepareRequest(t,{url:n,options:r}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(n=>[...n])):{...t}:{}}makeStatusError(t,n,r,s){return wn.generate(t,n,r,s)}request(t,n=null){return new M0(this.makeRequest(t,n))}async makeRequest(t,n){var x,X;const r=await t,s=r.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(r);const{req:a,url:c,timeout:d}=this.buildRequest(r,{retryCount:s-n});if(await this.prepareRequest(a,{url:c,options:r}),zs("request",c,r,a.headers),(x=r.signal)!=null&&x.aborted)throw new fr;const y=new AbortController,R=await this.fetchWithTimeout(c,a,d,y).catch($l);if(R instanceof Error){if((X=r.signal)!=null&&X.aborted)throw new fr;if(n)return this.retryRequest(r,n);throw R.name==="AbortError"?new wo:new T0({cause:R})}const T=K4(R.headers);if(!R.ok){if(n&&this.shouldRetry(R)){const K=`retrying, ${n} attempts remaining`;return zs(`response (error; ${K})`,R.status,c,T),this.retryRequest(r,n,T)}const q=await R.text().catch(K=>$l(K).message),he=Z4(q),ve=he?void 0:q;throw zs(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,R.status,c,T,ve),this.makeStatusError(R.status,he,ve,T)}return{response:R,options:r,controller:y}}requestAPIList(t,n){const r=this.makeRequest(n,null);return new Y4(this,r,t)}buildURL(t,n){const r=em(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),s=this.defaultQuery();return vf(s)||(n={...s,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(t){return Object.entries(t).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new At(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,n,r,s){const{signal:a,...c}=n||{};a&&a.addEventListener("abort",()=>s.abort());const d=setTimeout(()=>s.abort(),r);return this.getRequestClient().fetch.call(void 0,t,{signal:s.signal,...c}).finally(()=>{clearTimeout(d)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r){let s;const a=r==null?void 0:r["retry-after-ms"];if(a){const d=parseFloat(a);Number.isNaN(d)||(s=d)}const c=r==null?void 0:r["retry-after"];if(c&&!s){const d=parseFloat(c);Number.isNaN(d)?s=Date.parse(c)-Date.now():s=d*1e3}if(!(s&&0<=s&&s<60*1e3)){const d=t.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,d)}return await Ja(s),this.makeRequest(t,n-1)}calculateDefaultRetryTimeoutMillis(t,n){const a=n-t,c=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return c*d*1e3}getUserAgent(){return`${this.constructor.name}/JS ${qs}`}}class mf{constructor(t,n,r,s){di.set(this,void 0),j4(this,di,t),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new At("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in t&&typeof n.query=="object")n.query={...n.query,...t.params};else if("url"in t){const r=[...Object.entries(n.query||{}),...t.url.searchParams.entries()];for(const[s,a]of r)t.url.searchParams.set(s,a);n.query=void 0,n.path=t.url.toString()}return await q4(this,di,"f").requestAPIList(this.constructor,n)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(di=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const n of t.getPaginatedItems())yield n}}class Y4 extends M0{constructor(t,n,r){super(n,async s=>new r(t,s.response,await _f(s),s.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const n of t)yield n}}const K4=e=>new Proxy(Object.fromEntries(e.entries()),{get(t,n){const r=n.toString();return t[r.toLowerCase()]||t[r]}}),W4={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Hn=e=>typeof e=="object"&&e!==null&&!vf(e)&&Object.keys(e).every(t=>pf(W4,t)),G4=()=>{var t;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qs,"X-Stainless-OS":nc(Deno.build.os),"X-Stainless-Arch":tc(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qs,"X-Stainless-OS":nc(process.platform),"X-Stainless-Arch":tc(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=Q4();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Q4(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,c=r[3]||0;return{browser:t,version:`${s}.${a}.${c}`}}}return null}const tc=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",nc=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let rc;const z4=()=>rc??(rc=G4()),Z4=e=>{try{return JSON.parse(e)}catch{return}},J4=new RegExp("^(?:[a-z]+:)?//","i"),em=e=>J4.test(e),Ja=e=>new Promise(t=>setTimeout(t,e)),fl=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new At(`${e} must be an integer`);if(t<0)throw new At(`${e} must be a positive integer`);return t},$l=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},mi=e=>{var t,n,r,s;if(typeof process<"u")return((t=Qs==null?void 0:Qs[e])==null?void 0:t.trim())??void 0;if(typeof Deno<"u")return(s=(r=(n=Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,e))==null?void 0:s.trim()};function vf(e){if(!e)return!0;for(const t in e)return!1;return!0}function pf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function sc(e,t){for(const n in t){if(!pf(t,n))continue;const r=n.toLowerCase();if(!r)continue;const s=t[n];s===null?delete e[r]:s!==void 0&&(e[r]=s)}}function zs(e,...t){typeof process<"u"&&(Qs==null?void 0:Qs.DEBUG)==="true"&&console.log(`OpenAI:DEBUG:${e}`,...t)}const tm=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),nm=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",rm=e=>typeof(e==null?void 0:e.get)=="function",ac=(e,t)=>{var r;const n=t.toLowerCase();if(rm(e)){const s=((r=t[0])==null?void 0:r.toUpperCase())+t.substring(1).replace(/([^\w])(\w)/g,(a,c,d)=>c+d.toUpperCase());for(const a of[t,n,t.toUpperCase(),s]){const c=e.get(a);if(c)return c}}for(const[s,a]of Object.entries(e))if(s.toLowerCase()===n)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${t} header, using the first entry.`),a[0]):a};function hl(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}class At extends Error{}class wn extends At{constructor(t,n,r,s){super(`${wn.makeMessage(t,n,r)}`),this.status=t,this.headers=s,this.request_id=s==null?void 0:s["x-request-id"];const a=n;this.error=a,this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(t,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&s?`${t} ${s}`:t?`${t} status code (no body)`:s||"(no status code or body)"}static generate(t,n,r,s){if(!t)return new T0({message:r,cause:$l(n)});const a=n==null?void 0:n.error;return t===400?new bf(t,a,r,s):t===401?new yf(t,a,r,s):t===403?new wf(t,a,r,s):t===404?new Sf(t,a,r,s):t===409?new xf(t,a,r,s):t===422?new Af(t,a,r,s):t===429?new Ef(t,a,r,s):t>=500?new Rf(t,a,r,s):new wn(t,a,r,s)}}class fr extends wn{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0),this.status=void 0}}class T0 extends wn{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),this.status=void 0,n&&(this.cause=n)}}class wo extends T0{constructor({message:t}={}){super({message:t??"Request timed out."})}}class bf extends wn{constructor(){super(...arguments),this.status=400}}class yf extends wn{constructor(){super(...arguments),this.status=401}}class wf extends wn{constructor(){super(...arguments),this.status=403}}class Sf extends wn{constructor(){super(...arguments),this.status=404}}class xf extends wn{constructor(){super(...arguments),this.status=409}}class Af extends wn{constructor(){super(...arguments),this.status=422}}class Ef extends wn{constructor(){super(...arguments),this.status=429}}class Rf extends wn{}class gf extends At{constructor(){super("Could not parse response content as the length limit was reached")}}class Mf extends At{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}const Vl="RFC3986",Dl={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},sm="RFC1738",am=Array.isArray,Ar=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),_l=1024,im=(e,t,n,r,s)=>{if(e.length===0)return e;let a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});let c="";for(let d=0;d<a.length;d+=_l){const y=a.length>=_l?a.slice(d,d+_l):a,R=[];for(let T=0;T<y.length;++T){let x=y.charCodeAt(T);if(x===45||x===46||x===95||x===126||x>=48&&x<=57||x>=65&&x<=90||x>=97&&x<=122||s===sm&&(x===40||x===41)){R[R.length]=y.charAt(T);continue}if(x<128){R[R.length]=Ar[x];continue}if(x<2048){R[R.length]=Ar[192|x>>6]+Ar[128|x&63];continue}if(x<55296||x>=57344){R[R.length]=Ar[224|x>>12]+Ar[128|x>>6&63]+Ar[128|x&63];continue}T+=1,x=65536+((x&1023)<<10|y.charCodeAt(T)&1023),R[R.length]=Ar[240|x>>18]+Ar[128|x>>12&63]+Ar[128|x>>6&63]+Ar[128|x&63]}c+=R.join("")}return c};function lm(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function ic(e,t){if(am(e)){const n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}const om=Object.prototype.hasOwnProperty,Tf={brackets(e){return String(e)+"[]"},comma:"comma",indices(e,t){return String(e)+"["+t+"]"},repeat(e){return String(e)}},Rr=Array.isArray,cm=Array.prototype.push,Bf=function(e,t){cm.apply(e,Rr(t)?t:[t])},um=Date.prototype.toISOString,fn={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:im,encodeValuesOnly:!1,format:Vl,formatter:Dl[Vl],indices:!1,serializeDate(e){return um.call(e)},skipNulls:!1,strictNullHandling:!1};function fm(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"}const dl={};function Cf(e,t,n,r,s,a,c,d,y,R,T,x,X,q,he,ve,we,Xe){let K=e,ye=Xe,pe=0,Ue=!1;for(;(ye=ye.get(dl))!==void 0&&!Ue;){const ot=ye.get(e);if(pe+=1,typeof ot<"u"){if(ot===pe)throw new RangeError("Cyclic object value");Ue=!0}typeof ye.get(dl)>"u"&&(pe=0)}if(typeof R=="function"?K=R(t,K):K instanceof Date?K=X==null?void 0:X(K):n==="comma"&&Rr(K)&&(K=ic(K,function(ot){return ot instanceof Date?X==null?void 0:X(ot):ot})),K===null){if(a)return y&&!ve?y(t,fn.encoder,we,"key",q):t;K=""}if(fm(K)||lm(K)){if(y){const ot=ve?t:y(t,fn.encoder,we,"key",q);return[(he==null?void 0:he(ot))+"="+(he==null?void 0:he(y(K,fn.encoder,we,"value",q)))]}return[(he==null?void 0:he(t))+"="+(he==null?void 0:he(String(K)))]}const rt=[];if(typeof K>"u")return rt;let Ge;if(n==="comma"&&Rr(K))ve&&y&&(K=ic(K,y)),Ge=[{value:K.length>0?K.join(",")||null:void 0}];else if(Rr(R))Ge=R;else{const ot=Object.keys(K);Ge=T?ot.sort(T):ot}const at=d?String(t).replace(/\./g,"%2E"):String(t),Ze=r&&Rr(K)&&K.length===1?at+"[]":at;if(s&&Rr(K)&&K.length===0)return Ze+"[]";for(let ot=0;ot<Ge.length;++ot){const _t=Ge[ot],zt=typeof _t=="object"&&typeof _t.value<"u"?_t.value:K[_t];if(c&&zt===null)continue;const Gt=x&&d?_t.replace(/\./g,"%2E"):_t,rr=Rr(K)?typeof n=="function"?n(Ze,Gt):Ze:Ze+(x?"."+Gt:"["+Gt+"]");Xe.set(e,pe);const $n=new WeakMap;$n.set(dl,Xe),Bf(rt,Cf(zt,rr,n,r,s,a,c,d,n==="comma"&&ve&&Rr(K)?null:y,R,T,x,X,q,he,ve,we,$n))}return rt}function hm(e=fn){if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");const t=e.charset||fn.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=Vl;if(typeof e.format<"u"){if(!om.call(Dl,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const r=Dl[n];let s=fn.filter;(typeof e.filter=="function"||Rr(e.filter))&&(s=e.filter);let a;if(e.arrayFormat&&e.arrayFormat in Tf?a=e.arrayFormat:"indices"in e?a=e.indices?"indices":"repeat":a=fn.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const c=typeof e.allowDots>"u"?e.encodeDotInKeys?!0:fn.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:fn.addQueryPrefix,allowDots:c,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:fn.allowEmptyArrays,arrayFormat:a,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:fn.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?fn.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:fn.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:fn.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:fn.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:fn.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:fn.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:fn.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:fn.strictNullHandling}}function _m(e,t={}){let n=e;const r=hm(t);let s,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):Rr(r.filter)&&(a=r.filter,s=a);const c=[];if(typeof n!="object"||n===null)return"";const d=Tf[r.arrayFormat],y=d==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const R=new WeakMap;for(let X=0;X<s.length;++X){const q=s[X];r.skipNulls&&n[q]===null||Bf(c,Cf(n[q],q,d,y,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,R))}const T=c.join(r.delimiter);let x=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?x+="utf8=%26%2310003%3B&":x+="utf8=%E2%9C%93&"),T.length>0?x+T:""}class So extends mf{constructor(t,n,r,s){super(t,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class mr extends mf{constructor(t,n,r,s){super(t,n,r,s),this.data=r.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const n=Object.fromEntries(t.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var r;const t=this.getPaginatedItems();if(!t.length)return null;const n=(r=t[t.length-1])==null?void 0:r.id;return n?{params:{after:n}}:null}}class Ot{constructor(t){this._client=t}}let Fi=class extends Ot{create(t,n){return this._client.post("/chat/completions",{body:t,...n,stream:t.stream??!1})}};Fi||(Fi={});let ki=class extends Ot{constructor(){super(...arguments),this.completions=new Fi(this._client)}};(function(e){e.Completions=Fi})(ki||(ki={}));class Hi extends Ot{create(t,n){return this._client.post("/audio/speech",{body:t,...n,__binaryResponse:!0})}}Hi||(Hi={});class $i extends Ot{create(t,n){return this._client.post("/audio/transcriptions",ra({body:t,...n}))}}$i||($i={});class Vi extends Ot{create(t,n){return this._client.post("/audio/translations",ra({body:t,...n}))}}Vi||(Vi={});let Di=class extends Ot{constructor(){super(...arguments),this.transcriptions=new $i(this._client),this.translations=new Vi(this._client),this.speech=new Hi(this._client)}};(function(e){e.Transcriptions=$i,e.Translations=Vi,e.Speech=Hi})(Di||(Di={}));class Xi extends Ot{create(t,n){return this._client.post("/batches",{body:t,...n})}retrieve(t,n){return this._client.get(`/batches/${t}`,n)}list(t={},n){return Hn(t)?this.list({},t):this._client.getAPIList("/batches",xo,{query:t,...n})}cancel(t,n){return this._client.post(`/batches/${t}/cancel`,n)}}class xo extends mr{}(function(e){e.BatchesPage=xo})(Xi||(Xi={}));class ji extends Ot{create(t,n){return this._client.post("/assistants",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/assistants/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/assistants/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(t={},n){return Hn(t)?this.list({},t):this._client.getAPIList("/assistants",Ao,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(t,n){return this._client.delete(`/assistants/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Ao extends mr{}(function(e){e.AssistantsPage=Ao})(ji||(ji={}));function lc(e){return typeof e.parse=="function"}const Zs=e=>(e==null?void 0:e.role)==="assistant",If=e=>(e==null?void 0:e.role)==="function",Of=e=>(e==null?void 0:e.role)==="tool";var or=function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},Qt=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Xl,Ai,Ei,wa,Sa,Ri,xa,$r,Aa,qi,Ui,Us,Pf;class Nf{constructor(){Xl.add(this),this.controller=new AbortController,Ai.set(this,void 0),Ei.set(this,()=>{}),wa.set(this,()=>{}),Sa.set(this,void 0),Ri.set(this,()=>{}),xa.set(this,()=>{}),$r.set(this,{}),Aa.set(this,!1),qi.set(this,!1),Ui.set(this,!1),Us.set(this,!1),or(this,Ai,new Promise((t,n)=>{or(this,Ei,t,"f"),or(this,wa,n,"f")}),"f"),or(this,Sa,new Promise((t,n)=>{or(this,Ri,t,"f"),or(this,xa,n,"f")}),"f"),Qt(this,Ai,"f").catch(()=>{}),Qt(this,Sa,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},Qt(this,Xl,"m",Pf).bind(this))},0)}_connected(){this.ended||(Qt(this,Ei,"f").call(this),this._emit("connect"))}get ended(){return Qt(this,Aa,"f")}get errored(){return Qt(this,qi,"f")}get aborted(){return Qt(this,Ui,"f")}abort(){this.controller.abort()}on(t,n){return(Qt(this,$r,"f")[t]||(Qt(this,$r,"f")[t]=[])).push({listener:n}),this}off(t,n){const r=Qt(this,$r,"f")[t];if(!r)return this;const s=r.findIndex(a=>a.listener===n);return s>=0&&r.splice(s,1),this}once(t,n){return(Qt(this,$r,"f")[t]||(Qt(this,$r,"f")[t]=[])).push({listener:n,once:!0}),this}emitted(t){return new Promise((n,r)=>{or(this,Us,!0,"f"),t!=="error"&&this.once("error",r),this.once(t,n)})}async done(){or(this,Us,!0,"f"),await Qt(this,Sa,"f")}_emit(t,...n){if(Qt(this,Aa,"f"))return;t==="end"&&(or(this,Aa,!0,"f"),Qt(this,Ri,"f").call(this));const r=Qt(this,$r,"f")[t];if(r&&(Qt(this,$r,"f")[t]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),t==="abort"){const s=n[0];!Qt(this,Us,"f")&&!(r!=null&&r.length)&&Promise.reject(s),Qt(this,wa,"f").call(this,s),Qt(this,xa,"f").call(this,s),this._emit("end");return}if(t==="error"){const s=n[0];!Qt(this,Us,"f")&&!(r!=null&&r.length)&&Promise.reject(s),Qt(this,wa,"f").call(this,s),Qt(this,xa,"f").call(this,s),this._emit("end")}}_emitFinal(){}}Ai=new WeakMap,Ei=new WeakMap,wa=new WeakMap,Sa=new WeakMap,Ri=new WeakMap,xa=new WeakMap,$r=new WeakMap,Aa=new WeakMap,qi=new WeakMap,Ui=new WeakMap,Us=new WeakMap,Xl=new WeakSet,Pf=function(t){if(or(this,qi,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new fr),t instanceof fr)return or(this,Ui,!0,"f"),this._emit("abort",t);if(t instanceof At)return this._emit("error",t);if(t instanceof Error){const n=new At(t.message);return n.cause=t,this._emit("error",n)}return this._emit("error",new At(String(t)))};function Lf(e){return(e==null?void 0:e.$brand)==="auto-parseable-response-format"}function ei(e){return(e==null?void 0:e.$brand)==="auto-parseable-tool"}function dm(e,t){return!t||!Ff(t)?{...e,choices:e.choices.map(n=>({...n,message:{...n.message,parsed:null,tool_calls:n.message.tool_calls??[]}}))}:Eo(e,t)}function Eo(e,t){const n=e.choices.map(r=>{var s;if(r.finish_reason==="length")throw new gf;if(r.finish_reason==="content_filter")throw new Mf;return{...r,message:{...r.message,tool_calls:((s=r.message.tool_calls)==null?void 0:s.map(a=>vm(t,a)))??[],parsed:r.message.content&&!r.message.refusal?mm(t,r.message.content):null}}});return{...e,choices:n}}function mm(e,t){var n,r;return((n=e.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=e.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function vm(e,t){var r;const n=(r=e.tools)==null?void 0:r.find(s=>{var a;return((a=s.function)==null?void 0:a.name)===t.function.name});return{...t,function:{...t.function,parsed_arguments:ei(n)?n.$parseRaw(t.function.arguments):n!=null&&n.function.strict?JSON.parse(t.function.arguments):null}}}function pm(e,t){var r;if(!e)return!1;const n=(r=e.tools)==null?void 0:r.find(s=>{var a;return((a=s.function)==null?void 0:a.name)===t.function.name});return ei(n)||(n==null?void 0:n.function.strict)||!1}function Ff(e){var t;return Lf(e.response_format)?!0:((t=e.tools)==null?void 0:t.some(n=>ei(n)||n.type==="function"&&n.function.strict===!0))??!1}function bm(e){for(const t of e??[]){if(t.type!=="function")throw new At(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(t.function.strict!==!0)throw new At(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var kn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},An,jl,Yi,ql,Ul,Yl,kf,Kl;const oc=10;class Hf extends Nf{constructor(){super(...arguments),An.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(t){var r;this._chatCompletions.push(t),this._emit("chatCompletion",t);const n=(r=t.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),t}_addMessage(t,n=!0){if("content"in t||(t.content=null),this.messages.push(t),n){if(this._emit("message",t),(If(t)||Of(t))&&t.content)this._emit("functionCallResult",t.content);else if(Zs(t)&&t.function_call)this._emit("functionCall",t.function_call);else if(Zs(t)&&t.tool_calls)for(const r of t.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new At("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),kn(this,An,"m",jl).call(this)}async finalMessage(){return await this.done(),kn(this,An,"m",Yi).call(this)}async finalFunctionCall(){return await this.done(),kn(this,An,"m",ql).call(this)}async finalFunctionCallResult(){return await this.done(),kn(this,An,"m",Ul).call(this)}async totalUsage(){return await this.done(),kn(this,An,"m",Yl).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const n=kn(this,An,"m",Yi).call(this);n&&this._emit("finalMessage",n);const r=kn(this,An,"m",jl).call(this);r&&this._emit("finalContent",r);const s=kn(this,An,"m",ql).call(this);s&&this._emit("finalFunctionCall",s);const a=kn(this,An,"m",Ul).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(c=>c.usage)&&this._emit("totalUsage",kn(this,An,"m",Yl).call(this))}async _createChatCompletion(t,n,r){const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),kn(this,An,"m",kf).call(this,n);const a=await t.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Eo(a,n))}async _runChatCompletion(t,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(t,n,r)}async _runFunctions(t,n,r){var X;const s="function",{function_call:a="auto",stream:c,...d}=n,y=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:R=oc}=r||{},T={};for(const q of n.functions)T[q.name||q.function.name]=q;const x=n.functions.map(q=>({name:q.name||q.function.name,parameters:q.parameters,description:q.description}));for(const q of n.messages)this._addMessage(q,!1);for(let q=0;q<R;++q){const ve=(X=(await this._createChatCompletion(t,{...d,function_call:a,functions:x,messages:[...this.messages]},r)).choices[0])==null?void 0:X.message;if(!ve)throw new At("missing message in ChatCompletion response");if(!ve.function_call)return;const{name:we,arguments:Xe}=ve.function_call,K=T[we];if(K){if(y&&y!==we){const rt=`Invalid function_call: ${JSON.stringify(we)}. ${JSON.stringify(y)} requested. Please try again`;this._addMessage({role:s,name:we,content:rt});continue}}else{const rt=`Invalid function_call: ${JSON.stringify(we)}. Available options are: ${x.map(Ge=>JSON.stringify(Ge.name)).join(", ")}. Please try again`;this._addMessage({role:s,name:we,content:rt});continue}let ye;try{ye=lc(K)?await K.parse(Xe):Xe}catch(rt){this._addMessage({role:s,name:we,content:rt instanceof Error?rt.message:String(rt)});continue}const pe=await K.function(ye,this),Ue=kn(this,An,"m",Kl).call(this,pe);if(this._addMessage({role:s,name:we,content:Ue}),y)return}}async _runTools(t,n,r){var q,he,ve;const s="tool",{tool_choice:a="auto",stream:c,...d}=n,y=typeof a!="string"&&((q=a==null?void 0:a.function)==null?void 0:q.name),{maxChatCompletions:R=oc}=r||{},T=n.tools.map(we=>{if(ei(we)){if(!we.$callback)throw new At("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:we.$callback,name:we.function.name,description:we.function.description||"",parameters:we.function.parameters,parse:we.$parseRaw,strict:!0}}}return we}),x={};for(const we of T)we.type==="function"&&(x[we.function.name||we.function.function.name]=we.function);const X="tools"in n?T.map(we=>we.type==="function"?{type:"function",function:{name:we.function.name||we.function.function.name,parameters:we.function.parameters,description:we.function.description,strict:we.function.strict}}:we):void 0;for(const we of n.messages)this._addMessage(we,!1);for(let we=0;we<R;++we){const K=(he=(await this._createChatCompletion(t,{...d,tool_choice:a,tools:X,messages:[...this.messages]},r)).choices[0])==null?void 0:he.message;if(!K)throw new At("missing message in ChatCompletion response");if(!((ve=K.tool_calls)!=null&&ve.length))return;for(const ye of K.tool_calls){if(ye.type!=="function")continue;const pe=ye.id,{name:Ue,arguments:rt}=ye.function,Ge=x[Ue];if(Ge){if(y&&y!==Ue){const _t=`Invalid tool_call: ${JSON.stringify(Ue)}. ${JSON.stringify(y)} requested. Please try again`;this._addMessage({role:s,tool_call_id:pe,content:_t});continue}}else{const _t=`Invalid tool_call: ${JSON.stringify(Ue)}. Available options are: ${Object.keys(x).map(zt=>JSON.stringify(zt)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:pe,content:_t});continue}let at;try{at=lc(Ge)?await Ge.parse(rt):rt}catch(_t){const zt=_t instanceof Error?_t.message:String(_t);this._addMessage({role:s,tool_call_id:pe,content:zt});continue}const Ze=await Ge.function(at,this),ot=kn(this,An,"m",Kl).call(this,Ze);if(this._addMessage({role:s,tool_call_id:pe,content:ot}),y)return}}}}An=new WeakSet,jl=function(){return kn(this,An,"m",Yi).call(this).content??null},Yi=function(){let t=this.messages.length;for(;t-- >0;){const n=this.messages[t];if(Zs(n)){const{function_call:r,...s}=n,a={...s,content:n.content??null,refusal:n.refusal??null};return r&&(a.function_call=r),a}}throw new At("stream ended without producing a ChatCompletionMessage with role=assistant")},ql=function(){var t,n;for(let r=this.messages.length-1;r>=0;r--){const s=this.messages[r];if(Zs(s)&&(s!=null&&s.function_call))return s.function_call;if(Zs(s)&&((t=s==null?void 0:s.tool_calls)!=null&&t.length))return(n=s.tool_calls.at(-1))==null?void 0:n.function}},Ul=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(If(n)&&n.content!=null||Of(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var s;return r.role==="assistant"&&((s=r.tool_calls)==null?void 0:s.some(a=>a.type==="function"&&a.id===n.tool_call_id))}))return n.content}},Yl=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(t.completion_tokens+=n.completion_tokens,t.prompt_tokens+=n.prompt_tokens,t.total_tokens+=n.total_tokens);return t},kf=function(t){if(t.n!=null&&t.n>1)throw new At("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Kl=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class Wa extends Hf{static runFunctions(t,n,r){const s=new Wa,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(t,n,a)),s}static runTools(t,n,r){const s=new Wa,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(t,n,a)),s}_addMessage(t,n=!0){super._addMessage(t,n),Zs(t)&&t.content&&this._emit("content",t.content)}}const $f=1,Vf=2,Df=4,Xf=8,jf=16,qf=32,Uf=64,Yf=128,Kf=256,Wf=Yf|Kf,Gf=jf|qf|Wf|Uf,Qf=$f|Vf|Gf,zf=Df|Xf,ym=Qf|zf,vn={STR:$f,NUM:Vf,ARR:Df,OBJ:Xf,NULL:jf,BOOL:qf,NAN:Uf,INFINITY:Yf,MINUS_INFINITY:Kf,INF:Wf,SPECIAL:Gf,ATOM:Qf,COLLECTION:zf,ALL:ym};class wm extends Error{}class Sm extends Error{}function xm(e,t=vn.ALL){if(typeof e!="string")throw new TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw new Error(`${e} is empty`);return Am(e.trim(),t)}const Am=(e,t)=>{const n=e.length;let r=0;const s=X=>{throw new wm(`${X} at position ${r}`)},a=X=>{throw new Sm(`${X} at position ${r}`)},c=()=>(x(),r>=n&&s("Unexpected end of input"),e[r]==='"'?d():e[r]==="{"?y():e[r]==="["?R():e.substring(r,r+4)==="null"||vn.NULL&t&&n-r<4&&"null".startsWith(e.substring(r))?(r+=4,null):e.substring(r,r+4)==="true"||vn.BOOL&t&&n-r<4&&"true".startsWith(e.substring(r))?(r+=4,!0):e.substring(r,r+5)==="false"||vn.BOOL&t&&n-r<5&&"false".startsWith(e.substring(r))?(r+=5,!1):e.substring(r,r+8)==="Infinity"||vn.INFINITY&t&&n-r<8&&"Infinity".startsWith(e.substring(r))?(r+=8,1/0):e.substring(r,r+9)==="-Infinity"||vn.MINUS_INFINITY&t&&1<n-r&&n-r<9&&"-Infinity".startsWith(e.substring(r))?(r+=9,-1/0):e.substring(r,r+3)==="NaN"||vn.NAN&t&&n-r<3&&"NaN".startsWith(e.substring(r))?(r+=3,NaN):T()),d=()=>{const X=r;let q=!1;for(r++;r<n&&(e[r]!=='"'||q&&e[r-1]==="\\");)q=e[r]==="\\"?!q:!1,r++;if(e.charAt(r)=='"')try{return JSON.parse(e.substring(X,++r-Number(q)))}catch(he){a(String(he))}else if(vn.STR&t)try{return JSON.parse(e.substring(X,r-Number(q))+'"')}catch{return JSON.parse(e.substring(X,e.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},y=()=>{r++,x();const X={};try{for(;e[r]!=="}";){if(x(),r>=n&&vn.OBJ&t)return X;const q=d();x(),r++;try{const he=c();Object.defineProperty(X,q,{value:he,writable:!0,enumerable:!0,configurable:!0})}catch(he){if(vn.OBJ&t)return X;throw he}x(),e[r]===","&&r++}}catch{if(vn.OBJ&t)return X;s("Expected '}' at end of object")}return r++,X},R=()=>{r++;const X=[];try{for(;e[r]!=="]";)X.push(c()),x(),e[r]===","&&r++}catch{if(vn.ARR&t)return X;s("Expected ']' at end of array")}return r++,X},T=()=>{if(r===0){e==="-"&&vn.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e)}catch(q){if(vn.NUM&t)try{return e[e.length-1]==="."?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch{}a(String(q))}}const X=r;for(e[r]==="-"&&r++;e[r]&&!",]}".includes(e[r]);)r++;r==n&&!(vn.NUM&t)&&s("Unterminated number literal");try{return JSON.parse(e.substring(X,r))}catch{e.substring(X,r)==="-"&&vn.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e.substring(X,e.lastIndexOf("e")))}catch(he){a(String(he))}}},x=()=>{for(;r<n&&` 
\r	`.includes(e[r]);)r++};return c()},cc=e=>xm(e,vn.ALL^vn.NUM);var Vs=function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},Lt=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},un,Hr,Ds,zr,ml,vi,vl,pl,bl,pi,yl,uc;class Ga extends Hf{constructor(t){super(),un.add(this),Hr.set(this,void 0),Ds.set(this,void 0),zr.set(this,void 0),Vs(this,Hr,t,"f"),Vs(this,Ds,[],"f")}get currentChatCompletionSnapshot(){return Lt(this,zr,"f")}static fromReadableStream(t){const n=new Ga(null);return n._run(()=>n._fromReadableStream(t)),n}static createChatCompletion(t,n,r){const s=new Ga(n);return s._run(()=>s._runChatCompletion(t,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(t,n,r){var c;super._createChatCompletion;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),Lt(this,un,"m",ml).call(this);const a=await t.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const d of a)Lt(this,un,"m",vl).call(this,d);if((c=a.controller.signal)!=null&&c.aborted)throw new fr;return this._addChatCompletion(Lt(this,un,"m",pi).call(this))}async _fromReadableStream(t,n){var c;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Lt(this,un,"m",ml).call(this),this._connected();const s=Br.fromReadableStream(t,this.controller);let a;for await(const d of s)a&&a!==d.id&&this._addChatCompletion(Lt(this,un,"m",pi).call(this)),Lt(this,un,"m",vl).call(this,d),a=d.id;if((c=s.controller.signal)!=null&&c.aborted)throw new fr;return this._addChatCompletion(Lt(this,un,"m",pi).call(this))}[(Hr=new WeakMap,Ds=new WeakMap,zr=new WeakMap,un=new WeakSet,ml=function(){this.ended||Vs(this,zr,void 0,"f")},vi=function(n){let r=Lt(this,Ds,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Lt(this,Ds,"f")[n.index]=r,r)},vl=function(n){var s,a,c,d,y,R,T,x,X,q,he,ve,we,Xe,K;if(this.ended)return;const r=Lt(this,un,"m",uc).call(this,n);this._emit("chunk",n,r);for(const ye of n.choices){const pe=r.choices[ye.index];ye.delta.content!=null&&((s=pe.message)==null?void 0:s.role)==="assistant"&&((a=pe.message)!=null&&a.content)&&(this._emit("content",ye.delta.content,pe.message.content),this._emit("content.delta",{delta:ye.delta.content,snapshot:pe.message.content,parsed:pe.message.parsed})),ye.delta.refusal!=null&&((c=pe.message)==null?void 0:c.role)==="assistant"&&((d=pe.message)!=null&&d.refusal)&&this._emit("refusal.delta",{delta:ye.delta.refusal,snapshot:pe.message.refusal}),((y=ye.logprobs)==null?void 0:y.content)!=null&&((R=pe.message)==null?void 0:R.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(T=ye.logprobs)==null?void 0:T.content,snapshot:((x=pe.logprobs)==null?void 0:x.content)??[]}),((X=ye.logprobs)==null?void 0:X.refusal)!=null&&((q=pe.message)==null?void 0:q.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(he=ye.logprobs)==null?void 0:he.refusal,snapshot:((ve=pe.logprobs)==null?void 0:ve.refusal)??[]});const Ue=Lt(this,un,"m",vi).call(this,pe);pe.finish_reason&&(Lt(this,un,"m",bl).call(this,pe),Ue.current_tool_call_index!=null&&Lt(this,un,"m",pl).call(this,pe,Ue.current_tool_call_index));for(const rt of ye.delta.tool_calls??[])Ue.current_tool_call_index!==rt.index&&(Lt(this,un,"m",bl).call(this,pe),Ue.current_tool_call_index!=null&&Lt(this,un,"m",pl).call(this,pe,Ue.current_tool_call_index)),Ue.current_tool_call_index=rt.index;for(const rt of ye.delta.tool_calls??[]){const Ge=(we=pe.message.tool_calls)==null?void 0:we[rt.index];Ge!=null&&Ge.type&&((Ge==null?void 0:Ge.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(Xe=Ge.function)==null?void 0:Xe.name,index:rt.index,arguments:Ge.function.arguments,parsed_arguments:Ge.function.parsed_arguments,arguments_delta:((K=rt.function)==null?void 0:K.arguments)??""}):(Ge==null||Ge.type,void 0))}}},pl=function(n,r){var c,d,y;if(Lt(this,un,"m",vi).call(this,n).done_tool_calls.has(r))return;const a=(c=n.message.tool_calls)==null?void 0:c[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const R=(y=(d=Lt(this,Hr,"f"))==null?void 0:d.tools)==null?void 0:y.find(T=>T.type==="function"&&T.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:ei(R)?R.$parseRaw(a.function.arguments):R!=null&&R.function.strict?JSON.parse(a.function.arguments):null})}else a.type},bl=function(n){var s,a;const r=Lt(this,un,"m",vi).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const c=Lt(this,un,"m",yl).call(this);this._emit("content.done",{content:n.message.content,parsed:c?c.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(s=n.logprobs)!=null&&s.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(a=n.logprobs)!=null&&a.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},pi=function(){if(this.ended)throw new At("stream has ended, this shouldn't happen");const n=Lt(this,zr,"f");if(!n)throw new At("request ended without sending any chunks");return Vs(this,zr,void 0,"f"),Vs(this,Ds,[],"f"),Em(n,Lt(this,Hr,"f"))},yl=function(){var r;const n=(r=Lt(this,Hr,"f"))==null?void 0:r.response_format;return Lf(n)?n:null},uc=function(n){var r,s,a,c;let d=Lt(this,zr,"f");const{choices:y,...R}=n;d?Object.assign(d,R):d=Vs(this,zr,{...R,choices:[]},"f");for(const{delta:T,finish_reason:x,index:X,logprobs:q=null,...he}of n.choices){let ve=d.choices[X];if(ve||(ve=d.choices[X]={finish_reason:x,index:X,message:{},logprobs:q,...he}),q)if(!ve.logprobs)ve.logprobs=Object.assign({},q);else{const{content:rt,refusal:Ge,...at}=q;Object.assign(ve.logprobs,at),rt&&((r=ve.logprobs).content??(r.content=[]),ve.logprobs.content.push(...rt)),Ge&&((s=ve.logprobs).refusal??(s.refusal=[]),ve.logprobs.refusal.push(...Ge))}if(x&&(ve.finish_reason=x,Lt(this,Hr,"f")&&Ff(Lt(this,Hr,"f")))){if(x==="length")throw new gf;if(x==="content_filter")throw new Mf}if(Object.assign(ve,he),!T)continue;const{content:we,refusal:Xe,function_call:K,role:ye,tool_calls:pe,...Ue}=T;if(Object.assign(ve.message,Ue),Xe&&(ve.message.refusal=(ve.message.refusal||"")+Xe),ye&&(ve.message.role=ye),K&&(ve.message.function_call?(K.name&&(ve.message.function_call.name=K.name),K.arguments&&((a=ve.message.function_call).arguments??(a.arguments=""),ve.message.function_call.arguments+=K.arguments)):ve.message.function_call=K),we&&(ve.message.content=(ve.message.content||"")+we,!ve.message.refusal&&Lt(this,un,"m",yl).call(this)&&(ve.message.parsed=cc(ve.message.content))),pe){ve.message.tool_calls||(ve.message.tool_calls=[]);for(const{index:rt,id:Ge,type:at,function:Ze,...ot}of pe){const _t=(c=ve.message.tool_calls)[rt]??(c[rt]={});Object.assign(_t,ot),Ge&&(_t.id=Ge),at&&(_t.type=at),Ze&&(_t.function??(_t.function={name:Ze.name??"",arguments:""})),Ze!=null&&Ze.name&&(_t.function.name=Ze.name),Ze!=null&&Ze.arguments&&(_t.function.arguments+=Ze.arguments,pm(Lt(this,Hr,"f"),_t)&&(_t.function.parsed_arguments=cc(_t.function.arguments)))}}}return d},Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("chunk",s=>{const a=n.shift();a?a.resolve(s):t.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,c)=>n.push({resolve:a,reject:c})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Br(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Em(e,t){const{id:n,choices:r,created:s,model:a,system_fingerprint:c,...d}=e,y={...d,id:n,choices:r.map(({message:R,finish_reason:T,index:x,logprobs:X,...q})=>{if(!T)throw new At(`missing finish_reason for choice ${x}`);const{content:he=null,function_call:ve,tool_calls:we,...Xe}=R,K=R.role;if(!K)throw new At(`missing role for choice ${x}`);if(ve){const{arguments:ye,name:pe}=ve;if(ye==null)throw new At(`missing function_call.arguments for choice ${x}`);if(!pe)throw new At(`missing function_call.name for choice ${x}`);return{...q,message:{content:he,function_call:{arguments:ye,name:pe},role:K,refusal:R.refusal??null},finish_reason:T,index:x,logprobs:X}}return we?{...q,index:x,finish_reason:T,logprobs:X,message:{...Xe,role:K,content:he,refusal:R.refusal??null,tool_calls:we.map((ye,pe)=>{const{function:Ue,type:rt,id:Ge,...at}=ye,{arguments:Ze,name:ot,..._t}=Ue||{};if(Ge==null)throw new At(`missing choices[${x}].tool_calls[${pe}].id
${bi(e)}`);if(rt==null)throw new At(`missing choices[${x}].tool_calls[${pe}].type
${bi(e)}`);if(ot==null)throw new At(`missing choices[${x}].tool_calls[${pe}].function.name
${bi(e)}`);if(Ze==null)throw new At(`missing choices[${x}].tool_calls[${pe}].function.arguments
${bi(e)}`);return{...at,id:Ge,type:rt,function:{..._t,name:ot,arguments:Ze}}})}}:{...q,message:{...Xe,content:he,role:K,refusal:R.refusal??null},finish_reason:T,index:x,logprobs:X}}),created:s,model:a,object:"chat.completion",...c?{system_fingerprint:c}:{}};return dm(y,t)}function bi(e){return JSON.stringify(e)}class Js extends Ga{static fromReadableStream(t){const n=new Js(null);return n._run(()=>n._fromReadableStream(t)),n}static runFunctions(t,n,r){const s=new Js(null),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(t,n,a)),s}static runTools(t,n,r){const s=new Js(n),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(t,n,a)),s}}let Zf=class extends Ot{parse(t,n){return bm(t.tools),this._client.chat.completions.create(t,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>Eo(r,t))}runFunctions(t,n){return t.stream?Js.runFunctions(this._client,t,n):Wa.runFunctions(this._client,t,n)}runTools(t,n){return t.stream?Js.runTools(this._client,t,n):Wa.runTools(this._client,t,n)}stream(t,n){return Ga.createChatCompletion(this._client,t,n)}};class Ki extends Ot{constructor(){super(...arguments),this.completions=new Zf(this._client)}}(function(e){e.Completions=Zf})(Ki||(Ki={}));var st=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Yn=function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},bn,Wl,gr,gi,cr,Es,Ys,As,Wi,Wn,Mi,Ti,Ha,Ea,Ra,fc,hc,_c,dc,mc,vc,pc;class hr extends Nf{constructor(){super(...arguments),bn.add(this),Wl.set(this,[]),gr.set(this,{}),gi.set(this,{}),cr.set(this,void 0),Es.set(this,void 0),Ys.set(this,void 0),As.set(this,void 0),Wi.set(this,void 0),Wn.set(this,void 0),Mi.set(this,void 0),Ti.set(this,void 0),Ha.set(this,void 0)}[(Wl=new WeakMap,gr=new WeakMap,gi=new WeakMap,cr=new WeakMap,Es=new WeakMap,Ys=new WeakMap,As=new WeakMap,Wi=new WeakMap,Wn=new WeakMap,Mi=new WeakMap,Ti=new WeakMap,Ha=new WeakMap,bn=new WeakSet,Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):t.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,c)=>n.push({resolve:a,reject:c})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const n=new hr;return n._run(()=>n._fromReadableStream(t)),n}async _fromReadableStream(t,n){var a;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Br.fromReadableStream(t,this.controller);for await(const c of s)st(this,bn,"m",Ea).call(this,c);if((a=s.controller.signal)!=null&&a.aborted)throw new fr;return this._addRun(st(this,bn,"m",Ra).call(this))}toReadableStream(){return new Br(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,n,r,s,a){const c=new hr;return c._run(()=>c._runToolAssistantStream(t,n,r,s,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),c}async _createToolAssistantStream(t,n,r,s,a){var R;const c=a==null?void 0:a.signal;c&&(c.aborted&&this.controller.abort(),c.addEventListener("abort",()=>this.controller.abort()));const d={...s,stream:!0},y=await t.submitToolOutputs(n,r,d,{...a,signal:this.controller.signal});this._connected();for await(const T of y)st(this,bn,"m",Ea).call(this,T);if((R=y.controller.signal)!=null&&R.aborted)throw new fr;return this._addRun(st(this,bn,"m",Ra).call(this))}static createThreadAssistantStream(t,n,r){const s=new hr;return s._run(()=>s._threadAssistantStream(t,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(t,n,r,s){const a=new hr;return a._run(()=>a._runAssistantStream(t,n,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return st(this,Mi,"f")}currentRun(){return st(this,Ti,"f")}currentMessageSnapshot(){return st(this,cr,"f")}currentRunStepSnapshot(){return st(this,Ha,"f")}async finalRunSteps(){return await this.done(),Object.values(st(this,gr,"f"))}async finalMessages(){return await this.done(),Object.values(st(this,gi,"f"))}async finalRun(){if(await this.done(),!st(this,Es,"f"))throw Error("Final run was not received.");return st(this,Es,"f")}async _createThreadAssistantStream(t,n,r){var d;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},c=await t.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const y of c)st(this,bn,"m",Ea).call(this,y);if((d=c.controller.signal)!=null&&d.aborted)throw new fr;return this._addRun(st(this,bn,"m",Ra).call(this))}async _createAssistantStream(t,n,r,s){var y;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const c={...r,stream:!0},d=await t.create(n,c,{...s,signal:this.controller.signal});this._connected();for await(const R of d)st(this,bn,"m",Ea).call(this,R);if((y=d.controller.signal)!=null&&y.aborted)throw new fr;return this._addRun(st(this,bn,"m",Ra).call(this))}static accumulateDelta(t,n){for(const[r,s]of Object.entries(n)){if(!t.hasOwnProperty(r)){t[r]=s;continue}let a=t[r];if(a==null){t[r]=s;continue}if(r==="index"||r==="type"){t[r]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(hl(a)&&hl(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(c=>typeof c=="string"||typeof c=="number")){a.push(...s);continue}for(const c of s){if(!hl(c))throw new Error(`Expected array delta entry to be an object but got: ${c}`);const d=c.index;if(d==null)throw console.error(c),new Error("Expected array delta entry to have an `index` property");if(typeof d!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${d}`);const y=a[d];y==null?a.push(c):a[d]=this.accumulateDelta(y,c)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${a}`);t[r]=a}return t}_addRun(t){return t}async _threadAssistantStream(t,n,r){return await this._createThreadAssistantStream(n,t,r)}async _runAssistantStream(t,n,r,s){return await this._createAssistantStream(n,t,r,s)}async _runToolAssistantStream(t,n,r,s,a){return await this._createToolAssistantStream(r,t,n,s,a)}}Ea=function(t){if(!this.ended)switch(Yn(this,Mi,t,"f"),st(this,bn,"m",_c).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":st(this,bn,"m",pc).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":st(this,bn,"m",hc).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":st(this,bn,"m",fc).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Ra=function(){if(this.ended)throw new At("stream has ended, this shouldn't happen");if(!st(this,Es,"f"))throw Error("Final run has not been received");return st(this,Es,"f")},fc=function(t){const[n,r]=st(this,bn,"m",mc).call(this,t,st(this,cr,"f"));Yn(this,cr,n,"f"),st(this,gi,"f")[n.id]=n;for(const s of r){const a=n.content[s.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,n),t.data.delta.content)for(const s of t.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,c=n.content[s.index];if(c&&c.type=="text")this._emit("textDelta",a,c.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=st(this,Ys,"f")){if(st(this,As,"f"))switch(st(this,As,"f").type){case"text":this._emit("textDone",st(this,As,"f").text,st(this,cr,"f"));break;case"image_file":this._emit("imageFileDone",st(this,As,"f").image_file,st(this,cr,"f"));break}Yn(this,Ys,s.index,"f")}Yn(this,As,n.content[s.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(st(this,Ys,"f")!==void 0){const s=t.data.content[st(this,Ys,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,st(this,cr,"f"));break;case"text":this._emit("textDone",s.text,st(this,cr,"f"));break}}st(this,cr,"f")&&this._emit("messageDone",t.data),Yn(this,cr,void 0,"f")}},hc=function(t){const n=st(this,bn,"m",dc).call(this,t);switch(Yn(this,Ha,n,"f"),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const r=t.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==st(this,Wi,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(st(this,Wn,"f")&&this._emit("toolCallDone",st(this,Wn,"f")),Yn(this,Wi,a.index,"f"),Yn(this,Wn,n.step_details.tool_calls[a.index],"f"),st(this,Wn,"f")&&this._emit("toolCallCreated",st(this,Wn,"f")));this._emit("runStepDelta",t.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Yn(this,Ha,void 0,"f"),t.data.step_details.type=="tool_calls"&&st(this,Wn,"f")&&(this._emit("toolCallDone",st(this,Wn,"f")),Yn(this,Wn,void 0,"f")),this._emit("runStepDone",t.data,n);break}},_c=function(t){st(this,Wl,"f").push(t),this._emit("event",t)},dc=function(t){switch(t.event){case"thread.run.step.created":return st(this,gr,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let n=st(this,gr,"f")[t.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=t.data;if(r.delta){const s=hr.accumulateDelta(n,r.delta);st(this,gr,"f")[t.data.id]=s}return st(this,gr,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":st(this,gr,"f")[t.data.id]=t.data;break}if(st(this,gr,"f")[t.data.id])return st(this,gr,"f")[t.data.id];throw new Error("No snapshot available")},mc=function(t,n){let r=[];switch(t.event){case"thread.message.created":return[t.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=t.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in n.content){let c=n.content[a.index];n.content[a.index]=st(this,bn,"m",vc).call(this,a,c)}else n.content[a.index]=a,r.push(a);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},vc=function(t,n){return hr.accumulateDelta(n,t)},pc=function(t){switch(Yn(this,Ti,t.data,"f"),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Yn(this,Es,t.data,"f"),st(this,Wn,"f")&&(this._emit("toolCallDone",st(this,Wn,"f")),Yn(this,Wn,void 0,"f"));break}};class Gi extends Ot{create(t,n,r){return this._client.post(`/threads/${t}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/threads/${t}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(t,n,r,s){return this._client.post(`/threads/${t}/messages/${n}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(t,n={},r){return Hn(n)?this.list(t,{},n):this._client.getAPIList(`/threads/${t}/messages`,Ro,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n,r){return this._client.delete(`/threads/${t}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Ro extends mr{}(function(e){e.MessagesPage=Ro})(Gi||(Gi={}));class Qi extends Ot{retrieve(t,n,r,s={},a){return Hn(s)?this.retrieve(t,n,r,{},s):this._client.get(`/threads/${t}/runs/${n}/steps/${r}`,{query:s,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(t,n,r={},s){return Hn(r)?this.list(t,n,{},r):this._client.getAPIList(`/threads/${t}/runs/${n}/steps`,go,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class go extends mr{}(function(e){e.RunStepsPage=go})(Qi||(Qi={}));class zi extends Ot{constructor(){super(...arguments),this.steps=new Qi(this._client)}create(t,n,r){const{include:s,...a}=n;return this._client.post(`/threads/${t}/runs`,{query:{include:s},body:a,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}retrieve(t,n,r){return this._client.get(`/threads/${t}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(t,n,r,s){return this._client.post(`/threads/${t}/runs/${n}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(t,n={},r){return Hn(n)?this.list(t,{},n):this._client.getAPIList(`/threads/${t}/runs`,Mo,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(t,n,r){return this._client.post(`/threads/${t}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const s=await this.create(t,n,r);return await this.poll(t,s.id,r)}createAndStream(t,n,r){return hr.createAssistantStream(t,this._client.beta.threads.runs,n,r)}async poll(t,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:c}=await this.retrieve(t,n,{...r,headers:{...r==null?void 0:r.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let d=5e3;if(r!=null&&r.pollIntervalMs)d=r.pollIntervalMs;else{const y=c.headers.get("openai-poll-after-ms");if(y){const R=parseInt(y);isNaN(R)||(d=R)}}await Ja(d);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(t,n,r){return hr.createAssistantStream(t,this._client.beta.threads.runs,n,r)}submitToolOutputs(t,n,r,s){return this._client.post(`/threads/${t}/runs/${n}/submit_tool_outputs`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(t,n,r,s){const a=await this.submitToolOutputs(t,n,r,s);return await this.poll(t,a.id,s)}submitToolOutputsStream(t,n,r,s){return hr.createToolAssistantStream(t,n,this._client.beta.threads.runs,r,s)}}class Mo extends mr{}(function(e){e.RunsPage=Mo,e.Steps=Qi,e.RunStepsPage=go})(zi||(zi={}));class Zi extends Ot{constructor(){super(...arguments),this.runs=new zi(this._client),this.messages=new Gi(this._client)}create(t={},n){return Hn(t)?this.create({},t):this._client.post("/threads",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/threads/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/threads/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n){return this._client.delete(`/threads/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}createAndRun(t,n){return this._client.post("/threads/runs",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:t.stream??!1})}async createAndRunPoll(t,n){const r=await this.createAndRun(t,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(t,n){return hr.createThreadAssistantStream(t,this._client.beta.threads,n)}}(function(e){e.Runs=zi,e.RunsPage=Mo,e.Messages=Gi,e.MessagesPage=Ro})(Zi||(Zi={}));const Rm=async e=>{const t=await Promise.allSettled(e),n=t.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of t)s.status==="fulfilled"&&r.push(s.value);return r};let Ji=class extends Ot{create(t,n,r){return this._client.post(`/vector_stores/${t}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/vector_stores/${t}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(t,n={},r){return Hn(n)?this.list(t,{},n):this._client.getAPIList(`/vector_stores/${t}/files`,B0,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n,r){return this._client.delete(`/vector_stores/${t}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const s=await this.create(t,n,r);return await this.poll(t,s.id,r)}async poll(t,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const a=await this.retrieve(t,n,{...r,headers:s}).withResponse(),c=a.data;switch(c.status){case"in_progress":let d=5e3;if(r!=null&&r.pollIntervalMs)d=r.pollIntervalMs;else{const y=a.response.headers.get("openai-poll-after-ms");if(y){const R=parseInt(y);isNaN(R)||(d=R)}}await Ja(d);break;case"failed":case"completed":return c}}}async upload(t,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(t,{file_id:s.id},r)}async uploadAndPoll(t,n,r){const s=await this.upload(t,n,r);return await this.poll(t,s.id,r)}};class B0 extends mr{}(function(e){e.VectorStoreFilesPage=B0})(Ji||(Ji={}));class e0 extends Ot{create(t,n,r){return this._client.post(`/vector_stores/${t}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/vector_stores/${t}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(t,n,r){return this._client.post(`/vector_stores/${t}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const s=await this.create(t,n);return await this.poll(t,s.id,r)}listFiles(t,n,r={},s){return Hn(r)?this.listFiles(t,n,{},r):this._client.getAPIList(`/vector_stores/${t}/file_batches/${n}/files`,B0,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}async poll(t,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:c}=await this.retrieve(t,n,{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let d=5e3;if(r!=null&&r.pollIntervalMs)d=r.pollIntervalMs;else{const y=c.headers.get("openai-poll-after-ms");if(y){const R=parseInt(y);isNaN(R)||(d=R)}}await Ja(d);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(t,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(s==null?void 0:s.maxConcurrency)??5,c=Math.min(a,n.length),d=this._client,y=n.values(),R=[...r];async function T(X){for(let q of X){const he=await d.files.create({file:q,purpose:"assistants"},s);R.push(he.id)}}const x=Array(c).fill(y).map(T);return await Rm(x),await this.createAndPoll(t,{file_ids:R})}}e0||(e0={});class t0 extends Ot{constructor(){super(...arguments),this.files=new Ji(this._client),this.fileBatches=new e0(this._client)}create(t,n){return this._client.post("/vector_stores",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/vector_stores/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/vector_stores/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(t={},n){return Hn(t)?this.list({},t):this._client.getAPIList("/vector_stores",To,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(t,n){return this._client.delete(`/vector_stores/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class To extends mr{}(function(e){e.VectorStoresPage=To,e.Files=Ji,e.VectorStoreFilesPage=B0,e.FileBatches=e0})(t0||(t0={}));class n0 extends Ot{constructor(){super(...arguments),this.vectorStores=new t0(this._client),this.chat=new Ki(this._client),this.assistants=new ji(this._client),this.threads=new Zi(this._client)}}(function(e){e.VectorStores=t0,e.VectorStoresPage=To,e.Chat=Ki,e.Assistants=ji,e.AssistantsPage=Ao,e.Threads=Zi})(n0||(n0={}));class r0 extends Ot{create(t,n){return this._client.post("/completions",{body:t,...n,stream:t.stream??!1})}}r0||(r0={});class s0 extends Ot{create(t,n){return this._client.post("/embeddings",{body:t,...n})}}s0||(s0={});class a0 extends Ot{create(t,n){return this._client.post("/files",ra({body:t,...n}))}retrieve(t,n){return this._client.get(`/files/${t}`,n)}list(t={},n){return Hn(t)?this.list({},t):this._client.getAPIList("/files",Bo,{query:t,...n})}del(t,n){return this._client.delete(`/files/${t}`,n)}content(t,n){return this._client.get(`/files/${t}/content`,{...n,__binaryResponse:!0})}retrieveContent(t,n){return this._client.get(`/files/${t}/content`,{...n,headers:{Accept:"application/json",...n==null?void 0:n.headers}})}async waitForProcessing(t,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let c=await this.retrieve(t);for(;!c.status||!s.has(c.status);)if(await Ja(n),c=await this.retrieve(t),Date.now()-a>r)throw new wo({message:`Giving up on waiting for file ${t} to finish processing after ${r} milliseconds.`});return c}}class Bo extends So{}(function(e){e.FileObjectsPage=Bo})(a0||(a0={}));class i0 extends Ot{list(t,n={},r){return Hn(n)?this.list(t,{},n):this._client.getAPIList(`/fine_tuning/jobs/${t}/checkpoints`,Co,{query:n,...r})}}class Co extends mr{}(function(e){e.FineTuningJobCheckpointsPage=Co})(i0||(i0={}));class l0 extends Ot{constructor(){super(...arguments),this.checkpoints=new i0(this._client)}create(t,n){return this._client.post("/fine_tuning/jobs",{body:t,...n})}retrieve(t,n){return this._client.get(`/fine_tuning/jobs/${t}`,n)}list(t={},n){return Hn(t)?this.list({},t):this._client.getAPIList("/fine_tuning/jobs",Io,{query:t,...n})}cancel(t,n){return this._client.post(`/fine_tuning/jobs/${t}/cancel`,n)}listEvents(t,n={},r){return Hn(n)?this.listEvents(t,{},n):this._client.getAPIList(`/fine_tuning/jobs/${t}/events`,Oo,{query:n,...r})}}class Io extends mr{}class Oo extends mr{}(function(e){e.FineTuningJobsPage=Io,e.FineTuningJobEventsPage=Oo,e.Checkpoints=i0,e.FineTuningJobCheckpointsPage=Co})(l0||(l0={}));class o0 extends Ot{constructor(){super(...arguments),this.jobs=new l0(this._client)}}(function(e){e.Jobs=l0,e.FineTuningJobsPage=Io,e.FineTuningJobEventsPage=Oo})(o0||(o0={}));class c0 extends Ot{createVariation(t,n){return this._client.post("/images/variations",ra({body:t,...n}))}edit(t,n){return this._client.post("/images/edits",ra({body:t,...n}))}generate(t,n){return this._client.post("/images/generations",{body:t,...n})}}c0||(c0={});class u0 extends Ot{retrieve(t,n){return this._client.get(`/models/${t}`,n)}list(t){return this._client.getAPIList("/models",Po,t)}del(t,n){return this._client.delete(`/models/${t}`,n)}}class Po extends So{}(function(e){e.ModelsPage=Po})(u0||(u0={}));class f0 extends Ot{create(t,n){return this._client.post("/moderations",{body:t,...n})}}f0||(f0={});class h0 extends Ot{create(t,n,r){return this._client.post(`/uploads/${t}/parts`,ra({body:n,...r}))}}h0||(h0={});class _0 extends Ot{constructor(){super(...arguments),this.parts=new h0(this._client)}create(t,n){return this._client.post("/uploads",{body:t,...n})}cancel(t,n){return this._client.post(`/uploads/${t}/cancel`,n)}complete(t,n,r){return this._client.post(`/uploads/${t}/complete`,{body:n,...r})}}(function(e){e.Parts=h0})(_0||(_0={}));var Jf;class nn extends U4{constructor({baseURL:t=mi("OPENAI_BASE_URL"),apiKey:n=mi("OPENAI_API_KEY"),organization:r=mi("OPENAI_ORG_ID")??null,project:s=mi("OPENAI_PROJECT_ID")??null,...a}={}){if(n===void 0)throw new At("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const c={apiKey:n,organization:r,project:s,...a,baseURL:t||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&nm())throw new At(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:c.baseURL,timeout:c.timeout??6e5,httpAgent:c.httpAgent,maxRetries:c.maxRetries,fetch:c.fetch}),this.completions=new r0(this),this.chat=new ki(this),this.embeddings=new s0(this),this.files=new a0(this),this.images=new c0(this),this.audio=new Di(this),this.moderations=new f0(this),this.models=new u0(this),this.fineTuning=new o0(this),this.beta=new n0(this),this.batches=new Xi(this),this.uploads=new _0(this),this._options=c,this.apiKey=n,this.organization=r,this.project=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(t){return _m(t,{arrayFormat:"brackets"})}}Jf=nn;nn.OpenAI=Jf;nn.DEFAULT_TIMEOUT=6e5;nn.OpenAIError=At;nn.APIError=wn;nn.APIConnectionError=T0;nn.APIConnectionTimeoutError=wo;nn.APIUserAbortError=fr;nn.NotFoundError=Sf;nn.ConflictError=xf;nn.RateLimitError=Ef;nn.BadRequestError=bf;nn.AuthenticationError=yf;nn.InternalServerError=Rf;nn.PermissionDeniedError=wf;nn.UnprocessableEntityError=Af;nn.toFile=hf;nn.fileFromPath=lf;(function(e){e.Page=So,e.CursorPage=mr,e.Completions=r0,e.Chat=ki,e.Embeddings=s0,e.Files=a0,e.FileObjectsPage=Bo,e.Images=c0,e.Audio=Di,e.Moderations=f0,e.Models=u0,e.ModelsPage=Po,e.FineTuning=o0,e.Beta=n0,e.Batches=Xi,e.BatchesPage=xo,e.Uploads=_0})(nn||(nn={}));const gm=Pd("PromptStore",()=>({intialPrompt:"You will help me to identify any dangerous objects in the environment, only talk objectively. I am a blind person, explain to me briefly where I am now, tell me if it is a safe environment for me to walk forward. If "})),Mm=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},Tm={class:"flex flex-row justify-evenly overflow-hidden window bg-stone-900"},Bm={class:"my-16"},Cm={class:"w-1/2 h-full border border-gray-300 rounded-lg p-16"},Im={__name:"HomeView",setup(e){const t=L3();let n=null;const r=gm(),s=is([{text:"Hi, please ask anything that your camera can see.",bot:!0}]),a=new T4({bitRate:128}),c=is(!1),d=async function(){if(!c.value)return;c.value=!1;const[K,ye]=await a.stop().getMp3(),pe=new File(K,"my_speech.mp3",{type:ye.type,lastModified:Date.now()}),Ue=URL.createObjectURL(pe);y(Ue)},y=function(K){const ye=new Audio(K);ye.addEventListener("ended",function(){console.log("done")}),ye.play()},R=async function(K){const pe=(await n.audio.speech.create({model:"tts-1",voice:"nova",input:K})).body.getReader();let Ue=[],rt=!1;for(;!rt;){const{done:Ze,value:ot}=await pe.read();if(Ze){rt=!0;break}Ue.push(ot)}const Ge=new Blob(Ue,{type:"application/octet-stream"}),at=URL.createObjectURL(Ge);y(at)},T=function(){console.log("user start")},x=async function(K){try{return(await n.chat.completions.create({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:r.intialPrompt},{type:"image_url",image_url:{url:K}}]}]})).choices[0].message.content}catch{return""}};let X,q,he,ve;const we=async function(){console.log("hi"),q.width=X.videoWidth,q.height=X.videoHeight,he.drawImage(X,0,0,q.width,q.height);const K=q.toDataURL("image/png");ve.src=K,y("/audio/processing.mp3");const ye=await x(K);console.log(ye),ye&&(s.value.push({text:ye,bot:!0}),await R(ye))},Xe=function(K){K.code==="Space"&&(console.log("Space key pressed"),we())};return su(()=>{n=new nn({apiKey:t.params.key,dangerouslyAllowBrowser:!0}),console.log(r.intialPrompt),X=document.getElementById("video"),q=document.getElementById("canvasElement"),he=q.getContext("2d"),ve=document.getElementById("snapshotImage");const K={video:{width:{ideal:960},height:{ideal:720}}};navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(K).then(function(ye){X.srcObject=ye,X.play()}).catch(function(ye){console.log("Error: "+ye)}):alert("getUserMedia API is not supported in your browser."),window.addEventListener("keydown",Xe),setTimeout(()=>{y("/audio/start.mp3")},1e3)}),au(()=>{window.removeEventListener("keydown",Xe),console.log("onBeforeUnmount")}),(K,ye)=>{const pe=E4;return wi(),nl("div",Tm,[Vr("div",{class:"w-1/2 h-full border border-gray-300 rounded-lg flex flex-col overflow-y-scroll",onClick:ye[2]||(ye[2]=Ue=>T())},[ye[4]||(ye[4]=Vr("h1",{className:"text-3xl font-bold text-white"},"Camera Feed",-1)),Vr("video",{id:"video",width:"400",height:"400",autoplay:"",onClick:ye[0]||(ye[0]=Ue=>we()),class:"cursor-pointer"}),Vr("div",Bm,[It(pe,{type:"warning",onClick:ye[1]||(ye[1]=wd(Ue=>d(),["stop"]))},{default:eu(()=>ye[3]||(ye[3]=[gu("Stop")])),_:1})]),ye[5]||(ye[5]=Vr("canvas",{id:"canvasElement",style:{display:"none"}},null,-1)),ye[6]||(ye[6]=Vr("img",{id:"snapshotImage",alt:"Video Snapshot",width:"400"},null,-1))]),Vr("div",Cm,[(wi(!0),nl(Mr,null,o2(s.value,(Ue,rt)=>(wi(),nl("div",{key:rt,class:"border border-gray-600 rounded-md bg-gray-600 text-white p-4 my-4"},gc(Ue.text),1))),128))])])}}},Om=Mm(Im,[["__scopeId","data-v-10c29c26"]]),Pm=P3({history:u3("/"),routes:[{path:"/:key",name:"home",component:Om}]});(function(){if(typeof window>"u")return;var e,t="ontouchstart"in window;document.createTouch||(document.createTouch=function(T,x,X,q,he,ve,we){return new n(x,X,{pageX:q,pageY:he,screenX:ve,screenY:we,clientX:q-window.pageXOffset,clientY:he-window.pageYOffset},0,0)}),document.createTouchList||(document.createTouchList=function(){for(var T=r(),x=0;x<arguments.length;x++)T[x]=arguments[x];return T.length=arguments.length,T}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(T){var x=this;do{if(x.matches(T))return x;x=x.parentElement||x.parentNode}while(x!==null&&x.nodeType===1);return null});var n=function(x,X,q,he,ve){he=he||0,ve=ve||0,this.identifier=X,this.target=x,this.clientX=q.clientX+he,this.clientY=q.clientY+ve,this.screenX=q.screenX+he,this.screenY=q.screenY+ve,this.pageX=q.pageX+he,this.pageY=q.pageY+ve};function r(){var T=[];return T.item=function(x){return this[x]||null},T.identifiedTouch=function(x){return this[x+1]||null},T}var s=!1;function a(T){return function(x){x.type==="mousedown"&&(s=!0),x.type==="mouseup"&&(s=!1),!(x.type==="mousemove"&&!s)&&((x.type==="mousedown"||!e||e&&!e.dispatchEvent)&&(e=x.target),e.closest("[data-no-touch-simulate]")==null&&c(T,x),x.type==="mouseup"&&(e=null))}}function c(T,x){var X=document.createEvent("Event");X.initEvent(T,!0,!0),X.altKey=x.altKey,X.ctrlKey=x.ctrlKey,X.metaKey=x.metaKey,X.shiftKey=x.shiftKey,X.touches=y(x),X.targetTouches=y(x),X.changedTouches=d(x),e.dispatchEvent(X)}function d(T){var x=r();return x.push(new n(e,1,T,0,0)),x}function y(T){return T.type==="mouseup"?r():d(T)}function R(){window.addEventListener("mousedown",a("touchstart"),!0),window.addEventListener("mousemove",a("touchmove"),!0),window.addEventListener("mouseup",a("touchend"),!0)}R.multiTouchOffset=75,t||new R})();const No=Ad(F3);No.use(Md());No.use(Pm);No.mount("#app");
