(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();/**
* @vue/shared v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function mo(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Ht={},ra=[],kr=()=>{},D_=()=>!1,T0=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),vo=e=>e.startsWith("onUpdate:"),bn=Object.assign,po=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},X_=Object.prototype.hasOwnProperty,Ct=(e,t)=>X_.call(e,t),pt=Array.isArray,sa=e=>B0(e)==="[object Map]",Yc=e=>B0(e)==="[object Set]",St=e=>typeof e=="function",un=e=>typeof e=="string",vs=e=>typeof e=="symbol",zt=e=>e!==null&&typeof e=="object",Kc=e=>(zt(e)||St(e))&&St(e.then)&&St(e.catch),Wc=Object.prototype.toString,B0=e=>Wc.call(e),j_=e=>B0(e).slice(8,-1),Gc=e=>B0(e)==="[object Object]",bo=e=>un(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,$a=mo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),C0=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},q_=/-(\w)/g,ms=C0(e=>e.replace(q_,(t,n)=>n?n.toUpperCase():"")),U_=/\B([A-Z])/g,Vs=C0(e=>e.replace(U_,"-$1").toLowerCase()),zc=C0(e=>e.charAt(0).toUpperCase()+e.slice(1)),ul=C0(e=>e?`on${zc(e)}`:""),_s=(e,t)=>!Object.is(e,t),fl=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Qc=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Y_=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let g1;const I0=()=>g1||(g1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function yo(e){if(pt(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=un(r)?z_(r):yo(r);if(s)for(const a in s)t[a]=s[a]}return t}else if(un(e)||zt(e))return e}const K_=/;(?![^(]*\))/g,W_=/:([^]+)/,G_=/\/\*[^]*?\*\//g;function z_(e){const t={};return e.replace(G_,"").split(K_).forEach(n=>{if(n){const r=n.split(W_);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function wo(e){let t="";if(un(e))t=e;else if(pt(e))for(let n=0;n<e.length;n++){const r=wo(e[n]);r&&(t+=r+" ")}else if(zt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Q_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Z_=mo(Q_);function Zc(e){return!!e||e===""}const Jc=e=>!!(e&&e.__v_isRef===!0),eu=e=>un(e)?e:e==null?"":pt(e)||zt(e)&&(e.toString===Wc||!St(e.toString))?Jc(e)?eu(e.value):JSON.stringify(e,tu,2):String(e),tu=(e,t)=>Jc(t)?tu(e,t.value):sa(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],a)=>(n[hl(r,a)+" =>"]=s,n),{})}:Yc(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>hl(n))}:vs(t)?hl(t):zt(t)&&!pt(t)&&!Gc(t)?String(t):t,hl=(e,t="")=>{var n;return vs(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let On;class nu{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=On,!t&&On&&(this.index=(On.scopes||(On.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=On;try{return On=this,t()}finally{On=n}}}on(){On=this}off(){On=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function ru(e){return new nu(e)}function su(){return On}function J_(e,t=!1){On&&On.cleanups.push(e)}let Vt;const _l=new WeakSet;class au{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,On&&On.active&&On.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,_l.has(this)&&(_l.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||lu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,A1(this),ou(this);const t=Vt,n=wr;Vt=this,wr=!0;try{return this.fn()}finally{cu(this),Vt=t,wr=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)go(t);this.deps=this.depsTail=void 0,A1(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?_l.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Vl(this)&&this.run()}get dirty(){return Vl(this)}}let iu=0,Va,Ha;function lu(e,t=!1){if(e.flags|=8,t){e.next=Ha,Ha=e;return}e.next=Va,Va=e}function So(){iu++}function xo(){if(--iu>0)return;if(Ha){let t=Ha;for(Ha=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Va;){let t=Va;for(Va=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function ou(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function cu(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),go(r),e2(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function Vl(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(uu(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function uu(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Qa))return;e.globalVersion=Qa;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Vl(e)){e.flags&=-3;return}const n=Vt,r=wr;Vt=e,wr=!0;try{ou(e);const s=e.fn(e._value);(t.version===0||_s(s,e._value))&&(e._value=s,t.version++)}catch(s){throw t.version++,s}finally{Vt=n,wr=r,cu(e),e.flags&=-3}}function go(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)go(a,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function e2(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let wr=!0;const fu=[];function ps(){fu.push(wr),wr=!1}function bs(){const e=fu.pop();wr=e===void 0?!0:e}function A1(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Vt;Vt=void 0;try{t()}finally{Vt=n}}}let Qa=0;class t2{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ao{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Vt||!wr||Vt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Vt)n=this.activeLink=new t2(Vt,this),Vt.deps?(n.prevDep=Vt.depsTail,Vt.depsTail.nextDep=n,Vt.depsTail=n):Vt.deps=Vt.depsTail=n,hu(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Vt.depsTail,n.nextDep=void 0,Vt.depsTail.nextDep=n,Vt.depsTail=n,Vt.deps===n&&(Vt.deps=r)}return n}trigger(t){this.version++,Qa++,this.notify(t)}notify(t){So();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{xo()}}}function hu(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)hu(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Xi=new WeakMap,Ls=Symbol(""),Hl=Symbol(""),Za=Symbol("");function Tn(e,t,n){if(wr&&Vt){let r=Xi.get(e);r||Xi.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new Ao),s.map=r,s.key=n),s.track()}}function Qr(e,t,n,r,s,a){const o=Xi.get(e);if(!o){Qa++;return}const d=p=>{p&&p.trigger()};if(So(),t==="clear")o.forEach(d);else{const p=pt(e),A=p&&bo(n);if(p&&n==="length"){const g=Number(r);o.forEach((S,H)=>{(H==="length"||H===Za||!vs(H)&&H>=g)&&d(S)})}else switch((n!==void 0||o.has(void 0))&&d(o.get(n)),A&&d(o.get(Za)),t){case"add":p?A&&d(o.get("length")):(d(o.get(Ls)),sa(e)&&d(o.get(Hl)));break;case"delete":p||(d(o.get(Ls)),sa(e)&&d(o.get(Hl)));break;case"set":sa(e)&&d(o.get(Ls));break}}xo()}function n2(e,t){const n=Xi.get(e);return n&&n.get(t)}function Ys(e){const t=Bt(e);return t===e?t:(Tn(t,"iterate",Za),ur(e)?t:t.map(Bn))}function O0(e){return Tn(e=Bt(e),"iterate",Za),e}const r2={__proto__:null,[Symbol.iterator](){return dl(this,Symbol.iterator,Bn)},concat(...e){return Ys(this).concat(...e.map(t=>pt(t)?Ys(t):t))},entries(){return dl(this,"entries",e=>(e[1]=Bn(e[1]),e))},every(e,t){return Ur(this,"every",e,t,void 0,arguments)},filter(e,t){return Ur(this,"filter",e,t,n=>n.map(Bn),arguments)},find(e,t){return Ur(this,"find",e,t,Bn,arguments)},findIndex(e,t){return Ur(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ur(this,"findLast",e,t,Bn,arguments)},findLastIndex(e,t){return Ur(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ur(this,"forEach",e,t,void 0,arguments)},includes(...e){return ml(this,"includes",e)},indexOf(...e){return ml(this,"indexOf",e)},join(e){return Ys(this).join(e)},lastIndexOf(...e){return ml(this,"lastIndexOf",e)},map(e,t){return Ur(this,"map",e,t,void 0,arguments)},pop(){return Ta(this,"pop")},push(...e){return Ta(this,"push",e)},reduce(e,...t){return E1(this,"reduce",e,t)},reduceRight(e,...t){return E1(this,"reduceRight",e,t)},shift(){return Ta(this,"shift")},some(e,t){return Ur(this,"some",e,t,void 0,arguments)},splice(...e){return Ta(this,"splice",e)},toReversed(){return Ys(this).toReversed()},toSorted(e){return Ys(this).toSorted(e)},toSpliced(...e){return Ys(this).toSpliced(...e)},unshift(...e){return Ta(this,"unshift",e)},values(){return dl(this,"values",Bn)}};function dl(e,t,n){const r=O0(e),s=r[t]();return r!==e&&!ur(e)&&(s._next=s.next,s.next=()=>{const a=s._next();return a.value&&(a.value=n(a.value)),a}),s}const s2=Array.prototype;function Ur(e,t,n,r,s,a){const o=O0(e),d=o!==e&&!ur(e),p=o[t];if(p!==s2[t]){const S=p.apply(e,a);return d?Bn(S):S}let A=n;o!==e&&(d?A=function(S,H){return n.call(this,Bn(S),H,e)}:n.length>2&&(A=function(S,H){return n.call(this,S,H,e)}));const g=p.call(o,A,r);return d&&s?s(g):g}function E1(e,t,n,r){const s=O0(e);let a=n;return s!==e&&(ur(e)?n.length>3&&(a=function(o,d,p){return n.call(this,o,d,p,e)}):a=function(o,d,p){return n.call(this,o,Bn(d),p,e)}),s[t](a,...r)}function ml(e,t,n){const r=Bt(e);Tn(r,"iterate",Za);const s=r[t](...n);return(s===-1||s===!1)&&Mo(n[0])?(n[0]=Bt(n[0]),r[t](...n)):s}function Ta(e,t,n=[]){ps(),So();const r=Bt(e)[t].apply(e,n);return xo(),bs(),r}const a2=mo("__proto__,__v_isRef,__isVue"),_u=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(vs));function i2(e){vs(e)||(e=String(e));const t=Bt(this);return Tn(t,"has",e),t.hasOwnProperty(e)}class du{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){const s=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return a;if(n==="__v_raw")return r===(s?a?v2:bu:a?pu:vu).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=pt(t);if(!s){let p;if(o&&(p=r2[n]))return p;if(n==="hasOwnProperty")return i2}const d=Reflect.get(t,n,tn(t)?t:r);return(vs(n)?_u.has(n):a2(n))||(s||Tn(t,"get",n),a)?d:tn(d)?o&&bo(n)?d:d.value:zt(d)?s?wu(d):Hs(d):d}}class mu extends du{constructor(t=!1){super(!1,t)}set(t,n,r,s){let a=t[n];if(!this._isShallow){const p=Fs(a);if(!ur(r)&&!Fs(r)&&(a=Bt(a),r=Bt(r)),!pt(t)&&tn(a)&&!tn(r))return p?!1:(a.value=r,!0)}const o=pt(t)&&bo(n)?Number(n)<t.length:Ct(t,n),d=Reflect.set(t,n,r,tn(t)?t:s);return t===Bt(s)&&(o?_s(r,a)&&Qr(t,"set",n,r):Qr(t,"add",n,r)),d}deleteProperty(t,n){const r=Ct(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Qr(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!vs(n)||!_u.has(n))&&Tn(t,"has",n),r}ownKeys(t){return Tn(t,"iterate",pt(t)?"length":Ls),Reflect.ownKeys(t)}}class l2 extends du{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const o2=new mu,c2=new l2,u2=new mu(!0);const Dl=e=>e,xi=e=>Reflect.getPrototypeOf(e);function f2(e,t,n){return function(...r){const s=this.__v_raw,a=Bt(s),o=sa(a),d=e==="entries"||e===Symbol.iterator&&o,p=e==="keys"&&o,A=s[e](...r),g=n?Dl:t?Xl:Bn;return!t&&Tn(a,"iterate",p?Hl:Ls),{next(){const{value:S,done:H}=A.next();return H?{value:S,done:H}:{value:d?[g(S[0]),g(S[1])]:g(S),done:H}},[Symbol.iterator](){return this}}}}function gi(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function h2(e,t){const n={get(s){const a=this.__v_raw,o=Bt(a),d=Bt(s);e||(_s(s,d)&&Tn(o,"get",s),Tn(o,"get",d));const{has:p}=xi(o),A=t?Dl:e?Xl:Bn;if(p.call(o,s))return A(a.get(s));if(p.call(o,d))return A(a.get(d));a!==o&&a.get(s)},get size(){const s=this.__v_raw;return!e&&Tn(Bt(s),"iterate",Ls),Reflect.get(s,"size",s)},has(s){const a=this.__v_raw,o=Bt(a),d=Bt(s);return e||(_s(s,d)&&Tn(o,"has",s),Tn(o,"has",d)),s===d?a.has(s):a.has(s)||a.has(d)},forEach(s,a){const o=this,d=o.__v_raw,p=Bt(d),A=t?Dl:e?Xl:Bn;return!e&&Tn(p,"iterate",Ls),d.forEach((g,S)=>s.call(a,A(g),A(S),o))}};return bn(n,e?{add:gi("add"),set:gi("set"),delete:gi("delete"),clear:gi("clear")}:{add(s){!t&&!ur(s)&&!Fs(s)&&(s=Bt(s));const a=Bt(this);return xi(a).has.call(a,s)||(a.add(s),Qr(a,"add",s,s)),this},set(s,a){!t&&!ur(a)&&!Fs(a)&&(a=Bt(a));const o=Bt(this),{has:d,get:p}=xi(o);let A=d.call(o,s);A||(s=Bt(s),A=d.call(o,s));const g=p.call(o,s);return o.set(s,a),A?_s(a,g)&&Qr(o,"set",s,a):Qr(o,"add",s,a),this},delete(s){const a=Bt(this),{has:o,get:d}=xi(a);let p=o.call(a,s);p||(s=Bt(s),p=o.call(a,s)),d&&d.call(a,s);const A=a.delete(s);return p&&Qr(a,"delete",s,void 0),A},clear(){const s=Bt(this),a=s.size!==0,o=s.clear();return a&&Qr(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=f2(s,e,t)}),n}function Eo(e,t){const n=h2(e,t);return(r,s,a)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(Ct(n,s)&&s in r?n:r,s,a)}const _2={get:Eo(!1,!1)},d2={get:Eo(!1,!0)},m2={get:Eo(!0,!1)};const vu=new WeakMap,pu=new WeakMap,bu=new WeakMap,v2=new WeakMap;function p2(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function b2(e){return e.__v_skip||!Object.isExtensible(e)?0:p2(j_(e))}function Hs(e){return Fs(e)?e:Ro(e,!1,o2,_2,vu)}function yu(e){return Ro(e,!1,u2,d2,pu)}function wu(e){return Ro(e,!0,c2,m2,bu)}function Ro(e,t,n,r,s){if(!zt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=s.get(e);if(a)return a;const o=b2(e);if(o===0)return e;const d=new Proxy(e,o===2?r:n);return s.set(e,d),d}function ds(e){return Fs(e)?ds(e.__v_raw):!!(e&&e.__v_isReactive)}function Fs(e){return!!(e&&e.__v_isReadonly)}function ur(e){return!!(e&&e.__v_isShallow)}function Mo(e){return e?!!e.__v_raw:!1}function Bt(e){const t=e&&e.__v_raw;return t?Bt(t):e}function To(e){return!Ct(e,"__v_skip")&&Object.isExtensible(e)&&Qc(e,"__v_skip",!0),e}const Bn=e=>zt(e)?Hs(e):e,Xl=e=>zt(e)?wu(e):e;function tn(e){return e?e.__v_isRef===!0:!1}function jn(e){return Su(e,!1)}function y2(e){return Su(e,!0)}function Su(e,t){return tn(e)?e:new w2(e,t)}class w2{constructor(t,n){this.dep=new Ao,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Bt(t),this._value=n?t:Bn(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||ur(t)||Fs(t);t=r?t:Bt(t),_s(t,n)&&(this._rawValue=t,this._value=r?t:Bn(t),this.dep.trigger())}}function Zr(e){return tn(e)?e.value:e}const S2={get:(e,t,n)=>t==="__v_raw"?e:Zr(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return tn(s)&&!tn(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function xu(e){return ds(e)?e:new Proxy(e,S2)}function x2(e){const t=pt(e)?new Array(e.length):{};for(const n in e)t[n]=A2(e,n);return t}class g2{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return n2(Bt(this._object),this._key)}}function A2(e,t,n){const r=e[t];return tn(r)?r:new g2(e,t,n)}class E2{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Ao(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Qa-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Vt!==this)return lu(this,!0),!0}get value(){const t=this.dep.track();return uu(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function R2(e,t,n=!1){let r,s;return St(e)?r=e:(r=e.get,s=e.set),new E2(r,s,n)}const Ai={},ji=new WeakMap;let Os;function M2(e,t=!1,n=Os){if(n){let r=ji.get(n);r||ji.set(n,r=[]),r.push(e)}}function T2(e,t,n=Ht){const{immediate:r,deep:s,once:a,scheduler:o,augmentJob:d,call:p}=n,A=me=>s?me:ur(me)||s===!1||s===0?fs(me,1):fs(me);let g,S,H,q,he=!1,fe=!1;if(tn(e)?(S=()=>e.value,he=ur(e)):ds(e)?(S=()=>A(e),he=!0):pt(e)?(fe=!0,he=e.some(me=>ds(me)||ur(me)),S=()=>e.map(me=>{if(tn(me))return me.value;if(ds(me))return A(me);if(St(me))return p?p(me,2):me()})):St(e)?t?S=p?()=>p(e,2):e:S=()=>{if(H){ps();try{H()}finally{bs()}}const me=Os;Os=g;try{return p?p(e,3,[q]):e(q)}finally{Os=me}}:S=kr,t&&s){const me=S,Qe=s===!0?1/0:s;S=()=>fs(me(),Qe)}const ye=su(),Se=()=>{g.stop(),ye&&po(ye.effects,g)};if(a&&t){const me=t;t=(...Qe)=>{me(...Qe),Se()}}let W=fe?new Array(e.length).fill(Ai):Ai;const Ie=me=>{if(!(!(g.flags&1)||!g.dirty&&!me))if(t){const Qe=g.run();if(s||he||(fe?Qe.some((at,ze)=>_s(at,W[ze])):_s(Qe,W))){H&&H();const at=Os;Os=g;try{const ze=[Qe,W===Ai?void 0:fe&&W[0]===Ai?[]:W,q];p?p(t,3,ze):t(...ze),W=Qe}finally{Os=at}}}else g.run()};return d&&d(Ie),g=new au(S),g.scheduler=o?()=>o(Ie,!1):Ie,q=me=>M2(me,!1,g),H=g.onStop=()=>{const me=ji.get(g);if(me){if(p)p(me,4);else for(const Qe of me)Qe();ji.delete(g)}},t?r?Ie(!0):W=g.run():o?o(Ie.bind(null,!0),!0):g.run(),Se.pause=g.pause.bind(g),Se.resume=g.resume.bind(g),Se.stop=Se,Se}function fs(e,t=1/0,n){if(t<=0||!zt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,tn(e))fs(e.value,t,n);else if(pt(e))for(let r=0;r<e.length;r++)fs(e[r],t,n);else if(Yc(e)||sa(e))e.forEach(r=>{fs(r,t,n)});else if(Gc(e)){for(const r in e)fs(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&fs(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function oi(e,t,n,r){try{return r?e(...r):e()}catch(s){P0(s,t,n)}}function $r(e,t,n,r){if(St(e)){const s=oi(e,t,n,r);return s&&Kc(s)&&s.catch(a=>{P0(a,t,n)}),s}if(pt(e)){const s=[];for(let a=0;a<e.length;a++)s.push($r(e[a],t,n,r));return s}}function P0(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Ht;if(t){let d=t.parent;const p=t.proxy,A=`https://vuejs.org/error-reference/#runtime-${n}`;for(;d;){const g=d.ec;if(g){for(let S=0;S<g.length;S++)if(g[S](e,p,A)===!1)return}d=d.parent}if(a){ps(),oi(a,null,10,[e,p,A]),bs();return}}B2(e,n,s,r,o)}function B2(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const Pn=[];let Cr=-1;const aa=[];let os=null,Zs=0;const gu=Promise.resolve();let qi=null;function hs(e){const t=qi||gu;return e?t.then(this?e.bind(this):e):t}function C2(e){let t=Cr+1,n=Pn.length;for(;t<n;){const r=t+n>>>1,s=Pn[r],a=Ja(s);a<e||a===e&&s.flags&2?t=r+1:n=r}return t}function Bo(e){if(!(e.flags&1)){const t=Ja(e),n=Pn[Pn.length-1];!n||!(e.flags&2)&&t>=Ja(n)?Pn.push(e):Pn.splice(C2(t),0,e),e.flags|=1,Au()}}function Au(){qi||(qi=gu.then(Ru))}function I2(e){pt(e)?aa.push(...e):os&&e.id===-1?os.splice(Zs+1,0,e):e.flags&1||(aa.push(e),e.flags|=1),Au()}function R1(e,t,n=Cr+1){for(;n<Pn.length;n++){const r=Pn[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;Pn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Eu(e){if(aa.length){const t=[...new Set(aa)].sort((n,r)=>Ja(n)-Ja(r));if(aa.length=0,os){os.push(...t);return}for(os=t,Zs=0;Zs<os.length;Zs++){const n=os[Zs];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}os=null,Zs=0}}const Ja=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ru(e){try{for(Cr=0;Cr<Pn.length;Cr++){const t=Pn[Cr];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),oi(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Cr<Pn.length;Cr++){const t=Pn[Cr];t&&(t.flags&=-2)}Cr=-1,Pn.length=0,Eu(),qi=null,(Pn.length||aa.length)&&Ru()}}let cr=null,Mu=null;function Ui(e){const t=cr;return cr=e,Mu=e&&e.type.__scopeId||null,t}function ia(e,t=cr,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&N1(-1);const a=Ui(t);let o;try{o=e(...s)}finally{Ui(a),r._d&&N1(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Cs(e,t,n,r){const s=e.dirs,a=t&&t.dirs;for(let o=0;o<s.length;o++){const d=s[o];a&&(d.oldValue=a[o].value);let p=d.dir[r];p&&(ps(),$r(p,n,8,[e.el,d,e,t]),bs())}}const O2=Symbol("_vte"),P2=e=>e.__isTeleport;function Co(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Co(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Vr(e,t){return St(e)?bn({name:e.name},t,{setup:e}):e}function Tu(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function jl(e,t,n,r,s=!1){if(pt(e)){e.forEach((he,fe)=>jl(he,t&&(pt(t)?t[fe]:t),n,r,s));return}if(Da(r)&&!s)return;const a=r.shapeFlag&4?$o(r.component):r.el,o=s?null:a,{i:d,r:p}=e,A=t&&t.r,g=d.refs===Ht?d.refs={}:d.refs,S=d.setupState,H=Bt(S),q=S===Ht?()=>!1:he=>Ct(H,he);if(A!=null&&A!==p&&(un(A)?(g[A]=null,q(A)&&(S[A]=null)):tn(A)&&(A.value=null)),St(p))oi(p,d,12,[o,g]);else{const he=un(p),fe=tn(p);if(he||fe){const ye=()=>{if(e.f){const Se=he?q(p)?S[p]:g[p]:p.value;s?pt(Se)&&po(Se,a):pt(Se)?Se.includes(a)||Se.push(a):he?(g[p]=[a],q(p)&&(S[p]=g[p])):(p.value=[a],e.k&&(g[e.k]=p.value))}else he?(g[p]=o,q(p)&&(S[p]=o)):fe&&(p.value=o,e.k&&(g[e.k]=o))};o?(ye.id=-1,er(ye,n)):ye()}}}I0().requestIdleCallback;I0().cancelIdleCallback;const Da=e=>!!e.type.__asyncLoader,Bu=e=>e.type.__isKeepAlive;function Io(e,t){Cu(e,"a",t)}function Oo(e,t){Cu(e,"da",t)}function Cu(e,t,n=Sn){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(N0(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Bu(s.parent.vnode)&&N2(r,t,n,s),s=s.parent}}function N2(e,t,n,r){const s=N0(t,e,r,!0);k0(()=>{po(r[t],s)},n)}function N0(e,t,n=Sn,r=!1){if(n){const s=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...o)=>{ps();const d=ui(n),p=$r(t,n,e,o);return d(),bs(),p});return r?s.unshift(a):s.push(a),a}}const Jr=e=>(t,n=Sn)=>{(!ri||e==="sp")&&N0(e,(...r)=>t(...r),n)},L2=Jr("bm"),L0=Jr("m"),k2=Jr("bu"),F2=Jr("u"),Po=Jr("bum"),k0=Jr("um"),$2=Jr("sp"),V2=Jr("rtg"),H2=Jr("rtc");function D2(e,t=Sn){N0("ec",e,t)}const X2=Symbol.for("v-ndc");function j2(e,t,n,r){let s;const a=n,o=pt(e);if(o||un(e)){const d=o&&ds(e);let p=!1;d&&(p=!ur(e),e=O0(e)),s=new Array(e.length);for(let A=0,g=e.length;A<g;A++)s[A]=t(p?Bn(e[A]):e[A],A,void 0,a)}else if(typeof e=="number"){s=new Array(e);for(let d=0;d<e;d++)s[d]=t(d+1,d,void 0,a)}else if(zt(e))if(e[Symbol.iterator])s=Array.from(e,(d,p)=>t(d,p,void 0,a));else{const d=Object.keys(e);s=new Array(d.length);for(let p=0,A=d.length;p<A;p++){const g=d[p];s[p]=t(e[g],g,p,a)}}else s=[];return s}const ql=e=>e?zu(e)?$o(e):ql(e.parent):null,Xa=bn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ql(e.parent),$root:e=>ql(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>No(e),$forceUpdate:e=>e.f||(e.f=()=>{Bo(e.update)}),$nextTick:e=>e.n||(e.n=hs.bind(e.proxy)),$watch:e=>hd.bind(e)}),vl=(e,t)=>e!==Ht&&!e.__isScriptSetup&&Ct(e,t),q2={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:a,accessCache:o,type:d,appContext:p}=e;let A;if(t[0]!=="$"){const q=o[t];if(q!==void 0)switch(q){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return a[t]}else{if(vl(r,t))return o[t]=1,r[t];if(s!==Ht&&Ct(s,t))return o[t]=2,s[t];if((A=e.propsOptions[0])&&Ct(A,t))return o[t]=3,a[t];if(n!==Ht&&Ct(n,t))return o[t]=4,n[t];Ul&&(o[t]=0)}}const g=Xa[t];let S,H;if(g)return t==="$attrs"&&Tn(e.attrs,"get",""),g(e);if((S=d.__cssModules)&&(S=S[t]))return S;if(n!==Ht&&Ct(n,t))return o[t]=4,n[t];if(H=p.config.globalProperties,Ct(H,t))return H[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:a}=e;return vl(s,t)?(s[t]=n,!0):r!==Ht&&Ct(r,t)?(r[t]=n,!0):Ct(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:a}},o){let d;return!!n[o]||e!==Ht&&Ct(e,o)||vl(t,o)||(d=a[0])&&Ct(d,o)||Ct(r,o)||Ct(Xa,o)||Ct(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Ct(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function M1(e){return pt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Ul=!0;function U2(e){const t=No(e),n=e.proxy,r=e.ctx;Ul=!1,t.beforeCreate&&T1(t.beforeCreate,e,"bc");const{data:s,computed:a,methods:o,watch:d,provide:p,inject:A,created:g,beforeMount:S,mounted:H,beforeUpdate:q,updated:he,activated:fe,deactivated:ye,beforeDestroy:Se,beforeUnmount:W,destroyed:Ie,unmounted:me,render:Qe,renderTracked:at,renderTriggered:ze,errorCaptured:nt,serverPrefetch:Je,expose:ut,inheritAttrs:ht,components:jt,directives:Dt,filters:Yn}=t;if(A&&Y2(A,r,null),o)for(const _t in o){const gt=o[_t];St(gt)&&(r[_t]=gt.bind(n))}if(s){const _t=s.call(n,n);zt(_t)&&(e.data=Hs(_t))}if(Ul=!0,a)for(const _t in a){const gt=a[_t],Nn=St(gt)?gt.bind(n,n):St(gt.get)?gt.get.bind(n,n):kr,ar=!St(gt)&&St(gt.set)?gt.set.bind(n):kr,Ln=Zt({get:Nn,set:ar});Object.defineProperty(r,_t,{enumerable:!0,configurable:!0,get:()=>Ln.value,set:nn=>Ln.value=nn})}if(d)for(const _t in d)Iu(d[_t],r,n,_t);if(p){const _t=St(p)?p.call(n):p;Reflect.ownKeys(_t).forEach(gt=>{la(gt,_t[gt])})}g&&T1(g,e,"c");function It(_t,gt){pt(gt)?gt.forEach(Nn=>_t(Nn.bind(n))):gt&&_t(gt.bind(n))}if(It(L2,S),It(L0,H),It(k2,q),It(F2,he),It(Io,fe),It(Oo,ye),It(D2,nt),It(H2,at),It(V2,ze),It(Po,W),It(k0,me),It($2,Je),pt(ut))if(ut.length){const _t=e.exposed||(e.exposed={});ut.forEach(gt=>{Object.defineProperty(_t,gt,{get:()=>n[gt],set:Nn=>n[gt]=Nn})})}else e.exposed||(e.exposed={});Qe&&e.render===kr&&(e.render=Qe),ht!=null&&(e.inheritAttrs=ht),jt&&(e.components=jt),Dt&&(e.directives=Dt),Je&&Tu(e)}function Y2(e,t,n=kr){pt(e)&&(e=Yl(e));for(const r in e){const s=e[r];let a;zt(s)?"default"in s?a=sr(s.from||r,s.default,!0):a=sr(s.from||r):a=sr(s),tn(a)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):t[r]=a}}function T1(e,t,n){$r(pt(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Iu(e,t,n,r){let s=r.includes(".")?qu(n,r):()=>n[r];if(un(e)){const a=t[e];St(a)&&Fr(s,a)}else if(St(e))Fr(s,e.bind(n));else if(zt(e))if(pt(e))e.forEach(a=>Iu(a,t,n,r));else{const a=St(e.handler)?e.handler.bind(n):t[e.handler];St(a)&&Fr(s,a,e)}}function No(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:a,config:{optionMergeStrategies:o}}=e.appContext,d=a.get(t);let p;return d?p=d:!s.length&&!n&&!r?p=t:(p={},s.length&&s.forEach(A=>Yi(p,A,o,!0)),Yi(p,t,o)),zt(t)&&a.set(t,p),p}function Yi(e,t,n,r=!1){const{mixins:s,extends:a}=t;a&&Yi(e,a,n,!0),s&&s.forEach(o=>Yi(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const d=K2[o]||n&&n[o];e[o]=d?d(e[o],t[o]):t[o]}return e}const K2={data:B1,props:C1,emits:C1,methods:Ia,computed:Ia,beforeCreate:In,created:In,beforeMount:In,mounted:In,beforeUpdate:In,updated:In,beforeDestroy:In,beforeUnmount:In,destroyed:In,unmounted:In,activated:In,deactivated:In,errorCaptured:In,serverPrefetch:In,components:Ia,directives:Ia,watch:G2,provide:B1,inject:W2};function B1(e,t){return t?e?function(){return bn(St(e)?e.call(this,this):e,St(t)?t.call(this,this):t)}:t:e}function W2(e,t){return Ia(Yl(e),Yl(t))}function Yl(e){if(pt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function In(e,t){return e?[...new Set([].concat(e,t))]:t}function Ia(e,t){return e?bn(Object.create(null),e,t):t}function C1(e,t){return e?pt(e)&&pt(t)?[...new Set([...e,...t])]:bn(Object.create(null),M1(e),M1(t??{})):t}function G2(e,t){if(!e)return t;if(!t)return e;const n=bn(Object.create(null),e);for(const r in t)n[r]=In(e[r],t[r]);return n}function Ou(){return{app:null,config:{isNativeTag:D_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let z2=0;function Q2(e,t){return function(r,s=null){St(r)||(r=bn({},r)),s!=null&&!zt(s)&&(s=null);const a=Ou(),o=new WeakSet,d=[];let p=!1;const A=a.app={_uid:z2++,_component:r,_props:s,_container:null,_context:a,_instance:null,version:Id,get config(){return a.config},set config(g){},use(g,...S){return o.has(g)||(g&&St(g.install)?(o.add(g),g.install(A,...S)):St(g)&&(o.add(g),g(A,...S))),A},mixin(g){return a.mixins.includes(g)||a.mixins.push(g),A},component(g,S){return S?(a.components[g]=S,A):a.components[g]},directive(g,S){return S?(a.directives[g]=S,A):a.directives[g]},mount(g,S,H){if(!p){const q=A._ceVNode||tt(r,s);return q.appContext=a,H===!0?H="svg":H===!1&&(H=void 0),S&&t?t(q,g):e(q,g,H),p=!0,A._container=g,g.__vue_app__=A,$o(q.component)}},onUnmount(g){d.push(g)},unmount(){p&&($r(d,A._instance,16),e(null,A._container),delete A._container.__vue_app__)},provide(g,S){return a.provides[g]=S,A},runWithContext(g){const S=ks;ks=A;try{return g()}finally{ks=S}}};return A}}let ks=null;function la(e,t){if(Sn){let n=Sn.provides;const r=Sn.parent&&Sn.parent.provides;r===n&&(n=Sn.provides=Object.create(r)),n[e]=t}}function sr(e,t,n=!1){const r=Sn||cr;if(r||ks){const s=ks?ks._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&St(t)?t.call(r&&r.proxy):t}}function Z2(){return!!(Sn||cr||ks)}const Pu={},Nu=()=>Object.create(Pu),Lu=e=>Object.getPrototypeOf(e)===Pu;function J2(e,t,n,r=!1){const s={},a=Nu();e.propsDefaults=Object.create(null),ku(e,t,s,a);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:yu(s):e.type.props?e.props=s:e.props=a,e.attrs=a}function ed(e,t,n,r){const{props:s,attrs:a,vnode:{patchFlag:o}}=e,d=Bt(s),[p]=e.propsOptions;let A=!1;if((r||o>0)&&!(o&16)){if(o&8){const g=e.vnode.dynamicProps;for(let S=0;S<g.length;S++){let H=g[S];if(F0(e.emitsOptions,H))continue;const q=t[H];if(p)if(Ct(a,H))q!==a[H]&&(a[H]=q,A=!0);else{const he=ms(H);s[he]=Kl(p,d,he,q,e,!1)}else q!==a[H]&&(a[H]=q,A=!0)}}}else{ku(e,t,s,a)&&(A=!0);let g;for(const S in d)(!t||!Ct(t,S)&&((g=Vs(S))===S||!Ct(t,g)))&&(p?n&&(n[S]!==void 0||n[g]!==void 0)&&(s[S]=Kl(p,d,S,void 0,e,!0)):delete s[S]);if(a!==d)for(const S in a)(!t||!Ct(t,S))&&(delete a[S],A=!0)}A&&Qr(e.attrs,"set","")}function ku(e,t,n,r){const[s,a]=e.propsOptions;let o=!1,d;if(t)for(let p in t){if($a(p))continue;const A=t[p];let g;s&&Ct(s,g=ms(p))?!a||!a.includes(g)?n[g]=A:(d||(d={}))[g]=A:F0(e.emitsOptions,p)||(!(p in r)||A!==r[p])&&(r[p]=A,o=!0)}if(a){const p=Bt(n),A=d||Ht;for(let g=0;g<a.length;g++){const S=a[g];n[S]=Kl(s,p,S,A[S],e,!Ct(A,S))}}return o}function Kl(e,t,n,r,s,a){const o=e[n];if(o!=null){const d=Ct(o,"default");if(d&&r===void 0){const p=o.default;if(o.type!==Function&&!o.skipFactory&&St(p)){const{propsDefaults:A}=s;if(n in A)r=A[n];else{const g=ui(s);r=A[n]=p.call(null,t),g()}}else r=p;s.ce&&s.ce._setProp(n,r)}o[0]&&(a&&!d?r=!1:o[1]&&(r===""||r===Vs(n))&&(r=!0))}return r}const td=new WeakMap;function Fu(e,t,n=!1){const r=n?td:t.propsCache,s=r.get(e);if(s)return s;const a=e.props,o={},d=[];let p=!1;if(!St(e)){const g=S=>{p=!0;const[H,q]=Fu(S,t,!0);bn(o,H),q&&d.push(...q)};!n&&t.mixins.length&&t.mixins.forEach(g),e.extends&&g(e.extends),e.mixins&&e.mixins.forEach(g)}if(!a&&!p)return zt(e)&&r.set(e,ra),ra;if(pt(a))for(let g=0;g<a.length;g++){const S=ms(a[g]);I1(S)&&(o[S]=Ht)}else if(a)for(const g in a){const S=ms(g);if(I1(S)){const H=a[g],q=o[S]=pt(H)||St(H)?{type:H}:bn({},H),he=q.type;let fe=!1,ye=!0;if(pt(he))for(let Se=0;Se<he.length;++Se){const W=he[Se],Ie=St(W)&&W.name;if(Ie==="Boolean"){fe=!0;break}else Ie==="String"&&(ye=!1)}else fe=St(he)&&he.name==="Boolean";q[0]=fe,q[1]=ye,(fe||Ct(q,"default"))&&d.push(S)}}const A=[o,d];return zt(e)&&r.set(e,A),A}function I1(e){return e[0]!=="$"&&!$a(e)}const $u=e=>e[0]==="_"||e==="$stable",Lo=e=>pt(e)?e.map(Nr):[Nr(e)],nd=(e,t,n)=>{if(t._n)return t;const r=ia((...s)=>Lo(t(...s)),n);return r._c=!1,r},Vu=(e,t,n)=>{const r=e._ctx;for(const s in e){if($u(s))continue;const a=e[s];if(St(a))t[s]=nd(s,a,r);else if(a!=null){const o=Lo(a);t[s]=()=>o}}},Hu=(e,t)=>{const n=Lo(t);e.slots.default=()=>n},Du=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},rd=(e,t,n)=>{const r=e.slots=Nu();if(e.vnode.shapeFlag&32){const s=t._;s?(Du(r,t,n),n&&Qc(r,"_",s,!0)):Vu(t,r)}else t&&Hu(e,t)},sd=(e,t,n)=>{const{vnode:r,slots:s}=e;let a=!0,o=Ht;if(r.shapeFlag&32){const d=t._;d?n&&d===1?a=!1:Du(s,t,n):(a=!t.$stable,Vu(t,s)),o=t}else t&&(Hu(e,t),o={default:1});if(a)for(const d in s)!$u(d)&&o[d]==null&&delete s[d]},er=yd;function ad(e){return id(e)}function id(e,t){const n=I0();n.__VUE__=!0;const{insert:r,remove:s,patchProp:a,createElement:o,createText:d,createComment:p,setText:A,setElementText:g,parentNode:S,nextSibling:H,setScopeId:q=kr,insertStaticContent:he}=e,fe=(F,V,se,Ae=null,ie=null,Pe=null,Ue=void 0,Ve=null,je=!!V.dynamicChildren)=>{if(F===V)return;F&&!Ba(F,V)&&(Ae=K(F),nn(F,ie,Pe,!0),F=null),V.patchFlag===-2&&(je=!1,V.dynamicChildren=null);const{type:ke,ref:ct,shapeFlag:Ke}=V;switch(ke){case $0:ye(F,V,se,Ae);break;case ei:Se(F,V,se,Ae);break;case yl:F==null&&W(V,se,Ae,Ue);break;case pr:jt(F,V,se,Ae,ie,Pe,Ue,Ve,je);break;default:Ke&1?Qe(F,V,se,Ae,ie,Pe,Ue,Ve,je):Ke&6?Dt(F,V,se,Ae,ie,Pe,Ue,Ve,je):(Ke&64||Ke&128)&&ke.process(F,V,se,Ae,ie,Pe,Ue,Ve,je,qe)}ct!=null&&ie&&jl(ct,F&&F.ref,Pe,V||F,!V)},ye=(F,V,se,Ae)=>{if(F==null)r(V.el=d(V.children),se,Ae);else{const ie=V.el=F.el;V.children!==F.children&&A(ie,V.children)}},Se=(F,V,se,Ae)=>{F==null?r(V.el=p(V.children||""),se,Ae):V.el=F.el},W=(F,V,se,Ae)=>{[F.el,F.anchor]=he(F.children,V,se,Ae,F.el,F.anchor)},Ie=({el:F,anchor:V},se,Ae)=>{let ie;for(;F&&F!==V;)ie=H(F),r(F,se,Ae),F=ie;r(V,se,Ae)},me=({el:F,anchor:V})=>{let se;for(;F&&F!==V;)se=H(F),s(F),F=se;s(V)},Qe=(F,V,se,Ae,ie,Pe,Ue,Ve,je)=>{V.type==="svg"?Ue="svg":V.type==="math"&&(Ue="mathml"),F==null?at(V,se,Ae,ie,Pe,Ue,Ve,je):Je(F,V,ie,Pe,Ue,Ve,je)},at=(F,V,se,Ae,ie,Pe,Ue,Ve)=>{let je,ke;const{props:ct,shapeFlag:Ke,transition:Ze,dirs:mt}=F;if(je=F.el=o(F.type,Pe,ct&&ct.is,ct),Ke&8?g(je,F.children):Ke&16&&nt(F.children,je,null,Ae,ie,pl(F,Pe),Ue,Ve),mt&&Cs(F,null,Ae,"created"),ze(je,F,F.scopeId,Ue,Ae),ct){for(const Nt in ct)Nt!=="value"&&!$a(Nt)&&a(je,Nt,null,ct[Nt],Pe,Ae);"value"in ct&&a(je,"value",null,ct.value,Pe),(ke=ct.onVnodeBeforeMount)&&Tr(ke,Ae,F)}mt&&Cs(F,null,Ae,"beforeMount");const yt=ld(ie,Ze);yt&&Ze.beforeEnter(je),r(je,V,se),((ke=ct&&ct.onVnodeMounted)||yt||mt)&&er(()=>{ke&&Tr(ke,Ae,F),yt&&Ze.enter(je),mt&&Cs(F,null,Ae,"mounted")},ie)},ze=(F,V,se,Ae,ie)=>{if(se&&q(F,se),Ae)for(let Pe=0;Pe<Ae.length;Pe++)q(F,Ae[Pe]);if(ie){let Pe=ie.subTree;if(V===Pe||Yu(Pe.type)&&(Pe.ssContent===V||Pe.ssFallback===V)){const Ue=ie.vnode;ze(F,Ue,Ue.scopeId,Ue.slotScopeIds,ie.parent)}}},nt=(F,V,se,Ae,ie,Pe,Ue,Ve,je=0)=>{for(let ke=je;ke<F.length;ke++){const ct=F[ke]=Ve?cs(F[ke]):Nr(F[ke]);fe(null,ct,V,se,Ae,ie,Pe,Ue,Ve)}},Je=(F,V,se,Ae,ie,Pe,Ue)=>{const Ve=V.el=F.el;let{patchFlag:je,dynamicChildren:ke,dirs:ct}=V;je|=F.patchFlag&16;const Ke=F.props||Ht,Ze=V.props||Ht;let mt;if(se&&Is(se,!1),(mt=Ze.onVnodeBeforeUpdate)&&Tr(mt,se,V,F),ct&&Cs(V,F,se,"beforeUpdate"),se&&Is(se,!0),(Ke.innerHTML&&Ze.innerHTML==null||Ke.textContent&&Ze.textContent==null)&&g(Ve,""),ke?ut(F.dynamicChildren,ke,Ve,se,Ae,pl(V,ie),Pe):Ue||gt(F,V,Ve,null,se,Ae,pl(V,ie),Pe,!1),je>0){if(je&16)ht(Ve,Ke,Ze,se,ie);else if(je&2&&Ke.class!==Ze.class&&a(Ve,"class",null,Ze.class,ie),je&4&&a(Ve,"style",Ke.style,Ze.style,ie),je&8){const yt=V.dynamicProps;for(let Nt=0;Nt<yt.length;Nt++){const Rt=yt[Nt],En=Ke[Rt],_n=Ze[Rt];(_n!==En||Rt==="value")&&a(Ve,Rt,En,_n,ie,se)}}je&1&&F.children!==V.children&&g(Ve,V.children)}else!Ue&&ke==null&&ht(Ve,Ke,Ze,se,ie);((mt=Ze.onVnodeUpdated)||ct)&&er(()=>{mt&&Tr(mt,se,V,F),ct&&Cs(V,F,se,"updated")},Ae)},ut=(F,V,se,Ae,ie,Pe,Ue)=>{for(let Ve=0;Ve<V.length;Ve++){const je=F[Ve],ke=V[Ve],ct=je.el&&(je.type===pr||!Ba(je,ke)||je.shapeFlag&70)?S(je.el):se;fe(je,ke,ct,null,Ae,ie,Pe,Ue,!0)}},ht=(F,V,se,Ae,ie)=>{if(V!==se){if(V!==Ht)for(const Pe in V)!$a(Pe)&&!(Pe in se)&&a(F,Pe,V[Pe],null,ie,Ae);for(const Pe in se){if($a(Pe))continue;const Ue=se[Pe],Ve=V[Pe];Ue!==Ve&&Pe!=="value"&&a(F,Pe,Ve,Ue,ie,Ae)}"value"in se&&a(F,"value",V.value,se.value,ie)}},jt=(F,V,se,Ae,ie,Pe,Ue,Ve,je)=>{const ke=V.el=F?F.el:d(""),ct=V.anchor=F?F.anchor:d("");let{patchFlag:Ke,dynamicChildren:Ze,slotScopeIds:mt}=V;mt&&(Ve=Ve?Ve.concat(mt):mt),F==null?(r(ke,se,Ae),r(ct,se,Ae),nt(V.children||[],se,ct,ie,Pe,Ue,Ve,je)):Ke>0&&Ke&64&&Ze&&F.dynamicChildren?(ut(F.dynamicChildren,Ze,se,ie,Pe,Ue,Ve),(V.key!=null||ie&&V===ie.subTree)&&Xu(F,V,!0)):gt(F,V,se,ct,ie,Pe,Ue,Ve,je)},Dt=(F,V,se,Ae,ie,Pe,Ue,Ve,je)=>{V.slotScopeIds=Ve,F==null?V.shapeFlag&512?ie.ctx.activate(V,se,Ae,Ue,je):Yn(V,se,Ae,ie,Pe,Ue,je):An(F,V,je)},Yn=(F,V,se,Ae,ie,Pe,Ue)=>{const Ve=F.component=Ed(F,Ae,ie);if(Bu(F)&&(Ve.ctx.renderer=qe),Rd(Ve,!1,Ue),Ve.asyncDep){if(ie&&ie.registerDep(Ve,It,Ue),!F.el){const je=Ve.subTree=tt(ei);Se(null,je,V,se)}}else It(Ve,F,V,se,ie,Pe,Ue)},An=(F,V,se)=>{const Ae=V.component=F.component;if(pd(F,V,se))if(Ae.asyncDep&&!Ae.asyncResolved){_t(Ae,V,se);return}else Ae.next=V,Ae.update();else V.el=F.el,Ae.vnode=V},It=(F,V,se,Ae,ie,Pe,Ue)=>{const Ve=()=>{if(F.isMounted){let{next:Ke,bu:Ze,u:mt,parent:yt,vnode:Nt}=F;{const dn=ju(F);if(dn){Ke&&(Ke.el=Nt.el,_t(F,Ke,Ue)),dn.asyncDep.then(()=>{F.isUnmounted||Ve()});return}}let Rt=Ke,En;Is(F,!1),Ke?(Ke.el=Nt.el,_t(F,Ke,Ue)):Ke=Nt,Ze&&fl(Ze),(En=Ke.props&&Ke.props.onVnodeBeforeUpdate)&&Tr(En,yt,Ke,Nt),Is(F,!0);const _n=bl(F),Kn=F.subTree;F.subTree=_n,fe(Kn,_n,S(Kn.el),K(Kn),F,ie,Pe),Ke.el=_n.el,Rt===null&&bd(F,_n.el),mt&&er(mt,ie),(En=Ke.props&&Ke.props.onVnodeUpdated)&&er(()=>Tr(En,yt,Ke,Nt),ie)}else{let Ke;const{el:Ze,props:mt}=V,{bm:yt,m:Nt,parent:Rt,root:En,type:_n}=F,Kn=Da(V);if(Is(F,!1),yt&&fl(yt),!Kn&&(Ke=mt&&mt.onVnodeBeforeMount)&&Tr(Ke,Rt,V),Is(F,!0),Ze&&vt){const dn=()=>{F.subTree=bl(F),vt(Ze,F.subTree,F,ie,null)};Kn&&_n.__asyncHydrate?_n.__asyncHydrate(Ze,F,dn):dn()}else{En.ce&&En.ce._injectChildStyle(_n);const dn=F.subTree=bl(F);fe(null,dn,se,Ae,F,ie,Pe),V.el=dn.el}if(Nt&&er(Nt,ie),!Kn&&(Ke=mt&&mt.onVnodeMounted)){const dn=V;er(()=>Tr(Ke,Rt,dn),ie)}(V.shapeFlag&256||Rt&&Da(Rt.vnode)&&Rt.vnode.shapeFlag&256)&&F.a&&er(F.a,ie),F.isMounted=!0,V=se=Ae=null}};F.scope.on();const je=F.effect=new au(Ve);F.scope.off();const ke=F.update=je.run.bind(je),ct=F.job=je.runIfDirty.bind(je);ct.i=F,ct.id=F.uid,je.scheduler=()=>Bo(ct),Is(F,!0),ke()},_t=(F,V,se)=>{V.component=F;const Ae=F.vnode.props;F.vnode=V,F.next=null,ed(F,V.props,Ae,se),sd(F,V.children,se),ps(),R1(F),bs()},gt=(F,V,se,Ae,ie,Pe,Ue,Ve,je=!1)=>{const ke=F&&F.children,ct=F?F.shapeFlag:0,Ke=V.children,{patchFlag:Ze,shapeFlag:mt}=V;if(Ze>0){if(Ze&128){ar(ke,Ke,se,Ae,ie,Pe,Ue,Ve,je);return}else if(Ze&256){Nn(ke,Ke,se,Ae,ie,Pe,Ue,Ve,je);return}}mt&8?(ct&16&&yn(ke,ie,Pe),Ke!==ke&&g(se,Ke)):ct&16?mt&16?ar(ke,Ke,se,Ae,ie,Pe,Ue,Ve,je):yn(ke,ie,Pe,!0):(ct&8&&g(se,""),mt&16&&nt(Ke,se,Ae,ie,Pe,Ue,Ve,je))},Nn=(F,V,se,Ae,ie,Pe,Ue,Ve,je)=>{F=F||ra,V=V||ra;const ke=F.length,ct=V.length,Ke=Math.min(ke,ct);let Ze;for(Ze=0;Ze<Ke;Ze++){const mt=V[Ze]=je?cs(V[Ze]):Nr(V[Ze]);fe(F[Ze],mt,se,null,ie,Pe,Ue,Ve,je)}ke>ct?yn(F,ie,Pe,!0,!1,Ke):nt(V,se,Ae,ie,Pe,Ue,Ve,je,Ke)},ar=(F,V,se,Ae,ie,Pe,Ue,Ve,je)=>{let ke=0;const ct=V.length;let Ke=F.length-1,Ze=ct-1;for(;ke<=Ke&&ke<=Ze;){const mt=F[ke],yt=V[ke]=je?cs(V[ke]):Nr(V[ke]);if(Ba(mt,yt))fe(mt,yt,se,null,ie,Pe,Ue,Ve,je);else break;ke++}for(;ke<=Ke&&ke<=Ze;){const mt=F[Ke],yt=V[Ze]=je?cs(V[Ze]):Nr(V[Ze]);if(Ba(mt,yt))fe(mt,yt,se,null,ie,Pe,Ue,Ve,je);else break;Ke--,Ze--}if(ke>Ke){if(ke<=Ze){const mt=Ze+1,yt=mt<ct?V[mt].el:Ae;for(;ke<=Ze;)fe(null,V[ke]=je?cs(V[ke]):Nr(V[ke]),se,yt,ie,Pe,Ue,Ve,je),ke++}}else if(ke>Ze)for(;ke<=Ke;)nn(F[ke],ie,Pe,!0),ke++;else{const mt=ke,yt=ke,Nt=new Map;for(ke=yt;ke<=Ze;ke++){const qt=V[ke]=je?cs(V[ke]):Nr(V[ke]);qt.key!=null&&Nt.set(qt.key,ke)}let Rt,En=0;const _n=Ze-yt+1;let Kn=!1,dn=0;const gr=new Array(_n);for(ke=0;ke<_n;ke++)gr[ke]=0;for(ke=mt;ke<=Ke;ke++){const qt=F[ke];if(En>=_n){nn(qt,ie,Pe,!0);continue}let kn;if(qt.key!=null)kn=Nt.get(qt.key);else for(Rt=yt;Rt<=Ze;Rt++)if(gr[Rt-yt]===0&&Ba(qt,V[Rt])){kn=Rt;break}kn===void 0?nn(qt,ie,Pe,!0):(gr[kn-yt]=ke+1,kn>=dn?dn=kn:Kn=!0,fe(qt,V[kn],se,null,ie,Pe,Ue,Ve,je),En++)}const _i=Kn?od(gr):ra;for(Rt=_i.length-1,ke=_n-1;ke>=0;ke--){const qt=yt+ke,kn=V[qt],di=qt+1<ct?V[qt+1].el:Ae;gr[ke]===0?fe(null,kn,se,di,ie,Pe,Ue,Ve,je):Kn&&(Rt<0||ke!==_i[Rt]?Ln(kn,se,di,2):Rt--)}}},Ln=(F,V,se,Ae,ie=null)=>{const{el:Pe,type:Ue,transition:Ve,children:je,shapeFlag:ke}=F;if(ke&6){Ln(F.component.subTree,V,se,Ae);return}if(ke&128){F.suspense.move(V,se,Ae);return}if(ke&64){Ue.move(F,V,se,qe);return}if(Ue===pr){r(Pe,V,se);for(let Ke=0;Ke<je.length;Ke++)Ln(je[Ke],V,se,Ae);r(F.anchor,V,se);return}if(Ue===yl){Ie(F,V,se);return}if(Ae!==2&&ke&1&&Ve)if(Ae===0)Ve.beforeEnter(Pe),r(Pe,V,se),er(()=>Ve.enter(Pe),ie);else{const{leave:Ke,delayLeave:Ze,afterLeave:mt}=Ve,yt=()=>r(Pe,V,se),Nt=()=>{Ke(Pe,()=>{yt(),mt&&mt()})};Ze?Ze(Pe,yt,Nt):Nt()}else r(Pe,V,se)},nn=(F,V,se,Ae=!1,ie=!1)=>{const{type:Pe,props:Ue,ref:Ve,children:je,dynamicChildren:ke,shapeFlag:ct,patchFlag:Ke,dirs:Ze,cacheIndex:mt}=F;if(Ke===-2&&(ie=!1),Ve!=null&&jl(Ve,null,se,F,!0),mt!=null&&(V.renderCache[mt]=void 0),ct&256){V.ctx.deactivate(F);return}const yt=ct&1&&Ze,Nt=!Da(F);let Rt;if(Nt&&(Rt=Ue&&Ue.onVnodeBeforeUnmount)&&Tr(Rt,V,F),ct&6)Hr(F.component,se,Ae);else{if(ct&128){F.suspense.unmount(se,Ae);return}yt&&Cs(F,null,V,"beforeUnmount"),ct&64?F.type.remove(F,V,se,qe,Ae):ke&&!ke.hasOnce&&(Pe!==pr||Ke>0&&Ke&64)?yn(ke,V,se,!1,!0):(Pe===pr&&Ke&384||!ie&&ct&16)&&yn(je,V,se),Ae&&ft(F)}(Nt&&(Rt=Ue&&Ue.onVnodeUnmounted)||yt)&&er(()=>{Rt&&Tr(Rt,V,F),yt&&Cs(F,null,V,"unmounted")},se)},ft=F=>{const{type:V,el:se,anchor:Ae,transition:ie}=F;if(V===pr){M(se,Ae);return}if(V===yl){me(F);return}const Pe=()=>{s(se),ie&&!ie.persisted&&ie.afterLeave&&ie.afterLeave()};if(F.shapeFlag&1&&ie&&!ie.persisted){const{leave:Ue,delayLeave:Ve}=ie,je=()=>Ue(se,Pe);Ve?Ve(F.el,Pe,je):je()}else Pe()},M=(F,V)=>{let se;for(;F!==V;)se=H(F),s(F),F=se;s(V)},Hr=(F,V,se)=>{const{bum:Ae,scope:ie,job:Pe,subTree:Ue,um:Ve,m:je,a:ke}=F;O1(je),O1(ke),Ae&&fl(Ae),ie.stop(),Pe&&(Pe.flags|=8,nn(Ue,F,V,se)),Ve&&er(Ve,V),er(()=>{F.isUnmounted=!0},V),V&&V.pendingBranch&&!V.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===V.pendingId&&(V.deps--,V.deps===0&&V.resolve())},yn=(F,V,se,Ae=!1,ie=!1,Pe=0)=>{for(let Ue=Pe;Ue<F.length;Ue++)nn(F[Ue],V,se,Ae,ie)},K=F=>{if(F.shapeFlag&6)return K(F.component.subTree);if(F.shapeFlag&128)return F.suspense.next();const V=H(F.anchor||F.el),se=V&&V[O2];return se?H(se):V};let Be=!1;const xe=(F,V,se)=>{F==null?V._vnode&&nn(V._vnode,null,null,!0):fe(V._vnode||null,F,V,null,null,null,se),V._vnode=F,Be||(Be=!0,R1(),Eu(),Be=!1)},qe={p:fe,um:nn,m:Ln,r:ft,mt:Yn,mc:nt,pc:gt,pbc:ut,n:K,o:e};let lt,vt;return{render:xe,hydrate:lt,createApp:Q2(xe,lt)}}function pl({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Is({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function ld(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Xu(e,t,n=!1){const r=e.children,s=t.children;if(pt(r)&&pt(s))for(let a=0;a<r.length;a++){const o=r[a];let d=s[a];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=s[a]=cs(s[a]),d.el=o.el),!n&&d.patchFlag!==-2&&Xu(o,d)),d.type===$0&&(d.el=o.el)}}function od(e){const t=e.slice(),n=[0];let r,s,a,o,d;const p=e.length;for(r=0;r<p;r++){const A=e[r];if(A!==0){if(s=n[n.length-1],e[s]<A){t[r]=s,n.push(r);continue}for(a=0,o=n.length-1;a<o;)d=a+o>>1,e[n[d]]<A?a=d+1:o=d;A<e[n[a]]&&(a>0&&(t[r]=n[a-1]),n[a]=r)}}for(a=n.length,o=n[a-1];a-- >0;)n[a]=o,o=t[o];return n}function ju(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ju(t)}function O1(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const cd=Symbol.for("v-scx"),ud=()=>sr(cd);function fd(e,t){return ko(e,null,t)}function Fr(e,t,n){return ko(e,t,n)}function ko(e,t,n=Ht){const{immediate:r,deep:s,flush:a,once:o}=n,d=bn({},n),p=t&&r||!t&&a!=="post";let A;if(ri){if(a==="sync"){const q=ud();A=q.__watcherHandles||(q.__watcherHandles=[])}else if(!p){const q=()=>{};return q.stop=kr,q.resume=kr,q.pause=kr,q}}const g=Sn;d.call=(q,he,fe)=>$r(q,g,he,fe);let S=!1;a==="post"?d.scheduler=q=>{er(q,g&&g.suspense)}:a!=="sync"&&(S=!0,d.scheduler=(q,he)=>{he?q():Bo(q)}),d.augmentJob=q=>{t&&(q.flags|=4),S&&(q.flags|=2,g&&(q.id=g.uid,q.i=g))};const H=T2(e,t,d);return ri&&(A?A.push(H):p&&H()),H}function hd(e,t,n){const r=this.proxy,s=un(e)?e.includes(".")?qu(r,e):()=>r[e]:e.bind(r,r);let a;St(t)?a=t:(a=t.handler,n=t);const o=ui(this),d=ko(s,a.bind(r),n);return o(),d}function qu(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const _d=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ms(t)}Modifiers`]||e[`${Vs(t)}Modifiers`];function dd(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Ht;let s=n;const a=t.startsWith("update:"),o=a&&_d(r,t.slice(7));o&&(o.trim&&(s=n.map(g=>un(g)?g.trim():g)),o.number&&(s=n.map(Y_)));let d,p=r[d=ul(t)]||r[d=ul(ms(t))];!p&&a&&(p=r[d=ul(Vs(t))]),p&&$r(p,e,6,s);const A=r[d+"Once"];if(A){if(!e.emitted)e.emitted={};else if(e.emitted[d])return;e.emitted[d]=!0,$r(A,e,6,s)}}function Uu(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const a=e.emits;let o={},d=!1;if(!St(e)){const p=A=>{const g=Uu(A,t,!0);g&&(d=!0,bn(o,g))};!n&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}return!a&&!d?(zt(e)&&r.set(e,null),null):(pt(a)?a.forEach(p=>o[p]=null):bn(o,a),zt(e)&&r.set(e,o),o)}function F0(e,t){return!e||!T0(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ct(e,t[0].toLowerCase()+t.slice(1))||Ct(e,Vs(t))||Ct(e,t))}function bl(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[a],slots:o,attrs:d,emit:p,render:A,renderCache:g,props:S,data:H,setupState:q,ctx:he,inheritAttrs:fe}=e,ye=Ui(e);let Se,W;try{if(n.shapeFlag&4){const me=s||r,Qe=me;Se=Nr(A.call(Qe,me,g,S,q,H,he)),W=d}else{const me=t;Se=Nr(me.length>1?me(S,{attrs:d,slots:o,emit:p}):me(S,null)),W=t.props?d:md(d)}}catch(me){ja.length=0,P0(me,e,1),Se=tt(ei)}let Ie=Se;if(W&&fe!==!1){const me=Object.keys(W),{shapeFlag:Qe}=Ie;me.length&&Qe&7&&(a&&me.some(vo)&&(W=vd(W,a)),Ie=_a(Ie,W,!1,!0))}return n.dirs&&(Ie=_a(Ie,null,!1,!0),Ie.dirs=Ie.dirs?Ie.dirs.concat(n.dirs):n.dirs),n.transition&&Co(Ie,n.transition),Se=Ie,Ui(ye),Se}const md=e=>{let t;for(const n in e)(n==="class"||n==="style"||T0(n))&&((t||(t={}))[n]=e[n]);return t},vd=(e,t)=>{const n={};for(const r in e)(!vo(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function pd(e,t,n){const{props:r,children:s,component:a}=e,{props:o,children:d,patchFlag:p}=t,A=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&p>=0){if(p&1024)return!0;if(p&16)return r?P1(r,o,A):!!o;if(p&8){const g=t.dynamicProps;for(let S=0;S<g.length;S++){const H=g[S];if(o[H]!==r[H]&&!F0(A,H))return!0}}}else return(s||d)&&(!d||!d.$stable)?!0:r===o?!1:r?o?P1(r,o,A):!0:!!o;return!1}function P1(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const a=r[s];if(t[a]!==e[a]&&!F0(n,a))return!0}return!1}function bd({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Yu=e=>e.__isSuspense;function yd(e,t){t&&t.pendingBranch?pt(e)?t.effects.push(...e):t.effects.push(e):I2(e)}const pr=Symbol.for("v-fgt"),$0=Symbol.for("v-txt"),ei=Symbol.for("v-cmt"),yl=Symbol.for("v-stc"),ja=[];let rr=null;function qa(e=!1){ja.push(rr=e?null:[])}function wd(){ja.pop(),rr=ja[ja.length-1]||null}let ti=1;function N1(e){ti+=e,e<0&&rr&&(rr.hasOnce=!0)}function Ku(e){return e.dynamicChildren=ti>0?rr||ra:null,wd(),ti>0&&rr&&rr.push(e),e}function wl(e,t,n,r,s,a){return Ku(Ir(e,t,n,r,s,a,!0))}function Wu(e,t,n,r,s){return Ku(tt(e,t,n,r,s,!0))}function Ki(e){return e?e.__v_isVNode===!0:!1}function Ba(e,t){return e.type===t.type&&e.key===t.key}const Gu=({key:e})=>e??null,Oi=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?un(e)||tn(e)||St(e)?{i:cr,r:e,k:t,f:!!n}:e:null);function Ir(e,t=null,n=null,r=0,s=null,a=e===pr?0:1,o=!1,d=!1){const p={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Gu(t),ref:t&&Oi(t),scopeId:Mu,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:cr};return d?(Fo(p,n),a&128&&e.normalize(p)):n&&(p.shapeFlag|=un(n)?8:16),ti>0&&!o&&rr&&(p.patchFlag>0||a&6)&&p.patchFlag!==32&&rr.push(p),p}const tt=Sd;function Sd(e,t=null,n=null,r=0,s=null,a=!1){if((!e||e===X2)&&(e=ei),Ki(e)){const d=_a(e,t,!0);return n&&Fo(d,n),ti>0&&!a&&rr&&(d.shapeFlag&6?rr[rr.indexOf(e)]=d:rr.push(d)),d.patchFlag=-2,d}if(Cd(e)&&(e=e.__vccOpts),t){t=xd(t);let{class:d,style:p}=t;d&&!un(d)&&(t.class=wo(d)),zt(p)&&(Mo(p)&&!pt(p)&&(p=bn({},p)),t.style=yo(p))}const o=un(e)?1:Yu(e)?128:P2(e)?64:zt(e)?4:St(e)?2:0;return Ir(e,t,n,r,s,o,a,!0)}function xd(e){return e?Mo(e)||Lu(e)?bn({},e):e:null}function _a(e,t,n=!1,r=!1){const{props:s,ref:a,patchFlag:o,children:d,transition:p}=e,A=t?V0(s||{},t):s,g={__v_isVNode:!0,__v_skip:!0,type:e.type,props:A,key:A&&Gu(A),ref:t&&t.ref?n&&a?pt(a)?a.concat(Oi(t)):[a,Oi(t)]:Oi(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:d,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==pr?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:p,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&_a(e.ssContent),ssFallback:e.ssFallback&&_a(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return p&&r&&Co(g,p.clone(g)),g}function ni(e=" ",t=0){return tt($0,null,e,t)}function Nr(e){return e==null||typeof e=="boolean"?tt(ei):pt(e)?tt(pr,null,e.slice()):Ki(e)?cs(e):tt($0,null,String(e))}function cs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:_a(e)}function Fo(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(pt(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Fo(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!Lu(t)?t._ctx=cr:s===3&&cr&&(cr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else St(t)?(t={default:t,_ctx:cr},n=32):(t=String(t),r&64?(n=16,t=[ni(t)]):n=8);e.children=t,e.shapeFlag|=n}function V0(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=wo([t.class,r.class]));else if(s==="style")t.style=yo([t.style,r.style]);else if(T0(s)){const a=t[s],o=r[s];o&&a!==o&&!(pt(a)&&a.includes(o))&&(t[s]=a?[].concat(a,o):o)}else s!==""&&(t[s]=r[s])}return t}function Tr(e,t,n,r=null){$r(e,t,7,[n,r])}const gd=Ou();let Ad=0;function Ed(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||gd,a={uid:Ad++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new nu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Fu(r,s),emitsOptions:Uu(r,s),emit:null,emitted:null,propsDefaults:Ht,inheritAttrs:r.inheritAttrs,ctx:Ht,data:Ht,props:Ht,attrs:Ht,slots:Ht,refs:Ht,setupState:Ht,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=dd.bind(null,a),e.ce&&e.ce(a),a}let Sn=null;const ci=()=>Sn||cr;let Wi,Wl;{const e=I0(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),a=>{s.length>1?s.forEach(o=>o(a)):s[0](a)}};Wi=t("__VUE_INSTANCE_SETTERS__",n=>Sn=n),Wl=t("__VUE_SSR_SETTERS__",n=>ri=n)}const ui=e=>{const t=Sn;return Wi(e),e.scope.on(),()=>{e.scope.off(),Wi(t)}},L1=()=>{Sn&&Sn.scope.off(),Wi(null)};function zu(e){return e.vnode.shapeFlag&4}let ri=!1;function Rd(e,t=!1,n=!1){t&&Wl(t);const{props:r,children:s}=e.vnode,a=zu(e);J2(e,r,a,t),rd(e,s,n);const o=a?Md(e,t):void 0;return t&&Wl(!1),o}function Md(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,q2);const{setup:r}=n;if(r){ps();const s=e.setupContext=r.length>1?Bd(e):null,a=ui(e),o=oi(r,e,0,[e.props,s]),d=Kc(o);if(bs(),a(),(d||e.sp)&&!Da(e)&&Tu(e),d){if(o.then(L1,L1),t)return o.then(p=>{k1(e,p,t)}).catch(p=>{P0(p,e,0)});e.asyncDep=o}else k1(e,o,t)}else Qu(e,t)}function k1(e,t,n){St(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:zt(t)&&(e.setupState=xu(t)),Qu(e,n)}let F1;function Qu(e,t,n){const r=e.type;if(!e.render){if(!t&&F1&&!r.render){const s=r.template||No(e).template;if(s){const{isCustomElement:a,compilerOptions:o}=e.appContext.config,{delimiters:d,compilerOptions:p}=r,A=bn(bn({isCustomElement:a,delimiters:d},o),p);r.render=F1(s,A)}}e.render=r.render||kr}{const s=ui(e);ps();try{U2(e)}finally{bs(),s()}}}const Td={get(e,t){return Tn(e,"get",""),e[t]}};function Bd(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Td),slots:e.slots,emit:e.emit,expose:t}}function $o(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(xu(To(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Xa)return Xa[n](e)},has(t,n){return n in t||n in Xa}})):e.proxy}function Cd(e){return St(e)&&"__vccOpts"in e}const Zt=(e,t)=>R2(e,t,ri);function Zu(e,t,n){const r=arguments.length;return r===2?zt(t)&&!pt(t)?Ki(t)?tt(e,null,[t]):tt(e,t):tt(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ki(n)&&(n=[n]),tt(e,t,n))}const Id="3.5.12";/**
* @vue/runtime-dom v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Gl;const $1=typeof window<"u"&&window.trustedTypes;if($1)try{Gl=$1.createPolicy("vue",{createHTML:e=>e})}catch{}const Ju=Gl?e=>Gl.createHTML(e):e=>e,Od="http://www.w3.org/2000/svg",Pd="http://www.w3.org/1998/Math/MathML",zr=typeof document<"u"?document:null,V1=zr&&zr.createElement("template"),Nd={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?zr.createElementNS(Od,e):t==="mathml"?zr.createElementNS(Pd,e):n?zr.createElement(e,{is:n}):zr.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>zr.createTextNode(e),createComment:e=>zr.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>zr.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,a){const o=n?n.previousSibling:t.lastChild;if(s&&(s===a||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===a||!(s=s.nextSibling)););else{V1.innerHTML=Ju(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const d=V1.content;if(r==="svg"||r==="mathml"){const p=d.firstChild;for(;p.firstChild;)d.appendChild(p.firstChild);d.removeChild(p)}t.insertBefore(d,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Ld=Symbol("_vtc");function kd(e,t,n){const r=e[Ld];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const H1=Symbol("_vod"),Fd=Symbol("_vsh"),$d=Symbol(""),Vd=/(^|;)\s*display\s*:/;function Hd(e,t,n){const r=e.style,s=un(n);let a=!1;if(n&&!s){if(t)if(un(t))for(const o of t.split(";")){const d=o.slice(0,o.indexOf(":")).trim();n[d]==null&&Pi(r,d,"")}else for(const o in t)n[o]==null&&Pi(r,o,"");for(const o in n)o==="display"&&(a=!0),Pi(r,o,n[o])}else if(s){if(t!==n){const o=r[$d];o&&(n+=";"+o),r.cssText=n,a=Vd.test(n)}}else t&&e.removeAttribute("style");H1 in e&&(e[H1]=a?r.display:"",e[Fd]&&(r.display="none"))}const D1=/\s*!important$/;function Pi(e,t,n){if(pt(n))n.forEach(r=>Pi(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Dd(e,t);D1.test(n)?e.setProperty(Vs(r),n.replace(D1,""),"important"):e[r]=n}}const X1=["Webkit","Moz","ms"],Sl={};function Dd(e,t){const n=Sl[t];if(n)return n;let r=ms(t);if(r!=="filter"&&r in e)return Sl[t]=r;r=zc(r);for(let s=0;s<X1.length;s++){const a=X1[s]+r;if(a in e)return Sl[t]=a}return t}const j1="http://www.w3.org/1999/xlink";function q1(e,t,n,r,s,a=Z_(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(j1,t.slice(6,t.length)):e.setAttributeNS(j1,t,n):n==null||a&&!Zc(n)?e.removeAttribute(t):e.setAttribute(t,a?"":vs(n)?String(n):n)}function U1(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Ju(n):n);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const d=a==="OPTION"?e.getAttribute("value")||"":e.value,p=n==null?e.type==="checkbox"?"on":"":String(n);(d!==p||!("_value"in e))&&(e.value=p),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const d=typeof e[t];d==="boolean"?n=Zc(n):n==null&&d==="string"?(n="",o=!0):d==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(s||t)}function Xd(e,t,n,r){e.addEventListener(t,n,r)}function jd(e,t,n,r){e.removeEventListener(t,n,r)}const Y1=Symbol("_vei");function qd(e,t,n,r,s=null){const a=e[Y1]||(e[Y1]={}),o=a[t];if(r&&o)o.value=r;else{const[d,p]=Ud(t);if(r){const A=a[t]=Wd(r,s);Xd(e,d,A,p)}else o&&(jd(e,d,o,p),a[t]=void 0)}}const K1=/(?:Once|Passive|Capture)$/;function Ud(e){let t;if(K1.test(e)){t={};let r;for(;r=e.match(K1);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Vs(e.slice(2)),t]}let xl=0;const Yd=Promise.resolve(),Kd=()=>xl||(Yd.then(()=>xl=0),xl=Date.now());function Wd(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;$r(Gd(r,n.value),t,5,[r])};return n.value=e,n.attached=Kd(),n}function Gd(e,t){if(pt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const W1=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,zd=(e,t,n,r,s,a)=>{const o=s==="svg";t==="class"?kd(e,r,o):t==="style"?Hd(e,n,r):T0(t)?vo(t)||qd(e,t,n,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Qd(e,t,r,o))?(U1(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&q1(e,t,r,o,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!un(r))?U1(e,ms(t),r,a,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),q1(e,t,r,o))};function Qd(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&W1(t)&&St(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return W1(t)&&un(n)?!1:t in e}const Zd=["ctrl","shift","alt","meta"],Jd={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Zd.some(n=>e[`${n}Key`]&&!t.includes(n))},G1=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(s,...a)=>{for(let o=0;o<t.length;o++){const d=Jd[t[o]];if(d&&d(s,t))return}return e(s,...a)})},e3=bn({patchProp:zd},Nd);let z1;function t3(){return z1||(z1=ad(e3))}const n3=(...e)=>{const t=t3().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=s3(r);if(!s)return;const a=t._component;!St(a)&&!a.render&&!a.template&&(a.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,r3(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function r3(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function s3(e){return un(e)?document.querySelector(e):e}var a3=!1;/*!
 * pinia v2.2.4
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let ef;const H0=e=>ef=e,tf=Symbol();function zl(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Ua;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Ua||(Ua={}));function i3(){const e=ru(!0),t=e.run(()=>jn({}));let n=[],r=[];const s=To({install(a){H0(s),s._a=a,a.provide(tf,s),a.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(a){return!this._a&&!a3?r.push(a):n.push(a),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const nf=()=>{};function Q1(e,t,n,r=nf){e.push(t);const s=()=>{const a=e.indexOf(t);a>-1&&(e.splice(a,1),r())};return!n&&su()&&J_(s),s}function Ks(e,...t){e.slice().forEach(n=>{n(...t)})}const l3=e=>e(),Z1=Symbol(),gl=Symbol();function Ql(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];zl(s)&&zl(r)&&e.hasOwnProperty(n)&&!tn(r)&&!ds(r)?e[n]=Ql(s,r):e[n]=r}return e}const o3=Symbol();function c3(e){return!zl(e)||!e.hasOwnProperty(o3)}const{assign:ls}=Object;function u3(e){return!!(tn(e)&&e.effect)}function f3(e,t,n,r){const{state:s,actions:a,getters:o}=t,d=n.state.value[e];let p;function A(){d||(n.state.value[e]=s?s():{});const g=x2(n.state.value[e]);return ls(g,a,Object.keys(o||{}).reduce((S,H)=>(S[H]=To(Zt(()=>{H0(n);const q=n._s.get(e);return o[H].call(q,q)})),S),{}))}return p=rf(e,A,t,n,r,!0),p}function rf(e,t,n={},r,s,a){let o;const d=ls({actions:{}},n),p={deep:!0};let A,g,S=[],H=[],q;const he=r.state.value[e];!a&&!he&&(r.state.value[e]={}),jn({});let fe;function ye(nt){let Je;A=g=!1,typeof nt=="function"?(nt(r.state.value[e]),Je={type:Ua.patchFunction,storeId:e,events:q}):(Ql(r.state.value[e],nt),Je={type:Ua.patchObject,payload:nt,storeId:e,events:q});const ut=fe=Symbol();hs().then(()=>{fe===ut&&(A=!0)}),g=!0,Ks(S,Je,r.state.value[e])}const Se=a?function(){const{state:Je}=n,ut=Je?Je():{};this.$patch(ht=>{ls(ht,ut)})}:nf;function W(){o.stop(),S=[],H=[],r._s.delete(e)}const Ie=(nt,Je="")=>{if(Z1 in nt)return nt[gl]=Je,nt;const ut=function(){H0(r);const ht=Array.from(arguments),jt=[],Dt=[];function Yn(_t){jt.push(_t)}function An(_t){Dt.push(_t)}Ks(H,{args:ht,name:ut[gl],store:Qe,after:Yn,onError:An});let It;try{It=nt.apply(this&&this.$id===e?this:Qe,ht)}catch(_t){throw Ks(Dt,_t),_t}return It instanceof Promise?It.then(_t=>(Ks(jt,_t),_t)).catch(_t=>(Ks(Dt,_t),Promise.reject(_t))):(Ks(jt,It),It)};return ut[Z1]=!0,ut[gl]=Je,ut},me={_p:r,$id:e,$onAction:Q1.bind(null,H),$patch:ye,$reset:Se,$subscribe(nt,Je={}){const ut=Q1(S,nt,Je.detached,()=>ht()),ht=o.run(()=>Fr(()=>r.state.value[e],jt=>{(Je.flush==="sync"?g:A)&&nt({storeId:e,type:Ua.direct,events:q},jt)},ls({},p,Je)));return ut},$dispose:W},Qe=Hs(me);r._s.set(e,Qe);const ze=(r._a&&r._a.runWithContext||l3)(()=>r._e.run(()=>(o=ru()).run(()=>t({action:Ie}))));for(const nt in ze){const Je=ze[nt];if(tn(Je)&&!u3(Je)||ds(Je))a||(he&&c3(Je)&&(tn(Je)?Je.value=he[nt]:Ql(Je,he[nt])),r.state.value[e][nt]=Je);else if(typeof Je=="function"){const ut=Ie(Je,nt);ze[nt]=ut,d.actions[nt]=Je}}return ls(Qe,ze),ls(Bt(Qe),ze),Object.defineProperty(Qe,"$state",{get:()=>r.state.value[e],set:nt=>{ye(Je=>{ls(Je,nt)})}}),r._p.forEach(nt=>{ls(Qe,o.run(()=>nt({store:Qe,app:r._a,pinia:r,options:d})))}),he&&a&&n.hydrate&&n.hydrate(Qe.$state,he),A=!0,g=!0,Qe}function sf(e,t,n){let r,s;const a=typeof t=="function";typeof e=="string"?(r=e,s=a?n:t):(s=e,r=e.id);function o(d,p){const A=Z2();return d=d||(A?sr(tf,null):null),d&&H0(d),d=ef,d._s.has(r)||(a?rf(r,t,s,d):f3(r,s,d)),d._s.get(r)}return o.$id=r,o}/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Js=typeof document<"u";function af(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function h3(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&af(e.default)}const Ot=Object.assign;function Al(e,t){const n={};for(const r in t){const s=t[r];n[r]=Sr(s)?s.map(e):e(s)}return n}const Ya=()=>{},Sr=Array.isArray,lf=/#/g,_3=/&/g,d3=/\//g,m3=/=/g,v3=/\?/g,of=/\+/g,p3=/%5B/g,b3=/%5D/g,cf=/%5E/g,y3=/%60/g,uf=/%7B/g,w3=/%7C/g,ff=/%7D/g,S3=/%20/g;function Vo(e){return encodeURI(""+e).replace(w3,"|").replace(p3,"[").replace(b3,"]")}function x3(e){return Vo(e).replace(uf,"{").replace(ff,"}").replace(cf,"^")}function Zl(e){return Vo(e).replace(of,"%2B").replace(S3,"+").replace(lf,"%23").replace(_3,"%26").replace(y3,"`").replace(uf,"{").replace(ff,"}").replace(cf,"^")}function g3(e){return Zl(e).replace(m3,"%3D")}function A3(e){return Vo(e).replace(lf,"%23").replace(v3,"%3F")}function E3(e){return e==null?"":A3(e).replace(d3,"%2F")}function si(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const R3=/\/$/,M3=e=>e.replace(R3,"");function El(e,t,n="/"){let r,s={},a="",o="";const d=t.indexOf("#");let p=t.indexOf("?");return d<p&&d>=0&&(p=-1),p>-1&&(r=t.slice(0,p),a=t.slice(p+1,d>-1?d:t.length),s=e(a)),d>-1&&(r=r||t.slice(0,d),o=t.slice(d,t.length)),r=I3(r??t,n),{fullPath:r+(a&&"?")+a+o,path:r,query:s,hash:si(o)}}function T3(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function J1(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function B3(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&da(t.matched[r],n.matched[s])&&hf(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function da(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function hf(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!C3(e[n],t[n]))return!1;return!0}function C3(e,t){return Sr(e)?ec(e,t):Sr(t)?ec(t,e):e===t}function ec(e,t){return Sr(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function I3(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let a=n.length-1,o,d;for(o=0;o<r.length;o++)if(d=r[o],d!==".")if(d==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+r.slice(o).join("/")}const as={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ai;(function(e){e.pop="pop",e.push="push"})(ai||(ai={}));var Ka;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ka||(Ka={}));function O3(e){if(!e)if(Js){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),M3(e)}const P3=/^[^#]+#/;function N3(e,t){return e.replace(P3,"#")+t}function L3(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const D0=()=>({left:window.scrollX,top:window.scrollY});function k3(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=L3(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function tc(e,t){return(history.state?history.state.position-t:-1)+e}const Jl=new Map;function F3(e,t){Jl.set(e,t)}function $3(e){const t=Jl.get(e);return Jl.delete(e),t}let V3=()=>location.protocol+"//"+location.host;function _f(e,t){const{pathname:n,search:r,hash:s}=t,a=e.indexOf("#");if(a>-1){let d=s.includes(e.slice(a))?e.slice(a).length:1,p=s.slice(d);return p[0]!=="/"&&(p="/"+p),J1(p,"")}return J1(n,e)+r+s}function H3(e,t,n,r){let s=[],a=[],o=null;const d=({state:H})=>{const q=_f(e,location),he=n.value,fe=t.value;let ye=0;if(H){if(n.value=q,t.value=H,o&&o===he){o=null;return}ye=fe?H.position-fe.position:0}else r(q);s.forEach(Se=>{Se(n.value,he,{delta:ye,type:ai.pop,direction:ye?ye>0?Ka.forward:Ka.back:Ka.unknown})})};function p(){o=n.value}function A(H){s.push(H);const q=()=>{const he=s.indexOf(H);he>-1&&s.splice(he,1)};return a.push(q),q}function g(){const{history:H}=window;H.state&&H.replaceState(Ot({},H.state,{scroll:D0()}),"")}function S(){for(const H of a)H();a=[],window.removeEventListener("popstate",d),window.removeEventListener("beforeunload",g)}return window.addEventListener("popstate",d),window.addEventListener("beforeunload",g,{passive:!0}),{pauseListeners:p,listen:A,destroy:S}}function nc(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?D0():null}}function D3(e){const{history:t,location:n}=window,r={value:_f(e,n)},s={value:t.state};s.value||a(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(p,A,g){const S=e.indexOf("#"),H=S>-1?(n.host&&document.querySelector("base")?e:e.slice(S))+p:V3()+e+p;try{t[g?"replaceState":"pushState"](A,"",H),s.value=A}catch(q){console.error(q),n[g?"replace":"assign"](H)}}function o(p,A){const g=Ot({},t.state,nc(s.value.back,p,s.value.forward,!0),A,{position:s.value.position});a(p,g,!0),r.value=p}function d(p,A){const g=Ot({},s.value,t.state,{forward:p,scroll:D0()});a(g.current,g,!0);const S=Ot({},nc(r.value,p,null),{position:g.position+1},A);a(p,S,!1),r.value=p}return{location:r,state:s,push:d,replace:o}}function X3(e){e=O3(e);const t=D3(e),n=H3(e,t.state,t.location,t.replace);function r(a,o=!0){o||n.pauseListeners(),history.go(a)}const s=Ot({location:"",base:e,go:r,createHref:N3.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function j3(e){return typeof e=="string"||e&&typeof e=="object"}function df(e){return typeof e=="string"||typeof e=="symbol"}const mf=Symbol("");var rc;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(rc||(rc={}));function ma(e,t){return Ot(new Error,{type:e,[mf]:!0},t)}function Yr(e,t){return e instanceof Error&&mf in e&&(t==null||!!(e.type&t))}const sc="[^/]+?",q3={sensitive:!1,strict:!1,start:!0,end:!0},U3=/[.+*?^${}()[\]/\\]/g;function Y3(e,t){const n=Ot({},q3,t),r=[];let s=n.start?"^":"";const a=[];for(const A of e){const g=A.length?[]:[90];n.strict&&!A.length&&(s+="/");for(let S=0;S<A.length;S++){const H=A[S];let q=40+(n.sensitive?.25:0);if(H.type===0)S||(s+="/"),s+=H.value.replace(U3,"\\$&"),q+=40;else if(H.type===1){const{value:he,repeatable:fe,optional:ye,regexp:Se}=H;a.push({name:he,repeatable:fe,optional:ye});const W=Se||sc;if(W!==sc){q+=10;try{new RegExp(`(${W})`)}catch(me){throw new Error(`Invalid custom RegExp for param "${he}" (${W}): `+me.message)}}let Ie=fe?`((?:${W})(?:/(?:${W}))*)`:`(${W})`;S||(Ie=ye&&A.length<2?`(?:/${Ie})`:"/"+Ie),ye&&(Ie+="?"),s+=Ie,q+=20,ye&&(q+=-8),fe&&(q+=-20),W===".*"&&(q+=-50)}g.push(q)}r.push(g)}if(n.strict&&n.end){const A=r.length-1;r[A][r[A].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function d(A){const g=A.match(o),S={};if(!g)return null;for(let H=1;H<g.length;H++){const q=g[H]||"",he=a[H-1];S[he.name]=q&&he.repeatable?q.split("/"):q}return S}function p(A){let g="",S=!1;for(const H of e){(!S||!g.endsWith("/"))&&(g+="/"),S=!1;for(const q of H)if(q.type===0)g+=q.value;else if(q.type===1){const{value:he,repeatable:fe,optional:ye}=q,Se=he in A?A[he]:"";if(Sr(Se)&&!fe)throw new Error(`Provided param "${he}" is an array but it is not repeatable (* or + modifiers)`);const W=Sr(Se)?Se.join("/"):Se;if(!W)if(ye)H.length<2&&(g.endsWith("/")?g=g.slice(0,-1):S=!0);else throw new Error(`Missing required param "${he}"`);g+=W}}return g||"/"}return{re:o,score:r,keys:a,parse:d,stringify:p}}function K3(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function vf(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const a=K3(r[n],s[n]);if(a)return a;n++}if(Math.abs(s.length-r.length)===1){if(ac(r))return 1;if(ac(s))return-1}return s.length-r.length}function ac(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const W3={type:0,value:""},G3=/[a-zA-Z0-9_]/;function z3(e){if(!e)return[[]];if(e==="/")return[[W3]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(q){throw new Error(`ERR (${n})/"${A}": ${q}`)}let n=0,r=n;const s=[];let a;function o(){a&&s.push(a),a=[]}let d=0,p,A="",g="";function S(){A&&(n===0?a.push({type:0,value:A}):n===1||n===2||n===3?(a.length>1&&(p==="*"||p==="+")&&t(`A repeatable param (${A}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:A,regexp:g,repeatable:p==="*"||p==="+",optional:p==="*"||p==="?"})):t("Invalid state to consume buffer"),A="")}function H(){A+=p}for(;d<e.length;){if(p=e[d++],p==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:p==="/"?(A&&S(),o()):p===":"?(S(),n=1):H();break;case 4:H(),n=r;break;case 1:p==="("?n=2:G3.test(p)?H():(S(),n=0,p!=="*"&&p!=="?"&&p!=="+"&&d--);break;case 2:p===")"?g[g.length-1]=="\\"?g=g.slice(0,-1)+p:n=3:g+=p;break;case 3:S(),n=0,p!=="*"&&p!=="?"&&p!=="+"&&d--,g="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${A}"`),S(),o(),s}function Q3(e,t,n){const r=Y3(z3(e.path),n),s=Ot(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function Z3(e,t){const n=[],r=new Map;t=cc({strict:!1,end:!0,sensitive:!1},t);function s(S){return r.get(S)}function a(S,H,q){const he=!q,fe=lc(S);fe.aliasOf=q&&q.record;const ye=cc(t,S),Se=[fe];if("alias"in S){const me=typeof S.alias=="string"?[S.alias]:S.alias;for(const Qe of me)Se.push(lc(Ot({},fe,{components:q?q.record.components:fe.components,path:Qe,aliasOf:q?q.record:fe})))}let W,Ie;for(const me of Se){const{path:Qe}=me;if(H&&Qe[0]!=="/"){const at=H.record.path,ze=at[at.length-1]==="/"?"":"/";me.path=H.record.path+(Qe&&ze+Qe)}if(W=Q3(me,H,ye),q?q.alias.push(W):(Ie=Ie||W,Ie!==W&&Ie.alias.push(W),he&&S.name&&!oc(W)&&o(S.name)),pf(W)&&p(W),fe.children){const at=fe.children;for(let ze=0;ze<at.length;ze++)a(at[ze],W,q&&q.children[ze])}q=q||W}return Ie?()=>{o(Ie)}:Ya}function o(S){if(df(S)){const H=r.get(S);H&&(r.delete(S),n.splice(n.indexOf(H),1),H.children.forEach(o),H.alias.forEach(o))}else{const H=n.indexOf(S);H>-1&&(n.splice(H,1),S.record.name&&r.delete(S.record.name),S.children.forEach(o),S.alias.forEach(o))}}function d(){return n}function p(S){const H=t4(S,n);n.splice(H,0,S),S.record.name&&!oc(S)&&r.set(S.record.name,S)}function A(S,H){let q,he={},fe,ye;if("name"in S&&S.name){if(q=r.get(S.name),!q)throw ma(1,{location:S});ye=q.record.name,he=Ot(ic(H.params,q.keys.filter(Ie=>!Ie.optional).concat(q.parent?q.parent.keys.filter(Ie=>Ie.optional):[]).map(Ie=>Ie.name)),S.params&&ic(S.params,q.keys.map(Ie=>Ie.name))),fe=q.stringify(he)}else if(S.path!=null)fe=S.path,q=n.find(Ie=>Ie.re.test(fe)),q&&(he=q.parse(fe),ye=q.record.name);else{if(q=H.name?r.get(H.name):n.find(Ie=>Ie.re.test(H.path)),!q)throw ma(1,{location:S,currentLocation:H});ye=q.record.name,he=Ot({},H.params,S.params),fe=q.stringify(he)}const Se=[];let W=q;for(;W;)Se.unshift(W.record),W=W.parent;return{name:ye,path:fe,params:he,matched:Se,meta:e4(Se)}}e.forEach(S=>a(S));function g(){n.length=0,r.clear()}return{addRoute:a,resolve:A,removeRoute:o,clearRoutes:g,getRoutes:d,getRecordMatcher:s}}function ic(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function lc(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:J3(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function J3(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function oc(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function e4(e){return e.reduce((t,n)=>Ot(t,n.meta),{})}function cc(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function t4(e,t){let n=0,r=t.length;for(;n!==r;){const a=n+r>>1;vf(e,t[a])<0?r=a:n=a+1}const s=n4(e);return s&&(r=t.lastIndexOf(s,r-1)),r}function n4(e){let t=e;for(;t=t.parent;)if(pf(t)&&vf(e,t)===0)return t}function pf({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function r4(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const a=r[s].replace(of," "),o=a.indexOf("="),d=si(o<0?a:a.slice(0,o)),p=o<0?null:si(a.slice(o+1));if(d in t){let A=t[d];Sr(A)||(A=t[d]=[A]),A.push(p)}else t[d]=p}return t}function uc(e){let t="";for(let n in e){const r=e[n];if(n=g3(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Sr(r)?r.map(a=>a&&Zl(a)):[r&&Zl(r)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+n,a!=null&&(t+="="+a))})}return t}function s4(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Sr(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const a4=Symbol(""),fc=Symbol(""),X0=Symbol(""),bf=Symbol(""),eo=Symbol("");function Ca(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function us(e,t,n,r,s,a=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((d,p)=>{const A=H=>{H===!1?p(ma(4,{from:n,to:t})):H instanceof Error?p(H):j3(H)?p(ma(2,{from:t,to:H})):(o&&r.enterCallbacks[s]===o&&typeof H=="function"&&o.push(H),d())},g=a(()=>e.call(r&&r.instances[s],t,n,A));let S=Promise.resolve(g);e.length<3&&(S=S.then(A)),S.catch(H=>p(H))})}function Rl(e,t,n,r,s=a=>a()){const a=[];for(const o of e)for(const d in o.components){let p=o.components[d];if(!(t!=="beforeRouteEnter"&&!o.instances[d]))if(af(p)){const g=(p.__vccOpts||p)[t];g&&a.push(us(g,n,r,o,d,s))}else{let A=p();a.push(()=>A.then(g=>{if(!g)throw new Error(`Couldn't resolve component "${d}" at "${o.path}"`);const S=h3(g)?g.default:g;o.mods[d]=g,o.components[d]=S;const q=(S.__vccOpts||S)[t];return q&&us(q,n,r,o,d,s)()}))}}return a}function hc(e){const t=sr(X0),n=sr(bf),r=Zt(()=>{const p=Zr(e.to);return t.resolve(p)}),s=Zt(()=>{const{matched:p}=r.value,{length:A}=p,g=p[A-1],S=n.matched;if(!g||!S.length)return-1;const H=S.findIndex(da.bind(null,g));if(H>-1)return H;const q=_c(p[A-2]);return A>1&&_c(g)===q&&S[S.length-1].path!==q?S.findIndex(da.bind(null,p[A-2])):H}),a=Zt(()=>s.value>-1&&c4(n.params,r.value.params)),o=Zt(()=>s.value>-1&&s.value===n.matched.length-1&&hf(n.params,r.value.params));function d(p={}){return o4(p)?t[Zr(e.replace)?"replace":"push"](Zr(e.to)).catch(Ya):Promise.resolve()}return{route:r,href:Zt(()=>r.value.href),isActive:a,isExactActive:o,navigate:d}}const i4=Vr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:hc,setup(e,{slots:t}){const n=Hs(hc(e)),{options:r}=sr(X0),s=Zt(()=>({[dc(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[dc(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=t.default&&t.default(n);return e.custom?a:Zu("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},a)}}}),l4=i4;function o4(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function c4(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Sr(s)||s.length!==r.length||r.some((a,o)=>a!==s[o]))return!1}return!0}function _c(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const dc=(e,t,n)=>e??t??n,u4=Vr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=sr(eo),s=Zt(()=>e.route||r.value),a=sr(fc,0),o=Zt(()=>{let A=Zr(a);const{matched:g}=s.value;let S;for(;(S=g[A])&&!S.components;)A++;return A}),d=Zt(()=>s.value.matched[o.value]);la(fc,Zt(()=>o.value+1)),la(a4,d),la(eo,s);const p=jn();return Fr(()=>[p.value,d.value,e.name],([A,g,S],[H,q,he])=>{g&&(g.instances[S]=A,q&&q!==g&&A&&A===H&&(g.leaveGuards.size||(g.leaveGuards=q.leaveGuards),g.updateGuards.size||(g.updateGuards=q.updateGuards))),A&&g&&(!q||!da(g,q)||!H)&&(g.enterCallbacks[S]||[]).forEach(fe=>fe(A))},{flush:"post"}),()=>{const A=s.value,g=e.name,S=d.value,H=S&&S.components[g];if(!H)return mc(n.default,{Component:H,route:A});const q=S.props[g],he=q?q===!0?A.params:typeof q=="function"?q(A):q:null,ye=Zu(H,Ot({},he,t,{onVnodeUnmounted:Se=>{Se.component.isUnmounted&&(S.instances[g]=null)},ref:p}));return mc(n.default,{Component:ye,route:A})||ye}}});function mc(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const yf=u4;function f4(e){const t=Z3(e.routes,e),n=e.parseQuery||r4,r=e.stringifyQuery||uc,s=e.history,a=Ca(),o=Ca(),d=Ca(),p=y2(as);let A=as;Js&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const g=Al.bind(null,K=>""+K),S=Al.bind(null,E3),H=Al.bind(null,si);function q(K,Be){let xe,qe;return df(K)?(xe=t.getRecordMatcher(K),qe=Be):qe=K,t.addRoute(qe,xe)}function he(K){const Be=t.getRecordMatcher(K);Be&&t.removeRoute(Be)}function fe(){return t.getRoutes().map(K=>K.record)}function ye(K){return!!t.getRecordMatcher(K)}function Se(K,Be){if(Be=Ot({},Be||p.value),typeof K=="string"){const V=El(n,K,Be.path),se=t.resolve({path:V.path},Be),Ae=s.createHref(V.fullPath);return Ot(V,se,{params:H(se.params),hash:si(V.hash),redirectedFrom:void 0,href:Ae})}let xe;if(K.path!=null)xe=Ot({},K,{path:El(n,K.path,Be.path).path});else{const V=Ot({},K.params);for(const se in V)V[se]==null&&delete V[se];xe=Ot({},K,{params:S(V)}),Be.params=S(Be.params)}const qe=t.resolve(xe,Be),lt=K.hash||"";qe.params=g(H(qe.params));const vt=T3(r,Ot({},K,{hash:x3(lt),path:qe.path})),F=s.createHref(vt);return Ot({fullPath:vt,hash:lt,query:r===uc?s4(K.query):K.query||{}},qe,{redirectedFrom:void 0,href:F})}function W(K){return typeof K=="string"?El(n,K,p.value.path):Ot({},K)}function Ie(K,Be){if(A!==K)return ma(8,{from:Be,to:K})}function me(K){return ze(K)}function Qe(K){return me(Ot(W(K),{replace:!0}))}function at(K){const Be=K.matched[K.matched.length-1];if(Be&&Be.redirect){const{redirect:xe}=Be;let qe=typeof xe=="function"?xe(K):xe;return typeof qe=="string"&&(qe=qe.includes("?")||qe.includes("#")?qe=W(qe):{path:qe},qe.params={}),Ot({query:K.query,hash:K.hash,params:qe.path!=null?{}:K.params},qe)}}function ze(K,Be){const xe=A=Se(K),qe=p.value,lt=K.state,vt=K.force,F=K.replace===!0,V=at(xe);if(V)return ze(Ot(W(V),{state:typeof V=="object"?Ot({},lt,V.state):lt,force:vt,replace:F}),Be||xe);const se=xe;se.redirectedFrom=Be;let Ae;return!vt&&B3(r,qe,xe)&&(Ae=ma(16,{to:se,from:qe}),Ln(qe,qe,!0,!1)),(Ae?Promise.resolve(Ae):ut(se,qe)).catch(ie=>Yr(ie)?Yr(ie,2)?ie:ar(ie):gt(ie,se,qe)).then(ie=>{if(ie){if(Yr(ie,2))return ze(Ot({replace:F},W(ie.to),{state:typeof ie.to=="object"?Ot({},lt,ie.to.state):lt,force:vt}),Be||se)}else ie=jt(se,qe,!0,F,lt);return ht(se,qe,ie),ie})}function nt(K,Be){const xe=Ie(K,Be);return xe?Promise.reject(xe):Promise.resolve()}function Je(K){const Be=M.values().next().value;return Be&&typeof Be.runWithContext=="function"?Be.runWithContext(K):K()}function ut(K,Be){let xe;const[qe,lt,vt]=h4(K,Be);xe=Rl(qe.reverse(),"beforeRouteLeave",K,Be);for(const V of qe)V.leaveGuards.forEach(se=>{xe.push(us(se,K,Be))});const F=nt.bind(null,K,Be);return xe.push(F),yn(xe).then(()=>{xe=[];for(const V of a.list())xe.push(us(V,K,Be));return xe.push(F),yn(xe)}).then(()=>{xe=Rl(lt,"beforeRouteUpdate",K,Be);for(const V of lt)V.updateGuards.forEach(se=>{xe.push(us(se,K,Be))});return xe.push(F),yn(xe)}).then(()=>{xe=[];for(const V of vt)if(V.beforeEnter)if(Sr(V.beforeEnter))for(const se of V.beforeEnter)xe.push(us(se,K,Be));else xe.push(us(V.beforeEnter,K,Be));return xe.push(F),yn(xe)}).then(()=>(K.matched.forEach(V=>V.enterCallbacks={}),xe=Rl(vt,"beforeRouteEnter",K,Be,Je),xe.push(F),yn(xe))).then(()=>{xe=[];for(const V of o.list())xe.push(us(V,K,Be));return xe.push(F),yn(xe)}).catch(V=>Yr(V,8)?V:Promise.reject(V))}function ht(K,Be,xe){d.list().forEach(qe=>Je(()=>qe(K,Be,xe)))}function jt(K,Be,xe,qe,lt){const vt=Ie(K,Be);if(vt)return vt;const F=Be===as,V=Js?history.state:{};xe&&(qe||F?s.replace(K.fullPath,Ot({scroll:F&&V&&V.scroll},lt)):s.push(K.fullPath,lt)),p.value=K,Ln(K,Be,xe,F),ar()}let Dt;function Yn(){Dt||(Dt=s.listen((K,Be,xe)=>{if(!Hr.listening)return;const qe=Se(K),lt=at(qe);if(lt){ze(Ot(lt,{replace:!0}),qe).catch(Ya);return}A=qe;const vt=p.value;Js&&F3(tc(vt.fullPath,xe.delta),D0()),ut(qe,vt).catch(F=>Yr(F,12)?F:Yr(F,2)?(ze(F.to,qe).then(V=>{Yr(V,20)&&!xe.delta&&xe.type===ai.pop&&s.go(-1,!1)}).catch(Ya),Promise.reject()):(xe.delta&&s.go(-xe.delta,!1),gt(F,qe,vt))).then(F=>{F=F||jt(qe,vt,!1),F&&(xe.delta&&!Yr(F,8)?s.go(-xe.delta,!1):xe.type===ai.pop&&Yr(F,20)&&s.go(-1,!1)),ht(qe,vt,F)}).catch(Ya)}))}let An=Ca(),It=Ca(),_t;function gt(K,Be,xe){ar(K);const qe=It.list();return qe.length?qe.forEach(lt=>lt(K,Be,xe)):console.error(K),Promise.reject(K)}function Nn(){return _t&&p.value!==as?Promise.resolve():new Promise((K,Be)=>{An.add([K,Be])})}function ar(K){return _t||(_t=!K,Yn(),An.list().forEach(([Be,xe])=>K?xe(K):Be()),An.reset()),K}function Ln(K,Be,xe,qe){const{scrollBehavior:lt}=e;if(!Js||!lt)return Promise.resolve();const vt=!xe&&$3(tc(K.fullPath,0))||(qe||!xe)&&history.state&&history.state.scroll||null;return hs().then(()=>lt(K,Be,vt)).then(F=>F&&k3(F)).catch(F=>gt(F,K,Be))}const nn=K=>s.go(K);let ft;const M=new Set,Hr={currentRoute:p,listening:!0,addRoute:q,removeRoute:he,clearRoutes:t.clearRoutes,hasRoute:ye,getRoutes:fe,resolve:Se,options:e,push:me,replace:Qe,go:nn,back:()=>nn(-1),forward:()=>nn(1),beforeEach:a.add,beforeResolve:o.add,afterEach:d.add,onError:It.add,isReady:Nn,install(K){const Be=this;K.component("RouterLink",l4),K.component("RouterView",yf),K.config.globalProperties.$router=Be,Object.defineProperty(K.config.globalProperties,"$route",{enumerable:!0,get:()=>Zr(p)}),Js&&!ft&&p.value===as&&(ft=!0,me(s.location).catch(lt=>{}));const xe={};for(const lt in as)Object.defineProperty(xe,lt,{get:()=>p.value[lt],enumerable:!0});K.provide(X0,Be),K.provide(bf,yu(xe)),K.provide(eo,p);const qe=K.unmount;M.add(K),K.unmount=function(){M.delete(K),M.size<1&&(A=as,Dt&&Dt(),Dt=null,p.value=as,ft=!1,_t=!1),qe()}}};function yn(K){return K.reduce((Be,xe)=>Be.then(()=>Je(xe)),Promise.resolve())}return Hr}function h4(e,t){const n=[],r=[],s=[],a=Math.max(t.matched.length,e.matched.length);for(let o=0;o<a;o++){const d=t.matched[o];d&&(e.matched.find(A=>da(A,d))?r.push(d):n.push(d));const p=e.matched[o];p&&(t.matched.find(A=>da(A,p))||s.push(p))}return[n,r,s]}function wf(){return sr(X0)}const _4={__name:"App",setup(e){return(t,n)=>(qa(),Wu(Zr(yf)))}},pa=Object.assign,Sf=typeof window<"u",j0=e=>e!==null&&typeof e=="object",Xn=e=>e!=null,Gi=e=>typeof e=="function",d4=e=>j0(e)&&Gi(e.then)&&Gi(e.catch),xf=e=>typeof e=="number"||/^\d+(\.\d+)?$/.test(e),m4=()=>Sf?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;function vc(e,t){const n=t.split(".");let r=e;return n.forEach(s=>{var a;r=j0(r)&&(a=r[s])!=null?a:""}),r}const pc=e=>Array.isArray(e)?e:[e],Ni=null,qn=[Number,String],Ho={type:Boolean,default:!0},v4=e=>({type:qn,default:e}),xn=e=>({type:String,default:e});var gf=typeof window<"u";function p4(e){const t=sr(e,null);if(t){const n=ci(),{link:r,unlink:s,internalChildren:a}=t;r(n),k0(()=>s(n));const o=Zt(()=>a.indexOf(n));return{parent:t,index:o}}return{parent:null,index:jn(-1)}}function b4(e){let t;L0(()=>{e(),hs(()=>{t=!0})}),Io(()=>{t&&e()})}function y4(e,t,n={}){if(!gf)return;const{target:r=window,passive:s=!1,capture:a=!1}=n;let o=!1,d;const p=S=>{if(o)return;const H=Zr(S);H&&!d&&(H.addEventListener(e,t,{capture:a,passive:s}),d=!0)},A=S=>{if(o)return;const H=Zr(S);H&&d&&(H.removeEventListener(e,t,a),d=!1)};k0(()=>A(r)),Oo(()=>A(r)),b4(()=>p(r));let g;return tn(r)&&(g=Fr(r,(S,H)=>{A(H),p(S)})),()=>{g==null||g(),A(r),o=!0}}var Ei,Ml;function w4(){if(!Ei&&(Ei=jn(0),Ml=jn(0),gf)){const e=()=>{Ei.value=window.innerWidth,Ml.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:Ei,height:Ml}}var S4=Symbol("van-field");function bc(e,t){"scrollTop"in e?e.scrollTop=t:e.scrollTo(e.scrollX,t)}function Af(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function Ef(e){bc(window,e),bc(document.body,e)}const x4=m4();function g4(){x4&&Ef(Af())}function Li(e,t){(typeof e.cancelable!="boolean"||e.cancelable)&&e.preventDefault()}w4();function nr(e){if(Xn(e))return xf(e)?`${e}px`:String(e)}function A4(e){if(Xn(e)){if(Array.isArray(e))return{width:nr(e[0]),height:nr(e[1])};const t=nr(e);return{width:t,height:t}}}const E4=/-(\w)/g,Rf=e=>e.replace(E4,(t,n)=>n.toUpperCase()),R4=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,""),M4=(e,t,n)=>Math.min(Math.max(e,t),n);function yc(e,t,n){const r=e.indexOf(t);return r===-1?e:t==="-"&&r!==0?e.slice(0,r):e.slice(0,r+1)+e.slice(r).replace(n,"")}function T4(e,t=!0,n=!0){t?e=yc(e,".",/\./g):e=e.split(".")[0],n?e=yc(e,"-",/-/g):e=e.replace(/-/,"");const r=t?/[^-0-9.]/g:/[^-0-9]/g;return e.replace(r,"")}const{hasOwnProperty:B4}=Object.prototype;function C4(e,t,n){const r=t[n];Xn(r)&&(!B4.call(e,n)||!j0(r)?e[n]=r:e[n]=Mf(Object(e[n]),r))}function Mf(e,t){return Object.keys(t).forEach(n=>{C4(e,t,n)}),e}var I4={name:"姓名",tel:"电话",save:"保存",clear:"清空",cancel:"取消",confirm:"确认",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(e,t)=>`${e}年${t}月`,rangePrompt:e=>`最多选择 ${e} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:e=>`${e}折`,condition:e=>`满${e}元可用`},vanCouponCell:{title:"优惠券",count:e=>`${e}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}};const wc=jn("zh-CN"),Sc=Hs({"zh-CN":I4}),O4={messages(){return Sc[wc.value]},use(e,t){wc.value=e,this.add({[e]:t})},add(e={}){Mf(Sc,e)}};var P4=O4;function N4(e){const t=Rf(e)+".";return(n,...r)=>{const s=P4.messages(),a=vc(s,t+n)||vc(s,n);return Gi(a)?a(...r):a}}function to(e,t){return t?typeof t=="string"?` ${e}--${t}`:Array.isArray(t)?t.reduce((n,r)=>n+to(e,r),""):Object.keys(t).reduce((n,r)=>n+(t[r]?to(e,r):""),""):""}function L4(e){return(t,n)=>(t&&typeof t!="string"&&(n=t,t=""),t=t?`${e}__${t}`:e,`${t}${to(t,n)}`)}function ys(e){const t=`van-${e}`;return[t,L4(t),N4(t)]}const Tf="van-hairline",k4=`${Tf}--surround`,F4=`${Tf}--top-bottom`,$4=Symbol("van-form");function ws(e){return e.install=t=>{const{name:n}=e;n&&(t.component(n,e),t.component(Rf(`-${n}`),e))},e}function V4(e){const t=ci();t&&pa(t.proxy,e)}const Bf={to:[String,Object],url:String,replace:Boolean};function H4({to:e,url:t,replace:n,$router:r}){e&&r?r[n?"replace":"push"](e):t&&(n?location.replace(t):location.href=t)}function Cf(){const e=ci().proxy;return()=>H4(e)}const[D4,xc]=ys("badge"),X4={dot:Boolean,max:qn,tag:xn("div"),color:String,offset:Array,content:qn,showZero:Ho,position:xn("top-right")};var j4=Vr({name:D4,props:X4,setup(e,{slots:t}){const n=()=>{if(t.content)return!0;const{content:d,showZero:p}=e;return Xn(d)&&d!==""&&(p||d!==0&&d!=="0")},r=()=>{const{dot:d,max:p,content:A}=e;if(!d&&n())return t.content?t.content():Xn(p)&&xf(A)&&+A>+p?`${p}+`:A},s=d=>d.startsWith("-")?d.replace("-",""):`-${d}`,a=Zt(()=>{const d={background:e.color};if(e.offset){const[p,A]=e.offset,{position:g}=e,[S,H]=g.split("-");t.default?(typeof A=="number"?d[S]=nr(S==="top"?A:-A):d[S]=S==="top"?nr(A):s(A),typeof p=="number"?d[H]=nr(H==="left"?p:-p):d[H]=H==="left"?nr(p):s(p)):(d.marginTop=nr(A),d.marginLeft=nr(p))}return d}),o=()=>{if(n()||e.dot)return tt("div",{class:xc([e.position,{dot:e.dot,fixed:!!t.default}]),style:a.value},[r()])};return()=>{if(t.default){const{tag:d}=e;return tt(d,{class:xc("wrapper")},{default:()=>[t.default(),o()]})}return o()}}});const q4=ws(j4),U4=e=>{},[If,Y4]=ys("config-provider"),Of=Symbol(If),K4={tag:xn("div"),theme:xn("light"),zIndex:Number,themeVars:Object,themeVarsDark:Object,themeVarsLight:Object,themeVarsScope:xn("local"),iconPrefix:String};function W4(e){return e.replace(/([a-zA-Z])(\d)/g,"$1-$2")}function G4(e){const t={};return Object.keys(e).forEach(n=>{const r=W4(R4(n));t[`--van-${r}`]=e[n]}),t}function Ri(e={},t={}){Object.keys(e).forEach(n=>{e[n]!==t[n]&&document.documentElement.style.setProperty(n,e[n])}),Object.keys(t).forEach(n=>{e[n]||document.documentElement.style.removeProperty(n)})}var z4=Vr({name:If,props:K4,setup(e,{slots:t}){const n=Zt(()=>G4(pa({},e.themeVars,e.theme==="dark"?e.themeVarsDark:e.themeVarsLight)));if(Sf){const r=()=>{document.documentElement.classList.add(`van-theme-${e.theme}`)},s=(a=e.theme)=>{document.documentElement.classList.remove(`van-theme-${a}`)};Fr(()=>e.theme,(a,o)=>{o&&s(o),r()},{immediate:!0}),Io(r),Oo(s),Po(s),Fr(n,(a,o)=>{e.themeVarsScope==="global"&&Ri(a,o)}),Fr(()=>e.themeVarsScope,(a,o)=>{o==="global"&&Ri({},n.value),a==="global"&&Ri(n.value,{})}),e.themeVarsScope==="global"&&Ri(n.value,{})}return la(Of,e),fd(()=>{e.zIndex!==void 0&&U4(e.zIndex)}),()=>tt(e.tag,{class:Y4(),style:e.themeVarsScope==="local"?n.value:void 0},{default:()=>{var r;return[(r=t.default)==null?void 0:r.call(t)]}})}});const[Q4,gc]=ys("icon"),Z4=e=>e==null?void 0:e.includes("/"),J4={dot:Boolean,tag:xn("i"),name:String,size:qn,badge:qn,color:String,badgeProps:Object,classPrefix:String};var em=Vr({name:Q4,props:J4,setup(e,{slots:t}){const n=sr(Of,null),r=Zt(()=>e.classPrefix||(n==null?void 0:n.iconPrefix)||gc());return()=>{const{tag:s,dot:a,name:o,size:d,badge:p,color:A}=e,g=Z4(o);return tt(q4,V0({dot:a,tag:s,class:[r.value,g?"":`${r.value}-${o}`],style:{color:A,fontSize:nr(d)},content:p},e.badgeProps),{default:()=>{var S;return[(S=t.default)==null?void 0:S.call(t),g&&tt("img",{class:gc("image"),src:o},null)]}})}}});const oa=ws(em),[tm,Wa]=ys("loading"),nm=Array(12).fill(null).map((e,t)=>tt("i",{class:Wa("line",String(t+1))},null)),rm=tt("svg",{class:Wa("circular"),viewBox:"25 25 50 50"},[tt("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),sm={size:qn,type:xn("circular"),color:String,vertical:Boolean,textSize:qn,textColor:String};var am=Vr({name:tm,props:sm,setup(e,{slots:t}){const n=Zt(()=>pa({color:e.color},A4(e.size))),r=()=>{const a=e.type==="spinner"?nm:rm;return tt("span",{class:Wa("spinner",e.type),style:n.value},[t.icon?t.icon():a])},s=()=>{var a;if(t.default)return tt("span",{class:Wa("text"),style:{fontSize:nr(e.textSize),color:(a=e.textColor)!=null?a:e.color}},[t.default()])};return()=>{const{type:a,vertical:o}=e;return tt("div",{class:Wa([a,{vertical:o}]),"aria-live":"polite","aria-busy":!0},[r(),s()])}}});const im=ws(am),[lm,Ws]=ys("button"),om=pa({},Bf,{tag:xn("button"),text:String,icon:String,type:xn("default"),size:xn("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:xn("button"),loadingSize:qn,loadingText:String,loadingType:String,iconPosition:xn("left")});var cm=Vr({name:lm,props:om,emits:["click"],setup(e,{emit:t,slots:n}){const r=Cf(),s=()=>n.loading?n.loading():tt(im,{size:e.loadingSize,type:e.loadingType,class:Ws("loading")},null),a=()=>{if(e.loading)return s();if(n.icon)return tt("div",{class:Ws("icon")},[n.icon()]);if(e.icon)return tt(oa,{name:e.icon,class:Ws("icon"),classPrefix:e.iconPrefix},null)},o=()=>{let A;if(e.loading?A=e.loadingText:A=n.default?n.default():e.text,A)return tt("span",{class:Ws("text")},[A])},d=()=>{const{color:A,plain:g}=e;if(A){const S={color:g?A:"white"};return g||(S.background=A),A.includes("gradient")?S.border=0:S.borderColor=A,S}},p=A=>{e.loading?Li(A):e.disabled||(t("click",A),r())};return()=>{const{tag:A,type:g,size:S,block:H,round:q,plain:he,square:fe,loading:ye,disabled:Se,hairline:W,nativeType:Ie,iconPosition:me}=e,Qe=[Ws([g,S,{plain:he,block:H,round:q,square:fe,loading:ye,disabled:Se,hairline:W}]),{[k4]:W}];return tt(A,{type:Ie,class:Qe,style:d(),disabled:Se,onClick:p},{default:()=>[tt("div",{class:Ws("content")},[me==="left"&&a(),o(),me==="right"&&a()])]})}}});const Pf=ws(cm),um=()=>{var e;const{scopeId:t}=((e=ci())==null?void 0:e.vnode)||{};return t?{[t]:""}:null};let fm=0;function hm(){const e=ci(),{name:t="unknown"}=(e==null?void 0:e.type)||{};return`${t}-${++fm}`}const[_m,Gs]=ys("cell"),Nf={tag:xn("div"),icon:String,size:String,title:qn,value:qn,label:qn,center:Boolean,isLink:Boolean,border:Ho,iconPrefix:String,valueClass:Ni,labelClass:Ni,titleClass:Ni,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},dm=pa({},Nf,Bf);var mm=Vr({name:_m,props:dm,setup(e,{slots:t}){const n=Cf(),r=()=>{if(t.label||Xn(e.label))return tt("div",{class:[Gs("label"),e.labelClass]},[t.label?t.label():e.label])},s=()=>{var p;if(t.title||Xn(e.title)){const A=(p=t.title)==null?void 0:p.call(t);return Array.isArray(A)&&A.length===0?void 0:tt("div",{class:[Gs("title"),e.titleClass],style:e.titleStyle},[A||tt("span",null,[e.title]),r()])}},a=()=>{const p=t.value||t.default;if(p||Xn(e.value))return tt("div",{class:[Gs("value"),e.valueClass]},[p?p():tt("span",null,[e.value])])},o=()=>{if(t.icon)return t.icon();if(e.icon)return tt(oa,{name:e.icon,class:Gs("left-icon"),classPrefix:e.iconPrefix},null)},d=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const p=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return tt(oa,{name:p,class:Gs("right-icon")},null)}};return()=>{var p;const{tag:A,size:g,center:S,border:H,isLink:q,required:he}=e,fe=(p=e.clickable)!=null?p:q,ye={center:S,required:!!he,clickable:fe,borderless:!H};return g&&(ye[g]=!!g),tt(A,{class:Gs(ye),role:fe?"button":void 0,tabindex:fe?0:void 0,onClick:n},{default:()=>{var Se;return[o(),s(),a(),d(),(Se=t.extra)==null?void 0:Se.call(t)]}})}}});const vm=ws(mm);function Lf(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function pm(e,t){if(Lf(e)){if(t.required)return!1;if(t.validateEmpty===!1)return!0}return!(t.pattern&&!t.pattern.test(String(e)))}function bm(e,t){return new Promise(n=>{const r=t.validator(e,t);if(d4(r)){r.then(n);return}n(r)})}function Ac(e,t){const{message:n}=t;return Gi(n)?n(e,t):n||""}function ym({target:e}){e.composing=!0}function Ec({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function wm(e,t){const n=Af();e.style.height="auto";let r=e.scrollHeight;if(j0(t)){const{maxHeight:s,minHeight:a}=t;s!==void 0&&(r=Math.min(r,s)),a!==void 0&&(r=Math.max(r,a))}r&&(e.style.height=`${r}px`,Ef(n))}function Sm(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function Kr(e){return[...e].length}function Tl(e,t){return[...e].slice(0,t).join("")}const[xm,or]=ys("field"),gm={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:qn,max:Number,min:Number,formatter:Function,clearIcon:xn("clear"),modelValue:v4(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:xn("focus"),formatTrigger:xn("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},Am=pa({},Nf,gm,{rows:qn,type:xn("text"),rules:Array,autosize:[Boolean,Object],labelWidth:qn,labelClass:Ni,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Em=Vr({name:xm,props:Am,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:t,slots:n}){const r=hm(),s=Hs({status:"unvalidated",focused:!1,validateMessage:""}),a=jn(),o=jn(),d=jn(),{parent:p}=p4($4),A=()=>{var K;return String((K=e.modelValue)!=null?K:"")},g=K=>{if(Xn(e[K]))return e[K];if(p&&Xn(p.props[K]))return p.props[K]},S=Zt(()=>{const K=g("readonly");if(e.clearable&&!K){const Be=A()!=="",xe=e.clearTrigger==="always"||e.clearTrigger==="focus"&&s.focused;return Be&&xe}return!1}),H=Zt(()=>d.value&&n.input?d.value():e.modelValue),q=Zt(()=>{var K;const Be=g("required");return Be==="auto"?(K=e.rules)==null?void 0:K.some(xe=>xe.required):Be}),he=K=>K.reduce((Be,xe)=>Be.then(()=>{if(s.status==="failed")return;let{value:qe}=H;if(xe.formatter&&(qe=xe.formatter(qe,xe)),!pm(qe,xe)){s.status="failed",s.validateMessage=Ac(qe,xe);return}if(xe.validator)return Lf(qe)&&xe.validateEmpty===!1?void 0:bm(qe,xe).then(lt=>{lt&&typeof lt=="string"?(s.status="failed",s.validateMessage=lt):lt===!1&&(s.status="failed",s.validateMessage=Ac(qe,xe))})}),Promise.resolve()),fe=()=>{s.status="unvalidated",s.validateMessage=""},ye=()=>t("endValidate",{status:s.status,message:s.validateMessage}),Se=(K=e.rules)=>new Promise(Be=>{fe(),K?(t("startValidate"),he(K).then(()=>{s.status==="failed"?(Be({name:e.name,message:s.validateMessage}),ye()):(s.status="passed",Be(),ye())})):Be()}),W=K=>{if(p&&e.rules){const{validateTrigger:Be}=p.props,xe=pc(Be).includes(K),qe=e.rules.filter(lt=>lt.trigger?pc(lt.trigger).includes(K):xe);qe.length&&Se(qe)}},Ie=K=>{var Be;const{maxlength:xe}=e;if(Xn(xe)&&Kr(K)>+xe){const qe=A();if(qe&&Kr(qe)===+xe)return qe;const lt=(Be=a.value)==null?void 0:Be.selectionEnd;if(s.focused&&lt){const vt=[...K],F=vt.length-+xe;return vt.splice(lt-F,F),vt.join("")}return Tl(K,+xe)}return K},me=(K,Be="onChange")=>{var xe,qe;const lt=K;K=Ie(K);const vt=Kr(lt)-Kr(K);if(e.type==="number"||e.type==="digit"){const V=e.type==="number";K=T4(K,V,V),Be==="onBlur"&&K!==""&&(e.min!==void 0||e.max!==void 0)&&(K=M4(+K,(xe=e.min)!=null?xe:-1/0,(qe=e.max)!=null?qe:1/0).toString())}let F=0;if(e.formatter&&Be===e.formatTrigger){const{formatter:V,maxlength:se}=e;if(K=V(K),Xn(se)&&Kr(K)>+se&&(K=Tl(K,+se)),a.value&&s.focused){const{selectionEnd:Ae}=a.value,ie=Tl(lt,Ae);F=Kr(V(ie))-Kr(ie)}}if(a.value&&a.value.value!==K)if(s.focused){let{selectionStart:V,selectionEnd:se}=a.value;if(a.value.value=K,Xn(V)&&Xn(se)){const Ae=Kr(K);vt?(V-=vt,se-=vt):F&&(V+=F,se+=F),a.value.setSelectionRange(Math.min(V,Ae),Math.min(se,Ae))}}else a.value.value=K;K!==e.modelValue&&t("update:modelValue",K)},Qe=K=>{K.target.composing||me(K.target.value)},at=()=>{var K;return(K=a.value)==null?void 0:K.blur()},ze=()=>{var K;return(K=a.value)==null?void 0:K.focus()},nt=()=>{const K=a.value;e.type==="textarea"&&e.autosize&&K&&wm(K,e.autosize)},Je=K=>{s.focused=!0,t("focus",K),hs(nt),g("readonly")&&at()},ut=K=>{s.focused=!1,me(A(),"onBlur"),t("blur",K),!g("readonly")&&(W("onBlur"),hs(nt),g4())},ht=K=>t("clickInput",K),jt=K=>t("clickLeftIcon",K),Dt=K=>t("clickRightIcon",K),Yn=K=>{Li(K),t("update:modelValue",""),t("clear",K)},An=Zt(()=>{if(typeof e.error=="boolean")return e.error;if(p&&p.props.showError&&s.status==="failed")return!0}),It=Zt(()=>{const K=g("labelWidth"),Be=g("labelAlign");if(K&&Be!=="top")return{width:nr(K)}}),_t=K=>{K.keyCode===13&&(!(p&&p.props.submitOnEnter)&&e.type!=="textarea"&&Li(K),e.type==="search"&&at()),t("keypress",K)},gt=()=>e.id||`${r}-input`,Nn=()=>s.status,ar=()=>{const K=or("control",[g("inputAlign"),{error:An.value,custom:!!n.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(n.input)return tt("div",{class:K,onClick:ht},[n.input()]);const Be={id:gt(),ref:a,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:K,disabled:g("disabled"),readonly:g("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${r}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:ut,onFocus:Je,onInput:Qe,onClick:ht,onChange:Ec,onKeypress:_t,onCompositionend:Ec,onCompositionstart:ym};return e.type==="textarea"?tt("textarea",Be,null):tt("input",V0(Sm(e.type),Be),null)},Ln=()=>{const K=n["left-icon"];if(e.leftIcon||K)return tt("div",{class:or("left-icon"),onClick:jt},[K?K():tt(oa,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},nn=()=>{const K=n["right-icon"];if(e.rightIcon||K)return tt("div",{class:or("right-icon"),onClick:Dt},[K?K():tt(oa,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},ft=()=>{if(e.showWordLimit&&e.maxlength){const K=Kr(A());return tt("div",{class:or("word-limit")},[tt("span",{class:or("word-num")},[K]),ni("/"),e.maxlength])}},M=()=>{if(p&&p.props.showErrorMessage===!1)return;const K=e.errorMessage||s.validateMessage;if(K){const Be=n["error-message"],xe=g("errorMessageAlign");return tt("div",{class:or("error-message",xe)},[Be?Be({message:K}):K])}},Hr=()=>{const K=g("labelWidth"),Be=g("labelAlign"),xe=g("colon")?":":"";if(n.label)return[n.label(),xe];if(e.label)return tt("label",{id:`${r}-label`,for:n.input?void 0:gt(),"data-allow-mismatch":"attribute",onClick:qe=>{Li(qe),ze()},style:Be==="top"&&K?{width:nr(K)}:void 0},[e.label+xe])},yn=()=>[tt("div",{class:or("body")},[ar(),S.value&&tt(oa,{ref:o,name:e.clearIcon,class:or("clear")},null),nn(),n.button&&tt("div",{class:or("button")},[n.button()])]),ft(),M()];return V4({blur:at,focus:ze,validate:Se,formValue:H,resetValidation:fe,getValidationStatus:Nn}),la(S4,{customValue:d,resetValidation:fe,validateWithTrigger:W}),Fr(()=>e.modelValue,()=>{me(A()),fe(),W("onChange"),hs(nt)}),L0(()=>{me(A(),e.formatTrigger),hs(nt)}),y4("touchstart",Yn,{target:Zt(()=>{var K;return(K=o.value)==null?void 0:K.$el})}),()=>{const K=g("disabled"),Be=g("labelAlign"),xe=Ln(),qe=()=>{const lt=Hr();return Be==="top"?[xe,lt].filter(Boolean):lt||[]};return tt(vm,{size:e.size,class:or({error:An.value,disabled:K,[`label-${Be}`]:Be}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:It.value,valueClass:or("value"),titleClass:[or("label",[Be,{required:q.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:xe&&Be!=="top"?()=>xe:null,title:qe,value:yn,extra:n.extra})}}});const Rm=ws(Em),[Mm,Rc]=ys("cell-group"),Tm={title:String,inset:Boolean,border:Ho};var Bm=Vr({name:Mm,inheritAttrs:!1,props:Tm,setup(e,{slots:t,attrs:n}){const r=()=>{var a;return tt("div",V0({class:[Rc({inset:e.inset}),{[F4]:e.border&&!e.inset}]},n,um()),[(a=t.default)==null?void 0:a.call(t)])},s=()=>tt("div",{class:Rc("title",{inset:e.inset})},[t.title?t.title():e.title]);return()=>e.title||t.title?tt(pr,null,[s(),r()]):r()}});const Cm=ws(Bm),Im=ws(z4);var Om=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var kf={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Om,function(){function n(N){return new Int8Array(N)}function r(N){return new Int16Array(N)}function s(N){return new Int32Array(N)}function a(N){return new Float32Array(N)}function o(N){return new Float64Array(N)}function d(N){if(N.length==1)return a(N[0]);var te=N[0];N=N.slice(1);for(var ue=[],ne=0;ne<te;ne++)ue.push(d(N));return ue}function p(N){if(N.length==1)return s(N[0]);var te=N[0];N=N.slice(1);for(var ue=[],ne=0;ne<te;ne++)ue.push(p(N));return ue}function A(N){if(N.length==1)return r(N[0]);var te=N[0];N=N.slice(1);for(var ue=[],ne=0;ne<te;ne++)ue.push(A(N));return ue}function g(N){if(N.length==1)return new Array(N[0]);var te=N[0];N=N.slice(1);for(var ue=[],ne=0;ne<te;ne++)ue.push(g(N));return ue}var S={};S.fill=function(N,te,ue,ne){if(arguments.length==2)for(var ge=0;ge<N.length;ge++)N[ge]=arguments[1];else for(var ge=te;ge<ue;ge++)N[ge]=ne};var H={};H.arraycopy=function(N,te,ue,ne,ge){for(var re=te+ge;te<re;)ue[ne++]=N[te++]};var q={};q.SQRT2=1.4142135623730951,q.FAST_LOG10=function(N){return Math.log10(N)},q.FAST_LOG10_X=function(N,te){return Math.log10(N)*te};function he(N){this.ordinal=N}he.short_block_allowed=new he(0),he.short_block_coupled=new he(1),he.short_block_dispensed=new he(2),he.short_block_forced=new he(3);var fe={};fe.MAX_VALUE=34028235e31;function ye(N){this.ordinal=N}ye.vbr_off=new ye(0),ye.vbr_mt=new ye(1),ye.vbr_rh=new ye(2),ye.vbr_abr=new ye(3),ye.vbr_mtrh=new ye(4),ye.vbr_default=ye.vbr_mtrh;var Se=function(N){},W={System:H,VbrMode:ye,Float:fe,ShortBlock:he,Util:q,Arrays:S,new_array_n:g,new_byte:n,new_double:o,new_float:a,new_float_n:d,new_int:s,new_int_n:p,new_short:r,new_short_n:A,assert:Se},Ie=W.System,me=W.Util,Qe=W.Arrays,at=W.new_float;function ze(){var N=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*me.SQRT2*.5/2384e-9,.017876148*me.SQRT2*.5/2384e-9,.003134727*me.SQRT2*.5/2384e-9,.002457142*me.SQRT2*.5/2384e-9,971317e-9*me.SQRT2*.5/2384e-9,218868e-9*me.SQRT2*.5/2384e-9,101566e-9*me.SQRT2*.5/2384e-9,13828e-9*me.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],te=12,ue=36,ne=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],ge=ne[M.SHORT_TYPE],re=ne[M.SHORT_TYPE],de=ne[M.SHORT_TYPE],Ce=ne[M.SHORT_TYPE],Ne=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function U(I,$,i){for(var z=10,G=$+238-14-286,D=-15;D<0;D++){var f,E,C;f=N[z+-10],E=I[G+-224]*f,C=I[$+224]*f,f=N[z+-9],E+=I[G+-160]*f,C+=I[$+160]*f,f=N[z+-8],E+=I[G+-96]*f,C+=I[$+96]*f,f=N[z+-7],E+=I[G+-32]*f,C+=I[$+32]*f,f=N[z+-6],E+=I[G+32]*f,C+=I[$+-32]*f,f=N[z+-5],E+=I[G+96]*f,C+=I[$+-96]*f,f=N[z+-4],E+=I[G+160]*f,C+=I[$+-160]*f,f=N[z+-3],E+=I[G+224]*f,C+=I[$+-224]*f,f=N[z+-2],E+=I[$+-256]*f,C-=I[G+256]*f,f=N[z+-1],E+=I[$+-192]*f,C-=I[G+192]*f,f=N[z+0],E+=I[$+-128]*f,C-=I[G+128]*f,f=N[z+1],E+=I[$+-64]*f,C-=I[G+64]*f,f=N[z+2],E+=I[$+0]*f,C-=I[G+0]*f,f=N[z+3],E+=I[$+64]*f,C-=I[G+-64]*f,f=N[z+4],E+=I[$+128]*f,C-=I[G+-128]*f,f=N[z+5],E+=I[$+192]*f,C-=I[G+-192]*f,E*=N[z+6],f=C-E,i[30+D*2]=C+E,i[31+D*2]=N[z+7]*f,z+=18,$--,G++}{var E,C,O,k;C=I[$+-16]*N[z+-10],E=I[$+-32]*N[z+-2],C+=(I[$+-48]-I[$+16])*N[z+-9],E+=I[$+-96]*N[z+-1],C+=(I[$+-80]+I[$+48])*N[z+-8],E+=I[$+-160]*N[z+0],C+=(I[$+-112]-I[$+80])*N[z+-7],E+=I[$+-224]*N[z+1],C+=(I[$+-144]+I[$+112])*N[z+-6],E-=I[$+32]*N[z+2],C+=(I[$+-176]-I[$+144])*N[z+-5],E-=I[$+96]*N[z+3],C+=(I[$+-208]+I[$+176])*N[z+-4],E-=I[$+160]*N[z+4],C+=(I[$+-240]-I[$+208])*N[z+-3],E-=I[$+224],O=E-C,k=E+C,C=i[14],E=i[15]-C,i[31]=k+C,i[30]=O+E,i[15]=O-E,i[14]=k-C}{var l;l=i[28]-i[0],i[0]+=i[28],i[28]=l*N[z+-2*18+7],l=i[29]-i[1],i[1]+=i[29],i[29]=l*N[z+-2*18+7],l=i[26]-i[2],i[2]+=i[26],i[26]=l*N[z+-4*18+7],l=i[27]-i[3],i[3]+=i[27],i[27]=l*N[z+-4*18+7],l=i[24]-i[4],i[4]+=i[24],i[24]=l*N[z+-6*18+7],l=i[25]-i[5],i[5]+=i[25],i[25]=l*N[z+-6*18+7],l=i[22]-i[6],i[6]+=i[22],i[22]=l*me.SQRT2,l=i[23]-i[7],i[7]+=i[23],i[23]=l*me.SQRT2-i[7],i[7]-=i[6],i[22]-=i[7],i[23]-=i[22],l=i[6],i[6]=i[31]-l,i[31]=i[31]+l,l=i[7],i[7]=i[30]-l,i[30]=i[30]+l,l=i[22],i[22]=i[15]-l,i[15]=i[15]+l,l=i[23],i[23]=i[14]-l,i[14]=i[14]+l,l=i[20]-i[8],i[8]+=i[20],i[20]=l*N[z+-10*18+7],l=i[21]-i[9],i[9]+=i[21],i[21]=l*N[z+-10*18+7],l=i[18]-i[10],i[10]+=i[18],i[18]=l*N[z+-12*18+7],l=i[19]-i[11],i[11]+=i[19],i[19]=l*N[z+-12*18+7],l=i[16]-i[12],i[12]+=i[16],i[16]=l*N[z+-14*18+7],l=i[17]-i[13],i[13]+=i[17],i[17]=l*N[z+-14*18+7],l=-i[20]+i[24],i[20]+=i[24],i[24]=l*N[z+-12*18+7],l=-i[21]+i[25],i[21]+=i[25],i[25]=l*N[z+-12*18+7],l=i[4]-i[8],i[4]+=i[8],i[8]=l*N[z+-12*18+7],l=i[5]-i[9],i[5]+=i[9],i[9]=l*N[z+-12*18+7],l=i[0]-i[12],i[0]+=i[12],i[12]=l*N[z+-4*18+7],l=i[1]-i[13],i[1]+=i[13],i[13]=l*N[z+-4*18+7],l=i[16]-i[28],i[16]+=i[28],i[28]=l*N[z+-4*18+7],l=-i[17]+i[29],i[17]+=i[29],i[29]=l*N[z+-4*18+7],l=me.SQRT2*(i[2]-i[10]),i[2]+=i[10],i[10]=l,l=me.SQRT2*(i[3]-i[11]),i[3]+=i[11],i[11]=l,l=me.SQRT2*(-i[18]+i[26]),i[18]+=i[26],i[26]=l-i[18],l=me.SQRT2*(-i[19]+i[27]),i[19]+=i[27],i[27]=l-i[19],l=i[2],i[19]-=i[3],i[3]-=l,i[2]=i[31]-l,i[31]+=l,l=i[3],i[11]-=i[19],i[18]-=l,i[3]=i[30]-l,i[30]+=l,l=i[18],i[27]-=i[11],i[19]-=l,i[18]=i[15]-l,i[15]+=l,l=i[19],i[10]-=l,i[19]=i[14]-l,i[14]+=l,l=i[10],i[11]-=l,i[10]=i[23]-l,i[23]+=l,l=i[11],i[26]-=l,i[11]=i[22]-l,i[22]+=l,l=i[26],i[27]-=l,i[26]=i[7]-l,i[7]+=l,l=i[27],i[27]=i[6]-l,i[6]+=l,l=me.SQRT2*(i[0]-i[4]),i[0]+=i[4],i[4]=l,l=me.SQRT2*(i[1]-i[5]),i[1]+=i[5],i[5]=l,l=me.SQRT2*(i[16]-i[20]),i[16]+=i[20],i[20]=l,l=me.SQRT2*(i[17]-i[21]),i[17]+=i[21],i[21]=l,l=-me.SQRT2*(i[8]-i[12]),i[8]+=i[12],i[12]=l-i[8],l=-me.SQRT2*(i[9]-i[13]),i[9]+=i[13],i[13]=l-i[9],l=-me.SQRT2*(i[25]-i[29]),i[25]+=i[29],i[29]=l-i[25],l=-me.SQRT2*(i[24]+i[28]),i[24]-=i[28],i[28]=l-i[24],l=i[24]-i[16],i[24]=l,l=i[20]-l,i[20]=l,l=i[28]-l,i[28]=l,l=i[25]-i[17],i[25]=l,l=i[21]-l,i[21]=l,l=i[29]-l,i[29]=l,l=i[17]-i[1],i[17]=l,l=i[9]-l,i[9]=l,l=i[25]-l,i[25]=l,l=i[5]-l,i[5]=l,l=i[21]-l,i[21]=l,l=i[13]-l,i[13]=l,l=i[29]-l,i[29]=l,l=i[1]-i[0],i[1]=l,l=i[16]-l,i[16]=l,l=i[17]-l,i[17]=l,l=i[8]-l,i[8]=l,l=i[9]-l,i[9]=l,l=i[24]-l,i[24]=l,l=i[25]-l,i[25]=l,l=i[4]-l,i[4]=l,l=i[5]-l,i[5]=l,l=i[20]-l,i[20]=l,l=i[21]-l,i[21]=l,l=i[12]-l,i[12]=l,l=i[13]-l,i[13]=l,l=i[28]-l,i[28]=l,l=i[29]-l,i[29]=l,l=i[0],i[0]+=i[31],i[31]-=l,l=i[1],i[1]+=i[30],i[30]-=l,l=i[16],i[16]+=i[15],i[15]-=l,l=i[17],i[17]+=i[14],i[14]-=l,l=i[8],i[8]+=i[23],i[23]-=l,l=i[9],i[9]+=i[22],i[22]-=l,l=i[24],i[24]+=i[7],i[7]-=l,l=i[25],i[25]+=i[6],i[6]-=l,l=i[4],i[4]+=i[27],i[27]-=l,l=i[5],i[5]+=i[26],i[26]-=l,l=i[20],i[20]+=i[11],i[11]-=l,l=i[21],i[21]+=i[10],i[10]-=l,l=i[12],i[12]+=i[19],i[19]-=l,l=i[13],i[13]+=i[18],i[18]-=l,l=i[28],i[28]+=i[3],i[3]-=l,l=i[29],i[29]+=i[2],i[2]-=l}}function we(I,$){for(var i=0;i<3;i++){var z,G,D,f,E,C;f=I[$+2*3]*ne[M.SHORT_TYPE][0]-I[$+5*3],z=I[$+0*3]*ne[M.SHORT_TYPE][2]-I[$+3*3],G=f+z,D=f-z,f=I[$+5*3]*ne[M.SHORT_TYPE][0]+I[$+2*3],z=I[$+3*3]*ne[M.SHORT_TYPE][2]+I[$+0*3],E=f+z,C=-f+z,z=(I[$+1*3]*ne[M.SHORT_TYPE][1]-I[$+4*3])*2069978111953089e-26,f=(I[$+4*3]*ne[M.SHORT_TYPE][1]+I[$+1*3])*2069978111953089e-26,I[$+3*0]=G*190752519173728e-25+z,I[$+3*5]=-E*190752519173728e-25+f,D=D*.8660254037844387*1907525191737281e-26,E=E*.5*1907525191737281e-26+f,I[$+3*1]=D-E,I[$+3*2]=D+E,G=G*.5*1907525191737281e-26-z,C=C*.8660254037844387*1907525191737281e-26,I[$+3*3]=G+C,I[$+3*4]=G-C,$++}}function B(I,$,i){var z,G;{var D,f,E,C,O,k,l,x;D=i[17]-i[9],E=i[15]-i[11],C=i[14]-i[12],O=i[0]+i[8],k=i[1]+i[7],l=i[2]+i[6],x=i[3]+i[5],I[$+17]=O+l-x-(k-i[4]),G=(O+l-x)*re[19]+(k-i[4]),z=(D-E-C)*re[18],I[$+5]=z+G,I[$+6]=z-G,f=(i[16]-i[10])*re[18],k=k*re[19]+i[4],z=D*re[12]+f+E*re[13]+C*re[14],G=-O*re[16]+k-l*re[17]+x*re[15],I[$+1]=z+G,I[$+2]=z-G,z=D*re[13]-f-E*re[14]+C*re[12],G=-O*re[17]+k-l*re[15]+x*re[16],I[$+9]=z+G,I[$+10]=z-G,z=D*re[14]-f+E*re[12]-C*re[13],G=O*re[15]-k+l*re[16]-x*re[17],I[$+13]=z+G,I[$+14]=z-G}{var b,h,y,w,u,_,m,P;b=i[8]-i[0],y=i[6]-i[2],w=i[5]-i[3],u=i[17]+i[9],_=i[16]+i[10],m=i[15]+i[11],P=i[14]+i[12],I[$+0]=u+m+P+(_+i[13]),z=(u+m+P)*re[19]-(_+i[13]),G=(b-y+w)*re[18],I[$+11]=z+G,I[$+12]=z-G,h=(i[7]-i[1])*re[18],_=i[13]-_*re[19],z=u*re[15]-_+m*re[16]+P*re[17],G=b*re[14]+h+y*re[12]+w*re[13],I[$+3]=z+G,I[$+4]=z-G,z=-u*re[17]+_-m*re[15]-P*re[16],G=b*re[13]+h-y*re[14]-w*re[12],I[$+7]=z+G,I[$+8]=z-G,z=-u*re[16]+_-m*re[17]-P*re[15],G=b*re[12]-h+y*re[13]-w*re[14],I[$+15]=z+G,I[$+16]=z-G}}this.mdct_sub48=function(I,$,i){for(var z=$,G=286,D=0;D<I.channels_out;D++){for(var f=0;f<I.mode_gr;f++){for(var E,C=I.l3_side.tt[f][D],O=C.xr,k=0,l=I.sb_sample[D][1-f],x=0,b=0;b<18/2;b++)for(U(z,G,l[x]),U(z,G+32,l[x+1]),x+=2,G+=64,E=1;E<32;E+=2)l[x-1][E]*=-1;for(E=0;E<32;E++,k+=18){var h=C.block_type,y=I.sb_sample[D][f],w=I.sb_sample[D][1-f];if(C.mixed_block_flag!=0&&E<2&&(h=0),I.amp_filter[E]<1e-12)Qe.fill(O,k+0,k+18,0);else{if(I.amp_filter[E]<1)for(var b=0;b<18;b++)w[b][Ne[E]]*=I.amp_filter[E];if(h==M.SHORT_TYPE){for(var b=-te/4;b<0;b++){var u=ne[M.SHORT_TYPE][b+3];O[k+b*3+9]=y[9+b][Ne[E]]*u-y[8-b][Ne[E]],O[k+b*3+18]=y[14-b][Ne[E]]*u+y[15+b][Ne[E]],O[k+b*3+10]=y[15+b][Ne[E]]*u-y[14-b][Ne[E]],O[k+b*3+19]=w[2-b][Ne[E]]*u+w[3+b][Ne[E]],O[k+b*3+11]=w[3+b][Ne[E]]*u-w[2-b][Ne[E]],O[k+b*3+20]=w[8-b][Ne[E]]*u+w[9+b][Ne[E]]}we(O,k)}else{for(var _=at(18),b=-ue/4;b<0;b++){var m,P;m=ne[h][b+27]*w[b+9][Ne[E]]+ne[h][b+36]*w[8-b][Ne[E]],P=ne[h][b+9]*y[b+9][Ne[E]]-ne[h][b+18]*y[8-b][Ne[E]],_[b+9]=m-P*ge[3+b+9],_[b+18]=m*ge[3+b+9]+P}B(O,k,_)}}if(h!=M.SHORT_TYPE&&E!=0)for(var b=7;b>=0;--b){var oe,j;oe=O[k+b]*de[20+b]+O[k+-1-b]*Ce[28+b],j=O[k+b]*Ce[28+b]-O[k+-1-b]*de[20+b],O[k+-1-b]=oe,O[k+b]=j}}}if(z=i,G=286,I.mode_gr==1)for(var Q=0;Q<18;Q++)Ie.arraycopy(I.sb_sample[D][1][Q],0,I.sb_sample[D][0][Q],0,32)}}}var nt=ze,Je=W.System,ut=W.new_float,ht=W.new_float_n;function jt(){this.l=ut(M.SBMAX_l),this.s=ht([M.SBMAX_s,3]);var N=this;this.assign=function(te){Je.arraycopy(te.l,0,N.l,0,M.SBMAX_l);for(var ue=0;ue<M.SBMAX_s;ue++)for(var ne=0;ne<3;ne++)N.s[ue][ne]=te.s[ue][ne]}}var Dt=jt;function Yn(){this.thm=new Dt,this.en=new Dt}var An=Yn,It=W.System,_t=W.VbrMode,gt=W.new_array_n,Nn=W.new_float,ar=W.new_float_n,Ln=W.new_int,nn=W.assert;ft.ENCDELAY=576,ft.POSTDELAY=1152,ft.MDCTDELAY=48,ft.FFTOFFSET=224+ft.MDCTDELAY,ft.DECDELAY=528,ft.SBLIMIT=32,ft.CBANDS=64,ft.SBPSY_l=21,ft.SBPSY_s=12,ft.SBMAX_l=22,ft.SBMAX_s=13,ft.PSFB21=6,ft.PSFB12=6,ft.BLKSIZE=1024,ft.HBLKSIZE=ft.BLKSIZE/2+1,ft.BLKSIZE_s=256,ft.HBLKSIZE_s=ft.BLKSIZE_s/2+1,ft.NORM_TYPE=0,ft.START_TYPE=1,ft.SHORT_TYPE=2,ft.STOP_TYPE=3,ft.MPG_MD_LR_LR=0,ft.MPG_MD_LR_I=1,ft.MPG_MD_MS_LR=2,ft.MPG_MD_MS_I=3,ft.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function ft(){var N=nt,te=An,ue=ft.FFTOFFSET,ne=ft.MPG_MD_MS_LR,ge=null;this.psy=null;var re=null,de=null,Ce=null;this.setModules=function(I,$,i,z){ge=I,this.psy=$,re=$,de=z,Ce=i};var Ne=new N;function U(I){var $,i;if(I.ATH.useAdjust==0){I.ATH.adjust=1;return}if(i=I.loudness_sq[0][0],$=I.loudness_sq[1][0],I.channels_out==2?(i+=I.loudness_sq[0][1],$+=I.loudness_sq[1][1]):(i+=i,$+=$),I.mode_gr==2&&(i=Math.max(i,$)),i*=.5,i*=I.ATH.aaSensitivityP,i>.03125)I.ATH.adjust>=1?I.ATH.adjust=1:I.ATH.adjust<I.ATH.adjustLimit&&(I.ATH.adjust=I.ATH.adjustLimit),I.ATH.adjustLimit=1;else{var z=31.98*i+625e-6;I.ATH.adjust>=z?(I.ATH.adjust*=z*.075+.925,I.ATH.adjust<z&&(I.ATH.adjust=z)):I.ATH.adjustLimit>=z?I.ATH.adjust=z:I.ATH.adjust<I.ATH.adjustLimit&&(I.ATH.adjust=I.ATH.adjustLimit),I.ATH.adjustLimit=z}}function we(I){var $,i;for(nn(0<=I.bitrate_index&&I.bitrate_index<16),nn(0<=I.mode_ext&&I.mode_ext<4),I.bitrate_stereoMode_Hist[I.bitrate_index][4]++,I.bitrate_stereoMode_Hist[15][4]++,I.channels_out==2&&(I.bitrate_stereoMode_Hist[I.bitrate_index][I.mode_ext]++,I.bitrate_stereoMode_Hist[15][I.mode_ext]++),$=0;$<I.mode_gr;++$)for(i=0;i<I.channels_out;++i){var z=I.l3_side.tt[$][i].block_type|0;I.l3_side.tt[$][i].mixed_block_flag!=0&&(z=4),I.bitrate_blockType_Hist[I.bitrate_index][z]++,I.bitrate_blockType_Hist[I.bitrate_index][5]++,I.bitrate_blockType_Hist[15][z]++,I.bitrate_blockType_Hist[15][5]++}}function B(I,$){var i=I.internal_flags,z,G;if(i.lame_encode_frame_init==0){var D,f,E=Nn(2014),C=Nn(2014);for(i.lame_encode_frame_init=1,D=0,f=0;D<286+576*(1+i.mode_gr);++D)D<576*i.mode_gr?(E[D]=0,i.channels_out==2&&(C[D]=0)):(E[D]=$[0][f],i.channels_out==2&&(C[D]=$[1][f]),++f);for(G=0;G<i.mode_gr;G++)for(z=0;z<i.channels_out;z++)i.l3_side.tt[G][z].block_type=ft.SHORT_TYPE;Ne.mdct_sub48(i,E,C),nn(i.mf_size>=ft.BLKSIZE+I.framesize-ft.FFTOFFSET),nn(i.mf_size>=512+I.framesize-32)}}this.lame_encode_mp3_frame=function(I,$,i,z,G,D){var f,E=gt([2,2]);E[0][0]=new te,E[0][1]=new te,E[1][0]=new te,E[1][1]=new te;var C=gt([2,2]);C[0][0]=new te,C[0][1]=new te,C[1][0]=new te,C[1][1]=new te;var O,k=[null,null],l=I.internal_flags,x=ar([2,4]),b=[.5,.5],h=[[0,0],[0,0]],y=[[0,0],[0,0]],w,u,_;if(k[0]=$,k[1]=i,l.lame_encode_frame_init==0&&B(I,k),l.padding=0,(l.slot_lag-=l.frac_SpF)<0&&(l.slot_lag+=I.out_samplerate,l.padding=1),l.psymodel!=0){var m,P=[null,null],oe=0,j=Ln(2);for(_=0;_<l.mode_gr;_++){for(u=0;u<l.channels_out;u++)P[u]=k[u],oe=576+_*576-ft.FFTOFFSET;if(I.VBR==_t.vbr_mtrh||I.VBR==_t.vbr_mt?m=re.L3psycho_anal_vbr(I,P,oe,_,E,C,h[_],y[_],x[_],j):m=re.L3psycho_anal_ns(I,P,oe,_,E,C,h[_],y[_],x[_],j),m!=0)return-4;for(I.mode==on.JOINT_STEREO&&(b[_]=x[_][2]+x[_][3],b[_]>0&&(b[_]=x[_][3]/b[_])),u=0;u<l.channels_out;u++){var Q=l.l3_side.tt[_][u];Q.block_type=j[u],Q.mixed_block_flag=0}}}else for(_=0;_<l.mode_gr;_++)for(u=0;u<l.channels_out;u++)l.l3_side.tt[_][u].block_type=ft.NORM_TYPE,l.l3_side.tt[_][u].mixed_block_flag=0,y[_][u]=h[_][u]=700;if(U(l),Ne.mdct_sub48(l,k[0],k[1]),l.mode_ext=ft.MPG_MD_LR_LR,I.force_ms)l.mode_ext=ft.MPG_MD_MS_LR;else if(I.mode==on.JOINT_STEREO){var c=0,v=0;for(_=0;_<l.mode_gr;_++)for(u=0;u<l.channels_out;u++)c+=y[_][u],v+=h[_][u];if(c<=1*v){var ce=l.l3_side.tt[0],ve=l.l3_side.tt[l.mode_gr-1];ce[0].block_type==ce[1].block_type&&ve[0].block_type==ve[1].block_type&&(l.mode_ext=ft.MPG_MD_MS_LR)}}if(l.mode_ext==ne?(O=C,w=y):(O=E,w=h),I.analysis&&l.pinfo!=null)for(_=0;_<l.mode_gr;_++)for(u=0;u<l.channels_out;u++)l.pinfo.ms_ratio[_]=l.ms_ratio[_],l.pinfo.ms_ener_ratio[_]=b[_],l.pinfo.blocktype[_][u]=l.l3_side.tt[_][u].block_type,l.pinfo.pe[_][u]=w[_][u],It.arraycopy(l.l3_side.tt[_][u].xr,0,l.pinfo.xr[_][u],0,576),l.mode_ext==ne&&(l.pinfo.ers[_][u]=l.pinfo.ers[_][u+2],It.arraycopy(l.pinfo.energy[_][u+2],0,l.pinfo.energy[_][u],0,l.pinfo.energy[_][u].length));if(I.VBR==_t.vbr_off||I.VBR==_t.vbr_abr){var Oe,He;for(Oe=0;Oe<18;Oe++)l.nsPsy.pefirbuf[Oe]=l.nsPsy.pefirbuf[Oe+1];for(He=0,_=0;_<l.mode_gr;_++)for(u=0;u<l.channels_out;u++)He+=w[_][u];for(l.nsPsy.pefirbuf[18]=He,He=l.nsPsy.pefirbuf[9],Oe=0;Oe<9;Oe++)He+=(l.nsPsy.pefirbuf[Oe]+l.nsPsy.pefirbuf[18-Oe])*ft.fircoef[Oe];for(He=670*5*l.mode_gr*l.channels_out/He,_=0;_<l.mode_gr;_++)for(u=0;u<l.channels_out;u++)w[_][u]*=He}if(l.iteration_loop.iteration_loop(I,w,b,O),ge.format_bitstream(I),f=ge.copy_buffer(l,z,G,D,1),I.bWriteVbrTag&&de.addVbrFrame(I),I.analysis&&l.pinfo!=null){for(u=0;u<l.channels_out;u++){var Le;for(Le=0;Le<ue;Le++)l.pinfo.pcmdata[u][Le]=l.pinfo.pcmdata[u][Le+I.framesize];for(Le=ue;Le<1600;Le++)l.pinfo.pcmdata[u][Le]=k[u][Le-ue]}Ce.set_frame_pinfo(I,O)}return we(l),f}}var M=ft,Hr=W.Util,yn=W.new_float;function K(){var N=yn(M.BLKSIZE),te=yn(M.BLKSIZE_s/2),ue=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function ne(re,de,Ce){var Ne=0,U,we,B;Ce<<=1;var I=de+Ce;U=4;do{var $,i,z,G,D,f,E;E=U>>1,G=U,D=U<<1,f=D+G,U=D<<1,we=de,B=we+E;do{var C,O,k,l;O=re[we+0]-re[we+G],C=re[we+0]+re[we+G],l=re[we+D]-re[we+f],k=re[we+D]+re[we+f],re[we+D]=C-k,re[we+0]=C+k,re[we+f]=O-l,re[we+G]=O+l,O=re[B+0]-re[B+G],C=re[B+0]+re[B+G],l=Hr.SQRT2*re[B+f],k=Hr.SQRT2*re[B+D],re[B+D]=C-k,re[B+0]=C+k,re[B+f]=O-l,re[B+G]=O+l,B+=U,we+=U}while(we<I);for(i=ue[Ne+0],$=ue[Ne+1],z=1;z<E;z++){var x,b;x=1-2*$*$,b=2*$*i,we=de+z,B=de+G-z;do{var h,y,w,C,O,u,k,_,l,m;y=b*re[we+G]-x*re[B+G],h=x*re[we+G]+b*re[B+G],O=re[we+0]-h,C=re[we+0]+h,u=re[B+0]-y,w=re[B+0]+y,y=b*re[we+f]-x*re[B+f],h=x*re[we+f]+b*re[B+f],l=re[we+D]-h,k=re[we+D]+h,m=re[B+D]-y,_=re[B+D]+y,y=$*k-i*m,h=i*k+$*m,re[we+D]=C-h,re[we+0]=C+h,re[B+f]=u-y,re[B+G]=u+y,y=i*_-$*l,h=$*_+i*l,re[B+D]=w-h,re[B+0]=w+h,re[we+f]=O-y,re[we+G]=O+y,B+=U,we+=U}while(we<I);x=i,i=x*ue[Ne+0]-$*ue[Ne+1],$=x*ue[Ne+1]+$*ue[Ne+0]}Ne+=2}while(U<Ce)}var ge=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(re,de,Ce,Ne,U){for(var we=0;we<3;we++){var B=M.BLKSIZE_s/2,I=65535&576/3*(we+1),$=M.BLKSIZE_s/8-1;do{var i,z,G,D,f,E=ge[$<<2]&255;i=te[E]*Ne[Ce][U+E+I],f=te[127-E]*Ne[Ce][U+E+I+128],z=i-f,i=i+f,G=te[E+64]*Ne[Ce][U+E+I+64],f=te[63-E]*Ne[Ce][U+E+I+192],D=G-f,G=G+f,B-=4,de[we][B+0]=i+G,de[we][B+2]=i-G,de[we][B+1]=z+D,de[we][B+3]=z-D,i=te[E+1]*Ne[Ce][U+E+I+1],f=te[126-E]*Ne[Ce][U+E+I+129],z=i-f,i=i+f,G=te[E+65]*Ne[Ce][U+E+I+65],f=te[62-E]*Ne[Ce][U+E+I+193],D=G-f,G=G+f,de[we][B+M.BLKSIZE_s/2+0]=i+G,de[we][B+M.BLKSIZE_s/2+2]=i-G,de[we][B+M.BLKSIZE_s/2+1]=z+D,de[we][B+M.BLKSIZE_s/2+3]=z-D}while(--$>=0);ne(de[we],B,M.BLKSIZE_s/2)}},this.fft_long=function(re,de,Ce,Ne,U){var we=M.BLKSIZE/8-1,B=M.BLKSIZE/2;do{var I,$,i,z,G,D=ge[we]&255;I=N[D]*Ne[Ce][U+D],G=N[D+512]*Ne[Ce][U+D+512],$=I-G,I=I+G,i=N[D+256]*Ne[Ce][U+D+256],G=N[D+768]*Ne[Ce][U+D+768],z=i-G,i=i+G,B-=4,de[B+0]=I+i,de[B+2]=I-i,de[B+1]=$+z,de[B+3]=$-z,I=N[D+1]*Ne[Ce][U+D+1],G=N[D+513]*Ne[Ce][U+D+513],$=I-G,I=I+G,i=N[D+257]*Ne[Ce][U+D+257],G=N[D+769]*Ne[Ce][U+D+769],z=i-G,i=i+G,de[B+M.BLKSIZE/2+0]=I+i,de[B+M.BLKSIZE/2+2]=I-i,de[B+M.BLKSIZE/2+1]=$+z,de[B+M.BLKSIZE/2+3]=$-z}while(--we>=0);ne(de,B,M.BLKSIZE/2)},this.init_fft=function(re){for(var de=0;de<M.BLKSIZE;de++)N[de]=.42-.5*Math.cos(2*Math.PI*(de+.5)/M.BLKSIZE)+.08*Math.cos(4*Math.PI*(de+.5)/M.BLKSIZE);for(var de=0;de<M.BLKSIZE_s/2;de++)te[de]=.5*(1-Math.cos(2*Math.PI*(de+.5)/M.BLKSIZE_s))}}var Be=K,xe=W.VbrMode,qe=W.Float,lt=W.ShortBlock,vt=W.Util,F=W.Arrays,V=W.new_float,se=W.new_float_n,Ae=W.new_int,ie=W.assert;function Pe(){var N=new Be,te=2.302585092994046,ue=2,ne=16,ge=2,re=16,de=.34,Ce=1/(14752*14752)/(M.BLKSIZE/2),Ne=.01,U=.8,we=.6,B=.3,I=3.5,$=21,i=.2302585093;function z(R){return R}function G(R,T){for(var X=0,Y=0;Y<M.BLKSIZE/2;++Y)X+=R[Y]*T.ATH.eql_w[Y];return X*=Ce,X}function D(R,T,X,Y,ee,L,J,ae,Z,pe,le){var be=R.internal_flags;if(Z<2)N.fft_long(be,Y[ee],Z,pe,le),N.fft_short(be,L[J],Z,pe,le);else if(Z==2){for(var De=M.BLKSIZE-1;De>=0;--De){var rt=Y[ee+0][De],Ee=Y[ee+1][De];Y[ee+0][De]=(rt+Ee)*vt.SQRT2*.5,Y[ee+1][De]=(rt-Ee)*vt.SQRT2*.5}for(var et=2;et>=0;--et)for(var De=M.BLKSIZE_s-1;De>=0;--De){var rt=L[J+0][et][De],Ee=L[J+1][et][De];L[J+0][et][De]=(rt+Ee)*vt.SQRT2*.5,L[J+1][et][De]=(rt-Ee)*vt.SQRT2*.5}}T[0]=Y[ee+0][0],T[0]*=T[0];for(var De=M.BLKSIZE/2-1;De>=0;--De){var _e=Y[ee+0][M.BLKSIZE/2-De],Ye=Y[ee+0][M.BLKSIZE/2+De];T[M.BLKSIZE/2-De]=(_e*_e+Ye*Ye)*.5}for(var et=2;et>=0;--et){X[et][0]=L[J+0][et][0],X[et][0]*=X[et][0];for(var De=M.BLKSIZE_s/2-1;De>=0;--De){var _e=L[J+0][et][M.BLKSIZE_s/2-De],Ye=L[J+0][et][M.BLKSIZE_s/2+De];X[et][M.BLKSIZE_s/2-De]=(_e*_e+Ye*Ye)*.5}}{for(var bt=0,De=11;De<M.HBLKSIZE;De++)bt+=T[De];be.tot_ener[Z]=bt}if(R.analysis){for(var De=0;De<M.HBLKSIZE;De++)be.pinfo.energy[ae][Z][De]=be.pinfo.energy_save[Z][De],be.pinfo.energy_save[Z][De]=T[De];be.pinfo.pe[ae][Z]=be.pe[Z]}R.athaa_loudapprox==2&&Z<2&&(be.loudness_sq[ae][Z]=be.loudness_sq_save[Z],be.loudness_sq_save[Z]=G(T,be))}var f=8,E=23,C=15,O,k,l,x=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function b(){O=Math.pow(10,(f+1)/16),k=Math.pow(10,(E+1)/16),l=Math.pow(10,C/10)}var h=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],y=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],w=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function u(R,T,X,Y,ee,L){var J;if(T>R)if(T<R*k)J=T/R;else return R+T;else{if(R>=T*k)return R+T;J=R/T}if(R+=T,Y+3<=6){if(J>=O)return R;var ae=0|vt.FAST_LOG10_X(J,16);return R*y[ae]}var ae=0|vt.FAST_LOG10_X(J,16);if(T=ee.ATH.cb_l[X]*ee.ATH.adjust,R<l*T){if(R>T){var Z,pe;return Z=1,ae<=13&&(Z=w[ae]),pe=vt.FAST_LOG10_X(R/T,10/15),R*((h[ae]-Z)*pe+Z)}return ae>13?R:R*w[ae]}return R*h[ae]}var _=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function m(R,T,X){var Y;if(R<0&&(R=0),T<0&&(T=0),R<=0)return T;if(T<=0)return R;if(T>R?Y=T/R:Y=R/T,-2<=X&&X<=2){if(Y>=O)return R+T;var ee=0|vt.FAST_LOG10_X(Y,16);return(R+T)*_[ee]}return Y<k?R+T:(R<T&&(R=T),R)}function P(R,T){var X=R.internal_flags;if(X.channels_out>1){for(var Y=0;Y<M.SBMAX_l;Y++){var ee=X.thm[0].l[Y],L=X.thm[1].l[Y];X.thm[0].l[Y]+=L*T,X.thm[1].l[Y]+=ee*T}for(var Y=0;Y<M.SBMAX_s;Y++)for(var J=0;J<3;J++){var ee=X.thm[0].s[Y][J],L=X.thm[1].s[Y][J];X.thm[0].s[Y][J]+=L*T,X.thm[1].s[Y][J]+=ee*T}}}function oe(R){for(var T=0;T<M.SBMAX_l;T++)if(!(R.thm[0].l[T]>1.58*R.thm[1].l[T]||R.thm[1].l[T]>1.58*R.thm[0].l[T])){var X=R.mld_l[T]*R.en[3].l[T],Y=Math.max(R.thm[2].l[T],Math.min(R.thm[3].l[T],X));X=R.mld_l[T]*R.en[2].l[T];var ee=Math.max(R.thm[3].l[T],Math.min(R.thm[2].l[T],X));R.thm[2].l[T]=Y,R.thm[3].l[T]=ee}for(var T=0;T<M.SBMAX_s;T++)for(var L=0;L<3;L++)if(!(R.thm[0].s[T][L]>1.58*R.thm[1].s[T][L]||R.thm[1].s[T][L]>1.58*R.thm[0].s[T][L])){var X=R.mld_s[T]*R.en[3].s[T][L],Y=Math.max(R.thm[2].s[T][L],Math.min(R.thm[3].s[T][L],X));X=R.mld_s[T]*R.en[2].s[T][L];var ee=Math.max(R.thm[3].s[T][L],Math.min(R.thm[2].s[T][L],X));R.thm[2].s[T][L]=Y,R.thm[3].s[T][L]=ee}}function j(R,T,X){var Y=T,ee=Math.pow(10,X);T*=2,Y*=2;for(var L=0;L<M.SBMAX_l;L++){var J,ae,Z,pe;if(pe=R.ATH.cb_l[R.bm_l[L]]*ee,J=Math.min(Math.max(R.thm[0].l[L],pe),Math.max(R.thm[1].l[L],pe)),ae=Math.max(R.thm[2].l[L],pe),Z=Math.max(R.thm[3].l[L],pe),J*T<ae+Z){var le=J*Y/(ae+Z);ae*=le,Z*=le}R.thm[2].l[L]=Math.min(ae,R.thm[2].l[L]),R.thm[3].l[L]=Math.min(Z,R.thm[3].l[L])}ee*=M.BLKSIZE_s/M.BLKSIZE;for(var L=0;L<M.SBMAX_s;L++)for(var be=0;be<3;be++){var J,ae,Z,pe;if(pe=R.ATH.cb_s[R.bm_s[L]]*ee,J=Math.min(Math.max(R.thm[0].s[L][be],pe),Math.max(R.thm[1].s[L][be],pe)),ae=Math.max(R.thm[2].s[L][be],pe),Z=Math.max(R.thm[3].s[L][be],pe),J*T<ae+Z){var le=J*T/(ae+Z);ae*=le,Z*=le}R.thm[2].s[L][be]=Math.min(R.thm[2].s[L][be],ae),R.thm[3].s[L][be]=Math.min(R.thm[3].s[L][be],Z)}}function Q(R,T,X,Y,ee){var L,J,ae=0,Z=0;for(L=J=0;L<M.SBMAX_s;++J,++L){for(var pe=R.bo_s[L],le=R.npart_s,be=pe<le?pe:le;J<be;)ie(T[J]>=0),ie(X[J]>=0),ae+=T[J],Z+=X[J],J++;if(R.en[Y].s[L][ee]=ae,R.thm[Y].s[L][ee]=Z,J>=le){++L;break}ie(T[J]>=0),ie(X[J]>=0);{var De=R.PSY.bo_s_weight[L],rt=1-De;ae=De*T[J],Z=De*X[J],R.en[Y].s[L][ee]+=ae,R.thm[Y].s[L][ee]+=Z,ae=rt*T[J],Z=rt*X[J]}}for(;L<M.SBMAX_s;++L)R.en[Y].s[L][ee]=0,R.thm[Y].s[L][ee]=0}function c(R,T,X,Y){var ee,L,J=0,ae=0;for(ee=L=0;ee<M.SBMAX_l;++L,++ee){for(var Z=R.bo_l[ee],pe=R.npart_l,le=Z<pe?Z:pe;L<le;)ie(T[L]>=0),ie(X[L]>=0),J+=T[L],ae+=X[L],L++;if(R.en[Y].l[ee]=J,R.thm[Y].l[ee]=ae,L>=pe){++ee;break}ie(T[L]>=0),ie(X[L]>=0);{var be=R.PSY.bo_l_weight[ee],De=1-be;J=be*T[L],ae=be*X[L],R.en[Y].l[ee]+=J,R.thm[Y].l[ee]+=ae,J=De*T[L],ae=De*X[L]}}for(;ee<M.SBMAX_l;++ee)R.en[Y].l[ee]=0,R.thm[Y].l[ee]=0}function v(R,T,X,Y,ee,L){var J=R.internal_flags,ae,Z;for(Z=ae=0;Z<J.npart_s;++Z){for(var pe=0,le=J.numlines_s[Z],be=0;be<le;++be,++ae){var De=T[L][ae];pe+=De}X[Z]=pe}for(ie(Z==J.npart_s),ae=Z=0;Z<J.npart_s;Z++){var rt=J.s3ind_s[Z][0],Ee=J.s3_ss[ae++]*X[rt];for(++rt;rt<=J.s3ind_s[Z][1];)Ee+=J.s3_ss[ae]*X[rt],++ae,++rt;{var et=ge*J.nb_s1[ee][Z];Y[Z]=Math.min(Ee,et)}if(J.blocktype_old[ee&1]==M.SHORT_TYPE){var et=re*J.nb_s2[ee][Z],_e=Y[Z];Y[Z]=Math.min(et,_e)}J.nb_s2[ee][Z]=J.nb_s1[ee][Z],J.nb_s1[ee][Z]=Ee,ie(Y[Z]>=0)}for(;Z<=M.CBANDS;++Z)X[Z]=0,Y[Z]=0}function ce(R,T,X,Y){var ee=R.internal_flags;R.short_blocks==lt.short_block_coupled&&!(T[0]!=0&&T[1]!=0)&&(T[0]=T[1]=0);for(var L=0;L<ee.channels_out;L++)Y[L]=M.NORM_TYPE,R.short_blocks==lt.short_block_dispensed&&(T[L]=1),R.short_blocks==lt.short_block_forced&&(T[L]=0),T[L]!=0?(ie(ee.blocktype_old[L]!=M.START_TYPE),ee.blocktype_old[L]==M.SHORT_TYPE&&(Y[L]=M.STOP_TYPE)):(Y[L]=M.SHORT_TYPE,ee.blocktype_old[L]==M.NORM_TYPE&&(ee.blocktype_old[L]=M.START_TYPE),ee.blocktype_old[L]==M.STOP_TYPE&&(ee.blocktype_old[L]=M.SHORT_TYPE)),X[L]=ee.blocktype_old[L],ee.blocktype_old[L]=Y[L]}function ve(R,T,X){return X>=1?R:X<=0?T:T>0?Math.pow(R/T,X)*T:0}var Oe=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function He(R,T){for(var X=309.07,Y=0;Y<M.SBMAX_s-1;Y++)for(var ee=0;ee<3;ee++){var L=R.thm.s[Y][ee];if(L>0){var J=L*T,ae=R.en.s[Y][ee];ae>J&&(ae>J*1e10?X+=Oe[Y]*(10*te):X+=Oe[Y]*vt.FAST_LOG10(ae/J))}}return X}var Le=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function $e(R,T){for(var X=281.0575,Y=0;Y<M.SBMAX_l-1;Y++){var ee=R.thm.l[Y];if(ee>0){var L=ee*T,J=R.en.l[Y];J>L&&(J>L*1e10?X+=Le[Y]*(10*te):X+=Le[Y]*vt.FAST_LOG10(J/L))}}return X}function ot(R,T,X,Y,ee){var L,J;for(L=J=0;L<R.npart_l;++L){var ae=0,Z=0,pe;for(pe=0;pe<R.numlines_l[L];++pe,++J){var le=T[J];ae+=le,Z<le&&(Z=le)}X[L]=ae,Y[L]=Z,ee[L]=ae*R.rnumlines_l[L],ie(R.rnumlines_l[L]>=0),ie(X[L]>=0),ie(Y[L]>=0),ie(ee[L]>=0)}}function We(R,T,X,Y){var ee=x.length-1,L=0,J=X[L]+X[L+1];if(J>0){var ae=T[L];ae<T[L+1]&&(ae=T[L+1]),ie(R.numlines_l[L]+R.numlines_l[L+1]-1>0),J=20*(ae*2-J)/(J*(R.numlines_l[L]+R.numlines_l[L+1]-1));var Z=0|J;Z>ee&&(Z=ee),Y[L]=Z}else Y[L]=0;for(L=1;L<R.npart_l-1;L++)if(J=X[L-1]+X[L]+X[L+1],J>0){var ae=T[L-1];ae<T[L]&&(ae=T[L]),ae<T[L+1]&&(ae=T[L+1]),ie(R.numlines_l[L-1]+R.numlines_l[L]+R.numlines_l[L+1]-1>0),J=20*(ae*3-J)/(J*(R.numlines_l[L-1]+R.numlines_l[L]+R.numlines_l[L+1]-1));var Z=0|J;Z>ee&&(Z=ee),Y[L]=Z}else Y[L]=0;if(ie(L==R.npart_l-1),J=X[L-1]+X[L],J>0){var ae=T[L-1];ae<T[L]&&(ae=T[L]),ie(R.numlines_l[L-1]+R.numlines_l[L]-1>0),J=20*(ae*2-J)/(J*(R.numlines_l[L-1]+R.numlines_l[L]-1));var Z=0|J;Z>ee&&(Z=ee),Y[L]=Z}else Y[L]=0;ie(L==R.npart_l-1)}var Fe=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(R,T,X,Y,ee,L,J,ae,Z,pe){var le=R.internal_flags,be=se([2,M.BLKSIZE]),De=se([2,3,M.BLKSIZE_s]),rt=V(M.CBANDS+1),Ee=V(M.CBANDS+1),et=V(M.CBANDS+2),_e=Ae(2),Ye=Ae(2),bt,Re,Ge,Me,st,$t,Xe,dt,wt=se([2,576]),Kt,zn=Ae(M.CBANDS+2),rn=Ae(M.CBANDS+2);for(F.fill(rn,0),bt=le.channels_out,R.mode==on.JOINT_STEREO&&(bt=4),R.VBR==xe.vbr_off?Kt=le.ResvMax==0?0:le.ResvSize/le.ResvMax*.5:R.VBR==xe.vbr_rh||R.VBR==xe.vbr_mtrh||R.VBR==xe.vbr_mt?Kt=.6:Kt=1,Re=0;Re<le.channels_out;Re++){var Wt=T[Re],Vn=X+576-350-$+192;for(Me=0;Me<576;Me++){var Qn,Zn;for(Qn=Wt[Vn+Me+10],Zn=0,st=0;st<($-1)/2-1;st+=2)Qn+=Fe[st]*(Wt[Vn+Me+st]+Wt[Vn+Me+$-st]),Zn+=Fe[st+1]*(Wt[Vn+Me+st+1]+Wt[Vn+Me+$-st-1]);wt[Re][Me]=Qn+Zn}ee[Y][Re].en.assign(le.en[Re]),ee[Y][Re].thm.assign(le.thm[Re]),bt>2&&(L[Y][Re].en.assign(le.en[Re+2]),L[Y][Re].thm.assign(le.thm[Re+2]))}for(Re=0;Re<bt;Re++){var _r,dr,Rn=V(12),Mr=[0,0,0,0],Us=V(12),nl=1,p1,b1=V(M.CBANDS),y1=V(M.CBANDS),Gt=[0,0,0,0],w1=V(M.HBLKSIZE),S1=se([3,M.HBLKSIZE_s]);for(ie(le.npart_s<=M.CBANDS),ie(le.npart_l<=M.CBANDS),Me=0;Me<3;Me++)Rn[Me]=le.nsPsy.last_en_subshort[Re][Me+6],ie(le.nsPsy.last_en_subshort[Re][Me+4]>0),Us[Me]=Rn[Me]/le.nsPsy.last_en_subshort[Re][Me+4],Mr[0]+=Rn[Me];if(Re==2)for(Me=0;Me<576;Me++){var rl,sl;rl=wt[0][Me],sl=wt[1][Me],wt[0][Me]=rl+sl,wt[1][Me]=rl-sl}{var x1=wt[Re&1],Aa=0;for(Me=0;Me<9;Me++){for(var H_=Aa+64,vn=1;Aa<H_;Aa++)vn<Math.abs(x1[Aa])&&(vn=Math.abs(x1[Aa]));le.nsPsy.last_en_subshort[Re][Me]=Rn[Me+3]=vn,Mr[1+Me/3]+=vn,vn>Rn[Me+3-2]?(ie(Rn[Me+3-2]>0),vn=vn/Rn[Me+3-2]):Rn[Me+3-2]>vn*10?vn=Rn[Me+3-2]/(vn*10):vn=0,Us[Me+3]=vn}}if(R.analysis){var al=Us[0];for(Me=1;Me<12;Me++)al<Us[Me]&&(al=Us[Me]);le.pinfo.ers[Y][Re]=le.pinfo.ers_save[Re],le.pinfo.ers_save[Re]=al}for(p1=Re==3?le.nsPsy.attackthre_s:le.nsPsy.attackthre,Me=0;Me<12;Me++)Gt[Me/3]==0&&Us[Me]>p1&&(Gt[Me/3]=Me%3+1);for(Me=1;Me<4;Me++){var il;Mr[Me-1]>Mr[Me]?(ie(Mr[Me]>0),il=Mr[Me-1]/Mr[Me]):(ie(Mr[Me-1]>0),il=Mr[Me]/Mr[Me-1]),il<1.7&&(Gt[Me]=0,Me==1&&(Gt[0]=0))}for(Gt[0]!=0&&le.nsPsy.lastAttacks[Re]!=0&&(Gt[0]=0),(le.nsPsy.lastAttacks[Re]==3||Gt[0]+Gt[1]+Gt[2]+Gt[3]!=0)&&(nl=0,Gt[1]!=0&&Gt[0]!=0&&(Gt[1]=0),Gt[2]!=0&&Gt[1]!=0&&(Gt[2]=0),Gt[3]!=0&&Gt[2]!=0&&(Gt[3]=0)),Re<2?Ye[Re]=nl:nl==0&&(Ye[0]=Ye[1]=0),Z[Re]=le.tot_ener[Re],dr=De,_r=be,D(R,w1,S1,_r,Re&1,dr,Re&1,Y,Re,T,X),ot(le,w1,rt,b1,y1),We(le,b1,y1,zn),dt=0;dt<3;dt++){var ll,Hn;for(v(R,S1,Ee,et,Re,dt),Q(le,Ee,et,Re,dt),Xe=0;Xe<M.SBMAX_s;Xe++){if(Hn=le.thm[Re].s[Xe][dt],Hn*=U,Gt[dt]>=2||Gt[dt+1]==1){var Ea=dt!=0?dt-1:2,vn=ve(le.thm[Re].s[Xe][Ea],Hn,we*Kt);Hn=Math.min(Hn,vn)}if(Gt[dt]==1){var Ea=dt!=0?dt-1:2,vn=ve(le.thm[Re].s[Xe][Ea],Hn,B*Kt);Hn=Math.min(Hn,vn)}else if(dt!=0&&Gt[dt-1]==3||dt==0&&le.nsPsy.lastAttacks[Re]==3){var Ea=dt!=2?dt+1:0,vn=ve(le.thm[Re].s[Xe][Ea],Hn,B*Kt);Hn=Math.min(Hn,vn)}ll=Rn[dt*3+3]+Rn[dt*3+4]+Rn[dt*3+5],Rn[dt*3+5]*6<ll&&(Hn*=.5,Rn[dt*3+4]*6<ll&&(Hn*=.5)),le.thm[Re].s[Xe][dt]=Hn}}for(le.nsPsy.lastAttacks[Re]=Gt[2],$t=0,Ge=0;Ge<le.npart_l;Ge++){for(var Ts=le.s3ind[Ge][0],ol=rt[Ts]*x[zn[Ts]],Bs=le.s3_ll[$t++]*ol;++Ts<=le.s3ind[Ge][1];)ol=rt[Ts]*x[zn[Ts]],Bs=u(Bs,le.s3_ll[$t++]*ol,Ts,Ts-Ge,le);Bs*=.158489319246111,le.blocktype_old[Re&1]==M.SHORT_TYPE?et[Ge]=Bs:et[Ge]=ve(Math.min(Bs,Math.min(ue*le.nb_1[Re][Ge],ne*le.nb_2[Re][Ge])),Bs,Kt),le.nb_2[Re][Ge]=le.nb_1[Re][Ge],le.nb_1[Re][Ge]=Bs}for(;Ge<=M.CBANDS;++Ge)rt[Ge]=0,et[Ge]=0;c(le,rt,et,Re)}if((R.mode==on.STEREO||R.mode==on.JOINT_STEREO)&&R.interChRatio>0&&P(R,R.interChRatio),R.mode==on.JOINT_STEREO){var cl;oe(le),cl=R.msfix,Math.abs(cl)>0&&j(le,cl,R.ATHlower*le.ATH.adjust)}for(ce(R,Ye,pe,_e),Re=0;Re<bt;Re++){var Ra,Ma=0,wi,Si;Re>1?(Ra=ae,Ma=-2,wi=M.NORM_TYPE,(pe[0]==M.SHORT_TYPE||pe[1]==M.SHORT_TYPE)&&(wi=M.SHORT_TYPE),Si=L[Y][Re-2]):(Ra=J,Ma=0,wi=pe[Re],Si=ee[Y][Re]),wi==M.SHORT_TYPE?Ra[Ma+Re]=He(Si,le.masking_lower):Ra[Ma+Re]=$e(Si,le.masking_lower),R.analysis&&(le.pinfo.pe[Y][Re]=Ra[Ma+Re])}return 0};function Tt(R,T,X,Y,ee,L,J,ae){var Z=R.internal_flags;if(Y<2)N.fft_long(Z,J[ae],Y,T,X);else if(Y==2)for(var pe=M.BLKSIZE-1;pe>=0;--pe){var le=J[ae+0][pe],be=J[ae+1][pe];J[ae+0][pe]=(le+be)*vt.SQRT2*.5,J[ae+1][pe]=(le-be)*vt.SQRT2*.5}L[0]=J[ae+0][0],L[0]*=L[0];for(var pe=M.BLKSIZE/2-1;pe>=0;--pe){var De=J[ae+0][M.BLKSIZE/2-pe],rt=J[ae+0][M.BLKSIZE/2+pe];L[M.BLKSIZE/2-pe]=(De*De+rt*rt)*.5}{for(var Ee=0,pe=11;pe<M.HBLKSIZE;pe++)Ee+=L[pe];Z.tot_ener[Y]=Ee}if(R.analysis){for(var pe=0;pe<M.HBLKSIZE;pe++)Z.pinfo.energy[ee][Y][pe]=Z.pinfo.energy_save[Y][pe],Z.pinfo.energy_save[Y][pe]=L[pe];Z.pinfo.pe[ee][Y]=Z.pe[Y]}}function cn(R,T,X,Y,ee,L,J,ae){var Z=R.internal_flags;if(ee==0&&Y<2&&N.fft_short(Z,J[ae],Y,T,X),Y==2)for(var pe=M.BLKSIZE_s-1;pe>=0;--pe){var le=J[ae+0][ee][pe],be=J[ae+1][ee][pe];J[ae+0][ee][pe]=(le+be)*vt.SQRT2*.5,J[ae+1][ee][pe]=(le-be)*vt.SQRT2*.5}L[ee][0]=J[ae+0][ee][0],L[ee][0]*=L[ee][0];for(var pe=M.BLKSIZE_s/2-1;pe>=0;--pe){var De=J[ae+0][ee][M.BLKSIZE_s/2-pe],rt=J[ae+0][ee][M.BLKSIZE_s/2+pe];L[ee][M.BLKSIZE_s/2-pe]=(De*De+rt*rt)*.5}}function xt(R,T,X,Y){var ee=R.internal_flags;R.athaa_loudapprox==2&&X<2&&(ee.loudness_sq[T][X]=ee.loudness_sq_save[X],ee.loudness_sq_save[X]=G(Y,ee))}var Ut=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function Yt(R,T,X,Y,ee,L,J,ae,Z,pe){for(var le=se([2,576]),be=R.internal_flags,De=be.channels_out,rt=R.mode==on.JOINT_STEREO?4:De,Ee=0;Ee<De;Ee++){firbuf=T[Ee];for(var et=X+576-350-$+192,_e=0;_e<576;_e++){var Ye,bt;Ye=firbuf[et+_e+10],bt=0;for(var Re=0;Re<($-1)/2-1;Re+=2)Ye+=Ut[Re]*(firbuf[et+_e+Re]+firbuf[et+_e+$-Re]),bt+=Ut[Re+1]*(firbuf[et+_e+Re+1]+firbuf[et+_e+$-Re-1]);le[Ee][_e]=Ye+bt}ee[Y][Ee].en.assign(be.en[Ee]),ee[Y][Ee].thm.assign(be.thm[Ee]),rt>2&&(L[Y][Ee].en.assign(be.en[Ee+2]),L[Y][Ee].thm.assign(be.thm[Ee+2]))}for(var Ee=0;Ee<rt;Ee++){var Ge=V(12),Me=V(12),st=[0,0,0,0],$t=le[Ee&1],Xe=0,dt=Ee==3?be.nsPsy.attackthre_s:be.nsPsy.attackthre,wt=1;if(Ee==2)for(var _e=0,Re=576;Re>0;++_e,--Re){var Kt=le[0][_e],zn=le[1][_e];le[0][_e]=Kt+zn,le[1][_e]=Kt-zn}for(var _e=0;_e<3;_e++)Me[_e]=be.nsPsy.last_en_subshort[Ee][_e+6],ie(be.nsPsy.last_en_subshort[Ee][_e+4]>0),Ge[_e]=Me[_e]/be.nsPsy.last_en_subshort[Ee][_e+4],st[0]+=Me[_e];for(var _e=0;_e<9;_e++){for(var rn=Xe+64,Wt=1;Xe<rn;Xe++)Wt<Math.abs($t[Xe])&&(Wt=Math.abs($t[Xe]));be.nsPsy.last_en_subshort[Ee][_e]=Me[_e+3]=Wt,st[1+_e/3]+=Wt,Wt>Me[_e+3-2]?(ie(Me[_e+3-2]>0),Wt=Wt/Me[_e+3-2]):Me[_e+3-2]>Wt*10?Wt=Me[_e+3-2]/(Wt*10):Wt=0,Ge[_e+3]=Wt}for(var _e=0;_e<3;++_e){var Vn=Me[_e*3+3]+Me[_e*3+4]+Me[_e*3+5],Qn=1;Me[_e*3+5]*6<Vn&&(Qn*=.5,Me[_e*3+4]*6<Vn&&(Qn*=.5)),ae[Ee][_e]=Qn}if(R.analysis){for(var Zn=Ge[0],_e=1;_e<12;_e++)Zn<Ge[_e]&&(Zn=Ge[_e]);be.pinfo.ers[Y][Ee]=be.pinfo.ers_save[Ee],be.pinfo.ers_save[Ee]=Zn}for(var _e=0;_e<12;_e++)Z[Ee][_e/3]==0&&Ge[_e]>dt&&(Z[Ee][_e/3]=_e%3+1);for(var _e=1;_e<4;_e++){var _r=st[_e-1],dr=st[_e],Rn=Math.max(_r,dr);Rn<4e4&&_r<1.7*dr&&dr<1.7*_r&&(_e==1&&Z[Ee][0]<=Z[Ee][_e]&&(Z[Ee][0]=0),Z[Ee][_e]=0)}Z[Ee][0]<=be.nsPsy.lastAttacks[Ee]&&(Z[Ee][0]=0),(be.nsPsy.lastAttacks[Ee]==3||Z[Ee][0]+Z[Ee][1]+Z[Ee][2]+Z[Ee][3]!=0)&&(wt=0,Z[Ee][1]!=0&&Z[Ee][0]!=0&&(Z[Ee][1]=0),Z[Ee][2]!=0&&Z[Ee][1]!=0&&(Z[Ee][2]=0),Z[Ee][3]!=0&&Z[Ee][2]!=0&&(Z[Ee][3]=0)),Ee<2?pe[Ee]=wt:wt==0&&(pe[0]=pe[1]=0),J[Ee]=be.tot_ener[Ee]}}function en(R,T,X){if(X==0)for(var Y=0;Y<R.npart_s;Y++)R.nb_s2[T][Y]=R.nb_s1[T][Y],R.nb_s1[T][Y]=0}function mn(R,T){for(var X=0;X<R.npart_l;X++)R.nb_2[T][X]=R.nb_1[T][X],R.nb_1[T][X]=0}function Rr(R,T,X,Y){var ee=x.length-1,L=0,J=X[L]+X[L+1];if(J>0){var ae=T[L];ae<T[L+1]&&(ae=T[L+1]),ie(R.numlines_s[L]+R.numlines_s[L+1]-1>0),J=20*(ae*2-J)/(J*(R.numlines_s[L]+R.numlines_s[L+1]-1));var Z=0|J;Z>ee&&(Z=ee),Y[L]=Z}else Y[L]=0;for(L=1;L<R.npart_s-1;L++)if(J=X[L-1]+X[L]+X[L+1],ie(L+1<R.npart_s),J>0){var ae=T[L-1];ae<T[L]&&(ae=T[L]),ae<T[L+1]&&(ae=T[L+1]),ie(R.numlines_s[L-1]+R.numlines_s[L]+R.numlines_s[L+1]-1>0),J=20*(ae*3-J)/(J*(R.numlines_s[L-1]+R.numlines_s[L]+R.numlines_s[L+1]-1));var Z=0|J;Z>ee&&(Z=ee),Y[L]=Z}else Y[L]=0;if(ie(L==R.npart_s-1),J=X[L-1]+X[L],J>0){var ae=T[L-1];ae<T[L]&&(ae=T[L]),ie(R.numlines_s[L-1]+R.numlines_s[L]-1>0),J=20*(ae*2-J)/(J*(R.numlines_s[L-1]+R.numlines_s[L]-1));var Z=0|J;Z>ee&&(Z=ee),Y[L]=Z}else Y[L]=0;ie(L==R.npart_s-1)}function lr(R,T,X,Y,ee,L){var J=R.internal_flags,ae=new float[M.CBANDS],Z=V(M.CBANDS),pe,le,be,De=new int[M.CBANDS];for(be=le=0;be<J.npart_s;++be){var rt=0,Ee=0,et=J.numlines_s[be];for(pe=0;pe<et;++pe,++le){var _e=T[L][le];rt+=_e,Ee<_e&&(Ee=_e)}X[be]=rt,ae[be]=Ee,Z[be]=rt/et,ie(Z[be]>=0)}for(ie(be==J.npart_s);be<M.CBANDS;++be)ae[be]=0,Z[be]=0;for(Rr(J,ae,Z,De),le=be=0;be<J.npart_s;be++){var Ye=J.s3ind_s[be][0],bt=J.s3ind_s[be][1],Re,Ge,Me,st,$t;for(Re=De[Ye],Ge=1,st=J.s3_ss[le]*X[Ye]*x[De[Ye]],++le,++Ye;Ye<=bt;)Re+=De[Ye],Ge+=1,Me=J.s3_ss[le]*X[Ye]*x[De[Ye]],st=m(st,Me,Ye-be),++le,++Ye;Re=(1+2*Re)/(2*Ge),$t=x[Re]*.5,st*=$t,Y[be]=st,J.nb_s2[ee][be]=J.nb_s1[ee][be],J.nb_s1[ee][be]=st,Me=ae[be],Me*=J.minval_s[be],Me*=$t,Y[be]>Me&&(Y[be]=Me),J.masking_lower>1&&(Y[be]*=J.masking_lower),Y[be]>X[be]&&(Y[be]=X[be]),J.masking_lower<1&&(Y[be]*=J.masking_lower),ie(Y[be]>=0)}for(;be<M.CBANDS;++be)X[be]=0,Y[be]=0}function $n(R,T,X,Y,ee){var L=V(M.CBANDS),J=V(M.CBANDS),ae=Ae(M.CBANDS+2),Z;ot(R,T,X,L,J),We(R,L,J,ae);var pe=0;for(Z=0;Z<R.npart_l;Z++){var le,be,De,rt,Ee=R.s3ind[Z][0],et=R.s3ind[Z][1],_e=0,Ye=0;for(_e=ae[Ee],Ye+=1,be=R.s3_ll[pe]*X[Ee]*x[ae[Ee]],++pe,++Ee;Ee<=et;)_e+=ae[Ee],Ye+=1,le=R.s3_ll[pe]*X[Ee]*x[ae[Ee]],rt=m(be,le,Ee-Z),be=rt,++pe,++Ee;if(_e=(1+2*_e)/(2*Ye),De=x[_e]*.5,be*=De,R.blocktype_old[ee&1]==M.SHORT_TYPE){var bt=ue*R.nb_1[ee][Z];bt>0?Y[Z]=Math.min(be,bt):Y[Z]=Math.min(be,X[Z]*B)}else{var Re=ne*R.nb_2[ee][Z],Ge=ue*R.nb_1[ee][Z],bt;Re<=0&&(Re=be),Ge<=0&&(Ge=be),R.blocktype_old[ee&1]==M.NORM_TYPE?bt=Math.min(Ge,Re):bt=Ge,Y[Z]=Math.min(be,bt)}R.nb_2[ee][Z]=R.nb_1[ee][Z],R.nb_1[ee][Z]=be,le=L[Z],le*=R.minval_l[Z],le*=De,Y[Z]>le&&(Y[Z]=le),R.masking_lower>1&&(Y[Z]*=R.masking_lower),Y[Z]>X[Z]&&(Y[Z]=X[Z]),R.masking_lower<1&&(Y[Z]*=R.masking_lower),ie(Y[Z]>=0)}for(;Z<M.CBANDS;++Z)X[Z]=0,Y[Z]=0}function hr(R,T){var X=R.internal_flags;R.short_blocks==lt.short_block_coupled&&!(T[0]!=0&&T[1]!=0)&&(T[0]=T[1]=0);for(var Y=0;Y<X.channels_out;Y++)R.short_blocks==lt.short_block_dispensed&&(T[Y]=1),R.short_blocks==lt.short_block_forced&&(T[Y]=0)}function Rs(R,T,X){for(var Y=R.internal_flags,ee=0;ee<Y.channels_out;ee++){var L=M.NORM_TYPE;T[ee]!=0?(ie(Y.blocktype_old[ee]!=M.START_TYPE),Y.blocktype_old[ee]==M.SHORT_TYPE&&(L=M.STOP_TYPE)):(L=M.SHORT_TYPE,Y.blocktype_old[ee]==M.NORM_TYPE&&(Y.blocktype_old[ee]=M.START_TYPE),Y.blocktype_old[ee]==M.STOP_TYPE&&(Y.blocktype_old[ee]=M.SHORT_TYPE)),X[ee]=Y.blocktype_old[ee],Y.blocktype_old[ee]=L}}function ss(R,T,X,Y,ee,L,J){for(var ae=L*2,Z=L>0?Math.pow(10,ee):1,pe,le,be=0;be<J;++be){var De=R[2][be],rt=R[3][be],Ee=T[0][be],et=T[1][be],_e=T[2][be],Ye=T[3][be];if(Ee<=1.58*et&&et<=1.58*Ee){var bt=X[be]*rt,Re=X[be]*De;le=Math.max(_e,Math.min(Ye,bt)),pe=Math.max(Ye,Math.min(_e,Re))}else le=_e,pe=Ye;if(L>0){var Ge,Me,st=Y[be]*Z;if(Ge=Math.min(Math.max(Ee,st),Math.max(et,st)),_e=Math.max(le,st),Ye=Math.max(pe,st),Me=_e+Ye,Me>0&&Ge*ae<Me){var $t=Ge*ae/Me;_e*=$t,Ye*=$t}le=Math.min(_e,le),pe=Math.min(Ye,pe)}le>De&&(le=De),pe>rt&&(pe=rt),T[2][be]=le,T[3][be]=pe}}this.L3psycho_anal_vbr=function(R,T,X,Y,ee,L,J,ae,Z,pe){var le=R.internal_flags,be,De,rt=V(M.HBLKSIZE),Ee=se([3,M.HBLKSIZE_s]),et=se([2,M.BLKSIZE]),_e=se([2,3,M.BLKSIZE_s]),Ye=se([4,M.CBANDS]),bt=se([4,M.CBANDS]),Re=se([4,3]),Ge=.6,Me=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],st=Ae(2),$t=R.mode==on.JOINT_STEREO?4:le.channels_out;Yt(R,T,X,Y,ee,L,Z,Re,Me,st),hr(R,st);{for(var Xe=0;Xe<$t;Xe++){var dt=Xe&1;be=et,Tt(R,T,X,Xe,Y,rt,be,dt),xt(R,Y,Xe,rt),st[dt]!=0?$n(le,rt,Ye[Xe],bt[Xe],Xe):mn(le,Xe)}st[0]+st[1]==2&&R.mode==on.JOINT_STEREO&&ss(Ye,bt,le.mld_cb_l,le.ATH.cb_l,R.ATHlower*le.ATH.adjust,R.msfix,le.npart_l);for(var Xe=0;Xe<$t;Xe++){var dt=Xe&1;st[dt]!=0&&c(le,Ye[Xe],bt[Xe],Xe)}}{for(var wt=0;wt<3;wt++){for(var Xe=0;Xe<$t;++Xe){var dt=Xe&1;st[dt]!=0?en(le,Xe,wt):(De=_e,cn(R,T,X,Xe,wt,Ee,De,dt),lr(R,Ee,Ye[Xe],bt[Xe],Xe,wt))}st[0]+st[1]==0&&R.mode==on.JOINT_STEREO&&ss(Ye,bt,le.mld_cb_s,le.ATH.cb_s,R.ATHlower*le.ATH.adjust,R.msfix,le.npart_s);for(var Xe=0;Xe<$t;++Xe){var dt=Xe&1;st[dt]==0&&Q(le,Ye[Xe],bt[Xe],Xe,wt)}}for(var Xe=0;Xe<$t;Xe++){var dt=Xe&1;if(st[dt]==0)for(var Kt=0;Kt<M.SBMAX_s;Kt++){for(var zn=V(3),wt=0;wt<3;wt++){var rn=le.thm[Xe].s[Kt][wt];if(rn*=U,Me[Xe][wt]>=2||Me[Xe][wt+1]==1){var Wt=wt!=0?wt-1:2,Vn=ve(le.thm[Xe].s[Kt][Wt],rn,we*Ge);rn=Math.min(rn,Vn)}else if(Me[Xe][wt]==1){var Wt=wt!=0?wt-1:2,Vn=ve(le.thm[Xe].s[Kt][Wt],rn,B*Ge);rn=Math.min(rn,Vn)}else if(wt!=0&&Me[Xe][wt-1]==3||wt==0&&le.nsPsy.lastAttacks[Xe]==3){var Wt=wt!=2?wt+1:0,Vn=ve(le.thm[Xe].s[Kt][Wt],rn,B*Ge);rn=Math.min(rn,Vn)}rn*=Re[Xe][wt],zn[wt]=rn}for(var wt=0;wt<3;wt++)le.thm[Xe].s[Kt][wt]=zn[wt]}}}for(var Xe=0;Xe<$t;Xe++)le.nsPsy.lastAttacks[Xe]=Me[Xe][2];Rs(R,st,pe);for(var Xe=0;Xe<$t;Xe++){var Qn,Zn,_r,dr;Xe>1?(Qn=ae,Zn=-2,_r=M.NORM_TYPE,(pe[0]==M.SHORT_TYPE||pe[1]==M.SHORT_TYPE)&&(_r=M.SHORT_TYPE),dr=L[Y][Xe-2]):(Qn=J,Zn=0,_r=pe[Xe],dr=ee[Y][Xe]),_r==M.SHORT_TYPE?Qn[Zn+Xe]=He(dr,le.masking_lower):Qn[Zn+Xe]=$e(dr,le.masking_lower),R.analysis&&(le.pinfo.pe[Y][Xe]=Qn[Zn+Xe])}return 0};function Wn(R,T){var X=R,Y;return X>=0?Y=-X*27:Y=X*T,Y<=-72?0:Math.exp(Y*i)}function Ms(R){var T=0,X=0;{var Y=0,ee,L;for(Y=0;Wn(Y,R)>1e-20;Y-=1);for(ee=Y,L=0;Math.abs(L-ee)>1e-12;)Y=(L+ee)/2,Wn(Y,R)>0?L=Y:ee=Y;T=ee}{var Y=0,ee,L;for(Y=0;Wn(Y,R)>1e-20;Y+=1);for(ee=0,L=Y;Math.abs(L-ee)>1e-12;)Y=(L+ee)/2,Wn(Y,R)>0?ee=Y:L=Y;X=L}{var J=0,ae=1e3,Z;for(Z=0;Z<=ae;++Z){var Y=T+Z*(X-T)/ae,pe=Wn(Y,R);J+=pe}{var le=(ae+1)/(J*(X-T));return le}}}function qr(R){var T,X,Y,ee;return T=R,T>=0?T*=3:T*=1.5,T>=.5&&T<=2.5?(ee=T-.5,X=8*(ee*ee-2*ee)):X=0,T+=.474,Y=15.811389+7.5*T-17.5*Math.sqrt(1+T*T),Y<=-60?0:(T=Math.exp((X+Y)*i),T/=.6609193,T)}function Gn(R){return R<0&&(R=0),R=R*.001,13*Math.atan(.76*R)+3.5*Math.atan(R*R/(7.5*7.5))}function js(R,T,X,Y,ee,L,J,ae,Z,pe,le,be){var De=V(M.CBANDS+1),rt=ae/(be>15?2*576:2*192),Ee=Ae(M.HBLKSIZE),et;ae/=Z;var _e=0,Ye=0;for(et=0;et<M.CBANDS;et++){var bt,Re;for(bt=Gn(ae*_e),De[et]=ae*_e,Re=_e;Gn(ae*Re)-bt<de&&Re<=Z/2;Re++);for(R[et]=Re-_e,Ye=et+1;_e<Re;)Ee[_e++]=et;if(_e>Z/2){_e=Z/2,++et;break}}De[et]=ae*_e;for(var Ge=0;Ge<be;Ge++){var Me,st,$t,Xe,dt;$t=pe[Ge],Xe=pe[Ge+1],Me=0|Math.floor(.5+le*($t-.5)),Me<0&&(Me=0),st=0|Math.floor(.5+le*(Xe-.5)),st>Z/2&&(st=Z/2),X[Ge]=(Ee[Me]+Ee[st])/2,T[Ge]=Ee[st];var wt=rt*Xe;J[Ge]=(wt-De[T[Ge]])/(De[T[Ge]+1]-De[T[Ge]]),J[Ge]<0?J[Ge]=0:J[Ge]>1&&(J[Ge]=1),dt=Gn(ae*pe[Ge]*le),dt=Math.min(dt,15.5)/15.5,L[Ge]=Math.pow(10,1.25*(1-Math.cos(Math.PI*dt))-2.5)}_e=0;for(var Kt=0;Kt<Ye;Kt++){var zn=R[Kt],bt,rn;bt=Gn(ae*_e),rn=Gn(ae*(_e+zn-1)),Y[Kt]=.5*(bt+rn),bt=Gn(ae*(_e-.5)),rn=Gn(ae*(_e+zn-.5)),ee[Kt]=rn-bt,_e+=zn}return Ye}function m1(R,T,X,Y,ee,L){var J=se([M.CBANDS,M.CBANDS]),ae,Z=0;if(L)for(var pe=0;pe<T;pe++)for(ae=0;ae<T;ae++){var le=qr(X[pe]-X[ae])*Y[ae];J[pe][ae]=le*ee[pe]}else for(ae=0;ae<T;ae++)for(var be=15+Math.min(21/X[ae],12),De=Ms(be),pe=0;pe<T;pe++){var le=De*Wn(X[pe]-X[ae],be)*Y[ae];J[pe][ae]=le*ee[pe]}for(var pe=0;pe<T;pe++){for(ae=0;ae<T&&!(J[pe][ae]>0);ae++);for(R[pe][0]=ae,ae=T-1;ae>0&&!(J[pe][ae]>0);ae--);R[pe][1]=ae,Z+=R[pe][1]-R[pe][0]+1}for(var rt=V(Z),Ee=0,pe=0;pe<T;pe++)for(ae=R[pe][0];ae<=R[pe][1];ae++)rt[Ee++]=J[pe][ae];return rt}function v1(R){var T=Gn(R);return T=Math.min(T,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*T))-2.5)}this.psymodel_init=function(R){var T=R.internal_flags,X,Y=!0,ee=13,L=24,J=0,ae=0,Z=-8.25,pe=-4.5,le=V(M.CBANDS),be=V(M.CBANDS),De=V(M.CBANDS),rt=R.out_samplerate;switch(R.experimentalZ){default:case 0:Y=!0;break;case 1:Y=!(R.VBR==xe.vbr_mtrh||R.VBR==xe.vbr_mt);break;case 2:Y=!1;break;case 3:ee=8,J=-1.75,ae=-.0125,Z=-8.25,pe=-2.25;break}for(T.ms_ener_ratio_old=.25,T.blocktype_old[0]=T.blocktype_old[1]=M.NORM_TYPE,X=0;X<4;++X){for(var _e=0;_e<M.CBANDS;++_e)T.nb_1[X][_e]=1e20,T.nb_2[X][_e]=1e20,T.nb_s1[X][_e]=T.nb_s2[X][_e]=1;for(var Ee=0;Ee<M.SBMAX_l;Ee++)T.en[X].l[Ee]=1e20,T.thm[X].l[Ee]=1e20;for(var _e=0;_e<3;++_e){for(var Ee=0;Ee<M.SBMAX_s;Ee++)T.en[X].s[Ee][_e]=1e20,T.thm[X].s[Ee][_e]=1e20;T.nsPsy.lastAttacks[X]=0}for(var _e=0;_e<9;_e++)T.nsPsy.last_en_subshort[X][_e]=10}for(T.loudness_sq_save[0]=T.loudness_sq_save[1]=0,T.npart_l=js(T.numlines_l,T.bo_l,T.bm_l,le,be,T.mld_l,T.PSY.bo_l_weight,rt,M.BLKSIZE,T.scalefac_band.l,M.BLKSIZE/(2*576),M.SBMAX_l),ie(T.npart_l<M.CBANDS),X=0;X<T.npart_l;X++){var et=J;le[X]>=ee&&(et=ae*(le[X]-ee)/(L-ee)+J*(L-le[X])/(L-ee)),De[X]=Math.pow(10,et/10),T.numlines_l[X]>0?T.rnumlines_l[X]=1/T.numlines_l[X]:T.rnumlines_l[X]=0}T.s3_ll=m1(T.s3ind,T.npart_l,le,be,De,Y);var _e=0;for(X=0;X<T.npart_l;X++){var Ye;Ye=qe.MAX_VALUE;for(var bt=0;bt<T.numlines_l[X];bt++,_e++){var Re=rt*_e/(1e3*M.BLKSIZE),Ge;Ge=this.ATHformula(Re*1e3,R)-20,Ge=Math.pow(10,.1*Ge),Ge*=T.numlines_l[X],Ye>Ge&&(Ye=Ge)}T.ATH.cb_l[X]=Ye,Ye=-20+le[X]*20/10,Ye>6&&(Ye=100),Ye<-15&&(Ye=-15),Ye-=8,T.minval_l[X]=Math.pow(10,Ye/10)*T.numlines_l[X]}for(T.npart_s=js(T.numlines_s,T.bo_s,T.bm_s,le,be,T.mld_s,T.PSY.bo_s_weight,rt,M.BLKSIZE_s,T.scalefac_band.s,M.BLKSIZE_s/(2*192),M.SBMAX_s),ie(T.npart_s<M.CBANDS),_e=0,X=0;X<T.npart_s;X++){var Ye,et=Z;le[X]>=ee&&(et=pe*(le[X]-ee)/(L-ee)+Z*(L-le[X])/(L-ee)),De[X]=Math.pow(10,et/10),Ye=qe.MAX_VALUE;for(var bt=0;bt<T.numlines_s[X];bt++,_e++){var Re=rt*_e/(1e3*M.BLKSIZE_s),Ge;Ge=this.ATHformula(Re*1e3,R)-20,Ge=Math.pow(10,.1*Ge),Ge*=T.numlines_s[X],Ye>Ge&&(Ye=Ge)}T.ATH.cb_s[X]=Ye,Ye=-7+le[X]*7/12,le[X]>12&&(Ye*=1+Math.log(1+Ye)*3.1),le[X]<12&&(Ye*=1+Math.log(1-Ye)*2.3),Ye<-15&&(Ye=-15),Ye-=8,T.minval_s[X]=Math.pow(10,Ye/10)*T.numlines_s[X]}T.s3_ss=m1(T.s3ind_s,T.npart_s,le,be,De,Y),b(),N.init_fft(T),T.decay=Math.exp(-1*te/(Ne*rt/192));{var Me;Me=I,R.exp_nspsytune&2&&(Me=1),Math.abs(R.msfix)>0&&(Me=R.msfix),R.msfix=Me;for(var st=0;st<T.npart_l;st++)T.s3ind[st][1]>T.npart_l-1&&(T.s3ind[st][1]=T.npart_l-1)}var $t=576*T.mode_gr/rt;if(T.ATH.decay=Math.pow(10,-12/10*$t),T.ATH.adjust=.01,T.ATH.adjustLimit=1,ie(T.bo_l[M.SBMAX_l-1]<=T.npart_l),ie(T.bo_s[M.SBMAX_s-1]<=T.npart_s),R.ATHtype!=-1){var Re,Xe=R.out_samplerate/M.BLKSIZE,dt=0;for(Re=0,X=0;X<M.BLKSIZE/2;++X)Re+=Xe,T.ATH.eql_w[X]=1/Math.pow(10,this.ATHformula(Re,R)/10),dt+=T.ATH.eql_w[X];for(dt=1/dt,X=M.BLKSIZE/2;--X>=0;)T.ATH.eql_w[X]*=dt}{for(var st=_e=0;st<T.npart_s;++st)for(X=0;X<T.numlines_s[st];++X)++_e;for(var st=_e=0;st<T.npart_l;++st)for(X=0;X<T.numlines_l[st];++X)++_e}for(_e=0,X=0;X<T.npart_l;X++){var Re=rt*(_e+T.numlines_l[X]/2)/(1*M.BLKSIZE);T.mld_cb_l[X]=v1(Re),_e+=T.numlines_l[X]}for(;X<M.CBANDS;++X)T.mld_cb_l[X]=1;for(_e=0,X=0;X<T.npart_s;X++){var Re=rt*(_e+T.numlines_s[X]/2)/(1*M.BLKSIZE_s);T.mld_cb_s[X]=v1(Re),_e+=T.numlines_s[X]}for(;X<M.CBANDS;++X)T.mld_cb_s[X]=1;return 0};function qs(R,T){R<-.3&&(R=3410),R/=1e3,R=Math.max(.1,R);var X=3.64*Math.pow(R,-.8)-6.8*Math.exp(-.6*Math.pow(R-3.4,2))+6*Math.exp(-.15*Math.pow(R-8.7,2))+(.6+.04*T)*.001*Math.pow(R,4);return X}this.ATHformula=function(R,T){var X;switch(T.ATHtype){case 0:X=qs(R,9);break;case 1:X=qs(R,-1);break;case 2:X=qs(R,0);break;case 3:X=qs(R,1)+6;break;case 4:X=qs(R,T.ATHcurve);break;default:X=qs(R,0);break}return X}}var Ue=Pe;function Ve(N){var te=N;this.ordinal=function(){return te}}Ve.STEREO=new Ve(0),Ve.JOINT_STEREO=new Ve(1),Ve.DUAL_CHANNEL=new Ve(2),Ve.MONO=new Ve(3),Ve.NOT_SET=new Ve(4);var je=Ve;function ke(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=je.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var ct=ke,Ke={};Ke.SFBMAX=M.SBMAX_s*3;var Ze=Ke,mt=W.new_float,yt=W.new_int;function Nt(){this.xr=mt(576),this.l3_enc=yt(576),this.scalefac=yt(Ze.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=yt(3),this.subblock_gain=yt(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=yt(Ze.SFBMAX),this.window=yt(Ze.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=yt(4),this.max_nonzero_coeff=0;var N=this;function te(ne){return new Int32Array(ne)}function ue(ne){return new Float32Array(ne)}this.assign=function(ne){N.xr=ue(ne.xr),N.l3_enc=te(ne.l3_enc),N.scalefac=te(ne.scalefac),N.xrpow_max=ne.xrpow_max,N.part2_3_length=ne.part2_3_length,N.big_values=ne.big_values,N.count1=ne.count1,N.global_gain=ne.global_gain,N.scalefac_compress=ne.scalefac_compress,N.block_type=ne.block_type,N.mixed_block_flag=ne.mixed_block_flag,N.table_select=te(ne.table_select),N.subblock_gain=te(ne.subblock_gain),N.region0_count=ne.region0_count,N.region1_count=ne.region1_count,N.preflag=ne.preflag,N.scalefac_scale=ne.scalefac_scale,N.count1table_select=ne.count1table_select,N.part2_length=ne.part2_length,N.sfb_lmax=ne.sfb_lmax,N.sfb_smin=ne.sfb_smin,N.psy_lmax=ne.psy_lmax,N.sfbmax=ne.sfbmax,N.psymax=ne.psymax,N.sfbdivide=ne.sfbdivide,N.width=te(ne.width),N.window=te(ne.window),N.count1bits=ne.count1bits,N.sfb_partition_table=ne.sfb_partition_table.slice(0),N.slen=te(ne.slen),N.max_nonzero_coeff=ne.max_nonzero_coeff}}var Rt=Nt,En=W.new_int;function _n(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[En(4),En(4)];for(var N=0;N<2;N++)for(var te=0;te<2;te++)this.tt[N][te]=new Rt}var Kn=_n,dn=W.System,gr=W.new_int;function _i(N,te,ue,ne){this.l=gr(1+M.SBMAX_l),this.s=gr(1+M.SBMAX_s),this.psfb21=gr(1+M.PSFB21),this.psfb12=gr(1+M.PSFB12);var ge=this.l,re=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],dn.arraycopy(this.arrL,0,ge,0,Math.min(this.arrL.length,this.l.length)),dn.arraycopy(this.arrS,0,re,0,Math.min(this.arrS.length,this.s.length)),dn.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),dn.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var qt=_i,kn=W.new_float,di=W.new_float_n,Fh=W.new_int;function $h(){this.last_en_subshort=di([4,9]),this.lastAttacks=Fh(4),this.pefirbuf=kn(19),this.longfact=kn(M.SBMAX_l),this.shortfact=kn(M.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var Vh=$h;function Hh(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var Dh=Hh,Xh=W.new_byte,jh=W.new_double,ir=W.new_float,Ss=W.new_float_n,fr=W.new_int,mi=W.new_int_n;Dr.MFSIZE=3*1152+M.ENCDELAY-M.MDCTDELAY,Dr.MAX_HEADER_BUF=256,Dr.MAX_BITS_PER_CHANNEL=4095,Dr.MAX_BITS_PER_GRANULE=7680,Dr.BPC=320;function Dr(){var N=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=Ss([2,Dr.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new Kn,this.ms_ratio=ir(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=fr(2),this.CurrentStep=fr(2),this.masking_lower=0,this.bv_scf=fr(576),this.pseudohalf=fr(Ze.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*Dr.BPC+1),this.itime=jh(2),this.sideinfo_len=0,this.sb_sample=Ss([2,2,18,M.SBLIMIT]),this.amp_filter=ir(32);function te(){this.write_timing=0,this.ptr=0,this.buf=Xh(N)}this.header=new Array(Dr.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new qt,this.minval_l=ir(M.CBANDS),this.minval_s=ir(M.CBANDS),this.nb_1=Ss([4,M.CBANDS]),this.nb_2=Ss([4,M.CBANDS]),this.nb_s1=Ss([4,M.CBANDS]),this.nb_s2=Ss([4,M.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=ir(4),this.loudness_sq=Ss([2,2]),this.loudness_sq_save=ir(2),this.mld_l=ir(M.SBMAX_l),this.mld_s=ir(M.SBMAX_s),this.bm_l=fr(M.SBMAX_l),this.bo_l=fr(M.SBMAX_l),this.bm_s=fr(M.SBMAX_s),this.bo_s=fr(M.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=mi([M.CBANDS,2]),this.s3ind_s=mi([M.CBANDS,2]),this.numlines_s=fr(M.CBANDS),this.numlines_l=fr(M.CBANDS),this.rnumlines_l=ir(M.CBANDS),this.mld_cb_l=ir(M.CBANDS),this.mld_cb_s=ir(M.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=ir(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=fr(2),this.nsPsy=new Vh,this.VBR_seek_table=new Dh,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=mi([16,5]),this.bitrate_blockType_Hist=mi([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var ue=0;ue<this.en.length;ue++)this.en[ue]=new Dt;for(var ue=0;ue<this.thm.length;ue++)this.thm[ue]=new Dt;for(var ue=0;ue<this.header.length;ue++)this.header[ue]=new te}var Xt=Dr,xs=W.new_float;function qh(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=xs(M.SBMAX_l),this.s=xs(M.SBMAX_s),this.psfb21=xs(M.PSFB21),this.psfb12=xs(M.PSFB12),this.cb_l=xs(M.CBANDS),this.cb_s=xs(M.CBANDS),this.eql_w=xs(M.BLKSIZE/2)}var Uh=qh,Fn=W.System,n1=W.Arrays;Jt.STEPS_per_dB=100,Jt.MAX_dB=120,Jt.GAIN_NOT_ENOUGH_SAMPLES=-24601,Jt.GAIN_ANALYSIS_ERROR=0,Jt.GAIN_ANALYSIS_OK=1,Jt.INIT_GAIN_ANALYSIS_ERROR=0,Jt.INIT_GAIN_ANALYSIS_OK=1,Jt.YULE_ORDER=10,Jt.MAX_ORDER=Jt.YULE_ORDER,Jt.MAX_SAMP_FREQ=48e3,Jt.RMS_WINDOW_TIME_NUMERATOR=1,Jt.RMS_WINDOW_TIME_DENOMINATOR=20,Jt.MAX_SAMPLES_PER_WINDOW=Jt.MAX_SAMP_FREQ*Jt.RMS_WINDOW_TIME_NUMERATOR/Jt.RMS_WINDOW_TIME_DENOMINATOR+1;function Jt(){var N=64.82,te=.95,ue=Jt.RMS_WINDOW_TIME_NUMERATOR,ne=Jt.RMS_WINDOW_TIME_DENOMINATOR,ge=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],re=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function de(B,I,$,i,z,G){for(;z--!=0;)$[i]=1e-10+B[I+0]*G[0]-$[i-1]*G[1]+B[I-1]*G[2]-$[i-2]*G[3]+B[I-2]*G[4]-$[i-3]*G[5]+B[I-3]*G[6]-$[i-4]*G[7]+B[I-4]*G[8]-$[i-5]*G[9]+B[I-5]*G[10]-$[i-6]*G[11]+B[I-6]*G[12]-$[i-7]*G[13]+B[I-7]*G[14]-$[i-8]*G[15]+B[I-8]*G[16]-$[i-9]*G[17]+B[I-9]*G[18]-$[i-10]*G[19]+B[I-10]*G[20],++i,++I}function Ce(B,I,$,i,z,G){for(;z--!=0;)$[i]=B[I+0]*G[0]-$[i-1]*G[1]+B[I-1]*G[2]-$[i-2]*G[3]+B[I-2]*G[4],++i,++I}function Ne(B,I){for(var $=0;$<MAX_ORDER;$++)B.linprebuf[$]=B.lstepbuf[$]=B.loutbuf[$]=B.rinprebuf[$]=B.rstepbuf[$]=B.routbuf[$]=0;switch(0|I){case 48e3:B.reqindex=0;break;case 44100:B.reqindex=1;break;case 32e3:B.reqindex=2;break;case 24e3:B.reqindex=3;break;case 22050:B.reqindex=4;break;case 16e3:B.reqindex=5;break;case 12e3:B.reqindex=6;break;case 11025:B.reqindex=7;break;case 8e3:B.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return B.sampleWindow=0|(I*ue+ne-1)/ne,B.lsum=0,B.rsum=0,B.totsamp=0,n1.ill(B.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(B,I){return Ne(B,I)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(B.linpre=MAX_ORDER,B.rinpre=MAX_ORDER,B.lstep=MAX_ORDER,B.rstep=MAX_ORDER,B.lout=MAX_ORDER,B.rout=MAX_ORDER,n1.fill(B.B,0),INIT_GAIN_ANALYSIS_OK)};function U(B){return B*B}this.AnalyzeSamples=function(B,I,$,i,z,G,D){var f,E,C,O,k,l,x;if(G==0)return GAIN_ANALYSIS_OK;switch(x=0,k=G,D){case 1:i=I,z=$;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(G<MAX_ORDER?(Fn.arraycopy(I,$,B.linprebuf,MAX_ORDER,G),Fn.arraycopy(i,z,B.rinprebuf,MAX_ORDER,G)):(Fn.arraycopy(I,$,B.linprebuf,MAX_ORDER,MAX_ORDER),Fn.arraycopy(i,z,B.rinprebuf,MAX_ORDER,MAX_ORDER));k>0;){l=k>B.sampleWindow-B.totsamp?B.sampleWindow-B.totsamp:k,x<MAX_ORDER?(f=B.linpre+x,E=B.linprebuf,C=B.rinpre+x,O=B.rinprebuf,l>MAX_ORDER-x&&(l=MAX_ORDER-x)):(f=$+x,E=I,C=z+x,O=i),de(E,f,B.lstepbuf,B.lstep+B.totsamp,l,ge[B.reqindex]),de(O,C,B.rstepbuf,B.rstep+B.totsamp,l,ge[B.reqindex]),Ce(B.lstepbuf,B.lstep+B.totsamp,B.loutbuf,B.lout+B.totsamp,l,re[B.reqindex]),Ce(B.rstepbuf,B.rstep+B.totsamp,B.routbuf,B.rout+B.totsamp,l,re[B.reqindex]),f=B.lout+B.totsamp,E=B.loutbuf,C=B.rout+B.totsamp,O=B.routbuf;for(var b=l%8;b--!=0;)B.lsum+=U(E[f++]),B.rsum+=U(O[C++]);for(b=l/8;b--!=0;)B.lsum+=U(E[f+0])+U(E[f+1])+U(E[f+2])+U(E[f+3])+U(E[f+4])+U(E[f+5])+U(E[f+6])+U(E[f+7]),f+=8,B.rsum+=U(O[C+0])+U(O[C+1])+U(O[C+2])+U(O[C+3])+U(O[C+4])+U(O[C+5])+U(O[C+6])+U(O[C+7]),C+=8;if(k-=l,x+=l,B.totsamp+=l,B.totsamp==B.sampleWindow){var h=Jt.STEPS_per_dB*10*Math.log10((B.lsum+B.rsum)/B.totsamp*.5+1e-37),y=h<=0?0:0|h;y>=B.A.length&&(y=B.A.length-1),B.A[y]++,B.lsum=B.rsum=0,Fn.arraycopy(B.loutbuf,B.totsamp,B.loutbuf,0,MAX_ORDER),Fn.arraycopy(B.routbuf,B.totsamp,B.routbuf,0,MAX_ORDER),Fn.arraycopy(B.lstepbuf,B.totsamp,B.lstepbuf,0,MAX_ORDER),Fn.arraycopy(B.rstepbuf,B.totsamp,B.rstepbuf,0,MAX_ORDER),B.totsamp=0}if(B.totsamp>B.sampleWindow)return GAIN_ANALYSIS_ERROR}return G<MAX_ORDER?(Fn.arraycopy(B.linprebuf,G,B.linprebuf,0,MAX_ORDER-G),Fn.arraycopy(B.rinprebuf,G,B.rinprebuf,0,MAX_ORDER-G),Fn.arraycopy(I,$,B.linprebuf,MAX_ORDER-G,G),Fn.arraycopy(i,z,B.rinprebuf,MAX_ORDER-G,G)):(Fn.arraycopy(I,$+G-MAX_ORDER,B.linprebuf,0,MAX_ORDER),Fn.arraycopy(i,z+G-MAX_ORDER,B.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function we(B,I){var $,i=0;for($=0;$<I;$++)i+=B[$];if(i==0)return GAIN_NOT_ENOUGH_SAMPLES;var z=0|Math.ceil(i*(1-te));for($=I;$-- >0&&!((z-=B[$])<=0););return N-$/Jt.STEPS_per_dB}this.GetTitleGain=function(B){for(var I=we(B.A,B.A.length),$=0;$<B.A.length;$++)B.B[$]+=B.A[$],B.A[$]=0;for(var $=0;$<MAX_ORDER;$++)B.linprebuf[$]=B.lstepbuf[$]=B.loutbuf[$]=B.rinprebuf[$]=B.rstepbuf[$]=B.routbuf[$]=0;return B.totsamp=0,B.lsum=B.rsum=0,I}}var Cn=Jt,Ds=W.new_float,r1=W.new_int;function Yh(){this.linprebuf=Ds(Cn.MAX_ORDER*2),this.linpre=0,this.lstepbuf=Ds(Cn.MAX_SAMPLES_PER_WINDOW+Cn.MAX_ORDER),this.lstep=0,this.loutbuf=Ds(Cn.MAX_SAMPLES_PER_WINDOW+Cn.MAX_ORDER),this.lout=0,this.rinprebuf=Ds(Cn.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=Ds(Cn.MAX_SAMPLES_PER_WINDOW+Cn.MAX_ORDER),this.rstep=0,this.routbuf=Ds(Cn.MAX_SAMPLES_PER_WINDOW+Cn.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=r1(0|Cn.STEPS_per_dB*Cn.MAX_dB),this.B=r1(0|Cn.STEPS_per_dB*Cn.MAX_dB)}var Kh=Yh;function Wh(N){this.bits=N}var s1=Wh,a1=W.new_float,Gh=W.new_int,i1=W.assert;function zh(N){var te=N;this.quantize=te,this.iteration_loop=function(ue,ne,ge,re){var de=ue.internal_flags,Ce=a1(Ze.SFBMAX),Ne=a1(576),U=Gh(2),we=0,B,I=de.l3_side,$=new s1(we);this.quantize.rv.ResvFrameBegin(ue,$),we=$.bits;for(var i=0;i<de.mode_gr;i++){B=this.quantize.qupvt.on_pe(ue,ne,U,we,i,i),de.mode_ext==M.MPG_MD_MS_LR&&(this.quantize.ms_convert(de.l3_side,i),this.quantize.qupvt.reduce_side(U,ge[i],we,B));for(var z=0;z<de.channels_out;z++){var G,D,f=I.tt[i][z];f.block_type!=M.SHORT_TYPE?(G=0,D=de.PSY.mask_adjust-G):(G=0,D=de.PSY.mask_adjust_short-G),de.masking_lower=Math.pow(10,D*.1),this.quantize.init_outer_loop(de,f),this.quantize.init_xrpow(de,f,Ne)&&(this.quantize.qupvt.calc_xmin(ue,re[i][z],f,Ce),this.quantize.outer_loop(ue,f,Ce,Ne,z,U[z])),this.quantize.iteration_finish_one(de,i,z),i1(f.part2_3_length<=Xt.MAX_BITS_PER_CHANNEL),i1(f.part2_3_length<=U[z])}}this.quantize.rv.ResvFrameEnd(de,we)}}var Qh=zh;function Mt(N,te,ue,ne){this.xlen=N,this.linmax=te,this.table=ue,this.hlen=ne}var Te={};Te.t1HB=[1,1,1,0],Te.t2HB=[1,2,1,3,1,1,3,2,0],Te.t3HB=[3,2,1,1,1,1,3,2,0],Te.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],Te.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],Te.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],Te.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],Te.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],Te.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],Te.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],Te.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],Te.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],Te.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],Te.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],Te.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],Te.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],Te.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],Te.t1l=[1,4,3,5],Te.t2l=[1,4,7,4,5,7,6,7,8],Te.t3l=[2,3,7,4,4,7,6,7,8],Te.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],Te.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],Te.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],Te.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],Te.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],Te.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],Te.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],Te.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],Te.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],Te.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],Te.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],Te.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],Te.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],Te.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],Te.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],Te.ht=[new Mt(0,0,null,null),new Mt(2,0,Te.t1HB,Te.t1l),new Mt(3,0,Te.t2HB,Te.t2l),new Mt(3,0,Te.t3HB,Te.t3l),new Mt(0,0,null,null),new Mt(4,0,Te.t5HB,Te.t5l),new Mt(4,0,Te.t6HB,Te.t6l),new Mt(6,0,Te.t7HB,Te.t7l),new Mt(6,0,Te.t8HB,Te.t8l),new Mt(6,0,Te.t9HB,Te.t9l),new Mt(8,0,Te.t10HB,Te.t10l),new Mt(8,0,Te.t11HB,Te.t11l),new Mt(8,0,Te.t12HB,Te.t12l),new Mt(16,0,Te.t13HB,Te.t13l),new Mt(0,0,null,Te.t16_5l),new Mt(16,0,Te.t15HB,Te.t15l),new Mt(1,1,Te.t16HB,Te.t16l),new Mt(2,3,Te.t16HB,Te.t16l),new Mt(3,7,Te.t16HB,Te.t16l),new Mt(4,15,Te.t16HB,Te.t16l),new Mt(6,63,Te.t16HB,Te.t16l),new Mt(8,255,Te.t16HB,Te.t16l),new Mt(10,1023,Te.t16HB,Te.t16l),new Mt(13,8191,Te.t16HB,Te.t16l),new Mt(4,15,Te.t24HB,Te.t24l),new Mt(5,31,Te.t24HB,Te.t24l),new Mt(6,63,Te.t24HB,Te.t24l),new Mt(7,127,Te.t24HB,Te.t24l),new Mt(8,255,Te.t24HB,Te.t24l),new Mt(9,511,Te.t24HB,Te.t24l),new Mt(11,2047,Te.t24HB,Te.t24l),new Mt(13,8191,Te.t24HB,Te.t24l),new Mt(0,0,Te.t32HB,Te.t32l),new Mt(0,0,Te.t33HB,Te.t33l)],Te.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],Te.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],Te.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],Te.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],Te.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],Te.scfsi_band=[0,6,11,16,21];var At=Te,gs=W.VbrMode,vi=W.Float,W0=W.Util,As=W.new_float,Zh=W.new_int,ba=W.assert;Xr.Q_MAX=257,Xr.Q_MAX2=116,Xr.LARGE_BITS=1e5,Xr.IXMAX_VAL=8206;function Xr(){var N=null,te=null,ue=null;this.setModules=function(f,E,C){N=f,te=E,ue=C};function ne(f){return B[f+Xr.Q_MAX2]}this.IPOW20=function(f){return I[f]};var ge=2220446049250313e-31,re=Xr.IXMAX_VAL,de=re+2,Ce=Xr.Q_MAX,Ne=Xr.Q_MAX2,U=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var we=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=we,this.sfBandIndex=[new qt([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new qt([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new qt([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new qt([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new qt([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new qt([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new qt([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new qt([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new qt([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var B=As(Ce+Ne+1),I=As(Ce),$=As(de),i=As(de);this.adj43=i;function z(f,E){var C=ue.ATHformula(E,f);return C-=U,C=Math.pow(10,C/10+f.ATHlower),C}function G(f){for(var E=f.internal_flags.ATH.l,C=f.internal_flags.ATH.psfb21,O=f.internal_flags.ATH.s,k=f.internal_flags.ATH.psfb12,l=f.internal_flags,x=f.out_samplerate,b=0;b<M.SBMAX_l;b++){var h=l.scalefac_band.l[b],y=l.scalefac_band.l[b+1];E[b]=vi.MAX_VALUE;for(var w=h;w<y;w++){var u=w*x/1152,_=z(f,u);E[b]=Math.min(E[b],_)}}for(var b=0;b<M.PSFB21;b++){var h=l.scalefac_band.psfb21[b],y=l.scalefac_band.psfb21[b+1];C[b]=vi.MAX_VALUE;for(var w=h;w<y;w++){var u=w*x/1152,_=z(f,u);C[b]=Math.min(C[b],_)}}for(var b=0;b<M.SBMAX_s;b++){var h=l.scalefac_band.s[b],y=l.scalefac_band.s[b+1];O[b]=vi.MAX_VALUE;for(var w=h;w<y;w++){var u=w*x/384,_=z(f,u);O[b]=Math.min(O[b],_)}O[b]*=l.scalefac_band.s[b+1]-l.scalefac_band.s[b]}for(var b=0;b<M.PSFB12;b++){var h=l.scalefac_band.psfb12[b],y=l.scalefac_band.psfb12[b+1];k[b]=vi.MAX_VALUE;for(var w=h;w<y;w++){var u=w*x/384,_=z(f,u);k[b]=Math.min(k[b],_)}k[b]*=l.scalefac_band.s[13]-l.scalefac_band.s[12]}if(f.noATH){for(var b=0;b<M.SBMAX_l;b++)E[b]=1e-20;for(var b=0;b<M.PSFB21;b++)C[b]=1e-20;for(var b=0;b<M.SBMAX_s;b++)O[b]=1e-20;for(var b=0;b<M.PSFB12;b++)k[b]=1e-20}l.ATH.floor=10*Math.log10(z(f,-1))}this.iteration_init=function(f){var E=f.internal_flags,C=E.l3_side,O;if(E.iteration_init_init==0){for(E.iteration_init_init=1,C.main_data_begin=0,G(f),$[0]=0,O=1;O<de;O++)$[O]=Math.pow(O,4/3);for(O=0;O<de-1;O++)i[O]=O+1-Math.pow(.5*($[O]+$[O+1]),.75);for(i[O]=.5,O=0;O<Ce;O++)I[O]=Math.pow(2,(O-210)*-.1875);for(O=0;O<=Ce+Ne;O++)B[O]=Math.pow(2,(O-210-Ne)*.25);N.huffman_init(E);{var k,l,x,b;for(O=f.exp_nspsytune>>2&63,O>=32&&(O-=64),k=Math.pow(10,O/4/10),O=f.exp_nspsytune>>8&63,O>=32&&(O-=64),l=Math.pow(10,O/4/10),O=f.exp_nspsytune>>14&63,O>=32&&(O-=64),x=Math.pow(10,O/4/10),O=f.exp_nspsytune>>20&63,O>=32&&(O-=64),b=x*Math.pow(10,O/4/10),O=0;O<M.SBMAX_l;O++){var h;O<=6?h=k:O<=13?h=l:O<=20?h=x:h=b,E.nsPsy.longfact[O]=h}for(O=0;O<M.SBMAX_s;O++){var h;O<=5?h=k:O<=10?h=l:O<=11?h=x:h=b,E.nsPsy.shortfact[O]=h}}}},this.on_pe=function(f,E,C,O,k,l){var x=f.internal_flags,b=0,h,y=Zh(2),w,u=new s1(b),_=te.ResvMaxBits(f,O,u,l);b=u.bits;var m=b+_;for(m>Xt.MAX_BITS_PER_GRANULE&&(m=Xt.MAX_BITS_PER_GRANULE),h=0,w=0;w<x.channels_out;++w)C[w]=Math.min(Xt.MAX_BITS_PER_CHANNEL,b/x.channels_out),y[w]=0|C[w]*E[k][w]/700-C[w],y[w]>O*3/4&&(y[w]=O*3/4),y[w]<0&&(y[w]=0),y[w]+C[w]>Xt.MAX_BITS_PER_CHANNEL&&(y[w]=Math.max(0,Xt.MAX_BITS_PER_CHANNEL-C[w])),h+=y[w];if(h>_)for(w=0;w<x.channels_out;++w)y[w]=_*y[w]/h;for(w=0;w<x.channels_out;++w)C[w]+=y[w],_-=y[w];for(h=0,w=0;w<x.channels_out;++w)h+=C[w];if(h>Xt.MAX_BITS_PER_GRANULE){var P=0;for(w=0;w<x.channels_out;++w)C[w]*=Xt.MAX_BITS_PER_GRANULE,C[w]/=h,P+=C[w]}return m},this.reduce_side=function(f,E,C,O){ba(f[0]+f[1]<=Xt.MAX_BITS_PER_GRANULE);var k=.33*(.5-E)/.5;k<0&&(k=0),k>.5&&(k=.5);var l=0|k*.5*(f[0]+f[1]);l>Xt.MAX_BITS_PER_CHANNEL-f[0]&&(l=Xt.MAX_BITS_PER_CHANNEL-f[0]),l<0&&(l=0),f[1]>=125&&(f[1]-l>125?(f[0]<C&&(f[0]+=l),f[1]-=l):(f[0]+=f[1]-125,f[1]=125)),l=f[0]+f[1],l>O&&(f[0]=O*f[0]/l,f[1]=O*f[1]/l),ba(f[0]<=Xt.MAX_BITS_PER_CHANNEL),ba(f[1]<=Xt.MAX_BITS_PER_CHANNEL),ba(f[0]+f[1]<=Xt.MAX_BITS_PER_GRANULE)},this.athAdjust=function(f,E,C){var O=90.30873362,k=94.82444863,l=W0.FAST_LOG10_X(E,10),x=f*f,b=0;return l-=C,x>1e-20&&(b=1+W0.FAST_LOG10_X(x,10/O)),b<0&&(b=0),l*=b,l+=C+O-k,Math.pow(10,.1*l)},this.calc_xmin=function(f,E,C,O){var k=0,l=f.internal_flags,x,b=0,h=0,y=l.ATH,w=C.xr,u=f.VBR==gs.vbr_mtrh?1:0,_=l.masking_lower;for((f.VBR==gs.vbr_mtrh||f.VBR==gs.vbr_mt)&&(_=1),x=0;x<C.psy_lmax;x++){var m,P,oe,j,Q,c;f.VBR==gs.vbr_rh||f.VBR==gs.vbr_mtrh?P=athAdjust(y.adjust,y.l[x],y.floor):P=y.adjust*y.l[x],Q=C.width[x],oe=P/Q,j=ge,c=Q>>1,m=0;do{var v,ce;v=w[b]*w[b],m+=v,j+=v<oe?v:oe,b++,ce=w[b]*w[b],m+=ce,j+=ce<oe?ce:oe,b++}while(--c>0);if(m>P&&h++,x==M.SBPSY_l){var ve=P*l.nsPsy.longfact[x];j<ve&&(j=ve)}if(u!=0&&(P=j),!f.ATHonly){var Oe=E.en.l[x];if(Oe>0){var ve;ve=m*E.thm.l[x]*_/Oe,u!=0&&(ve*=l.nsPsy.longfact[x]),P<ve&&(P=ve)}}u!=0?O[k++]=P:O[k++]=P*l.nsPsy.longfact[x]}var He=575;if(C.block_type!=M.SHORT_TYPE)for(var Le=576;Le--!=0&&jr.EQ(w[Le],0);)He=Le;C.max_nonzero_coeff=He;for(var $e=C.sfb_smin;x<C.psymax;$e++,x+=3){var Q,ot,We;for(f.VBR==gs.vbr_rh||f.VBR==gs.vbr_mtrh?We=athAdjust(y.adjust,y.s[$e],y.floor):We=y.adjust*y.s[$e],Q=C.width[x],ot=0;ot<3;ot++){var m=0,P,oe,j,c=Q>>1;oe=We/Q,j=ge;do{var v,ce;v=w[b]*w[b],m+=v,j+=v<oe?v:oe,b++,ce=w[b]*w[b],m+=ce,j+=ce<oe?ce:oe,b++}while(--c>0);if(m>We&&h++,$e==M.SBPSY_s){var ve=We*l.nsPsy.shortfact[$e];j<ve&&(j=ve)}if(u!=0?P=j:P=We,!f.ATHonly&&!f.ATHshort){var Oe=E.en.s[$e][ot];if(Oe>0){var ve;ve=m*E.thm.s[$e][ot]*_/Oe,u!=0&&(ve*=l.nsPsy.shortfact[$e]),P<ve&&(P=ve)}}u!=0?O[k++]=P:O[k++]=P*l.nsPsy.shortfact[$e]}f.useTemporal&&(O[k-3]>O[k-3+1]&&(O[k-3+1]+=(O[k-3]-O[k-3+1])*l.decay),O[k-3+1]>O[k-3+2]&&(O[k-3+2]+=(O[k-3+1]-O[k-3+2])*l.decay))}return h};function D(f){this.s=f}this.calc_noise_core=function(f,E,C,O){var k=0,l=E.s,x=f.l3_enc;if(l>f.count1)for(;C--!=0;){var b;b=f.xr[l],l++,k+=b*b,b=f.xr[l],l++,k+=b*b}else if(l>f.big_values){var h=As(2);for(h[0]=0,h[1]=O;C--!=0;){var b;b=Math.abs(f.xr[l])-h[x[l]],l++,k+=b*b,b=Math.abs(f.xr[l])-h[x[l]],l++,k+=b*b}}else for(;C--!=0;){var b;b=Math.abs(f.xr[l])-$[x[l]]*O,l++,k+=b*b,b=Math.abs(f.xr[l])-$[x[l]]*O,l++,k+=b*b}return E.s=l,k},this.calc_noise=function(f,E,C,O,k){var l=0,x=0,b,h,y=0,w=0,u=0,_=-20,m=0,P=f.scalefac,oe=0;for(O.over_SSD=0,b=0;b<f.psymax;b++){var j=f.global_gain-(P[oe++]+(f.preflag!=0?we[b]:0)<<f.scalefac_scale+1)-f.subblock_gain[f.window[b]]*8,Q=0;if(k!=null&&k.step[b]==j)Q=k.noise[b],m+=f.width[b],C[l++]=Q/E[x++],Q=k.noise_log[b];else{var c=ne(j);if(h=f.width[b]>>1,m+f.width[b]>f.max_nonzero_coeff){var v;v=f.max_nonzero_coeff-m+1,v>0?h=v>>1:h=0}var ce=new D(m);Q=this.calc_noise_core(f,ce,h,c),m=ce.s,k!=null&&(k.step[b]=j,k.noise[b]=Q),Q=C[l++]=Q/E[x++],Q=W0.FAST_LOG10(Math.max(Q,1e-20)),k!=null&&(k.noise_log[b]=Q)}if(k!=null&&(k.global_gain=f.global_gain),u+=Q,Q>0){var ve;ve=Math.max(0|Q*10+.5,1),O.over_SSD+=ve*ve,y++,w+=Q}_=Math.max(_,Q)}return O.over_count=y,O.tot_noise=u,O.over_noise=w,O.max_noise=_,y},this.set_pinfo=function(f,E,C,O,k){var l=f.internal_flags,x,b,h,y,w,u=E.scalefac_scale==0?.5:1,_=E.scalefac,m=As(L3Side.SFBMAX),P=As(L3Side.SFBMAX),oe=new CalcNoiseResult;calc_xmin(f,C,E,m),calc_noise(E,m,P,oe,null);var j=0;for(b=E.sfb_lmax,E.block_type!=M.SHORT_TYPE&&E.mixed_block_flag==0&&(b=22),x=0;x<b;x++){var Q=l.scalefac_band.l[x],c=l.scalefac_band.l[x+1],v=c-Q;for(y=0;j<c;j++)y+=E.xr[j]*E.xr[j];y/=v,w=1e15,l.pinfo.en[O][k][x]=w*y,l.pinfo.xfsf[O][k][x]=w*m[x]*P[x]/v,C.en.l[x]>0&&!f.ATHonly?y=y/C.en.l[x]:y=0,l.pinfo.thr[O][k][x]=w*Math.max(y*C.thm.l[x],l.ATH.l[x]),l.pinfo.LAMEsfb[O][k][x]=0,E.preflag!=0&&x>=11&&(l.pinfo.LAMEsfb[O][k][x]=-u*we[x]),x<M.SBPSY_l&&(ba(_[x]>=0),l.pinfo.LAMEsfb[O][k][x]-=u*_[x])}if(E.block_type==M.SHORT_TYPE)for(b=x,x=E.sfb_smin;x<M.SBMAX_s;x++)for(var Q=l.scalefac_band.s[x],c=l.scalefac_band.s[x+1],v=c-Q,ce=0;ce<3;ce++){for(y=0,h=Q;h<c;h++)y+=E.xr[j]*E.xr[j],j++;y=Math.max(y/v,1e-20),w=1e15,l.pinfo.en_s[O][k][3*x+ce]=w*y,l.pinfo.xfsf_s[O][k][3*x+ce]=w*m[b]*P[b]/v,C.en.s[x][ce]>0?y=y/C.en.s[x][ce]:y=0,(f.ATHonly||f.ATHshort)&&(y=0),l.pinfo.thr_s[O][k][3*x+ce]=w*Math.max(y*C.thm.s[x][ce],l.ATH.s[x]),l.pinfo.LAMEsfb_s[O][k][3*x+ce]=-2*E.subblock_gain[ce],x<M.SBPSY_s&&(l.pinfo.LAMEsfb_s[O][k][3*x+ce]-=u*_[b]),b++}l.pinfo.LAMEqss[O][k]=E.global_gain,l.pinfo.LAMEmainbits[O][k]=E.part2_3_length+E.part2_length,l.pinfo.LAMEsfbits[O][k]=E.part2_length,l.pinfo.over[O][k]=oe.over_count,l.pinfo.max_noise[O][k]=oe.max_noise*10,l.pinfo.over_noise[O][k]=oe.over_noise*10,l.pinfo.tot_noise[O][k]=oe.tot_noise*10,l.pinfo.over_SSD[O][k]=oe.over_SSD}}var es=Xr,Jh=W.System,e_=W.Arrays,ya=W.new_int,G0=W.assert;function z0(){var N=null;this.qupvt=null,this.setModules=function(h){this.qupvt=h,N=h};function te(h){this.bits=0|h}var ue=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function ne(h,y,w,u,_,m){var P=.5946/y;for(h=h>>1;h--!=0;)_[m++]=P>w[u++]?0:1,_[m++]=P>w[u++]?0:1}function ge(h,y,w,u,_,m){h=h>>1;var P=h%2;for(h=h>>1;h--!=0;){var oe,j,Q,c,v,ce,ve,Oe;oe=w[u++]*y,j=w[u++]*y,v=0|oe,Q=w[u++]*y,ce=0|j,c=w[u++]*y,ve=0|Q,oe+=N.adj43[v],Oe=0|c,j+=N.adj43[ce],_[m++]=0|oe,Q+=N.adj43[ve],_[m++]=0|j,c+=N.adj43[Oe],_[m++]=0|Q,_[m++]=0|c}if(P!=0){var oe,j,v,ce;oe=w[u++]*y,j=w[u++]*y,v=0|oe,ce=0|j,oe+=N.adj43[v],j+=N.adj43[ce],_[m++]=0|oe,_[m++]=0|j}}function re(h,y,w,u,_){var m,P,oe=0,j,Q=0,c=0,v=0,ce=y,ve=0,Oe=ce,He=0,Le=h,$e=0;for(j=_!=null&&u.global_gain==_.global_gain,u.block_type==M.SHORT_TYPE?P=38:P=21,m=0;m<=P;m++){var ot=-1;if((j||u.block_type==M.NORM_TYPE)&&(ot=u.global_gain-(u.scalefac[m]+(u.preflag!=0?N.pretab[m]:0)<<u.scalefac_scale+1)-u.subblock_gain[u.window[m]]*8),G0(u.width[m]>=0),j&&_.step[m]==ot)Q!=0&&(ge(Q,w,Le,$e,Oe,He),Q=0),c!=0&&(ne(c,w,Le,$e,Oe,He),c=0);else{var We=u.width[m];if(oe+u.width[m]>u.max_nonzero_coeff){var Fe;Fe=u.max_nonzero_coeff-oe+1,e_.fill(y,u.max_nonzero_coeff,576,0),We=Fe,We<0&&(We=0),m=P+1}if(Q==0&&c==0&&(Oe=ce,He=ve,Le=h,$e=v),_!=null&&_.sfb_count1>0&&m>=_.sfb_count1&&_.step[m]>0&&ot>=_.step[m]?(Q!=0&&(ge(Q,w,Le,$e,Oe,He),Q=0,Oe=ce,He=ve,Le=h,$e=v),c+=We):(c!=0&&(ne(c,w,Le,$e,Oe,He),c=0,Oe=ce,He=ve,Le=h,$e=v),Q+=We),We<=0){c!=0&&(ne(c,w,Le,$e,Oe,He),c=0),Q!=0&&(ge(Q,w,Le,$e,Oe,He),Q=0);break}}m<=P&&(ve+=u.width[m],v+=u.width[m],oe+=u.width[m])}Q!=0&&(ge(Q,w,Le,$e,Oe,He),Q=0),c!=0&&(ne(c,w,Le,$e,Oe,He),c=0)}function de(h,y,w){var u=0,_=0;do{var m=h[y++],P=h[y++];u<m&&(u=m),_<P&&(_=P)}while(y<w);return u<_&&(u=_),u}function Ce(h,y,w,u,_,m){var P=At.ht[u].xlen*65536+At.ht[_].xlen,oe=0,j;do{var Q=h[y++],c=h[y++];Q!=0&&(Q>14&&(Q=15,oe+=P),Q*=16),c!=0&&(c>14&&(c=15,oe+=P),Q+=c),oe+=At.largetbl[Q]}while(y<w);return j=oe&65535,oe>>=16,oe>j&&(oe=j,u=_),m.bits+=oe,u}function Ne(h,y,w,u){var _=0,m=At.ht[1].hlen;do{var P=h[y+0]*2+h[y+1];y+=2,_+=m[P]}while(y<w);return u.bits+=_,1}function U(h,y,w,u,_){var m=0,P,oe=At.ht[u].xlen,j;u==2?j=At.table23:j=At.table56;do{var Q=h[y+0]*oe+h[y+1];y+=2,m+=j[Q]}while(y<w);return P=m&65535,m>>=16,m>P&&(m=P,u++),_.bits+=m,u}function we(h,y,w,u,_){var m=0,P=0,oe=0,j=At.ht[u].xlen,Q=At.ht[u].hlen,c=At.ht[u+1].hlen,v=At.ht[u+2].hlen;do{var ce=h[y+0]*j+h[y+1];y+=2,m+=Q[ce],P+=c[ce],oe+=v[ce]}while(y<w);var ve=u;return m>P&&(m=P,ve++),m>oe&&(m=oe,ve=u+2),_.bits+=m,ve}var B=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function I(h,y,w,u){var _=de(h,y,w);switch(_){case 0:return _;case 1:return Ne(h,y,w,u);case 2:case 3:return U(h,y,w,B[_-1],u);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return we(h,y,w,B[_-1],u);default:if(_>es.IXMAX_VAL)return u.bits=es.LARGE_BITS,-1;_-=15;var m;for(m=24;m<32&&!(At.ht[m].linmax>=_);m++);var P;for(P=m-8;P<24&&!(At.ht[P].linmax>=_);P++);return Ce(h,y,w,P,m,u)}}this.noquant_count_bits=function(h,y,w){var u=y.l3_enc,_=Math.min(576,y.max_nonzero_coeff+2>>1<<1);for(w!=null&&(w.sfb_count1=0);_>1&&!(u[_-1]|u[_-2]);_-=2);y.count1=_;for(var m=0,P=0;_>3;_-=4){var oe;if(((u[_-1]|u[_-2]|u[_-3]|u[_-4])&2147483647)>1)break;oe=((u[_-4]*2+u[_-3])*2+u[_-2])*2+u[_-1],m+=At.t32l[oe],P+=At.t33l[oe]}var j=m;if(y.count1table_select=0,m>P&&(j=P,y.count1table_select=1),y.count1bits=j,y.big_values=_,_==0)return j;if(y.block_type==M.SHORT_TYPE)m=3*h.scalefac_band.s[3],m>y.big_values&&(m=y.big_values),P=y.big_values;else if(y.block_type==M.NORM_TYPE){if(m=y.region0_count=h.bv_scf[_-2],P=y.region1_count=h.bv_scf[_-1],P=h.scalefac_band.l[m+P+2],m=h.scalefac_band.l[m+1],P<_){var Q=new te(j);y.table_select[2]=I(u,P,_,Q),j=Q.bits}}else y.region0_count=7,y.region1_count=M.SBMAX_l-1-7-1,m=h.scalefac_band.l[8],P=_,m>P&&(m=P);if(m=Math.min(m,_),P=Math.min(P,_),0<m){var Q=new te(j);y.table_select[0]=I(u,0,m,Q),j=Q.bits}if(m<P){var Q=new te(j);y.table_select[1]=I(u,m,P,Q),j=Q.bits}if(h.use_best_huffman==2&&(y.part2_3_length=j,best_huffman_divide(h,y),j=y.part2_3_length),w!=null&&y.block_type==M.NORM_TYPE){for(var c=0;h.scalefac_band.l[c]<y.big_values;)c++;w.sfb_count1=c}return j},this.count_bits=function(h,y,w,u){var _=w.l3_enc,m=es.IXMAX_VAL/N.IPOW20(w.global_gain);if(w.xrpow_max>m)return es.LARGE_BITS;if(re(y,_,N.IPOW20(w.global_gain),w,u),h.substep_shaping&2)for(var P=0,oe=w.global_gain+w.scalefac_scale,j=.634521682242439/N.IPOW20(oe),Q=0;Q<w.sfbmax;Q++){var c=w.width[Q];if(h.pseudohalf[Q]==0)P+=c;else{var v;for(v=P,P+=c;v<P;++v)_[v]=y[v]>=j?_[v]:0}}return this.noquant_count_bits(h,w,u)};function $(h,y,w,u,_,m,P){for(var oe=y.big_values,j=0;j<=22;j++)u[j]=es.LARGE_BITS;for(var j=0;j<16;j++){var Q=h.scalefac_band.l[j+1];if(Q>=oe)break;var c=0,v=new te(c),ce=I(w,0,Q,v);c=v.bits;for(var ve=0;ve<8;ve++){var Oe=h.scalefac_band.l[j+ve+2];if(Oe>=oe)break;var He=c;v=new te(He);var Le=I(w,Q,Oe,v);He=v.bits,u[j+ve]>He&&(u[j+ve]=He,_[j+ve]=j,m[j+ve]=ce,P[j+ve]=Le)}}}function i(h,y,w,u,_,m,P,oe){for(var j=y.big_values,Q=2;Q<M.SBMAX_l+1;Q++){var c=h.scalefac_band.l[Q];if(c>=j)break;var v=_[Q-2]+y.count1bits;if(w.part2_3_length<=v)break;var ce=new te(v),ve=I(u,c,j,ce);v=ce.bits,!(w.part2_3_length<=v)&&(w.assign(y),w.part2_3_length=v,w.region0_count=m[Q-2],w.region1_count=Q-2-m[Q-2],w.table_select[0]=P[Q-2],w.table_select[1]=oe[Q-2],w.table_select[2]=ve)}}this.best_huffman_divide=function(h,y){var w=new Rt,u=y.l3_enc,_=ya(23),m=ya(23),P=ya(23),oe=ya(23);if(!(y.block_type==M.SHORT_TYPE&&h.mode_gr==1)){w.assign(y),y.block_type==M.NORM_TYPE&&($(h,y,u,_,m,P,oe),i(h,w,y,u,_,m,P,oe));var j=w.big_values;if(!(j==0||(u[j-2]|u[j-1])>1)&&(j=y.count1+2,!(j>576))){w.assign(y),w.count1=j;for(var Q=0,c=0;j>w.big_values;j-=4){var v=((u[j-4]*2+u[j-3])*2+u[j-2])*2+u[j-1];Q+=At.t32l[v],c+=At.t33l[v]}if(w.big_values=j,w.count1table_select=0,Q>c&&(Q=c,w.count1table_select=1),w.count1bits=Q,w.block_type==M.NORM_TYPE)i(h,w,y,u,_,m,P,oe);else{if(w.part2_3_length=Q,Q=h.scalefac_band.l[8],Q>j&&(Q=j),Q>0){var ce=new te(w.part2_3_length);w.table_select[0]=I(u,0,Q,ce),w.part2_3_length=ce.bits}if(j>Q){var ce=new te(w.part2_3_length);w.table_select[1]=I(u,Q,j,ce),w.part2_3_length=ce.bits}y.part2_3_length>w.part2_3_length&&y.assign(w)}}}};var z=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],G=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],D=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],f=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];z0.slen1_tab=D,z0.slen2_tab=f;function E(h,y){for(var w,u=y.tt[1][h],_=y.tt[0][h],m=0;m<At.scfsi_band.length-1;m++){for(w=At.scfsi_band[m];w<At.scfsi_band[m+1]&&!(_.scalefac[w]!=u.scalefac[w]&&u.scalefac[w]>=0);w++);if(w==At.scfsi_band[m+1]){for(w=At.scfsi_band[m];w<At.scfsi_band[m+1];w++)u.scalefac[w]=-1;y.scfsi[h][m]=1}}var P=0,oe=0;for(w=0;w<11;w++)u.scalefac[w]!=-1&&(oe++,P<u.scalefac[w]&&(P=u.scalefac[w]));for(var j=0,Q=0;w<M.SBPSY_l;w++)u.scalefac[w]!=-1&&(Q++,j<u.scalefac[w]&&(j=u.scalefac[w]));for(var m=0;m<16;m++)if(P<z[m]&&j<G[m]){var c=D[m]*oe+f[m]*Q;u.part2_length>c&&(u.part2_length=c,u.scalefac_compress=m)}}this.best_scalefac_store=function(h,y,w,u){var _=u.tt[y][w],m,P,oe,j,Q=0;for(oe=0,m=0;m<_.sfbmax;m++){var c=_.width[m];for(oe+=c,j=-c;j<0&&_.l3_enc[j+oe]==0;j++);j==0&&(_.scalefac[m]=Q=-2)}if(_.scalefac_scale==0&&_.preflag==0){var v=0;for(m=0;m<_.sfbmax;m++)_.scalefac[m]>0&&(v|=_.scalefac[m]);if(!(v&1)&&v!=0){for(m=0;m<_.sfbmax;m++)_.scalefac[m]>0&&(_.scalefac[m]>>=1);_.scalefac_scale=Q=1}}if(_.preflag==0&&_.block_type!=M.SHORT_TYPE&&h.mode_gr==2){for(m=11;m<M.SBPSY_l&&!(_.scalefac[m]<N.pretab[m]&&_.scalefac[m]!=-2);m++);if(m==M.SBPSY_l){for(m=11;m<M.SBPSY_l;m++)_.scalefac[m]>0&&(_.scalefac[m]-=N.pretab[m]);_.preflag=Q=1}}for(P=0;P<4;P++)u.scfsi[w][P]=0;for(h.mode_gr==2&&y==1&&u.tt[0][w].block_type!=M.SHORT_TYPE&&u.tt[1][w].block_type!=M.SHORT_TYPE&&(E(w,u),Q=0),m=0;m<_.sfbmax;m++)_.scalefac[m]==-2&&(_.scalefac[m]=0);Q!=0&&(h.mode_gr==2?this.scale_bitcount(_):this.scale_bitcount_lsf(h,_))};function C(h,y){for(var w=0;w<y;++w)if(h[w]<0)return!1;return!0}var O=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],k=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],l=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(h){var y,w,u=0,_=0,m,P=h.scalefac;if(G0(C(P,h.sfbmax)),h.block_type==M.SHORT_TYPE)m=O,h.mixed_block_flag!=0&&(m=k);else if(m=l,h.preflag==0){for(w=11;w<M.SBPSY_l&&!(P[w]<N.pretab[w]);w++);if(w==M.SBPSY_l)for(h.preflag=1,w=11;w<M.SBPSY_l;w++)P[w]-=N.pretab[w]}for(w=0;w<h.sfbdivide;w++)u<P[w]&&(u=P[w]);for(;w<h.sfbmax;w++)_<P[w]&&(_=P[w]);for(h.part2_length=es.LARGE_BITS,y=0;y<16;y++)u<z[y]&&_<G[y]&&h.part2_length>m[y]&&(h.part2_length=m[y],h.scalefac_compress=y);return h.part2_length==es.LARGE_BITS};var x=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(h,y){var w,u,_,m,P,oe,j,Q,c=ya(4),v=y.scalefac;for(y.preflag!=0?w=2:w=0,j=0;j<4;j++)c[j]=0;if(y.block_type==M.SHORT_TYPE){u=1;var ce=N.nr_of_sfb_block[w][u];for(Q=0,_=0;_<4;_++)for(m=ce[_]/3,j=0;j<m;j++,Q++)for(P=0;P<3;P++)v[Q*3+P]>c[_]&&(c[_]=v[Q*3+P])}else{u=0;var ce=N.nr_of_sfb_block[w][u];for(Q=0,_=0;_<4;_++)for(m=ce[_],j=0;j<m;j++,Q++)v[Q]>c[_]&&(c[_]=v[Q])}for(oe=!1,_=0;_<4;_++)c[_]>x[w][_]&&(oe=!0);if(!oe){var ve,Oe,He,Le;for(y.sfb_partition_table=N.nr_of_sfb_block[w][u],_=0;_<4;_++)y.slen[_]=b[c[_]];switch(ve=y.slen[0],Oe=y.slen[1],He=y.slen[2],Le=y.slen[3],w){case 0:y.scalefac_compress=(ve*5+Oe<<4)+(He<<2)+Le;break;case 1:y.scalefac_compress=400+(ve*5+Oe<<2)+He;break;case 2:y.scalefac_compress=500+ve*3+Oe;break;default:Jh.err.printf(`intensity stereo not implemented yet
`);break}}if(!oe)for(G0(y.sfb_partition_table!=null),y.part2_length=0,_=0;_<4;_++)y.part2_length+=y.slen[_]*y.sfb_partition_table[_];return oe};var b=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(h){for(var y=2;y<=576;y+=2){for(var w=0,u;h.scalefac_band.l[++w]<y;);for(u=ue[w][0];h.scalefac_band.l[u+1]>y;)u--;for(u<0&&(u=ue[w][0]),h.bv_scf[y-2]=u,u=ue[w][1];h.scalefac_band.l[u+h.bv_scf[y-2]+2]>y;)u--;u<0&&(u=ue[w][1]),h.bv_scf[y-1]=u}}}var Q0=z0,Ar=W.System,t_=W.Arrays,n_=W.new_byte,r_=W.new_float_n,s_=W.new_int,an=W.assert;pi.EQ=function(N,te){return Math.abs(N)>Math.abs(te)?Math.abs(N-te)<=Math.abs(N)*1e-6:Math.abs(N-te)<=Math.abs(te)*1e-6},pi.NEQ=function(N,te){return!pi.EQ(N,te)};function pi(){var N=this,te=32773,ue=null,ne=null,ge=null,re=null;this.setModules=function(x,b,h,y){ue=x,ne=b,ge=h,re=y};var de=null,Ce=0,Ne=0,U=0;this.getframebits=function(x){var b=x.internal_flags,h;b.bitrate_index!=0?h=At.bitrate_table[x.version][b.bitrate_index]:h=x.brate;var y=0|(x.version+1)*72e3*h/x.out_samplerate+b.padding;return 8*y};function we(x){Ar.arraycopy(x.header[x.w_ptr].buf,0,de,Ne,x.sideinfo_len),Ne+=x.sideinfo_len,Ce+=x.sideinfo_len*8,x.w_ptr=x.w_ptr+1&Xt.MAX_HEADER_BUF-1}function B(x,b,h){for(;h>0;){var y;U==0&&(U=8,Ne++,an(x.header[x.w_ptr].write_timing>=Ce),x.header[x.w_ptr].write_timing==Ce&&we(x),de[Ne]=0),y=Math.min(h,U),h-=y,U-=y,de[Ne]|=b>>h<<U,Ce+=y}}function I(x,b,h){for(;h>0;){var y;U==0&&(U=8,Ne++,de[Ne]=0),y=Math.min(h,U),h-=y,U-=y,de[Ne]|=b>>h<<U,Ce+=y}}function $(x,b){var h=x.internal_flags,y;if(b>=8&&(B(h,76,8),b-=8),b>=8&&(B(h,65,8),b-=8),b>=8&&(B(h,77,8),b-=8),b>=8&&(B(h,69,8),b-=8),b>=32){var w=ge.getLameShortVersion();if(b>=32)for(y=0;y<w.length&&b>=8;++y)b-=8,B(h,w.charAt(y),8)}for(;b>=1;b-=1)B(h,h.ancillary_flag,1),h.ancillary_flag^=x.disable_reservoir?0:1}function i(x,b,h){for(var y=x.header[x.h_ptr].ptr;h>0;){var w=Math.min(h,8-(y&7));h-=w,x.header[x.h_ptr].buf[y>>3]|=b>>h<<8-(y&7)-w,y+=w}x.header[x.h_ptr].ptr=y}function z(x,b){x<<=8;for(var h=0;h<8;h++)x<<=1,b<<=1,(b^x)&65536&&(b^=te);return b}this.CRC_writeheader=function(x,b){var h=65535;h=z(b[2]&255,h),h=z(b[3]&255,h);for(var y=6;y<x.sideinfo_len;y++)h=z(b[y]&255,h);b[4]=byte(h>>8),b[5]=byte(h&255)};function G(x,b){var h=x.internal_flags,y,w,u;if(y=h.l3_side,h.header[h.h_ptr].ptr=0,t_.fill(h.header[h.h_ptr].buf,0,h.sideinfo_len,0),x.out_samplerate<16e3?i(h,4094,12):i(h,4095,12),i(h,x.version,1),i(h,1,2),i(h,x.error_protection?0:1,1),i(h,h.bitrate_index,4),i(h,h.samplerate_index,2),i(h,h.padding,1),i(h,x.extension,1),i(h,x.mode.ordinal(),2),i(h,h.mode_ext,2),i(h,x.copyright,1),i(h,x.original,1),i(h,x.emphasis,2),x.error_protection&&i(h,0,16),x.version==1){for(an(y.main_data_begin>=0),i(h,y.main_data_begin,9),h.channels_out==2?i(h,y.private_bits,3):i(h,y.private_bits,5),u=0;u<h.channels_out;u++){var _;for(_=0;_<4;_++)i(h,y.scfsi[u][_],1)}for(w=0;w<2;w++)for(u=0;u<h.channels_out;u++){var m=y.tt[w][u];i(h,m.part2_3_length+m.part2_length,12),i(h,m.big_values/2,9),i(h,m.global_gain,8),i(h,m.scalefac_compress,4),m.block_type!=M.NORM_TYPE?(i(h,1,1),i(h,m.block_type,2),i(h,m.mixed_block_flag,1),m.table_select[0]==14&&(m.table_select[0]=16),i(h,m.table_select[0],5),m.table_select[1]==14&&(m.table_select[1]=16),i(h,m.table_select[1],5),i(h,m.subblock_gain[0],3),i(h,m.subblock_gain[1],3),i(h,m.subblock_gain[2],3)):(i(h,0,1),m.table_select[0]==14&&(m.table_select[0]=16),i(h,m.table_select[0],5),m.table_select[1]==14&&(m.table_select[1]=16),i(h,m.table_select[1],5),m.table_select[2]==14&&(m.table_select[2]=16),i(h,m.table_select[2],5),an(0<=m.region0_count&&m.region0_count<16),an(0<=m.region1_count&&m.region1_count<8),i(h,m.region0_count,4),i(h,m.region1_count,3)),i(h,m.preflag,1),i(h,m.scalefac_scale,1),i(h,m.count1table_select,1)}}else for(an(y.main_data_begin>=0),i(h,y.main_data_begin,8),i(h,y.private_bits,h.channels_out),w=0,u=0;u<h.channels_out;u++){var m=y.tt[w][u];i(h,m.part2_3_length+m.part2_length,12),i(h,m.big_values/2,9),i(h,m.global_gain,8),i(h,m.scalefac_compress,9),m.block_type!=M.NORM_TYPE?(i(h,1,1),i(h,m.block_type,2),i(h,m.mixed_block_flag,1),m.table_select[0]==14&&(m.table_select[0]=16),i(h,m.table_select[0],5),m.table_select[1]==14&&(m.table_select[1]=16),i(h,m.table_select[1],5),i(h,m.subblock_gain[0],3),i(h,m.subblock_gain[1],3),i(h,m.subblock_gain[2],3)):(i(h,0,1),m.table_select[0]==14&&(m.table_select[0]=16),i(h,m.table_select[0],5),m.table_select[1]==14&&(m.table_select[1]=16),i(h,m.table_select[1],5),m.table_select[2]==14&&(m.table_select[2]=16),i(h,m.table_select[2],5),an(0<=m.region0_count&&m.region0_count<16),an(0<=m.region1_count&&m.region1_count<8),i(h,m.region0_count,4),i(h,m.region1_count,3)),i(h,m.scalefac_scale,1),i(h,m.count1table_select,1)}x.error_protection&&CRC_writeheader(h,h.header[h.h_ptr].buf);{var P=h.h_ptr;an(h.header[P].ptr==h.sideinfo_len*8),h.h_ptr=P+1&Xt.MAX_HEADER_BUF-1,h.header[h.h_ptr].write_timing=h.header[P].write_timing+b,h.h_ptr==h.w_ptr&&Ar.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function D(x,b){var h=At.ht[b.count1table_select+32],y,w=0,u=b.big_values,_=b.big_values;for(an(b.count1table_select<2),y=(b.count1-b.big_values)/4;y>0;--y){var m=0,P=0,oe;oe=b.l3_enc[u+0],oe!=0&&(P+=8,b.xr[_+0]<0&&m++),oe=b.l3_enc[u+1],oe!=0&&(P+=4,m*=2,b.xr[_+1]<0&&m++),oe=b.l3_enc[u+2],oe!=0&&(P+=2,m*=2,b.xr[_+2]<0&&m++),oe=b.l3_enc[u+3],oe!=0&&(P++,m*=2,b.xr[_+3]<0&&m++),u+=4,_+=4,B(x,m+h.table[P],h.hlen[P]),w+=h.hlen[P]}return w}function f(x,b,h,y,w){var u=At.ht[b],_=0;if(b==0)return _;for(var m=h;m<y;m+=2){var P=0,oe=0,j=u.xlen,Q=u.xlen,c=0,v=w.l3_enc[m],ce=w.l3_enc[m+1];if(v!=0&&(w.xr[m]<0&&c++,P--),b>15){if(v>14){var ve=v-15;an(ve<=u.linmax),c|=ve<<1,oe=j,v=15}if(ce>14){var Oe=ce-15;an(Oe<=u.linmax),c<<=j,c|=Oe,oe+=j,ce=15}Q=16}ce!=0&&(c<<=1,w.xr[m+1]<0&&c++,P--),v=v*Q+ce,oe-=P,P+=u.hlen[v],B(x,u.table[v],P),B(x,c,oe),_+=P+oe}return _}function E(x,b){var h=3*x.scalefac_band.s[3];h>b.big_values&&(h=b.big_values);var y=f(x,b.table_select[0],0,h,b);return y+=f(x,b.table_select[1],h,b.big_values,b),y}function C(x,b){var h,y,w,u;h=b.big_values;var _=b.region0_count+1;return an(_<x.scalefac_band.l.length),w=x.scalefac_band.l[_],_+=b.region1_count+1,an(_<x.scalefac_band.l.length),u=x.scalefac_band.l[_],w>h&&(w=h),u>h&&(u=h),y=f(x,b.table_select[0],0,w,b),y+=f(x,b.table_select[1],w,u,b),y+=f(x,b.table_select[2],u,h,b),y}function O(x){var b,h,y,w,u=0,_=x.internal_flags,m=_.l3_side;if(x.version==1)for(b=0;b<2;b++)for(h=0;h<_.channels_out;h++){var P=m.tt[b][h],oe=Q0.slen1_tab[P.scalefac_compress],j=Q0.slen2_tab[P.scalefac_compress];for(w=0,y=0;y<P.sfbdivide;y++)P.scalefac[y]!=-1&&(B(_,P.scalefac[y],oe),w+=oe);for(;y<P.sfbmax;y++)P.scalefac[y]!=-1&&(B(_,P.scalefac[y],j),w+=j);an(w==P.part2_length),P.block_type==M.SHORT_TYPE?w+=E(_,P):w+=C(_,P),w+=D(_,P),an(w==P.part2_3_length+P.part2_length),u+=w}else for(b=0,h=0;h<_.channels_out;h++){var P=m.tt[b][h],Q,c,v=0;if(an(P.sfb_partition_table!=null),w=0,y=0,c=0,P.block_type==M.SHORT_TYPE){for(;c<4;c++){var ce=P.sfb_partition_table[c]/3,ve=P.slen[c];for(Q=0;Q<ce;Q++,y++)B(_,Math.max(P.scalefac[y*3+0],0),ve),B(_,Math.max(P.scalefac[y*3+1],0),ve),B(_,Math.max(P.scalefac[y*3+2],0),ve),v+=3*ve}w+=E(_,P)}else{for(;c<4;c++){var ce=P.sfb_partition_table[c],ve=P.slen[c];for(Q=0;Q<ce;Q++,y++)B(_,Math.max(P.scalefac[y],0),ve),v+=ve}w+=C(_,P)}w+=D(_,P),an(w==P.part2_3_length),an(v==P.part2_length),u+=v+w}return u}function k(){this.total=0}function l(x,b){var h=x.internal_flags,y,w,u,_,m;return m=h.w_ptr,_=h.h_ptr-1,_==-1&&(_=Xt.MAX_HEADER_BUF-1),y=h.header[_].write_timing-Ce,b.total=y,y>=0&&(w=1+_-m,_<m&&(w=1+_-m+Xt.MAX_HEADER_BUF),y-=w*8*h.sideinfo_len),u=N.getframebits(x),y+=u,b.total+=u,b.total%8!=0?b.total=1+b.total/8:b.total=b.total/8,b.total+=Ne+1,y<0&&Ar.err.println(`strange error flushing buffer ... 
`),y}this.flush_bitstream=function(x){var b=x.internal_flags,h,y,w=b.h_ptr-1;if(w==-1&&(w=Xt.MAX_HEADER_BUF-1),h=b.l3_side,!((y=l(x,new k))<0)){if($(x,y),an(b.header[w].write_timing+this.getframebits(x)==Ce),b.ResvSize=0,h.main_data_begin=0,b.findReplayGain){var u=ue.GetTitleGain(b.rgdata);an(NEQ(u,ga.GAIN_NOT_ENOUGH_SAMPLES)),b.RadioGain=Math.floor(u*10+.5)|0}b.findPeakSample&&(b.noclipGainChange=Math.ceil(Math.log10(b.PeakSample/32767)*20*10)|0,b.noclipGainChange>0&&(EQ(x.scale,1)||EQ(x.scale,0))?b.noclipScale=Math.floor(32767/b.PeakSample*100)/100:b.noclipScale=-1)}},this.add_dummy_byte=function(x,b,h){for(var y=x.internal_flags,w;h-- >0;)for(I(y,b,8),w=0;w<Xt.MAX_HEADER_BUF;++w)y.header[w].write_timing+=8},this.format_bitstream=function(x){var b=x.internal_flags,h;h=b.l3_side;var y=this.getframebits(x);$(x,h.resvDrain_pre),G(x,y);var w=8*b.sideinfo_len;if(w+=O(x),$(x,h.resvDrain_post),w+=h.resvDrain_post,h.main_data_begin+=(y-w)/8,l(x,new k)!=b.ResvSize&&Ar.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),h.main_data_begin*8!=b.ResvSize&&(Ar.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*h.main_data_begin,b.ResvSize,h.resvDrain_post,h.resvDrain_pre,8*b.sideinfo_len,w-h.resvDrain_post-8*b.sideinfo_len,w,w%8,y),Ar.err.println("This is a fatal error.  It has several possible causes:"),Ar.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),Ar.err.println(" 9%%  Your system is overclocked"),Ar.err.println(" 1%%  bug in LAME encoding library"),b.ResvSize=h.main_data_begin*8),Ce>1e9){var u;for(u=0;u<Xt.MAX_HEADER_BUF;++u)b.header[u].write_timing-=Ce;Ce=0}return 0},this.copy_buffer=function(x,b,h,y,w){var u=Ne+1;if(u<=0)return 0;if(y!=0&&u>y)return-1;if(Ar.arraycopy(de,0,b,h,u),Ne=-1,U=0,w!=0){var _=s_(1);if(_[0]=x.nMusicCRC,re.updateMusicCRC(_,b,h,u),x.nMusicCRC=_[0],u>0&&(x.VBR_seek_table.nBytesWritten+=u),x.decode_on_the_fly){for(var m=r_([2,1152]),P=u,oe=-1,j;oe!=0;)if(oe=ne.hip_decode1_unclipped(x.hip,b,h,P,m[0],m[1]),P=0,oe==-1&&(oe=0),oe>0){if(x.findPeakSample){for(j=0;j<oe;j++)m[0][j]>x.PeakSample?x.PeakSample=m[0][j]:-m[0][j]>x.PeakSample&&(x.PeakSample=-m[0][j]);if(x.channels_out>1)for(j=0;j<oe;j++)m[1][j]>x.PeakSample?x.PeakSample=m[1][j]:-m[1][j]>x.PeakSample&&(x.PeakSample=-m[1][j])}if(x.findReplayGain&&ue.AnalyzeSamples(x.rgdata,m[0],0,m[1],0,oe,x.channels_out)==ga.GAIN_ANALYSIS_ERROR)return-6}}}return u},this.init_bit_stream_w=function(x){de=n_(Lt.LAME_MAXMP3BUFFER),x.h_ptr=x.w_ptr=0,x.header[x.h_ptr].write_timing=0,Ne=-1,U=0,Ce=0}}var ts=pi,a_=W.System,Ft=W.VbrMode,Z0=W.ShortBlock,Es=W.new_float,l1=W.new_int_n,i_=W.new_short_n,ns=W.assert;function ln(){var N=this,te=128*1024;ln.V9=410,ln.V8=420,ln.V7=430,ln.V6=440,ln.V5=450,ln.V4=460,ln.V3=470,ln.V2=480,ln.V1=490,ln.V0=500,ln.R3MIX=1e3,ln.STANDARD=1001,ln.EXTREME=1002,ln.INSANE=1003,ln.STANDARD_FAST=1004,ln.EXTREME_FAST=1005,ln.MEDIUM=1006,ln.MEDIUM_FAST=1007;var ue=16384+te;ln.LAME_MAXMP3BUFFER=ue;var ne,ge,re,de,Ce,Ne=new Ue,U,we,B;this.enc=new M,this.setModules=function(c,v,ce,ve,Oe,He,Le,$e,ot){ne=c,ge=v,re=ce,de=ve,Ce=Oe,U=He,we=$e,B=ot,this.enc.setModules(ge,Ne,de,U)};function I(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=Es(M.SBMAX_l),this.bo_s_weight=Es(M.SBMAX_s)}function $(){this.lowerlimit=0}function i(c,v){this.lowpass=v}var z=4294479419;function G(c){var v;return c.class_id=z,v=c.internal_flags=new Xt,c.mode=on.NOT_SET,c.original=1,c.in_samplerate=44100,c.num_channels=2,c.num_samples=-1,c.bWriteVbrTag=!0,c.quality=-1,c.short_blocks=null,v.subblock_gain=-1,c.lowpassfreq=0,c.highpassfreq=0,c.lowpasswidth=-1,c.highpasswidth=-1,c.VBR=Ft.vbr_off,c.VBR_q=4,c.ATHcurve=-1,c.VBR_mean_bitrate_kbps=128,c.VBR_min_bitrate_kbps=0,c.VBR_max_bitrate_kbps=0,c.VBR_hard_min=0,v.VBR_min_bitrate=1,v.VBR_max_bitrate=13,c.quant_comp=-1,c.quant_comp_short=-1,c.msfix=-1,v.resample_ratio=1,v.OldValue[0]=180,v.OldValue[1]=180,v.CurrentStep[0]=4,v.CurrentStep[1]=4,v.masking_lower=1,v.nsPsy.attackthre=-1,v.nsPsy.attackthre_s=-1,c.scale=-1,c.athaa_type=-1,c.ATHtype=-1,c.athaa_loudapprox=-1,c.athaa_sensitivity=0,c.useTemporal=null,c.interChRatio=-1,v.mf_samples_to_encode=M.ENCDELAY+M.POSTDELAY,c.encoder_padding=0,v.mf_size=M.ENCDELAY-M.MDCTDELAY,c.findReplayGain=!1,c.decode_on_the_fly=!1,v.decode_on_the_fly=!1,v.findReplayGain=!1,v.findPeakSample=!1,v.RadioGain=0,v.AudiophileGain=0,v.noclipGainChange=0,v.noclipScale=-1,c.preset=0,c.write_id3tag_automatic=!0,0}this.lame_init=function(){var c=new ct;return G(c),c.lame_allocated_gfp=1,c};function D(c){return c>1?0:c<=0?1:Math.cos(Math.PI/2*c)}this.nearestBitrateFullIndex=function(c){var v=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],ce=0,ve=0,Oe=0,He=0;He=v[16],Oe=16,ve=v[16],ce=16;for(var Le=0;Le<16;Le++)if(Math.max(c,v[Le+1])!=c){He=v[Le+1],Oe=Le+1,ve=v[Le],ce=Le;break}return He-c>c-ve?ce:Oe};function f(c,v){var ce=44100;return v>=48e3?ce=48e3:v>=44100?ce=44100:v>=32e3?ce=32e3:v>=24e3?ce=24e3:v>=22050?ce=22050:v>=16e3?ce=16e3:v>=12e3?ce=12e3:v>=11025?ce=11025:v>=8e3&&(ce=8e3),c==-1?ce:(c<=15960&&(ce=44100),c<=15250&&(ce=32e3),c<=11220&&(ce=24e3),c<=9970&&(ce=22050),c<=7230&&(ce=16e3),c<=5420&&(ce=12e3),c<=4510&&(ce=11025),c<=3970&&(ce=8e3),v<ce?v>44100?48e3:v>32e3?44100:v>24e3?32e3:v>22050?24e3:v>16e3?22050:v>12e3?16e3:v>11025?12e3:v>8e3?11025:8e3:ce)}function E(c,v){switch(c){case 44100:return v.version=1,0;case 48e3:return v.version=1,1;case 32e3:return v.version=1,2;case 22050:return v.version=0,0;case 24e3:return v.version=0,1;case 16e3:return v.version=0,2;case 11025:return v.version=0,0;case 12e3:return v.version=0,1;case 8e3:return v.version=0,2;default:return v.version=0,-1}}function C(c,v,ce){ce<16e3&&(v=2);for(var ve=At.bitrate_table[v][1],Oe=2;Oe<=14;Oe++)At.bitrate_table[v][Oe]>0&&Math.abs(At.bitrate_table[v][Oe]-c)<Math.abs(ve-c)&&(ve=At.bitrate_table[v][Oe]);return ve}function O(c,v,ce){ce<16e3&&(v=2);for(var ve=0;ve<=14;ve++)if(At.bitrate_table[v][ve]>0&&At.bitrate_table[v][ve]==c)return ve;return-1}function k(c,v){var ce=[new i(8,2e3),new i(16,3700),new i(24,3900),new i(32,5500),new i(40,7e3),new i(48,7500),new i(56,1e4),new i(64,11e3),new i(80,13500),new i(96,15100),new i(112,15600),new i(128,17e3),new i(160,17500),new i(192,18600),new i(224,19400),new i(256,19700),new i(320,20500)],ve=N.nearestBitrateFullIndex(v);c.lowerlimit=ce[ve].lowpass}function l(c){var v=c.internal_flags,ce=32,ve=-1;if(v.lowpass1>0){for(var Oe=999,He=0;He<=31;He++){var Le=He/31;Le>=v.lowpass2&&(ce=Math.min(ce,He)),v.lowpass1<Le&&Le<v.lowpass2&&(Oe=Math.min(Oe,He))}Oe==999?v.lowpass1=(ce-.75)/31:v.lowpass1=(Oe-.75)/31,v.lowpass2=ce/31}if(v.highpass2>0&&v.highpass2<.9*(.75/31)&&(v.highpass1=0,v.highpass2=0,a_.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),v.highpass2>0){for(var $e=-1,He=0;He<=31;He++){var Le=He/31;Le<=v.highpass1&&(ve=Math.max(ve,He)),v.highpass1<Le&&Le<v.highpass2&&($e=Math.max($e,He))}v.highpass1=ve/31,$e==-1?v.highpass2=(ve+.75)/31:v.highpass2=($e+.75)/31}for(var He=0;He<32;He++){var ot,We,Le=He/31;v.highpass2>v.highpass1?ot=D((v.highpass2-Le)/(v.highpass2-v.highpass1+1e-20)):ot=1,v.lowpass2>v.lowpass1?We=D((Le-v.lowpass1)/(v.lowpass2-v.lowpass1+1e-20)):We=1,v.amp_filter[He]=ot*We}}function x(c){var v=c.internal_flags;switch(c.quality){default:case 9:v.psymodel=0,v.noise_shaping=0,v.noise_shaping_amp=0,v.noise_shaping_stop=0,v.use_best_huffman=0,v.full_outer_loop=0;break;case 8:c.quality=7;case 7:v.psymodel=1,v.noise_shaping=0,v.noise_shaping_amp=0,v.noise_shaping_stop=0,v.use_best_huffman=0,v.full_outer_loop=0;break;case 6:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.noise_shaping_amp=0,v.noise_shaping_stop=0,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=0,v.full_outer_loop=0;break;case 5:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.noise_shaping_amp=0,v.noise_shaping_stop=0,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=0,v.full_outer_loop=0;break;case 4:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.noise_shaping_amp=0,v.noise_shaping_stop=0,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=1,v.full_outer_loop=0;break;case 3:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.noise_shaping_amp=1,v.noise_shaping_stop=1,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=1,v.full_outer_loop=0;break;case 2:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.substep_shaping==0&&(v.substep_shaping=2),v.noise_shaping_amp=1,v.noise_shaping_stop=1,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=1,v.full_outer_loop=0;break;case 1:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.substep_shaping==0&&(v.substep_shaping=2),v.noise_shaping_amp=2,v.noise_shaping_stop=1,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=1,v.full_outer_loop=0;break;case 0:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.substep_shaping==0&&(v.substep_shaping=2),v.noise_shaping_amp=2,v.noise_shaping_stop=1,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=1,v.full_outer_loop=0;break}}function b(c){var v=c.internal_flags;c.frameNum=0,c.write_id3tag_automatic&&we.id3tag_write_v2(c),v.bitrate_stereoMode_Hist=l1([16,5]),v.bitrate_blockType_Hist=l1([16,6]),v.PeakSample=0,c.bWriteVbrTag&&U.InitVbrTag(c)}this.lame_init_params=function(c){var v=c.internal_flags;if(v.Class_ID=0,v.ATH==null&&(v.ATH=new Uh),v.PSY==null&&(v.PSY=new I),v.rgdata==null&&(v.rgdata=new Kh),v.channels_in=c.num_channels,v.channels_in==1&&(c.mode=on.MONO),v.channels_out=c.mode==on.MONO?1:2,v.mode_ext=M.MPG_MD_MS_LR,c.mode==on.MONO&&(c.force_ms=!1),c.VBR==Ft.vbr_off&&c.VBR_mean_bitrate_kbps!=128&&c.brate==0&&(c.brate=c.VBR_mean_bitrate_kbps),c.VBR==Ft.vbr_off||c.VBR==Ft.vbr_mtrh||c.VBR==Ft.vbr_mt||(c.free_format=!1),c.VBR==Ft.vbr_off&&c.brate==0&&ts.EQ(c.compression_ratio,0)&&(c.compression_ratio=11.025),c.VBR==Ft.vbr_off&&c.compression_ratio>0&&(c.out_samplerate==0&&(c.out_samplerate=map2MP3Frequency(int(.97*c.in_samplerate))),c.brate=0|c.out_samplerate*16*v.channels_out/(1e3*c.compression_ratio),v.samplerate_index=E(c.out_samplerate,c),c.free_format||(c.brate=C(c.brate,c.version,c.out_samplerate))),c.out_samplerate!=0&&(c.out_samplerate<16e3?(c.VBR_mean_bitrate_kbps=Math.max(c.VBR_mean_bitrate_kbps,8),c.VBR_mean_bitrate_kbps=Math.min(c.VBR_mean_bitrate_kbps,64)):c.out_samplerate<32e3?(c.VBR_mean_bitrate_kbps=Math.max(c.VBR_mean_bitrate_kbps,8),c.VBR_mean_bitrate_kbps=Math.min(c.VBR_mean_bitrate_kbps,160)):(c.VBR_mean_bitrate_kbps=Math.max(c.VBR_mean_bitrate_kbps,32),c.VBR_mean_bitrate_kbps=Math.min(c.VBR_mean_bitrate_kbps,320))),c.lowpassfreq==0){var ce=16e3;switch(c.VBR){case Ft.vbr_off:{var ve=new $;k(ve,c.brate),ce=ve.lowerlimit;break}case Ft.vbr_abr:{var ve=new $;k(ve,c.VBR_mean_bitrate_kbps),ce=ve.lowerlimit;break}case Ft.vbr_rh:{var Oe=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=c.VBR_q&&c.VBR_q<=9){var He=Oe[c.VBR_q],Le=Oe[c.VBR_q+1],$e=c.VBR_q_frac;ce=linear_int(He,Le,$e)}else ce=19500;break}default:{var Oe=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=c.VBR_q&&c.VBR_q<=9){var He=Oe[c.VBR_q],Le=Oe[c.VBR_q+1],$e=c.VBR_q_frac;ce=linear_int(He,Le,$e)}else ce=19500}}c.mode==on.MONO&&(c.VBR==Ft.vbr_off||c.VBR==Ft.vbr_abr)&&(ce*=1.5),c.lowpassfreq=ce|0}if(c.out_samplerate==0&&(2*c.lowpassfreq>c.in_samplerate&&(c.lowpassfreq=c.in_samplerate/2),c.out_samplerate=f(c.lowpassfreq|0,c.in_samplerate)),c.lowpassfreq=Math.min(20500,c.lowpassfreq),c.lowpassfreq=Math.min(c.out_samplerate/2,c.lowpassfreq),c.VBR==Ft.vbr_off&&(c.compression_ratio=c.out_samplerate*16*v.channels_out/(1e3*c.brate)),c.VBR==Ft.vbr_abr&&(c.compression_ratio=c.out_samplerate*16*v.channels_out/(1e3*c.VBR_mean_bitrate_kbps)),c.bWriteVbrTag||(c.findReplayGain=!1,c.decode_on_the_fly=!1,v.findPeakSample=!1),v.findReplayGain=c.findReplayGain,v.decode_on_the_fly=c.decode_on_the_fly,v.decode_on_the_fly&&(v.findPeakSample=!0),v.findReplayGain&&ne.InitGainAnalysis(v.rgdata,c.out_samplerate)==ga.INIT_GAIN_ANALYSIS_ERROR)return c.internal_flags=null,-6;switch(v.decode_on_the_fly&&!c.decode_only&&(v.hip!=null&&B.hip_decode_exit(v.hip),v.hip=B.hip_decode_init()),v.mode_gr=c.out_samplerate<=24e3?1:2,c.framesize=576*v.mode_gr,c.encoder_delay=M.ENCDELAY,v.resample_ratio=c.in_samplerate/c.out_samplerate,c.VBR){case Ft.vbr_mt:case Ft.vbr_rh:case Ft.vbr_mtrh:{var ot=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];c.compression_ratio=ot[c.VBR_q]}break;case Ft.vbr_abr:c.compression_ratio=c.out_samplerate*16*v.channels_out/(1e3*c.VBR_mean_bitrate_kbps);break;default:c.compression_ratio=c.out_samplerate*16*v.channels_out/(1e3*c.brate);break}if(c.mode==on.NOT_SET&&(c.mode=on.JOINT_STEREO),c.highpassfreq>0?(v.highpass1=2*c.highpassfreq,c.highpasswidth>=0?v.highpass2=2*(c.highpassfreq+c.highpasswidth):v.highpass2=1*2*c.highpassfreq,v.highpass1/=c.out_samplerate,v.highpass2/=c.out_samplerate):(v.highpass1=0,v.highpass2=0),c.lowpassfreq>0?(v.lowpass2=2*c.lowpassfreq,c.lowpasswidth>=0?(v.lowpass1=2*(c.lowpassfreq-c.lowpasswidth),v.lowpass1<0&&(v.lowpass1=0)):v.lowpass1=1*2*c.lowpassfreq,v.lowpass1/=c.out_samplerate,v.lowpass2/=c.out_samplerate):(v.lowpass1=0,v.lowpass2=0),l(c),v.samplerate_index=E(c.out_samplerate,c),v.samplerate_index<0)return c.internal_flags=null,-1;if(c.VBR==Ft.vbr_off){if(c.free_format)v.bitrate_index=0;else if(c.brate=C(c.brate,c.version,c.out_samplerate),v.bitrate_index=O(c.brate,c.version,c.out_samplerate),v.bitrate_index<=0)return c.internal_flags=null,-1}else v.bitrate_index=1;c.analysis&&(c.bWriteVbrTag=!1),v.pinfo!=null&&(c.bWriteVbrTag=!1),ge.init_bit_stream_w(v);for(var We=v.samplerate_index+3*c.version+6*(c.out_samplerate<16e3?1:0),Fe=0;Fe<M.SBMAX_l+1;Fe++)v.scalefac_band.l[Fe]=de.sfBandIndex[We].l[Fe];for(var Fe=0;Fe<M.PSFB21+1;Fe++){var Tt=(v.scalefac_band.l[22]-v.scalefac_band.l[21])/M.PSFB21,cn=v.scalefac_band.l[21]+Fe*Tt;v.scalefac_band.psfb21[Fe]=cn}v.scalefac_band.psfb21[M.PSFB21]=576;for(var Fe=0;Fe<M.SBMAX_s+1;Fe++)v.scalefac_band.s[Fe]=de.sfBandIndex[We].s[Fe];for(var Fe=0;Fe<M.PSFB12+1;Fe++){var Tt=(v.scalefac_band.s[13]-v.scalefac_band.s[12])/M.PSFB12,cn=v.scalefac_band.s[12]+Fe*Tt;v.scalefac_band.psfb12[Fe]=cn}v.scalefac_band.psfb12[M.PSFB12]=192,c.version==1?v.sideinfo_len=v.channels_out==1?21:36:v.sideinfo_len=v.channels_out==1?13:21,c.error_protection&&(v.sideinfo_len+=2),b(c),v.Class_ID=z;{var xt;for(xt=0;xt<19;xt++)v.nsPsy.pefirbuf[xt]=700*v.mode_gr*v.channels_out;c.ATHtype==-1&&(c.ATHtype=4)}switch(ns(c.VBR_q<=9),ns(c.VBR_q>=0),c.VBR){case Ft.vbr_mt:c.VBR=Ft.vbr_mtrh;case Ft.vbr_mtrh:{c.useTemporal==null&&(c.useTemporal=!1),re.apply_preset(c,500-c.VBR_q*10,0),c.quality<0&&(c.quality=LAME_DEFAULT_QUALITY),c.quality<5&&(c.quality=0),c.quality>5&&(c.quality=5),v.PSY.mask_adjust=c.maskingadjust,v.PSY.mask_adjust_short=c.maskingadjust_short,c.experimentalY?v.sfb21_extra=!1:v.sfb21_extra=c.out_samplerate>44e3,v.iteration_loop=new VBRNewIterationLoop(Ce);break}case Ft.vbr_rh:{re.apply_preset(c,500-c.VBR_q*10,0),v.PSY.mask_adjust=c.maskingadjust,v.PSY.mask_adjust_short=c.maskingadjust_short,c.experimentalY?v.sfb21_extra=!1:v.sfb21_extra=c.out_samplerate>44e3,c.quality>6&&(c.quality=6),c.quality<0&&(c.quality=LAME_DEFAULT_QUALITY),v.iteration_loop=new VBROldIterationLoop(Ce);break}default:{var Ut;v.sfb21_extra=!1,c.quality<0&&(c.quality=LAME_DEFAULT_QUALITY),Ut=c.VBR,Ut==Ft.vbr_off&&(c.VBR_mean_bitrate_kbps=c.brate),re.apply_preset(c,c.VBR_mean_bitrate_kbps,0),c.VBR=Ut,v.PSY.mask_adjust=c.maskingadjust,v.PSY.mask_adjust_short=c.maskingadjust_short,Ut==Ft.vbr_off?v.iteration_loop=new Qh(Ce):v.iteration_loop=new ABRIterationLoop(Ce);break}}if(ns(c.scale>=0),c.VBR!=Ft.vbr_off){if(v.VBR_min_bitrate=1,v.VBR_max_bitrate=14,c.out_samplerate<16e3&&(v.VBR_max_bitrate=8),c.VBR_min_bitrate_kbps!=0&&(c.VBR_min_bitrate_kbps=C(c.VBR_min_bitrate_kbps,c.version,c.out_samplerate),v.VBR_min_bitrate=O(c.VBR_min_bitrate_kbps,c.version,c.out_samplerate),v.VBR_min_bitrate<0)||c.VBR_max_bitrate_kbps!=0&&(c.VBR_max_bitrate_kbps=C(c.VBR_max_bitrate_kbps,c.version,c.out_samplerate),v.VBR_max_bitrate=O(c.VBR_max_bitrate_kbps,c.version,c.out_samplerate),v.VBR_max_bitrate<0))return-1;c.VBR_min_bitrate_kbps=At.bitrate_table[c.version][v.VBR_min_bitrate],c.VBR_max_bitrate_kbps=At.bitrate_table[c.version][v.VBR_max_bitrate],c.VBR_mean_bitrate_kbps=Math.min(At.bitrate_table[c.version][v.VBR_max_bitrate],c.VBR_mean_bitrate_kbps),c.VBR_mean_bitrate_kbps=Math.max(At.bitrate_table[c.version][v.VBR_min_bitrate],c.VBR_mean_bitrate_kbps)}return c.tune&&(v.PSY.mask_adjust+=c.tune_value_a,v.PSY.mask_adjust_short+=c.tune_value_a),x(c),ns(c.scale>=0),c.athaa_type<0?v.ATH.useAdjust=3:v.ATH.useAdjust=c.athaa_type,v.ATH.aaSensitivityP=Math.pow(10,c.athaa_sensitivity/-10),c.short_blocks==null&&(c.short_blocks=Z0.short_block_allowed),c.short_blocks==Z0.short_block_allowed&&(c.mode==on.JOINT_STEREO||c.mode==on.STEREO)&&(c.short_blocks=Z0.short_block_coupled),c.quant_comp<0&&(c.quant_comp=1),c.quant_comp_short<0&&(c.quant_comp_short=0),c.msfix<0&&(c.msfix=0),c.exp_nspsytune=c.exp_nspsytune|1,c.internal_flags.nsPsy.attackthre<0&&(c.internal_flags.nsPsy.attackthre=Ue.NSATTACKTHRE),c.internal_flags.nsPsy.attackthre_s<0&&(c.internal_flags.nsPsy.attackthre_s=Ue.NSATTACKTHRE_S),ns(c.scale>=0),c.scale<0&&(c.scale=1),c.ATHtype<0&&(c.ATHtype=4),c.ATHcurve<0&&(c.ATHcurve=4),c.athaa_loudapprox<0&&(c.athaa_loudapprox=2),c.interChRatio<0&&(c.interChRatio=0),c.useTemporal==null&&(c.useTemporal=!0),v.slot_lag=v.frac_SpF=0,c.VBR==Ft.vbr_off&&(v.slot_lag=v.frac_SpF=(c.version+1)*72e3*c.brate%c.out_samplerate|0),de.iteration_init(c),Ne.psymodel_init(c),ns(c.scale>=0),0};function h(c,v){(c.in_buffer_0==null||c.in_buffer_nsamples<v)&&(c.in_buffer_0=Es(v),c.in_buffer_1=Es(v),c.in_buffer_nsamples=v)}this.lame_encode_flush=function(c,v,ce,ve){var Oe=c.internal_flags,He=i_([2,1152]),Le=0,$e,ot,We,Fe,Tt=Oe.mf_samples_to_encode-M.POSTDELAY,cn=y(c);if(Oe.mf_samples_to_encode<1)return 0;for($e=0,c.in_samplerate!=c.out_samplerate&&(Tt+=16*c.out_samplerate/c.in_samplerate),We=c.framesize-Tt%c.framesize,We<576&&(We+=c.framesize),c.encoder_padding=We,Fe=(Tt+We)/c.framesize;Fe>0&&Le>=0;){var xt=cn-Oe.mf_size,Ut=c.frameNum;xt*=c.in_samplerate,xt/=c.out_samplerate,xt>1152&&(xt=1152),xt<1&&(xt=1),ot=ve-$e,ve==0&&(ot=0),Le=this.lame_encode_buffer(c,He[0],He[1],xt,v,ce,ot),ce+=Le,$e+=Le,Fe-=Ut!=c.frameNum?1:0}if(Oe.mf_samples_to_encode=0,Le<0||(ot=ve-$e,ve==0&&(ot=0),ge.flush_bitstream(c),Le=ge.copy_buffer(Oe,v,ce,ot,1),Le<0))return Le;if(ce+=Le,$e+=Le,ot=ve-$e,ve==0&&(ot=0),c.write_id3tag_automatic){if(we.id3tag_write_v1(c),Le=ge.copy_buffer(Oe,v,ce,ot,0),Le<0)return Le;$e+=Le}return $e},this.lame_encode_buffer=function(c,v,ce,ve,Oe,He,Le){var $e=c.internal_flags,ot=[null,null];if($e.Class_ID!=z)return-3;if(ve==0)return 0;h($e,ve),ot[0]=$e.in_buffer_0,ot[1]=$e.in_buffer_1;for(var We=0;We<ve;We++)ot[0][We]=v[We],$e.channels_in>1&&(ot[1][We]=ce[We]);return w(c,ot[0],ot[1],ve,Oe,He,Le)};function y(c){var v=M.BLKSIZE+c.framesize-M.FFTOFFSET;return v=Math.max(v,512+c.framesize-32),v}function w(c,v,ce,ve,Oe,He,Le){var $e=c.internal_flags,ot=0,We,Fe,Tt,cn,xt,Ut=[null,null],Yt=[null,null];if($e.Class_ID!=z)return-3;if(ve==0)return 0;if(xt=ge.copy_buffer($e,Oe,He,Le,0),xt<0)return xt;if(He+=xt,ot+=xt,Yt[0]=v,Yt[1]=ce,ts.NEQ(c.scale,0)&&ts.NEQ(c.scale,1))for(Fe=0;Fe<ve;++Fe)Yt[0][Fe]*=c.scale,$e.channels_out==2&&(Yt[1][Fe]*=c.scale);if(ts.NEQ(c.scale_left,0)&&ts.NEQ(c.scale_left,1))for(Fe=0;Fe<ve;++Fe)Yt[0][Fe]*=c.scale_left;if(ts.NEQ(c.scale_right,0)&&ts.NEQ(c.scale_right,1))for(Fe=0;Fe<ve;++Fe)Yt[1][Fe]*=c.scale_right;if(c.num_channels==2&&$e.channels_out==1)for(Fe=0;Fe<ve;++Fe)Yt[0][Fe]=.5*(Yt[0][Fe]+Yt[1][Fe]),Yt[1][Fe]=0;cn=y(c),Ut[0]=$e.mfbuf[0],Ut[1]=$e.mfbuf[1];for(var en=0;ve>0;){var mn=[null,null],Rr=0,lr=0;mn[0]=Yt[0],mn[1]=Yt[1];var $n=new _;if(Q(c,Ut,mn,en,ve,$n),Rr=$n.n_in,lr=$n.n_out,$e.findReplayGain&&!$e.decode_on_the_fly&&ne.AnalyzeSamples($e.rgdata,Ut[0],$e.mf_size,Ut[1],$e.mf_size,lr,$e.channels_out)==ga.GAIN_ANALYSIS_ERROR)return-6;if(ve-=Rr,en+=Rr,$e.channels_out==2,$e.mf_size+=lr,ns($e.mf_size<=Xt.MFSIZE),$e.mf_samples_to_encode<1&&($e.mf_samples_to_encode=M.ENCDELAY+M.POSTDELAY),$e.mf_samples_to_encode+=lr,$e.mf_size>=cn){var hr=Le-ot;if(Le==0&&(hr=0),We=u(c,Ut[0],Ut[1],Oe,He,hr),We<0)return We;for(He+=We,ot+=We,$e.mf_size-=c.framesize,$e.mf_samples_to_encode-=c.framesize,Tt=0;Tt<$e.channels_out;Tt++)for(Fe=0;Fe<$e.mf_size;Fe++)Ut[Tt][Fe]=Ut[Tt][Fe+c.framesize]}}return ot}function u(c,v,ce,ve,Oe,He){var Le=N.enc.lame_encode_mp3_frame(c,v,ce,ve,Oe,He);return c.frameNum++,Le}function _(){this.n_in=0,this.n_out=0}function m(){this.num_used=0}function P(c,v){return v!=0?P(v,c%v):c}function oe(c,v,ce){var ve=Math.PI*v;c/=ce,c<0&&(c=0),c>1&&(c=1);var Oe=c-.5,He=.42-.5*Math.cos(2*c*Math.PI)+.08*Math.cos(4*c*Math.PI);return Math.abs(Oe)<1e-9?ve/Math.PI:He*Math.sin(ce*ve*Oe)/(Math.PI*ce*Oe)}function j(c,v,ce,ve,Oe,He,Le,$e,ot){var We=c.internal_flags,Fe,Tt=0,cn,xt=c.out_samplerate/P(c.out_samplerate,c.in_samplerate);xt>Xt.BPC&&(xt=Xt.BPC);var Ut=Math.abs(We.resample_ratio-Math.floor(.5+We.resample_ratio))<1e-4?1:0,Yt=1/We.resample_ratio;Yt>1&&(Yt=1);var en=31;en%2==0&&--en,en+=Ut;var mn=en+1;if(We.fill_buffer_resample_init==0){for(We.inbuf_old[0]=Es(mn),We.inbuf_old[1]=Es(mn),Fe=0;Fe<=2*xt;++Fe)We.blackfilt[Fe]=Es(mn);for(We.itime[0]=0,We.itime[1]=0,Tt=0;Tt<=2*xt;Tt++){var Rr=0,lr=(Tt-xt)/(2*xt);for(Fe=0;Fe<=en;Fe++)Rr+=We.blackfilt[Tt][Fe]=oe(Fe-lr,Yt,en);for(Fe=0;Fe<=en;Fe++)We.blackfilt[Tt][Fe]/=Rr}We.fill_buffer_resample_init=1}var $n=We.inbuf_old[ot];for(cn=0;cn<ve;cn++){var hr,Rs;if(hr=cn*We.resample_ratio,Tt=0|Math.floor(hr-We.itime[ot]),en+Tt-en/2>=Le)break;var lr=hr-We.itime[ot]-(Tt+.5*(en%2));Rs=0|Math.floor(lr*2*xt+xt+.5);var ss=0;for(Fe=0;Fe<=en;++Fe){var Wn=Fe+Tt-en/2,Ms;Ms=Wn<0?$n[mn+Wn]:Oe[He+Wn],ss+=Ms*We.blackfilt[Rs][Fe]}v[ce+cn]=ss}if($e.num_used=Math.min(Le,en+Tt-en/2),We.itime[ot]+=$e.num_used-cn*We.resample_ratio,$e.num_used>=mn)for(Fe=0;Fe<mn;Fe++)$n[Fe]=Oe[He+$e.num_used+Fe-mn];else{var qr=mn-$e.num_used;for(Fe=0;Fe<qr;++Fe)$n[Fe]=$n[Fe+$e.num_used];for(Tt=0;Fe<mn;++Fe,++Tt)$n[Fe]=Oe[He+Tt];ns(Tt==$e.num_used)}return cn}function Q(c,v,ce,ve,Oe,He){var Le=c.internal_flags;if(Le.resample_ratio<.9999||Le.resample_ratio>1.0001)for(var $e=0;$e<Le.channels_out;$e++){var ot=new m;He.n_out=j(c,v[$e],Le.mf_size,c.framesize,ce[$e],ve,Oe,ot,$e),He.n_in=ot.num_used}else{He.n_out=Math.min(c.framesize,Oe),He.n_in=He.n_out;for(var We=0;We<He.n_out;++We)v[0][Le.mf_size+We]=ce[0][ve+We],Le.channels_out==2&&(v[1][Le.mf_size+We]=ce[1][ve+We])}}}var l_=ln,Er=W.VbrMode;function o_(){function N(U,we,B,I,$,i,z,G,D,f,E,C,O,k,l){this.vbr_q=U,this.quant_comp=we,this.quant_comp_s=B,this.expY=I,this.st_lrm=$,this.st_s=i,this.masking_adj=z,this.masking_adj_short=G,this.ath_lower=D,this.ath_curve=f,this.ath_sensitivity=E,this.interch=C,this.safejoint=O,this.sfb21mod=k,this.msfix=l}function te(U,we,B,I,$,i,z,G,D,f,E,C,O,k){this.quant_comp=we,this.quant_comp_s=B,this.safejoint=I,this.nsmsfix=$,this.st_lrm=i,this.st_s=z,this.nsbass=G,this.scale=D,this.masking_adj=f,this.ath_lower=E,this.ath_curve=C,this.interch=O,this.sfscale=k}var ue;this.setModules=function(U){ue=U};var ne=[new N(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new N(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new N(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new N(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new N(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new N(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new N(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new N(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new N(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new N(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new N(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],ge=[new N(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new N(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new N(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new N(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new N(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new N(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new N(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new N(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new N(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new N(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new N(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function re(U,we,B){var I=U.VBR==Er.vbr_rh?ne:ge,$=U.VBR_q_frac,i=I[we],z=I[we+1],G=i;i.st_lrm=i.st_lrm+$*(z.st_lrm-i.st_lrm),i.st_s=i.st_s+$*(z.st_s-i.st_s),i.masking_adj=i.masking_adj+$*(z.masking_adj-i.masking_adj),i.masking_adj_short=i.masking_adj_short+$*(z.masking_adj_short-i.masking_adj_short),i.ath_lower=i.ath_lower+$*(z.ath_lower-i.ath_lower),i.ath_curve=i.ath_curve+$*(z.ath_curve-i.ath_curve),i.ath_sensitivity=i.ath_sensitivity+$*(z.ath_sensitivity-i.ath_sensitivity),i.interch=i.interch+$*(z.interch-i.interch),i.msfix=i.msfix+$*(z.msfix-i.msfix),Ne(U,G.vbr_q),B!=0?U.quant_comp=G.quant_comp:Math.abs(U.quant_comp- -1)>0||(U.quant_comp=G.quant_comp),B!=0?U.quant_comp_short=G.quant_comp_s:Math.abs(U.quant_comp_short- -1)>0||(U.quant_comp_short=G.quant_comp_s),G.expY!=0&&(U.experimentalY=G.expY!=0),B!=0?U.internal_flags.nsPsy.attackthre=G.st_lrm:Math.abs(U.internal_flags.nsPsy.attackthre- -1)>0||(U.internal_flags.nsPsy.attackthre=G.st_lrm),B!=0?U.internal_flags.nsPsy.attackthre_s=G.st_s:Math.abs(U.internal_flags.nsPsy.attackthre_s- -1)>0||(U.internal_flags.nsPsy.attackthre_s=G.st_s),B!=0?U.maskingadjust=G.masking_adj:Math.abs(U.maskingadjust-0)>0||(U.maskingadjust=G.masking_adj),B!=0?U.maskingadjust_short=G.masking_adj_short:Math.abs(U.maskingadjust_short-0)>0||(U.maskingadjust_short=G.masking_adj_short),B!=0?U.ATHlower=-G.ath_lower/10:Math.abs(-U.ATHlower*10-0)>0||(U.ATHlower=-G.ath_lower/10),B!=0?U.ATHcurve=G.ath_curve:Math.abs(U.ATHcurve- -1)>0||(U.ATHcurve=G.ath_curve),B!=0?U.athaa_sensitivity=G.ath_sensitivity:Math.abs(U.athaa_sensitivity- -1)>0||(U.athaa_sensitivity=G.ath_sensitivity),G.interch>0&&(B!=0?U.interChRatio=G.interch:Math.abs(U.interChRatio- -1)>0||(U.interChRatio=G.interch)),G.safejoint>0&&(U.exp_nspsytune=U.exp_nspsytune|G.safejoint),G.sfb21mod>0&&(U.exp_nspsytune=U.exp_nspsytune|G.sfb21mod<<20),B!=0?U.msfix=G.msfix:Math.abs(U.msfix- -1)>0||(U.msfix=G.msfix),B==0&&(U.VBR_q=we,U.VBR_q_frac=$)}var de=[new te(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new te(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new te(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new te(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new te(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new te(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new te(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new te(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new te(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new te(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new te(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new te(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new te(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new te(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new te(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new te(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new te(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function Ce(U,we,B){var I=we,$=ue.nearestBitrateFullIndex(we);if(U.VBR=Er.vbr_abr,U.VBR_mean_bitrate_kbps=I,U.VBR_mean_bitrate_kbps=Math.min(U.VBR_mean_bitrate_kbps,320),U.VBR_mean_bitrate_kbps=Math.max(U.VBR_mean_bitrate_kbps,8),U.brate=U.VBR_mean_bitrate_kbps,U.VBR_mean_bitrate_kbps>320&&(U.disable_reservoir=!0),de[$].safejoint>0&&(U.exp_nspsytune=U.exp_nspsytune|2),de[$].sfscale>0&&(U.internal_flags.noise_shaping=2),Math.abs(de[$].nsbass)>0){var i=int(de[$].nsbass*4);i<0&&(i+=64),U.exp_nspsytune=U.exp_nspsytune|i<<2}return B!=0?U.quant_comp=de[$].quant_comp:Math.abs(U.quant_comp- -1)>0||(U.quant_comp=de[$].quant_comp),B!=0?U.quant_comp_short=de[$].quant_comp_s:Math.abs(U.quant_comp_short- -1)>0||(U.quant_comp_short=de[$].quant_comp_s),B!=0?U.msfix=de[$].nsmsfix:Math.abs(U.msfix- -1)>0||(U.msfix=de[$].nsmsfix),B!=0?U.internal_flags.nsPsy.attackthre=de[$].st_lrm:Math.abs(U.internal_flags.nsPsy.attackthre- -1)>0||(U.internal_flags.nsPsy.attackthre=de[$].st_lrm),B!=0?U.internal_flags.nsPsy.attackthre_s=de[$].st_s:Math.abs(U.internal_flags.nsPsy.attackthre_s- -1)>0||(U.internal_flags.nsPsy.attackthre_s=de[$].st_s),B!=0?U.scale=de[$].scale:Math.abs(U.scale- -1)>0||(U.scale=de[$].scale),B!=0?U.maskingadjust=de[$].masking_adj:Math.abs(U.maskingadjust-0)>0||(U.maskingadjust=de[$].masking_adj),de[$].masking_adj>0?B!=0?U.maskingadjust_short=de[$].masking_adj*.9:Math.abs(U.maskingadjust_short-0)>0||(U.maskingadjust_short=de[$].masking_adj*.9):B!=0?U.maskingadjust_short=de[$].masking_adj*1.1:Math.abs(U.maskingadjust_short-0)>0||(U.maskingadjust_short=de[$].masking_adj*1.1),B!=0?U.ATHlower=-de[$].ath_lower/10:Math.abs(-U.ATHlower*10-0)>0||(U.ATHlower=-de[$].ath_lower/10),B!=0?U.ATHcurve=de[$].ath_curve:Math.abs(U.ATHcurve- -1)>0||(U.ATHcurve=de[$].ath_curve),B!=0?U.interChRatio=de[$].interch:Math.abs(U.interChRatio- -1)>0||(U.interChRatio=de[$].interch),we}this.apply_preset=function(U,we,B){switch(we){case Lt.R3MIX:{we=Lt.V3,U.VBR=Er.vbr_mtrh;break}case Lt.MEDIUM:{we=Lt.V4,U.VBR=Er.vbr_rh;break}case Lt.MEDIUM_FAST:{we=Lt.V4,U.VBR=Er.vbr_mtrh;break}case Lt.STANDARD:{we=Lt.V2,U.VBR=Er.vbr_rh;break}case Lt.STANDARD_FAST:{we=Lt.V2,U.VBR=Er.vbr_mtrh;break}case Lt.EXTREME:{we=Lt.V0,U.VBR=Er.vbr_rh;break}case Lt.EXTREME_FAST:{we=Lt.V0,U.VBR=Er.vbr_mtrh;break}case Lt.INSANE:return we=320,U.preset=we,Ce(U,we,B),U.VBR=Er.vbr_off,we}switch(U.preset=we,we){case Lt.V9:return re(U,9,B),we;case Lt.V8:return re(U,8,B),we;case Lt.V7:return re(U,7,B),we;case Lt.V6:return re(U,6,B),we;case Lt.V5:return re(U,5,B),we;case Lt.V4:return re(U,4,B),we;case Lt.V3:return re(U,3,B),we;case Lt.V2:return re(U,2,B),we;case Lt.V1:return re(U,1,B),we;case Lt.V0:return re(U,0,B),we}return 8<=we&&we<=320?Ce(U,we,B):(U.preset=0,we)};function Ne(U,we){var B=0;return 0>we&&(B=-1,we=0),9<we&&(B=-1,we=9),U.VBR_q=we,U.VBR_q_frac=0,B}}var c_=o_;function u_(){this.setModules=function(N,te){}}var f_=u_;function h_(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var J0=h_,o1=W.new_float,__=W.new_int;function d_(){this.global_gain=0,this.sfb_count1=0,this.step=__(39),this.noise=o1(39),this.noise_log=o1(39)}var m_=d_,rs=W.System,c1=W.VbrMode,el=W.Util,Xs=W.Arrays,wa=W.new_float,Sa=W.assert;function v_(){var N;this.rv=null;var te;this.qupvt=null;var ue,ne=new f_,ge;this.setModules=function(D,f,E,C){N=D,te=f,this.rv=f,ue=E,this.qupvt=E,ge=C,ne.setModules(ue,ge)},this.ms_convert=function(D,f){for(var E=0;E<576;++E){var C=D.tt[f][0].xr[E],O=D.tt[f][1].xr[E];D.tt[f][0].xr[E]=(C+O)*(el.SQRT2*.5),D.tt[f][1].xr[E]=(C-O)*(el.SQRT2*.5)}};function re(D,f,E,C){C=0;for(var O=0;O<=E;++O){var k=Math.abs(D.xr[O]);C+=k,f[O]=Math.sqrt(k*Math.sqrt(k)),f[O]>D.xrpow_max&&(D.xrpow_max=f[O])}return C}this.init_xrpow=function(D,f,E){var C=0,O=0|f.max_nonzero_coeff;if(f.xrpow_max=0,Xs.fill(E,O,576,0),C=re(f,E,O,C),C>1e-20){var k=0;D.substep_shaping&2&&(k=1);for(var l=0;l<f.psymax;l++)D.pseudohalf[l]=k;return!0}return Xs.fill(f.l3_enc,0,576,0),!1};function de(D,f){var E=D.ATH,C=f.xr;if(f.block_type!=M.SHORT_TYPE)for(var O=!1,k=M.PSFB21-1;k>=0&&!O;k--){var l=D.scalefac_band.psfb21[k],x=D.scalefac_band.psfb21[k+1],b=ue.athAdjust(E.adjust,E.psfb21[k],E.floor);D.nsPsy.longfact[21]>1e-12&&(b*=D.nsPsy.longfact[21]);for(var h=x-1;h>=l;h--)if(Math.abs(C[h])<b)C[h]=0;else{O=!0;break}}else for(var y=0;y<3;y++)for(var O=!1,k=M.PSFB12-1;k>=0&&!O;k--){var l=D.scalefac_band.s[12]*3+(D.scalefac_band.s[13]-D.scalefac_band.s[12])*y+(D.scalefac_band.psfb12[k]-D.scalefac_band.psfb12[0]),x=l+(D.scalefac_band.psfb12[k+1]-D.scalefac_band.psfb12[k]),w=ue.athAdjust(E.adjust,E.psfb12[k],E.floor);D.nsPsy.shortfact[12]>1e-12&&(w*=D.nsPsy.shortfact[12]);for(var h=x-1;h>=l;h--)if(Math.abs(C[h])<w)C[h]=0;else{O=!0;break}}}this.init_outer_loop=function(D,f){f.part2_3_length=0,f.big_values=0,f.count1=0,f.global_gain=210,f.scalefac_compress=0,f.table_select[0]=0,f.table_select[1]=0,f.table_select[2]=0,f.subblock_gain[0]=0,f.subblock_gain[1]=0,f.subblock_gain[2]=0,f.subblock_gain[3]=0,f.region0_count=0,f.region1_count=0,f.preflag=0,f.scalefac_scale=0,f.count1table_select=0,f.part2_length=0,f.sfb_lmax=M.SBPSY_l,f.sfb_smin=M.SBPSY_s,f.psy_lmax=D.sfb21_extra?M.SBMAX_l:M.SBPSY_l,f.psymax=f.psy_lmax,f.sfbmax=f.sfb_lmax,f.sfbdivide=11;for(var E=0;E<M.SBMAX_l;E++)f.width[E]=D.scalefac_band.l[E+1]-D.scalefac_band.l[E],f.window[E]=3;if(f.block_type==M.SHORT_TYPE){var C=wa(576);f.sfb_smin=0,f.sfb_lmax=0,f.mixed_block_flag!=0&&(f.sfb_smin=3,f.sfb_lmax=D.mode_gr*2+4),f.psymax=f.sfb_lmax+3*((D.sfb21_extra?M.SBMAX_s:M.SBPSY_s)-f.sfb_smin),f.sfbmax=f.sfb_lmax+3*(M.SBPSY_s-f.sfb_smin),f.sfbdivide=f.sfbmax-18,f.psy_lmax=f.sfb_lmax;var O=D.scalefac_band.l[f.sfb_lmax];rs.arraycopy(f.xr,0,C,0,576);for(var E=f.sfb_smin;E<M.SBMAX_s;E++)for(var k=D.scalefac_band.s[E],l=D.scalefac_band.s[E+1],x=0;x<3;x++)for(var b=k;b<l;b++)f.xr[O++]=C[3*b+x];for(var h=f.sfb_lmax,E=f.sfb_smin;E<M.SBMAX_s;E++)f.width[h]=f.width[h+1]=f.width[h+2]=D.scalefac_band.s[E+1]-D.scalefac_band.s[E],f.window[h]=0,f.window[h+1]=1,f.window[h+2]=2,h+=3}f.count1bits=0,f.sfb_partition_table=ue.nr_of_sfb_block[0][0],f.slen[0]=0,f.slen[1]=0,f.slen[2]=0,f.slen[3]=0,f.max_nonzero_coeff=575,Xs.fill(f.scalefac,0),de(D,f)};function Ce(D){this.ordinal=D}Ce.BINSEARCH_NONE=new Ce(0),Ce.BINSEARCH_UP=new Ce(1),Ce.BINSEARCH_DOWN=new Ce(2);function Ne(D,f,E,C,O){var k,l=D.CurrentStep[C],x=!1,b=D.OldValue[C],h=Ce.BINSEARCH_NONE;for(f.global_gain=b,E-=f.part2_length;;){var y;if(k=ge.count_bits(D,O,f,null),l==1||k==E)break;k>E?(h==Ce.BINSEARCH_DOWN&&(x=!0),x&&(l/=2),h=Ce.BINSEARCH_UP,y=l):(h==Ce.BINSEARCH_UP&&(x=!0),x&&(l/=2),h=Ce.BINSEARCH_DOWN,y=-l),f.global_gain+=y,f.global_gain<0&&(f.global_gain=0,x=!0),f.global_gain>255&&(f.global_gain=255,x=!0)}for(Sa(f.global_gain>=0),Sa(f.global_gain<256);k>E&&f.global_gain<255;)f.global_gain++,k=ge.count_bits(D,O,f,null);return D.CurrentStep[C]=b-f.global_gain>=4?4:2,D.OldValue[C]=f.global_gain,f.part2_3_length=k,k}this.trancate_smallspectrums=function(D,f,E,C){var O=wa(Ze.SFBMAX);if(!(!(D.substep_shaping&4)&&f.block_type==M.SHORT_TYPE||D.substep_shaping&128)){ue.calc_noise(f,E,O,new J0,null);for(var l=0;l<576;l++){var k=0;f.l3_enc[l]!=0&&(k=Math.abs(f.xr[l])),C[l]=k}var l=0,x=8;f.block_type==M.SHORT_TYPE&&(x=6);do{var b,h,y,w,u=f.width[x];if(l+=u,!(O[x]>=1)&&(Xs.sort(C,l-u,u),!jr.EQ(C[l-1],0))){b=(1-O[x])*E[x],h=0,w=0;do{var _;for(y=1;w+y<u&&!jr.NEQ(C[w+l-u],C[w+l+y-u]);y++);if(_=C[w+l-u]*C[w+l-u]*y,b<_){w!=0&&(h=C[w+l-u-1]);break}b-=_,w+=y}while(w<u);if(!jr.EQ(h,0))do Math.abs(f.xr[l-u])<=h&&(f.l3_enc[l-u]=0);while(--u>0)}}while(++x<f.psymax);f.part2_3_length=ge.noquant_count_bits(D,f,null)}};function U(D){for(var f=0;f<D.sfbmax;f++)if(D.scalefac[f]+D.subblock_gain[D.window[f]]==0)return!1;return!0}function we(D){return el.FAST_LOG10(.368+.632*D*D*D)}function B(D,f){for(var E=1e-37,C=0;C<f.psymax;C++)E+=we(D[C]);return Math.max(1e-20,E)}function I(D,f,E,C,O){var k;switch(D){default:case 9:{f.over_count>0?(k=E.over_SSD<=f.over_SSD,E.over_SSD==f.over_SSD&&(k=E.bits<f.bits)):k=E.max_noise<0&&E.max_noise*10+E.bits<=f.max_noise*10+f.bits;break}case 0:k=E.over_count<f.over_count||E.over_count==f.over_count&&E.over_noise<f.over_noise||E.over_count==f.over_count&&jr.EQ(E.over_noise,f.over_noise)&&E.tot_noise<f.tot_noise;break;case 8:E.max_noise=B(O,C);case 1:k=E.max_noise<f.max_noise;break;case 2:k=E.tot_noise<f.tot_noise;break;case 3:k=E.tot_noise<f.tot_noise&&E.max_noise<f.max_noise;break;case 4:k=E.max_noise<=0&&f.max_noise>.2||E.max_noise<=0&&f.max_noise<0&&f.max_noise>E.max_noise-.2&&E.tot_noise<f.tot_noise||E.max_noise<=0&&f.max_noise>0&&f.max_noise>E.max_noise-.2&&E.tot_noise<f.tot_noise+f.over_noise||E.max_noise>0&&f.max_noise>-.05&&f.max_noise>E.max_noise-.1&&E.tot_noise+E.over_noise<f.tot_noise+f.over_noise||E.max_noise>0&&f.max_noise>-.1&&f.max_noise>E.max_noise-.15&&E.tot_noise+E.over_noise+E.over_noise<f.tot_noise+f.over_noise+f.over_noise;break;case 5:k=E.over_noise<f.over_noise||jr.EQ(E.over_noise,f.over_noise)&&E.tot_noise<f.tot_noise;break;case 6:k=E.over_noise<f.over_noise||jr.EQ(E.over_noise,f.over_noise)&&(E.max_noise<f.max_noise||jr.EQ(E.max_noise,f.max_noise)&&E.tot_noise<=f.tot_noise);break;case 7:k=E.over_count<f.over_count||E.over_noise<f.over_noise;break}return f.over_count==0&&(k=k&&E.bits<f.bits),k}function $(D,f,E,C,O){var k=D.internal_flags,l;f.scalefac_scale==0?l=1.2968395546510096:l=1.6817928305074292;for(var x=0,b=0;b<f.sfbmax;b++)x<E[b]&&(x=E[b]);var h=k.noise_shaping_amp;switch(h==3&&(O?h=2:h=1),h){case 2:break;case 1:x>1?x=Math.pow(x,.5):x*=.95;break;case 0:default:x>1?x=1:x*=.95;break}for(var y=0,b=0;b<f.sfbmax;b++){var w=f.width[b],u;if(y+=w,!(E[b]<x)){if(k.substep_shaping&2&&(k.pseudohalf[b]=k.pseudohalf[b]==0?1:0,k.pseudohalf[b]==0&&k.noise_shaping_amp==2))return;for(f.scalefac[b]++,u=-w;u<0;u++)C[y+u]*=l,C[y+u]>f.xrpow_max&&(f.xrpow_max=C[y+u]);if(k.noise_shaping_amp==2)return}}}function i(D,f){for(var E=1.2968395546510096,C=0,O=0;O<D.sfbmax;O++){var k=D.width[O],l=D.scalefac[O];if(D.preflag!=0&&(l+=ue.pretab[O]),C+=k,l&1){l++;for(var x=-k;x<0;x++)f[C+x]*=E,f[C+x]>D.xrpow_max&&(D.xrpow_max=f[C+x])}D.scalefac[O]=l>>1}D.preflag=0,D.scalefac_scale=1}function z(D,f,E){var C,O=f.scalefac;for(C=0;C<f.sfb_lmax;C++)if(O[C]>=16)return!0;for(var k=0;k<3;k++){var l=0,x=0;for(C=f.sfb_lmax+k;C<f.sfbdivide;C+=3)l<O[C]&&(l=O[C]);for(;C<f.sfbmax;C+=3)x<O[C]&&(x=O[C]);if(!(l<16&&x<8)){if(f.subblock_gain[k]>=7)return!0;f.subblock_gain[k]++;var b=D.scalefac_band.l[f.sfb_lmax];for(C=f.sfb_lmax+k;C<f.sfbmax;C+=3){var h,y=f.width[C],w=O[C];if(w=w-(4>>f.scalefac_scale),w>=0){O[C]=w,b+=y*3;continue}O[C]=0;{var u=210+(w<<f.scalefac_scale+1);h=ue.IPOW20(u)}b+=y*(k+1);for(var _=-y;_<0;_++)E[b+_]*=h,E[b+_]>f.xrpow_max&&(f.xrpow_max=E[b+_]);b+=y*(3-k-1)}{var h=ue.IPOW20(202);b+=f.width[C]*(k+1);for(var _=-f.width[C];_<0;_++)E[b+_]*=h,E[b+_]>f.xrpow_max&&(f.xrpow_max=E[b+_])}}}return!1}function G(D,f,E,C,O){var k=D.internal_flags;$(D,f,E,C,O);var l=U(f);return l?!1:(k.mode_gr==2?l=ge.scale_bitcount(f):l=ge.scale_bitcount_lsf(k,f),l?(k.noise_shaping>1&&(Xs.fill(k.pseudohalf,0),f.scalefac_scale==0?(i(f,C),l=!1):f.block_type==M.SHORT_TYPE&&k.subblock_gain>0&&(l=z(k,f,C)||U(f))),l||(k.mode_gr==2?l=ge.scale_bitcount(f):l=ge.scale_bitcount_lsf(k,f)),!l):!0)}this.outer_loop=function(D,f,E,C,O,k){var l=D.internal_flags,x=new Rt,b=wa(576),h=wa(Ze.SFBMAX),y=new J0,w,u=new m_,_=9999999,m=!1,P=!1,oe=0;if(Ne(l,f,k,O,C),l.noise_shaping==0)return 100;ue.calc_noise(f,E,h,y,u),y.bits=f.part2_3_length,x.assign(f);var j=0;for(rs.arraycopy(C,0,b,0,576);!m;){do{var Q=new J0,c,v=255;if(l.substep_shaping&2?c=20:c=3,l.sfb21_extra&&(h[x.sfbmax]>1||x.block_type==M.SHORT_TYPE&&(h[x.sfbmax+1]>1||h[x.sfbmax+2]>1))||!G(D,x,h,C,P))break;x.scalefac_scale!=0&&(v=254);var ce=k-x.part2_length;if(ce<=0)break;for(;(x.part2_3_length=ge.count_bits(l,C,x,u))>ce&&x.global_gain<=v;)x.global_gain++;if(x.global_gain>v)break;if(y.over_count==0){for(;(x.part2_3_length=ge.count_bits(l,C,x,u))>_&&x.global_gain<=v;)x.global_gain++;if(x.global_gain>v)break}if(ue.calc_noise(x,E,h,Q,u),Q.bits=x.part2_3_length,f.block_type!=M.SHORT_TYPE?w=D.quant_comp:w=D.quant_comp_short,w=I(w,y,Q,x,h)?1:0,w!=0)_=f.part2_3_length,y=Q,f.assign(x),j=0,rs.arraycopy(C,0,b,0,576);else if(l.full_outer_loop==0&&(++j>c&&y.over_count==0||l.noise_shaping_amp==3&&P&&j>30||l.noise_shaping_amp==3&&P&&x.global_gain-oe>15))break}while(x.global_gain+x.scalefac_scale<255);l.noise_shaping_amp==3?P?m=!0:(x.assign(f),rs.arraycopy(b,0,C,0,576),j=0,oe=x.global_gain,P=!0):m=!0}return Sa(f.global_gain+f.scalefac_scale<=255),D.VBR==c1.vbr_rh||D.VBR==c1.vbr_mtrh?rs.arraycopy(b,0,C,0,576):l.substep_shaping&1&&trancate_smallspectrums(l,f,E,C),y.over_count},this.iteration_finish_one=function(D,f,E){var C=D.l3_side,O=C.tt[f][E];ge.best_scalefac_store(D,f,E,C),D.use_best_huffman==1&&ge.best_huffman_divide(D,O),te.ResvAdjust(D,O)},this.VBR_encode_granule=function(D,f,E,C,O,k,l){var x=D.internal_flags,b=new Rt,h=wa(576),y=l,w=l+1,u=(l+k)/2,_,m,P=0,oe=x.sfb21_extra;Sa(y<=LameInternalFlags.MAX_BITS_PER_CHANNEL),Xs.fill(b.l3_enc,0);do u>y-42?x.sfb21_extra=!1:x.sfb21_extra=oe,m=outer_loop(D,f,E,C,O,u),m<=0?(P=1,w=f.part2_3_length,b.assign(f),rs.arraycopy(C,0,h,0,576),l=w-32,_=l-k,u=(l+k)/2):(k=u+32,_=l-k,u=(l+k)/2,P!=0&&(P=2,f.assign(b),rs.arraycopy(h,0,C,0,576)));while(_>12);x.sfb21_extra=oe,P==2&&rs.arraycopy(b.l3_enc,0,f.l3_enc,0,576),Sa(f.part2_3_length<=y)},this.get_framebits=function(D,f){var E=D.internal_flags;E.bitrate_index=E.VBR_min_bitrate;var C=N.getframebits(D);E.bitrate_index=1,C=N.getframebits(D);for(var O=1;O<=E.VBR_max_bitrate;O++){E.bitrate_index=O;var k=new MeanBits(C);f[O]=te.ResvFrameBegin(D,k),C=k.bits}},this.VBR_old_prepare=function(D,f,E,C,O,k,l,x,b){var h=D.internal_flags,y,w=0,u=1,_=0;h.bitrate_index=h.VBR_max_bitrate;var m=te.ResvFrameBegin(D,new MeanBits(0))/h.mode_gr;get_framebits(D,k);for(var P=0;P<h.mode_gr;P++){var oe=ue.on_pe(D,f,x[P],m,P,0);h.mode_ext==M.MPG_MD_MS_LR&&(ms_convert(h.l3_side,P),ue.reduce_side(x[P],E[P],m,oe));for(var j=0;j<h.channels_out;++j){var Q=h.l3_side.tt[P][j];Q.block_type!=M.SHORT_TYPE?(w=1.28/(1+Math.exp(3.5-f[P][j]/300))-.05,y=h.PSY.mask_adjust-w):(w=2.56/(1+Math.exp(3.5-f[P][j]/300))-.14,y=h.PSY.mask_adjust_short-w),h.masking_lower=Math.pow(10,y*.1),init_outer_loop(h,Q),b[P][j]=ue.calc_xmin(D,C[P][j],Q,O[P][j]),b[P][j]!=0&&(u=0),l[P][j]=126,_+=x[P][j]}}for(var P=0;P<h.mode_gr;P++)for(var j=0;j<h.channels_out;j++)_>k[h.VBR_max_bitrate]&&(x[P][j]*=k[h.VBR_max_bitrate],x[P][j]/=_),l[P][j]>x[P][j]&&(l[P][j]=x[P][j]);return u},this.bitpressure_strategy=function(D,f,E,C){for(var O=0;O<D.mode_gr;O++)for(var k=0;k<D.channels_out;k++){for(var l=D.l3_side.tt[O][k],x=f[O][k],b=0,h=0;h<l.psy_lmax;h++)x[b++]*=1+.029*h*h/M.SBMAX_l/M.SBMAX_l;if(l.block_type==M.SHORT_TYPE)for(var h=l.sfb_smin;h<M.SBMAX_s;h++)x[b++]*=1+.029*h*h/M.SBMAX_s/M.SBMAX_s,x[b++]*=1+.029*h*h/M.SBMAX_s/M.SBMAX_s,x[b++]*=1+.029*h*h/M.SBMAX_s/M.SBMAX_s;C[O][k]=0|Math.max(E[O][k],.9*C[O][k])}},this.VBR_new_prepare=function(D,f,E,C,O,k){var l=D.internal_flags,x=1,b=0,h=0,y;if(D.free_format){l.bitrate_index=0;var w=new MeanBits(b);y=te.ResvFrameBegin(D,w),b=w.bits,O[0]=y}else{l.bitrate_index=l.VBR_max_bitrate;var w=new MeanBits(b);te.ResvFrameBegin(D,w),b=w.bits,get_framebits(D,O),y=O[l.VBR_max_bitrate]}for(var u=0;u<l.mode_gr;u++){ue.on_pe(D,f,k[u],b,u,0),l.mode_ext==M.MPG_MD_MS_LR&&ms_convert(l.l3_side,u);for(var _=0;_<l.channels_out;++_){var m=l.l3_side.tt[u][_];l.masking_lower=Math.pow(10,l.PSY.mask_adjust*.1),init_outer_loop(l,m),ue.calc_xmin(D,E[u][_],m,C[u][_])!=0&&(x=0),h+=k[u][_]}}for(var u=0;u<l.mode_gr;u++)for(var _=0;_<l.channels_out;_++)h>y&&(k[u][_]*=y,k[u][_]/=h);return x},this.calc_target_bits=function(D,f,E,C,O,k){var l=D.internal_flags,x=l.l3_side,b,h,y,w,u=0;l.bitrate_index=l.VBR_max_bitrate;var _=new MeanBits(u);for(k[0]=te.ResvFrameBegin(D,_),u=_.bits,l.bitrate_index=1,u=N.getframebits(D)-l.sideinfo_len*8,O[0]=u/(l.mode_gr*l.channels_out),u=D.VBR_mean_bitrate_kbps*D.framesize*1e3,l.substep_shaping&1&&(u*=1.09),u/=D.out_samplerate,u-=l.sideinfo_len*8,u/=l.mode_gr*l.channels_out,b=.93+.07*(11-D.compression_ratio)/(11-5.5),b<.9&&(b=.9),b>1&&(b=1),h=0;h<l.mode_gr;h++){var m=0;for(y=0;y<l.channels_out;y++){if(C[h][y]=int(b*u),f[h][y]>700){var P=int((f[h][y]-700)/1.4),oe=x.tt[h][y];C[h][y]=int(b*u),oe.block_type==M.SHORT_TYPE&&P<u/2&&(P=u/2),P>u*3/2?P=u*3/2:P<0&&(P=0),C[h][y]+=P}C[h][y]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(C[h][y]=LameInternalFlags.MAX_BITS_PER_CHANNEL),m+=C[h][y]}if(m>LameInternalFlags.MAX_BITS_PER_GRANULE)for(y=0;y<l.channels_out;++y)C[h][y]*=LameInternalFlags.MAX_BITS_PER_GRANULE,C[h][y]/=m}if(l.mode_ext==M.MPG_MD_MS_LR)for(h=0;h<l.mode_gr;h++)ue.reduce_side(C[h],E[h],u*l.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(w=0,h=0;h<l.mode_gr;h++)for(y=0;y<l.channels_out;y++)C[h][y]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(C[h][y]=LameInternalFlags.MAX_BITS_PER_CHANNEL),w+=C[h][y];if(w>k[0])for(h=0;h<l.mode_gr;h++)for(y=0;y<l.channels_out;y++)C[h][y]*=k[0],C[h][y]/=w}}var p_=v_,u1=W.assert;function b_(){var N;this.setModules=function(te){N=te},this.ResvFrameBegin=function(te,ue){var ne=te.internal_flags,ge,re=ne.l3_side,de=N.getframebits(te);ue.bits=(de-ne.sideinfo_len*8)/ne.mode_gr;var Ce=8*256*ne.mode_gr-8;te.brate>320?ge=8*int(te.brate*1e3/(te.out_samplerate/1152)/8+.5):(ge=8*1440,te.strict_ISO&&(ge=8*int(32e4/(te.out_samplerate/1152)/8+.5))),ne.ResvMax=ge-de,ne.ResvMax>Ce&&(ne.ResvMax=Ce),(ne.ResvMax<0||te.disable_reservoir)&&(ne.ResvMax=0);var Ne=ue.bits*ne.mode_gr+Math.min(ne.ResvSize,ne.ResvMax);return Ne>ge&&(Ne=ge),u1(ne.ResvMax%8==0),u1(ne.ResvMax>=0),re.resvDrain_pre=0,ne.pinfo!=null&&(ne.pinfo.mean_bits=ue.bits/2,ne.pinfo.resvsize=ne.ResvSize),Ne},this.ResvMaxBits=function(te,ue,ne,ge){var re=te.internal_flags,de,Ce=re.ResvSize,Ne=re.ResvMax;ge!=0&&(Ce+=ue),re.substep_shaping&1&&(Ne*=.9),ne.bits=ue,Ce*10>Ne*9?(de=Ce-Ne*9/10,ne.bits+=de,re.substep_shaping|=128):(de=0,re.substep_shaping&=127,!te.disable_reservoir&&!(re.substep_shaping&1)&&(ne.bits-=.1*ue));var U=Ce<re.ResvMax*6/10?Ce:re.ResvMax*6/10;return U-=de,U<0&&(U=0),U},this.ResvAdjust=function(te,ue){te.ResvSize-=ue.part2_3_length+ue.part2_length},this.ResvFrameEnd=function(te,ue){var ne,ge=te.l3_side;te.ResvSize+=ue*te.mode_gr;var re=0;ge.resvDrain_post=0,ge.resvDrain_pre=0,(ne=te.ResvSize%8)!=0&&(re+=ne),ne=te.ResvSize-re-te.ResvMax,ne>0&&(re+=ne);{var de=Math.min(ge.main_data_begin*8,re)/8;ge.resvDrain_pre+=8*de,re-=8*de,te.ResvSize-=8*de,ge.main_data_begin-=de}ge.resvDrain_post+=re,te.ResvSize-=re}}var y_=b_;function w_(){var N="http://www.mp3dev.org/",te=3,ue=98,ne=4,ge=0,re=93;this.getLameVersion=function(){return te+"."+ue+"."+ne},this.getLameShortVersion=function(){return te+"."+ue+"."+ne},this.getLameVeryShortVersion=function(){return"LAME"+te+"."+ue+"r"},this.getPsyVersion=function(){return ge+"."+re},this.getLameUrl=function(){return N},this.getLameOsBitness=function(){return"32bits"}}var S_=w_,x_=W.System,tl=W.VbrMode,f1=W.ShortBlock,g_=W.Arrays,bi=W.new_byte,A_=W.assert;xa.NUMTOCENTRIES=100,xa.MAXFRAMESIZE=2880;function xa(){var N,te,ue;this.setModules=function(u,_,m){N=u,te=_,ue=m};var ne=1,ge=2,re=4,de=8,Ce=xa.NUMTOCENTRIES,Ne=xa.MAXFRAMESIZE,U=Ce+4+4+4+4+4,we=U+9+1+1+8+1+1+3+1+1+2+4+2+2,B=128,I=64,$=32,i=null,z="Xing",G="Info",D=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function f(u,_){if(u.nVbrNumFrames++,u.sum+=_,u.seen++,!(u.seen<u.want)&&(u.pos<u.size&&(u.bag[u.pos]=u.sum,u.pos++,u.seen=0),u.pos==u.size)){for(var m=1;m<u.size;m+=2)u.bag[m/2]=u.bag[m];u.want*=2,u.pos/=2}}function E(u,_){if(!(u.pos<=0))for(var m=1;m<Ce;++m){var P=m/Ce,oe,j,Q=0|Math.floor(P*u.pos);Q>u.pos-1&&(Q=u.pos-1),oe=u.bag[Q],j=u.sum;var c=0|256*oe/j;c>255&&(c=255),_[m]=255&c}}this.addVbrFrame=function(u){var _=u.internal_flags,m=Tables.bitrate_table[u.version][_.bitrate_index];A_(_.VBR_seek_table.bag!=null),f(_.VBR_seek_table,m)};function C(u,_){var m=u[_+0]&255;return m<<=8,m|=u[_+1]&255,m<<=8,m|=u[_+2]&255,m<<=8,m|=u[_+3]&255,m}function O(u,_,m){u[_+0]=255&(m>>24&255),u[_+1]=255&(m>>16&255),u[_+2]=255&(m>>8&255),u[_+3]=255&(m&255)}function k(u,_,m){u[_+0]=255&(m>>8&255),u[_+1]=255&(m&255)}function l(u,_){return new String(u,_,z.length(),i).equals(z)||new String(u,_,G.length(),i).equals(G)}function x(u,_,m){return 255&(u<<_|m&~(-1<<_))}function b(u,_){var m=u.internal_flags;_[0]=x(_[0],8,255),_[1]=x(_[1],3,7),_[1]=x(_[1],1,u.out_samplerate<16e3?0:1),_[1]=x(_[1],1,u.version),_[1]=x(_[1],2,1),_[1]=x(_[1],1,u.error_protection?0:1),_[2]=x(_[2],4,m.bitrate_index),_[2]=x(_[2],2,m.samplerate_index),_[2]=x(_[2],1,0),_[2]=x(_[2],1,u.extension),_[3]=x(_[3],2,u.mode.ordinal()),_[3]=x(_[3],2,m.mode_ext),_[3]=x(_[3],1,u.copyright),_[3]=x(_[3],1,u.original),_[3]=x(_[3],2,u.emphasis),_[0]=255;var P=255&(_[1]&241),oe;u.version==1?oe=B:u.out_samplerate<16e3?oe=$:oe=I,u.VBR==tl.vbr_off&&(oe=u.brate);var j;u.free_format?j=0:j=255&16*N.BitrateIndex(oe,u.version,u.out_samplerate),u.version==1?(_[1]=255&(P|10),P=255&(_[2]&13),_[2]=255&(j|P)):(_[1]=255&(P|2),P=255&(_[2]&13),_[2]=255&(j|P))}this.getVbrTag=function(u){var _=new VBRTagData,m=0;_.flags=0;var P=u[m+1]>>3&1,oe=u[m+2]>>2&3,j=u[m+3]>>6&3,Q=u[m+2]>>4&15;if(Q=Tables.bitrate_table[P][Q],u[m+1]>>4==14?_.samprate=Tables.samplerate_table[2][oe]:_.samprate=Tables.samplerate_table[P][oe],P!=0?j!=3?m+=36:m+=21:j!=3?m+=21:m+=13,!l(u,m))return null;m+=4,_.hId=P;var c=_.flags=C(u,m);if(m+=4,c&ne&&(_.frames=C(u,m),m+=4),c&ge&&(_.bytes=C(u,m),m+=4),c&re){if(_.toc!=null)for(var v=0;v<Ce;v++)_.toc[v]=u[m+v];m+=Ce}_.vbrScale=-1,c&de&&(_.vbrScale=C(u,m),m+=4),_.headersize=(P+1)*72e3*Q/_.samprate,m+=21;var ce=u[m+0]<<4;ce+=u[m+1]>>4;var ve=(u[m+1]&15)<<8;return ve+=u[m+2]&255,(ce<0||ce>3e3)&&(ce=-1),(ve<0||ve>3e3)&&(ve=-1),_.encDelay=ce,_.encPadding=ve,_},this.InitVbrTag=function(u){var _=u.internal_flags,m;u.version==1?m=B:u.out_samplerate<16e3?m=$:m=I,u.VBR==tl.vbr_off&&(m=u.brate);var P=(u.version+1)*72e3*m/u.out_samplerate,oe=_.sideinfo_len+we;if(_.VBR_seek_table.TotalFrameSize=P,P<oe||P>Ne){u.bWriteVbrTag=!1;return}_.VBR_seek_table.nVbrNumFrames=0,_.VBR_seek_table.nBytesWritten=0,_.VBR_seek_table.sum=0,_.VBR_seek_table.seen=0,_.VBR_seek_table.want=1,_.VBR_seek_table.pos=0,_.VBR_seek_table.bag==null&&(_.VBR_seek_table.bag=new int[400],_.VBR_seek_table.size=400);var j=bi(Ne);b(u,j);for(var Q=_.VBR_seek_table.TotalFrameSize,c=0;c<Q;++c)te.add_dummy_byte(u,j[c]&255,1)};function h(u,_){var m=_^u;return _=_>>8^D[m&255],_}this.updateMusicCRC=function(u,_,m,P){for(var oe=0;oe<P;++oe)u[0]=h(_[m+oe],u[0])};function y(u,_,m,P,oe){var j=u.internal_flags,Q=0,c=u.encoder_delay,v=u.encoder_padding,ce=100-10*u.VBR_q-u.quality,ve=ue.getLameVeryShortVersion(),Oe,He=0,Le,$e=[1,5,3,2,4,0,3],ot=0|(u.lowpassfreq/100+.5>255?255:u.lowpassfreq/100+.5),We=0,Fe=0,Tt=0,cn=u.internal_flags.noise_shaping,xt=0,Ut=0,Yt=0,en=0,mn=0,Rr=(u.exp_nspsytune&1)!=0,lr=(u.exp_nspsytune&2)!=0,$n=!1,hr=!1,Rs=u.internal_flags.nogap_total,ss=u.internal_flags.nogap_current,Wn=u.ATHtype,Ms=0,qr;switch(u.VBR){case vbr_abr:qr=u.VBR_mean_bitrate_kbps;break;case vbr_off:qr=u.brate;break;default:qr=u.VBR_min_bitrate_kbps}switch(u.VBR.ordinal()<$e.length?Oe=$e[u.VBR.ordinal()]:Oe=0,Le=16*He+Oe,j.findReplayGain&&(j.RadioGain>510&&(j.RadioGain=510),j.RadioGain<-510&&(j.RadioGain=-510),Fe=8192,Fe|=3072,j.RadioGain>=0?Fe|=j.RadioGain:(Fe|=512,Fe|=-j.RadioGain)),j.findPeakSample&&(We=Math.abs(0|j.PeakSample/32767*Math.pow(2,23)+.5)),Rs!=-1&&(ss>0&&(hr=!0),ss<Rs-1&&($n=!0)),Ms=Wn+((Rr?1:0)<<4)+((lr?1:0)<<5)+(($n?1:0)<<6)+((hr?1:0)<<7),ce<0&&(ce=0),u.mode){case MONO:xt=0;break;case STEREO:xt=1;break;case DUAL_CHANNEL:xt=2;break;case JOINT_STEREO:u.force_ms?xt=4:xt=3;break;case NOT_SET:default:xt=7;break}u.in_samplerate<=32e3?Yt=0:u.in_samplerate==48e3?Yt=2:u.in_samplerate>48e3?Yt=3:Yt=1,(u.short_blocks==f1.short_block_forced||u.short_blocks==f1.short_block_dispensed||u.lowpassfreq==-1&&u.highpassfreq==-1||u.scale_left<u.scale_right||u.scale_left>u.scale_right||u.disable_reservoir&&u.brate<320||u.noATH||u.ATHonly||Wn==0||u.in_samplerate<=32e3)&&(Ut=1),en=cn+(xt<<2)+(Ut<<5)+(Yt<<6),mn=j.nMusicCRC,O(m,P+Q,ce),Q+=4;for(var Gn=0;Gn<9;Gn++)m[P+Q+Gn]=255&ve.charAt(Gn);Q+=9,m[P+Q]=255&Le,Q++,m[P+Q]=255&ot,Q++,O(m,P+Q,We),Q+=4,k(m,P+Q,Fe),Q+=2,k(m,P+Q,Tt),Q+=2,m[P+Q]=255&Ms,Q++,qr>=255?m[P+Q]=255:m[P+Q]=255&qr,Q++,m[P+Q]=255&c>>4,m[P+Q+1]=255&(c<<4)+(v>>8),m[P+Q+2]=255&v,Q+=3,m[P+Q]=255&en,Q++,m[P+Q++]=0,k(m,P+Q,u.preset),Q+=2,O(m,P+Q,_),Q+=4,k(m,P+Q,mn),Q+=2;for(var js=0;js<Q;js++)oe=h(m[P+js],oe);return k(m,P+Q,oe),Q+=2,Q}function w(u){u.seek(0);var _=bi(10);u.readFully(_);var m;return new String(_,"ISO-8859-1").startsWith("ID3")?m=0:m=((_[6]&127)<<21|(_[7]&127)<<14|(_[8]&127)<<7|_[9]&127)+_.length,m}this.getLameTagFrame=function(u,_){var m=u.internal_flags;if(!u.bWriteVbrTag||m.Class_ID!=Lt.LAME_ID||m.VBR_seek_table.pos<=0)return 0;if(_.length<m.VBR_seek_table.TotalFrameSize)return m.VBR_seek_table.TotalFrameSize;g_.fill(_,0,m.VBR_seek_table.TotalFrameSize,0),b(u,_);var P=bi(Ce);if(u.free_format)for(var oe=1;oe<Ce;++oe)P[oe]=255&255*oe/100;else E(m.VBR_seek_table,P);var j=m.sideinfo_len;u.error_protection&&(j-=2),u.VBR==tl.vbr_off?(_[j++]=255&G.charAt(0),_[j++]=255&G.charAt(1),_[j++]=255&G.charAt(2),_[j++]=255&G.charAt(3)):(_[j++]=255&z.charAt(0),_[j++]=255&z.charAt(1),_[j++]=255&z.charAt(2),_[j++]=255&z.charAt(3)),O(_,j,ne+ge+re+de),j+=4,O(_,j,m.VBR_seek_table.nVbrNumFrames),j+=4;var Q=m.VBR_seek_table.nBytesWritten+m.VBR_seek_table.TotalFrameSize;O(_,j,0|Q),j+=4,x_.arraycopy(P,0,_,j,P.length),j+=P.length,u.error_protection&&te.CRC_writeheader(m,_);for(var c=0,oe=0;oe<j;oe++)c=h(_[oe],c);return j+=y(u,Q,_,j,c),m.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(u,_){var m=u.internal_flags;if(m.VBR_seek_table.pos<=0||(_.seek(_.length()),_.length()==0))return-1;var P=w(_);_.seek(P);var oe=bi(Ne),j=getLameTagFrame(u,oe);return j>oe.length?-1:(j<1||_.write(oe,0,j),0)}}var E_=xa,h1=W.new_byte,R_=W.assert,Lt=l_,M_=c_,ga=Cn,T_=es,B_=p_,C_=Q0,I_=y_,on=je,jr=ts;function O_(){this.setModules=function(N,te){}}function P_(){this.setModules=function(N,te,ue){}}function N_(){}function L_(){this.setModules=function(N,te){}}function k_(N,te,ue){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),N=1,te=44100,ue=128);var ne=new Lt,ge=new O_,re=new ga,de=new jr,Ce=new M_,Ne=new T_,U=new B_,we=new E_,B=new S_,I=new L_,$=new I_,i=new C_,z=new P_,G=new N_;ne.setModules(re,de,Ce,Ne,U,we,B,I,G),de.setModules(re,G,B,we),I.setModules(de,B),Ce.setModules(ne),U.setModules(de,$,Ne,i),Ne.setModules(i,$,ne.enc.psy),$.setModules(de),i.setModules(Ne),we.setModules(ne,de,B),ge.setModules(z,G),z.setModules(B,I,Ce);var D=ne.lame_init();D.num_channels=N,D.in_samplerate=te,D.brate=ue,D.mode=on.STEREO,D.quality=3,D.bWriteVbrTag=!1,D.disable_reservoir=!0,D.write_id3tag_automatic=!1,ne.lame_init_params(D);var f=1152,E=0|1.25*f+7200,C=h1(E);this.encodeBuffer=function(O,k){N==1&&(k=O),R_(O.length==k.length),O.length>f&&(f=O.length,E=0|1.25*f+7200,C=h1(E));var l=ne.lame_encode_buffer(D,O,k,O.length,C,0,E);return new Int8Array(C.subarray(0,l))},this.flush=function(){var O=ne.lame_encode_flush(D,C,0,E);return new Int8Array(C.subarray(0,O))}}function yi(N){return N.charCodeAt(0)<<24|N.charCodeAt(1)<<16|N.charCodeAt(2)<<8|N.charCodeAt(3)}yi("RIFF"),yi("WAVE"),yi("fmt "),yi("data");var F_=k_,_1=function(N,te){if(!(N instanceof te))throw new TypeError("Cannot call a class as a function")},d1=function(){function N(te,ue){for(var ne=0;ne<ue.length;ne++){var ge=ue[ne];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty(te,ge.key,ge)}}return function(te,ue,ne){return ue&&N(te.prototype,ue),ne&&N(te,ne),te}}(),$_=function(){function N(te){_1(this,N),this.config={sampleRate:44100,bitRate:128},Object.assign(this.config,te),this.mp3Encoder=new F_(1,this.config.sampleRate,this.config.bitRate),this.maxSamples=1152,this.samplesMono=null,this.clearBuffer()}return d1(N,[{key:"clearBuffer",value:function(){this.dataBuffer=[]}},{key:"appendToBuffer",value:function(ue){this.dataBuffer.push(new Int8Array(ue))}},{key:"floatTo16BitPCM",value:function(ue,ne){for(var ge=0;ge<ue.length;ge++){var re=Math.max(-1,Math.min(1,ue[ge]));ne[ge]=re<0?re*32768:re*32767}}},{key:"convertBuffer",value:function(ue){var ne=new Float32Array(ue),ge=new Int16Array(ue.length);return this.floatTo16BitPCM(ne,ge),ge}},{key:"encode",value:function(ue){this.samplesMono=this.convertBuffer(ue);for(var ne=this.samplesMono.length,ge=0;ne>=0;ge+=this.maxSamples){var re=this.samplesMono.subarray(ge,ge+this.maxSamples),de=this.mp3Encoder.encodeBuffer(re);this.appendToBuffer(de),ne-=this.maxSamples}}},{key:"finish",value:function(){return this.appendToBuffer(this.mp3Encoder.flush()),this.dataBuffer}}]),N}(),V_=function(){function N(te){_1(this,N),this.config={bitRate:128,startRecordingAt:300,deviceId:null},this.activeStream=null,this.context=null,this.microphone=null,this.processor=null,this.startTime=0,Object.assign(this.config,te)}return d1(N,[{key:"addMicrophoneListener",value:function(ue){var ne=this;this.activeStream=ue,this.timerToStart=setTimeout(function(){delete ne.timerToStart},this.config.startRecordingAt),this.microphone=this.context.createMediaStreamSource(ue),this.processor=this.context.createScriptProcessor(0,1,1),this.processor.onaudioprocess=function(ge){ne.timerToStart||ne.lameEncoder.encode(ge.inputBuffer.getChannelData(0))},this.microphone.connect(this.processor),this.processor.connect(this.context.destination)}},{key:"stop",value:function(){return this.processor&&this.microphone&&(this.microphone.disconnect(),this.processor.disconnect(),this.context&&this.context.state!=="closed"&&this.context.close(),this.processor.onaudioprocess=null,this.activeStream.getAudioTracks().forEach(function(ue){return ue.stop()})),this}},{key:"start",value:function(){var ue=this,ne=window.AudioContext||window.webkitAudioContext;this.context=new ne,this.config.sampleRate=this.context.sampleRate,this.lameEncoder=new $_(this.config);var ge=this.config.deviceId?{deviceId:{exact:this.config.deviceId}}:!0;return new Promise(function(re,de){navigator.mediaDevices.getUserMedia({audio:ge}).then(function(Ce){ue.addMicrophoneListener(Ce),re(Ce)}).catch(function(Ce){de(Ce)})})}},{key:"getMp3",value:function(){var ue=this,ne=this.lameEncoder.finish();return new Promise(function(ge,re){ne.length===0?re(new Error("No buffer to send")):(ge([ne,new Blob(ne,{type:"audio/mp3"})]),ue.lameEncoder.clearBuffer())})}}]),N}();return V_})})(kf);var Nm=kf.exports;const Lm=Pm(Nm),ea="4.68.4";let Mc=!1,Ga,Ff,$f,no,Vf,Hf,Df,Xf,jf;function km(e,t={auto:!1}){if(Mc)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(Ga)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${Ga}'\``);Mc=t.auto,Ga=e.kind,Ff=e.fetch,$f=e.FormData,no=e.File,Vf=e.ReadableStream,Hf=e.getMultipartRequestOptions,Df=e.getDefaultAgent,Xf=e.fileFromPath,jf=e.isFsReadStream}class Fm{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function $m({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,s,a;try{n=fetch,r=Request,s=Response,a=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${t}`)}return{kind:"web",fetch:n,Request:r,Response:s,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(o,d)=>({...d,body:new Fm(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}Ga||km($m(),{auto:!0});class $s{constructor(){this.buffer=[],this.trailingCR=!1}decode(t){let n=this.decodeText(t);if(this.trailingCR&&(n="\r"+n,this.trailingCR=!1),n.endsWith("\r")&&(this.trailingCR=!0,n=n.slice(0,-1)),!n)return[];const r=$s.NEWLINE_CHARS.has(n[n.length-1]||"");let s=n.split($s.NEWLINE_REGEXP);return r&&s.pop(),s.length===1&&!r?(this.buffer.push(s[0]),[]):(this.buffer.length>0&&(s=[this.buffer.join("")+s[0],...s.slice(1)],this.buffer=[]),r||(this.buffer=[s.pop()||""]),s)}decodeText(t){if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new Et(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new Et(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new Et("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const t=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,t}}$s.NEWLINE_CHARS=new Set([`
`,"\r"]);$s.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class Lr{constructor(t,n){this.iterator=t,this.controller=n}static fromSSEResponse(t,n){let r=!1;async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const o of Vm(t,n))if(!a){if(o.data.startsWith("[DONE]")){a=!0;continue}if(o.event===null){let d;try{d=JSON.parse(o.data)}catch(p){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),p}if(d&&d.error)throw new gn(void 0,d.error,void 0,void 0);yield d}else{let d;try{d=JSON.parse(o.data)}catch(p){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),p}if(o.event=="error")throw new gn(void 0,d.error,d.message,void 0);yield{event:o.event,data:d}}}a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||n.abort()}}return new Lr(s,n)}static fromReadableStream(t,n){let r=!1;async function*s(){const o=new $s,d=qf(t);for await(const p of d)for(const A of o.decode(p))yield A;for(const p of o.flush())yield p}async function*a(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const d of s())o||d&&(yield JSON.parse(d));o=!0}catch(d){if(d instanceof Error&&d.name==="AbortError")return;throw d}finally{o||n.abort()}}return new Lr(a,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const o=r.next();t.push(o),n.push(o)}return a.shift()}});return[new Lr(()=>s(t),this.controller),new Lr(()=>s(n),this.controller)]}toReadableStream(){const t=this;let n;const r=new TextEncoder;return new Vf({async start(){n=t[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:o}=await n.next();if(o)return s.close();const d=r.encode(JSON.stringify(a)+`
`);s.enqueue(d)}catch(a){s.error(a)}},async cancel(){var s;await((s=n.return)==null?void 0:s.call(n))}})}}async function*Vm(e,t){if(!e.body)throw t.abort(),new Et("Attempted to iterate over a response with no body");const n=new Xm,r=new $s,s=qf(e.body);for await(const a of Hm(s))for(const o of r.decode(a)){const d=n.decode(o);d&&(yield d)}for(const a of r.flush()){const o=n.decode(a);o&&(yield o)}}async function*Hm(e){let t=new Uint8Array;for await(const n of e){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let s=new Uint8Array(t.length+r.length);s.set(t),s.set(r,t.length),t=s;let a;for(;(a=Dm(t))!==-1;)yield t.slice(0,a),t=t.slice(a)}t.length>0&&(yield t)}function Dm(e){for(let r=0;r<e.length-2;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}class Xm{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,s]=jm(t,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function jm(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}function qf(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const Uf=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function",Yf=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&q0(e),q0=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",qm=e=>Yf(e)||Uf(e)||jf(e);async function Kf(e,t,n){var s;if(e=await e,Yf(e))return e;if(Uf(e)){const a=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const o=q0(a)?[await a.arrayBuffer()]:[a];return new no(o,t,n)}const r=await Um(e);if(t||(t=Km(e)??"unknown_file"),!(n!=null&&n.type)){const a=(s=r[0])==null?void 0:s.type;typeof a=="string"&&(n={...n,type:a})}return new no(r,t,n)}async function Um(e){var n;let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(q0(e))t.push(await e.arrayBuffer());else if(Wm(e))for await(const r of e)t.push(r);else throw new Error(`Unexpected data type: ${typeof e}; constructor: ${(n=e==null?void 0:e.constructor)==null?void 0:n.name}; props: ${Ym(e)}`);return t}function Ym(e){return`[${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}function Km(e){var t;return Bl(e.name)||Bl(e.filename)||((t=Bl(e.path))==null?void 0:t.split(/[\\/]/).pop())}const Bl=e=>{if(typeof e=="string")return e;if(typeof Buffer<"u"&&e instanceof Buffer)return String(e)},Wm=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",Tc=e=>e&&typeof e=="object"&&e.body&&e[Symbol.toStringTag]==="MultipartBody",va=async e=>{const t=await Gm(e.body);return Hf(t,e)},Gm=async e=>{const t=new $f;return await Promise.all(Object.entries(e||{}).map(([n,r])=>ro(t,n,r))),t},ro=async(e,t,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")e.append(t,String(n));else if(qm(n)){const r=await Kf(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>ro(e,t+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>ro(e,`${t}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var ca={},zm=function(e,t,n,r,s){if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n},Qm=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Mi;async function Wf(e){const{response:t}=e;if(e.options.stream)return ua("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):Lr.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const n=t.headers.get("content-type");if((n==null?void 0:n.includes("application/json"))||(n==null?void 0:n.includes("application/vnd.api+json"))){const a=await t.json();return ua("response",t.status,t.url,t.headers,a),Gf(a,t)}const s=await t.text();return ua("response",t.status,t.url,t.headers,s),s}function Gf(e,t){return!e||typeof e!="object"||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}class U0 extends Promise{constructor(t,n=Wf){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=n}_thenUnwrap(t){return new U0(this.responsePromise,async n=>Gf(t(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class Zm{constructor({baseURL:t,maxRetries:n=2,timeout:r=6e5,httpAgent:s,fetch:a}){this.baseURL=t,this.maxRetries=Cl("maxRetries",n),this.timeout=Cl("timeout",r),this.httpAgent=s,this.fetch=a??Ff}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...sv(),...this.authHeaders(t)}}validateHeaders(t,n){}defaultIdempotencyKey(){return`stainless-node-retry-${ov()}`}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(async s=>{const a=s&&q0(s==null?void 0:s.body)?new DataView(await s.body.arrayBuffer()):(s==null?void 0:s.body)instanceof DataView?s.body:(s==null?void 0:s.body)instanceof ArrayBuffer?new DataView(s.body):s&&ArrayBuffer.isView(s==null?void 0:s.body)?new DataView(s.body.buffer):s==null?void 0:s.body;return{method:t,path:n,...s,body:a}}))}getAPIList(t,n,r){return this.requestAPIList(n,{method:"get",path:t,...r})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}else if(ArrayBuffer.isView(t))return t.byteLength.toString();return null}buildRequest(t,{retryCount:n=0}={}){var fe;const{method:r,path:s,query:a,headers:o={}}=t,d=ArrayBuffer.isView(t.body)||t.__binaryRequest&&typeof t.body=="string"?t.body:Tc(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,p=this.calculateContentLength(d),A=this.buildURL(s,a);"timeout"in t&&Cl("timeout",t.timeout);const g=t.timeout??this.timeout,S=t.httpAgent??this.httpAgent??Df(A),H=g+1e3;typeof((fe=S==null?void 0:S.options)==null?void 0:fe.timeout)=="number"&&H>(S.options.timeout??0)&&(S.options.timeout=H),this.idempotencyHeader&&r!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=t.idempotencyKey);const q=this.buildHeaders({options:t,headers:o,contentLength:p,retryCount:n});return{req:{method:r,...d&&{body:d},headers:q,...S&&{agent:S},signal:t.signal??null},url:A,timeout:g}}buildHeaders({options:t,headers:n,contentLength:r,retryCount:s}){const a={};r&&(a["content-length"]=r);const o=this.defaultHeaders(t);return Oc(a,o),Oc(a,n),Tc(t.body)&&Ga!=="node"&&delete a["content-type"],Pc(o,"x-stainless-retry-count")===void 0&&Pc(n,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(s)),this.validateHeaders(a,n),a}async prepareOptions(t){}async prepareRequest(t,{url:n,options:r}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(n=>[...n])):{...t}:{}}makeStatusError(t,n,r,s){return gn.generate(t,n,r,s)}request(t,n=null){return new U0(this.makeRequest(t,n))}async makeRequest(t,n){var S,H;const r=await t,s=r.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(r);const{req:a,url:o,timeout:d}=this.buildRequest(r,{retryCount:s-n});if(await this.prepareRequest(a,{url:o,options:r}),ua("request",o,r,a.headers),(S=r.signal)!=null&&S.aborted)throw new br;const p=new AbortController,A=await this.fetchWithTimeout(o,a,d,p).catch(so);if(A instanceof Error){if((H=r.signal)!=null&&H.aborted)throw new br;if(n)return this.retryRequest(r,n);throw A.name==="AbortError"?new Do:new Y0({cause:A})}const g=ev(A.headers);if(!A.ok){if(n&&this.shouldRetry(A)){const W=`retrying, ${n} attempts remaining`;return ua(`response (error; ${W})`,A.status,o,g),this.retryRequest(r,n,g)}const q=await A.text().catch(W=>so(W).message),he=av(q),fe=he?void 0:q;throw ua(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,A.status,o,g,fe),this.makeStatusError(A.status,he,fe,g)}return{response:A,options:r,controller:p}}requestAPIList(t,n){const r=this.makeRequest(n,null);return new Jm(this,r,t)}buildURL(t,n){const r=lv(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),s=this.defaultQuery();return Qf(s)||(n={...s,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(t){return Object.entries(t).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Et(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,n,r,s){const{signal:a,...o}=n||{};a&&a.addEventListener("abort",()=>s.abort());const d=setTimeout(()=>s.abort(),r);return this.getRequestClient().fetch.call(void 0,t,{signal:s.signal,...o}).finally(()=>{clearTimeout(d)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r){let s;const a=r==null?void 0:r["retry-after-ms"];if(a){const d=parseFloat(a);Number.isNaN(d)||(s=d)}const o=r==null?void 0:r["retry-after"];if(o&&!s){const d=parseFloat(o);Number.isNaN(d)?s=Date.parse(o)-Date.now():s=d*1e3}if(!(s&&0<=s&&s<60*1e3)){const d=t.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,d)}return await fi(s),this.makeRequest(t,n-1)}calculateDefaultRetryTimeoutMillis(t,n){const a=n-t,o=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return o*d*1e3}getUserAgent(){return`${this.constructor.name}/JS ${ea}`}}class zf{constructor(t,n,r,s){Mi.set(this,void 0),zm(this,Mi,t),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new Et("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in t&&typeof n.query=="object")n.query={...n.query,...t.params};else if("url"in t){const r=[...Object.entries(n.query||{}),...t.url.searchParams.entries()];for(const[s,a]of r)t.url.searchParams.set(s,a);n.query=void 0,n.path=t.url.toString()}return await Qm(this,Mi,"f").requestAPIList(this.constructor,n)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(Mi=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const n of t.getPaginatedItems())yield n}}class Jm extends U0{constructor(t,n,r){super(n,async s=>new r(t,s.response,await Wf(s),s.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const n of t)yield n}}const ev=e=>new Proxy(Object.fromEntries(e.entries()),{get(t,n){const r=n.toString();return t[r.toLowerCase()]||t[r]}}),tv={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Un=e=>typeof e=="object"&&e!==null&&!Qf(e)&&Object.keys(e).every(t=>Zf(tv,t)),nv=()=>{var t;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ea,"X-Stainless-OS":Cc(Deno.build.os),"X-Stainless-Arch":Bc(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ea,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ea,"X-Stainless-OS":Cc(process.platform),"X-Stainless-Arch":Bc(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=rv();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ea,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ea,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function rv(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,o=r[3]||0;return{browser:t,version:`${s}.${a}.${o}`}}}return null}const Bc=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",Cc=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let Ic;const sv=()=>Ic??(Ic=nv()),av=e=>{try{return JSON.parse(e)}catch{return}},iv=new RegExp("^(?:[a-z]+:)?//","i"),lv=e=>iv.test(e),fi=e=>new Promise(t=>setTimeout(t,e)),Cl=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Et(`${e} must be an integer`);if(t<0)throw new Et(`${e} must be a positive integer`);return t},so=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},Ti=e=>{var t,n,r,s;if(typeof process<"u")return((t=ca==null?void 0:ca[e])==null?void 0:t.trim())??void 0;if(typeof Deno<"u")return(s=(r=(n=Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,e))==null?void 0:s.trim()};function Qf(e){if(!e)return!0;for(const t in e)return!1;return!0}function Zf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Oc(e,t){for(const n in t){if(!Zf(t,n))continue;const r=n.toLowerCase();if(!r)continue;const s=t[n];s===null?delete e[r]:s!==void 0&&(e[r]=s)}}function ua(e,...t){typeof process<"u"&&(ca==null?void 0:ca.DEBUG)==="true"&&console.log(`OpenAI:DEBUG:${e}`,...t)}const ov=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),cv=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",uv=e=>typeof(e==null?void 0:e.get)=="function",Pc=(e,t)=>{var r;const n=t.toLowerCase();if(uv(e)){const s=((r=t[0])==null?void 0:r.toUpperCase())+t.substring(1).replace(/([^\w])(\w)/g,(a,o,d)=>o+d.toUpperCase());for(const a of[t,n,t.toUpperCase(),s]){const o=e.get(a);if(o)return o}}for(const[s,a]of Object.entries(e))if(s.toLowerCase()===n)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${t} header, using the first entry.`),a[0]):a};function Il(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}class Et extends Error{}class gn extends Et{constructor(t,n,r,s){super(`${gn.makeMessage(t,n,r)}`),this.status=t,this.headers=s,this.request_id=s==null?void 0:s["x-request-id"];const a=n;this.error=a,this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(t,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&s?`${t} ${s}`:t?`${t} status code (no body)`:s||"(no status code or body)"}static generate(t,n,r,s){if(!t)return new Y0({message:r,cause:so(n)});const a=n==null?void 0:n.error;return t===400?new Jf(t,a,r,s):t===401?new eh(t,a,r,s):t===403?new th(t,a,r,s):t===404?new nh(t,a,r,s):t===409?new rh(t,a,r,s):t===422?new sh(t,a,r,s):t===429?new ah(t,a,r,s):t>=500?new ih(t,a,r,s):new gn(t,a,r,s)}}class br extends gn{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0),this.status=void 0}}class Y0 extends gn{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),this.status=void 0,n&&(this.cause=n)}}class Do extends Y0{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Jf extends gn{constructor(){super(...arguments),this.status=400}}class eh extends gn{constructor(){super(...arguments),this.status=401}}class th extends gn{constructor(){super(...arguments),this.status=403}}class nh extends gn{constructor(){super(...arguments),this.status=404}}class rh extends gn{constructor(){super(...arguments),this.status=409}}class sh extends gn{constructor(){super(...arguments),this.status=422}}class ah extends gn{constructor(){super(...arguments),this.status=429}}class ih extends gn{}class lh extends Et{constructor(){super("Could not parse response content as the length limit was reached")}}class oh extends Et{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}const ao="RFC3986",io={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},fv="RFC1738",hv=Array.isArray,Br=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),Ol=1024,_v=(e,t,n,r,s)=>{if(e.length===0)return e;let a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});let o="";for(let d=0;d<a.length;d+=Ol){const p=a.length>=Ol?a.slice(d,d+Ol):a,A=[];for(let g=0;g<p.length;++g){let S=p.charCodeAt(g);if(S===45||S===46||S===95||S===126||S>=48&&S<=57||S>=65&&S<=90||S>=97&&S<=122||s===fv&&(S===40||S===41)){A[A.length]=p.charAt(g);continue}if(S<128){A[A.length]=Br[S];continue}if(S<2048){A[A.length]=Br[192|S>>6]+Br[128|S&63];continue}if(S<55296||S>=57344){A[A.length]=Br[224|S>>12]+Br[128|S>>6&63]+Br[128|S&63];continue}g+=1,S=65536+((S&1023)<<10|p.charCodeAt(g)&1023),A[A.length]=Br[240|S>>18]+Br[128|S>>12&63]+Br[128|S>>6&63]+Br[128|S&63]}o+=A.join("")}return o};function dv(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function Nc(e,t){if(hv(e)){const n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}const mv=Object.prototype.hasOwnProperty,ch={brackets(e){return String(e)+"[]"},comma:"comma",indices(e,t){return String(e)+"["+t+"]"},repeat(e){return String(e)}},Or=Array.isArray,vv=Array.prototype.push,uh=function(e,t){vv.apply(e,Or(t)?t:[t])},pv=Date.prototype.toISOString,hn={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:_v,encodeValuesOnly:!1,format:ao,formatter:io[ao],indices:!1,serializeDate(e){return pv.call(e)},skipNulls:!1,strictNullHandling:!1};function bv(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"}const Pl={};function fh(e,t,n,r,s,a,o,d,p,A,g,S,H,q,he,fe,ye,Se){let W=e,Ie=Se,me=0,Qe=!1;for(;(Ie=Ie.get(Pl))!==void 0&&!Qe;){const ut=Ie.get(e);if(me+=1,typeof ut<"u"){if(ut===me)throw new RangeError("Cyclic object value");Qe=!0}typeof Ie.get(Pl)>"u"&&(me=0)}if(typeof A=="function"?W=A(t,W):W instanceof Date?W=H==null?void 0:H(W):n==="comma"&&Or(W)&&(W=Nc(W,function(ut){return ut instanceof Date?H==null?void 0:H(ut):ut})),W===null){if(a)return p&&!fe?p(t,hn.encoder,ye,"key",q):t;W=""}if(bv(W)||dv(W)){if(p){const ut=fe?t:p(t,hn.encoder,ye,"key",q);return[(he==null?void 0:he(ut))+"="+(he==null?void 0:he(p(W,hn.encoder,ye,"value",q)))]}return[(he==null?void 0:he(t))+"="+(he==null?void 0:he(String(W)))]}const at=[];if(typeof W>"u")return at;let ze;if(n==="comma"&&Or(W))fe&&p&&(W=Nc(W,p)),ze=[{value:W.length>0?W.join(",")||null:void 0}];else if(Or(A))ze=A;else{const ut=Object.keys(W);ze=g?ut.sort(g):ut}const nt=d?String(t).replace(/\./g,"%2E"):String(t),Je=r&&Or(W)&&W.length===1?nt+"[]":nt;if(s&&Or(W)&&W.length===0)return Je+"[]";for(let ut=0;ut<ze.length;++ut){const ht=ze[ut],jt=typeof ht=="object"&&typeof ht.value<"u"?ht.value:W[ht];if(o&&jt===null)continue;const Dt=S&&d?ht.replace(/\./g,"%2E"):ht,Yn=Or(W)?typeof n=="function"?n(Je,Dt):Je:Je+(S?"."+Dt:"["+Dt+"]");Se.set(e,me);const An=new WeakMap;An.set(Pl,Se),uh(at,fh(jt,Yn,n,r,s,a,o,d,n==="comma"&&fe&&Or(W)?null:p,A,g,S,H,q,he,fe,ye,An))}return at}function yv(e=hn){if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");const t=e.charset||hn.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=ao;if(typeof e.format<"u"){if(!mv.call(io,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const r=io[n];let s=hn.filter;(typeof e.filter=="function"||Or(e.filter))&&(s=e.filter);let a;if(e.arrayFormat&&e.arrayFormat in ch?a=e.arrayFormat:"indices"in e?a=e.indices?"indices":"repeat":a=hn.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof e.allowDots>"u"?e.encodeDotInKeys?!0:hn.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:hn.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:hn.allowEmptyArrays,arrayFormat:a,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:hn.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?hn.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:hn.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:hn.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:hn.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:hn.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:hn.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:hn.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:hn.strictNullHandling}}function wv(e,t={}){let n=e;const r=yv(t);let s,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):Or(r.filter)&&(a=r.filter,s=a);const o=[];if(typeof n!="object"||n===null)return"";const d=ch[r.arrayFormat],p=d==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const A=new WeakMap;for(let H=0;H<s.length;++H){const q=s[H];r.skipNulls&&n[q]===null||uh(o,fh(n[q],q,d,p,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,A))}const g=o.join(r.delimiter);let S=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?S+="utf8=%26%2310003%3B&":S+="utf8=%E2%9C%93&"),g.length>0?S+g:""}class Xo extends zf{constructor(t,n,r,s){super(t,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class xr extends zf{constructor(t,n,r,s){super(t,n,r,s),this.data=r.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const n=Object.fromEntries(t.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var r;const t=this.getPaginatedItems();if(!t.length)return null;const n=(r=t[t.length-1])==null?void 0:r.id;return n?{params:{after:n}}:null}}class Pt{constructor(t){this._client=t}}let zi=class extends Pt{create(t,n){return this._client.post("/chat/completions",{body:t,...n,stream:t.stream??!1})}};zi||(zi={});let Qi=class extends Pt{constructor(){super(...arguments),this.completions=new zi(this._client)}};(function(e){e.Completions=zi})(Qi||(Qi={}));class Zi extends Pt{create(t,n){return this._client.post("/audio/speech",{body:t,...n,__binaryResponse:!0})}}Zi||(Zi={});class Ji extends Pt{create(t,n){return this._client.post("/audio/transcriptions",va({body:t,...n}))}}Ji||(Ji={});class e0 extends Pt{create(t,n){return this._client.post("/audio/translations",va({body:t,...n}))}}e0||(e0={});let t0=class extends Pt{constructor(){super(...arguments),this.transcriptions=new Ji(this._client),this.translations=new e0(this._client),this.speech=new Zi(this._client)}};(function(e){e.Transcriptions=Ji,e.Translations=e0,e.Speech=Zi})(t0||(t0={}));class n0 extends Pt{create(t,n){return this._client.post("/batches",{body:t,...n})}retrieve(t,n){return this._client.get(`/batches/${t}`,n)}list(t={},n){return Un(t)?this.list({},t):this._client.getAPIList("/batches",jo,{query:t,...n})}cancel(t,n){return this._client.post(`/batches/${t}/cancel`,n)}}class jo extends xr{}(function(e){e.BatchesPage=jo})(n0||(n0={}));class r0 extends Pt{create(t,n){return this._client.post("/assistants",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/assistants/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/assistants/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(t={},n){return Un(t)?this.list({},t):this._client.getAPIList("/assistants",qo,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(t,n){return this._client.delete(`/assistants/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class qo extends xr{}(function(e){e.AssistantsPage=qo})(r0||(r0={}));function Lc(e){return typeof e.parse=="function"}const fa=e=>(e==null?void 0:e.role)==="assistant",hh=e=>(e==null?void 0:e.role)==="function",_h=e=>(e==null?void 0:e.role)==="tool";var mr=function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},Qt=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},lo,ki,Fi,Oa,Pa,$i,Na,Gr,La,s0,a0,ta,dh;class mh{constructor(){lo.add(this),this.controller=new AbortController,ki.set(this,void 0),Fi.set(this,()=>{}),Oa.set(this,()=>{}),Pa.set(this,void 0),$i.set(this,()=>{}),Na.set(this,()=>{}),Gr.set(this,{}),La.set(this,!1),s0.set(this,!1),a0.set(this,!1),ta.set(this,!1),mr(this,ki,new Promise((t,n)=>{mr(this,Fi,t,"f"),mr(this,Oa,n,"f")}),"f"),mr(this,Pa,new Promise((t,n)=>{mr(this,$i,t,"f"),mr(this,Na,n,"f")}),"f"),Qt(this,ki,"f").catch(()=>{}),Qt(this,Pa,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},Qt(this,lo,"m",dh).bind(this))},0)}_connected(){this.ended||(Qt(this,Fi,"f").call(this),this._emit("connect"))}get ended(){return Qt(this,La,"f")}get errored(){return Qt(this,s0,"f")}get aborted(){return Qt(this,a0,"f")}abort(){this.controller.abort()}on(t,n){return(Qt(this,Gr,"f")[t]||(Qt(this,Gr,"f")[t]=[])).push({listener:n}),this}off(t,n){const r=Qt(this,Gr,"f")[t];if(!r)return this;const s=r.findIndex(a=>a.listener===n);return s>=0&&r.splice(s,1),this}once(t,n){return(Qt(this,Gr,"f")[t]||(Qt(this,Gr,"f")[t]=[])).push({listener:n,once:!0}),this}emitted(t){return new Promise((n,r)=>{mr(this,ta,!0,"f"),t!=="error"&&this.once("error",r),this.once(t,n)})}async done(){mr(this,ta,!0,"f"),await Qt(this,Pa,"f")}_emit(t,...n){if(Qt(this,La,"f"))return;t==="end"&&(mr(this,La,!0,"f"),Qt(this,$i,"f").call(this));const r=Qt(this,Gr,"f")[t];if(r&&(Qt(this,Gr,"f")[t]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),t==="abort"){const s=n[0];!Qt(this,ta,"f")&&!(r!=null&&r.length)&&Promise.reject(s),Qt(this,Oa,"f").call(this,s),Qt(this,Na,"f").call(this,s),this._emit("end");return}if(t==="error"){const s=n[0];!Qt(this,ta,"f")&&!(r!=null&&r.length)&&Promise.reject(s),Qt(this,Oa,"f").call(this,s),Qt(this,Na,"f").call(this,s),this._emit("end")}}_emitFinal(){}}ki=new WeakMap,Fi=new WeakMap,Oa=new WeakMap,Pa=new WeakMap,$i=new WeakMap,Na=new WeakMap,Gr=new WeakMap,La=new WeakMap,s0=new WeakMap,a0=new WeakMap,ta=new WeakMap,lo=new WeakSet,dh=function(t){if(mr(this,s0,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new br),t instanceof br)return mr(this,a0,!0,"f"),this._emit("abort",t);if(t instanceof Et)return this._emit("error",t);if(t instanceof Error){const n=new Et(t.message);return n.cause=t,this._emit("error",n)}return this._emit("error",new Et(String(t)))};function vh(e){return(e==null?void 0:e.$brand)==="auto-parseable-response-format"}function hi(e){return(e==null?void 0:e.$brand)==="auto-parseable-tool"}function Sv(e,t){return!t||!ph(t)?{...e,choices:e.choices.map(n=>({...n,message:{...n.message,parsed:null,tool_calls:n.message.tool_calls??[]}}))}:Uo(e,t)}function Uo(e,t){const n=e.choices.map(r=>{var s;if(r.finish_reason==="length")throw new lh;if(r.finish_reason==="content_filter")throw new oh;return{...r,message:{...r.message,tool_calls:((s=r.message.tool_calls)==null?void 0:s.map(a=>gv(t,a)))??[],parsed:r.message.content&&!r.message.refusal?xv(t,r.message.content):null}}});return{...e,choices:n}}function xv(e,t){var n,r;return((n=e.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=e.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function gv(e,t){var r;const n=(r=e.tools)==null?void 0:r.find(s=>{var a;return((a=s.function)==null?void 0:a.name)===t.function.name});return{...t,function:{...t.function,parsed_arguments:hi(n)?n.$parseRaw(t.function.arguments):n!=null&&n.function.strict?JSON.parse(t.function.arguments):null}}}function Av(e,t){var r;if(!e)return!1;const n=(r=e.tools)==null?void 0:r.find(s=>{var a;return((a=s.function)==null?void 0:a.name)===t.function.name});return hi(n)||(n==null?void 0:n.function.strict)||!1}function ph(e){var t;return vh(e.response_format)?!0:((t=e.tools)==null?void 0:t.some(n=>hi(n)||n.type==="function"&&n.function.strict===!0))??!1}function Ev(e){for(const t of e??[]){if(t.type!=="function")throw new Et(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(t.function.strict!==!0)throw new Et(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Dn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Mn,oo,i0,co,uo,fo,bh,ho;const kc=10;class yh extends mh{constructor(){super(...arguments),Mn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(t){var r;this._chatCompletions.push(t),this._emit("chatCompletion",t);const n=(r=t.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),t}_addMessage(t,n=!0){if("content"in t||(t.content=null),this.messages.push(t),n){if(this._emit("message",t),(hh(t)||_h(t))&&t.content)this._emit("functionCallResult",t.content);else if(fa(t)&&t.function_call)this._emit("functionCall",t.function_call);else if(fa(t)&&t.tool_calls)for(const r of t.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new Et("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),Dn(this,Mn,"m",oo).call(this)}async finalMessage(){return await this.done(),Dn(this,Mn,"m",i0).call(this)}async finalFunctionCall(){return await this.done(),Dn(this,Mn,"m",co).call(this)}async finalFunctionCallResult(){return await this.done(),Dn(this,Mn,"m",uo).call(this)}async totalUsage(){return await this.done(),Dn(this,Mn,"m",fo).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const n=Dn(this,Mn,"m",i0).call(this);n&&this._emit("finalMessage",n);const r=Dn(this,Mn,"m",oo).call(this);r&&this._emit("finalContent",r);const s=Dn(this,Mn,"m",co).call(this);s&&this._emit("finalFunctionCall",s);const a=Dn(this,Mn,"m",uo).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",Dn(this,Mn,"m",fo).call(this))}async _createChatCompletion(t,n,r){const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),Dn(this,Mn,"m",bh).call(this,n);const a=await t.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Uo(a,n))}async _runChatCompletion(t,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(t,n,r)}async _runFunctions(t,n,r){var H;const s="function",{function_call:a="auto",stream:o,...d}=n,p=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:A=kc}=r||{},g={};for(const q of n.functions)g[q.name||q.function.name]=q;const S=n.functions.map(q=>({name:q.name||q.function.name,parameters:q.parameters,description:q.description}));for(const q of n.messages)this._addMessage(q,!1);for(let q=0;q<A;++q){const fe=(H=(await this._createChatCompletion(t,{...d,function_call:a,functions:S,messages:[...this.messages]},r)).choices[0])==null?void 0:H.message;if(!fe)throw new Et("missing message in ChatCompletion response");if(!fe.function_call)return;const{name:ye,arguments:Se}=fe.function_call,W=g[ye];if(W){if(p&&p!==ye){const at=`Invalid function_call: ${JSON.stringify(ye)}. ${JSON.stringify(p)} requested. Please try again`;this._addMessage({role:s,name:ye,content:at});continue}}else{const at=`Invalid function_call: ${JSON.stringify(ye)}. Available options are: ${S.map(ze=>JSON.stringify(ze.name)).join(", ")}. Please try again`;this._addMessage({role:s,name:ye,content:at});continue}let Ie;try{Ie=Lc(W)?await W.parse(Se):Se}catch(at){this._addMessage({role:s,name:ye,content:at instanceof Error?at.message:String(at)});continue}const me=await W.function(Ie,this),Qe=Dn(this,Mn,"m",ho).call(this,me);if(this._addMessage({role:s,name:ye,content:Qe}),p)return}}async _runTools(t,n,r){var q,he,fe;const s="tool",{tool_choice:a="auto",stream:o,...d}=n,p=typeof a!="string"&&((q=a==null?void 0:a.function)==null?void 0:q.name),{maxChatCompletions:A=kc}=r||{},g=n.tools.map(ye=>{if(hi(ye)){if(!ye.$callback)throw new Et("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:ye.$callback,name:ye.function.name,description:ye.function.description||"",parameters:ye.function.parameters,parse:ye.$parseRaw,strict:!0}}}return ye}),S={};for(const ye of g)ye.type==="function"&&(S[ye.function.name||ye.function.function.name]=ye.function);const H="tools"in n?g.map(ye=>ye.type==="function"?{type:"function",function:{name:ye.function.name||ye.function.function.name,parameters:ye.function.parameters,description:ye.function.description,strict:ye.function.strict}}:ye):void 0;for(const ye of n.messages)this._addMessage(ye,!1);for(let ye=0;ye<A;++ye){const W=(he=(await this._createChatCompletion(t,{...d,tool_choice:a,tools:H,messages:[...this.messages]},r)).choices[0])==null?void 0:he.message;if(!W)throw new Et("missing message in ChatCompletion response");if(!((fe=W.tool_calls)!=null&&fe.length))return;for(const Ie of W.tool_calls){if(Ie.type!=="function")continue;const me=Ie.id,{name:Qe,arguments:at}=Ie.function,ze=S[Qe];if(ze){if(p&&p!==Qe){const ht=`Invalid tool_call: ${JSON.stringify(Qe)}. ${JSON.stringify(p)} requested. Please try again`;this._addMessage({role:s,tool_call_id:me,content:ht});continue}}else{const ht=`Invalid tool_call: ${JSON.stringify(Qe)}. Available options are: ${Object.keys(S).map(jt=>JSON.stringify(jt)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:me,content:ht});continue}let nt;try{nt=Lc(ze)?await ze.parse(at):at}catch(ht){const jt=ht instanceof Error?ht.message:String(ht);this._addMessage({role:s,tool_call_id:me,content:jt});continue}const Je=await ze.function(nt,this),ut=Dn(this,Mn,"m",ho).call(this,Je);if(this._addMessage({role:s,tool_call_id:me,content:ut}),p)return}}}}Mn=new WeakSet,oo=function(){return Dn(this,Mn,"m",i0).call(this).content??null},i0=function(){let t=this.messages.length;for(;t-- >0;){const n=this.messages[t];if(fa(n)){const{function_call:r,...s}=n,a={...s,content:n.content??null,refusal:n.refusal??null};return r&&(a.function_call=r),a}}throw new Et("stream ended without producing a ChatCompletionMessage with role=assistant")},co=function(){var t,n;for(let r=this.messages.length-1;r>=0;r--){const s=this.messages[r];if(fa(s)&&(s!=null&&s.function_call))return s.function_call;if(fa(s)&&((t=s==null?void 0:s.tool_calls)!=null&&t.length))return(n=s.tool_calls.at(-1))==null?void 0:n.function}},uo=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(hh(n)&&n.content!=null||_h(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var s;return r.role==="assistant"&&((s=r.tool_calls)==null?void 0:s.some(a=>a.type==="function"&&a.id===n.tool_call_id))}))return n.content}},fo=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(t.completion_tokens+=n.completion_tokens,t.prompt_tokens+=n.prompt_tokens,t.total_tokens+=n.total_tokens);return t},bh=function(t){if(t.n!=null&&t.n>1)throw new Et("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},ho=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class ii extends yh{static runFunctions(t,n,r){const s=new ii,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(t,n,a)),s}static runTools(t,n,r){const s=new ii,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(t,n,a)),s}_addMessage(t,n=!0){super._addMessage(t,n),fa(t)&&t.content&&this._emit("content",t.content)}}const wh=1,Sh=2,xh=4,gh=8,Ah=16,Eh=32,Rh=64,Mh=128,Th=256,Bh=Mh|Th,Ch=Ah|Eh|Bh|Rh,Ih=wh|Sh|Ch,Oh=xh|gh,Rv=Ih|Oh,pn={STR:wh,NUM:Sh,ARR:xh,OBJ:gh,NULL:Ah,BOOL:Eh,NAN:Rh,INFINITY:Mh,MINUS_INFINITY:Th,INF:Bh,SPECIAL:Ch,ATOM:Ih,COLLECTION:Oh,ALL:Rv};class Mv extends Error{}class Tv extends Error{}function Bv(e,t=pn.ALL){if(typeof e!="string")throw new TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw new Error(`${e} is empty`);return Cv(e.trim(),t)}const Cv=(e,t)=>{const n=e.length;let r=0;const s=H=>{throw new Mv(`${H} at position ${r}`)},a=H=>{throw new Tv(`${H} at position ${r}`)},o=()=>(S(),r>=n&&s("Unexpected end of input"),e[r]==='"'?d():e[r]==="{"?p():e[r]==="["?A():e.substring(r,r+4)==="null"||pn.NULL&t&&n-r<4&&"null".startsWith(e.substring(r))?(r+=4,null):e.substring(r,r+4)==="true"||pn.BOOL&t&&n-r<4&&"true".startsWith(e.substring(r))?(r+=4,!0):e.substring(r,r+5)==="false"||pn.BOOL&t&&n-r<5&&"false".startsWith(e.substring(r))?(r+=5,!1):e.substring(r,r+8)==="Infinity"||pn.INFINITY&t&&n-r<8&&"Infinity".startsWith(e.substring(r))?(r+=8,1/0):e.substring(r,r+9)==="-Infinity"||pn.MINUS_INFINITY&t&&1<n-r&&n-r<9&&"-Infinity".startsWith(e.substring(r))?(r+=9,-1/0):e.substring(r,r+3)==="NaN"||pn.NAN&t&&n-r<3&&"NaN".startsWith(e.substring(r))?(r+=3,NaN):g()),d=()=>{const H=r;let q=!1;for(r++;r<n&&(e[r]!=='"'||q&&e[r-1]==="\\");)q=e[r]==="\\"?!q:!1,r++;if(e.charAt(r)=='"')try{return JSON.parse(e.substring(H,++r-Number(q)))}catch(he){a(String(he))}else if(pn.STR&t)try{return JSON.parse(e.substring(H,r-Number(q))+'"')}catch{return JSON.parse(e.substring(H,e.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},p=()=>{r++,S();const H={};try{for(;e[r]!=="}";){if(S(),r>=n&&pn.OBJ&t)return H;const q=d();S(),r++;try{const he=o();Object.defineProperty(H,q,{value:he,writable:!0,enumerable:!0,configurable:!0})}catch(he){if(pn.OBJ&t)return H;throw he}S(),e[r]===","&&r++}}catch{if(pn.OBJ&t)return H;s("Expected '}' at end of object")}return r++,H},A=()=>{r++;const H=[];try{for(;e[r]!=="]";)H.push(o()),S(),e[r]===","&&r++}catch{if(pn.ARR&t)return H;s("Expected ']' at end of array")}return r++,H},g=()=>{if(r===0){e==="-"&&pn.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e)}catch(q){if(pn.NUM&t)try{return e[e.length-1]==="."?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch{}a(String(q))}}const H=r;for(e[r]==="-"&&r++;e[r]&&!",]}".includes(e[r]);)r++;r==n&&!(pn.NUM&t)&&s("Unterminated number literal");try{return JSON.parse(e.substring(H,r))}catch{e.substring(H,r)==="-"&&pn.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e.substring(H,e.lastIndexOf("e")))}catch(he){a(String(he))}}},S=()=>{for(;r<n&&` 
\r	`.includes(e[r]);)r++};return o()},Fc=e=>Bv(e,pn.ALL^pn.NUM);var zs=function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},kt=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},fn,Wr,Qs,is,Nl,Bi,Ll,kl,Fl,Ci,$l,$c;class li extends yh{constructor(t){super(),fn.add(this),Wr.set(this,void 0),Qs.set(this,void 0),is.set(this,void 0),zs(this,Wr,t,"f"),zs(this,Qs,[],"f")}get currentChatCompletionSnapshot(){return kt(this,is,"f")}static fromReadableStream(t){const n=new li(null);return n._run(()=>n._fromReadableStream(t)),n}static createChatCompletion(t,n,r){const s=new li(n);return s._run(()=>s._runChatCompletion(t,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(t,n,r){var o;super._createChatCompletion;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),kt(this,fn,"m",Nl).call(this);const a=await t.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const d of a)kt(this,fn,"m",Ll).call(this,d);if((o=a.controller.signal)!=null&&o.aborted)throw new br;return this._addChatCompletion(kt(this,fn,"m",Ci).call(this))}async _fromReadableStream(t,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),kt(this,fn,"m",Nl).call(this),this._connected();const s=Lr.fromReadableStream(t,this.controller);let a;for await(const d of s)a&&a!==d.id&&this._addChatCompletion(kt(this,fn,"m",Ci).call(this)),kt(this,fn,"m",Ll).call(this,d),a=d.id;if((o=s.controller.signal)!=null&&o.aborted)throw new br;return this._addChatCompletion(kt(this,fn,"m",Ci).call(this))}[(Wr=new WeakMap,Qs=new WeakMap,is=new WeakMap,fn=new WeakSet,Nl=function(){this.ended||zs(this,is,void 0,"f")},Bi=function(n){let r=kt(this,Qs,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},kt(this,Qs,"f")[n.index]=r,r)},Ll=function(n){var s,a,o,d,p,A,g,S,H,q,he,fe,ye,Se,W;if(this.ended)return;const r=kt(this,fn,"m",$c).call(this,n);this._emit("chunk",n,r);for(const Ie of n.choices){const me=r.choices[Ie.index];Ie.delta.content!=null&&((s=me.message)==null?void 0:s.role)==="assistant"&&((a=me.message)!=null&&a.content)&&(this._emit("content",Ie.delta.content,me.message.content),this._emit("content.delta",{delta:Ie.delta.content,snapshot:me.message.content,parsed:me.message.parsed})),Ie.delta.refusal!=null&&((o=me.message)==null?void 0:o.role)==="assistant"&&((d=me.message)!=null&&d.refusal)&&this._emit("refusal.delta",{delta:Ie.delta.refusal,snapshot:me.message.refusal}),((p=Ie.logprobs)==null?void 0:p.content)!=null&&((A=me.message)==null?void 0:A.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(g=Ie.logprobs)==null?void 0:g.content,snapshot:((S=me.logprobs)==null?void 0:S.content)??[]}),((H=Ie.logprobs)==null?void 0:H.refusal)!=null&&((q=me.message)==null?void 0:q.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(he=Ie.logprobs)==null?void 0:he.refusal,snapshot:((fe=me.logprobs)==null?void 0:fe.refusal)??[]});const Qe=kt(this,fn,"m",Bi).call(this,me);me.finish_reason&&(kt(this,fn,"m",Fl).call(this,me),Qe.current_tool_call_index!=null&&kt(this,fn,"m",kl).call(this,me,Qe.current_tool_call_index));for(const at of Ie.delta.tool_calls??[])Qe.current_tool_call_index!==at.index&&(kt(this,fn,"m",Fl).call(this,me),Qe.current_tool_call_index!=null&&kt(this,fn,"m",kl).call(this,me,Qe.current_tool_call_index)),Qe.current_tool_call_index=at.index;for(const at of Ie.delta.tool_calls??[]){const ze=(ye=me.message.tool_calls)==null?void 0:ye[at.index];ze!=null&&ze.type&&((ze==null?void 0:ze.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(Se=ze.function)==null?void 0:Se.name,index:at.index,arguments:ze.function.arguments,parsed_arguments:ze.function.parsed_arguments,arguments_delta:((W=at.function)==null?void 0:W.arguments)??""}):(ze==null||ze.type,void 0))}}},kl=function(n,r){var o,d,p;if(kt(this,fn,"m",Bi).call(this,n).done_tool_calls.has(r))return;const a=(o=n.message.tool_calls)==null?void 0:o[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const A=(p=(d=kt(this,Wr,"f"))==null?void 0:d.tools)==null?void 0:p.find(g=>g.type==="function"&&g.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:hi(A)?A.$parseRaw(a.function.arguments):A!=null&&A.function.strict?JSON.parse(a.function.arguments):null})}else a.type},Fl=function(n){var s,a;const r=kt(this,fn,"m",Bi).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const o=kt(this,fn,"m",$l).call(this);this._emit("content.done",{content:n.message.content,parsed:o?o.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(s=n.logprobs)!=null&&s.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(a=n.logprobs)!=null&&a.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Ci=function(){if(this.ended)throw new Et("stream has ended, this shouldn't happen");const n=kt(this,is,"f");if(!n)throw new Et("request ended without sending any chunks");return zs(this,is,void 0,"f"),zs(this,Qs,[],"f"),Iv(n,kt(this,Wr,"f"))},$l=function(){var r;const n=(r=kt(this,Wr,"f"))==null?void 0:r.response_format;return vh(n)?n:null},$c=function(n){var r,s,a,o;let d=kt(this,is,"f");const{choices:p,...A}=n;d?Object.assign(d,A):d=zs(this,is,{...A,choices:[]},"f");for(const{delta:g,finish_reason:S,index:H,logprobs:q=null,...he}of n.choices){let fe=d.choices[H];if(fe||(fe=d.choices[H]={finish_reason:S,index:H,message:{},logprobs:q,...he}),q)if(!fe.logprobs)fe.logprobs=Object.assign({},q);else{const{content:at,refusal:ze,...nt}=q;Object.assign(fe.logprobs,nt),at&&((r=fe.logprobs).content??(r.content=[]),fe.logprobs.content.push(...at)),ze&&((s=fe.logprobs).refusal??(s.refusal=[]),fe.logprobs.refusal.push(...ze))}if(S&&(fe.finish_reason=S,kt(this,Wr,"f")&&ph(kt(this,Wr,"f")))){if(S==="length")throw new lh;if(S==="content_filter")throw new oh}if(Object.assign(fe,he),!g)continue;const{content:ye,refusal:Se,function_call:W,role:Ie,tool_calls:me,...Qe}=g;if(Object.assign(fe.message,Qe),Se&&(fe.message.refusal=(fe.message.refusal||"")+Se),Ie&&(fe.message.role=Ie),W&&(fe.message.function_call?(W.name&&(fe.message.function_call.name=W.name),W.arguments&&((a=fe.message.function_call).arguments??(a.arguments=""),fe.message.function_call.arguments+=W.arguments)):fe.message.function_call=W),ye&&(fe.message.content=(fe.message.content||"")+ye,!fe.message.refusal&&kt(this,fn,"m",$l).call(this)&&(fe.message.parsed=Fc(fe.message.content))),me){fe.message.tool_calls||(fe.message.tool_calls=[]);for(const{index:at,id:ze,type:nt,function:Je,...ut}of me){const ht=(o=fe.message.tool_calls)[at]??(o[at]={});Object.assign(ht,ut),ze&&(ht.id=ze),nt&&(ht.type=nt),Je&&(ht.function??(ht.function={name:Je.name??"",arguments:""})),Je!=null&&Je.name&&(ht.function.name=Je.name),Je!=null&&Je.arguments&&(ht.function.arguments+=Je.arguments,Av(kt(this,Wr,"f"),ht)&&(ht.function.parsed_arguments=Fc(ht.function.arguments)))}}}return d},Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("chunk",s=>{const a=n.shift();a?a.resolve(s):t.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,o)=>n.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Lr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Iv(e,t){const{id:n,choices:r,created:s,model:a,system_fingerprint:o,...d}=e,p={...d,id:n,choices:r.map(({message:A,finish_reason:g,index:S,logprobs:H,...q})=>{if(!g)throw new Et(`missing finish_reason for choice ${S}`);const{content:he=null,function_call:fe,tool_calls:ye,...Se}=A,W=A.role;if(!W)throw new Et(`missing role for choice ${S}`);if(fe){const{arguments:Ie,name:me}=fe;if(Ie==null)throw new Et(`missing function_call.arguments for choice ${S}`);if(!me)throw new Et(`missing function_call.name for choice ${S}`);return{...q,message:{content:he,function_call:{arguments:Ie,name:me},role:W,refusal:A.refusal??null},finish_reason:g,index:S,logprobs:H}}return ye?{...q,index:S,finish_reason:g,logprobs:H,message:{...Se,role:W,content:he,refusal:A.refusal??null,tool_calls:ye.map((Ie,me)=>{const{function:Qe,type:at,id:ze,...nt}=Ie,{arguments:Je,name:ut,...ht}=Qe||{};if(ze==null)throw new Et(`missing choices[${S}].tool_calls[${me}].id
${Ii(e)}`);if(at==null)throw new Et(`missing choices[${S}].tool_calls[${me}].type
${Ii(e)}`);if(ut==null)throw new Et(`missing choices[${S}].tool_calls[${me}].function.name
${Ii(e)}`);if(Je==null)throw new Et(`missing choices[${S}].tool_calls[${me}].function.arguments
${Ii(e)}`);return{...nt,id:ze,type:at,function:{...ht,name:ut,arguments:Je}}})}}:{...q,message:{...Se,content:he,role:W,refusal:A.refusal??null},finish_reason:g,index:S,logprobs:H}}),created:s,model:a,object:"chat.completion",...o?{system_fingerprint:o}:{}};return Sv(p,t)}function Ii(e){return JSON.stringify(e)}class ha extends li{static fromReadableStream(t){const n=new ha(null);return n._run(()=>n._fromReadableStream(t)),n}static runFunctions(t,n,r){const s=new ha(null),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(t,n,a)),s}static runTools(t,n,r){const s=new ha(n),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(t,n,a)),s}}let Ph=class extends Pt{parse(t,n){return Ev(t.tools),this._client.chat.completions.create(t,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>Uo(r,t))}runFunctions(t,n){return t.stream?ha.runFunctions(this._client,t,n):ii.runFunctions(this._client,t,n)}runTools(t,n){return t.stream?ha.runTools(this._client,t,n):ii.runTools(this._client,t,n)}stream(t,n){return li.createChatCompletion(this._client,t,n)}};class l0 extends Pt{constructor(){super(...arguments),this.completions=new Ph(this._client)}}(function(e){e.Completions=Ph})(l0||(l0={}));var it=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Jn=function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},wn,_o,Pr,Vi,vr,Ns,na,Ps,o0,tr,Hi,Di,za,ka,Fa,Vc,Hc,Dc,Xc,jc,qc,Uc;class yr extends mh{constructor(){super(...arguments),wn.add(this),_o.set(this,[]),Pr.set(this,{}),Vi.set(this,{}),vr.set(this,void 0),Ns.set(this,void 0),na.set(this,void 0),Ps.set(this,void 0),o0.set(this,void 0),tr.set(this,void 0),Hi.set(this,void 0),Di.set(this,void 0),za.set(this,void 0)}[(_o=new WeakMap,Pr=new WeakMap,Vi=new WeakMap,vr=new WeakMap,Ns=new WeakMap,na=new WeakMap,Ps=new WeakMap,o0=new WeakMap,tr=new WeakMap,Hi=new WeakMap,Di=new WeakMap,za=new WeakMap,wn=new WeakSet,Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):t.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,o)=>n.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const n=new yr;return n._run(()=>n._fromReadableStream(t)),n}async _fromReadableStream(t,n){var a;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Lr.fromReadableStream(t,this.controller);for await(const o of s)it(this,wn,"m",ka).call(this,o);if((a=s.controller.signal)!=null&&a.aborted)throw new br;return this._addRun(it(this,wn,"m",Fa).call(this))}toReadableStream(){return new Lr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,n,r,s,a){const o=new yr;return o._run(()=>o._runToolAssistantStream(t,n,r,s,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(t,n,r,s,a){var A;const o=a==null?void 0:a.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const d={...s,stream:!0},p=await t.submitToolOutputs(n,r,d,{...a,signal:this.controller.signal});this._connected();for await(const g of p)it(this,wn,"m",ka).call(this,g);if((A=p.controller.signal)!=null&&A.aborted)throw new br;return this._addRun(it(this,wn,"m",Fa).call(this))}static createThreadAssistantStream(t,n,r){const s=new yr;return s._run(()=>s._threadAssistantStream(t,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(t,n,r,s){const a=new yr;return a._run(()=>a._runAssistantStream(t,n,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return it(this,Hi,"f")}currentRun(){return it(this,Di,"f")}currentMessageSnapshot(){return it(this,vr,"f")}currentRunStepSnapshot(){return it(this,za,"f")}async finalRunSteps(){return await this.done(),Object.values(it(this,Pr,"f"))}async finalMessages(){return await this.done(),Object.values(it(this,Vi,"f"))}async finalRun(){if(await this.done(),!it(this,Ns,"f"))throw Error("Final run was not received.");return it(this,Ns,"f")}async _createThreadAssistantStream(t,n,r){var d;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},o=await t.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const p of o)it(this,wn,"m",ka).call(this,p);if((d=o.controller.signal)!=null&&d.aborted)throw new br;return this._addRun(it(this,wn,"m",Fa).call(this))}async _createAssistantStream(t,n,r,s){var p;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},d=await t.create(n,o,{...s,signal:this.controller.signal});this._connected();for await(const A of d)it(this,wn,"m",ka).call(this,A);if((p=d.controller.signal)!=null&&p.aborted)throw new br;return this._addRun(it(this,wn,"m",Fa).call(this))}static accumulateDelta(t,n){for(const[r,s]of Object.entries(n)){if(!t.hasOwnProperty(r)){t[r]=s;continue}let a=t[r];if(a==null){t[r]=s;continue}if(r==="index"||r==="type"){t[r]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(Il(a)&&Il(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(o=>typeof o=="string"||typeof o=="number")){a.push(...s);continue}for(const o of s){if(!Il(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const d=o.index;if(d==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof d!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${d}`);const p=a[d];p==null?a.push(o):a[d]=this.accumulateDelta(p,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${a}`);t[r]=a}return t}_addRun(t){return t}async _threadAssistantStream(t,n,r){return await this._createThreadAssistantStream(n,t,r)}async _runAssistantStream(t,n,r,s){return await this._createAssistantStream(n,t,r,s)}async _runToolAssistantStream(t,n,r,s,a){return await this._createToolAssistantStream(r,t,n,s,a)}}ka=function(t){if(!this.ended)switch(Jn(this,Hi,t,"f"),it(this,wn,"m",Dc).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":it(this,wn,"m",Uc).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":it(this,wn,"m",Hc).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":it(this,wn,"m",Vc).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Fa=function(){if(this.ended)throw new Et("stream has ended, this shouldn't happen");if(!it(this,Ns,"f"))throw Error("Final run has not been received");return it(this,Ns,"f")},Vc=function(t){const[n,r]=it(this,wn,"m",jc).call(this,t,it(this,vr,"f"));Jn(this,vr,n,"f"),it(this,Vi,"f")[n.id]=n;for(const s of r){const a=n.content[s.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,n),t.data.delta.content)for(const s of t.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,o=n.content[s.index];if(o&&o.type=="text")this._emit("textDelta",a,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=it(this,na,"f")){if(it(this,Ps,"f"))switch(it(this,Ps,"f").type){case"text":this._emit("textDone",it(this,Ps,"f").text,it(this,vr,"f"));break;case"image_file":this._emit("imageFileDone",it(this,Ps,"f").image_file,it(this,vr,"f"));break}Jn(this,na,s.index,"f")}Jn(this,Ps,n.content[s.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(it(this,na,"f")!==void 0){const s=t.data.content[it(this,na,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,it(this,vr,"f"));break;case"text":this._emit("textDone",s.text,it(this,vr,"f"));break}}it(this,vr,"f")&&this._emit("messageDone",t.data),Jn(this,vr,void 0,"f")}},Hc=function(t){const n=it(this,wn,"m",Xc).call(this,t);switch(Jn(this,za,n,"f"),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const r=t.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==it(this,o0,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(it(this,tr,"f")&&this._emit("toolCallDone",it(this,tr,"f")),Jn(this,o0,a.index,"f"),Jn(this,tr,n.step_details.tool_calls[a.index],"f"),it(this,tr,"f")&&this._emit("toolCallCreated",it(this,tr,"f")));this._emit("runStepDelta",t.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Jn(this,za,void 0,"f"),t.data.step_details.type=="tool_calls"&&it(this,tr,"f")&&(this._emit("toolCallDone",it(this,tr,"f")),Jn(this,tr,void 0,"f")),this._emit("runStepDone",t.data,n);break}},Dc=function(t){it(this,_o,"f").push(t),this._emit("event",t)},Xc=function(t){switch(t.event){case"thread.run.step.created":return it(this,Pr,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let n=it(this,Pr,"f")[t.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=t.data;if(r.delta){const s=yr.accumulateDelta(n,r.delta);it(this,Pr,"f")[t.data.id]=s}return it(this,Pr,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":it(this,Pr,"f")[t.data.id]=t.data;break}if(it(this,Pr,"f")[t.data.id])return it(this,Pr,"f")[t.data.id];throw new Error("No snapshot available")},jc=function(t,n){let r=[];switch(t.event){case"thread.message.created":return[t.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=t.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in n.content){let o=n.content[a.index];n.content[a.index]=it(this,wn,"m",qc).call(this,a,o)}else n.content[a.index]=a,r.push(a);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},qc=function(t,n){return yr.accumulateDelta(n,t)},Uc=function(t){switch(Jn(this,Di,t.data,"f"),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Jn(this,Ns,t.data,"f"),it(this,tr,"f")&&(this._emit("toolCallDone",it(this,tr,"f")),Jn(this,tr,void 0,"f"));break}};class c0 extends Pt{create(t,n,r){return this._client.post(`/threads/${t}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/threads/${t}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(t,n,r,s){return this._client.post(`/threads/${t}/messages/${n}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(t,n={},r){return Un(n)?this.list(t,{},n):this._client.getAPIList(`/threads/${t}/messages`,Yo,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n,r){return this._client.delete(`/threads/${t}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Yo extends xr{}(function(e){e.MessagesPage=Yo})(c0||(c0={}));class u0 extends Pt{retrieve(t,n,r,s={},a){return Un(s)?this.retrieve(t,n,r,{},s):this._client.get(`/threads/${t}/runs/${n}/steps/${r}`,{query:s,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(t,n,r={},s){return Un(r)?this.list(t,n,{},r):this._client.getAPIList(`/threads/${t}/runs/${n}/steps`,Ko,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class Ko extends xr{}(function(e){e.RunStepsPage=Ko})(u0||(u0={}));class f0 extends Pt{constructor(){super(...arguments),this.steps=new u0(this._client)}create(t,n,r){const{include:s,...a}=n;return this._client.post(`/threads/${t}/runs`,{query:{include:s},body:a,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}retrieve(t,n,r){return this._client.get(`/threads/${t}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(t,n,r,s){return this._client.post(`/threads/${t}/runs/${n}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(t,n={},r){return Un(n)?this.list(t,{},n):this._client.getAPIList(`/threads/${t}/runs`,Wo,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(t,n,r){return this._client.post(`/threads/${t}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const s=await this.create(t,n,r);return await this.poll(t,s.id,r)}createAndStream(t,n,r){return yr.createAssistantStream(t,this._client.beta.threads.runs,n,r)}async poll(t,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:o}=await this.retrieve(t,n,{...r,headers:{...r==null?void 0:r.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let d=5e3;if(r!=null&&r.pollIntervalMs)d=r.pollIntervalMs;else{const p=o.headers.get("openai-poll-after-ms");if(p){const A=parseInt(p);isNaN(A)||(d=A)}}await fi(d);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(t,n,r){return yr.createAssistantStream(t,this._client.beta.threads.runs,n,r)}submitToolOutputs(t,n,r,s){return this._client.post(`/threads/${t}/runs/${n}/submit_tool_outputs`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(t,n,r,s){const a=await this.submitToolOutputs(t,n,r,s);return await this.poll(t,a.id,s)}submitToolOutputsStream(t,n,r,s){return yr.createToolAssistantStream(t,n,this._client.beta.threads.runs,r,s)}}class Wo extends xr{}(function(e){e.RunsPage=Wo,e.Steps=u0,e.RunStepsPage=Ko})(f0||(f0={}));class h0 extends Pt{constructor(){super(...arguments),this.runs=new f0(this._client),this.messages=new c0(this._client)}create(t={},n){return Un(t)?this.create({},t):this._client.post("/threads",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/threads/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/threads/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n){return this._client.delete(`/threads/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}createAndRun(t,n){return this._client.post("/threads/runs",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:t.stream??!1})}async createAndRunPoll(t,n){const r=await this.createAndRun(t,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(t,n){return yr.createThreadAssistantStream(t,this._client.beta.threads,n)}}(function(e){e.Runs=f0,e.RunsPage=Wo,e.Messages=c0,e.MessagesPage=Yo})(h0||(h0={}));const Ov=async e=>{const t=await Promise.allSettled(e),n=t.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of t)s.status==="fulfilled"&&r.push(s.value);return r};let _0=class extends Pt{create(t,n,r){return this._client.post(`/vector_stores/${t}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/vector_stores/${t}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(t,n={},r){return Un(n)?this.list(t,{},n):this._client.getAPIList(`/vector_stores/${t}/files`,K0,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n,r){return this._client.delete(`/vector_stores/${t}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const s=await this.create(t,n,r);return await this.poll(t,s.id,r)}async poll(t,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const a=await this.retrieve(t,n,{...r,headers:s}).withResponse(),o=a.data;switch(o.status){case"in_progress":let d=5e3;if(r!=null&&r.pollIntervalMs)d=r.pollIntervalMs;else{const p=a.response.headers.get("openai-poll-after-ms");if(p){const A=parseInt(p);isNaN(A)||(d=A)}}await fi(d);break;case"failed":case"completed":return o}}}async upload(t,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(t,{file_id:s.id},r)}async uploadAndPoll(t,n,r){const s=await this.upload(t,n,r);return await this.poll(t,s.id,r)}};class K0 extends xr{}(function(e){e.VectorStoreFilesPage=K0})(_0||(_0={}));class d0 extends Pt{create(t,n,r){return this._client.post(`/vector_stores/${t}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/vector_stores/${t}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(t,n,r){return this._client.post(`/vector_stores/${t}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const s=await this.create(t,n);return await this.poll(t,s.id,r)}listFiles(t,n,r={},s){return Un(r)?this.listFiles(t,n,{},r):this._client.getAPIList(`/vector_stores/${t}/file_batches/${n}/files`,K0,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}async poll(t,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:o}=await this.retrieve(t,n,{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let d=5e3;if(r!=null&&r.pollIntervalMs)d=r.pollIntervalMs;else{const p=o.headers.get("openai-poll-after-ms");if(p){const A=parseInt(p);isNaN(A)||(d=A)}}await fi(d);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(t,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(s==null?void 0:s.maxConcurrency)??5,o=Math.min(a,n.length),d=this._client,p=n.values(),A=[...r];async function g(H){for(let q of H){const he=await d.files.create({file:q,purpose:"assistants"},s);A.push(he.id)}}const S=Array(o).fill(p).map(g);return await Ov(S),await this.createAndPoll(t,{file_ids:A})}}d0||(d0={});class m0 extends Pt{constructor(){super(...arguments),this.files=new _0(this._client),this.fileBatches=new d0(this._client)}create(t,n){return this._client.post("/vector_stores",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/vector_stores/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/vector_stores/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(t={},n){return Un(t)?this.list({},t):this._client.getAPIList("/vector_stores",Go,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(t,n){return this._client.delete(`/vector_stores/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Go extends xr{}(function(e){e.VectorStoresPage=Go,e.Files=_0,e.VectorStoreFilesPage=K0,e.FileBatches=d0})(m0||(m0={}));class v0 extends Pt{constructor(){super(...arguments),this.vectorStores=new m0(this._client),this.chat=new l0(this._client),this.assistants=new r0(this._client),this.threads=new h0(this._client)}}(function(e){e.VectorStores=m0,e.VectorStoresPage=Go,e.Chat=l0,e.Assistants=r0,e.AssistantsPage=qo,e.Threads=h0})(v0||(v0={}));class p0 extends Pt{create(t,n){return this._client.post("/completions",{body:t,...n,stream:t.stream??!1})}}p0||(p0={});class b0 extends Pt{create(t,n){return this._client.post("/embeddings",{body:t,...n})}}b0||(b0={});class y0 extends Pt{create(t,n){return this._client.post("/files",va({body:t,...n}))}retrieve(t,n){return this._client.get(`/files/${t}`,n)}list(t={},n){return Un(t)?this.list({},t):this._client.getAPIList("/files",zo,{query:t,...n})}del(t,n){return this._client.delete(`/files/${t}`,n)}content(t,n){return this._client.get(`/files/${t}/content`,{...n,__binaryResponse:!0})}retrieveContent(t,n){return this._client.get(`/files/${t}/content`,{...n,headers:{Accept:"application/json",...n==null?void 0:n.headers}})}async waitForProcessing(t,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let o=await this.retrieve(t);for(;!o.status||!s.has(o.status);)if(await fi(n),o=await this.retrieve(t),Date.now()-a>r)throw new Do({message:`Giving up on waiting for file ${t} to finish processing after ${r} milliseconds.`});return o}}class zo extends Xo{}(function(e){e.FileObjectsPage=zo})(y0||(y0={}));class w0 extends Pt{list(t,n={},r){return Un(n)?this.list(t,{},n):this._client.getAPIList(`/fine_tuning/jobs/${t}/checkpoints`,Qo,{query:n,...r})}}class Qo extends xr{}(function(e){e.FineTuningJobCheckpointsPage=Qo})(w0||(w0={}));class S0 extends Pt{constructor(){super(...arguments),this.checkpoints=new w0(this._client)}create(t,n){return this._client.post("/fine_tuning/jobs",{body:t,...n})}retrieve(t,n){return this._client.get(`/fine_tuning/jobs/${t}`,n)}list(t={},n){return Un(t)?this.list({},t):this._client.getAPIList("/fine_tuning/jobs",Zo,{query:t,...n})}cancel(t,n){return this._client.post(`/fine_tuning/jobs/${t}/cancel`,n)}listEvents(t,n={},r){return Un(n)?this.listEvents(t,{},n):this._client.getAPIList(`/fine_tuning/jobs/${t}/events`,Jo,{query:n,...r})}}class Zo extends xr{}class Jo extends xr{}(function(e){e.FineTuningJobsPage=Zo,e.FineTuningJobEventsPage=Jo,e.Checkpoints=w0,e.FineTuningJobCheckpointsPage=Qo})(S0||(S0={}));class x0 extends Pt{constructor(){super(...arguments),this.jobs=new S0(this._client)}}(function(e){e.Jobs=S0,e.FineTuningJobsPage=Zo,e.FineTuningJobEventsPage=Jo})(x0||(x0={}));class g0 extends Pt{createVariation(t,n){return this._client.post("/images/variations",va({body:t,...n}))}edit(t,n){return this._client.post("/images/edits",va({body:t,...n}))}generate(t,n){return this._client.post("/images/generations",{body:t,...n})}}g0||(g0={});class A0 extends Pt{retrieve(t,n){return this._client.get(`/models/${t}`,n)}list(t){return this._client.getAPIList("/models",e1,t)}del(t,n){return this._client.delete(`/models/${t}`,n)}}class e1 extends Xo{}(function(e){e.ModelsPage=e1})(A0||(A0={}));class E0 extends Pt{create(t,n){return this._client.post("/moderations",{body:t,...n})}}E0||(E0={});class R0 extends Pt{create(t,n,r){return this._client.post(`/uploads/${t}/parts`,va({body:n,...r}))}}R0||(R0={});class M0 extends Pt{constructor(){super(...arguments),this.parts=new R0(this._client)}create(t,n){return this._client.post("/uploads",{body:t,...n})}cancel(t,n){return this._client.post(`/uploads/${t}/cancel`,n)}complete(t,n,r){return this._client.post(`/uploads/${t}/complete`,{body:n,...r})}}(function(e){e.Parts=R0})(M0||(M0={}));var Nh;class sn extends Zm{constructor({baseURL:t=Ti("OPENAI_BASE_URL"),apiKey:n=Ti("OPENAI_API_KEY"),organization:r=Ti("OPENAI_ORG_ID")??null,project:s=Ti("OPENAI_PROJECT_ID")??null,...a}={}){if(n===void 0)throw new Et("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:n,organization:r,project:s,...a,baseURL:t||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&cv())throw new Et(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new p0(this),this.chat=new Qi(this),this.embeddings=new b0(this),this.files=new y0(this),this.images=new g0(this),this.audio=new t0(this),this.moderations=new E0(this),this.models=new A0(this),this.fineTuning=new x0(this),this.beta=new v0(this),this.batches=new n0(this),this.uploads=new M0(this),this._options=o,this.apiKey=n,this.organization=r,this.project=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(t){return wv(t,{arrayFormat:"brackets"})}}Nh=sn;sn.OpenAI=Nh;sn.DEFAULT_TIMEOUT=6e5;sn.OpenAIError=Et;sn.APIError=gn;sn.APIConnectionError=Y0;sn.APIConnectionTimeoutError=Do;sn.APIUserAbortError=br;sn.NotFoundError=nh;sn.ConflictError=rh;sn.RateLimitError=ah;sn.BadRequestError=Jf;sn.AuthenticationError=eh;sn.InternalServerError=ih;sn.PermissionDeniedError=th;sn.UnprocessableEntityError=sh;sn.toFile=Kf;sn.fileFromPath=Xf;(function(e){e.Page=Xo,e.CursorPage=xr,e.Completions=p0,e.Chat=Qi,e.Embeddings=b0,e.Files=y0,e.FileObjectsPage=zo,e.Images=g0,e.Audio=t0,e.Moderations=E0,e.Models=A0,e.ModelsPage=e1,e.FineTuning=x0,e.Beta=v0,e.Batches=n0,e.BatchesPage=jo,e.Uploads=M0})(sn||(sn={}));const Pv=sf("PromptStore",()=>({intialPrompt:"You will help me to identify any dangerous objects in the environment, only talk objectively. I am a blind person, explain to me briefly where I am now based on the image which is from a camera facing forward, tell me if it is a safe environment for me to walk forward. Do speak as you are in the same environment with me, not just an interpretation of the image."})),Lh=sf("ConfigStore",()=>({apiKey:jn("")})),kh=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},Nv={class:"flex flex-row justify-evenly overflow-hidden window bg-stone-900"},Lv={class:"my-16"},kv={class:"w-1/2 h-full border border-gray-300 rounded-lg p-16"},Fv={__name:"HomeView",setup(e){const t=wf(),n=Pv(),r=Lh();console.log(r.key),r.key||(alert("No API Key"),t.push("/"));const s=new sn({apiKey:r.key,dangerouslyAllowBrowser:!0}),a=jn([]);new Lm({bitRate:128}),jn(!1);const o=function(ye){const Se=new Audio(ye);Se.addEventListener("ended",function(){console.log("done")}),Se.play()},d=async function(ye){const W=(await s.audio.speech.create({model:"tts-1",voice:"nova",input:ye})).body.getReader();let Ie=[],me=!1;for(;!me;){const{done:ze,value:nt}=await W.read();if(ze){me=!0;break}Ie.push(nt)}const Qe=new Blob(Ie,{type:"application/octet-stream"}),at=URL.createObjectURL(Qe);o(at)},p=function(){console.log("user start")},A=async function(ye){try{return(await s.chat.completions.create({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:n.intialPrompt},{type:"image_url",image_url:{url:ye}}]}]})).choices[0].message.content}catch{return""}};let g,S,H,q;const he=async function(){console.log("hi"),S.width=g.videoWidth,S.height=g.videoHeight,H.drawImage(g,0,0,S.width,S.height);const ye=S.toDataURL("image/png");q.src=ye,o("audio/processing.mp3");const Se=await A(ye);console.log(Se),Se&&(a.value.push({text:Se,bot:!0}),await d(Se))},fe=function(ye){(ye.key==="s"||ye.key==="S")&&he()};return L0(()=>{console.log(n.intialPrompt),g=document.getElementById("video"),S=document.getElementById("canvasElement"),H=S.getContext("2d"),q=document.getElementById("snapshotImage");const ye={video:{width:{ideal:960},height:{ideal:720},facingMode:"environment"}};navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(ye).then(function(Se){g.srcObject=Se,g.play();const W=Se.getVideoTracks()[0].getCapabilities();console.log(W),a.value.push({text:"Camera started, press the action key anytime, and ask me anything you want to know that is in front of the camera.",bot:!0})}).catch(function(Se){console.log("Error: "+Se)}):alert("getUserMedia API is not supported in your browser."),window.addEventListener("keydown",fe),setTimeout(()=>{o("audio/start.mp3")},1e3)}),Po(()=>{window.removeEventListener("keydown",fe),console.log("onBeforeUnmount")}),(ye,Se)=>{const W=Pf;return qa(),wl("div",Nv,[Ir("div",{class:"w-1/2 h-full border border-gray-300 rounded-lg flex flex-col overflow-y-scroll no-bar",onClick:Se[3]||(Se[3]=Ie=>p())},[Se[6]||(Se[6]=Ir("h1",{className:"text-3xl font-bold text-white"},"Camera Feed",-1)),Ir("video",{id:"video",width:"400",height:"400",autoplay:"",onClick:Se[0]||(Se[0]=Ie=>he()),class:"cursor-pointer"}),Ir("div",Lv,[tt(W,{type:"primary",onClick:Se[1]||(Se[1]=G1(Ie=>he(),["stop"]))},{default:ia(()=>Se[4]||(Se[4]=[ni("Safe Walking")])),_:1}),tt(W,{type:"primary",onClick:Se[2]||(Se[2]=G1(()=>{},["stop"]))},{default:ia(()=>Se[5]||(Se[5]=[ni("Recon Object")])),_:1})]),Se[7]||(Se[7]=Ir("canvas",{id:"canvasElement",style:{display:"none"}},null,-1)),Se[8]||(Se[8]=Ir("img",{id:"snapshotImage",alt:"Video Snapshot",width:"400"},null,-1))]),Ir("div",kv,[(qa(!0),wl(pr,null,j2(a.value,(Ie,me)=>(qa(),wl("div",{key:me,class:"border border-gray-600 rounded-md bg-gray-600 text-white p-4 my-4"},eu(Ie.text),1))),128))])])}}},$v=kh(Fv,[["__scopeId","data-v-9232b043"]]),Vv={class:"flex flex-col justify-center items-center overflow-hidden window bg-stone-900 gap-8"},Hv={__name:"ConfigView",setup(e){const t=wf(),n=jn(""),r=Lh(),s=function(){r.key=n.value,t.push("/home")};return(a,o)=>{const d=Rm,p=Cm,A=Pf,g=Im;return qa(),Wu(g,{theme:"dark"},{default:ia(()=>[Ir("div",Vv,[tt(p,{inset:""},{default:ia(()=>[tt(d,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=S=>n.value=S),label:"Key"},null,8,["modelValue"])]),_:1}),tt(A,{type:"primary",onClick:o[1]||(o[1]=S=>s())},{default:ia(()=>o[2]||(o[2]=[ni("Go")])),_:1})])]),_:1})}}},Dv=kh(Hv,[["__scopeId","data-v-33f621ac"]]),Xv=f4({history:X3("/ChatADTest/"),routes:[{path:"/",name:"config",component:Dv},{path:"/home",name:"home",component:$v}]});(function(){if(typeof window>"u")return;var e,t="ontouchstart"in window;document.createTouch||(document.createTouch=function(g,S,H,q,he,fe,ye){return new n(S,H,{pageX:q,pageY:he,screenX:fe,screenY:ye,clientX:q-window.pageXOffset,clientY:he-window.pageYOffset},0,0)}),document.createTouchList||(document.createTouchList=function(){for(var g=r(),S=0;S<arguments.length;S++)g[S]=arguments[S];return g.length=arguments.length,g}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(g){var S=this;do{if(S.matches(g))return S;S=S.parentElement||S.parentNode}while(S!==null&&S.nodeType===1);return null});var n=function(S,H,q,he,fe){he=he||0,fe=fe||0,this.identifier=H,this.target=S,this.clientX=q.clientX+he,this.clientY=q.clientY+fe,this.screenX=q.screenX+he,this.screenY=q.screenY+fe,this.pageX=q.pageX+he,this.pageY=q.pageY+fe};function r(){var g=[];return g.item=function(S){return this[S]||null},g.identifiedTouch=function(S){return this[S+1]||null},g}var s=!1;function a(g){return function(S){S.type==="mousedown"&&(s=!0),S.type==="mouseup"&&(s=!1),!(S.type==="mousemove"&&!s)&&((S.type==="mousedown"||!e||e&&!e.dispatchEvent)&&(e=S.target),e.closest("[data-no-touch-simulate]")==null&&o(g,S),S.type==="mouseup"&&(e=null))}}function o(g,S){var H=document.createEvent("Event");H.initEvent(g,!0,!0),H.altKey=S.altKey,H.ctrlKey=S.ctrlKey,H.metaKey=S.metaKey,H.shiftKey=S.shiftKey,H.touches=p(S),H.targetTouches=p(S),H.changedTouches=d(S),e.dispatchEvent(H)}function d(g){var S=r();return S.push(new n(e,1,g,0,0)),S}function p(g){return g.type==="mouseup"?r():d(g)}function A(){window.addEventListener("mousedown",a("touchstart"),!0),window.addEventListener("mousemove",a("touchmove"),!0),window.addEventListener("mouseup",a("touchend"),!0)}A.multiTouchOffset=75,t||new A})();const t1=n3(_4);t1.use(i3());t1.use(Xv);t1.mount("#app");
