(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();/**
* @vue/shared v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function nc(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Yt={},Ba=[],Gr=()=>{},h2=()=>!1,ul=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),rc=e=>e.startsWith("onUpdate:"),wn=Object.assign,sc=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},d2=Object.prototype.hasOwnProperty,Vt=(e,t)=>d2.call(e,t),wt=Array.isArray,Ia=e=>fl(e)==="[object Map]",U1=e=>fl(e)==="[object Set]",Tt=e=>typeof e=="function",hn=e=>typeof e=="string",Ps=e=>typeof e=="symbol",Zt=e=>e!==null&&typeof e=="object",Y1=e=>(Zt(e)||Tt(e))&&Tt(e.then)&&Tt(e.catch),K1=Object.prototype.toString,fl=e=>K1.call(e),_2=e=>fl(e).slice(8,-1),W1=e=>fl(e)==="[object Object]",ac=e=>hn(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,di=nc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),hl=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},m2=/-(\w)/g,Os=hl(e=>e.replace(m2,(t,n)=>n?n.toUpperCase():"")),v2=/\B([A-Z])/g,la=hl(e=>e.replace(v2,"-$1").toLowerCase()),G1=hl(e=>e.charAt(0).toUpperCase()+e.slice(1)),Kl=hl(e=>e?`on${G1(e)}`:""),Cs=(e,t)=>!Object.is(e,t),Wl=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},z1=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},p2=e=>{const t=parseFloat(e);return isNaN(t)?e:t},b2=e=>{const t=hn(e)?Number(e):NaN;return isNaN(t)?e:t};let lu;const dl=()=>lu||(lu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ic(e){if(wt(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=hn(r)?S2(r):ic(r);if(s)for(const a in s)t[a]=s[a]}return t}else if(hn(e)||Zt(e))return e}const y2=/;(?![^(]*\))/g,w2=/:([^]+)/,g2=/\/\*[^]*?\*\//g;function S2(e){const t={};return e.replace(g2,"").split(y2).forEach(n=>{if(n){const r=n.split(w2);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function oc(e){let t="";if(hn(e))t=e;else if(wt(e))for(let n=0;n<e.length;n++){const r=oc(e[n]);r&&(t+=r+" ")}else if(Zt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const x2="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",A2=nc(x2);function Q1(e){return!!e||e===""}const Z1=e=>!!(e&&e.__v_isRef===!0),x0=e=>hn(e)?e:e==null?"":wt(e)||Zt(e)&&(e.toString===K1||!Tt(e.toString))?Z1(e)?x0(e.value):JSON.stringify(e,J1,2):String(e),J1=(e,t)=>Z1(t)?J1(e,t.value):Ia(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],a)=>(n[Gl(r,a)+" =>"]=s,n),{})}:U1(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Gl(n))}:Ps(t)?Gl(t):Zt(t)&&!wt(t)&&!W1(t)?String(t):t,Gl=(e,t="")=>{var n;return Ps(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Hn;class ef{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Hn,!t&&Hn&&(this.index=(Hn.scopes||(Hn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Hn;try{return Hn=this,t()}finally{Hn=n}}}on(){Hn=this}off(){Hn=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function tf(e){return new ef(e)}function nf(){return Hn}function E2(e,t=!1){Hn&&Hn.cleanups.push(e)}let Gt;const zl=new WeakSet;class rf{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Hn&&Hn.active&&Hn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,zl.has(this)&&(zl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||af(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cu(this),of(this);const t=Gt,n=Or;Gt=this,Or=!0;try{return this.fn()}finally{lf(this),Gt=t,Or=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)uc(t);this.deps=this.depsTail=void 0,cu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?zl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){A0(this)&&this.run()}get dirty(){return A0(this)}}let sf=0,_i,mi;function af(e,t=!1){if(e.flags|=8,t){e.next=mi,mi=e;return}e.next=_i,_i=e}function lc(){sf++}function cc(){if(--sf>0)return;if(mi){let t=mi;for(mi=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;_i;){let t=_i;for(_i=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function of(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function lf(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),uc(r),R2(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function A0(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(cf(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function cf(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ri))return;e.globalVersion=Ri;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!A0(e)){e.flags&=-3;return}const n=Gt,r=Or;Gt=e,Or=!0;try{of(e);const s=e.fn(e._value);(t.version===0||Cs(s,e._value))&&(e._value=s,t.version++)}catch(s){throw t.version++,s}finally{Gt=n,Or=r,lf(e),e.flags&=-3}}function uc(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)uc(a,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function R2(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Or=!0;const uf=[];function Ns(){uf.push(Or),Or=!1}function Ls(){const e=uf.pop();Or=e===void 0?!0:e}function cu(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Gt;Gt=void 0;try{t()}finally{Gt=n}}}let Ri=0;class M2{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class fc{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Gt||!Or||Gt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Gt)n=this.activeLink=new M2(Gt,this),Gt.deps?(n.prevDep=Gt.depsTail,Gt.depsTail.nextDep=n,Gt.depsTail=n):Gt.deps=Gt.depsTail=n,ff(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Gt.depsTail,n.nextDep=void 0,Gt.depsTail.nextDep=n,Gt.depsTail=n,Gt.deps===n&&(Gt.deps=r)}return n}trigger(t){this.version++,Ri++,this.notify(t)}notify(t){lc();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{cc()}}}function ff(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)ff(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const xo=new WeakMap,na=Symbol(""),E0=Symbol(""),Mi=Symbol("");function Ln(e,t,n){if(Or&&Gt){let r=xo.get(e);r||xo.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new fc),s.map=r,s.key=n),s.track()}}function ls(e,t,n,r,s,a){const o=xo.get(e);if(!o){Ri++;return}const f=m=>{m&&m.trigger()};if(lc(),t==="clear")o.forEach(f);else{const m=wt(e),g=m&&ac(n);if(m&&n==="length"){const S=Number(r);o.forEach((b,C)=>{(C==="length"||C===Mi||!Ps(C)&&C>=S)&&f(b)})}else switch((n!==void 0||o.has(void 0))&&f(o.get(n)),g&&f(o.get(Mi)),t){case"add":m?g&&f(o.get("length")):(f(o.get(na)),Ia(e)&&f(o.get(E0)));break;case"delete":m||(f(o.get(na)),Ia(e)&&f(o.get(E0)));break;case"set":Ia(e)&&f(o.get(na));break}}cc()}function T2(e,t){const n=xo.get(e);return n&&n.get(t)}function va(e){const t=$t(e);return t===e?t:(Ln(t,"iterate",Mi),xr(e)?t:t.map(Fn))}function _l(e){return Ln(e=$t(e),"iterate",Mi),e}const C2={__proto__:null,[Symbol.iterator](){return Ql(this,Symbol.iterator,Fn)},concat(...e){return va(this).concat(...e.map(t=>wt(t)?va(t):t))},entries(){return Ql(this,"entries",e=>(e[1]=Fn(e[1]),e))},every(e,t){return ns(this,"every",e,t,void 0,arguments)},filter(e,t){return ns(this,"filter",e,t,n=>n.map(Fn),arguments)},find(e,t){return ns(this,"find",e,t,Fn,arguments)},findIndex(e,t){return ns(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ns(this,"findLast",e,t,Fn,arguments)},findLastIndex(e,t){return ns(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ns(this,"forEach",e,t,void 0,arguments)},includes(...e){return Zl(this,"includes",e)},indexOf(...e){return Zl(this,"indexOf",e)},join(e){return va(this).join(e)},lastIndexOf(...e){return Zl(this,"lastIndexOf",e)},map(e,t){return ns(this,"map",e,t,void 0,arguments)},pop(){return Za(this,"pop")},push(...e){return Za(this,"push",e)},reduce(e,...t){return uu(this,"reduce",e,t)},reduceRight(e,...t){return uu(this,"reduceRight",e,t)},shift(){return Za(this,"shift")},some(e,t){return ns(this,"some",e,t,void 0,arguments)},splice(...e){return Za(this,"splice",e)},toReversed(){return va(this).toReversed()},toSorted(e){return va(this).toSorted(e)},toSpliced(...e){return va(this).toSpliced(...e)},unshift(...e){return Za(this,"unshift",e)},values(){return Ql(this,"values",Fn)}};function Ql(e,t,n){const r=_l(e),s=r[t]();return r!==e&&!xr(e)&&(s._next=s.next,s.next=()=>{const a=s._next();return a.value&&(a.value=n(a.value)),a}),s}const B2=Array.prototype;function ns(e,t,n,r,s,a){const o=_l(e),f=o!==e&&!xr(e),m=o[t];if(m!==B2[t]){const b=m.apply(e,a);return f?Fn(b):b}let g=n;o!==e&&(f?g=function(b,C){return n.call(this,Fn(b),C,e)}:n.length>2&&(g=function(b,C){return n.call(this,b,C,e)}));const S=m.call(o,g,r);return f&&s?s(S):S}function uu(e,t,n,r){const s=_l(e);let a=n;return s!==e&&(xr(e)?n.length>3&&(a=function(o,f,m){return n.call(this,o,f,m,e)}):a=function(o,f,m){return n.call(this,o,Fn(f),m,e)}),s[t](a,...r)}function Zl(e,t,n){const r=$t(e);Ln(r,"iterate",Mi);const s=r[t](...n);return(s===-1||s===!1)&&_c(n[0])?(n[0]=$t(n[0]),r[t](...n)):s}function Za(e,t,n=[]){Ns(),lc();const r=$t(e)[t].apply(e,n);return cc(),Ls(),r}const I2=nc("__proto__,__v_isRef,__isVue"),hf=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ps));function O2(e){Ps(e)||(e=String(e));const t=$t(this);return Ln(t,"has",e),t.hasOwnProperty(e)}class df{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){const s=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return a;if(n==="__v_raw")return r===(s?a?j2:pf:a?vf:mf).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=wt(t);if(!s){let m;if(o&&(m=C2[n]))return m;if(n==="hasOwnProperty")return O2}const f=Reflect.get(t,n,fn(t)?t:r);return(Ps(n)?hf.has(n):I2(n))||(s||Ln(t,"get",n),a)?f:fn(f)?o&&ac(n)?f:f.value:Zt(f)?s?yf(f):Fs(f):f}}class _f extends df{constructor(t=!1){super(!1,t)}set(t,n,r,s){let a=t[n];if(!this._isShallow){const m=ia(a);if(!xr(r)&&!ia(r)&&(a=$t(a),r=$t(r)),!wt(t)&&fn(a)&&!fn(r))return m?!1:(a.value=r,!0)}const o=wt(t)&&ac(n)?Number(n)<t.length:Vt(t,n),f=Reflect.set(t,n,r,fn(t)?t:s);return t===$t(s)&&(o?Cs(r,a)&&ls(t,"set",n,r):ls(t,"add",n,r)),f}deleteProperty(t,n){const r=Vt(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&ls(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!Ps(n)||!hf.has(n))&&Ln(t,"has",n),r}ownKeys(t){return Ln(t,"iterate",wt(t)?"length":na),Reflect.ownKeys(t)}}class k2 extends df{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const P2=new _f,N2=new k2,L2=new _f(!0);const R0=e=>e,Ji=e=>Reflect.getPrototypeOf(e);function F2(e,t,n){return function(...r){const s=this.__v_raw,a=$t(s),o=Ia(a),f=e==="entries"||e===Symbol.iterator&&o,m=e==="keys"&&o,g=s[e](...r),S=n?R0:t?M0:Fn;return!t&&Ln(a,"iterate",m?E0:na),{next(){const{value:b,done:C}=g.next();return C?{value:b,done:C}:{value:f?[S(b[0]),S(b[1])]:S(b),done:C}},[Symbol.iterator](){return this}}}}function eo(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function $2(e,t){const n={get(s){const a=this.__v_raw,o=$t(a),f=$t(s);e||(Cs(s,f)&&Ln(o,"get",s),Ln(o,"get",f));const{has:m}=Ji(o),g=t?R0:e?M0:Fn;if(m.call(o,s))return g(a.get(s));if(m.call(o,f))return g(a.get(f));a!==o&&a.get(s)},get size(){const s=this.__v_raw;return!e&&Ln($t(s),"iterate",na),Reflect.get(s,"size",s)},has(s){const a=this.__v_raw,o=$t(a),f=$t(s);return e||(Cs(s,f)&&Ln(o,"has",s),Ln(o,"has",f)),s===f?a.has(s):a.has(s)||a.has(f)},forEach(s,a){const o=this,f=o.__v_raw,m=$t(f),g=t?R0:e?M0:Fn;return!e&&Ln(m,"iterate",na),f.forEach((S,b)=>s.call(a,g(S),g(b),o))}};return wn(n,e?{add:eo("add"),set:eo("set"),delete:eo("delete"),clear:eo("clear")}:{add(s){!t&&!xr(s)&&!ia(s)&&(s=$t(s));const a=$t(this);return Ji(a).has.call(a,s)||(a.add(s),ls(a,"add",s,s)),this},set(s,a){!t&&!xr(a)&&!ia(a)&&(a=$t(a));const o=$t(this),{has:f,get:m}=Ji(o);let g=f.call(o,s);g||(s=$t(s),g=f.call(o,s));const S=m.call(o,s);return o.set(s,a),g?Cs(a,S)&&ls(o,"set",s,a):ls(o,"add",s,a),this},delete(s){const a=$t(this),{has:o,get:f}=Ji(a);let m=o.call(a,s);m||(s=$t(s),m=o.call(a,s)),f&&f.call(a,s);const g=a.delete(s);return m&&ls(a,"delete",s,void 0),g},clear(){const s=$t(this),a=s.size!==0,o=s.clear();return a&&ls(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=F2(s,e,t)}),n}function hc(e,t){const n=$2(e,t);return(r,s,a)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(Vt(n,s)&&s in r?n:r,s,a)}const V2={get:hc(!1,!1)},H2={get:hc(!1,!0)},D2={get:hc(!0,!1)};const mf=new WeakMap,vf=new WeakMap,pf=new WeakMap,j2=new WeakMap;function X2(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function q2(e){return e.__v_skip||!Object.isExtensible(e)?0:X2(_2(e))}function Fs(e){return ia(e)?e:dc(e,!1,P2,V2,mf)}function bf(e){return dc(e,!1,L2,H2,vf)}function yf(e){return dc(e,!0,N2,D2,pf)}function dc(e,t,n,r,s){if(!Zt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=s.get(e);if(a)return a;const o=q2(e);if(o===0)return e;const f=new Proxy(e,o===2?r:n);return s.set(e,f),f}function Bs(e){return ia(e)?Bs(e.__v_raw):!!(e&&e.__v_isReactive)}function ia(e){return!!(e&&e.__v_isReadonly)}function xr(e){return!!(e&&e.__v_isShallow)}function _c(e){return e?!!e.__v_raw:!1}function $t(e){const t=e&&e.__v_raw;return t?$t(t):e}function mc(e){return!Vt(e,"__v_skip")&&Object.isExtensible(e)&&z1(e,"__v_skip",!0),e}const Fn=e=>Zt(e)?Fs(e):e,M0=e=>Zt(e)?yf(e):e;function fn(e){return e?e.__v_isRef===!0:!1}function kt(e){return wf(e,!1)}function U2(e){return wf(e,!0)}function wf(e,t){return fn(e)?e:new Y2(e,t)}class Y2{constructor(t,n){this.dep=new fc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:$t(t),this._value=n?t:Fn(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||xr(t)||ia(t);t=r?t:$t(t),Cs(t,n)&&(this._rawValue=t,this._value=r?t:Fn(t),this.dep.trigger())}}function zr(e){return fn(e)?e.value:e}const K2={get:(e,t,n)=>t==="__v_raw"?e:zr(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return fn(s)&&!fn(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function gf(e){return Bs(e)?e:new Proxy(e,K2)}function W2(e){const t=wt(e)?new Array(e.length):{};for(const n in e)t[n]=z2(e,n);return t}class G2{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return T2($t(this._object),this._key)}}function z2(e,t,n){const r=e[t];return fn(r)?r:new G2(e,t,n)}class Q2{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new fc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ri-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Gt!==this)return af(this,!0),!0}get value(){const t=this.dep.track();return cf(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Z2(e,t,n=!1){let r,s;return Tt(e)?r=e:(r=e.get,s=e.set),new Q2(r,s,n)}const to={},Ao=new WeakMap;let Qs;function J2(e,t=!1,n=Qs){if(n){let r=Ao.get(n);r||Ao.set(n,r=[]),r.push(e)}}function e3(e,t,n=Yt){const{immediate:r,deep:s,once:a,scheduler:o,augmentJob:f,call:m}=n,g=he=>s?he:xr(he)||s===!1||s===0?cs(he,1):cs(he);let S,b,C,V,J=!1,te=!1;if(fn(e)?(b=()=>e.value,J=xr(e)):Bs(e)?(b=()=>g(e),J=!0):wt(e)?(te=!0,J=e.some(he=>Bs(he)||xr(he)),b=()=>e.map(he=>{if(fn(he))return he.value;if(Bs(he))return g(he);if(Tt(he))return m?m(he,2):he()})):Tt(e)?t?b=m?()=>m(e,2):e:b=()=>{if(C){Ns();try{C()}finally{Ls()}}const he=Qs;Qs=S;try{return m?m(e,3,[V]):e(V)}finally{Qs=he}}:b=Gr,t&&s){const he=b,je=s===!0?1/0:s;b=()=>cs(he(),je)}const _e=nf(),ke=()=>{S.stop(),_e&&sc(_e.effects,S)};if(a&&t){const he=t;t=(...je)=>{he(...je),ke()}}let U=te?new Array(e.length).fill(to):to;const Re=he=>{if(!(!(S.flags&1)||!S.dirty&&!he))if(t){const je=S.run();if(s||J||(te?je.some((He,De)=>Cs(He,U[De])):Cs(je,U))){C&&C();const He=Qs;Qs=S;try{const De=[je,U===to?void 0:te&&U[0]===to?[]:U,V];m?m(t,3,De):t(...De),U=je}finally{Qs=He}}}else S.run()};return f&&f(Re),S=new rf(b),S.scheduler=o?()=>o(Re,!1):Re,V=he=>J2(he,!1,S),C=S.onStop=()=>{const he=Ao.get(S);if(he){if(m)m(he,4);else for(const je of he)je();Ao.delete(S)}},t?r?Re(!0):U=S.run():o?o(Re.bind(null,!0),!0):S.run(),ke.pause=S.pause.bind(S),ke.resume=S.resume.bind(S),ke.stop=ke,ke}function cs(e,t=1/0,n){if(t<=0||!Zt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,fn(e))cs(e.value,t,n);else if(wt(e))for(let r=0;r<e.length;r++)cs(e[r],t,n);else if(U1(e)||Ia(e))e.forEach(r=>{cs(r,t,n)});else if(W1(e)){for(const r in e)cs(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&cs(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Fi(e,t,n,r){try{return r?e(...r):e()}catch(s){ml(s,t,n)}}function kr(e,t,n,r){if(Tt(e)){const s=Fi(e,t,n,r);return s&&Y1(s)&&s.catch(a=>{ml(a,t,n)}),s}if(wt(e)){const s=[];for(let a=0;a<e.length;a++)s.push(kr(e[a],t,n,r));return s}}function ml(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Yt;if(t){let f=t.parent;const m=t.proxy,g=`https://vuejs.org/error-reference/#runtime-${n}`;for(;f;){const S=f.ec;if(S){for(let b=0;b<S.length;b++)if(S[b](e,m,g)===!1)return}f=f.parent}if(a){Ns(),Fi(a,null,10,[e,m,g]),Ls();return}}t3(e,n,s,r,o)}function t3(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const Dn=[];let qr=-1;const Oa=[];let Es=null,Aa=0;const Sf=Promise.resolve();let Eo=null;function us(e){const t=Eo||Sf;return e?t.then(this?e.bind(this):e):t}function n3(e){let t=qr+1,n=Dn.length;for(;t<n;){const r=t+n>>>1,s=Dn[r],a=Ti(s);a<e||a===e&&s.flags&2?t=r+1:n=r}return t}function vc(e){if(!(e.flags&1)){const t=Ti(e),n=Dn[Dn.length-1];!n||!(e.flags&2)&&t>=Ti(n)?Dn.push(e):Dn.splice(n3(t),0,e),e.flags|=1,xf()}}function xf(){Eo||(Eo=Sf.then(Ef))}function r3(e){wt(e)?Oa.push(...e):Es&&e.id===-1?Es.splice(Aa+1,0,e):e.flags&1||(Oa.push(e),e.flags|=1),xf()}function fu(e,t,n=qr+1){for(;n<Dn.length;n++){const r=Dn[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;Dn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Af(e){if(Oa.length){const t=[...new Set(Oa)].sort((n,r)=>Ti(n)-Ti(r));if(Oa.length=0,Es){Es.push(...t);return}for(Es=t,Aa=0;Aa<Es.length;Aa++){const n=Es[Aa];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Es=null,Aa=0}}const Ti=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ef(e){try{for(qr=0;qr<Dn.length;qr++){const t=Dn[qr];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Fi(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;qr<Dn.length;qr++){const t=Dn[qr];t&&(t.flags&=-2)}qr=-1,Dn.length=0,Af(),Eo=null,(Dn.length||Oa.length)&&Ef()}}let er=null,Rf=null;function Ro(e){const t=er;return er=e,Rf=e&&e.type.__scopeId||null,t}function Qn(e,t=er,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Su(-1);const a=Ro(t);let o;try{o=e(...s)}finally{Ro(a),r._d&&Su(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Mf(e,t){if(er===null)return e;const n=gl(er),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[a,o,f,m=Yt]=t[s];a&&(Tt(a)&&(a={mounted:a,updated:a}),a.deep&&cs(o),r.push({dir:a,instance:n,value:o,oldValue:void 0,arg:f,modifiers:m}))}return e}function Ks(e,t,n,r){const s=e.dirs,a=t&&t.dirs;for(let o=0;o<s.length;o++){const f=s[o];a&&(f.oldValue=a[o].value);let m=f.dir[r];m&&(Ns(),kr(m,n,8,[e.el,f,e,t]),Ls())}}const Tf=Symbol("_vte"),Cf=e=>e.__isTeleport,vi=e=>e&&(e.disabled||e.disabled===""),s3=e=>e&&(e.defer||e.defer===""),hu=e=>typeof SVGElement<"u"&&e instanceof SVGElement,du=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,T0=(e,t)=>{const n=e&&e.to;return hn(n)?t?t(n):null:n},a3={name:"Teleport",__isTeleport:!0,process(e,t,n,r,s,a,o,f,m,g){const{mc:S,pc:b,pbc:C,o:{insert:V,querySelector:J,createText:te,createComment:_e}}=g,ke=vi(t.props);let{shapeFlag:U,children:Re,dynamicChildren:he}=t;if(e==null){const je=t.el=te(""),He=t.anchor=te("");V(je,n,r),V(He,n,r);const De=(Se,Ue)=>{U&16&&(s&&s.isCE&&(s.ce._teleportTarget=Se),S(Re,Se,Ue,s,a,o,f,m))},et=()=>{const Se=t.target=T0(t.props,J),Ue=If(Se,t,te,V);Se&&(o!=="svg"&&hu(Se)?o="svg":o!=="mathml"&&du(Se)&&(o="mathml"),ke||(De(Se,Ue),ho(t,!1)))};ke&&(De(n,He),ho(t,!0)),s3(t.props)?Gn(et,a):et()}else{t.el=e.el,t.targetStart=e.targetStart;const je=t.anchor=e.anchor,He=t.target=e.target,De=t.targetAnchor=e.targetAnchor,et=vi(e.props),Se=et?n:He,Ue=et?je:De;if(o==="svg"||hu(He)?o="svg":(o==="mathml"||du(He))&&(o="mathml"),he?(C(e.dynamicChildren,he,Se,s,a,o,f),yc(e,t,!0)):m||b(e,t,Se,Ue,s,a,o,f,!1),ke)et?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):no(t,n,je,g,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const be=t.target=T0(t.props,J);be&&no(t,be,null,g,0)}else et&&no(t,He,De,g,1);ho(t,ke)}},remove(e,t,n,{um:r,o:{remove:s}},a){const{shapeFlag:o,children:f,anchor:m,targetStart:g,targetAnchor:S,target:b,props:C}=e;if(b&&(s(g),s(S)),a&&s(m),o&16){const V=a||!vi(C);for(let J=0;J<f.length;J++){const te=f[J];r(te,t,n,V,!!te.dynamicChildren)}}},move:no,hydrate:i3};function no(e,t,n,{o:{insert:r},m:s},a=2){a===0&&r(e.targetAnchor,t,n);const{el:o,anchor:f,shapeFlag:m,children:g,props:S}=e,b=a===2;if(b&&r(o,t,n),(!b||vi(S))&&m&16)for(let C=0;C<g.length;C++)s(g[C],t,n,2);b&&r(f,t,n)}function i3(e,t,n,r,s,a,{o:{nextSibling:o,parentNode:f,querySelector:m,insert:g,createText:S}},b){const C=t.target=T0(t.props,m);if(C){const V=vi(t.props),J=C._lpa||C.firstChild;if(t.shapeFlag&16)if(V)t.anchor=b(o(e),t,f(e),n,r,s,a),t.targetStart=J,t.targetAnchor=J&&o(J);else{t.anchor=o(e);let te=J;for(;te;){if(te&&te.nodeType===8){if(te.data==="teleport start anchor")t.targetStart=te;else if(te.data==="teleport anchor"){t.targetAnchor=te,C._lpa=t.targetAnchor&&o(t.targetAnchor);break}}te=o(te)}t.targetAnchor||If(C,t,S,g),b(J&&o(J),t,C,n,r,s,a)}ho(t,V)}return t.anchor&&o(t.anchor)}const Bf=a3;function ho(e,t){const n=e.ctx;if(n&&n.ut){let r,s;for(t?(r=e.el,s=e.anchor):(r=e.targetStart,s=e.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function If(e,t,n,r){const s=t.targetStart=n(""),a=t.targetAnchor=n("");return s[Tf]=a,e&&(r(s,e),r(a,e)),a}const Rs=Symbol("_leaveCb"),ro=Symbol("_enterCb");function o3(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ca(()=>{e.isMounted=!0}),Vi(()=>{e.isUnmounting=!0}),e}const wr=[Function,Array],Of={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:wr,onEnter:wr,onAfterEnter:wr,onEnterCancelled:wr,onBeforeLeave:wr,onLeave:wr,onAfterLeave:wr,onLeaveCancelled:wr,onBeforeAppear:wr,onAppear:wr,onAfterAppear:wr,onAppearCancelled:wr},kf=e=>{const t=e.subTree;return t.component?kf(t.component):t},l3={name:"BaseTransition",props:Of,setup(e,{slots:t}){const n=ua(),r=o3();return()=>{const s=t.default&&Lf(t.default(),!0);if(!s||!s.length)return;const a=Pf(s),o=$t(e),{mode:f}=o;if(r.isLeaving)return Jl(a);const m=_u(a);if(!m)return Jl(a);let g=C0(m,o,r,n,C=>g=C);m.type!==Jn&&Ci(m,g);const S=n.subTree,b=S&&_u(S);if(b&&b.type!==Jn&&!Zs(m,b)&&kf(n).type!==Jn){const C=C0(b,o,r,n);if(Ci(b,C),f==="out-in"&&m.type!==Jn)return r.isLeaving=!0,C.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete C.afterLeave},Jl(a);f==="in-out"&&m.type!==Jn&&(C.delayLeave=(V,J,te)=>{const _e=Nf(r,b);_e[String(b.key)]=b,V[Rs]=()=>{J(),V[Rs]=void 0,delete g.delayedLeave},g.delayedLeave=te})}return a}}};function Pf(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Jn){t=n;break}}return t}const c3=l3;function Nf(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function C0(e,t,n,r,s){const{appear:a,mode:o,persisted:f=!1,onBeforeEnter:m,onEnter:g,onAfterEnter:S,onEnterCancelled:b,onBeforeLeave:C,onLeave:V,onAfterLeave:J,onLeaveCancelled:te,onBeforeAppear:_e,onAppear:ke,onAfterAppear:U,onAppearCancelled:Re}=t,he=String(e.key),je=Nf(n,e),He=(Se,Ue)=>{Se&&kr(Se,r,9,Ue)},De=(Se,Ue)=>{const be=Ue[1];He(Se,Ue),wt(Se)?Se.every(Be=>Be.length<=1)&&be():Se.length<=1&&be()},et={mode:o,persisted:f,beforeEnter(Se){let Ue=m;if(!n.isMounted)if(a)Ue=_e||m;else return;Se[Rs]&&Se[Rs](!0);const be=je[he];be&&Zs(e,be)&&be.el[Rs]&&be.el[Rs](),He(Ue,[Se])},enter(Se){let Ue=g,be=S,Be=b;if(!n.isMounted)if(a)Ue=ke||g,be=U||S,Be=Re||b;else return;let it=!1;const bt=Se[ro]=xt=>{it||(it=!0,xt?He(Be,[Se]):He(be,[Se]),et.delayedLeave&&et.delayedLeave(),Se[ro]=void 0)};Ue?De(Ue,[Se,bt]):bt()},leave(Se,Ue){const be=String(e.key);if(Se[ro]&&Se[ro](!0),n.isUnmounting)return Ue();He(C,[Se]);let Be=!1;const it=Se[Rs]=bt=>{Be||(Be=!0,Ue(),bt?He(te,[Se]):He(J,[Se]),Se[Rs]=void 0,je[be]===e&&delete je[be])};je[be]=e,V?De(V,[Se,it]):it()},clone(Se){const Ue=C0(Se,t,n,r,s);return s&&s(Ue),Ue}};return et}function Jl(e){if(vl(e))return e=ks(e),e.children=null,e}function _u(e){if(!vl(e))return Cf(e.type)&&e.children?Pf(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Tt(n.default))return n.default()}}function Ci(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ci(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Lf(e,t=!1,n){let r=[],s=0;for(let a=0;a<e.length;a++){let o=e[a];const f=n==null?o.key:String(n)+String(o.key!=null?o.key:a);o.type===_r?(o.patchFlag&128&&s++,r=r.concat(Lf(o.children,t,f))):(t||o.type!==Jn)&&r.push(f!=null?ks(o,{key:f}):o)}if(s>1)for(let a=0;a<r.length;a++)r[a].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function jn(e,t){return Tt(e)?wn({name:e.name},t,{setup:e}):e}function Ff(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function B0(e,t,n,r,s=!1){if(wt(e)){e.forEach((J,te)=>B0(J,t&&(wt(t)?t[te]:t),n,r,s));return}if(pi(r)&&!s)return;const a=r.shapeFlag&4?gl(r.component):r.el,o=s?null:a,{i:f,r:m}=e,g=t&&t.r,S=f.refs===Yt?f.refs={}:f.refs,b=f.setupState,C=$t(b),V=b===Yt?()=>!1:J=>Vt(C,J);if(g!=null&&g!==m&&(hn(g)?(S[g]=null,V(g)&&(b[g]=null)):fn(g)&&(g.value=null)),Tt(m))Fi(m,f,12,[o,S]);else{const J=hn(m),te=fn(m);if(J||te){const _e=()=>{if(e.f){const ke=J?V(m)?b[m]:S[m]:m.value;s?wt(ke)&&sc(ke,a):wt(ke)?ke.includes(a)||ke.push(a):J?(S[m]=[a],V(m)&&(b[m]=S[m])):(m.value=[a],e.k&&(S[e.k]=m.value))}else J?(S[m]=o,V(m)&&(b[m]=o)):te&&(m.value=o,e.k&&(S[e.k]=o))};o?(_e.id=-1,Gn(_e,n)):_e()}}}dl().requestIdleCallback;dl().cancelIdleCallback;const pi=e=>!!e.type.__asyncLoader,vl=e=>e.type.__isKeepAlive;function pl(e,t){$f(e,"a",t)}function $i(e,t){$f(e,"da",t)}function $f(e,t,n=Bn){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(bl(t,r,n),n){let s=n.parent;for(;s&&s.parent;)vl(s.parent.vnode)&&u3(r,t,n,s),s=s.parent}}function u3(e,t,n,r){const s=bl(t,e,r,!0);Hi(()=>{sc(r[t],s)},n)}function bl(e,t,n=Bn,r=!1){if(n){const s=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...o)=>{Ns();const f=Di(n),m=kr(t,n,e,o);return f(),Ls(),m});return r?s.unshift(a):s.push(a),a}}const ds=e=>(t,n=Bn)=>{(!Ii||e==="sp")&&bl(e,(...r)=>t(...r),n)},f3=ds("bm"),ca=ds("m"),h3=ds("bu"),d3=ds("u"),Vi=ds("bum"),Hi=ds("um"),_3=ds("sp"),m3=ds("rtg"),v3=ds("rtc");function p3(e,t=Bn){bl("ec",e,t)}const b3=Symbol.for("v-ndc");function y3(e,t,n,r){let s;const a=n,o=wt(e);if(o||hn(e)){const f=o&&Bs(e);let m=!1;f&&(m=!xr(e),e=_l(e)),s=new Array(e.length);for(let g=0,S=e.length;g<S;g++)s[g]=t(m?Fn(e[g]):e[g],g,void 0,a)}else if(typeof e=="number"){s=new Array(e);for(let f=0;f<e;f++)s[f]=t(f+1,f,void 0,a)}else if(Zt(e))if(e[Symbol.iterator])s=Array.from(e,(f,m)=>t(f,m,void 0,a));else{const f=Object.keys(e);s=new Array(f.length);for(let m=0,g=f.length;m<g;m++){const S=f[m];s[m]=t(e[S],S,m,a)}}else s=[];return s}const I0=e=>e?nh(e)?gl(e):I0(e.parent):null,bi=wn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>I0(e.parent),$root:e=>I0(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>pc(e),$forceUpdate:e=>e.f||(e.f=()=>{vc(e.update)}),$nextTick:e=>e.n||(e.n=us.bind(e.proxy)),$watch:e=>j3.bind(e)}),e0=(e,t)=>e!==Yt&&!e.__isScriptSetup&&Vt(e,t),w3={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:a,accessCache:o,type:f,appContext:m}=e;let g;if(t[0]!=="$"){const V=o[t];if(V!==void 0)switch(V){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return a[t]}else{if(e0(r,t))return o[t]=1,r[t];if(s!==Yt&&Vt(s,t))return o[t]=2,s[t];if((g=e.propsOptions[0])&&Vt(g,t))return o[t]=3,a[t];if(n!==Yt&&Vt(n,t))return o[t]=4,n[t];O0&&(o[t]=0)}}const S=bi[t];let b,C;if(S)return t==="$attrs"&&Ln(e.attrs,"get",""),S(e);if((b=f.__cssModules)&&(b=b[t]))return b;if(n!==Yt&&Vt(n,t))return o[t]=4,n[t];if(C=m.config.globalProperties,Vt(C,t))return C[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:a}=e;return e0(s,t)?(s[t]=n,!0):r!==Yt&&Vt(r,t)?(r[t]=n,!0):Vt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:a}},o){let f;return!!n[o]||e!==Yt&&Vt(e,o)||e0(t,o)||(f=a[0])&&Vt(f,o)||Vt(r,o)||Vt(bi,o)||Vt(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Vt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function mu(e){return wt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let O0=!0;function g3(e){const t=pc(e),n=e.proxy,r=e.ctx;O0=!1,t.beforeCreate&&vu(t.beforeCreate,e,"bc");const{data:s,computed:a,methods:o,watch:f,provide:m,inject:g,created:S,beforeMount:b,mounted:C,beforeUpdate:V,updated:J,activated:te,deactivated:_e,beforeDestroy:ke,beforeUnmount:U,destroyed:Re,unmounted:he,render:je,renderTracked:He,renderTriggered:De,errorCaptured:et,serverPrefetch:Se,expose:Ue,inheritAttrs:be,components:Be,directives:it,filters:bt}=t;if(g&&S3(g,r,null),o)for(const dt in o){const Rt=o[dt];Tt(Rt)&&(r[dt]=Rt.bind(n))}if(s){const dt=s.call(n,n);Zt(dt)&&(e.data=Fs(dt))}if(O0=!0,a)for(const dt in a){const Rt=a[dt],ln=Tt(Rt)?Rt.bind(n,n):Tt(Rt.get)?Rt.get.bind(n,n):Gr,gt=!Tt(Rt)&&Tt(Rt.set)?Rt.set.bind(n):Gr,Ne=Kt({get:ln,set:gt});Object.defineProperty(r,dt,{enumerable:!0,configurable:!0,get:()=>Ne.value,set:mt=>Ne.value=mt})}if(f)for(const dt in f)Vf(f[dt],r,n,dt);if(m){const dt=Tt(m)?m.call(n):m;Reflect.ownKeys(dt).forEach(Rt=>{sa(Rt,dt[Rt])})}S&&vu(S,e,"c");function Et(dt,Rt){wt(Rt)?Rt.forEach(ln=>dt(ln.bind(n))):Rt&&dt(Rt.bind(n))}if(Et(f3,b),Et(ca,C),Et(h3,V),Et(d3,J),Et(pl,te),Et($i,_e),Et(p3,et),Et(v3,He),Et(m3,De),Et(Vi,U),Et(Hi,he),Et(_3,Se),wt(Ue))if(Ue.length){const dt=e.exposed||(e.exposed={});Ue.forEach(Rt=>{Object.defineProperty(dt,Rt,{get:()=>n[Rt],set:ln=>n[Rt]=ln})})}else e.exposed||(e.exposed={});je&&e.render===Gr&&(e.render=je),be!=null&&(e.inheritAttrs=be),Be&&(e.components=Be),it&&(e.directives=it),Se&&Ff(e)}function S3(e,t,n=Gr){wt(e)&&(e=k0(e));for(const r in e){const s=e[r];let a;Zt(s)?"default"in s?a=tr(s.from||r,s.default,!0):a=tr(s.from||r):a=tr(s),fn(a)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):t[r]=a}}function vu(e,t,n){kr(wt(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Vf(e,t,n,r){let s=r.includes(".")?Qf(n,r):()=>n[r];if(hn(e)){const a=t[e];Tt(a)&&In(s,a)}else if(Tt(e))In(s,e.bind(n));else if(Zt(e))if(wt(e))e.forEach(a=>Vf(a,t,n,r));else{const a=Tt(e.handler)?e.handler.bind(n):t[e.handler];Tt(a)&&In(s,a,e)}}function pc(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:a,config:{optionMergeStrategies:o}}=e.appContext,f=a.get(t);let m;return f?m=f:!s.length&&!n&&!r?m=t:(m={},s.length&&s.forEach(g=>Mo(m,g,o,!0)),Mo(m,t,o)),Zt(t)&&a.set(t,m),m}function Mo(e,t,n,r=!1){const{mixins:s,extends:a}=t;a&&Mo(e,a,n,!0),s&&s.forEach(o=>Mo(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const f=x3[o]||n&&n[o];e[o]=f?f(e[o],t[o]):t[o]}return e}const x3={data:pu,props:bu,emits:bu,methods:ii,computed:ii,beforeCreate:Vn,created:Vn,beforeMount:Vn,mounted:Vn,beforeUpdate:Vn,updated:Vn,beforeDestroy:Vn,beforeUnmount:Vn,destroyed:Vn,unmounted:Vn,activated:Vn,deactivated:Vn,errorCaptured:Vn,serverPrefetch:Vn,components:ii,directives:ii,watch:E3,provide:pu,inject:A3};function pu(e,t){return t?e?function(){return wn(Tt(e)?e.call(this,this):e,Tt(t)?t.call(this,this):t)}:t:e}function A3(e,t){return ii(k0(e),k0(t))}function k0(e){if(wt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Vn(e,t){return e?[...new Set([].concat(e,t))]:t}function ii(e,t){return e?wn(Object.create(null),e,t):t}function bu(e,t){return e?wt(e)&&wt(t)?[...new Set([...e,...t])]:wn(Object.create(null),mu(e),mu(t??{})):t}function E3(e,t){if(!e)return t;if(!t)return e;const n=wn(Object.create(null),e);for(const r in t)n[r]=Vn(e[r],t[r]);return n}function Hf(){return{app:null,config:{isNativeTag:h2,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let R3=0;function M3(e,t){return function(r,s=null){Tt(r)||(r=wn({},r)),s!=null&&!Zt(s)&&(s=null);const a=Hf(),o=new WeakSet,f=[];let m=!1;const g=a.app={_uid:R3++,_component:r,_props:s,_container:null,_context:a,_instance:null,version:om,get config(){return a.config},set config(S){},use(S,...b){return o.has(S)||(S&&Tt(S.install)?(o.add(S),S.install(g,...b)):Tt(S)&&(o.add(S),S(g,...b))),g},mixin(S){return a.mixins.includes(S)||a.mixins.push(S),g},component(S,b){return b?(a.components[S]=b,g):a.components[S]},directive(S,b){return b?(a.directives[S]=b,g):a.directives[S]},mount(S,b,C){if(!m){const V=g._ceVNode||Ge(r,s);return V.appContext=a,C===!0?C="svg":C===!1&&(C=void 0),b&&t?t(V,S):e(V,S,C),m=!0,g._container=S,S.__vue_app__=g,gl(V.component)}},onUnmount(S){f.push(S)},unmount(){m&&(kr(f,g._instance,16),e(null,g._container),delete g._container.__vue_app__)},provide(S,b){return a.provides[S]=b,g},runWithContext(S){const b=ra;ra=g;try{return S()}finally{ra=b}}};return g}}let ra=null;function sa(e,t){if(Bn){let n=Bn.provides;const r=Bn.parent&&Bn.parent.provides;r===n&&(n=Bn.provides=Object.create(r)),n[e]=t}}function tr(e,t,n=!1){const r=Bn||er;if(r||ra){const s=ra?ra._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&Tt(t)?t.call(r&&r.proxy):t}}function T3(){return!!(Bn||er||ra)}const Df={},jf=()=>Object.create(Df),Xf=e=>Object.getPrototypeOf(e)===Df;function C3(e,t,n,r=!1){const s={},a=jf();e.propsDefaults=Object.create(null),qf(e,t,s,a);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:bf(s):e.type.props?e.props=s:e.props=a,e.attrs=a}function B3(e,t,n,r){const{props:s,attrs:a,vnode:{patchFlag:o}}=e,f=$t(s),[m]=e.propsOptions;let g=!1;if((r||o>0)&&!(o&16)){if(o&8){const S=e.vnode.dynamicProps;for(let b=0;b<S.length;b++){let C=S[b];if(yl(e.emitsOptions,C))continue;const V=t[C];if(m)if(Vt(a,C))V!==a[C]&&(a[C]=V,g=!0);else{const J=Os(C);s[J]=P0(m,f,J,V,e,!1)}else V!==a[C]&&(a[C]=V,g=!0)}}}else{qf(e,t,s,a)&&(g=!0);let S;for(const b in f)(!t||!Vt(t,b)&&((S=la(b))===b||!Vt(t,S)))&&(m?n&&(n[b]!==void 0||n[S]!==void 0)&&(s[b]=P0(m,f,b,void 0,e,!0)):delete s[b]);if(a!==f)for(const b in a)(!t||!Vt(t,b))&&(delete a[b],g=!0)}g&&ls(e.attrs,"set","")}function qf(e,t,n,r){const[s,a]=e.propsOptions;let o=!1,f;if(t)for(let m in t){if(di(m))continue;const g=t[m];let S;s&&Vt(s,S=Os(m))?!a||!a.includes(S)?n[S]=g:(f||(f={}))[S]=g:yl(e.emitsOptions,m)||(!(m in r)||g!==r[m])&&(r[m]=g,o=!0)}if(a){const m=$t(n),g=f||Yt;for(let S=0;S<a.length;S++){const b=a[S];n[b]=P0(s,m,b,g[b],e,!Vt(g,b))}}return o}function P0(e,t,n,r,s,a){const o=e[n];if(o!=null){const f=Vt(o,"default");if(f&&r===void 0){const m=o.default;if(o.type!==Function&&!o.skipFactory&&Tt(m)){const{propsDefaults:g}=s;if(n in g)r=g[n];else{const S=Di(s);r=g[n]=m.call(null,t),S()}}else r=m;s.ce&&s.ce._setProp(n,r)}o[0]&&(a&&!f?r=!1:o[1]&&(r===""||r===la(n))&&(r=!0))}return r}const I3=new WeakMap;function Uf(e,t,n=!1){const r=n?I3:t.propsCache,s=r.get(e);if(s)return s;const a=e.props,o={},f=[];let m=!1;if(!Tt(e)){const S=b=>{m=!0;const[C,V]=Uf(b,t,!0);wn(o,C),V&&f.push(...V)};!n&&t.mixins.length&&t.mixins.forEach(S),e.extends&&S(e.extends),e.mixins&&e.mixins.forEach(S)}if(!a&&!m)return Zt(e)&&r.set(e,Ba),Ba;if(wt(a))for(let S=0;S<a.length;S++){const b=Os(a[S]);yu(b)&&(o[b]=Yt)}else if(a)for(const S in a){const b=Os(S);if(yu(b)){const C=a[S],V=o[b]=wt(C)||Tt(C)?{type:C}:wn({},C),J=V.type;let te=!1,_e=!0;if(wt(J))for(let ke=0;ke<J.length;++ke){const U=J[ke],Re=Tt(U)&&U.name;if(Re==="Boolean"){te=!0;break}else Re==="String"&&(_e=!1)}else te=Tt(J)&&J.name==="Boolean";V[0]=te,V[1]=_e,(te||Vt(V,"default"))&&f.push(b)}}const g=[o,f];return Zt(e)&&r.set(e,g),g}function yu(e){return e[0]!=="$"&&!di(e)}const Yf=e=>e[0]==="_"||e==="$stable",bc=e=>wt(e)?e.map(Kr):[Kr(e)],O3=(e,t,n)=>{if(t._n)return t;const r=Qn((...s)=>bc(t(...s)),n);return r._c=!1,r},Kf=(e,t,n)=>{const r=e._ctx;for(const s in e){if(Yf(s))continue;const a=e[s];if(Tt(a))t[s]=O3(s,a,r);else if(a!=null){const o=bc(a);t[s]=()=>o}}},Wf=(e,t)=>{const n=bc(t);e.slots.default=()=>n},Gf=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},k3=(e,t,n)=>{const r=e.slots=jf();if(e.vnode.shapeFlag&32){const s=t._;s?(Gf(r,t,n),n&&z1(r,"_",s,!0)):Kf(t,r)}else t&&Wf(e,t)},P3=(e,t,n)=>{const{vnode:r,slots:s}=e;let a=!0,o=Yt;if(r.shapeFlag&32){const f=t._;f?n&&f===1?a=!1:Gf(s,t,n):(a=!t.$stable,Kf(t,s)),o=t}else t&&(Wf(e,t),o={default:1});if(a)for(const f in s)!Yf(f)&&o[f]==null&&delete s[f]},Gn=G3;function N3(e){return L3(e)}function L3(e,t){const n=dl();n.__VUE__=!0;const{insert:r,remove:s,patchProp:a,createElement:o,createText:f,createComment:m,setText:g,setElementText:S,parentNode:b,nextSibling:C,setScopeId:V=Gr,insertStaticContent:J}=e,te=($,D,ie,Ee=null,le=null,Fe=null,tt=void 0,Ke=null,Ze=!!D.dynamicChildren)=>{if($===D)return;$&&!Zs($,D)&&(Ee=W($),mt($,le,Fe,!0),$=null),D.patchFlag===-2&&(Ze=!1,D.dynamicChildren=null);const{type:Xe,ref:pt,shapeFlag:rt}=D;switch(Xe){case wl:_e($,D,ie,Ee);break;case Jn:ke($,D,ie,Ee);break;case r0:$==null&&U(D,ie,Ee,tt);break;case _r:Be($,D,ie,Ee,le,Fe,tt,Ke,Ze);break;default:rt&1?je($,D,ie,Ee,le,Fe,tt,Ke,Ze):rt&6?it($,D,ie,Ee,le,Fe,tt,Ke,Ze):(rt&64||rt&128)&&Xe.process($,D,ie,Ee,le,Fe,tt,Ke,Ze,Je)}pt!=null&&le&&B0(pt,$&&$.ref,Fe,D||$,!D)},_e=($,D,ie,Ee)=>{if($==null)r(D.el=f(D.children),ie,Ee);else{const le=D.el=$.el;D.children!==$.children&&g(le,D.children)}},ke=($,D,ie,Ee)=>{$==null?r(D.el=m(D.children||""),ie,Ee):D.el=$.el},U=($,D,ie,Ee)=>{[$.el,$.anchor]=J($.children,D,ie,Ee,$.el,$.anchor)},Re=({el:$,anchor:D},ie,Ee)=>{let le;for(;$&&$!==D;)le=C($),r($,ie,Ee),$=le;r(D,ie,Ee)},he=({el:$,anchor:D})=>{let ie;for(;$&&$!==D;)ie=C($),s($),$=ie;s(D)},je=($,D,ie,Ee,le,Fe,tt,Ke,Ze)=>{D.type==="svg"?tt="svg":D.type==="math"&&(tt="mathml"),$==null?He(D,ie,Ee,le,Fe,tt,Ke,Ze):Se($,D,le,Fe,tt,Ke,Ze)},He=($,D,ie,Ee,le,Fe,tt,Ke)=>{let Ze,Xe;const{props:pt,shapeFlag:rt,transition:ot,dirs:St}=$;if(Ze=$.el=o($.type,Fe,pt&&pt.is,pt),rt&8?S(Ze,$.children):rt&16&&et($.children,Ze,null,Ee,le,t0($,Fe),tt,Ke),St&&Ks($,null,Ee,"created"),De(Ze,$,$.scopeId,tt,Ee),pt){for(const jt in pt)jt!=="value"&&!di(jt)&&a(Ze,jt,null,pt[jt],Fe,Ee);"value"in pt&&a(Ze,"value",null,pt.value,Fe),(Xe=pt.onVnodeBeforeMount)&&Dr(Xe,Ee,$)}St&&Ks($,null,Ee,"beforeMount");const Ct=F3(le,ot);Ct&&ot.beforeEnter(Ze),r(Ze,D,ie),((Xe=pt&&pt.onVnodeMounted)||Ct||St)&&Gn(()=>{Xe&&Dr(Xe,Ee,$),Ct&&ot.enter(Ze),St&&Ks($,null,Ee,"mounted")},le)},De=($,D,ie,Ee,le)=>{if(ie&&V($,ie),Ee)for(let Fe=0;Fe<Ee.length;Fe++)V($,Ee[Fe]);if(le){let Fe=le.subTree;if(D===Fe||Jf(Fe.type)&&(Fe.ssContent===D||Fe.ssFallback===D)){const tt=le.vnode;De($,tt,tt.scopeId,tt.slotScopeIds,le.parent)}}},et=($,D,ie,Ee,le,Fe,tt,Ke,Ze=0)=>{for(let Xe=Ze;Xe<$.length;Xe++){const pt=$[Xe]=Ke?Ms($[Xe]):Kr($[Xe]);te(null,pt,D,ie,Ee,le,Fe,tt,Ke)}},Se=($,D,ie,Ee,le,Fe,tt)=>{const Ke=D.el=$.el;let{patchFlag:Ze,dynamicChildren:Xe,dirs:pt}=D;Ze|=$.patchFlag&16;const rt=$.props||Yt,ot=D.props||Yt;let St;if(ie&&Ws(ie,!1),(St=ot.onVnodeBeforeUpdate)&&Dr(St,ie,D,$),pt&&Ks(D,$,ie,"beforeUpdate"),ie&&Ws(ie,!0),(rt.innerHTML&&ot.innerHTML==null||rt.textContent&&ot.textContent==null)&&S(Ke,""),Xe?Ue($.dynamicChildren,Xe,Ke,ie,Ee,t0(D,le),Fe):tt||Rt($,D,Ke,null,ie,Ee,t0(D,le),Fe,!1),Ze>0){if(Ze&16)be(Ke,rt,ot,ie,le);else if(Ze&2&&rt.class!==ot.class&&a(Ke,"class",null,ot.class,le),Ze&4&&a(Ke,"style",rt.style,ot.style,le),Ze&8){const Ct=D.dynamicProps;for(let jt=0;jt<Ct.length;jt++){const Nt=Ct[jt],kn=rt[Nt],xn=ot[Nt];(xn!==kn||Nt==="value")&&a(Ke,Nt,kn,xn,le,ie)}}Ze&1&&$.children!==D.children&&S(Ke,D.children)}else!tt&&Xe==null&&be(Ke,rt,ot,ie,le);((St=ot.onVnodeUpdated)||pt)&&Gn(()=>{St&&Dr(St,ie,D,$),pt&&Ks(D,$,ie,"updated")},Ee)},Ue=($,D,ie,Ee,le,Fe,tt)=>{for(let Ke=0;Ke<D.length;Ke++){const Ze=$[Ke],Xe=D[Ke],pt=Ze.el&&(Ze.type===_r||!Zs(Ze,Xe)||Ze.shapeFlag&70)?b(Ze.el):ie;te(Ze,Xe,pt,null,Ee,le,Fe,tt,!0)}},be=($,D,ie,Ee,le)=>{if(D!==ie){if(D!==Yt)for(const Fe in D)!di(Fe)&&!(Fe in ie)&&a($,Fe,D[Fe],null,le,Ee);for(const Fe in ie){if(di(Fe))continue;const tt=ie[Fe],Ke=D[Fe];tt!==Ke&&Fe!=="value"&&a($,Fe,Ke,tt,le,Ee)}"value"in ie&&a($,"value",D.value,ie.value,le)}},Be=($,D,ie,Ee,le,Fe,tt,Ke,Ze)=>{const Xe=D.el=$?$.el:f(""),pt=D.anchor=$?$.anchor:f("");let{patchFlag:rt,dynamicChildren:ot,slotScopeIds:St}=D;St&&(Ke=Ke?Ke.concat(St):St),$==null?(r(Xe,ie,Ee),r(pt,ie,Ee),et(D.children||[],ie,pt,le,Fe,tt,Ke,Ze)):rt>0&&rt&64&&ot&&$.dynamicChildren?(Ue($.dynamicChildren,ot,ie,le,Fe,tt,Ke),(D.key!=null||le&&D===le.subTree)&&yc($,D,!0)):Rt($,D,ie,pt,le,Fe,tt,Ke,Ze)},it=($,D,ie,Ee,le,Fe,tt,Ke,Ze)=>{D.slotScopeIds=Ke,$==null?D.shapeFlag&512?le.ctx.activate(D,ie,Ee,tt,Ze):bt(D,ie,Ee,le,Fe,tt,Ze):xt($,D,Ze)},bt=($,D,ie,Ee,le,Fe,tt)=>{const Ke=$.component=tm($,Ee,le);if(vl($)&&(Ke.ctx.renderer=Je),nm(Ke,!1,tt),Ke.asyncDep){if(le&&le.registerDep(Ke,Et,tt),!$.el){const Ze=Ke.subTree=Ge(Jn);ke(null,Ze,D,ie)}}else Et(Ke,$,D,ie,le,Fe,tt)},xt=($,D,ie)=>{const Ee=D.component=$.component;if(K3($,D,ie))if(Ee.asyncDep&&!Ee.asyncResolved){dt(Ee,D,ie);return}else Ee.next=D,Ee.update();else D.el=$.el,Ee.vnode=D},Et=($,D,ie,Ee,le,Fe,tt)=>{const Ke=()=>{if($.isMounted){let{next:rt,bu:ot,u:St,parent:Ct,vnode:jt}=$;{const An=zf($);if(An){rt&&(rt.el=jt.el,dt($,rt,tt)),An.asyncDep.then(()=>{$.isUnmounted||Ke()});return}}let Nt=rt,kn;Ws($,!1),rt?(rt.el=jt.el,dt($,rt,tt)):rt=jt,ot&&Wl(ot),(kn=rt.props&&rt.props.onVnodeBeforeUpdate)&&Dr(kn,Ct,rt,jt),Ws($,!0);const xn=n0($),ar=$.subTree;$.subTree=xn,te(ar,xn,b(ar.el),W(ar),$,le,Fe),rt.el=xn.el,Nt===null&&W3($,xn.el),St&&Gn(St,le),(kn=rt.props&&rt.props.onVnodeUpdated)&&Gn(()=>Dr(kn,Ct,rt,jt),le)}else{let rt;const{el:ot,props:St}=D,{bm:Ct,m:jt,parent:Nt,root:kn,type:xn}=$,ar=pi(D);if(Ws($,!1),Ct&&Wl(Ct),!ar&&(rt=St&&St.onVnodeBeforeMount)&&Dr(rt,Nt,D),Ws($,!0),ot&&At){const An=()=>{$.subTree=n0($),At(ot,$.subTree,$,le,null)};ar&&xn.__asyncHydrate?xn.__asyncHydrate(ot,$,An):An()}else{kn.ce&&kn.ce._injectChildStyle(xn);const An=$.subTree=n0($);te(null,An,ie,Ee,$,le,Fe),D.el=An.el}if(jt&&Gn(jt,le),!ar&&(rt=St&&St.onVnodeMounted)){const An=D;Gn(()=>Dr(rt,Nt,An),le)}(D.shapeFlag&256||Nt&&pi(Nt.vnode)&&Nt.vnode.shapeFlag&256)&&$.a&&Gn($.a,le),$.isMounted=!0,D=ie=Ee=null}};$.scope.on();const Ze=$.effect=new rf(Ke);$.scope.off();const Xe=$.update=Ze.run.bind(Ze),pt=$.job=Ze.runIfDirty.bind(Ze);pt.i=$,pt.id=$.uid,Ze.scheduler=()=>vc(pt),Ws($,!0),Xe()},dt=($,D,ie)=>{D.component=$;const Ee=$.vnode.props;$.vnode=D,$.next=null,B3($,D.props,Ee,ie),P3($,D.children,ie),Ns(),fu($),Ls()},Rt=($,D,ie,Ee,le,Fe,tt,Ke,Ze=!1)=>{const Xe=$&&$.children,pt=$?$.shapeFlag:0,rt=D.children,{patchFlag:ot,shapeFlag:St}=D;if(ot>0){if(ot&128){gt(Xe,rt,ie,Ee,le,Fe,tt,Ke,Ze);return}else if(ot&256){ln(Xe,rt,ie,Ee,le,Fe,tt,Ke,Ze);return}}St&8?(pt&16&&dn(Xe,le,Fe),rt!==Xe&&S(ie,rt)):pt&16?St&16?gt(Xe,rt,ie,Ee,le,Fe,tt,Ke,Ze):dn(Xe,le,Fe,!0):(pt&8&&S(ie,""),St&16&&et(rt,ie,Ee,le,Fe,tt,Ke,Ze))},ln=($,D,ie,Ee,le,Fe,tt,Ke,Ze)=>{$=$||Ba,D=D||Ba;const Xe=$.length,pt=D.length,rt=Math.min(Xe,pt);let ot;for(ot=0;ot<rt;ot++){const St=D[ot]=Ze?Ms(D[ot]):Kr(D[ot]);te($[ot],St,ie,null,le,Fe,tt,Ke,Ze)}Xe>pt?dn($,le,Fe,!0,!1,rt):et(D,ie,Ee,le,Fe,tt,Ke,Ze,rt)},gt=($,D,ie,Ee,le,Fe,tt,Ke,Ze)=>{let Xe=0;const pt=D.length;let rt=$.length-1,ot=pt-1;for(;Xe<=rt&&Xe<=ot;){const St=$[Xe],Ct=D[Xe]=Ze?Ms(D[Xe]):Kr(D[Xe]);if(Zs(St,Ct))te(St,Ct,ie,null,le,Fe,tt,Ke,Ze);else break;Xe++}for(;Xe<=rt&&Xe<=ot;){const St=$[rt],Ct=D[ot]=Ze?Ms(D[ot]):Kr(D[ot]);if(Zs(St,Ct))te(St,Ct,ie,null,le,Fe,tt,Ke,Ze);else break;rt--,ot--}if(Xe>rt){if(Xe<=ot){const St=ot+1,Ct=St<pt?D[St].el:Ee;for(;Xe<=ot;)te(null,D[Xe]=Ze?Ms(D[Xe]):Kr(D[Xe]),ie,Ct,le,Fe,tt,Ke,Ze),Xe++}}else if(Xe>ot)for(;Xe<=rt;)mt($[Xe],le,Fe,!0),Xe++;else{const St=Xe,Ct=Xe,jt=new Map;for(Xe=Ct;Xe<=ot;Xe++){const Jt=D[Xe]=Ze?Ms(D[Xe]):Kr(D[Xe]);Jt.key!=null&&jt.set(Jt.key,Xe)}let Nt,kn=0;const xn=ot-Ct+1;let ar=!1,An=0;const Lr=new Array(xn);for(Xe=0;Xe<xn;Xe++)Lr[Xe]=0;for(Xe=St;Xe<=rt;Xe++){const Jt=$[Xe];if(kn>=xn){mt(Jt,le,Fe,!0);continue}let Xn;if(Jt.key!=null)Xn=jt.get(Jt.key);else for(Nt=Ct;Nt<=ot;Nt++)if(Lr[Nt-Ct]===0&&Zs(Jt,D[Nt])){Xn=Nt;break}Xn===void 0?mt(Jt,le,Fe,!0):(Lr[Xn-Ct]=Xe+1,Xn>=An?An=Xn:ar=!0,te(Jt,D[Xn],ie,null,le,Fe,tt,Ke,Ze),kn++)}const qi=ar?$3(Lr):Ba;for(Nt=qi.length-1,Xe=xn-1;Xe>=0;Xe--){const Jt=Ct+Xe,Xn=D[Jt],Ui=Jt+1<pt?D[Jt+1].el:Ee;Lr[Xe]===0?te(null,Xn,ie,Ui,le,Fe,tt,Ke,Ze):ar&&(Nt<0||Xe!==qi[Nt]?Ne(Xn,ie,Ui,2):Nt--)}}},Ne=($,D,ie,Ee,le=null)=>{const{el:Fe,type:tt,transition:Ke,children:Ze,shapeFlag:Xe}=$;if(Xe&6){Ne($.component.subTree,D,ie,Ee);return}if(Xe&128){$.suspense.move(D,ie,Ee);return}if(Xe&64){tt.move($,D,ie,Je);return}if(tt===_r){r(Fe,D,ie);for(let rt=0;rt<Ze.length;rt++)Ne(Ze[rt],D,ie,Ee);r($.anchor,D,ie);return}if(tt===r0){Re($,D,ie);return}if(Ee!==2&&Xe&1&&Ke)if(Ee===0)Ke.beforeEnter(Fe),r(Fe,D,ie),Gn(()=>Ke.enter(Fe),le);else{const{leave:rt,delayLeave:ot,afterLeave:St}=Ke,Ct=()=>r(Fe,D,ie),jt=()=>{rt(Fe,()=>{Ct(),St&&St()})};ot?ot(Fe,Ct,jt):jt()}else r(Fe,D,ie)},mt=($,D,ie,Ee=!1,le=!1)=>{const{type:Fe,props:tt,ref:Ke,children:Ze,dynamicChildren:Xe,shapeFlag:pt,patchFlag:rt,dirs:ot,cacheIndex:St}=$;if(rt===-2&&(le=!1),Ke!=null&&B0(Ke,null,ie,$,!0),St!=null&&(D.renderCache[St]=void 0),pt&256){D.ctx.deactivate($);return}const Ct=pt&1&&ot,jt=!pi($);let Nt;if(jt&&(Nt=tt&&tt.onVnodeBeforeUnmount)&&Dr(Nt,D,$),pt&6)sr($.component,ie,Ee);else{if(pt&128){$.suspense.unmount(ie,Ee);return}Ct&&Ks($,null,D,"beforeUnmount"),pt&64?$.type.remove($,D,ie,Je,Ee):Xe&&!Xe.hasOnce&&(Fe!==_r||rt>0&&rt&64)?dn(Xe,D,ie,!1,!0):(Fe===_r&&rt&384||!le&&pt&16)&&dn(Ze,D,ie),Ee&&lt($)}(jt&&(Nt=tt&&tt.onVnodeUnmounted)||Ct)&&Gn(()=>{Nt&&Dr(Nt,D,$),Ct&&Ks($,null,D,"unmounted")},ie)},lt=$=>{const{type:D,el:ie,anchor:Ee,transition:le}=$;if(D===_r){E(ie,Ee);return}if(D===r0){he($);return}const Fe=()=>{s(ie),le&&!le.persisted&&le.afterLeave&&le.afterLeave()};if($.shapeFlag&1&&le&&!le.persisted){const{leave:tt,delayLeave:Ke}=le,Ze=()=>tt(ie,Fe);Ke?Ke($.el,Fe,Ze):Ze()}else Fe()},E=($,D)=>{let ie;for(;$!==D;)ie=C($),s($),$=ie;s(D)},sr=($,D,ie)=>{const{bum:Ee,scope:le,job:Fe,subTree:tt,um:Ke,m:Ze,a:Xe}=$;wu(Ze),wu(Xe),Ee&&Wl(Ee),le.stop(),Fe&&(Fe.flags|=8,mt(tt,$,D,ie)),Ke&&Gn(Ke,D),Gn(()=>{$.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&$.asyncDep&&!$.asyncResolved&&$.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},dn=($,D,ie,Ee=!1,le=!1,Fe=0)=>{for(let tt=Fe;tt<$.length;tt++)mt($[tt],D,ie,Ee,le)},W=$=>{if($.shapeFlag&6)return W($.component.subTree);if($.shapeFlag&128)return $.suspense.next();const D=C($.anchor||$.el),ie=D&&D[Tf];return ie?C(ie):D};let Ie=!1;const xe=($,D,ie)=>{$==null?D._vnode&&mt(D._vnode,null,null,!0):te(D._vnode||null,$,D,null,null,null,ie),D._vnode=$,Ie||(Ie=!0,fu(),Af(),Ie=!1)},Je={p:te,um:mt,m:Ne,r:lt,mt:bt,mc:et,pc:Rt,pbc:Ue,n:W,o:e};let _t,At;return{render:xe,hydrate:_t,createApp:M3(xe,_t)}}function t0({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Ws({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function F3(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function yc(e,t,n=!1){const r=e.children,s=t.children;if(wt(r)&&wt(s))for(let a=0;a<r.length;a++){const o=r[a];let f=s[a];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=s[a]=Ms(s[a]),f.el=o.el),!n&&f.patchFlag!==-2&&yc(o,f)),f.type===wl&&(f.el=o.el)}}function $3(e){const t=e.slice(),n=[0];let r,s,a,o,f;const m=e.length;for(r=0;r<m;r++){const g=e[r];if(g!==0){if(s=n[n.length-1],e[s]<g){t[r]=s,n.push(r);continue}for(a=0,o=n.length-1;a<o;)f=a+o>>1,e[n[f]]<g?a=f+1:o=f;g<e[n[a]]&&(a>0&&(t[r]=n[a-1]),n[a]=r)}}for(a=n.length,o=n[a-1];a-- >0;)n[a]=o,o=t[o];return n}function zf(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:zf(t)}function wu(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const V3=Symbol.for("v-scx"),H3=()=>tr(V3);function D3(e,t){return wc(e,null,t)}function In(e,t,n){return wc(e,t,n)}function wc(e,t,n=Yt){const{immediate:r,deep:s,flush:a,once:o}=n,f=wn({},n),m=t&&r||!t&&a!=="post";let g;if(Ii){if(a==="sync"){const V=H3();g=V.__watcherHandles||(V.__watcherHandles=[])}else if(!m){const V=()=>{};return V.stop=Gr,V.resume=Gr,V.pause=Gr,V}}const S=Bn;f.call=(V,J,te)=>kr(V,S,J,te);let b=!1;a==="post"?f.scheduler=V=>{Gn(V,S&&S.suspense)}:a!=="sync"&&(b=!0,f.scheduler=(V,J)=>{J?V():vc(V)}),f.augmentJob=V=>{t&&(V.flags|=4),b&&(V.flags|=2,S&&(V.id=S.uid,V.i=S))};const C=e3(e,t,f);return Ii&&(g?g.push(C):m&&C()),C}function j3(e,t,n){const r=this.proxy,s=hn(e)?e.includes(".")?Qf(r,e):()=>r[e]:e.bind(r,r);let a;Tt(t)?a=t:(a=t.handler,n=t);const o=Di(this),f=wc(s,a.bind(r),n);return o(),f}function Qf(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const X3=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Os(t)}Modifiers`]||e[`${la(t)}Modifiers`];function q3(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Yt;let s=n;const a=t.startsWith("update:"),o=a&&X3(r,t.slice(7));o&&(o.trim&&(s=n.map(S=>hn(S)?S.trim():S)),o.number&&(s=n.map(p2)));let f,m=r[f=Kl(t)]||r[f=Kl(Os(t))];!m&&a&&(m=r[f=Kl(la(t))]),m&&kr(m,e,6,s);const g=r[f+"Once"];if(g){if(!e.emitted)e.emitted={};else if(e.emitted[f])return;e.emitted[f]=!0,kr(g,e,6,s)}}function Zf(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const a=e.emits;let o={},f=!1;if(!Tt(e)){const m=g=>{const S=Zf(g,t,!0);S&&(f=!0,wn(o,S))};!n&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}return!a&&!f?(Zt(e)&&r.set(e,null),null):(wt(a)?a.forEach(m=>o[m]=null):wn(o,a),Zt(e)&&r.set(e,o),o)}function yl(e,t){return!e||!ul(t)?!1:(t=t.slice(2).replace(/Once$/,""),Vt(e,t[0].toLowerCase()+t.slice(1))||Vt(e,la(t))||Vt(e,t))}function n0(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[a],slots:o,attrs:f,emit:m,render:g,renderCache:S,props:b,data:C,setupState:V,ctx:J,inheritAttrs:te}=e,_e=Ro(e);let ke,U;try{if(n.shapeFlag&4){const he=s||r,je=he;ke=Kr(g.call(je,he,S,b,V,C,J)),U=f}else{const he=t;ke=Kr(he.length>1?he(b,{attrs:f,slots:o,emit:m}):he(b,null)),U=t.props?f:U3(f)}}catch(he){yi.length=0,ml(he,e,1),ke=Ge(Jn)}let Re=ke;if(U&&te!==!1){const he=Object.keys(U),{shapeFlag:je}=Re;he.length&&je&7&&(a&&he.some(rc)&&(U=Y3(U,a)),Re=ks(Re,U,!1,!0))}return n.dirs&&(Re=ks(Re,null,!1,!0),Re.dirs=Re.dirs?Re.dirs.concat(n.dirs):n.dirs),n.transition&&Ci(Re,n.transition),ke=Re,Ro(_e),ke}const U3=e=>{let t;for(const n in e)(n==="class"||n==="style"||ul(n))&&((t||(t={}))[n]=e[n]);return t},Y3=(e,t)=>{const n={};for(const r in e)(!rc(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function K3(e,t,n){const{props:r,children:s,component:a}=e,{props:o,children:f,patchFlag:m}=t,g=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&m>=0){if(m&1024)return!0;if(m&16)return r?gu(r,o,g):!!o;if(m&8){const S=t.dynamicProps;for(let b=0;b<S.length;b++){const C=S[b];if(o[C]!==r[C]&&!yl(g,C))return!0}}}else return(s||f)&&(!f||!f.$stable)?!0:r===o?!1:r?o?gu(r,o,g):!0:!!o;return!1}function gu(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const a=r[s];if(t[a]!==e[a]&&!yl(n,a))return!0}return!1}function W3({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Jf=e=>e.__isSuspense;function G3(e,t){t&&t.pendingBranch?wt(e)?t.effects.push(...e):t.effects.push(e):r3(e)}const _r=Symbol.for("v-fgt"),wl=Symbol.for("v-txt"),Jn=Symbol.for("v-cmt"),r0=Symbol.for("v-stc"),yi=[];let mr=null;function Sr(e=!1){yi.push(mr=e?null:[])}function z3(){yi.pop(),mr=yi[yi.length-1]||null}let Bi=1;function Su(e){Bi+=e,e<0&&mr&&(mr.hasOnce=!0)}function eh(e){return e.dynamicChildren=Bi>0?mr||Ba:null,z3(),Bi>0&&mr&&mr.push(e),e}function Ja(e,t,n,r,s,a){return eh(zn(e,t,n,r,s,a,!0))}function ea(e,t,n,r,s){return eh(Ge(e,t,n,r,s,!0))}function To(e){return e?e.__v_isVNode===!0:!1}function Zs(e,t){return e.type===t.type&&e.key===t.key}const th=({key:e})=>e??null,_o=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?hn(e)||fn(e)||Tt(e)?{i:er,r:e,k:t,f:!!n}:e:null);function zn(e,t=null,n=null,r=0,s=null,a=e===_r?0:1,o=!1,f=!1){const m={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&th(t),ref:t&&_o(t),scopeId:Rf,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:er};return f?(gc(m,n),a&128&&e.normalize(m)):n&&(m.shapeFlag|=hn(n)?8:16),Bi>0&&!o&&mr&&(m.patchFlag>0||a&6)&&m.patchFlag!==32&&mr.push(m),m}const Ge=Q3;function Q3(e,t=null,n=null,r=0,s=null,a=!1){if((!e||e===b3)&&(e=Jn),To(e)){const f=ks(e,t,!0);return n&&gc(f,n),Bi>0&&!a&&mr&&(f.shapeFlag&6?mr[mr.indexOf(e)]=f:mr.push(f)),f.patchFlag=-2,f}if(im(e)&&(e=e.__vccOpts),t){t=Z3(t);let{class:f,style:m}=t;f&&!hn(f)&&(t.class=oc(f)),Zt(m)&&(_c(m)&&!wt(m)&&(m=wn({},m)),t.style=ic(m))}const o=hn(e)?1:Jf(e)?128:Cf(e)?64:Zt(e)?4:Tt(e)?2:0;return zn(e,t,n,r,s,o,a,!0)}function Z3(e){return e?_c(e)||Xf(e)?wn({},e):e:null}function ks(e,t,n=!1,r=!1){const{props:s,ref:a,patchFlag:o,children:f,transition:m}=e,g=t?Qr(s||{},t):s,S={__v_isVNode:!0,__v_skip:!0,type:e.type,props:g,key:g&&th(g),ref:t&&t.ref?n&&a?wt(a)?a.concat(_o(t)):[a,_o(t)]:_o(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:f,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==_r?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:m,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ks(e.ssContent),ssFallback:e.ssFallback&&ks(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return m&&r&&Ci(S,m.clone(S)),S}function dr(e=" ",t=0){return Ge(wl,null,e,t)}function so(e="",t=!1){return t?(Sr(),ea(Jn,null,e)):Ge(Jn,null,e)}function Kr(e){return e==null||typeof e=="boolean"?Ge(Jn):wt(e)?Ge(_r,null,e.slice()):To(e)?Ms(e):Ge(wl,null,String(e))}function Ms(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ks(e)}function gc(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(wt(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),gc(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!Xf(t)?t._ctx=er:s===3&&er&&(er.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Tt(t)?(t={default:t,_ctx:er},n=32):(t=String(t),r&64?(n=16,t=[dr(t)]):n=8);e.children=t,e.shapeFlag|=n}function Qr(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=oc([t.class,r.class]));else if(s==="style")t.style=ic([t.style,r.style]);else if(ul(s)){const a=t[s],o=r[s];o&&a!==o&&!(wt(a)&&a.includes(o))&&(t[s]=a?[].concat(a,o):o)}else s!==""&&(t[s]=r[s])}return t}function Dr(e,t,n,r=null){kr(e,t,7,[n,r])}const J3=Hf();let em=0;function tm(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||J3,a={uid:em++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ef(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Uf(r,s),emitsOptions:Zf(r,s),emit:null,emitted:null,propsDefaults:Yt,inheritAttrs:r.inheritAttrs,ctx:Yt,data:Yt,props:Yt,attrs:Yt,slots:Yt,refs:Yt,setupState:Yt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=q3.bind(null,a),e.ce&&e.ce(a),a}let Bn=null;const ua=()=>Bn||er;let Co,N0;{const e=dl(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),a=>{s.length>1?s.forEach(o=>o(a)):s[0](a)}};Co=t("__VUE_INSTANCE_SETTERS__",n=>Bn=n),N0=t("__VUE_SSR_SETTERS__",n=>Ii=n)}const Di=e=>{const t=Bn;return Co(e),e.scope.on(),()=>{e.scope.off(),Co(t)}},xu=()=>{Bn&&Bn.scope.off(),Co(null)};function nh(e){return e.vnode.shapeFlag&4}let Ii=!1;function nm(e,t=!1,n=!1){t&&N0(t);const{props:r,children:s}=e.vnode,a=nh(e);C3(e,r,a,t),k3(e,s,n);const o=a?rm(e,t):void 0;return t&&N0(!1),o}function rm(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,w3);const{setup:r}=n;if(r){Ns();const s=e.setupContext=r.length>1?am(e):null,a=Di(e),o=Fi(r,e,0,[e.props,s]),f=Y1(o);if(Ls(),a(),(f||e.sp)&&!pi(e)&&Ff(e),f){if(o.then(xu,xu),t)return o.then(m=>{Au(e,m,t)}).catch(m=>{ml(m,e,0)});e.asyncDep=o}else Au(e,o,t)}else rh(e,t)}function Au(e,t,n){Tt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Zt(t)&&(e.setupState=gf(t)),rh(e,n)}let Eu;function rh(e,t,n){const r=e.type;if(!e.render){if(!t&&Eu&&!r.render){const s=r.template||pc(e).template;if(s){const{isCustomElement:a,compilerOptions:o}=e.appContext.config,{delimiters:f,compilerOptions:m}=r,g=wn(wn({isCustomElement:a,delimiters:f},o),m);r.render=Eu(s,g)}}e.render=r.render||Gr}{const s=Di(e);Ns();try{g3(e)}finally{Ls(),s()}}}const sm={get(e,t){return Ln(e,"get",""),e[t]}};function am(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,sm),slots:e.slots,emit:e.emit,expose:t}}function gl(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(gf(mc(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in bi)return bi[n](e)},has(t,n){return n in t||n in bi}})):e.proxy}function im(e){return Tt(e)&&"__vccOpts"in e}const Kt=(e,t)=>Z2(e,t,Ii);function Sc(e,t,n){const r=arguments.length;return r===2?Zt(t)&&!wt(t)?To(t)?Ge(e,null,[t]):Ge(e,t):Ge(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&To(n)&&(n=[n]),Ge(e,t,n))}const om="3.5.12";/**
* @vue/runtime-dom v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let L0;const Ru=typeof window<"u"&&window.trustedTypes;if(Ru)try{L0=Ru.createPolicy("vue",{createHTML:e=>e})}catch{}const sh=L0?e=>L0.createHTML(e):e=>e,lm="http://www.w3.org/2000/svg",cm="http://www.w3.org/1998/Math/MathML",os=typeof document<"u"?document:null,Mu=os&&os.createElement("template"),um={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?os.createElementNS(lm,e):t==="mathml"?os.createElementNS(cm,e):n?os.createElement(e,{is:n}):os.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>os.createTextNode(e),createComment:e=>os.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>os.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,a){const o=n?n.previousSibling:t.lastChild;if(s&&(s===a||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===a||!(s=s.nextSibling)););else{Mu.innerHTML=sh(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const f=Mu.content;if(r==="svg"||r==="mathml"){const m=f.firstChild;for(;m.firstChild;)f.appendChild(m.firstChild);f.removeChild(m)}t.insertBefore(f,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},ys="transition",ei="animation",Oi=Symbol("_vtc"),ah={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},fm=wn({},Of,ah),hm=e=>(e.displayName="Transition",e.props=fm,e),ih=hm((e,{slots:t})=>Sc(c3,dm(e),t)),Gs=(e,t=[])=>{wt(e)?e.forEach(n=>n(...t)):e&&e(...t)},Tu=e=>e?wt(e)?e.some(t=>t.length>1):e.length>1:!1;function dm(e){const t={};for(const Be in e)Be in ah||(t[Be]=e[Be]);if(e.css===!1)return t;const{name:n="v",type:r,duration:s,enterFromClass:a=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:f=`${n}-enter-to`,appearFromClass:m=a,appearActiveClass:g=o,appearToClass:S=f,leaveFromClass:b=`${n}-leave-from`,leaveActiveClass:C=`${n}-leave-active`,leaveToClass:V=`${n}-leave-to`}=e,J=_m(s),te=J&&J[0],_e=J&&J[1],{onBeforeEnter:ke,onEnter:U,onEnterCancelled:Re,onLeave:he,onLeaveCancelled:je,onBeforeAppear:He=ke,onAppear:De=U,onAppearCancelled:et=Re}=t,Se=(Be,it,bt)=>{zs(Be,it?S:f),zs(Be,it?g:o),bt&&bt()},Ue=(Be,it)=>{Be._isLeaving=!1,zs(Be,b),zs(Be,V),zs(Be,C),it&&it()},be=Be=>(it,bt)=>{const xt=Be?De:U,Et=()=>Se(it,Be,bt);Gs(xt,[it,Et]),Cu(()=>{zs(it,Be?m:a),ws(it,Be?S:f),Tu(xt)||Bu(it,r,te,Et)})};return wn(t,{onBeforeEnter(Be){Gs(ke,[Be]),ws(Be,a),ws(Be,o)},onBeforeAppear(Be){Gs(He,[Be]),ws(Be,m),ws(Be,g)},onEnter:be(!1),onAppear:be(!0),onLeave(Be,it){Be._isLeaving=!0;const bt=()=>Ue(Be,it);ws(Be,b),ws(Be,C),pm(),Cu(()=>{Be._isLeaving&&(zs(Be,b),ws(Be,V),Tu(he)||Bu(Be,r,_e,bt))}),Gs(he,[Be,bt])},onEnterCancelled(Be){Se(Be,!1),Gs(Re,[Be])},onAppearCancelled(Be){Se(Be,!0),Gs(et,[Be])},onLeaveCancelled(Be){Ue(Be),Gs(je,[Be])}})}function _m(e){if(e==null)return null;if(Zt(e))return[s0(e.enter),s0(e.leave)];{const t=s0(e);return[t,t]}}function s0(e){return b2(e)}function ws(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Oi]||(e[Oi]=new Set)).add(t)}function zs(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[Oi];n&&(n.delete(t),n.size||(e[Oi]=void 0))}function Cu(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let mm=0;function Bu(e,t,n,r){const s=e._endId=++mm,a=()=>{s===e._endId&&r()};if(n!=null)return setTimeout(a,n);const{type:o,timeout:f,propCount:m}=vm(e,t);if(!o)return r();const g=o+"end";let S=0;const b=()=>{e.removeEventListener(g,C),a()},C=V=>{V.target===e&&++S>=m&&b()};setTimeout(()=>{S<m&&b()},f+1),e.addEventListener(g,C)}function vm(e,t){const n=window.getComputedStyle(e),r=J=>(n[J]||"").split(", "),s=r(`${ys}Delay`),a=r(`${ys}Duration`),o=Iu(s,a),f=r(`${ei}Delay`),m=r(`${ei}Duration`),g=Iu(f,m);let S=null,b=0,C=0;t===ys?o>0&&(S=ys,b=o,C=a.length):t===ei?g>0&&(S=ei,b=g,C=m.length):(b=Math.max(o,g),S=b>0?o>g?ys:ei:null,C=S?S===ys?a.length:m.length:0);const V=S===ys&&/\b(transform|all)(,|$)/.test(r(`${ys}Property`).toString());return{type:S,timeout:b,propCount:C,hasTransform:V}}function Iu(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>Ou(n)+Ou(e[r])))}function Ou(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function pm(){return document.body.offsetHeight}function bm(e,t,n){const r=e[Oi];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Bo=Symbol("_vod"),oh=Symbol("_vsh"),lh={beforeMount(e,{value:t},{transition:n}){e[Bo]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):ti(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),ti(e,!0),r.enter(e)):r.leave(e,()=>{ti(e,!1)}):ti(e,t))},beforeUnmount(e,{value:t}){ti(e,t)}};function ti(e,t){e.style.display=t?e[Bo]:"none",e[oh]=!t}const ym=Symbol(""),wm=/(^|;)\s*display\s*:/;function gm(e,t,n){const r=e.style,s=hn(n);let a=!1;if(n&&!s){if(t)if(hn(t))for(const o of t.split(";")){const f=o.slice(0,o.indexOf(":")).trim();n[f]==null&&mo(r,f,"")}else for(const o in t)n[o]==null&&mo(r,o,"");for(const o in n)o==="display"&&(a=!0),mo(r,o,n[o])}else if(s){if(t!==n){const o=r[ym];o&&(n+=";"+o),r.cssText=n,a=wm.test(n)}}else t&&e.removeAttribute("style");Bo in e&&(e[Bo]=a?r.display:"",e[oh]&&(r.display="none"))}const ku=/\s*!important$/;function mo(e,t,n){if(wt(n))n.forEach(r=>mo(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Sm(e,t);ku.test(n)?e.setProperty(la(r),n.replace(ku,""),"important"):e[r]=n}}const Pu=["Webkit","Moz","ms"],a0={};function Sm(e,t){const n=a0[t];if(n)return n;let r=Os(t);if(r!=="filter"&&r in e)return a0[t]=r;r=G1(r);for(let s=0;s<Pu.length;s++){const a=Pu[s]+r;if(a in e)return a0[t]=a}return t}const Nu="http://www.w3.org/1999/xlink";function Lu(e,t,n,r,s,a=A2(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Nu,t.slice(6,t.length)):e.setAttributeNS(Nu,t,n):n==null||a&&!Q1(n)?e.removeAttribute(t):e.setAttribute(t,a?"":Ps(n)?String(n):n)}function Fu(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?sh(n):n);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const f=a==="OPTION"?e.getAttribute("value")||"":e.value,m=n==null?e.type==="checkbox"?"on":"":String(n);(f!==m||!("_value"in e))&&(e.value=m),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const f=typeof e[t];f==="boolean"?n=Q1(n):n==null&&f==="string"?(n="",o=!0):f==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(s||t)}function xm(e,t,n,r){e.addEventListener(t,n,r)}function Am(e,t,n,r){e.removeEventListener(t,n,r)}const $u=Symbol("_vei");function Em(e,t,n,r,s=null){const a=e[$u]||(e[$u]={}),o=a[t];if(r&&o)o.value=r;else{const[f,m]=Rm(t);if(r){const g=a[t]=Cm(r,s);xm(e,f,g,m)}else o&&(Am(e,f,o,m),a[t]=void 0)}}const Vu=/(?:Once|Passive|Capture)$/;function Rm(e){let t;if(Vu.test(e)){t={};let r;for(;r=e.match(Vu);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):la(e.slice(2)),t]}let i0=0;const Mm=Promise.resolve(),Tm=()=>i0||(Mm.then(()=>i0=0),i0=Date.now());function Cm(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;kr(Bm(r,n.value),t,5,[r])};return n.value=e,n.attached=Tm(),n}function Bm(e,t){if(wt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Hu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Im=(e,t,n,r,s,a)=>{const o=s==="svg";t==="class"?bm(e,r,o):t==="style"?gm(e,n,r):ul(t)?rc(t)||Em(e,t,n,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Om(e,t,r,o))?(Fu(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Lu(e,t,r,o,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!hn(r))?Fu(e,Os(t),r,a,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Lu(e,t,r,o))};function Om(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Hu(t)&&Tt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Hu(t)&&hn(n)?!1:t in e}const km=["ctrl","shift","alt","meta"],Pm={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>km.some(n=>e[`${n}Key`]&&!t.includes(n))},jr=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(s,...a)=>{for(let o=0;o<t.length;o++){const f=Pm[t[o]];if(f&&f(s,t))return}return e(s,...a)})},Nm=wn({patchProp:Im},um);let Du;function Lm(){return Du||(Du=N3(Nm))}const ch=(...e)=>{const t=Lm().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=$m(r);if(!s)return;const a=t._component;!Tt(a)&&!a.render&&!a.template&&(a.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,Fm(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function Fm(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function $m(e){return hn(e)?document.querySelector(e):e}var Vm=!1;/*!
 * pinia v2.2.4
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let uh;const Sl=e=>uh=e,fh=Symbol();function F0(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var wi;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(wi||(wi={}));function Hm(){const e=tf(!0),t=e.run(()=>kt({}));let n=[],r=[];const s=mc({install(a){Sl(s),s._a=a,a.provide(fh,s),a.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(a){return!this._a&&!Vm?r.push(a):n.push(a),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const hh=()=>{};function ju(e,t,n,r=hh){e.push(t);const s=()=>{const a=e.indexOf(t);a>-1&&(e.splice(a,1),r())};return!n&&nf()&&E2(s),s}function pa(e,...t){e.slice().forEach(n=>{n(...t)})}const Dm=e=>e(),Xu=Symbol(),o0=Symbol();function $0(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];F0(s)&&F0(r)&&e.hasOwnProperty(n)&&!fn(r)&&!Bs(r)?e[n]=$0(s,r):e[n]=r}return e}const jm=Symbol();function Xm(e){return!F0(e)||!e.hasOwnProperty(jm)}const{assign:As}=Object;function qm(e){return!!(fn(e)&&e.effect)}function Um(e,t,n,r){const{state:s,actions:a,getters:o}=t,f=n.state.value[e];let m;function g(){f||(n.state.value[e]=s?s():{});const S=W2(n.state.value[e]);return As(S,a,Object.keys(o||{}).reduce((b,C)=>(b[C]=mc(Kt(()=>{Sl(n);const V=n._s.get(e);return o[C].call(V,V)})),b),{}))}return m=dh(e,g,t,n,r,!0),m}function dh(e,t,n={},r,s,a){let o;const f=As({actions:{}},n),m={deep:!0};let g,S,b=[],C=[],V;const J=r.state.value[e];!a&&!J&&(r.state.value[e]={}),kt({});let te;function _e(et){let Se;g=S=!1,typeof et=="function"?(et(r.state.value[e]),Se={type:wi.patchFunction,storeId:e,events:V}):($0(r.state.value[e],et),Se={type:wi.patchObject,payload:et,storeId:e,events:V});const Ue=te=Symbol();us().then(()=>{te===Ue&&(g=!0)}),S=!0,pa(b,Se,r.state.value[e])}const ke=a?function(){const{state:Se}=n,Ue=Se?Se():{};this.$patch(be=>{As(be,Ue)})}:hh;function U(){o.stop(),b=[],C=[],r._s.delete(e)}const Re=(et,Se="")=>{if(Xu in et)return et[o0]=Se,et;const Ue=function(){Sl(r);const be=Array.from(arguments),Be=[],it=[];function bt(dt){Be.push(dt)}function xt(dt){it.push(dt)}pa(C,{args:be,name:Ue[o0],store:je,after:bt,onError:xt});let Et;try{Et=et.apply(this&&this.$id===e?this:je,be)}catch(dt){throw pa(it,dt),dt}return Et instanceof Promise?Et.then(dt=>(pa(Be,dt),dt)).catch(dt=>(pa(it,dt),Promise.reject(dt))):(pa(Be,Et),Et)};return Ue[Xu]=!0,Ue[o0]=Se,Ue},he={_p:r,$id:e,$onAction:ju.bind(null,C),$patch:_e,$reset:ke,$subscribe(et,Se={}){const Ue=ju(b,et,Se.detached,()=>be()),be=o.run(()=>In(()=>r.state.value[e],Be=>{(Se.flush==="sync"?S:g)&&et({storeId:e,type:wi.direct,events:V},Be)},As({},m,Se)));return Ue},$dispose:U},je=Fs(he);r._s.set(e,je);const De=(r._a&&r._a.runWithContext||Dm)(()=>r._e.run(()=>(o=tf()).run(()=>t({action:Re}))));for(const et in De){const Se=De[et];if(fn(Se)&&!qm(Se)||Bs(Se))a||(J&&Xm(Se)&&(fn(Se)?Se.value=J[et]:$0(Se,J[et])),r.state.value[e][et]=Se);else if(typeof Se=="function"){const Ue=Re(Se,et);De[et]=Ue,f.actions[et]=Se}}return As(je,De),As($t(je),De),Object.defineProperty(je,"$state",{get:()=>r.state.value[e],set:et=>{_e(Se=>{As(Se,et)})}}),r._p.forEach(et=>{As(je,o.run(()=>et({store:je,app:r._a,pinia:r,options:f})))}),J&&a&&n.hydrate&&n.hydrate(je.$state,J),g=!0,S=!0,je}function _h(e,t,n){let r,s;const a=typeof t=="function";typeof e=="string"?(r=e,s=a?n:t):(s=e,r=e.id);function o(f,m){const g=T3();return f=f||(g?tr(fh,null):null),f&&Sl(f),f=uh,f._s.has(r)||(a?dh(r,t,s,f):Um(r,s,f)),f._s.get(r)}return o.$id=r,o}/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ea=typeof document<"u";function mh(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Ym(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&mh(e.default)}const Ht=Object.assign;function l0(e,t){const n={};for(const r in t){const s=t[r];n[r]=Pr(s)?s.map(e):e(s)}return n}const gi=()=>{},Pr=Array.isArray,vh=/#/g,Km=/&/g,Wm=/\//g,Gm=/=/g,zm=/\?/g,ph=/\+/g,Qm=/%5B/g,Zm=/%5D/g,bh=/%5E/g,Jm=/%60/g,yh=/%7B/g,e4=/%7C/g,wh=/%7D/g,t4=/%20/g;function xc(e){return encodeURI(""+e).replace(e4,"|").replace(Qm,"[").replace(Zm,"]")}function n4(e){return xc(e).replace(yh,"{").replace(wh,"}").replace(bh,"^")}function V0(e){return xc(e).replace(ph,"%2B").replace(t4,"+").replace(vh,"%23").replace(Km,"%26").replace(Jm,"`").replace(yh,"{").replace(wh,"}").replace(bh,"^")}function r4(e){return V0(e).replace(Gm,"%3D")}function s4(e){return xc(e).replace(vh,"%23").replace(zm,"%3F")}function a4(e){return e==null?"":s4(e).replace(Wm,"%2F")}function ki(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const i4=/\/$/,o4=e=>e.replace(i4,"");function c0(e,t,n="/"){let r,s={},a="",o="";const f=t.indexOf("#");let m=t.indexOf("?");return f<m&&f>=0&&(m=-1),m>-1&&(r=t.slice(0,m),a=t.slice(m+1,f>-1?f:t.length),s=e(a)),f>-1&&(r=r||t.slice(0,f),o=t.slice(f,t.length)),r=f4(r??t,n),{fullPath:r+(a&&"?")+a+o,path:r,query:s,hash:ki(o)}}function l4(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function qu(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function c4(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&$a(t.matched[r],n.matched[s])&&gh(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function $a(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function gh(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!u4(e[n],t[n]))return!1;return!0}function u4(e,t){return Pr(e)?Uu(e,t):Pr(t)?Uu(t,e):e===t}function Uu(e,t){return Pr(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function f4(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let a=n.length-1,o,f;for(o=0;o<r.length;o++)if(f=r[o],f!==".")if(f==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+r.slice(o).join("/")}const gs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Pi;(function(e){e.pop="pop",e.push="push"})(Pi||(Pi={}));var Si;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Si||(Si={}));function h4(e){if(!e)if(Ea){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),o4(e)}const d4=/^[^#]+#/;function _4(e,t){return e.replace(d4,"#")+t}function m4(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const xl=()=>({left:window.scrollX,top:window.scrollY});function v4(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=m4(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Yu(e,t){return(history.state?history.state.position-t:-1)+e}const H0=new Map;function p4(e,t){H0.set(e,t)}function b4(e){const t=H0.get(e);return H0.delete(e),t}let y4=()=>location.protocol+"//"+location.host;function Sh(e,t){const{pathname:n,search:r,hash:s}=t,a=e.indexOf("#");if(a>-1){let f=s.includes(e.slice(a))?e.slice(a).length:1,m=s.slice(f);return m[0]!=="/"&&(m="/"+m),qu(m,"")}return qu(n,e)+r+s}function w4(e,t,n,r){let s=[],a=[],o=null;const f=({state:C})=>{const V=Sh(e,location),J=n.value,te=t.value;let _e=0;if(C){if(n.value=V,t.value=C,o&&o===J){o=null;return}_e=te?C.position-te.position:0}else r(V);s.forEach(ke=>{ke(n.value,J,{delta:_e,type:Pi.pop,direction:_e?_e>0?Si.forward:Si.back:Si.unknown})})};function m(){o=n.value}function g(C){s.push(C);const V=()=>{const J=s.indexOf(C);J>-1&&s.splice(J,1)};return a.push(V),V}function S(){const{history:C}=window;C.state&&C.replaceState(Ht({},C.state,{scroll:xl()}),"")}function b(){for(const C of a)C();a=[],window.removeEventListener("popstate",f),window.removeEventListener("beforeunload",S)}return window.addEventListener("popstate",f),window.addEventListener("beforeunload",S,{passive:!0}),{pauseListeners:m,listen:g,destroy:b}}function Ku(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?xl():null}}function g4(e){const{history:t,location:n}=window,r={value:Sh(e,n)},s={value:t.state};s.value||a(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(m,g,S){const b=e.indexOf("#"),C=b>-1?(n.host&&document.querySelector("base")?e:e.slice(b))+m:y4()+e+m;try{t[S?"replaceState":"pushState"](g,"",C),s.value=g}catch(V){console.error(V),n[S?"replace":"assign"](C)}}function o(m,g){const S=Ht({},t.state,Ku(s.value.back,m,s.value.forward,!0),g,{position:s.value.position});a(m,S,!0),r.value=m}function f(m,g){const S=Ht({},s.value,t.state,{forward:m,scroll:xl()});a(S.current,S,!0);const b=Ht({},Ku(r.value,m,null),{position:S.position+1},g);a(m,b,!1),r.value=m}return{location:r,state:s,push:f,replace:o}}function S4(e){e=h4(e);const t=g4(e),n=w4(e,t.state,t.location,t.replace);function r(a,o=!0){o||n.pauseListeners(),history.go(a)}const s=Ht({location:"",base:e,go:r,createHref:_4.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function x4(e){return typeof e=="string"||e&&typeof e=="object"}function xh(e){return typeof e=="string"||typeof e=="symbol"}const Ah=Symbol("");var Wu;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Wu||(Wu={}));function Va(e,t){return Ht(new Error,{type:e,[Ah]:!0},t)}function rs(e,t){return e instanceof Error&&Ah in e&&(t==null||!!(e.type&t))}const Gu="[^/]+?",A4={sensitive:!1,strict:!1,start:!0,end:!0},E4=/[.+*?^${}()[\]/\\]/g;function R4(e,t){const n=Ht({},A4,t),r=[];let s=n.start?"^":"";const a=[];for(const g of e){const S=g.length?[]:[90];n.strict&&!g.length&&(s+="/");for(let b=0;b<g.length;b++){const C=g[b];let V=40+(n.sensitive?.25:0);if(C.type===0)b||(s+="/"),s+=C.value.replace(E4,"\\$&"),V+=40;else if(C.type===1){const{value:J,repeatable:te,optional:_e,regexp:ke}=C;a.push({name:J,repeatable:te,optional:_e});const U=ke||Gu;if(U!==Gu){V+=10;try{new RegExp(`(${U})`)}catch(he){throw new Error(`Invalid custom RegExp for param "${J}" (${U}): `+he.message)}}let Re=te?`((?:${U})(?:/(?:${U}))*)`:`(${U})`;b||(Re=_e&&g.length<2?`(?:/${Re})`:"/"+Re),_e&&(Re+="?"),s+=Re,V+=20,_e&&(V+=-8),te&&(V+=-20),U===".*"&&(V+=-50)}S.push(V)}r.push(S)}if(n.strict&&n.end){const g=r.length-1;r[g][r[g].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function f(g){const S=g.match(o),b={};if(!S)return null;for(let C=1;C<S.length;C++){const V=S[C]||"",J=a[C-1];b[J.name]=V&&J.repeatable?V.split("/"):V}return b}function m(g){let S="",b=!1;for(const C of e){(!b||!S.endsWith("/"))&&(S+="/"),b=!1;for(const V of C)if(V.type===0)S+=V.value;else if(V.type===1){const{value:J,repeatable:te,optional:_e}=V,ke=J in g?g[J]:"";if(Pr(ke)&&!te)throw new Error(`Provided param "${J}" is an array but it is not repeatable (* or + modifiers)`);const U=Pr(ke)?ke.join("/"):ke;if(!U)if(_e)C.length<2&&(S.endsWith("/")?S=S.slice(0,-1):b=!0);else throw new Error(`Missing required param "${J}"`);S+=U}}return S||"/"}return{re:o,score:r,keys:a,parse:f,stringify:m}}function M4(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Eh(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const a=M4(r[n],s[n]);if(a)return a;n++}if(Math.abs(s.length-r.length)===1){if(zu(r))return 1;if(zu(s))return-1}return s.length-r.length}function zu(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const T4={type:0,value:""},C4=/[a-zA-Z0-9_]/;function B4(e){if(!e)return[[]];if(e==="/")return[[T4]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(V){throw new Error(`ERR (${n})/"${g}": ${V}`)}let n=0,r=n;const s=[];let a;function o(){a&&s.push(a),a=[]}let f=0,m,g="",S="";function b(){g&&(n===0?a.push({type:0,value:g}):n===1||n===2||n===3?(a.length>1&&(m==="*"||m==="+")&&t(`A repeatable param (${g}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:g,regexp:S,repeatable:m==="*"||m==="+",optional:m==="*"||m==="?"})):t("Invalid state to consume buffer"),g="")}function C(){g+=m}for(;f<e.length;){if(m=e[f++],m==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:m==="/"?(g&&b(),o()):m===":"?(b(),n=1):C();break;case 4:C(),n=r;break;case 1:m==="("?n=2:C4.test(m)?C():(b(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&f--);break;case 2:m===")"?S[S.length-1]=="\\"?S=S.slice(0,-1)+m:n=3:S+=m;break;case 3:b(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&f--,S="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${g}"`),b(),o(),s}function I4(e,t,n){const r=R4(B4(e.path),n),s=Ht(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function O4(e,t){const n=[],r=new Map;t=e1({strict:!1,end:!0,sensitive:!1},t);function s(b){return r.get(b)}function a(b,C,V){const J=!V,te=Zu(b);te.aliasOf=V&&V.record;const _e=e1(t,b),ke=[te];if("alias"in b){const he=typeof b.alias=="string"?[b.alias]:b.alias;for(const je of he)ke.push(Zu(Ht({},te,{components:V?V.record.components:te.components,path:je,aliasOf:V?V.record:te})))}let U,Re;for(const he of ke){const{path:je}=he;if(C&&je[0]!=="/"){const He=C.record.path,De=He[He.length-1]==="/"?"":"/";he.path=C.record.path+(je&&De+je)}if(U=I4(he,C,_e),V?V.alias.push(U):(Re=Re||U,Re!==U&&Re.alias.push(U),J&&b.name&&!Ju(U)&&o(b.name)),Rh(U)&&m(U),te.children){const He=te.children;for(let De=0;De<He.length;De++)a(He[De],U,V&&V.children[De])}V=V||U}return Re?()=>{o(Re)}:gi}function o(b){if(xh(b)){const C=r.get(b);C&&(r.delete(b),n.splice(n.indexOf(C),1),C.children.forEach(o),C.alias.forEach(o))}else{const C=n.indexOf(b);C>-1&&(n.splice(C,1),b.record.name&&r.delete(b.record.name),b.children.forEach(o),b.alias.forEach(o))}}function f(){return n}function m(b){const C=N4(b,n);n.splice(C,0,b),b.record.name&&!Ju(b)&&r.set(b.record.name,b)}function g(b,C){let V,J={},te,_e;if("name"in b&&b.name){if(V=r.get(b.name),!V)throw Va(1,{location:b});_e=V.record.name,J=Ht(Qu(C.params,V.keys.filter(Re=>!Re.optional).concat(V.parent?V.parent.keys.filter(Re=>Re.optional):[]).map(Re=>Re.name)),b.params&&Qu(b.params,V.keys.map(Re=>Re.name))),te=V.stringify(J)}else if(b.path!=null)te=b.path,V=n.find(Re=>Re.re.test(te)),V&&(J=V.parse(te),_e=V.record.name);else{if(V=C.name?r.get(C.name):n.find(Re=>Re.re.test(C.path)),!V)throw Va(1,{location:b,currentLocation:C});_e=V.record.name,J=Ht({},C.params,b.params),te=V.stringify(J)}const ke=[];let U=V;for(;U;)ke.unshift(U.record),U=U.parent;return{name:_e,path:te,params:J,matched:ke,meta:P4(ke)}}e.forEach(b=>a(b));function S(){n.length=0,r.clear()}return{addRoute:a,resolve:g,removeRoute:o,clearRoutes:S,getRoutes:f,getRecordMatcher:s}}function Qu(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Zu(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:k4(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function k4(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function Ju(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function P4(e){return e.reduce((t,n)=>Ht(t,n.meta),{})}function e1(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function N4(e,t){let n=0,r=t.length;for(;n!==r;){const a=n+r>>1;Eh(e,t[a])<0?r=a:n=a+1}const s=L4(e);return s&&(r=t.lastIndexOf(s,r-1)),r}function L4(e){let t=e;for(;t=t.parent;)if(Rh(t)&&Eh(e,t)===0)return t}function Rh({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function F4(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const a=r[s].replace(ph," "),o=a.indexOf("="),f=ki(o<0?a:a.slice(0,o)),m=o<0?null:ki(a.slice(o+1));if(f in t){let g=t[f];Pr(g)||(g=t[f]=[g]),g.push(m)}else t[f]=m}return t}function t1(e){let t="";for(let n in e){const r=e[n];if(n=r4(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Pr(r)?r.map(a=>a&&V0(a)):[r&&V0(r)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+n,a!=null&&(t+="="+a))})}return t}function $4(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Pr(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const V4=Symbol(""),n1=Symbol(""),Al=Symbol(""),Mh=Symbol(""),D0=Symbol("");function ni(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Ts(e,t,n,r,s,a=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((f,m)=>{const g=C=>{C===!1?m(Va(4,{from:n,to:t})):C instanceof Error?m(C):x4(C)?m(Va(2,{from:t,to:C})):(o&&r.enterCallbacks[s]===o&&typeof C=="function"&&o.push(C),f())},S=a(()=>e.call(r&&r.instances[s],t,n,g));let b=Promise.resolve(S);e.length<3&&(b=b.then(g)),b.catch(C=>m(C))})}function u0(e,t,n,r,s=a=>a()){const a=[];for(const o of e)for(const f in o.components){let m=o.components[f];if(!(t!=="beforeRouteEnter"&&!o.instances[f]))if(mh(m)){const S=(m.__vccOpts||m)[t];S&&a.push(Ts(S,n,r,o,f,s))}else{let g=m();a.push(()=>g.then(S=>{if(!S)throw new Error(`Couldn't resolve component "${f}" at "${o.path}"`);const b=Ym(S)?S.default:S;o.mods[f]=S,o.components[f]=b;const V=(b.__vccOpts||b)[t];return V&&Ts(V,n,r,o,f,s)()}))}}return a}function r1(e){const t=tr(Al),n=tr(Mh),r=Kt(()=>{const m=zr(e.to);return t.resolve(m)}),s=Kt(()=>{const{matched:m}=r.value,{length:g}=m,S=m[g-1],b=n.matched;if(!S||!b.length)return-1;const C=b.findIndex($a.bind(null,S));if(C>-1)return C;const V=s1(m[g-2]);return g>1&&s1(S)===V&&b[b.length-1].path!==V?b.findIndex($a.bind(null,m[g-2])):C}),a=Kt(()=>s.value>-1&&X4(n.params,r.value.params)),o=Kt(()=>s.value>-1&&s.value===n.matched.length-1&&gh(n.params,r.value.params));function f(m={}){return j4(m)?t[zr(e.replace)?"replace":"push"](zr(e.to)).catch(gi):Promise.resolve()}return{route:r,href:Kt(()=>r.value.href),isActive:a,isExactActive:o,navigate:f}}const H4=jn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:r1,setup(e,{slots:t}){const n=Fs(r1(e)),{options:r}=tr(Al),s=Kt(()=>({[a1(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[a1(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=t.default&&t.default(n);return e.custom?a:Sc("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},a)}}}),D4=H4;function j4(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function X4(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Pr(s)||s.length!==r.length||r.some((a,o)=>a!==s[o]))return!1}return!0}function s1(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const a1=(e,t,n)=>e??t??n,q4=jn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=tr(D0),s=Kt(()=>e.route||r.value),a=tr(n1,0),o=Kt(()=>{let g=zr(a);const{matched:S}=s.value;let b;for(;(b=S[g])&&!b.components;)g++;return g}),f=Kt(()=>s.value.matched[o.value]);sa(n1,Kt(()=>o.value+1)),sa(V4,f),sa(D0,s);const m=kt();return In(()=>[m.value,f.value,e.name],([g,S,b],[C,V,J])=>{S&&(S.instances[b]=g,V&&V!==S&&g&&g===C&&(S.leaveGuards.size||(S.leaveGuards=V.leaveGuards),S.updateGuards.size||(S.updateGuards=V.updateGuards))),g&&S&&(!V||!$a(S,V)||!C)&&(S.enterCallbacks[b]||[]).forEach(te=>te(g))},{flush:"post"}),()=>{const g=s.value,S=e.name,b=f.value,C=b&&b.components[S];if(!C)return i1(n.default,{Component:C,route:g});const V=b.props[S],J=V?V===!0?g.params:typeof V=="function"?V(g):V:null,_e=Sc(C,Ht({},J,t,{onVnodeUnmounted:ke=>{ke.component.isUnmounted&&(b.instances[S]=null)},ref:m}));return i1(n.default,{Component:_e,route:g})||_e}}});function i1(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Th=q4;function U4(e){const t=O4(e.routes,e),n=e.parseQuery||F4,r=e.stringifyQuery||t1,s=e.history,a=ni(),o=ni(),f=ni(),m=U2(gs);let g=gs;Ea&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const S=l0.bind(null,W=>""+W),b=l0.bind(null,a4),C=l0.bind(null,ki);function V(W,Ie){let xe,Je;return xh(W)?(xe=t.getRecordMatcher(W),Je=Ie):Je=W,t.addRoute(Je,xe)}function J(W){const Ie=t.getRecordMatcher(W);Ie&&t.removeRoute(Ie)}function te(){return t.getRoutes().map(W=>W.record)}function _e(W){return!!t.getRecordMatcher(W)}function ke(W,Ie){if(Ie=Ht({},Ie||m.value),typeof W=="string"){const D=c0(n,W,Ie.path),ie=t.resolve({path:D.path},Ie),Ee=s.createHref(D.fullPath);return Ht(D,ie,{params:C(ie.params),hash:ki(D.hash),redirectedFrom:void 0,href:Ee})}let xe;if(W.path!=null)xe=Ht({},W,{path:c0(n,W.path,Ie.path).path});else{const D=Ht({},W.params);for(const ie in D)D[ie]==null&&delete D[ie];xe=Ht({},W,{params:b(D)}),Ie.params=b(Ie.params)}const Je=t.resolve(xe,Ie),_t=W.hash||"";Je.params=S(C(Je.params));const At=l4(r,Ht({},W,{hash:n4(_t),path:Je.path})),$=s.createHref(At);return Ht({fullPath:At,hash:_t,query:r===t1?$4(W.query):W.query||{}},Je,{redirectedFrom:void 0,href:$})}function U(W){return typeof W=="string"?c0(n,W,m.value.path):Ht({},W)}function Re(W,Ie){if(g!==W)return Va(8,{from:Ie,to:W})}function he(W){return De(W)}function je(W){return he(Ht(U(W),{replace:!0}))}function He(W){const Ie=W.matched[W.matched.length-1];if(Ie&&Ie.redirect){const{redirect:xe}=Ie;let Je=typeof xe=="function"?xe(W):xe;return typeof Je=="string"&&(Je=Je.includes("?")||Je.includes("#")?Je=U(Je):{path:Je},Je.params={}),Ht({query:W.query,hash:W.hash,params:Je.path!=null?{}:W.params},Je)}}function De(W,Ie){const xe=g=ke(W),Je=m.value,_t=W.state,At=W.force,$=W.replace===!0,D=He(xe);if(D)return De(Ht(U(D),{state:typeof D=="object"?Ht({},_t,D.state):_t,force:At,replace:$}),Ie||xe);const ie=xe;ie.redirectedFrom=Ie;let Ee;return!At&&c4(r,Je,xe)&&(Ee=Va(16,{to:ie,from:Je}),Ne(Je,Je,!0,!1)),(Ee?Promise.resolve(Ee):Ue(ie,Je)).catch(le=>rs(le)?rs(le,2)?le:gt(le):Rt(le,ie,Je)).then(le=>{if(le){if(rs(le,2))return De(Ht({replace:$},U(le.to),{state:typeof le.to=="object"?Ht({},_t,le.to.state):_t,force:At}),Ie||ie)}else le=Be(ie,Je,!0,$,_t);return be(ie,Je,le),le})}function et(W,Ie){const xe=Re(W,Ie);return xe?Promise.reject(xe):Promise.resolve()}function Se(W){const Ie=E.values().next().value;return Ie&&typeof Ie.runWithContext=="function"?Ie.runWithContext(W):W()}function Ue(W,Ie){let xe;const[Je,_t,At]=Y4(W,Ie);xe=u0(Je.reverse(),"beforeRouteLeave",W,Ie);for(const D of Je)D.leaveGuards.forEach(ie=>{xe.push(Ts(ie,W,Ie))});const $=et.bind(null,W,Ie);return xe.push($),dn(xe).then(()=>{xe=[];for(const D of a.list())xe.push(Ts(D,W,Ie));return xe.push($),dn(xe)}).then(()=>{xe=u0(_t,"beforeRouteUpdate",W,Ie);for(const D of _t)D.updateGuards.forEach(ie=>{xe.push(Ts(ie,W,Ie))});return xe.push($),dn(xe)}).then(()=>{xe=[];for(const D of At)if(D.beforeEnter)if(Pr(D.beforeEnter))for(const ie of D.beforeEnter)xe.push(Ts(ie,W,Ie));else xe.push(Ts(D.beforeEnter,W,Ie));return xe.push($),dn(xe)}).then(()=>(W.matched.forEach(D=>D.enterCallbacks={}),xe=u0(At,"beforeRouteEnter",W,Ie,Se),xe.push($),dn(xe))).then(()=>{xe=[];for(const D of o.list())xe.push(Ts(D,W,Ie));return xe.push($),dn(xe)}).catch(D=>rs(D,8)?D:Promise.reject(D))}function be(W,Ie,xe){f.list().forEach(Je=>Se(()=>Je(W,Ie,xe)))}function Be(W,Ie,xe,Je,_t){const At=Re(W,Ie);if(At)return At;const $=Ie===gs,D=Ea?history.state:{};xe&&(Je||$?s.replace(W.fullPath,Ht({scroll:$&&D&&D.scroll},_t)):s.push(W.fullPath,_t)),m.value=W,Ne(W,Ie,xe,$),gt()}let it;function bt(){it||(it=s.listen((W,Ie,xe)=>{if(!sr.listening)return;const Je=ke(W),_t=He(Je);if(_t){De(Ht(_t,{replace:!0}),Je).catch(gi);return}g=Je;const At=m.value;Ea&&p4(Yu(At.fullPath,xe.delta),xl()),Ue(Je,At).catch($=>rs($,12)?$:rs($,2)?(De($.to,Je).then(D=>{rs(D,20)&&!xe.delta&&xe.type===Pi.pop&&s.go(-1,!1)}).catch(gi),Promise.reject()):(xe.delta&&s.go(-xe.delta,!1),Rt($,Je,At))).then($=>{$=$||Be(Je,At,!1),$&&(xe.delta&&!rs($,8)?s.go(-xe.delta,!1):xe.type===Pi.pop&&rs($,20)&&s.go(-1,!1)),be(Je,At,$)}).catch(gi)}))}let xt=ni(),Et=ni(),dt;function Rt(W,Ie,xe){gt(W);const Je=Et.list();return Je.length?Je.forEach(_t=>_t(W,Ie,xe)):console.error(W),Promise.reject(W)}function ln(){return dt&&m.value!==gs?Promise.resolve():new Promise((W,Ie)=>{xt.add([W,Ie])})}function gt(W){return dt||(dt=!W,bt(),xt.list().forEach(([Ie,xe])=>W?xe(W):Ie()),xt.reset()),W}function Ne(W,Ie,xe,Je){const{scrollBehavior:_t}=e;if(!Ea||!_t)return Promise.resolve();const At=!xe&&b4(Yu(W.fullPath,0))||(Je||!xe)&&history.state&&history.state.scroll||null;return us().then(()=>_t(W,Ie,At)).then($=>$&&v4($)).catch($=>Rt($,W,Ie))}const mt=W=>s.go(W);let lt;const E=new Set,sr={currentRoute:m,listening:!0,addRoute:V,removeRoute:J,clearRoutes:t.clearRoutes,hasRoute:_e,getRoutes:te,resolve:ke,options:e,push:he,replace:je,go:mt,back:()=>mt(-1),forward:()=>mt(1),beforeEach:a.add,beforeResolve:o.add,afterEach:f.add,onError:Et.add,isReady:ln,install(W){const Ie=this;W.component("RouterLink",D4),W.component("RouterView",Th),W.config.globalProperties.$router=Ie,Object.defineProperty(W.config.globalProperties,"$route",{enumerable:!0,get:()=>zr(m)}),Ea&&!lt&&m.value===gs&&(lt=!0,he(s.location).catch(_t=>{}));const xe={};for(const _t in gs)Object.defineProperty(xe,_t,{get:()=>m.value[_t],enumerable:!0});W.provide(Al,Ie),W.provide(Mh,bf(xe)),W.provide(D0,m);const Je=W.unmount;E.add(W),W.unmount=function(){E.delete(W),E.size<1&&(g=gs,it&&it(),it=null,m.value=gs,lt=!1,dt=!1),Je()}}};function dn(W){return W.reduce((Ie,xe)=>Ie.then(()=>Se(xe)),Promise.resolve())}return sr}function Y4(e,t){const n=[],r=[],s=[],a=Math.max(t.matched.length,e.matched.length);for(let o=0;o<a;o++){const f=t.matched[o];f&&(e.matched.find(g=>$a(g,f))?r.push(f):n.push(f));const m=e.matched[o];m&&(t.matched.find(g=>$a(g,m))||s.push(m))}return[n,r,s]}function Ch(){return tr(Al)}const K4={__name:"App",setup(e){return(t,n)=>(Sr(),ea(zr(Th)))}};function W4(){}const rr=Object.assign,El=typeof window<"u",Da=e=>e!==null&&typeof e=="object",Cn=e=>e!=null,Io=e=>typeof e=="function",Bh=e=>Da(e)&&Io(e.then)&&Io(e.catch),Ih=e=>typeof e=="number"||/^\d+(\.\d+)?$/.test(e),G4=()=>El?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;function o1(e,t){const n=t.split(".");let r=e;return n.forEach(s=>{var a;r=Da(r)&&(a=r[s])!=null?a:""}),r}function Oh(e,t,n){return t.reduce((r,s)=>(r[s]=e[s],r),{})}const l1=(e,t)=>JSON.stringify(e)===JSON.stringify(t),c1=e=>Array.isArray(e)?e:[e],hs=null,an=[Number,String],fs={type:Boolean,default:!0},z4=e=>({type:Number,default:e}),vo=e=>({type:an,default:e}),Qt=e=>({type:String,default:e});var Ac=typeof window<"u",Q4=e=>e===window,u1=(e,t)=>({top:0,left:0,right:e,bottom:t,width:e,height:t}),f1=e=>{const t=zr(e);if(Q4(t)){const n=t.innerWidth,r=t.innerHeight;return u1(n,r)}return t!=null&&t.getBoundingClientRect?t.getBoundingClientRect():u1(0,0)};function Z4(e){const t=tr(e,null);if(t){const n=ua(),{link:r,unlink:s,internalChildren:a}=t;r(n),Hi(()=>s(n));const o=Kt(()=>a.indexOf(n));return{parent:t,index:o}}return{parent:null,index:kt(-1)}}function kh(e){let t;ca(()=>{e(),us(()=>{t=!0})}),pl(()=>{t&&e()})}function Rl(e,t,n={}){if(!Ac)return;const{target:r=window,passive:s=!1,capture:a=!1}=n;let o=!1,f;const m=b=>{if(o)return;const C=zr(b);C&&!f&&(C.addEventListener(e,t,{capture:a,passive:s}),f=!0)},g=b=>{if(o)return;const C=zr(b);C&&f&&(C.removeEventListener(e,t,a),f=!1)};Hi(()=>g(r)),$i(()=>g(r)),kh(()=>m(r));let S;return fn(r)&&(S=In(r,(b,C)=>{g(C),m(b)})),()=>{S==null||S(),g(r),o=!0}}var ao,f0;function J4(){if(!ao&&(ao=kt(0),f0=kt(0),Ac)){const e=()=>{ao.value=window.innerWidth,f0.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:ao,height:f0}}var ev=/scroll|auto|overlay/i,tv=Ac?window:void 0;function nv(e){return e.tagName!=="HTML"&&e.tagName!=="BODY"&&e.nodeType===1}function rv(e,t=tv){let n=e;for(;n&&n!==t&&nv(n);){const{overflowY:r}=window.getComputedStyle(n);if(ev.test(r))return n;n=n.parentNode}return t}var Ph=Symbol("van-field");function sv(e){const t=tr(Ph,null);t&&!t.customValue.value&&(t.customValue.value=e,In(e,()=>{t.resetValidation(),t.validateWithTrigger("onChange")}))}function h1(e,t){"scrollTop"in e?e.scrollTop=t:e.scrollTo(e.scrollX,t)}function Nh(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function Lh(e){h1(window,e),h1(document.body,e)}const av=G4();function iv(){av&&Lh(Nh())}const Fh=e=>e.stopPropagation();function aa(e,t){(typeof e.cancelable!="boolean"||e.cancelable)&&e.preventDefault(),t&&Fh(e)}J4();function Zn(e){if(Cn(e))return Ih(e)?`${e}px`:String(e)}function $h(e){if(Cn(e)){if(Array.isArray(e))return{width:Zn(e[0]),height:Zn(e[1])};const t=Zn(e);return{width:t,height:t}}}function ov(e){const t={};return e!==void 0&&(t.zIndex=+e),t}const lv=/-(\w)/g,Vh=e=>e.replace(lv,(t,n)=>n.toUpperCase()),cv=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,""),Hh=(e,t,n)=>Math.min(Math.max(e,t),n);function d1(e,t,n){const r=e.indexOf(t);return r===-1?e:t==="-"&&r!==0?e.slice(0,r):e.slice(0,r+1)+e.slice(r).replace(n,"")}function uv(e,t=!0,n=!0){t?e=d1(e,".",/\./g):e=e.split(".")[0],n?e=d1(e,"-",/-/g):e=e.replace(/-/,"");const r=t?/[^-0-9.]/g:/[^-0-9]/g;return e.replace(r,"")}function fv(e,t){return Math.round((e+t)*1e10)/1e10}const{hasOwnProperty:hv}=Object.prototype;function dv(e,t,n){const r=t[n];Cn(r)&&(!hv.call(e,n)||!Da(r)?e[n]=r:e[n]=Dh(Object(e[n]),r))}function Dh(e,t){return Object.keys(t).forEach(n=>{dv(e,t,n)}),e}var _v={name:"",tel:"",save:"",clear:"",cancel:"",confirm:"",delete:"",loading:"...",noCoupon:"",nameEmpty:"",addContact:"",telInvalid:"",vanCalendar:{end:"",start:"",title:"",weekdays:["","","","","","",""],monthTitle:(e,t)=>`${e}${t}`,rangePrompt:e=>` ${e} `},vanCascader:{select:""},vanPagination:{prev:"",next:""},vanPullRefresh:{pulling:"...",loosing:"..."},vanSubmitBar:{label:":"},vanCoupon:{unlimited:"",discount:e=>`${e}`,condition:e=>`${e}`},vanCouponCell:{title:"",count:e=>`${e}`},vanCouponList:{exchange:"",close:"",enable:"",disabled:"",placeholder:""},vanAddressEdit:{area:"",areaEmpty:"",addressEmpty:"",addressDetail:"",defaultAddress:""},vanAddressList:{add:""}};const _1=kt("zh-CN"),m1=Fs({"zh-CN":_v}),mv={messages(){return m1[_1.value]},use(e,t){_1.value=e,this.add({[e]:t})},add(e={}){Dh(m1,e)}};var vv=mv;function pv(e){const t=Vh(e)+".";return(n,...r)=>{const s=vv.messages(),a=o1(s,t+n)||o1(s,n);return Io(a)?a(...r):a}}function j0(e,t){return t?typeof t=="string"?` ${e}--${t}`:Array.isArray(t)?t.reduce((n,r)=>n+j0(e,r),""):Object.keys(t).reduce((n,r)=>n+(t[r]?j0(e,r):""),""):""}function bv(e){return(t,n)=>(t&&typeof t!="string"&&(n=t,t=""),t=t?`${e}__${t}`:e,`${t}${j0(t,n)}`)}function vr(e){const t=`van-${e}`;return[t,bv(t),pv(t)]}const jh="van-hairline",yv=`${jh}--surround`,wv=`${jh}--top-bottom`,gv="van-haptics-feedback",Sv=Symbol("van-form"),v1=5;function xv(e,{args:t=[],done:n,canceled:r,error:s}){if(e){const a=e.apply(null,t);Bh(a)?a.then(o=>{o?n():r&&r()}).catch(s||W4):a?n():r&&r()}else n()}function pr(e){return e.install=t=>{const{name:n}=e;n&&(t.component(n,e),t.component(Vh(`-${n}`),e))},e}const Av=Symbol();function Ec(e){const t=ua();t&&rr(t.proxy,e)}const Xh={to:[String,Object],url:String,replace:Boolean};function Ev({to:e,url:t,replace:n,$router:r}){e&&r?r[n?"replace":"push"](e):t&&(n?location.replace(t):location.href=t)}function qh(){const e=ua().proxy;return()=>Ev(e)}const[Rv,p1]=vr("badge"),Mv={dot:Boolean,max:an,tag:Qt("div"),color:String,offset:Array,content:an,showZero:fs,position:Qt("top-right")};var Tv=jn({name:Rv,props:Mv,setup(e,{slots:t}){const n=()=>{if(t.content)return!0;const{content:f,showZero:m}=e;return Cn(f)&&f!==""&&(m||f!==0&&f!=="0")},r=()=>{const{dot:f,max:m,content:g}=e;if(!f&&n())return t.content?t.content():Cn(m)&&Ih(g)&&+g>+m?`${m}+`:g},s=f=>f.startsWith("-")?f.replace("-",""):`-${f}`,a=Kt(()=>{const f={background:e.color};if(e.offset){const[m,g]=e.offset,{position:S}=e,[b,C]=S.split("-");t.default?(typeof g=="number"?f[b]=Zn(b==="top"?g:-g):f[b]=b==="top"?Zn(g):s(g),typeof m=="number"?f[C]=Zn(C==="left"?m:-m):f[C]=C==="left"?Zn(m):s(m)):(f.marginTop=Zn(g),f.marginLeft=Zn(m))}return f}),o=()=>{if(n()||e.dot)return Ge("div",{class:p1([e.position,{dot:e.dot,fixed:!!t.default}]),style:a.value},[r()])};return()=>{if(t.default){const{tag:f}=e;return Ge(f,{class:p1("wrapper")},{default:()=>[t.default(),o()]})}return o()}}});const Cv=pr(Tv);let Uh=2e3;const Bv=()=>++Uh,Iv=e=>{Uh=e},[Yh,Ov]=vr("config-provider"),Kh=Symbol(Yh),kv={tag:Qt("div"),theme:Qt("light"),zIndex:Number,themeVars:Object,themeVarsDark:Object,themeVarsLight:Object,themeVarsScope:Qt("local"),iconPrefix:String};function Pv(e){return e.replace(/([a-zA-Z])(\d)/g,"$1-$2")}function Nv(e){const t={};return Object.keys(e).forEach(n=>{const r=Pv(cv(n));t[`--van-${r}`]=e[n]}),t}function io(e={},t={}){Object.keys(e).forEach(n=>{e[n]!==t[n]&&document.documentElement.style.setProperty(n,e[n])}),Object.keys(t).forEach(n=>{e[n]||document.documentElement.style.removeProperty(n)})}var Lv=jn({name:Yh,props:kv,setup(e,{slots:t}){const n=Kt(()=>Nv(rr({},e.themeVars,e.theme==="dark"?e.themeVarsDark:e.themeVarsLight)));if(El){const r=()=>{document.documentElement.classList.add(`van-theme-${e.theme}`)},s=(a=e.theme)=>{document.documentElement.classList.remove(`van-theme-${a}`)};In(()=>e.theme,(a,o)=>{o&&s(o),r()},{immediate:!0}),pl(r),$i(s),Vi(s),In(n,(a,o)=>{e.themeVarsScope==="global"&&io(a,o)}),In(()=>e.themeVarsScope,(a,o)=>{o==="global"&&io({},n.value),a==="global"&&io(n.value,{})}),e.themeVarsScope==="global"&&io(n.value,{})}return sa(Kh,e),D3(()=>{e.zIndex!==void 0&&Iv(e.zIndex)}),()=>Ge(e.tag,{class:Ov(),style:e.themeVarsScope==="local"?n.value:void 0},{default:()=>{var r;return[(r=t.default)==null?void 0:r.call(t)]}})}});const[Fv,b1]=vr("icon"),$v=e=>e==null?void 0:e.includes("/"),Vv={dot:Boolean,tag:Qt("i"),name:String,size:an,badge:an,color:String,badgeProps:Object,classPrefix:String};var Hv=jn({name:Fv,props:Vv,setup(e,{slots:t}){const n=tr(Kh,null),r=Kt(()=>e.classPrefix||(n==null?void 0:n.iconPrefix)||b1());return()=>{const{tag:s,dot:a,name:o,size:f,badge:m,color:g}=e,S=$v(o);return Ge(Cv,Qr({dot:a,tag:s,class:[r.value,S?"":`${r.value}-${o}`],style:{color:g,fontSize:Zn(f)},content:m},e.badgeProps),{default:()=>{var b;return[(b=t.default)==null?void 0:b.call(t),S&&Ge("img",{class:b1("image"),src:o},null)]}})}}});const Is=pr(Hv),[Dv,xi]=vr("loading"),jv=Array(12).fill(null).map((e,t)=>Ge("i",{class:xi("line",String(t+1))},null)),Xv=Ge("svg",{class:xi("circular"),viewBox:"25 25 50 50"},[Ge("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),qv={size:an,type:Qt("circular"),color:String,vertical:Boolean,textSize:an,textColor:String};var Uv=jn({name:Dv,props:qv,setup(e,{slots:t}){const n=Kt(()=>rr({color:e.color},$h(e.size))),r=()=>{const a=e.type==="spinner"?jv:Xv;return Ge("span",{class:xi("spinner",e.type),style:n.value},[t.icon?t.icon():a])},s=()=>{var a;if(t.default)return Ge("span",{class:xi("text"),style:{fontSize:Zn(e.textSize),color:(a=e.textColor)!=null?a:e.color}},[t.default()])};return()=>{const{type:a,vertical:o}=e;return Ge("div",{class:xi([a,{vertical:o}]),"aria-live":"polite","aria-busy":!0},[r(),s()])}}});const Wh=pr(Uv),[Yv,ba]=vr("button"),Kv=rr({},Xh,{tag:Qt("button"),text:String,icon:String,type:Qt("default"),size:Qt("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:Qt("button"),loadingSize:an,loadingText:String,loadingType:String,iconPosition:Qt("left")});var Wv=jn({name:Yv,props:Kv,emits:["click"],setup(e,{emit:t,slots:n}){const r=qh(),s=()=>n.loading?n.loading():Ge(Wh,{size:e.loadingSize,type:e.loadingType,class:ba("loading")},null),a=()=>{if(e.loading)return s();if(n.icon)return Ge("div",{class:ba("icon")},[n.icon()]);if(e.icon)return Ge(Is,{name:e.icon,class:ba("icon"),classPrefix:e.iconPrefix},null)},o=()=>{let g;if(e.loading?g=e.loadingText:g=n.default?n.default():e.text,g)return Ge("span",{class:ba("text")},[g])},f=()=>{const{color:g,plain:S}=e;if(g){const b={color:S?g:"white"};return S||(b.background=g),g.includes("gradient")?b.border=0:b.borderColor=g,b}},m=g=>{e.loading?aa(g):e.disabled||(t("click",g),r())};return()=>{const{tag:g,type:S,size:b,block:C,round:V,plain:J,square:te,loading:_e,disabled:ke,hairline:U,nativeType:Re,iconPosition:he}=e,je=[ba([S,b,{plain:J,block:C,round:V,square:te,loading:_e,disabled:ke,hairline:U}]),{[yv]:U}];return Ge(g,{type:Re,class:je,style:f(),disabled:ke,onClick:m},{default:()=>[Ge("div",{class:ba("content")},[he==="left"&&a(),o(),he==="right"&&a()])]})}}});const Gh=pr(Wv),zh={show:Boolean,zIndex:an,overlay:fs,duration:an,teleport:[String,Object],lockScroll:fs,lazyRender:fs,beforeClose:Function,overlayStyle:Object,overlayClass:hs,transitionAppear:Boolean,closeOnClickOverlay:fs};function Gv(e,t){return e>t?"horizontal":t>e?"vertical":""}function Qh(){const e=kt(0),t=kt(0),n=kt(0),r=kt(0),s=kt(0),a=kt(0),o=kt(""),f=kt(!0),m=()=>o.value==="vertical",g=()=>o.value==="horizontal",S=()=>{n.value=0,r.value=0,s.value=0,a.value=0,o.value="",f.value=!0};return{move:V=>{const J=V.touches[0];n.value=(J.clientX<0?0:J.clientX)-e.value,r.value=J.clientY-t.value,s.value=Math.abs(n.value),a.value=Math.abs(r.value);const te=10;(!o.value||s.value<te&&a.value<te)&&(o.value=Gv(s.value,a.value)),f.value&&(s.value>v1||a.value>v1)&&(f.value=!1)},start:V=>{S(),e.value=V.touches[0].clientX,t.value=V.touches[0].clientY},reset:S,startX:e,startY:t,deltaX:n,deltaY:r,offsetX:s,offsetY:a,direction:o,isVertical:m,isHorizontal:g,isTap:f}}let ri=0;const y1="van-overflow-hidden";function zv(e,t){const n=Qh(),r="01",s="10",a=S=>{n.move(S);const b=n.deltaY.value>0?s:r,C=rv(S.target,e.value),{scrollHeight:V,offsetHeight:J,scrollTop:te}=C;let _e="11";te===0?_e=J>=V?"00":"01":te+J>=V&&(_e="10"),_e!=="11"&&n.isVertical()&&!(parseInt(_e,2)&parseInt(b,2))&&aa(S,!0)},o=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",a,{passive:!1}),ri||document.body.classList.add(y1),ri++},f=()=>{ri&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",a),ri--,ri||document.body.classList.remove(y1))},m=()=>t()&&o(),g=()=>t()&&f();kh(m),$i(g),Vi(g),In(t,S=>{S?o():f()})}function Zh(e){const t=kt(!1);return In(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const X0=()=>{var e;const{scopeId:t}=((e=ua())==null?void 0:e.vnode)||{};return t?{[t]:""}:null},[Qv,Zv]=vr("overlay"),Jv={show:Boolean,zIndex:an,duration:an,className:hs,lockScroll:fs,lazyRender:fs,customStyle:Object,teleport:[String,Object]};var e5=jn({name:Qv,props:Jv,setup(e,{slots:t}){const n=kt(),r=Zh(()=>e.show||!e.lazyRender),s=o=>{e.lockScroll&&aa(o,!0)},a=r(()=>{var o;const f=rr(ov(e.zIndex),e.customStyle);return Cn(e.duration)&&(f.animationDuration=`${e.duration}s`),Mf(Ge("div",{ref:n,style:f,class:[Zv(),e.className]},[(o=t.default)==null?void 0:o.call(t)]),[[lh,e.show]])});return Rl("touchmove",s,{target:n}),()=>{const o=Ge(ih,{name:"van-fade",appear:!0},{default:a});return e.teleport?Ge(Bf,{to:e.teleport},{default:()=>[o]}):o}}});const t5=pr(e5),n5=rr({},zh,{round:Boolean,position:Qt("center"),closeIcon:Qt("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:Qt("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[r5,w1]=vr("popup");var s5=jn({name:r5,inheritAttrs:!1,props:n5,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:n,slots:r}){let s,a;const o=kt(),f=kt(),m=Zh(()=>e.show||!e.lazyRender),g=Kt(()=>{const He={zIndex:o.value};if(Cn(e.duration)){const De=e.position==="center"?"animationDuration":"transitionDuration";He[De]=`${e.duration}s`}return He}),S=()=>{s||(s=!0,o.value=e.zIndex!==void 0?+e.zIndex:Bv(),t("open"))},b=()=>{s&&xv(e.beforeClose,{done(){s=!1,t("close"),t("update:show",!1)}})},C=He=>{t("clickOverlay",He),e.closeOnClickOverlay&&b()},V=()=>{if(e.overlay)return Ge(t5,Qr({show:e.show,class:e.overlayClass,zIndex:o.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},X0(),{onClick:C}),{default:r["overlay-content"]})},J=He=>{t("clickCloseIcon",He),b()},te=()=>{if(e.closeable)return Ge(Is,{role:"button",tabindex:0,name:e.closeIcon,class:[w1("close-icon",e.closeIconPosition),gv],classPrefix:e.iconPrefix,onClick:J},null)};let _e;const ke=()=>{_e&&clearTimeout(_e),_e=setTimeout(()=>{t("opened")})},U=()=>t("closed"),Re=He=>t("keydown",He),he=m(()=>{var He;const{round:De,position:et,safeAreaInsetTop:Se,safeAreaInsetBottom:Ue}=e;return Mf(Ge("div",Qr({ref:f,style:g.value,role:"dialog",tabindex:0,class:[w1({round:De,[et]:et}),{"van-safe-area-top":Se,"van-safe-area-bottom":Ue}],onKeydown:Re},n,X0()),[(He=r.default)==null?void 0:He.call(r),te()]),[[lh,e.show]])}),je=()=>{const{position:He,transition:De,transitionAppear:et}=e,Se=He==="center"?"van-fade":`van-popup-slide-${He}`;return Ge(ih,{name:De||Se,appear:et,onAfterEnter:ke,onAfterLeave:U},{default:he})};return In(()=>e.show,He=>{He&&!s&&(S(),n.tabindex===0&&us(()=>{var De;(De=f.value)==null||De.focus()})),!He&&s&&(s=!1,t("close"))}),Ec({popupRef:f}),zv(f,()=>e.show&&e.lockScroll),Rl("popstate",()=>{e.closeOnPopstate&&(b(),a=!1)}),ca(()=>{e.show&&S()}),pl(()=>{a&&(t("update:show",!0),a=!1)}),$i(()=>{e.show&&e.teleport&&(b(),a=!0)}),sa(Av,()=>e.show),()=>e.teleport?Ge(Bf,{to:e.teleport},{default:()=>[V(),je()]}):Ge(_r,null,[V(),je()])}});const Jh=pr(s5);let a5=0;function i5(){const e=ua(),{name:t="unknown"}=(e==null?void 0:e.type)||{};return`${t}-${++a5}`}const[o5,ya]=vr("cell"),ed={tag:Qt("div"),icon:String,size:String,title:an,value:an,label:an,center:Boolean,isLink:Boolean,border:fs,iconPrefix:String,valueClass:hs,labelClass:hs,titleClass:hs,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},l5=rr({},ed,Xh);var c5=jn({name:o5,props:l5,setup(e,{slots:t}){const n=qh(),r=()=>{if(t.label||Cn(e.label))return Ge("div",{class:[ya("label"),e.labelClass]},[t.label?t.label():e.label])},s=()=>{var m;if(t.title||Cn(e.title)){const g=(m=t.title)==null?void 0:m.call(t);return Array.isArray(g)&&g.length===0?void 0:Ge("div",{class:[ya("title"),e.titleClass],style:e.titleStyle},[g||Ge("span",null,[e.title]),r()])}},a=()=>{const m=t.value||t.default;if(m||Cn(e.value))return Ge("div",{class:[ya("value"),e.valueClass]},[m?m():Ge("span",null,[e.value])])},o=()=>{if(t.icon)return t.icon();if(e.icon)return Ge(Is,{name:e.icon,class:ya("left-icon"),classPrefix:e.iconPrefix},null)},f=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const m=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return Ge(Is,{name:m,class:ya("right-icon")},null)}};return()=>{var m;const{tag:g,size:S,center:b,border:C,isLink:V,required:J}=e,te=(m=e.clickable)!=null?m:V,_e={center:b,required:!!J,clickable:te,borderless:!C};return S&&(_e[S]=!!S),Ge(g,{class:ya(_e),role:te?"button":void 0,tabindex:te?0:void 0,onClick:n},{default:()=>{var ke;return[o(),s(),a(),f(),(ke=t.extra)==null?void 0:ke.call(t)]}})}}});const u5=pr(c5);function td(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function f5(e,t){if(td(e)){if(t.required)return!1;if(t.validateEmpty===!1)return!0}return!(t.pattern&&!t.pattern.test(String(e)))}function h5(e,t){return new Promise(n=>{const r=t.validator(e,t);if(Bh(r)){r.then(n);return}n(r)})}function g1(e,t){const{message:n}=t;return Io(n)?n(e,t):n||""}function d5({target:e}){e.composing=!0}function S1({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function _5(e,t){const n=Nh();e.style.height="auto";let r=e.scrollHeight;if(Da(t)){const{maxHeight:s,minHeight:a}=t;s!==void 0&&(r=Math.min(r,s)),a!==void 0&&(r=Math.max(r,a))}r&&(e.style.height=`${r}px`,Lh(n))}function m5(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function ss(e){return[...e].length}function h0(e,t){return[...e].slice(0,t).join("")}const[v5,gr]=vr("field"),p5={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:an,max:Number,min:Number,formatter:Function,clearIcon:Qt("clear"),modelValue:vo(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:Qt("focus"),formatTrigger:Qt("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},b5=rr({},ed,p5,{rows:an,type:Qt("text"),rules:Array,autosize:[Boolean,Object],labelWidth:an,labelClass:hs,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var y5=jn({name:v5,props:b5,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:t,slots:n}){const r=i5(),s=Fs({status:"unvalidated",focused:!1,validateMessage:""}),a=kt(),o=kt(),f=kt(),{parent:m}=Z4(Sv),g=()=>{var W;return String((W=e.modelValue)!=null?W:"")},S=W=>{if(Cn(e[W]))return e[W];if(m&&Cn(m.props[W]))return m.props[W]},b=Kt(()=>{const W=S("readonly");if(e.clearable&&!W){const Ie=g()!=="",xe=e.clearTrigger==="always"||e.clearTrigger==="focus"&&s.focused;return Ie&&xe}return!1}),C=Kt(()=>f.value&&n.input?f.value():e.modelValue),V=Kt(()=>{var W;const Ie=S("required");return Ie==="auto"?(W=e.rules)==null?void 0:W.some(xe=>xe.required):Ie}),J=W=>W.reduce((Ie,xe)=>Ie.then(()=>{if(s.status==="failed")return;let{value:Je}=C;if(xe.formatter&&(Je=xe.formatter(Je,xe)),!f5(Je,xe)){s.status="failed",s.validateMessage=g1(Je,xe);return}if(xe.validator)return td(Je)&&xe.validateEmpty===!1?void 0:h5(Je,xe).then(_t=>{_t&&typeof _t=="string"?(s.status="failed",s.validateMessage=_t):_t===!1&&(s.status="failed",s.validateMessage=g1(Je,xe))})}),Promise.resolve()),te=()=>{s.status="unvalidated",s.validateMessage=""},_e=()=>t("endValidate",{status:s.status,message:s.validateMessage}),ke=(W=e.rules)=>new Promise(Ie=>{te(),W?(t("startValidate"),J(W).then(()=>{s.status==="failed"?(Ie({name:e.name,message:s.validateMessage}),_e()):(s.status="passed",Ie(),_e())})):Ie()}),U=W=>{if(m&&e.rules){const{validateTrigger:Ie}=m.props,xe=c1(Ie).includes(W),Je=e.rules.filter(_t=>_t.trigger?c1(_t.trigger).includes(W):xe);Je.length&&ke(Je)}},Re=W=>{var Ie;const{maxlength:xe}=e;if(Cn(xe)&&ss(W)>+xe){const Je=g();if(Je&&ss(Je)===+xe)return Je;const _t=(Ie=a.value)==null?void 0:Ie.selectionEnd;if(s.focused&&_t){const At=[...W],$=At.length-+xe;return At.splice(_t-$,$),At.join("")}return h0(W,+xe)}return W},he=(W,Ie="onChange")=>{var xe,Je;const _t=W;W=Re(W);const At=ss(_t)-ss(W);if(e.type==="number"||e.type==="digit"){const D=e.type==="number";W=uv(W,D,D),Ie==="onBlur"&&W!==""&&(e.min!==void 0||e.max!==void 0)&&(W=Hh(+W,(xe=e.min)!=null?xe:-1/0,(Je=e.max)!=null?Je:1/0).toString())}let $=0;if(e.formatter&&Ie===e.formatTrigger){const{formatter:D,maxlength:ie}=e;if(W=D(W),Cn(ie)&&ss(W)>+ie&&(W=h0(W,+ie)),a.value&&s.focused){const{selectionEnd:Ee}=a.value,le=h0(_t,Ee);$=ss(D(le))-ss(le)}}if(a.value&&a.value.value!==W)if(s.focused){let{selectionStart:D,selectionEnd:ie}=a.value;if(a.value.value=W,Cn(D)&&Cn(ie)){const Ee=ss(W);At?(D-=At,ie-=At):$&&(D+=$,ie+=$),a.value.setSelectionRange(Math.min(D,Ee),Math.min(ie,Ee))}}else a.value.value=W;W!==e.modelValue&&t("update:modelValue",W)},je=W=>{W.target.composing||he(W.target.value)},He=()=>{var W;return(W=a.value)==null?void 0:W.blur()},De=()=>{var W;return(W=a.value)==null?void 0:W.focus()},et=()=>{const W=a.value;e.type==="textarea"&&e.autosize&&W&&_5(W,e.autosize)},Se=W=>{s.focused=!0,t("focus",W),us(et),S("readonly")&&He()},Ue=W=>{s.focused=!1,he(g(),"onBlur"),t("blur",W),!S("readonly")&&(U("onBlur"),us(et),iv())},be=W=>t("clickInput",W),Be=W=>t("clickLeftIcon",W),it=W=>t("clickRightIcon",W),bt=W=>{aa(W),t("update:modelValue",""),t("clear",W)},xt=Kt(()=>{if(typeof e.error=="boolean")return e.error;if(m&&m.props.showError&&s.status==="failed")return!0}),Et=Kt(()=>{const W=S("labelWidth"),Ie=S("labelAlign");if(W&&Ie!=="top")return{width:Zn(W)}}),dt=W=>{W.keyCode===13&&(!(m&&m.props.submitOnEnter)&&e.type!=="textarea"&&aa(W),e.type==="search"&&He()),t("keypress",W)},Rt=()=>e.id||`${r}-input`,ln=()=>s.status,gt=()=>{const W=gr("control",[S("inputAlign"),{error:xt.value,custom:!!n.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(n.input)return Ge("div",{class:W,onClick:be},[n.input()]);const Ie={id:Rt(),ref:a,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:W,disabled:S("disabled"),readonly:S("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${r}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:Ue,onFocus:Se,onInput:je,onClick:be,onChange:S1,onKeypress:dt,onCompositionend:S1,onCompositionstart:d5};return e.type==="textarea"?Ge("textarea",Ie,null):Ge("input",Qr(m5(e.type),Ie),null)},Ne=()=>{const W=n["left-icon"];if(e.leftIcon||W)return Ge("div",{class:gr("left-icon"),onClick:Be},[W?W():Ge(Is,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},mt=()=>{const W=n["right-icon"];if(e.rightIcon||W)return Ge("div",{class:gr("right-icon"),onClick:it},[W?W():Ge(Is,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},lt=()=>{if(e.showWordLimit&&e.maxlength){const W=ss(g());return Ge("div",{class:gr("word-limit")},[Ge("span",{class:gr("word-num")},[W]),dr("/"),e.maxlength])}},E=()=>{if(m&&m.props.showErrorMessage===!1)return;const W=e.errorMessage||s.validateMessage;if(W){const Ie=n["error-message"],xe=S("errorMessageAlign");return Ge("div",{class:gr("error-message",xe)},[Ie?Ie({message:W}):W])}},sr=()=>{const W=S("labelWidth"),Ie=S("labelAlign"),xe=S("colon")?":":"";if(n.label)return[n.label(),xe];if(e.label)return Ge("label",{id:`${r}-label`,for:n.input?void 0:Rt(),"data-allow-mismatch":"attribute",onClick:Je=>{aa(Je),De()},style:Ie==="top"&&W?{width:Zn(W)}:void 0},[e.label+xe])},dn=()=>[Ge("div",{class:gr("body")},[gt(),b.value&&Ge(Is,{ref:o,name:e.clearIcon,class:gr("clear")},null),mt(),n.button&&Ge("div",{class:gr("button")},[n.button()])]),lt(),E()];return Ec({blur:He,focus:De,validate:ke,formValue:C,resetValidation:te,getValidationStatus:ln}),sa(Ph,{customValue:f,resetValidation:te,validateWithTrigger:U}),In(()=>e.modelValue,()=>{he(g()),te(),U("onChange"),us(et)}),ca(()=>{he(g(),e.formatTrigger),us(et)}),Rl("touchstart",bt,{target:Kt(()=>{var W;return(W=o.value)==null?void 0:W.$el})}),()=>{const W=S("disabled"),Ie=S("labelAlign"),xe=Ne(),Je=()=>{const _t=sr();return Ie==="top"?[xe,_t].filter(Boolean):_t||[]};return Ge(u5,{size:e.size,class:gr({error:xt.value,disabled:W,[`label-${Ie}`]:Ie}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:Et.value,valueClass:gr("value"),titleClass:[gr("label",[Ie,{required:V.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:xe&&Ie!=="top"?()=>xe:null,title:Je,value:dn,extra:n.extra})}}});const w5=pr(y5);let si=0;function g5(e){e?(si||document.body.classList.add("van-toast--unclickable"),si++):si&&(si--,si||document.body.classList.remove("van-toast--unclickable"))}const[S5,wa]=vr("toast"),x5=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],A5={icon:String,show:Boolean,type:Qt("text"),overlay:Boolean,message:an,iconSize:an,duration:z4(2e3),position:Qt("middle"),teleport:[String,Object],wordBreak:String,className:hs,iconPrefix:String,transition:Qt("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:hs,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:an};var nd=jn({name:S5,props:A5,emits:["update:show"],setup(e,{emit:t,slots:n}){let r,s=!1;const a=()=>{const b=e.show&&e.forbidClick;s!==b&&(s=b,g5(s))},o=b=>t("update:show",b),f=()=>{e.closeOnClick&&o(!1)},m=()=>clearTimeout(r),g=()=>{const{icon:b,type:C,iconSize:V,iconPrefix:J,loadingType:te}=e;if(b||C==="success"||C==="fail")return Ge(Is,{name:b||C,size:V,class:wa("icon"),classPrefix:J},null);if(C==="loading")return Ge(Wh,{class:wa("loading"),size:V,type:te},null)},S=()=>{const{type:b,message:C}=e;if(n.message)return Ge("div",{class:wa("text")},[n.message()]);if(Cn(C)&&C!=="")return b==="html"?Ge("div",{key:0,class:wa("text"),innerHTML:String(C)},null):Ge("div",{class:wa("text")},[C])};return In(()=>[e.show,e.forbidClick],a),In(()=>[e.show,e.type,e.message,e.duration],()=>{m(),e.show&&e.duration>0&&(r=setTimeout(()=>{o(!1)},e.duration))}),ca(a),Hi(a),()=>Ge(Jh,Qr({class:[wa([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:f,onClosed:m,"onUpdate:show":o},Oh(e,x5)),{default:()=>[g(),S()]})}});function rd(){const e=Fs({show:!1}),t=s=>{e.show=s},n=s=>{rr(e,s,{transitionAppear:!0}),t(!0)},r=()=>t(!1);return Ec({open:n,close:r,toggle:t}),{open:n,close:r,state:e,toggle:t}}function sd(e){const t=ch(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}const E5={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let Ta=[],R5=!1,x1=rr({},E5);const M5=new Map;function ad(e){return Da(e)?e:{message:e}}function T5(){const{instance:e,unmount:t}=sd({setup(){const n=kt(""),{open:r,state:s,close:a,toggle:o}=rd(),f=()=>{},m=()=>Ge(nd,Qr(s,{onClosed:f,"onUpdate:show":o}),null);return In(n,g=>{s.message=g}),ua().render=m,{open:r,close:a,message:n}}});return e}function C5(){if(!Ta.length||R5){const e=T5();Ta.push(e)}return Ta[Ta.length-1]}function B5(e={}){if(!El)return{};const t=C5(),n=ad(e);return t.open(rr({},x1,M5.get(n.type||x1.type),n)),t}const I5=e=>t=>B5(rr({type:e},ad(t))),O5=I5("loading"),k5=e=>{Ta.length&&Ta[0].close()};pr(nd);const[P5,A1]=vr("cell-group"),N5={title:String,inset:Boolean,border:fs};var L5=jn({name:P5,inheritAttrs:!1,props:N5,setup(e,{slots:t,attrs:n}){const r=()=>{var a;return Ge("div",Qr({class:[A1({inset:e.inset}),{[wv]:e.border&&!e.inset}]},n,X0()),[(a=t.default)==null?void 0:a.call(t)])},s=()=>Ge("div",{class:A1("title",{inset:e.inset})},[t.title?t.title():e.title]);return()=>e.title||t.title?Ge(_r,null,[s(),r()]):r()}});const F5=pr(L5),$5=pr(Lv),[V5,H5]=vr("notify"),D5=["lockScroll","position","show","teleport","zIndex"],j5=rr({},zh,{type:Qt("danger"),color:String,message:an,position:Qt("top"),className:hs,background:String,lockScroll:Boolean});var id=jn({name:V5,props:j5,emits:["update:show"],setup(e,{emit:t,slots:n}){const r=s=>t("update:show",s);return()=>Ge(Jh,Qr({class:[H5([e.type]),e.className],style:{color:e.color,background:e.background},overlay:!1,duration:.2,"onUpdate:show":r},Oh(e,D5)),{default:()=>[n.default?n.default():e.message]})}});let E1,ka;const X5=e=>Da(e)?e:{message:e};function q5(){({instance:ka}=sd({setup(){const{state:e,toggle:t}=rd();return()=>Ge(id,Qr(e,{"onUpdate:show":t}),null)}}))}const U5=()=>({type:"danger",color:void 0,message:"",onClose:void 0,onClick:void 0,onOpened:void 0,duration:3e3,position:void 0,className:"",lockScroll:!1,background:void 0});let Y5=U5();const K5=()=>{ka&&ka.toggle(!1)};function ga(e){if(El)return ka||q5(),e=rr({},Y5,X5(e)),ka.open(e),clearTimeout(E1),e.duration>0&&(E1=setTimeout(K5,e.duration)),ka}pr(id);const[W5,ai]=vr("slider"),G5={min:vo(0),max:vo(100),step:vo(1),range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:an,buttonSize:an,activeColor:String,inactiveColor:String,modelValue:{type:[Number,Array],default:0}};var z5=jn({name:W5,props:G5,emits:["change","dragEnd","dragStart","update:modelValue"],setup(e,{emit:t,slots:n}){let r,s,a;const o=kt(),f=[kt(),kt()],m=kt(),g=Qh(),S=Kt(()=>Number(e.max)-Number(e.min)),b=Kt(()=>{const be=e.vertical?"width":"height";return{background:e.inactiveColor,[be]:Zn(e.barHeight)}}),C=be=>e.range&&Array.isArray(be),V=()=>{const{modelValue:be,min:Be}=e;return C(be)?`${(be[1]-be[0])*100/S.value}%`:`${(be-Number(Be))*100/S.value}%`},J=()=>{const{modelValue:be,min:Be}=e;return C(be)?`${(be[0]-Number(Be))*100/S.value}%`:"0%"},te=Kt(()=>{const Be={[e.vertical?"height":"width"]:V(),background:e.activeColor};m.value&&(Be.transition="none");const it=()=>e.vertical?e.reverse?"bottom":"top":e.reverse?"right":"left";return Be[it()]=J(),Be}),_e=be=>{const Be=+e.min,it=+e.max,bt=+e.step;be=Hh(be,Be,it);const xt=Math.round((be-Be)/bt)*bt;return fv(Be,xt)},ke=()=>{const be=e.modelValue;C(be)?a=be.map(_e):a=_e(be)},U=be=>{var Be,it;const bt=(Be=be[0])!=null?Be:Number(e.min),xt=(it=be[1])!=null?it:Number(e.max);return bt>xt?[xt,bt]:[bt,xt]},Re=(be,Be)=>{C(be)?be=U(be).map(_e):be=_e(be),l1(be,e.modelValue)||t("update:modelValue",be),Be&&!l1(be,a)&&t("change",be)},he=be=>{if(be.stopPropagation(),e.disabled||e.readonly)return;ke();const{min:Be,reverse:it,vertical:bt,modelValue:xt}=e,Et=f1(o),dt=()=>bt?it?Et.bottom-be.clientY:be.clientY-Et.top:it?Et.right-be.clientX:be.clientX-Et.left,Rt=bt?Et.height:Et.width,ln=Number(Be)+dt()/Rt*S.value;if(C(xt)){const[gt,Ne]=xt,mt=(gt+Ne)/2;ln<=mt?Re([ln,Ne],!0):Re([gt,ln],!0)}else Re(ln,!0)},je=be=>{e.disabled||e.readonly||(g.start(be),s=e.modelValue,ke(),m.value="start")},He=be=>{if(e.disabled||e.readonly)return;m.value==="start"&&t("dragStart",be),aa(be,!0),g.move(be),m.value="dragging";const Be=f1(o),it=e.vertical?g.deltaY.value:g.deltaX.value,bt=e.vertical?Be.height:Be.width;let xt=it/bt*S.value;if(e.reverse&&(xt=-xt),C(a)){const Et=e.reverse?1-r:r;s[Et]=a[Et]+xt}else s=a+xt;Re(s)},De=be=>{e.disabled||e.readonly||(m.value==="dragging"&&(Re(s,!0),t("dragEnd",be)),m.value="")},et=be=>typeof be=="number"?ai("button-wrapper",["left","right"][be]):ai("button-wrapper",e.reverse?"left":"right"),Se=(be,Be)=>{const it=m.value==="dragging";if(typeof Be=="number"){const bt=n[Be===0?"left-button":"right-button"];let xt;if(it&&Array.isArray(s)&&(xt=s[0]>s[1]?r^1:r),bt)return bt({value:be,dragging:it,dragIndex:xt})}return n.button?n.button({value:be,dragging:it}):Ge("div",{class:ai("button"),style:$h(e.buttonSize)},null)},Ue=be=>{const Be=typeof be=="number"?e.modelValue[be]:e.modelValue;return Ge("div",{ref:f[be??0],role:"slider",class:et(be),tabindex:e.disabled?void 0:0,"aria-valuemin":e.min,"aria-valuenow":Be,"aria-valuemax":e.max,"aria-disabled":e.disabled||void 0,"aria-readonly":e.readonly||void 0,"aria-orientation":e.vertical?"vertical":"horizontal",onTouchstartPassive:it=>{typeof be=="number"&&(r=be),je(it)},onTouchend:De,onTouchcancel:De,onClick:Fh},[Se(Be,be)])};return Re(e.modelValue),sv(()=>e.modelValue),f.forEach(be=>{Rl("touchmove",He,{target:be})}),()=>Ge("div",{ref:o,style:b.value,class:ai({vertical:e.vertical,disabled:e.disabled}),onClick:he},[Ge("div",{class:ai("bar"),style:te.value},[e.range?[Ue(0),Ue(1)]:Ue()])])}});const Q5=pr(z5);var Z5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function J5(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var od={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Z5,function(){function n(N){return new Int8Array(N)}function r(N){return new Int16Array(N)}function s(N){return new Int32Array(N)}function a(N){return new Float32Array(N)}function o(N){return new Float64Array(N)}function f(N){if(N.length==1)return a(N[0]);var re=N[0];N=N.slice(1);for(var de=[],se=0;se<re;se++)de.push(f(N));return de}function m(N){if(N.length==1)return s(N[0]);var re=N[0];N=N.slice(1);for(var de=[],se=0;se<re;se++)de.push(m(N));return de}function g(N){if(N.length==1)return r(N[0]);var re=N[0];N=N.slice(1);for(var de=[],se=0;se<re;se++)de.push(g(N));return de}function S(N){if(N.length==1)return new Array(N[0]);var re=N[0];N=N.slice(1);for(var de=[],se=0;se<re;se++)de.push(S(N));return de}var b={};b.fill=function(N,re,de,se){if(arguments.length==2)for(var Ae=0;Ae<N.length;Ae++)N[Ae]=arguments[1];else for(var Ae=re;Ae<de;Ae++)N[Ae]=se};var C={};C.arraycopy=function(N,re,de,se,Ae){for(var ae=re+Ae;re<ae;)de[se++]=N[re++]};var V={};V.SQRT2=1.4142135623730951,V.FAST_LOG10=function(N){return Math.log10(N)},V.FAST_LOG10_X=function(N,re){return Math.log10(N)*re};function J(N){this.ordinal=N}J.short_block_allowed=new J(0),J.short_block_coupled=new J(1),J.short_block_dispensed=new J(2),J.short_block_forced=new J(3);var te={};te.MAX_VALUE=34028235e31;function _e(N){this.ordinal=N}_e.vbr_off=new _e(0),_e.vbr_mt=new _e(1),_e.vbr_rh=new _e(2),_e.vbr_abr=new _e(3),_e.vbr_mtrh=new _e(4),_e.vbr_default=_e.vbr_mtrh;var ke=function(N){},U={System:C,VbrMode:_e,Float:te,ShortBlock:J,Util:V,Arrays:b,new_array_n:S,new_byte:n,new_double:o,new_float:a,new_float_n:f,new_int:s,new_int_n:m,new_short:r,new_short_n:g,assert:ke},Re=U.System,he=U.Util,je=U.Arrays,He=U.new_float;function De(){var N=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*he.SQRT2*.5/2384e-9,.017876148*he.SQRT2*.5/2384e-9,.003134727*he.SQRT2*.5/2384e-9,.002457142*he.SQRT2*.5/2384e-9,971317e-9*he.SQRT2*.5/2384e-9,218868e-9*he.SQRT2*.5/2384e-9,101566e-9*he.SQRT2*.5/2384e-9,13828e-9*he.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],re=12,de=36,se=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],Ae=se[E.SHORT_TYPE],ae=se[E.SHORT_TYPE],ve=se[E.SHORT_TYPE],Pe=se[E.SHORT_TYPE],$e=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function Y(O,H,i){for(var z=10,G=H+238-14-286,j=-15;j<0;j++){var h,R,I;h=N[z+-10],R=O[G+-224]*h,I=O[H+224]*h,h=N[z+-9],R+=O[G+-160]*h,I+=O[H+160]*h,h=N[z+-8],R+=O[G+-96]*h,I+=O[H+96]*h,h=N[z+-7],R+=O[G+-32]*h,I+=O[H+32]*h,h=N[z+-6],R+=O[G+32]*h,I+=O[H+-32]*h,h=N[z+-5],R+=O[G+96]*h,I+=O[H+-96]*h,h=N[z+-4],R+=O[G+160]*h,I+=O[H+-160]*h,h=N[z+-3],R+=O[G+224]*h,I+=O[H+-224]*h,h=N[z+-2],R+=O[H+-256]*h,I-=O[G+256]*h,h=N[z+-1],R+=O[H+-192]*h,I-=O[G+192]*h,h=N[z+0],R+=O[H+-128]*h,I-=O[G+128]*h,h=N[z+1],R+=O[H+-64]*h,I-=O[G+64]*h,h=N[z+2],R+=O[H+0]*h,I-=O[G+0]*h,h=N[z+3],R+=O[H+64]*h,I-=O[G+-64]*h,h=N[z+4],R+=O[H+128]*h,I-=O[G+-128]*h,h=N[z+5],R+=O[H+192]*h,I-=O[G+-192]*h,R*=N[z+6],h=I-R,i[30+j*2]=I+R,i[31+j*2]=N[z+7]*h,z+=18,H--,G++}{var R,I,k,F;I=O[H+-16]*N[z+-10],R=O[H+-32]*N[z+-2],I+=(O[H+-48]-O[H+16])*N[z+-9],R+=O[H+-96]*N[z+-1],I+=(O[H+-80]+O[H+48])*N[z+-8],R+=O[H+-160]*N[z+0],I+=(O[H+-112]-O[H+80])*N[z+-7],R+=O[H+-224]*N[z+1],I+=(O[H+-144]+O[H+112])*N[z+-6],R-=O[H+32]*N[z+2],I+=(O[H+-176]-O[H+144])*N[z+-5],R-=O[H+96]*N[z+3],I+=(O[H+-208]+O[H+176])*N[z+-4],R-=O[H+160]*N[z+4],I+=(O[H+-240]-O[H+208])*N[z+-3],R-=O[H+224],k=R-I,F=R+I,I=i[14],R=i[15]-I,i[31]=F+I,i[30]=k+R,i[15]=k-R,i[14]=F-I}{var l;l=i[28]-i[0],i[0]+=i[28],i[28]=l*N[z+-2*18+7],l=i[29]-i[1],i[1]+=i[29],i[29]=l*N[z+-2*18+7],l=i[26]-i[2],i[2]+=i[26],i[26]=l*N[z+-4*18+7],l=i[27]-i[3],i[3]+=i[27],i[27]=l*N[z+-4*18+7],l=i[24]-i[4],i[4]+=i[24],i[24]=l*N[z+-6*18+7],l=i[25]-i[5],i[5]+=i[25],i[25]=l*N[z+-6*18+7],l=i[22]-i[6],i[6]+=i[22],i[22]=l*he.SQRT2,l=i[23]-i[7],i[7]+=i[23],i[23]=l*he.SQRT2-i[7],i[7]-=i[6],i[22]-=i[7],i[23]-=i[22],l=i[6],i[6]=i[31]-l,i[31]=i[31]+l,l=i[7],i[7]=i[30]-l,i[30]=i[30]+l,l=i[22],i[22]=i[15]-l,i[15]=i[15]+l,l=i[23],i[23]=i[14]-l,i[14]=i[14]+l,l=i[20]-i[8],i[8]+=i[20],i[20]=l*N[z+-10*18+7],l=i[21]-i[9],i[9]+=i[21],i[21]=l*N[z+-10*18+7],l=i[18]-i[10],i[10]+=i[18],i[18]=l*N[z+-12*18+7],l=i[19]-i[11],i[11]+=i[19],i[19]=l*N[z+-12*18+7],l=i[16]-i[12],i[12]+=i[16],i[16]=l*N[z+-14*18+7],l=i[17]-i[13],i[13]+=i[17],i[17]=l*N[z+-14*18+7],l=-i[20]+i[24],i[20]+=i[24],i[24]=l*N[z+-12*18+7],l=-i[21]+i[25],i[21]+=i[25],i[25]=l*N[z+-12*18+7],l=i[4]-i[8],i[4]+=i[8],i[8]=l*N[z+-12*18+7],l=i[5]-i[9],i[5]+=i[9],i[9]=l*N[z+-12*18+7],l=i[0]-i[12],i[0]+=i[12],i[12]=l*N[z+-4*18+7],l=i[1]-i[13],i[1]+=i[13],i[13]=l*N[z+-4*18+7],l=i[16]-i[28],i[16]+=i[28],i[28]=l*N[z+-4*18+7],l=-i[17]+i[29],i[17]+=i[29],i[29]=l*N[z+-4*18+7],l=he.SQRT2*(i[2]-i[10]),i[2]+=i[10],i[10]=l,l=he.SQRT2*(i[3]-i[11]),i[3]+=i[11],i[11]=l,l=he.SQRT2*(-i[18]+i[26]),i[18]+=i[26],i[26]=l-i[18],l=he.SQRT2*(-i[19]+i[27]),i[19]+=i[27],i[27]=l-i[19],l=i[2],i[19]-=i[3],i[3]-=l,i[2]=i[31]-l,i[31]+=l,l=i[3],i[11]-=i[19],i[18]-=l,i[3]=i[30]-l,i[30]+=l,l=i[18],i[27]-=i[11],i[19]-=l,i[18]=i[15]-l,i[15]+=l,l=i[19],i[10]-=l,i[19]=i[14]-l,i[14]+=l,l=i[10],i[11]-=l,i[10]=i[23]-l,i[23]+=l,l=i[11],i[26]-=l,i[11]=i[22]-l,i[22]+=l,l=i[26],i[27]-=l,i[26]=i[7]-l,i[7]+=l,l=i[27],i[27]=i[6]-l,i[6]+=l,l=he.SQRT2*(i[0]-i[4]),i[0]+=i[4],i[4]=l,l=he.SQRT2*(i[1]-i[5]),i[1]+=i[5],i[5]=l,l=he.SQRT2*(i[16]-i[20]),i[16]+=i[20],i[20]=l,l=he.SQRT2*(i[17]-i[21]),i[17]+=i[21],i[21]=l,l=-he.SQRT2*(i[8]-i[12]),i[8]+=i[12],i[12]=l-i[8],l=-he.SQRT2*(i[9]-i[13]),i[9]+=i[13],i[13]=l-i[9],l=-he.SQRT2*(i[25]-i[29]),i[25]+=i[29],i[29]=l-i[25],l=-he.SQRT2*(i[24]+i[28]),i[24]-=i[28],i[28]=l-i[24],l=i[24]-i[16],i[24]=l,l=i[20]-l,i[20]=l,l=i[28]-l,i[28]=l,l=i[25]-i[17],i[25]=l,l=i[21]-l,i[21]=l,l=i[29]-l,i[29]=l,l=i[17]-i[1],i[17]=l,l=i[9]-l,i[9]=l,l=i[25]-l,i[25]=l,l=i[5]-l,i[5]=l,l=i[21]-l,i[21]=l,l=i[13]-l,i[13]=l,l=i[29]-l,i[29]=l,l=i[1]-i[0],i[1]=l,l=i[16]-l,i[16]=l,l=i[17]-l,i[17]=l,l=i[8]-l,i[8]=l,l=i[9]-l,i[9]=l,l=i[24]-l,i[24]=l,l=i[25]-l,i[25]=l,l=i[4]-l,i[4]=l,l=i[5]-l,i[5]=l,l=i[20]-l,i[20]=l,l=i[21]-l,i[21]=l,l=i[12]-l,i[12]=l,l=i[13]-l,i[13]=l,l=i[28]-l,i[28]=l,l=i[29]-l,i[29]=l,l=i[0],i[0]+=i[31],i[31]-=l,l=i[1],i[1]+=i[30],i[30]-=l,l=i[16],i[16]+=i[15],i[15]-=l,l=i[17],i[17]+=i[14],i[14]-=l,l=i[8],i[8]+=i[23],i[23]-=l,l=i[9],i[9]+=i[22],i[22]-=l,l=i[24],i[24]+=i[7],i[7]-=l,l=i[25],i[25]+=i[6],i[6]-=l,l=i[4],i[4]+=i[27],i[27]-=l,l=i[5],i[5]+=i[26],i[26]-=l,l=i[20],i[20]+=i[11],i[11]-=l,l=i[21],i[21]+=i[10],i[10]-=l,l=i[12],i[12]+=i[19],i[19]-=l,l=i[13],i[13]+=i[18],i[18]-=l,l=i[28],i[28]+=i[3],i[3]-=l,l=i[29],i[29]+=i[2],i[2]-=l}}function ge(O,H){for(var i=0;i<3;i++){var z,G,j,h,R,I;h=O[H+2*3]*se[E.SHORT_TYPE][0]-O[H+5*3],z=O[H+0*3]*se[E.SHORT_TYPE][2]-O[H+3*3],G=h+z,j=h-z,h=O[H+5*3]*se[E.SHORT_TYPE][0]+O[H+2*3],z=O[H+3*3]*se[E.SHORT_TYPE][2]+O[H+0*3],R=h+z,I=-h+z,z=(O[H+1*3]*se[E.SHORT_TYPE][1]-O[H+4*3])*2069978111953089e-26,h=(O[H+4*3]*se[E.SHORT_TYPE][1]+O[H+1*3])*2069978111953089e-26,O[H+3*0]=G*190752519173728e-25+z,O[H+3*5]=-R*190752519173728e-25+h,j=j*.8660254037844387*1907525191737281e-26,R=R*.5*1907525191737281e-26+h,O[H+3*1]=j-R,O[H+3*2]=j+R,G=G*.5*1907525191737281e-26-z,I=I*.8660254037844387*1907525191737281e-26,O[H+3*3]=G+I,O[H+3*4]=G-I,H++}}function B(O,H,i){var z,G;{var j,h,R,I,k,F,l,A;j=i[17]-i[9],R=i[15]-i[11],I=i[14]-i[12],k=i[0]+i[8],F=i[1]+i[7],l=i[2]+i[6],A=i[3]+i[5],O[H+17]=k+l-A-(F-i[4]),G=(k+l-A)*ae[19]+(F-i[4]),z=(j-R-I)*ae[18],O[H+5]=z+G,O[H+6]=z-G,h=(i[16]-i[10])*ae[18],F=F*ae[19]+i[4],z=j*ae[12]+h+R*ae[13]+I*ae[14],G=-k*ae[16]+F-l*ae[17]+A*ae[15],O[H+1]=z+G,O[H+2]=z-G,z=j*ae[13]-h-R*ae[14]+I*ae[12],G=-k*ae[17]+F-l*ae[15]+A*ae[16],O[H+9]=z+G,O[H+10]=z-G,z=j*ae[14]-h+R*ae[12]-I*ae[13],G=k*ae[15]-F+l*ae[16]-A*ae[17],O[H+13]=z+G,O[H+14]=z-G}{var y,d,w,x,u,_,v,P;y=i[8]-i[0],w=i[6]-i[2],x=i[5]-i[3],u=i[17]+i[9],_=i[16]+i[10],v=i[15]+i[11],P=i[14]+i[12],O[H+0]=u+v+P+(_+i[13]),z=(u+v+P)*ae[19]-(_+i[13]),G=(y-w+x)*ae[18],O[H+11]=z+G,O[H+12]=z-G,d=(i[7]-i[1])*ae[18],_=i[13]-_*ae[19],z=u*ae[15]-_+v*ae[16]+P*ae[17],G=y*ae[14]+d+w*ae[12]+x*ae[13],O[H+3]=z+G,O[H+4]=z-G,z=-u*ae[17]+_-v*ae[15]-P*ae[16],G=y*ae[13]+d-w*ae[14]-x*ae[12],O[H+7]=z+G,O[H+8]=z-G,z=-u*ae[16]+_-v*ae[17]-P*ae[15],G=y*ae[12]-d+w*ae[13]-x*ae[14],O[H+15]=z+G,O[H+16]=z-G}}this.mdct_sub48=function(O,H,i){for(var z=H,G=286,j=0;j<O.channels_out;j++){for(var h=0;h<O.mode_gr;h++){for(var R,I=O.l3_side.tt[h][j],k=I.xr,F=0,l=O.sb_sample[j][1-h],A=0,y=0;y<18/2;y++)for(Y(z,G,l[A]),Y(z,G+32,l[A+1]),A+=2,G+=64,R=1;R<32;R+=2)l[A-1][R]*=-1;for(R=0;R<32;R++,F+=18){var d=I.block_type,w=O.sb_sample[j][h],x=O.sb_sample[j][1-h];if(I.mixed_block_flag!=0&&R<2&&(d=0),O.amp_filter[R]<1e-12)je.fill(k,F+0,F+18,0);else{if(O.amp_filter[R]<1)for(var y=0;y<18;y++)x[y][$e[R]]*=O.amp_filter[R];if(d==E.SHORT_TYPE){for(var y=-re/4;y<0;y++){var u=se[E.SHORT_TYPE][y+3];k[F+y*3+9]=w[9+y][$e[R]]*u-w[8-y][$e[R]],k[F+y*3+18]=w[14-y][$e[R]]*u+w[15+y][$e[R]],k[F+y*3+10]=w[15+y][$e[R]]*u-w[14-y][$e[R]],k[F+y*3+19]=x[2-y][$e[R]]*u+x[3+y][$e[R]],k[F+y*3+11]=x[3+y][$e[R]]*u-x[2-y][$e[R]],k[F+y*3+20]=x[8-y][$e[R]]*u+x[9+y][$e[R]]}ge(k,F)}else{for(var _=He(18),y=-de/4;y<0;y++){var v,P;v=se[d][y+27]*x[y+9][$e[R]]+se[d][y+36]*x[8-y][$e[R]],P=se[d][y+9]*w[y+9][$e[R]]-se[d][y+18]*w[8-y][$e[R]],_[y+9]=v-P*Ae[3+y+9],_[y+18]=v*Ae[3+y+9]+P}B(k,F,_)}}if(d!=E.SHORT_TYPE&&R!=0)for(var y=7;y>=0;--y){var ue,q;ue=k[F+y]*ve[20+y]+k[F+-1-y]*Pe[28+y],q=k[F+y]*Pe[28+y]-k[F+-1-y]*ve[20+y],k[F+-1-y]=ue,k[F+y]=q}}}if(z=i,G=286,O.mode_gr==1)for(var Q=0;Q<18;Q++)Re.arraycopy(O.sb_sample[j][1][Q],0,O.sb_sample[j][0][Q],0,32)}}}var et=De,Se=U.System,Ue=U.new_float,be=U.new_float_n;function Be(){this.l=Ue(E.SBMAX_l),this.s=be([E.SBMAX_s,3]);var N=this;this.assign=function(re){Se.arraycopy(re.l,0,N.l,0,E.SBMAX_l);for(var de=0;de<E.SBMAX_s;de++)for(var se=0;se<3;se++)N.s[de][se]=re.s[de][se]}}var it=Be;function bt(){this.thm=new it,this.en=new it}var xt=bt,Et=U.System,dt=U.VbrMode,Rt=U.new_array_n,ln=U.new_float,gt=U.new_float_n,Ne=U.new_int,mt=U.assert;lt.ENCDELAY=576,lt.POSTDELAY=1152,lt.MDCTDELAY=48,lt.FFTOFFSET=224+lt.MDCTDELAY,lt.DECDELAY=528,lt.SBLIMIT=32,lt.CBANDS=64,lt.SBPSY_l=21,lt.SBPSY_s=12,lt.SBMAX_l=22,lt.SBMAX_s=13,lt.PSFB21=6,lt.PSFB12=6,lt.BLKSIZE=1024,lt.HBLKSIZE=lt.BLKSIZE/2+1,lt.BLKSIZE_s=256,lt.HBLKSIZE_s=lt.BLKSIZE_s/2+1,lt.NORM_TYPE=0,lt.START_TYPE=1,lt.SHORT_TYPE=2,lt.STOP_TYPE=3,lt.MPG_MD_LR_LR=0,lt.MPG_MD_LR_I=1,lt.MPG_MD_MS_LR=2,lt.MPG_MD_MS_I=3,lt.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function lt(){var N=et,re=xt,de=lt.FFTOFFSET,se=lt.MPG_MD_MS_LR,Ae=null;this.psy=null;var ae=null,ve=null,Pe=null;this.setModules=function(O,H,i,z){Ae=O,this.psy=H,ae=H,ve=z,Pe=i};var $e=new N;function Y(O){var H,i;if(O.ATH.useAdjust==0){O.ATH.adjust=1;return}if(i=O.loudness_sq[0][0],H=O.loudness_sq[1][0],O.channels_out==2?(i+=O.loudness_sq[0][1],H+=O.loudness_sq[1][1]):(i+=i,H+=H),O.mode_gr==2&&(i=Math.max(i,H)),i*=.5,i*=O.ATH.aaSensitivityP,i>.03125)O.ATH.adjust>=1?O.ATH.adjust=1:O.ATH.adjust<O.ATH.adjustLimit&&(O.ATH.adjust=O.ATH.adjustLimit),O.ATH.adjustLimit=1;else{var z=31.98*i+625e-6;O.ATH.adjust>=z?(O.ATH.adjust*=z*.075+.925,O.ATH.adjust<z&&(O.ATH.adjust=z)):O.ATH.adjustLimit>=z?O.ATH.adjust=z:O.ATH.adjust<O.ATH.adjustLimit&&(O.ATH.adjust=O.ATH.adjustLimit),O.ATH.adjustLimit=z}}function ge(O){var H,i;for(mt(0<=O.bitrate_index&&O.bitrate_index<16),mt(0<=O.mode_ext&&O.mode_ext<4),O.bitrate_stereoMode_Hist[O.bitrate_index][4]++,O.bitrate_stereoMode_Hist[15][4]++,O.channels_out==2&&(O.bitrate_stereoMode_Hist[O.bitrate_index][O.mode_ext]++,O.bitrate_stereoMode_Hist[15][O.mode_ext]++),H=0;H<O.mode_gr;++H)for(i=0;i<O.channels_out;++i){var z=O.l3_side.tt[H][i].block_type|0;O.l3_side.tt[H][i].mixed_block_flag!=0&&(z=4),O.bitrate_blockType_Hist[O.bitrate_index][z]++,O.bitrate_blockType_Hist[O.bitrate_index][5]++,O.bitrate_blockType_Hist[15][z]++,O.bitrate_blockType_Hist[15][5]++}}function B(O,H){var i=O.internal_flags,z,G;if(i.lame_encode_frame_init==0){var j,h,R=ln(2014),I=ln(2014);for(i.lame_encode_frame_init=1,j=0,h=0;j<286+576*(1+i.mode_gr);++j)j<576*i.mode_gr?(R[j]=0,i.channels_out==2&&(I[j]=0)):(R[j]=H[0][h],i.channels_out==2&&(I[j]=H[1][h]),++h);for(G=0;G<i.mode_gr;G++)for(z=0;z<i.channels_out;z++)i.l3_side.tt[G][z].block_type=lt.SHORT_TYPE;$e.mdct_sub48(i,R,I),mt(i.mf_size>=lt.BLKSIZE+O.framesize-lt.FFTOFFSET),mt(i.mf_size>=512+O.framesize-32)}}this.lame_encode_mp3_frame=function(O,H,i,z,G,j){var h,R=Rt([2,2]);R[0][0]=new re,R[0][1]=new re,R[1][0]=new re,R[1][1]=new re;var I=Rt([2,2]);I[0][0]=new re,I[0][1]=new re,I[1][0]=new re,I[1][1]=new re;var k,F=[null,null],l=O.internal_flags,A=gt([2,4]),y=[.5,.5],d=[[0,0],[0,0]],w=[[0,0],[0,0]],x,u,_;if(F[0]=H,F[1]=i,l.lame_encode_frame_init==0&&B(O,F),l.padding=0,(l.slot_lag-=l.frac_SpF)<0&&(l.slot_lag+=O.out_samplerate,l.padding=1),l.psymodel!=0){var v,P=[null,null],ue=0,q=Ne(2);for(_=0;_<l.mode_gr;_++){for(u=0;u<l.channels_out;u++)P[u]=F[u],ue=576+_*576-lt.FFTOFFSET;if(O.VBR==dt.vbr_mtrh||O.VBR==dt.vbr_mt?v=ae.L3psycho_anal_vbr(O,P,ue,_,R,I,d[_],w[_],A[_],q):v=ae.L3psycho_anal_ns(O,P,ue,_,R,I,d[_],w[_],A[_],q),v!=0)return-4;for(O.mode==bn.JOINT_STEREO&&(y[_]=A[_][2]+A[_][3],y[_]>0&&(y[_]=A[_][3]/y[_])),u=0;u<l.channels_out;u++){var Q=l.l3_side.tt[_][u];Q.block_type=q[u],Q.mixed_block_flag=0}}}else for(_=0;_<l.mode_gr;_++)for(u=0;u<l.channels_out;u++)l.l3_side.tt[_][u].block_type=lt.NORM_TYPE,l.l3_side.tt[_][u].mixed_block_flag=0,w[_][u]=d[_][u]=700;if(Y(l),$e.mdct_sub48(l,F[0],F[1]),l.mode_ext=lt.MPG_MD_LR_LR,O.force_ms)l.mode_ext=lt.MPG_MD_MS_LR;else if(O.mode==bn.JOINT_STEREO){var c=0,p=0;for(_=0;_<l.mode_gr;_++)for(u=0;u<l.channels_out;u++)c+=w[_][u],p+=d[_][u];if(c<=1*p){var fe=l.l3_side.tt[0],pe=l.l3_side.tt[l.mode_gr-1];fe[0].block_type==fe[1].block_type&&pe[0].block_type==pe[1].block_type&&(l.mode_ext=lt.MPG_MD_MS_LR)}}if(l.mode_ext==se?(k=I,x=w):(k=R,x=d),O.analysis&&l.pinfo!=null)for(_=0;_<l.mode_gr;_++)for(u=0;u<l.channels_out;u++)l.pinfo.ms_ratio[_]=l.ms_ratio[_],l.pinfo.ms_ener_ratio[_]=y[_],l.pinfo.blocktype[_][u]=l.l3_side.tt[_][u].block_type,l.pinfo.pe[_][u]=x[_][u],Et.arraycopy(l.l3_side.tt[_][u].xr,0,l.pinfo.xr[_][u],0,576),l.mode_ext==se&&(l.pinfo.ers[_][u]=l.pinfo.ers[_][u+2],Et.arraycopy(l.pinfo.energy[_][u+2],0,l.pinfo.energy[_][u],0,l.pinfo.energy[_][u].length));if(O.VBR==dt.vbr_off||O.VBR==dt.vbr_abr){var Le,We;for(Le=0;Le<18;Le++)l.nsPsy.pefirbuf[Le]=l.nsPsy.pefirbuf[Le+1];for(We=0,_=0;_<l.mode_gr;_++)for(u=0;u<l.channels_out;u++)We+=x[_][u];for(l.nsPsy.pefirbuf[18]=We,We=l.nsPsy.pefirbuf[9],Le=0;Le<9;Le++)We+=(l.nsPsy.pefirbuf[Le]+l.nsPsy.pefirbuf[18-Le])*lt.fircoef[Le];for(We=670*5*l.mode_gr*l.channels_out/We,_=0;_<l.mode_gr;_++)for(u=0;u<l.channels_out;u++)x[_][u]*=We}if(l.iteration_loop.iteration_loop(O,x,y,k),Ae.format_bitstream(O),h=Ae.copy_buffer(l,z,G,j,1),O.bWriteVbrTag&&ve.addVbrFrame(O),O.analysis&&l.pinfo!=null){for(u=0;u<l.channels_out;u++){var Ve;for(Ve=0;Ve<de;Ve++)l.pinfo.pcmdata[u][Ve]=l.pinfo.pcmdata[u][Ve+O.framesize];for(Ve=de;Ve<1600;Ve++)l.pinfo.pcmdata[u][Ve]=F[u][Ve-de]}Pe.set_frame_pinfo(O,k)}return ge(l),h}}var E=lt,sr=U.Util,dn=U.new_float;function W(){var N=dn(E.BLKSIZE),re=dn(E.BLKSIZE_s/2),de=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function se(ae,ve,Pe){var $e=0,Y,ge,B;Pe<<=1;var O=ve+Pe;Y=4;do{var H,i,z,G,j,h,R;R=Y>>1,G=Y,j=Y<<1,h=j+G,Y=j<<1,ge=ve,B=ge+R;do{var I,k,F,l;k=ae[ge+0]-ae[ge+G],I=ae[ge+0]+ae[ge+G],l=ae[ge+j]-ae[ge+h],F=ae[ge+j]+ae[ge+h],ae[ge+j]=I-F,ae[ge+0]=I+F,ae[ge+h]=k-l,ae[ge+G]=k+l,k=ae[B+0]-ae[B+G],I=ae[B+0]+ae[B+G],l=sr.SQRT2*ae[B+h],F=sr.SQRT2*ae[B+j],ae[B+j]=I-F,ae[B+0]=I+F,ae[B+h]=k-l,ae[B+G]=k+l,B+=Y,ge+=Y}while(ge<O);for(i=de[$e+0],H=de[$e+1],z=1;z<R;z++){var A,y;A=1-2*H*H,y=2*H*i,ge=ve+z,B=ve+G-z;do{var d,w,x,I,k,u,F,_,l,v;w=y*ae[ge+G]-A*ae[B+G],d=A*ae[ge+G]+y*ae[B+G],k=ae[ge+0]-d,I=ae[ge+0]+d,u=ae[B+0]-w,x=ae[B+0]+w,w=y*ae[ge+h]-A*ae[B+h],d=A*ae[ge+h]+y*ae[B+h],l=ae[ge+j]-d,F=ae[ge+j]+d,v=ae[B+j]-w,_=ae[B+j]+w,w=H*F-i*v,d=i*F+H*v,ae[ge+j]=I-d,ae[ge+0]=I+d,ae[B+h]=u-w,ae[B+G]=u+w,w=i*_-H*l,d=H*_+i*l,ae[B+j]=x-d,ae[B+0]=x+d,ae[ge+h]=k-w,ae[ge+G]=k+w,B+=Y,ge+=Y}while(ge<O);A=i,i=A*de[$e+0]-H*de[$e+1],H=A*de[$e+1]+H*de[$e+0]}$e+=2}while(Y<Pe)}var Ae=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(ae,ve,Pe,$e,Y){for(var ge=0;ge<3;ge++){var B=E.BLKSIZE_s/2,O=65535&576/3*(ge+1),H=E.BLKSIZE_s/8-1;do{var i,z,G,j,h,R=Ae[H<<2]&255;i=re[R]*$e[Pe][Y+R+O],h=re[127-R]*$e[Pe][Y+R+O+128],z=i-h,i=i+h,G=re[R+64]*$e[Pe][Y+R+O+64],h=re[63-R]*$e[Pe][Y+R+O+192],j=G-h,G=G+h,B-=4,ve[ge][B+0]=i+G,ve[ge][B+2]=i-G,ve[ge][B+1]=z+j,ve[ge][B+3]=z-j,i=re[R+1]*$e[Pe][Y+R+O+1],h=re[126-R]*$e[Pe][Y+R+O+129],z=i-h,i=i+h,G=re[R+65]*$e[Pe][Y+R+O+65],h=re[62-R]*$e[Pe][Y+R+O+193],j=G-h,G=G+h,ve[ge][B+E.BLKSIZE_s/2+0]=i+G,ve[ge][B+E.BLKSIZE_s/2+2]=i-G,ve[ge][B+E.BLKSIZE_s/2+1]=z+j,ve[ge][B+E.BLKSIZE_s/2+3]=z-j}while(--H>=0);se(ve[ge],B,E.BLKSIZE_s/2)}},this.fft_long=function(ae,ve,Pe,$e,Y){var ge=E.BLKSIZE/8-1,B=E.BLKSIZE/2;do{var O,H,i,z,G,j=Ae[ge]&255;O=N[j]*$e[Pe][Y+j],G=N[j+512]*$e[Pe][Y+j+512],H=O-G,O=O+G,i=N[j+256]*$e[Pe][Y+j+256],G=N[j+768]*$e[Pe][Y+j+768],z=i-G,i=i+G,B-=4,ve[B+0]=O+i,ve[B+2]=O-i,ve[B+1]=H+z,ve[B+3]=H-z,O=N[j+1]*$e[Pe][Y+j+1],G=N[j+513]*$e[Pe][Y+j+513],H=O-G,O=O+G,i=N[j+257]*$e[Pe][Y+j+257],G=N[j+769]*$e[Pe][Y+j+769],z=i-G,i=i+G,ve[B+E.BLKSIZE/2+0]=O+i,ve[B+E.BLKSIZE/2+2]=O-i,ve[B+E.BLKSIZE/2+1]=H+z,ve[B+E.BLKSIZE/2+3]=H-z}while(--ge>=0);se(ve,B,E.BLKSIZE/2)},this.init_fft=function(ae){for(var ve=0;ve<E.BLKSIZE;ve++)N[ve]=.42-.5*Math.cos(2*Math.PI*(ve+.5)/E.BLKSIZE)+.08*Math.cos(4*Math.PI*(ve+.5)/E.BLKSIZE);for(var ve=0;ve<E.BLKSIZE_s/2;ve++)re[ve]=.5*(1-Math.cos(2*Math.PI*(ve+.5)/E.BLKSIZE_s))}}var Ie=W,xe=U.VbrMode,Je=U.Float,_t=U.ShortBlock,At=U.Util,$=U.Arrays,D=U.new_float,ie=U.new_float_n,Ee=U.new_int,le=U.assert;function Fe(){var N=new Ie,re=2.302585092994046,de=2,se=16,Ae=2,ae=16,ve=.34,Pe=1/(14752*14752)/(E.BLKSIZE/2),$e=.01,Y=.8,ge=.6,B=.3,O=3.5,H=21,i=.2302585093;function z(M){return M}function G(M,T){for(var X=0,K=0;K<E.BLKSIZE/2;++K)X+=M[K]*T.ATH.eql_w[K];return X*=Pe,X}function j(M,T,X,K,ne,L,ee,oe,Z,ye,ce){var we=M.internal_flags;if(Z<2)N.fft_long(we,K[ne],Z,ye,ce),N.fft_short(we,L[ee],Z,ye,ce);else if(Z==2){for(var ze=E.BLKSIZE-1;ze>=0;--ze){var ut=K[ne+0][ze],Me=K[ne+1][ze];K[ne+0][ze]=(ut+Me)*At.SQRT2*.5,K[ne+1][ze]=(ut-Me)*At.SQRT2*.5}for(var ct=2;ct>=0;--ct)for(var ze=E.BLKSIZE_s-1;ze>=0;--ze){var ut=L[ee+0][ct][ze],Me=L[ee+1][ct][ze];L[ee+0][ct][ze]=(ut+Me)*At.SQRT2*.5,L[ee+1][ct][ze]=(ut-Me)*At.SQRT2*.5}}T[0]=K[ne+0][0],T[0]*=T[0];for(var ze=E.BLKSIZE/2-1;ze>=0;--ze){var me=K[ne+0][E.BLKSIZE/2-ze],nt=K[ne+0][E.BLKSIZE/2+ze];T[E.BLKSIZE/2-ze]=(me*me+nt*nt)*.5}for(var ct=2;ct>=0;--ct){X[ct][0]=L[ee+0][ct][0],X[ct][0]*=X[ct][0];for(var ze=E.BLKSIZE_s/2-1;ze>=0;--ze){var me=L[ee+0][ct][E.BLKSIZE_s/2-ze],nt=L[ee+0][ct][E.BLKSIZE_s/2+ze];X[ct][E.BLKSIZE_s/2-ze]=(me*me+nt*nt)*.5}}{for(var Mt=0,ze=11;ze<E.HBLKSIZE;ze++)Mt+=T[ze];we.tot_ener[Z]=Mt}if(M.analysis){for(var ze=0;ze<E.HBLKSIZE;ze++)we.pinfo.energy[oe][Z][ze]=we.pinfo.energy_save[Z][ze],we.pinfo.energy_save[Z][ze]=T[ze];we.pinfo.pe[oe][Z]=we.pe[Z]}M.athaa_loudapprox==2&&Z<2&&(we.loudness_sq[oe][Z]=we.loudness_sq_save[Z],we.loudness_sq_save[Z]=G(T,we))}var h=8,R=23,I=15,k,F,l,A=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function y(){k=Math.pow(10,(h+1)/16),F=Math.pow(10,(R+1)/16),l=Math.pow(10,I/10)}var d=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],w=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],x=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function u(M,T,X,K,ne,L){var ee;if(T>M)if(T<M*F)ee=T/M;else return M+T;else{if(M>=T*F)return M+T;ee=M/T}if(M+=T,K+3<=6){if(ee>=k)return M;var oe=0|At.FAST_LOG10_X(ee,16);return M*w[oe]}var oe=0|At.FAST_LOG10_X(ee,16);if(T=ne.ATH.cb_l[X]*ne.ATH.adjust,M<l*T){if(M>T){var Z,ye;return Z=1,oe<=13&&(Z=x[oe]),ye=At.FAST_LOG10_X(M/T,10/15),M*((d[oe]-Z)*ye+Z)}return oe>13?M:M*x[oe]}return M*d[oe]}var _=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function v(M,T,X){var K;if(M<0&&(M=0),T<0&&(T=0),M<=0)return T;if(T<=0)return M;if(T>M?K=T/M:K=M/T,-2<=X&&X<=2){if(K>=k)return M+T;var ne=0|At.FAST_LOG10_X(K,16);return(M+T)*_[ne]}return K<F?M+T:(M<T&&(M=T),M)}function P(M,T){var X=M.internal_flags;if(X.channels_out>1){for(var K=0;K<E.SBMAX_l;K++){var ne=X.thm[0].l[K],L=X.thm[1].l[K];X.thm[0].l[K]+=L*T,X.thm[1].l[K]+=ne*T}for(var K=0;K<E.SBMAX_s;K++)for(var ee=0;ee<3;ee++){var ne=X.thm[0].s[K][ee],L=X.thm[1].s[K][ee];X.thm[0].s[K][ee]+=L*T,X.thm[1].s[K][ee]+=ne*T}}}function ue(M){for(var T=0;T<E.SBMAX_l;T++)if(!(M.thm[0].l[T]>1.58*M.thm[1].l[T]||M.thm[1].l[T]>1.58*M.thm[0].l[T])){var X=M.mld_l[T]*M.en[3].l[T],K=Math.max(M.thm[2].l[T],Math.min(M.thm[3].l[T],X));X=M.mld_l[T]*M.en[2].l[T];var ne=Math.max(M.thm[3].l[T],Math.min(M.thm[2].l[T],X));M.thm[2].l[T]=K,M.thm[3].l[T]=ne}for(var T=0;T<E.SBMAX_s;T++)for(var L=0;L<3;L++)if(!(M.thm[0].s[T][L]>1.58*M.thm[1].s[T][L]||M.thm[1].s[T][L]>1.58*M.thm[0].s[T][L])){var X=M.mld_s[T]*M.en[3].s[T][L],K=Math.max(M.thm[2].s[T][L],Math.min(M.thm[3].s[T][L],X));X=M.mld_s[T]*M.en[2].s[T][L];var ne=Math.max(M.thm[3].s[T][L],Math.min(M.thm[2].s[T][L],X));M.thm[2].s[T][L]=K,M.thm[3].s[T][L]=ne}}function q(M,T,X){var K=T,ne=Math.pow(10,X);T*=2,K*=2;for(var L=0;L<E.SBMAX_l;L++){var ee,oe,Z,ye;if(ye=M.ATH.cb_l[M.bm_l[L]]*ne,ee=Math.min(Math.max(M.thm[0].l[L],ye),Math.max(M.thm[1].l[L],ye)),oe=Math.max(M.thm[2].l[L],ye),Z=Math.max(M.thm[3].l[L],ye),ee*T<oe+Z){var ce=ee*K/(oe+Z);oe*=ce,Z*=ce}M.thm[2].l[L]=Math.min(oe,M.thm[2].l[L]),M.thm[3].l[L]=Math.min(Z,M.thm[3].l[L])}ne*=E.BLKSIZE_s/E.BLKSIZE;for(var L=0;L<E.SBMAX_s;L++)for(var we=0;we<3;we++){var ee,oe,Z,ye;if(ye=M.ATH.cb_s[M.bm_s[L]]*ne,ee=Math.min(Math.max(M.thm[0].s[L][we],ye),Math.max(M.thm[1].s[L][we],ye)),oe=Math.max(M.thm[2].s[L][we],ye),Z=Math.max(M.thm[3].s[L][we],ye),ee*T<oe+Z){var ce=ee*T/(oe+Z);oe*=ce,Z*=ce}M.thm[2].s[L][we]=Math.min(M.thm[2].s[L][we],oe),M.thm[3].s[L][we]=Math.min(M.thm[3].s[L][we],Z)}}function Q(M,T,X,K,ne){var L,ee,oe=0,Z=0;for(L=ee=0;L<E.SBMAX_s;++ee,++L){for(var ye=M.bo_s[L],ce=M.npart_s,we=ye<ce?ye:ce;ee<we;)le(T[ee]>=0),le(X[ee]>=0),oe+=T[ee],Z+=X[ee],ee++;if(M.en[K].s[L][ne]=oe,M.thm[K].s[L][ne]=Z,ee>=ce){++L;break}le(T[ee]>=0),le(X[ee]>=0);{var ze=M.PSY.bo_s_weight[L],ut=1-ze;oe=ze*T[ee],Z=ze*X[ee],M.en[K].s[L][ne]+=oe,M.thm[K].s[L][ne]+=Z,oe=ut*T[ee],Z=ut*X[ee]}}for(;L<E.SBMAX_s;++L)M.en[K].s[L][ne]=0,M.thm[K].s[L][ne]=0}function c(M,T,X,K){var ne,L,ee=0,oe=0;for(ne=L=0;ne<E.SBMAX_l;++L,++ne){for(var Z=M.bo_l[ne],ye=M.npart_l,ce=Z<ye?Z:ye;L<ce;)le(T[L]>=0),le(X[L]>=0),ee+=T[L],oe+=X[L],L++;if(M.en[K].l[ne]=ee,M.thm[K].l[ne]=oe,L>=ye){++ne;break}le(T[L]>=0),le(X[L]>=0);{var we=M.PSY.bo_l_weight[ne],ze=1-we;ee=we*T[L],oe=we*X[L],M.en[K].l[ne]+=ee,M.thm[K].l[ne]+=oe,ee=ze*T[L],oe=ze*X[L]}}for(;ne<E.SBMAX_l;++ne)M.en[K].l[ne]=0,M.thm[K].l[ne]=0}function p(M,T,X,K,ne,L){var ee=M.internal_flags,oe,Z;for(Z=oe=0;Z<ee.npart_s;++Z){for(var ye=0,ce=ee.numlines_s[Z],we=0;we<ce;++we,++oe){var ze=T[L][oe];ye+=ze}X[Z]=ye}for(le(Z==ee.npart_s),oe=Z=0;Z<ee.npart_s;Z++){var ut=ee.s3ind_s[Z][0],Me=ee.s3_ss[oe++]*X[ut];for(++ut;ut<=ee.s3ind_s[Z][1];)Me+=ee.s3_ss[oe]*X[ut],++oe,++ut;{var ct=Ae*ee.nb_s1[ne][Z];K[Z]=Math.min(Me,ct)}if(ee.blocktype_old[ne&1]==E.SHORT_TYPE){var ct=ae*ee.nb_s2[ne][Z],me=K[Z];K[Z]=Math.min(ct,me)}ee.nb_s2[ne][Z]=ee.nb_s1[ne][Z],ee.nb_s1[ne][Z]=Me,le(K[Z]>=0)}for(;Z<=E.CBANDS;++Z)X[Z]=0,K[Z]=0}function fe(M,T,X,K){var ne=M.internal_flags;M.short_blocks==_t.short_block_coupled&&!(T[0]!=0&&T[1]!=0)&&(T[0]=T[1]=0);for(var L=0;L<ne.channels_out;L++)K[L]=E.NORM_TYPE,M.short_blocks==_t.short_block_dispensed&&(T[L]=1),M.short_blocks==_t.short_block_forced&&(T[L]=0),T[L]!=0?(le(ne.blocktype_old[L]!=E.START_TYPE),ne.blocktype_old[L]==E.SHORT_TYPE&&(K[L]=E.STOP_TYPE)):(K[L]=E.SHORT_TYPE,ne.blocktype_old[L]==E.NORM_TYPE&&(ne.blocktype_old[L]=E.START_TYPE),ne.blocktype_old[L]==E.STOP_TYPE&&(ne.blocktype_old[L]=E.SHORT_TYPE)),X[L]=ne.blocktype_old[L],ne.blocktype_old[L]=K[L]}function pe(M,T,X){return X>=1?M:X<=0?T:T>0?Math.pow(M/T,X)*T:0}var Le=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function We(M,T){for(var X=309.07,K=0;K<E.SBMAX_s-1;K++)for(var ne=0;ne<3;ne++){var L=M.thm.s[K][ne];if(L>0){var ee=L*T,oe=M.en.s[K][ne];oe>ee&&(oe>ee*1e10?X+=Le[K]*(10*re):X+=Le[K]*At.FAST_LOG10(oe/ee))}}return X}var Ve=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function Ye(M,T){for(var X=281.0575,K=0;K<E.SBMAX_l-1;K++){var ne=M.thm.l[K];if(ne>0){var L=ne*T,ee=M.en.l[K];ee>L&&(ee>L*1e10?X+=Ve[K]*(10*re):X+=Ve[K]*At.FAST_LOG10(ee/L))}}return X}function vt(M,T,X,K,ne){var L,ee;for(L=ee=0;L<M.npart_l;++L){var oe=0,Z=0,ye;for(ye=0;ye<M.numlines_l[L];++ye,++ee){var ce=T[ee];oe+=ce,Z<ce&&(Z=ce)}X[L]=oe,K[L]=Z,ne[L]=oe*M.rnumlines_l[L],le(M.rnumlines_l[L]>=0),le(X[L]>=0),le(K[L]>=0),le(ne[L]>=0)}}function st(M,T,X,K){var ne=A.length-1,L=0,ee=X[L]+X[L+1];if(ee>0){var oe=T[L];oe<T[L+1]&&(oe=T[L+1]),le(M.numlines_l[L]+M.numlines_l[L+1]-1>0),ee=20*(oe*2-ee)/(ee*(M.numlines_l[L]+M.numlines_l[L+1]-1));var Z=0|ee;Z>ne&&(Z=ne),K[L]=Z}else K[L]=0;for(L=1;L<M.npart_l-1;L++)if(ee=X[L-1]+X[L]+X[L+1],ee>0){var oe=T[L-1];oe<T[L]&&(oe=T[L]),oe<T[L+1]&&(oe=T[L+1]),le(M.numlines_l[L-1]+M.numlines_l[L]+M.numlines_l[L+1]-1>0),ee=20*(oe*3-ee)/(ee*(M.numlines_l[L-1]+M.numlines_l[L]+M.numlines_l[L+1]-1));var Z=0|ee;Z>ne&&(Z=ne),K[L]=Z}else K[L]=0;if(le(L==M.npart_l-1),ee=X[L-1]+X[L],ee>0){var oe=T[L-1];oe<T[L]&&(oe=T[L]),le(M.numlines_l[L-1]+M.numlines_l[L]-1>0),ee=20*(oe*2-ee)/(ee*(M.numlines_l[L-1]+M.numlines_l[L]-1));var Z=0|ee;Z>ne&&(Z=ne),K[L]=Z}else K[L]=0;le(L==M.npart_l-1)}var qe=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(M,T,X,K,ne,L,ee,oe,Z,ye){var ce=M.internal_flags,we=ie([2,E.BLKSIZE]),ze=ie([2,3,E.BLKSIZE_s]),ut=D(E.CBANDS+1),Me=D(E.CBANDS+1),ct=D(E.CBANDS+2),me=Ee(2),nt=Ee(2),Mt,Te,at,Ce,ft,Wt,Qe,yt,Bt=ie([2,576]),nn,lr=Ee(E.CBANDS+2),_n=Ee(E.CBANDS+2);for($.fill(_n,0),Mt=ce.channels_out,M.mode==bn.JOINT_STEREO&&(Mt=4),M.VBR==xe.vbr_off?nn=ce.ResvMax==0?0:ce.ResvSize/ce.ResvMax*.5:M.VBR==xe.vbr_rh||M.VBR==xe.vbr_mtrh||M.VBR==xe.vbr_mt?nn=.6:nn=1,Te=0;Te<ce.channels_out;Te++){var rn=T[Te],Yn=X+576-350-H+192;for(Ce=0;Ce<576;Ce++){var cr,ur;for(cr=rn[Yn+Ce+10],ur=0,ft=0;ft<(H-1)/2-1;ft+=2)cr+=qe[ft]*(rn[Yn+Ce+ft]+rn[Yn+Ce+H-ft]),ur+=qe[ft+1]*(rn[Yn+Ce+ft+1]+rn[Yn+Ce+H-ft-1]);Bt[Te][Ce]=cr+ur}ne[K][Te].en.assign(ce.en[Te]),ne[K][Te].thm.assign(ce.thm[Te]),Mt>2&&(L[K][Te].en.assign(ce.en[Te+2]),L[K][Te].thm.assign(ce.thm[Te+2]))}for(Te=0;Te<Mt;Te++){var Rr,Mr,Pn=D(12),Hr=[0,0,0,0],ma=D(12),Vl=1,nu,ru=D(E.CBANDS),su=D(E.CBANDS),sn=[0,0,0,0],au=D(E.HBLKSIZE),iu=ie([3,E.HBLKSIZE_s]);for(le(ce.npart_s<=E.CBANDS),le(ce.npart_l<=E.CBANDS),Ce=0;Ce<3;Ce++)Pn[Ce]=ce.nsPsy.last_en_subshort[Te][Ce+6],le(ce.nsPsy.last_en_subshort[Te][Ce+4]>0),ma[Ce]=Pn[Ce]/ce.nsPsy.last_en_subshort[Te][Ce+4],Hr[0]+=Pn[Ce];if(Te==2)for(Ce=0;Ce<576;Ce++){var Hl,Dl;Hl=Bt[0][Ce],Dl=Bt[1][Ce],Bt[0][Ce]=Hl+Dl,Bt[1][Ce]=Hl-Dl}{var ou=Bt[Te&1],Wa=0;for(Ce=0;Ce<9;Ce++){for(var f2=Wa+64,Rn=1;Wa<f2;Wa++)Rn<Math.abs(ou[Wa])&&(Rn=Math.abs(ou[Wa]));ce.nsPsy.last_en_subshort[Te][Ce]=Pn[Ce+3]=Rn,Hr[1+Ce/3]+=Rn,Rn>Pn[Ce+3-2]?(le(Pn[Ce+3-2]>0),Rn=Rn/Pn[Ce+3-2]):Pn[Ce+3-2]>Rn*10?Rn=Pn[Ce+3-2]/(Rn*10):Rn=0,ma[Ce+3]=Rn}}if(M.analysis){var jl=ma[0];for(Ce=1;Ce<12;Ce++)jl<ma[Ce]&&(jl=ma[Ce]);ce.pinfo.ers[K][Te]=ce.pinfo.ers_save[Te],ce.pinfo.ers_save[Te]=jl}for(nu=Te==3?ce.nsPsy.attackthre_s:ce.nsPsy.attackthre,Ce=0;Ce<12;Ce++)sn[Ce/3]==0&&ma[Ce]>nu&&(sn[Ce/3]=Ce%3+1);for(Ce=1;Ce<4;Ce++){var Xl;Hr[Ce-1]>Hr[Ce]?(le(Hr[Ce]>0),Xl=Hr[Ce-1]/Hr[Ce]):(le(Hr[Ce-1]>0),Xl=Hr[Ce]/Hr[Ce-1]),Xl<1.7&&(sn[Ce]=0,Ce==1&&(sn[0]=0))}for(sn[0]!=0&&ce.nsPsy.lastAttacks[Te]!=0&&(sn[0]=0),(ce.nsPsy.lastAttacks[Te]==3||sn[0]+sn[1]+sn[2]+sn[3]!=0)&&(Vl=0,sn[1]!=0&&sn[0]!=0&&(sn[1]=0),sn[2]!=0&&sn[1]!=0&&(sn[2]=0),sn[3]!=0&&sn[2]!=0&&(sn[3]=0)),Te<2?nt[Te]=Vl:Vl==0&&(nt[0]=nt[1]=0),Z[Te]=ce.tot_ener[Te],Mr=ze,Rr=we,j(M,au,iu,Rr,Te&1,Mr,Te&1,K,Te,T,X),vt(ce,au,ut,ru,su),st(ce,ru,su,lr),yt=0;yt<3;yt++){var ql,Kn;for(p(M,iu,Me,ct,Te,yt),Q(ce,Me,ct,Te,yt),Qe=0;Qe<E.SBMAX_s;Qe++){if(Kn=ce.thm[Te].s[Qe][yt],Kn*=Y,sn[yt]>=2||sn[yt+1]==1){var Ga=yt!=0?yt-1:2,Rn=pe(ce.thm[Te].s[Qe][Ga],Kn,ge*nn);Kn=Math.min(Kn,Rn)}if(sn[yt]==1){var Ga=yt!=0?yt-1:2,Rn=pe(ce.thm[Te].s[Qe][Ga],Kn,B*nn);Kn=Math.min(Kn,Rn)}else if(yt!=0&&sn[yt-1]==3||yt==0&&ce.nsPsy.lastAttacks[Te]==3){var Ga=yt!=2?yt+1:0,Rn=pe(ce.thm[Te].s[Qe][Ga],Kn,B*nn);Kn=Math.min(Kn,Rn)}ql=Pn[yt*3+3]+Pn[yt*3+4]+Pn[yt*3+5],Pn[yt*3+5]*6<ql&&(Kn*=.5,Pn[yt*3+4]*6<ql&&(Kn*=.5)),ce.thm[Te].s[Qe][yt]=Kn}}for(ce.nsPsy.lastAttacks[Te]=sn[2],Wt=0,at=0;at<ce.npart_l;at++){for(var Us=ce.s3ind[at][0],Ul=ut[Us]*A[lr[Us]],Ys=ce.s3_ll[Wt++]*Ul;++Us<=ce.s3ind[at][1];)Ul=ut[Us]*A[lr[Us]],Ys=u(Ys,ce.s3_ll[Wt++]*Ul,Us,Us-at,ce);Ys*=.158489319246111,ce.blocktype_old[Te&1]==E.SHORT_TYPE?ct[at]=Ys:ct[at]=pe(Math.min(Ys,Math.min(de*ce.nb_1[Te][at],se*ce.nb_2[Te][at])),Ys,nn),ce.nb_2[Te][at]=ce.nb_1[Te][at],ce.nb_1[Te][at]=Ys}for(;at<=E.CBANDS;++at)ut[at]=0,ct[at]=0;c(ce,ut,ct,Te)}if((M.mode==bn.STEREO||M.mode==bn.JOINT_STEREO)&&M.interChRatio>0&&P(M,M.interChRatio),M.mode==bn.JOINT_STEREO){var Yl;ue(ce),Yl=M.msfix,Math.abs(Yl)>0&&q(ce,Yl,M.ATHlower*ce.ATH.adjust)}for(fe(M,nt,ye,me),Te=0;Te<Mt;Te++){var za,Qa=0,Qi,Zi;Te>1?(za=oe,Qa=-2,Qi=E.NORM_TYPE,(ye[0]==E.SHORT_TYPE||ye[1]==E.SHORT_TYPE)&&(Qi=E.SHORT_TYPE),Zi=L[K][Te-2]):(za=ee,Qa=0,Qi=ye[Te],Zi=ne[K][Te]),Qi==E.SHORT_TYPE?za[Qa+Te]=We(Zi,ce.masking_lower):za[Qa+Te]=Ye(Zi,ce.masking_lower),M.analysis&&(ce.pinfo.pe[K][Te]=za[Qa+Te])}return 0};function Ft(M,T,X,K,ne,L,ee,oe){var Z=M.internal_flags;if(K<2)N.fft_long(Z,ee[oe],K,T,X);else if(K==2)for(var ye=E.BLKSIZE-1;ye>=0;--ye){var ce=ee[oe+0][ye],we=ee[oe+1][ye];ee[oe+0][ye]=(ce+we)*At.SQRT2*.5,ee[oe+1][ye]=(ce-we)*At.SQRT2*.5}L[0]=ee[oe+0][0],L[0]*=L[0];for(var ye=E.BLKSIZE/2-1;ye>=0;--ye){var ze=ee[oe+0][E.BLKSIZE/2-ye],ut=ee[oe+0][E.BLKSIZE/2+ye];L[E.BLKSIZE/2-ye]=(ze*ze+ut*ut)*.5}{for(var Me=0,ye=11;ye<E.HBLKSIZE;ye++)Me+=L[ye];Z.tot_ener[K]=Me}if(M.analysis){for(var ye=0;ye<E.HBLKSIZE;ye++)Z.pinfo.energy[ne][K][ye]=Z.pinfo.energy_save[K][ye],Z.pinfo.energy_save[K][ye]=L[ye];Z.pinfo.pe[ne][K]=Z.pe[K]}}function yn(M,T,X,K,ne,L,ee,oe){var Z=M.internal_flags;if(ne==0&&K<2&&N.fft_short(Z,ee[oe],K,T,X),K==2)for(var ye=E.BLKSIZE_s-1;ye>=0;--ye){var ce=ee[oe+0][ne][ye],we=ee[oe+1][ne][ye];ee[oe+0][ne][ye]=(ce+we)*At.SQRT2*.5,ee[oe+1][ne][ye]=(ce-we)*At.SQRT2*.5}L[ne][0]=ee[oe+0][ne][0],L[ne][0]*=L[ne][0];for(var ye=E.BLKSIZE_s/2-1;ye>=0;--ye){var ze=ee[oe+0][ne][E.BLKSIZE_s/2-ye],ut=ee[oe+0][ne][E.BLKSIZE_s/2+ye];L[ne][E.BLKSIZE_s/2-ye]=(ze*ze+ut*ut)*.5}}function It(M,T,X,K){var ne=M.internal_flags;M.athaa_loudapprox==2&&X<2&&(ne.loudness_sq[T][X]=ne.loudness_sq_save[X],ne.loudness_sq_save[X]=G(K,ne))}var en=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function tn(M,T,X,K,ne,L,ee,oe,Z,ye){for(var ce=ie([2,576]),we=M.internal_flags,ze=we.channels_out,ut=M.mode==bn.JOINT_STEREO?4:ze,Me=0;Me<ze;Me++){firbuf=T[Me];for(var ct=X+576-350-H+192,me=0;me<576;me++){var nt,Mt;nt=firbuf[ct+me+10],Mt=0;for(var Te=0;Te<(H-1)/2-1;Te+=2)nt+=en[Te]*(firbuf[ct+me+Te]+firbuf[ct+me+H-Te]),Mt+=en[Te+1]*(firbuf[ct+me+Te+1]+firbuf[ct+me+H-Te-1]);ce[Me][me]=nt+Mt}ne[K][Me].en.assign(we.en[Me]),ne[K][Me].thm.assign(we.thm[Me]),ut>2&&(L[K][Me].en.assign(we.en[Me+2]),L[K][Me].thm.assign(we.thm[Me+2]))}for(var Me=0;Me<ut;Me++){var at=D(12),Ce=D(12),ft=[0,0,0,0],Wt=ce[Me&1],Qe=0,yt=Me==3?we.nsPsy.attackthre_s:we.nsPsy.attackthre,Bt=1;if(Me==2)for(var me=0,Te=576;Te>0;++me,--Te){var nn=ce[0][me],lr=ce[1][me];ce[0][me]=nn+lr,ce[1][me]=nn-lr}for(var me=0;me<3;me++)Ce[me]=we.nsPsy.last_en_subshort[Me][me+6],le(we.nsPsy.last_en_subshort[Me][me+4]>0),at[me]=Ce[me]/we.nsPsy.last_en_subshort[Me][me+4],ft[0]+=Ce[me];for(var me=0;me<9;me++){for(var _n=Qe+64,rn=1;Qe<_n;Qe++)rn<Math.abs(Wt[Qe])&&(rn=Math.abs(Wt[Qe]));we.nsPsy.last_en_subshort[Me][me]=Ce[me+3]=rn,ft[1+me/3]+=rn,rn>Ce[me+3-2]?(le(Ce[me+3-2]>0),rn=rn/Ce[me+3-2]):Ce[me+3-2]>rn*10?rn=Ce[me+3-2]/(rn*10):rn=0,at[me+3]=rn}for(var me=0;me<3;++me){var Yn=Ce[me*3+3]+Ce[me*3+4]+Ce[me*3+5],cr=1;Ce[me*3+5]*6<Yn&&(cr*=.5,Ce[me*3+4]*6<Yn&&(cr*=.5)),oe[Me][me]=cr}if(M.analysis){for(var ur=at[0],me=1;me<12;me++)ur<at[me]&&(ur=at[me]);we.pinfo.ers[K][Me]=we.pinfo.ers_save[Me],we.pinfo.ers_save[Me]=ur}for(var me=0;me<12;me++)Z[Me][me/3]==0&&at[me]>yt&&(Z[Me][me/3]=me%3+1);for(var me=1;me<4;me++){var Rr=ft[me-1],Mr=ft[me],Pn=Math.max(Rr,Mr);Pn<4e4&&Rr<1.7*Mr&&Mr<1.7*Rr&&(me==1&&Z[Me][0]<=Z[Me][me]&&(Z[Me][0]=0),Z[Me][me]=0)}Z[Me][0]<=we.nsPsy.lastAttacks[Me]&&(Z[Me][0]=0),(we.nsPsy.lastAttacks[Me]==3||Z[Me][0]+Z[Me][1]+Z[Me][2]+Z[Me][3]!=0)&&(Bt=0,Z[Me][1]!=0&&Z[Me][0]!=0&&(Z[Me][1]=0),Z[Me][2]!=0&&Z[Me][1]!=0&&(Z[Me][2]=0),Z[Me][3]!=0&&Z[Me][2]!=0&&(Z[Me][3]=0)),Me<2?ye[Me]=Bt:Bt==0&&(ye[0]=ye[1]=0),ee[Me]=we.tot_ener[Me]}}function un(M,T,X){if(X==0)for(var K=0;K<M.npart_s;K++)M.nb_s2[T][K]=M.nb_s1[T][K],M.nb_s1[T][K]=0}function En(M,T){for(var X=0;X<M.npart_l;X++)M.nb_2[T][X]=M.nb_1[T][X],M.nb_1[T][X]=0}function Vr(M,T,X,K){var ne=A.length-1,L=0,ee=X[L]+X[L+1];if(ee>0){var oe=T[L];oe<T[L+1]&&(oe=T[L+1]),le(M.numlines_s[L]+M.numlines_s[L+1]-1>0),ee=20*(oe*2-ee)/(ee*(M.numlines_s[L]+M.numlines_s[L+1]-1));var Z=0|ee;Z>ne&&(Z=ne),K[L]=Z}else K[L]=0;for(L=1;L<M.npart_s-1;L++)if(ee=X[L-1]+X[L]+X[L+1],le(L+1<M.npart_s),ee>0){var oe=T[L-1];oe<T[L]&&(oe=T[L]),oe<T[L+1]&&(oe=T[L+1]),le(M.numlines_s[L-1]+M.numlines_s[L]+M.numlines_s[L+1]-1>0),ee=20*(oe*3-ee)/(ee*(M.numlines_s[L-1]+M.numlines_s[L]+M.numlines_s[L+1]-1));var Z=0|ee;Z>ne&&(Z=ne),K[L]=Z}else K[L]=0;if(le(L==M.npart_s-1),ee=X[L-1]+X[L],ee>0){var oe=T[L-1];oe<T[L]&&(oe=T[L]),le(M.numlines_s[L-1]+M.numlines_s[L]-1>0),ee=20*(oe*2-ee)/(ee*(M.numlines_s[L-1]+M.numlines_s[L]-1));var Z=0|ee;Z>ne&&(Z=ne),K[L]=Z}else K[L]=0;le(L==M.npart_s-1)}function yr(M,T,X,K,ne,L){var ee=M.internal_flags,oe=new float[E.CBANDS],Z=D(E.CBANDS),ye,ce,we,ze=new int[E.CBANDS];for(we=ce=0;we<ee.npart_s;++we){var ut=0,Me=0,ct=ee.numlines_s[we];for(ye=0;ye<ct;++ye,++ce){var me=T[L][ce];ut+=me,Me<me&&(Me=me)}X[we]=ut,oe[we]=Me,Z[we]=ut/ct,le(Z[we]>=0)}for(le(we==ee.npart_s);we<E.CBANDS;++we)oe[we]=0,Z[we]=0;for(Vr(ee,oe,Z,ze),ce=we=0;we<ee.npart_s;we++){var nt=ee.s3ind_s[we][0],Mt=ee.s3ind_s[we][1],Te,at,Ce,ft,Wt;for(Te=ze[nt],at=1,ft=ee.s3_ss[ce]*X[nt]*A[ze[nt]],++ce,++nt;nt<=Mt;)Te+=ze[nt],at+=1,Ce=ee.s3_ss[ce]*X[nt]*A[ze[nt]],ft=v(ft,Ce,nt-we),++ce,++nt;Te=(1+2*Te)/(2*at),Wt=A[Te]*.5,ft*=Wt,K[we]=ft,ee.nb_s2[ne][we]=ee.nb_s1[ne][we],ee.nb_s1[ne][we]=ft,Ce=oe[we],Ce*=ee.minval_s[we],Ce*=Wt,K[we]>Ce&&(K[we]=Ce),ee.masking_lower>1&&(K[we]*=ee.masking_lower),K[we]>X[we]&&(K[we]=X[we]),ee.masking_lower<1&&(K[we]*=ee.masking_lower),le(K[we]>=0)}for(;we<E.CBANDS;++we)X[we]=0,K[we]=0}function Un(M,T,X,K,ne){var L=D(E.CBANDS),ee=D(E.CBANDS),oe=Ee(E.CBANDS+2),Z;vt(M,T,X,L,ee),st(M,L,ee,oe);var ye=0;for(Z=0;Z<M.npart_l;Z++){var ce,we,ze,ut,Me=M.s3ind[Z][0],ct=M.s3ind[Z][1],me=0,nt=0;for(me=oe[Me],nt+=1,we=M.s3_ll[ye]*X[Me]*A[oe[Me]],++ye,++Me;Me<=ct;)me+=oe[Me],nt+=1,ce=M.s3_ll[ye]*X[Me]*A[oe[Me]],ut=v(we,ce,Me-Z),we=ut,++ye,++Me;if(me=(1+2*me)/(2*nt),ze=A[me]*.5,we*=ze,M.blocktype_old[ne&1]==E.SHORT_TYPE){var Mt=de*M.nb_1[ne][Z];Mt>0?K[Z]=Math.min(we,Mt):K[Z]=Math.min(we,X[Z]*B)}else{var Te=se*M.nb_2[ne][Z],at=de*M.nb_1[ne][Z],Mt;Te<=0&&(Te=we),at<=0&&(at=we),M.blocktype_old[ne&1]==E.NORM_TYPE?Mt=Math.min(at,Te):Mt=at,K[Z]=Math.min(we,Mt)}M.nb_2[ne][Z]=M.nb_1[ne][Z],M.nb_1[ne][Z]=we,ce=L[Z],ce*=M.minval_l[Z],ce*=ze,K[Z]>ce&&(K[Z]=ce),M.masking_lower>1&&(K[Z]*=M.masking_lower),K[Z]>X[Z]&&(K[Z]=X[Z]),M.masking_lower<1&&(K[Z]*=M.masking_lower),le(K[Z]>=0)}for(;Z<E.CBANDS;++Z)X[Z]=0,K[Z]=0}function Er(M,T){var X=M.internal_flags;M.short_blocks==_t.short_block_coupled&&!(T[0]!=0&&T[1]!=0)&&(T[0]=T[1]=0);for(var K=0;K<X.channels_out;K++)M.short_blocks==_t.short_block_dispensed&&(T[K]=1),M.short_blocks==_t.short_block_forced&&(T[K]=0)}function Xs(M,T,X){for(var K=M.internal_flags,ne=0;ne<K.channels_out;ne++){var L=E.NORM_TYPE;T[ne]!=0?(le(K.blocktype_old[ne]!=E.START_TYPE),K.blocktype_old[ne]==E.SHORT_TYPE&&(L=E.STOP_TYPE)):(L=E.SHORT_TYPE,K.blocktype_old[ne]==E.NORM_TYPE&&(K.blocktype_old[ne]=E.START_TYPE),K.blocktype_old[ne]==E.STOP_TYPE&&(K.blocktype_old[ne]=E.SHORT_TYPE)),X[ne]=K.blocktype_old[ne],K.blocktype_old[ne]=L}}function bs(M,T,X,K,ne,L,ee){for(var oe=L*2,Z=L>0?Math.pow(10,ne):1,ye,ce,we=0;we<ee;++we){var ze=M[2][we],ut=M[3][we],Me=T[0][we],ct=T[1][we],me=T[2][we],nt=T[3][we];if(Me<=1.58*ct&&ct<=1.58*Me){var Mt=X[we]*ut,Te=X[we]*ze;ce=Math.max(me,Math.min(nt,Mt)),ye=Math.max(nt,Math.min(me,Te))}else ce=me,ye=nt;if(L>0){var at,Ce,ft=K[we]*Z;if(at=Math.min(Math.max(Me,ft),Math.max(ct,ft)),me=Math.max(ce,ft),nt=Math.max(ye,ft),Ce=me+nt,Ce>0&&at*oe<Ce){var Wt=at*oe/Ce;me*=Wt,nt*=Wt}ce=Math.min(me,ce),ye=Math.min(nt,ye)}ce>ze&&(ce=ze),ye>ut&&(ye=ut),T[2][we]=ce,T[3][we]=ye}}this.L3psycho_anal_vbr=function(M,T,X,K,ne,L,ee,oe,Z,ye){var ce=M.internal_flags,we,ze,ut=D(E.HBLKSIZE),Me=ie([3,E.HBLKSIZE_s]),ct=ie([2,E.BLKSIZE]),me=ie([2,3,E.BLKSIZE_s]),nt=ie([4,E.CBANDS]),Mt=ie([4,E.CBANDS]),Te=ie([4,3]),at=.6,Ce=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],ft=Ee(2),Wt=M.mode==bn.JOINT_STEREO?4:ce.channels_out;tn(M,T,X,K,ne,L,Z,Te,Ce,ft),Er(M,ft);{for(var Qe=0;Qe<Wt;Qe++){var yt=Qe&1;we=ct,Ft(M,T,X,Qe,K,ut,we,yt),It(M,K,Qe,ut),ft[yt]!=0?Un(ce,ut,nt[Qe],Mt[Qe],Qe):En(ce,Qe)}ft[0]+ft[1]==2&&M.mode==bn.JOINT_STEREO&&bs(nt,Mt,ce.mld_cb_l,ce.ATH.cb_l,M.ATHlower*ce.ATH.adjust,M.msfix,ce.npart_l);for(var Qe=0;Qe<Wt;Qe++){var yt=Qe&1;ft[yt]!=0&&c(ce,nt[Qe],Mt[Qe],Qe)}}{for(var Bt=0;Bt<3;Bt++){for(var Qe=0;Qe<Wt;++Qe){var yt=Qe&1;ft[yt]!=0?un(ce,Qe,Bt):(ze=me,yn(M,T,X,Qe,Bt,Me,ze,yt),yr(M,Me,nt[Qe],Mt[Qe],Qe,Bt))}ft[0]+ft[1]==0&&M.mode==bn.JOINT_STEREO&&bs(nt,Mt,ce.mld_cb_s,ce.ATH.cb_s,M.ATHlower*ce.ATH.adjust,M.msfix,ce.npart_s);for(var Qe=0;Qe<Wt;++Qe){var yt=Qe&1;ft[yt]==0&&Q(ce,nt[Qe],Mt[Qe],Qe,Bt)}}for(var Qe=0;Qe<Wt;Qe++){var yt=Qe&1;if(ft[yt]==0)for(var nn=0;nn<E.SBMAX_s;nn++){for(var lr=D(3),Bt=0;Bt<3;Bt++){var _n=ce.thm[Qe].s[nn][Bt];if(_n*=Y,Ce[Qe][Bt]>=2||Ce[Qe][Bt+1]==1){var rn=Bt!=0?Bt-1:2,Yn=pe(ce.thm[Qe].s[nn][rn],_n,ge*at);_n=Math.min(_n,Yn)}else if(Ce[Qe][Bt]==1){var rn=Bt!=0?Bt-1:2,Yn=pe(ce.thm[Qe].s[nn][rn],_n,B*at);_n=Math.min(_n,Yn)}else if(Bt!=0&&Ce[Qe][Bt-1]==3||Bt==0&&ce.nsPsy.lastAttacks[Qe]==3){var rn=Bt!=2?Bt+1:0,Yn=pe(ce.thm[Qe].s[nn][rn],_n,B*at);_n=Math.min(_n,Yn)}_n*=Te[Qe][Bt],lr[Bt]=_n}for(var Bt=0;Bt<3;Bt++)ce.thm[Qe].s[nn][Bt]=lr[Bt]}}}for(var Qe=0;Qe<Wt;Qe++)ce.nsPsy.lastAttacks[Qe]=Ce[Qe][2];Xs(M,ft,ye);for(var Qe=0;Qe<Wt;Qe++){var cr,ur,Rr,Mr;Qe>1?(cr=oe,ur=-2,Rr=E.NORM_TYPE,(ye[0]==E.SHORT_TYPE||ye[1]==E.SHORT_TYPE)&&(Rr=E.SHORT_TYPE),Mr=L[K][Qe-2]):(cr=ee,ur=0,Rr=ye[Qe],Mr=ne[K][Qe]),Rr==E.SHORT_TYPE?cr[ur+Qe]=We(Mr,ce.masking_lower):cr[ur+Qe]=Ye(Mr,ce.masking_lower),M.analysis&&(ce.pinfo.pe[K][Qe]=cr[ur+Qe])}return 0};function ir(M,T){var X=M,K;return X>=0?K=-X*27:K=X*T,K<=-72?0:Math.exp(K*i)}function qs(M){var T=0,X=0;{var K=0,ne,L;for(K=0;ir(K,M)>1e-20;K-=1);for(ne=K,L=0;Math.abs(L-ne)>1e-12;)K=(L+ne)/2,ir(K,M)>0?L=K:ne=K;T=ne}{var K=0,ne,L;for(K=0;ir(K,M)>1e-20;K+=1);for(ne=0,L=K;Math.abs(L-ne)>1e-12;)K=(L+ne)/2,ir(K,M)>0?ne=K:L=K;X=L}{var ee=0,oe=1e3,Z;for(Z=0;Z<=oe;++Z){var K=T+Z*(X-T)/oe,ye=ir(K,M);ee+=ye}{var ce=(oe+1)/(ee*(X-T));return ce}}}function ts(M){var T,X,K,ne;return T=M,T>=0?T*=3:T*=1.5,T>=.5&&T<=2.5?(ne=T-.5,X=8*(ne*ne-2*ne)):X=0,T+=.474,K=15.811389+7.5*T-17.5*Math.sqrt(1+T*T),K<=-60?0:(T=Math.exp((X+K)*i),T/=.6609193,T)}function or(M){return M<0&&(M=0),M=M*.001,13*Math.atan(.76*M)+3.5*Math.atan(M*M/(7.5*7.5))}function da(M,T,X,K,ne,L,ee,oe,Z,ye,ce,we){var ze=D(E.CBANDS+1),ut=oe/(we>15?2*576:2*192),Me=Ee(E.HBLKSIZE),ct;oe/=Z;var me=0,nt=0;for(ct=0;ct<E.CBANDS;ct++){var Mt,Te;for(Mt=or(oe*me),ze[ct]=oe*me,Te=me;or(oe*Te)-Mt<ve&&Te<=Z/2;Te++);for(M[ct]=Te-me,nt=ct+1;me<Te;)Me[me++]=ct;if(me>Z/2){me=Z/2,++ct;break}}ze[ct]=oe*me;for(var at=0;at<we;at++){var Ce,ft,Wt,Qe,yt;Wt=ye[at],Qe=ye[at+1],Ce=0|Math.floor(.5+ce*(Wt-.5)),Ce<0&&(Ce=0),ft=0|Math.floor(.5+ce*(Qe-.5)),ft>Z/2&&(ft=Z/2),X[at]=(Me[Ce]+Me[ft])/2,T[at]=Me[ft];var Bt=ut*Qe;ee[at]=(Bt-ze[T[at]])/(ze[T[at]+1]-ze[T[at]]),ee[at]<0?ee[at]=0:ee[at]>1&&(ee[at]=1),yt=or(oe*ye[at]*ce),yt=Math.min(yt,15.5)/15.5,L[at]=Math.pow(10,1.25*(1-Math.cos(Math.PI*yt))-2.5)}me=0;for(var nn=0;nn<nt;nn++){var lr=M[nn],Mt,_n;Mt=or(oe*me),_n=or(oe*(me+lr-1)),K[nn]=.5*(Mt+_n),Mt=or(oe*(me-.5)),_n=or(oe*(me+lr-.5)),ne[nn]=_n-Mt,me+=lr}return nt}function eu(M,T,X,K,ne,L){var ee=ie([E.CBANDS,E.CBANDS]),oe,Z=0;if(L)for(var ye=0;ye<T;ye++)for(oe=0;oe<T;oe++){var ce=ts(X[ye]-X[oe])*K[oe];ee[ye][oe]=ce*ne[ye]}else for(oe=0;oe<T;oe++)for(var we=15+Math.min(21/X[oe],12),ze=qs(we),ye=0;ye<T;ye++){var ce=ze*ir(X[ye]-X[oe],we)*K[oe];ee[ye][oe]=ce*ne[ye]}for(var ye=0;ye<T;ye++){for(oe=0;oe<T&&!(ee[ye][oe]>0);oe++);for(M[ye][0]=oe,oe=T-1;oe>0&&!(ee[ye][oe]>0);oe--);M[ye][1]=oe,Z+=M[ye][1]-M[ye][0]+1}for(var ut=D(Z),Me=0,ye=0;ye<T;ye++)for(oe=M[ye][0];oe<=M[ye][1];oe++)ut[Me++]=ee[ye][oe];return ut}function tu(M){var T=or(M);return T=Math.min(T,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*T))-2.5)}this.psymodel_init=function(M){var T=M.internal_flags,X,K=!0,ne=13,L=24,ee=0,oe=0,Z=-8.25,ye=-4.5,ce=D(E.CBANDS),we=D(E.CBANDS),ze=D(E.CBANDS),ut=M.out_samplerate;switch(M.experimentalZ){default:case 0:K=!0;break;case 1:K=!(M.VBR==xe.vbr_mtrh||M.VBR==xe.vbr_mt);break;case 2:K=!1;break;case 3:ne=8,ee=-1.75,oe=-.0125,Z=-8.25,ye=-2.25;break}for(T.ms_ener_ratio_old=.25,T.blocktype_old[0]=T.blocktype_old[1]=E.NORM_TYPE,X=0;X<4;++X){for(var me=0;me<E.CBANDS;++me)T.nb_1[X][me]=1e20,T.nb_2[X][me]=1e20,T.nb_s1[X][me]=T.nb_s2[X][me]=1;for(var Me=0;Me<E.SBMAX_l;Me++)T.en[X].l[Me]=1e20,T.thm[X].l[Me]=1e20;for(var me=0;me<3;++me){for(var Me=0;Me<E.SBMAX_s;Me++)T.en[X].s[Me][me]=1e20,T.thm[X].s[Me][me]=1e20;T.nsPsy.lastAttacks[X]=0}for(var me=0;me<9;me++)T.nsPsy.last_en_subshort[X][me]=10}for(T.loudness_sq_save[0]=T.loudness_sq_save[1]=0,T.npart_l=da(T.numlines_l,T.bo_l,T.bm_l,ce,we,T.mld_l,T.PSY.bo_l_weight,ut,E.BLKSIZE,T.scalefac_band.l,E.BLKSIZE/(2*576),E.SBMAX_l),le(T.npart_l<E.CBANDS),X=0;X<T.npart_l;X++){var ct=ee;ce[X]>=ne&&(ct=oe*(ce[X]-ne)/(L-ne)+ee*(L-ce[X])/(L-ne)),ze[X]=Math.pow(10,ct/10),T.numlines_l[X]>0?T.rnumlines_l[X]=1/T.numlines_l[X]:T.rnumlines_l[X]=0}T.s3_ll=eu(T.s3ind,T.npart_l,ce,we,ze,K);var me=0;for(X=0;X<T.npart_l;X++){var nt;nt=Je.MAX_VALUE;for(var Mt=0;Mt<T.numlines_l[X];Mt++,me++){var Te=ut*me/(1e3*E.BLKSIZE),at;at=this.ATHformula(Te*1e3,M)-20,at=Math.pow(10,.1*at),at*=T.numlines_l[X],nt>at&&(nt=at)}T.ATH.cb_l[X]=nt,nt=-20+ce[X]*20/10,nt>6&&(nt=100),nt<-15&&(nt=-15),nt-=8,T.minval_l[X]=Math.pow(10,nt/10)*T.numlines_l[X]}for(T.npart_s=da(T.numlines_s,T.bo_s,T.bm_s,ce,we,T.mld_s,T.PSY.bo_s_weight,ut,E.BLKSIZE_s,T.scalefac_band.s,E.BLKSIZE_s/(2*192),E.SBMAX_s),le(T.npart_s<E.CBANDS),me=0,X=0;X<T.npart_s;X++){var nt,ct=Z;ce[X]>=ne&&(ct=ye*(ce[X]-ne)/(L-ne)+Z*(L-ce[X])/(L-ne)),ze[X]=Math.pow(10,ct/10),nt=Je.MAX_VALUE;for(var Mt=0;Mt<T.numlines_s[X];Mt++,me++){var Te=ut*me/(1e3*E.BLKSIZE_s),at;at=this.ATHformula(Te*1e3,M)-20,at=Math.pow(10,.1*at),at*=T.numlines_s[X],nt>at&&(nt=at)}T.ATH.cb_s[X]=nt,nt=-7+ce[X]*7/12,ce[X]>12&&(nt*=1+Math.log(1+nt)*3.1),ce[X]<12&&(nt*=1+Math.log(1-nt)*2.3),nt<-15&&(nt=-15),nt-=8,T.minval_s[X]=Math.pow(10,nt/10)*T.numlines_s[X]}T.s3_ss=eu(T.s3ind_s,T.npart_s,ce,we,ze,K),y(),N.init_fft(T),T.decay=Math.exp(-1*re/($e*ut/192));{var Ce;Ce=O,M.exp_nspsytune&2&&(Ce=1),Math.abs(M.msfix)>0&&(Ce=M.msfix),M.msfix=Ce;for(var ft=0;ft<T.npart_l;ft++)T.s3ind[ft][1]>T.npart_l-1&&(T.s3ind[ft][1]=T.npart_l-1)}var Wt=576*T.mode_gr/ut;if(T.ATH.decay=Math.pow(10,-12/10*Wt),T.ATH.adjust=.01,T.ATH.adjustLimit=1,le(T.bo_l[E.SBMAX_l-1]<=T.npart_l),le(T.bo_s[E.SBMAX_s-1]<=T.npart_s),M.ATHtype!=-1){var Te,Qe=M.out_samplerate/E.BLKSIZE,yt=0;for(Te=0,X=0;X<E.BLKSIZE/2;++X)Te+=Qe,T.ATH.eql_w[X]=1/Math.pow(10,this.ATHformula(Te,M)/10),yt+=T.ATH.eql_w[X];for(yt=1/yt,X=E.BLKSIZE/2;--X>=0;)T.ATH.eql_w[X]*=yt}{for(var ft=me=0;ft<T.npart_s;++ft)for(X=0;X<T.numlines_s[ft];++X)++me;for(var ft=me=0;ft<T.npart_l;++ft)for(X=0;X<T.numlines_l[ft];++X)++me}for(me=0,X=0;X<T.npart_l;X++){var Te=ut*(me+T.numlines_l[X]/2)/(1*E.BLKSIZE);T.mld_cb_l[X]=tu(Te),me+=T.numlines_l[X]}for(;X<E.CBANDS;++X)T.mld_cb_l[X]=1;for(me=0,X=0;X<T.npart_s;X++){var Te=ut*(me+T.numlines_s[X]/2)/(1*E.BLKSIZE_s);T.mld_cb_s[X]=tu(Te),me+=T.numlines_s[X]}for(;X<E.CBANDS;++X)T.mld_cb_s[X]=1;return 0};function _a(M,T){M<-.3&&(M=3410),M/=1e3,M=Math.max(.1,M);var X=3.64*Math.pow(M,-.8)-6.8*Math.exp(-.6*Math.pow(M-3.4,2))+6*Math.exp(-.15*Math.pow(M-8.7,2))+(.6+.04*T)*.001*Math.pow(M,4);return X}this.ATHformula=function(M,T){var X;switch(T.ATHtype){case 0:X=_a(M,9);break;case 1:X=_a(M,-1);break;case 2:X=_a(M,0);break;case 3:X=_a(M,1)+6;break;case 4:X=_a(M,T.ATHcurve);break;default:X=_a(M,0);break}return X}}var tt=Fe;function Ke(N){var re=N;this.ordinal=function(){return re}}Ke.STEREO=new Ke(0),Ke.JOINT_STEREO=new Ke(1),Ke.DUAL_CHANNEL=new Ke(2),Ke.MONO=new Ke(3),Ke.NOT_SET=new Ke(4);var Ze=Ke;function Xe(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=Ze.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var pt=Xe,rt={};rt.SFBMAX=E.SBMAX_s*3;var ot=rt,St=U.new_float,Ct=U.new_int;function jt(){this.xr=St(576),this.l3_enc=Ct(576),this.scalefac=Ct(ot.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=Ct(3),this.subblock_gain=Ct(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=Ct(ot.SFBMAX),this.window=Ct(ot.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=Ct(4),this.max_nonzero_coeff=0;var N=this;function re(se){return new Int32Array(se)}function de(se){return new Float32Array(se)}this.assign=function(se){N.xr=de(se.xr),N.l3_enc=re(se.l3_enc),N.scalefac=re(se.scalefac),N.xrpow_max=se.xrpow_max,N.part2_3_length=se.part2_3_length,N.big_values=se.big_values,N.count1=se.count1,N.global_gain=se.global_gain,N.scalefac_compress=se.scalefac_compress,N.block_type=se.block_type,N.mixed_block_flag=se.mixed_block_flag,N.table_select=re(se.table_select),N.subblock_gain=re(se.subblock_gain),N.region0_count=se.region0_count,N.region1_count=se.region1_count,N.preflag=se.preflag,N.scalefac_scale=se.scalefac_scale,N.count1table_select=se.count1table_select,N.part2_length=se.part2_length,N.sfb_lmax=se.sfb_lmax,N.sfb_smin=se.sfb_smin,N.psy_lmax=se.psy_lmax,N.sfbmax=se.sfbmax,N.psymax=se.psymax,N.sfbdivide=se.sfbdivide,N.width=re(se.width),N.window=re(se.window),N.count1bits=se.count1bits,N.sfb_partition_table=se.sfb_partition_table.slice(0),N.slen=re(se.slen),N.max_nonzero_coeff=se.max_nonzero_coeff}}var Nt=jt,kn=U.new_int;function xn(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[kn(4),kn(4)];for(var N=0;N<2;N++)for(var re=0;re<2;re++)this.tt[N][re]=new Nt}var ar=xn,An=U.System,Lr=U.new_int;function qi(N,re,de,se){this.l=Lr(1+E.SBMAX_l),this.s=Lr(1+E.SBMAX_s),this.psfb21=Lr(1+E.PSFB21),this.psfb12=Lr(1+E.PSFB12);var Ae=this.l,ae=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],An.arraycopy(this.arrL,0,Ae,0,Math.min(this.arrL.length,this.l.length)),An.arraycopy(this.arrS,0,ae,0,Math.min(this.arrS.length,this.s.length)),An.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),An.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var Jt=qi,Xn=U.new_float,Ui=U.new_float_n,l_=U.new_int;function c_(){this.last_en_subshort=Ui([4,9]),this.lastAttacks=l_(4),this.pefirbuf=Xn(19),this.longfact=Xn(E.SBMAX_l),this.shortfact=Xn(E.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var u_=c_;function f_(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var h_=f_,d_=U.new_byte,__=U.new_double,br=U.new_float,$s=U.new_float_n,Ar=U.new_int,Yi=U.new_int_n;Zr.MFSIZE=3*1152+E.ENCDELAY-E.MDCTDELAY,Zr.MAX_HEADER_BUF=256,Zr.MAX_BITS_PER_CHANNEL=4095,Zr.MAX_BITS_PER_GRANULE=7680,Zr.BPC=320;function Zr(){var N=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=$s([2,Zr.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new ar,this.ms_ratio=br(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=Ar(2),this.CurrentStep=Ar(2),this.masking_lower=0,this.bv_scf=Ar(576),this.pseudohalf=Ar(ot.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*Zr.BPC+1),this.itime=__(2),this.sideinfo_len=0,this.sb_sample=$s([2,2,18,E.SBLIMIT]),this.amp_filter=br(32);function re(){this.write_timing=0,this.ptr=0,this.buf=d_(N)}this.header=new Array(Zr.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new Jt,this.minval_l=br(E.CBANDS),this.minval_s=br(E.CBANDS),this.nb_1=$s([4,E.CBANDS]),this.nb_2=$s([4,E.CBANDS]),this.nb_s1=$s([4,E.CBANDS]),this.nb_s2=$s([4,E.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=br(4),this.loudness_sq=$s([2,2]),this.loudness_sq_save=br(2),this.mld_l=br(E.SBMAX_l),this.mld_s=br(E.SBMAX_s),this.bm_l=Ar(E.SBMAX_l),this.bo_l=Ar(E.SBMAX_l),this.bm_s=Ar(E.SBMAX_s),this.bo_s=Ar(E.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=Yi([E.CBANDS,2]),this.s3ind_s=Yi([E.CBANDS,2]),this.numlines_s=Ar(E.CBANDS),this.numlines_l=Ar(E.CBANDS),this.rnumlines_l=br(E.CBANDS),this.mld_cb_l=br(E.CBANDS),this.mld_cb_s=br(E.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=br(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=Ar(2),this.nsPsy=new u_,this.VBR_seek_table=new h_,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=Yi([16,5]),this.bitrate_blockType_Hist=Yi([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var de=0;de<this.en.length;de++)this.en[de]=new it;for(var de=0;de<this.thm.length;de++)this.thm[de]=new it;for(var de=0;de<this.header.length;de++)this.header[de]=new re}var zt=Zr,Vs=U.new_float;function m_(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=Vs(E.SBMAX_l),this.s=Vs(E.SBMAX_s),this.psfb21=Vs(E.PSFB21),this.psfb12=Vs(E.PSFB12),this.cb_l=Vs(E.CBANDS),this.cb_s=Vs(E.CBANDS),this.eql_w=Vs(E.BLKSIZE/2)}var v_=m_,qn=U.System,Dc=U.Arrays;cn.STEPS_per_dB=100,cn.MAX_dB=120,cn.GAIN_NOT_ENOUGH_SAMPLES=-24601,cn.GAIN_ANALYSIS_ERROR=0,cn.GAIN_ANALYSIS_OK=1,cn.INIT_GAIN_ANALYSIS_ERROR=0,cn.INIT_GAIN_ANALYSIS_OK=1,cn.YULE_ORDER=10,cn.MAX_ORDER=cn.YULE_ORDER,cn.MAX_SAMP_FREQ=48e3,cn.RMS_WINDOW_TIME_NUMERATOR=1,cn.RMS_WINDOW_TIME_DENOMINATOR=20,cn.MAX_SAMPLES_PER_WINDOW=cn.MAX_SAMP_FREQ*cn.RMS_WINDOW_TIME_NUMERATOR/cn.RMS_WINDOW_TIME_DENOMINATOR+1;function cn(){var N=64.82,re=.95,de=cn.RMS_WINDOW_TIME_NUMERATOR,se=cn.RMS_WINDOW_TIME_DENOMINATOR,Ae=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],ae=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function ve(B,O,H,i,z,G){for(;z--!=0;)H[i]=1e-10+B[O+0]*G[0]-H[i-1]*G[1]+B[O-1]*G[2]-H[i-2]*G[3]+B[O-2]*G[4]-H[i-3]*G[5]+B[O-3]*G[6]-H[i-4]*G[7]+B[O-4]*G[8]-H[i-5]*G[9]+B[O-5]*G[10]-H[i-6]*G[11]+B[O-6]*G[12]-H[i-7]*G[13]+B[O-7]*G[14]-H[i-8]*G[15]+B[O-8]*G[16]-H[i-9]*G[17]+B[O-9]*G[18]-H[i-10]*G[19]+B[O-10]*G[20],++i,++O}function Pe(B,O,H,i,z,G){for(;z--!=0;)H[i]=B[O+0]*G[0]-H[i-1]*G[1]+B[O-1]*G[2]-H[i-2]*G[3]+B[O-2]*G[4],++i,++O}function $e(B,O){for(var H=0;H<MAX_ORDER;H++)B.linprebuf[H]=B.lstepbuf[H]=B.loutbuf[H]=B.rinprebuf[H]=B.rstepbuf[H]=B.routbuf[H]=0;switch(0|O){case 48e3:B.reqindex=0;break;case 44100:B.reqindex=1;break;case 32e3:B.reqindex=2;break;case 24e3:B.reqindex=3;break;case 22050:B.reqindex=4;break;case 16e3:B.reqindex=5;break;case 12e3:B.reqindex=6;break;case 11025:B.reqindex=7;break;case 8e3:B.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return B.sampleWindow=0|(O*de+se-1)/se,B.lsum=0,B.rsum=0,B.totsamp=0,Dc.ill(B.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(B,O){return $e(B,O)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(B.linpre=MAX_ORDER,B.rinpre=MAX_ORDER,B.lstep=MAX_ORDER,B.rstep=MAX_ORDER,B.lout=MAX_ORDER,B.rout=MAX_ORDER,Dc.fill(B.B,0),INIT_GAIN_ANALYSIS_OK)};function Y(B){return B*B}this.AnalyzeSamples=function(B,O,H,i,z,G,j){var h,R,I,k,F,l,A;if(G==0)return GAIN_ANALYSIS_OK;switch(A=0,F=G,j){case 1:i=O,z=H;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(G<MAX_ORDER?(qn.arraycopy(O,H,B.linprebuf,MAX_ORDER,G),qn.arraycopy(i,z,B.rinprebuf,MAX_ORDER,G)):(qn.arraycopy(O,H,B.linprebuf,MAX_ORDER,MAX_ORDER),qn.arraycopy(i,z,B.rinprebuf,MAX_ORDER,MAX_ORDER));F>0;){l=F>B.sampleWindow-B.totsamp?B.sampleWindow-B.totsamp:F,A<MAX_ORDER?(h=B.linpre+A,R=B.linprebuf,I=B.rinpre+A,k=B.rinprebuf,l>MAX_ORDER-A&&(l=MAX_ORDER-A)):(h=H+A,R=O,I=z+A,k=i),ve(R,h,B.lstepbuf,B.lstep+B.totsamp,l,Ae[B.reqindex]),ve(k,I,B.rstepbuf,B.rstep+B.totsamp,l,Ae[B.reqindex]),Pe(B.lstepbuf,B.lstep+B.totsamp,B.loutbuf,B.lout+B.totsamp,l,ae[B.reqindex]),Pe(B.rstepbuf,B.rstep+B.totsamp,B.routbuf,B.rout+B.totsamp,l,ae[B.reqindex]),h=B.lout+B.totsamp,R=B.loutbuf,I=B.rout+B.totsamp,k=B.routbuf;for(var y=l%8;y--!=0;)B.lsum+=Y(R[h++]),B.rsum+=Y(k[I++]);for(y=l/8;y--!=0;)B.lsum+=Y(R[h+0])+Y(R[h+1])+Y(R[h+2])+Y(R[h+3])+Y(R[h+4])+Y(R[h+5])+Y(R[h+6])+Y(R[h+7]),h+=8,B.rsum+=Y(k[I+0])+Y(k[I+1])+Y(k[I+2])+Y(k[I+3])+Y(k[I+4])+Y(k[I+5])+Y(k[I+6])+Y(k[I+7]),I+=8;if(F-=l,A+=l,B.totsamp+=l,B.totsamp==B.sampleWindow){var d=cn.STEPS_per_dB*10*Math.log10((B.lsum+B.rsum)/B.totsamp*.5+1e-37),w=d<=0?0:0|d;w>=B.A.length&&(w=B.A.length-1),B.A[w]++,B.lsum=B.rsum=0,qn.arraycopy(B.loutbuf,B.totsamp,B.loutbuf,0,MAX_ORDER),qn.arraycopy(B.routbuf,B.totsamp,B.routbuf,0,MAX_ORDER),qn.arraycopy(B.lstepbuf,B.totsamp,B.lstepbuf,0,MAX_ORDER),qn.arraycopy(B.rstepbuf,B.totsamp,B.rstepbuf,0,MAX_ORDER),B.totsamp=0}if(B.totsamp>B.sampleWindow)return GAIN_ANALYSIS_ERROR}return G<MAX_ORDER?(qn.arraycopy(B.linprebuf,G,B.linprebuf,0,MAX_ORDER-G),qn.arraycopy(B.rinprebuf,G,B.rinprebuf,0,MAX_ORDER-G),qn.arraycopy(O,H,B.linprebuf,MAX_ORDER-G,G),qn.arraycopy(i,z,B.rinprebuf,MAX_ORDER-G,G)):(qn.arraycopy(O,H+G-MAX_ORDER,B.linprebuf,0,MAX_ORDER),qn.arraycopy(i,z+G-MAX_ORDER,B.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function ge(B,O){var H,i=0;for(H=0;H<O;H++)i+=B[H];if(i==0)return GAIN_NOT_ENOUGH_SAMPLES;var z=0|Math.ceil(i*(1-re));for(H=O;H-- >0&&!((z-=B[H])<=0););return N-H/cn.STEPS_per_dB}this.GetTitleGain=function(B){for(var O=ge(B.A,B.A.length),H=0;H<B.A.length;H++)B.B[H]+=B.A[H],B.A[H]=0;for(var H=0;H<MAX_ORDER;H++)B.linprebuf[H]=B.lstepbuf[H]=B.loutbuf[H]=B.rinprebuf[H]=B.rstepbuf[H]=B.routbuf[H]=0;return B.totsamp=0,B.lsum=B.rsum=0,O}}var $n=cn,fa=U.new_float,jc=U.new_int;function p_(){this.linprebuf=fa($n.MAX_ORDER*2),this.linpre=0,this.lstepbuf=fa($n.MAX_SAMPLES_PER_WINDOW+$n.MAX_ORDER),this.lstep=0,this.loutbuf=fa($n.MAX_SAMPLES_PER_WINDOW+$n.MAX_ORDER),this.lout=0,this.rinprebuf=fa($n.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=fa($n.MAX_SAMPLES_PER_WINDOW+$n.MAX_ORDER),this.rstep=0,this.routbuf=fa($n.MAX_SAMPLES_PER_WINDOW+$n.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=jc(0|$n.STEPS_per_dB*$n.MAX_dB),this.B=jc(0|$n.STEPS_per_dB*$n.MAX_dB)}var b_=p_;function y_(N){this.bits=N}var Xc=y_,qc=U.new_float,w_=U.new_int,Uc=U.assert;function g_(N){var re=N;this.quantize=re,this.iteration_loop=function(de,se,Ae,ae){var ve=de.internal_flags,Pe=qc(ot.SFBMAX),$e=qc(576),Y=w_(2),ge=0,B,O=ve.l3_side,H=new Xc(ge);this.quantize.rv.ResvFrameBegin(de,H),ge=H.bits;for(var i=0;i<ve.mode_gr;i++){B=this.quantize.qupvt.on_pe(de,se,Y,ge,i,i),ve.mode_ext==E.MPG_MD_MS_LR&&(this.quantize.ms_convert(ve.l3_side,i),this.quantize.qupvt.reduce_side(Y,Ae[i],ge,B));for(var z=0;z<ve.channels_out;z++){var G,j,h=O.tt[i][z];h.block_type!=E.SHORT_TYPE?(G=0,j=ve.PSY.mask_adjust-G):(G=0,j=ve.PSY.mask_adjust_short-G),ve.masking_lower=Math.pow(10,j*.1),this.quantize.init_outer_loop(ve,h),this.quantize.init_xrpow(ve,h,$e)&&(this.quantize.qupvt.calc_xmin(de,ae[i][z],h,Pe),this.quantize.outer_loop(de,h,Pe,$e,z,Y[z])),this.quantize.iteration_finish_one(ve,i,z),Uc(h.part2_3_length<=zt.MAX_BITS_PER_CHANNEL),Uc(h.part2_3_length<=Y[z])}}this.quantize.rv.ResvFrameEnd(ve,ge)}}var S_=g_;function Lt(N,re,de,se){this.xlen=N,this.linmax=re,this.table=de,this.hlen=se}var Oe={};Oe.t1HB=[1,1,1,0],Oe.t2HB=[1,2,1,3,1,1,3,2,0],Oe.t3HB=[3,2,1,1,1,1,3,2,0],Oe.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],Oe.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],Oe.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],Oe.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],Oe.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],Oe.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],Oe.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],Oe.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],Oe.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],Oe.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],Oe.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],Oe.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],Oe.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],Oe.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],Oe.t1l=[1,4,3,5],Oe.t2l=[1,4,7,4,5,7,6,7,8],Oe.t3l=[2,3,7,4,4,7,6,7,8],Oe.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],Oe.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],Oe.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],Oe.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],Oe.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],Oe.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],Oe.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],Oe.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],Oe.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],Oe.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],Oe.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],Oe.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],Oe.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],Oe.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],Oe.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],Oe.ht=[new Lt(0,0,null,null),new Lt(2,0,Oe.t1HB,Oe.t1l),new Lt(3,0,Oe.t2HB,Oe.t2l),new Lt(3,0,Oe.t3HB,Oe.t3l),new Lt(0,0,null,null),new Lt(4,0,Oe.t5HB,Oe.t5l),new Lt(4,0,Oe.t6HB,Oe.t6l),new Lt(6,0,Oe.t7HB,Oe.t7l),new Lt(6,0,Oe.t8HB,Oe.t8l),new Lt(6,0,Oe.t9HB,Oe.t9l),new Lt(8,0,Oe.t10HB,Oe.t10l),new Lt(8,0,Oe.t11HB,Oe.t11l),new Lt(8,0,Oe.t12HB,Oe.t12l),new Lt(16,0,Oe.t13HB,Oe.t13l),new Lt(0,0,null,Oe.t16_5l),new Lt(16,0,Oe.t15HB,Oe.t15l),new Lt(1,1,Oe.t16HB,Oe.t16l),new Lt(2,3,Oe.t16HB,Oe.t16l),new Lt(3,7,Oe.t16HB,Oe.t16l),new Lt(4,15,Oe.t16HB,Oe.t16l),new Lt(6,63,Oe.t16HB,Oe.t16l),new Lt(8,255,Oe.t16HB,Oe.t16l),new Lt(10,1023,Oe.t16HB,Oe.t16l),new Lt(13,8191,Oe.t16HB,Oe.t16l),new Lt(4,15,Oe.t24HB,Oe.t24l),new Lt(5,31,Oe.t24HB,Oe.t24l),new Lt(6,63,Oe.t24HB,Oe.t24l),new Lt(7,127,Oe.t24HB,Oe.t24l),new Lt(8,255,Oe.t24HB,Oe.t24l),new Lt(9,511,Oe.t24HB,Oe.t24l),new Lt(11,2047,Oe.t24HB,Oe.t24l),new Lt(13,8191,Oe.t24HB,Oe.t24l),new Lt(0,0,Oe.t32HB,Oe.t32l),new Lt(0,0,Oe.t33HB,Oe.t33l)],Oe.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],Oe.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],Oe.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],Oe.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],Oe.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],Oe.scfsi_band=[0,6,11,16,21];var Ot=Oe,Hs=U.VbrMode,Ki=U.Float,Il=U.Util,Ds=U.new_float,x_=U.new_int,ja=U.assert;Jr.Q_MAX=257,Jr.Q_MAX2=116,Jr.LARGE_BITS=1e5,Jr.IXMAX_VAL=8206;function Jr(){var N=null,re=null,de=null;this.setModules=function(h,R,I){N=h,re=R,de=I};function se(h){return B[h+Jr.Q_MAX2]}this.IPOW20=function(h){return O[h]};var Ae=2220446049250313e-31,ae=Jr.IXMAX_VAL,ve=ae+2,Pe=Jr.Q_MAX,$e=Jr.Q_MAX2,Y=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var ge=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=ge,this.sfBandIndex=[new Jt([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Jt([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Jt([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Jt([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Jt([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Jt([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Jt([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Jt([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Jt([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var B=Ds(Pe+$e+1),O=Ds(Pe),H=Ds(ve),i=Ds(ve);this.adj43=i;function z(h,R){var I=de.ATHformula(R,h);return I-=Y,I=Math.pow(10,I/10+h.ATHlower),I}function G(h){for(var R=h.internal_flags.ATH.l,I=h.internal_flags.ATH.psfb21,k=h.internal_flags.ATH.s,F=h.internal_flags.ATH.psfb12,l=h.internal_flags,A=h.out_samplerate,y=0;y<E.SBMAX_l;y++){var d=l.scalefac_band.l[y],w=l.scalefac_band.l[y+1];R[y]=Ki.MAX_VALUE;for(var x=d;x<w;x++){var u=x*A/1152,_=z(h,u);R[y]=Math.min(R[y],_)}}for(var y=0;y<E.PSFB21;y++){var d=l.scalefac_band.psfb21[y],w=l.scalefac_band.psfb21[y+1];I[y]=Ki.MAX_VALUE;for(var x=d;x<w;x++){var u=x*A/1152,_=z(h,u);I[y]=Math.min(I[y],_)}}for(var y=0;y<E.SBMAX_s;y++){var d=l.scalefac_band.s[y],w=l.scalefac_band.s[y+1];k[y]=Ki.MAX_VALUE;for(var x=d;x<w;x++){var u=x*A/384,_=z(h,u);k[y]=Math.min(k[y],_)}k[y]*=l.scalefac_band.s[y+1]-l.scalefac_band.s[y]}for(var y=0;y<E.PSFB12;y++){var d=l.scalefac_band.psfb12[y],w=l.scalefac_band.psfb12[y+1];F[y]=Ki.MAX_VALUE;for(var x=d;x<w;x++){var u=x*A/384,_=z(h,u);F[y]=Math.min(F[y],_)}F[y]*=l.scalefac_band.s[13]-l.scalefac_band.s[12]}if(h.noATH){for(var y=0;y<E.SBMAX_l;y++)R[y]=1e-20;for(var y=0;y<E.PSFB21;y++)I[y]=1e-20;for(var y=0;y<E.SBMAX_s;y++)k[y]=1e-20;for(var y=0;y<E.PSFB12;y++)F[y]=1e-20}l.ATH.floor=10*Math.log10(z(h,-1))}this.iteration_init=function(h){var R=h.internal_flags,I=R.l3_side,k;if(R.iteration_init_init==0){for(R.iteration_init_init=1,I.main_data_begin=0,G(h),H[0]=0,k=1;k<ve;k++)H[k]=Math.pow(k,4/3);for(k=0;k<ve-1;k++)i[k]=k+1-Math.pow(.5*(H[k]+H[k+1]),.75);for(i[k]=.5,k=0;k<Pe;k++)O[k]=Math.pow(2,(k-210)*-.1875);for(k=0;k<=Pe+$e;k++)B[k]=Math.pow(2,(k-210-$e)*.25);N.huffman_init(R);{var F,l,A,y;for(k=h.exp_nspsytune>>2&63,k>=32&&(k-=64),F=Math.pow(10,k/4/10),k=h.exp_nspsytune>>8&63,k>=32&&(k-=64),l=Math.pow(10,k/4/10),k=h.exp_nspsytune>>14&63,k>=32&&(k-=64),A=Math.pow(10,k/4/10),k=h.exp_nspsytune>>20&63,k>=32&&(k-=64),y=A*Math.pow(10,k/4/10),k=0;k<E.SBMAX_l;k++){var d;k<=6?d=F:k<=13?d=l:k<=20?d=A:d=y,R.nsPsy.longfact[k]=d}for(k=0;k<E.SBMAX_s;k++){var d;k<=5?d=F:k<=10?d=l:k<=11?d=A:d=y,R.nsPsy.shortfact[k]=d}}}},this.on_pe=function(h,R,I,k,F,l){var A=h.internal_flags,y=0,d,w=x_(2),x,u=new Xc(y),_=re.ResvMaxBits(h,k,u,l);y=u.bits;var v=y+_;for(v>zt.MAX_BITS_PER_GRANULE&&(v=zt.MAX_BITS_PER_GRANULE),d=0,x=0;x<A.channels_out;++x)I[x]=Math.min(zt.MAX_BITS_PER_CHANNEL,y/A.channels_out),w[x]=0|I[x]*R[F][x]/700-I[x],w[x]>k*3/4&&(w[x]=k*3/4),w[x]<0&&(w[x]=0),w[x]+I[x]>zt.MAX_BITS_PER_CHANNEL&&(w[x]=Math.max(0,zt.MAX_BITS_PER_CHANNEL-I[x])),d+=w[x];if(d>_)for(x=0;x<A.channels_out;++x)w[x]=_*w[x]/d;for(x=0;x<A.channels_out;++x)I[x]+=w[x],_-=w[x];for(d=0,x=0;x<A.channels_out;++x)d+=I[x];if(d>zt.MAX_BITS_PER_GRANULE){var P=0;for(x=0;x<A.channels_out;++x)I[x]*=zt.MAX_BITS_PER_GRANULE,I[x]/=d,P+=I[x]}return v},this.reduce_side=function(h,R,I,k){ja(h[0]+h[1]<=zt.MAX_BITS_PER_GRANULE);var F=.33*(.5-R)/.5;F<0&&(F=0),F>.5&&(F=.5);var l=0|F*.5*(h[0]+h[1]);l>zt.MAX_BITS_PER_CHANNEL-h[0]&&(l=zt.MAX_BITS_PER_CHANNEL-h[0]),l<0&&(l=0),h[1]>=125&&(h[1]-l>125?(h[0]<I&&(h[0]+=l),h[1]-=l):(h[0]+=h[1]-125,h[1]=125)),l=h[0]+h[1],l>k&&(h[0]=k*h[0]/l,h[1]=k*h[1]/l),ja(h[0]<=zt.MAX_BITS_PER_CHANNEL),ja(h[1]<=zt.MAX_BITS_PER_CHANNEL),ja(h[0]+h[1]<=zt.MAX_BITS_PER_GRANULE)},this.athAdjust=function(h,R,I){var k=90.30873362,F=94.82444863,l=Il.FAST_LOG10_X(R,10),A=h*h,y=0;return l-=I,A>1e-20&&(y=1+Il.FAST_LOG10_X(A,10/k)),y<0&&(y=0),l*=y,l+=I+k-F,Math.pow(10,.1*l)},this.calc_xmin=function(h,R,I,k){var F=0,l=h.internal_flags,A,y=0,d=0,w=l.ATH,x=I.xr,u=h.VBR==Hs.vbr_mtrh?1:0,_=l.masking_lower;for((h.VBR==Hs.vbr_mtrh||h.VBR==Hs.vbr_mt)&&(_=1),A=0;A<I.psy_lmax;A++){var v,P,ue,q,Q,c;h.VBR==Hs.vbr_rh||h.VBR==Hs.vbr_mtrh?P=athAdjust(w.adjust,w.l[A],w.floor):P=w.adjust*w.l[A],Q=I.width[A],ue=P/Q,q=Ae,c=Q>>1,v=0;do{var p,fe;p=x[y]*x[y],v+=p,q+=p<ue?p:ue,y++,fe=x[y]*x[y],v+=fe,q+=fe<ue?fe:ue,y++}while(--c>0);if(v>P&&d++,A==E.SBPSY_l){var pe=P*l.nsPsy.longfact[A];q<pe&&(q=pe)}if(u!=0&&(P=q),!h.ATHonly){var Le=R.en.l[A];if(Le>0){var pe;pe=v*R.thm.l[A]*_/Le,u!=0&&(pe*=l.nsPsy.longfact[A]),P<pe&&(P=pe)}}u!=0?k[F++]=P:k[F++]=P*l.nsPsy.longfact[A]}var We=575;if(I.block_type!=E.SHORT_TYPE)for(var Ve=576;Ve--!=0&&es.EQ(x[Ve],0);)We=Ve;I.max_nonzero_coeff=We;for(var Ye=I.sfb_smin;A<I.psymax;Ye++,A+=3){var Q,vt,st;for(h.VBR==Hs.vbr_rh||h.VBR==Hs.vbr_mtrh?st=athAdjust(w.adjust,w.s[Ye],w.floor):st=w.adjust*w.s[Ye],Q=I.width[A],vt=0;vt<3;vt++){var v=0,P,ue,q,c=Q>>1;ue=st/Q,q=Ae;do{var p,fe;p=x[y]*x[y],v+=p,q+=p<ue?p:ue,y++,fe=x[y]*x[y],v+=fe,q+=fe<ue?fe:ue,y++}while(--c>0);if(v>st&&d++,Ye==E.SBPSY_s){var pe=st*l.nsPsy.shortfact[Ye];q<pe&&(q=pe)}if(u!=0?P=q:P=st,!h.ATHonly&&!h.ATHshort){var Le=R.en.s[Ye][vt];if(Le>0){var pe;pe=v*R.thm.s[Ye][vt]*_/Le,u!=0&&(pe*=l.nsPsy.shortfact[Ye]),P<pe&&(P=pe)}}u!=0?k[F++]=P:k[F++]=P*l.nsPsy.shortfact[Ye]}h.useTemporal&&(k[F-3]>k[F-3+1]&&(k[F-3+1]+=(k[F-3]-k[F-3+1])*l.decay),k[F-3+1]>k[F-3+2]&&(k[F-3+2]+=(k[F-3+1]-k[F-3+2])*l.decay))}return d};function j(h){this.s=h}this.calc_noise_core=function(h,R,I,k){var F=0,l=R.s,A=h.l3_enc;if(l>h.count1)for(;I--!=0;){var y;y=h.xr[l],l++,F+=y*y,y=h.xr[l],l++,F+=y*y}else if(l>h.big_values){var d=Ds(2);for(d[0]=0,d[1]=k;I--!=0;){var y;y=Math.abs(h.xr[l])-d[A[l]],l++,F+=y*y,y=Math.abs(h.xr[l])-d[A[l]],l++,F+=y*y}}else for(;I--!=0;){var y;y=Math.abs(h.xr[l])-H[A[l]]*k,l++,F+=y*y,y=Math.abs(h.xr[l])-H[A[l]]*k,l++,F+=y*y}return R.s=l,F},this.calc_noise=function(h,R,I,k,F){var l=0,A=0,y,d,w=0,x=0,u=0,_=-20,v=0,P=h.scalefac,ue=0;for(k.over_SSD=0,y=0;y<h.psymax;y++){var q=h.global_gain-(P[ue++]+(h.preflag!=0?ge[y]:0)<<h.scalefac_scale+1)-h.subblock_gain[h.window[y]]*8,Q=0;if(F!=null&&F.step[y]==q)Q=F.noise[y],v+=h.width[y],I[l++]=Q/R[A++],Q=F.noise_log[y];else{var c=se(q);if(d=h.width[y]>>1,v+h.width[y]>h.max_nonzero_coeff){var p;p=h.max_nonzero_coeff-v+1,p>0?d=p>>1:d=0}var fe=new j(v);Q=this.calc_noise_core(h,fe,d,c),v=fe.s,F!=null&&(F.step[y]=q,F.noise[y]=Q),Q=I[l++]=Q/R[A++],Q=Il.FAST_LOG10(Math.max(Q,1e-20)),F!=null&&(F.noise_log[y]=Q)}if(F!=null&&(F.global_gain=h.global_gain),u+=Q,Q>0){var pe;pe=Math.max(0|Q*10+.5,1),k.over_SSD+=pe*pe,w++,x+=Q}_=Math.max(_,Q)}return k.over_count=w,k.tot_noise=u,k.over_noise=x,k.max_noise=_,w},this.set_pinfo=function(h,R,I,k,F){var l=h.internal_flags,A,y,d,w,x,u=R.scalefac_scale==0?.5:1,_=R.scalefac,v=Ds(L3Side.SFBMAX),P=Ds(L3Side.SFBMAX),ue=new CalcNoiseResult;calc_xmin(h,I,R,v),calc_noise(R,v,P,ue,null);var q=0;for(y=R.sfb_lmax,R.block_type!=E.SHORT_TYPE&&R.mixed_block_flag==0&&(y=22),A=0;A<y;A++){var Q=l.scalefac_band.l[A],c=l.scalefac_band.l[A+1],p=c-Q;for(w=0;q<c;q++)w+=R.xr[q]*R.xr[q];w/=p,x=1e15,l.pinfo.en[k][F][A]=x*w,l.pinfo.xfsf[k][F][A]=x*v[A]*P[A]/p,I.en.l[A]>0&&!h.ATHonly?w=w/I.en.l[A]:w=0,l.pinfo.thr[k][F][A]=x*Math.max(w*I.thm.l[A],l.ATH.l[A]),l.pinfo.LAMEsfb[k][F][A]=0,R.preflag!=0&&A>=11&&(l.pinfo.LAMEsfb[k][F][A]=-u*ge[A]),A<E.SBPSY_l&&(ja(_[A]>=0),l.pinfo.LAMEsfb[k][F][A]-=u*_[A])}if(R.block_type==E.SHORT_TYPE)for(y=A,A=R.sfb_smin;A<E.SBMAX_s;A++)for(var Q=l.scalefac_band.s[A],c=l.scalefac_band.s[A+1],p=c-Q,fe=0;fe<3;fe++){for(w=0,d=Q;d<c;d++)w+=R.xr[q]*R.xr[q],q++;w=Math.max(w/p,1e-20),x=1e15,l.pinfo.en_s[k][F][3*A+fe]=x*w,l.pinfo.xfsf_s[k][F][3*A+fe]=x*v[y]*P[y]/p,I.en.s[A][fe]>0?w=w/I.en.s[A][fe]:w=0,(h.ATHonly||h.ATHshort)&&(w=0),l.pinfo.thr_s[k][F][3*A+fe]=x*Math.max(w*I.thm.s[A][fe],l.ATH.s[A]),l.pinfo.LAMEsfb_s[k][F][3*A+fe]=-2*R.subblock_gain[fe],A<E.SBPSY_s&&(l.pinfo.LAMEsfb_s[k][F][3*A+fe]-=u*_[y]),y++}l.pinfo.LAMEqss[k][F]=R.global_gain,l.pinfo.LAMEmainbits[k][F]=R.part2_3_length+R.part2_length,l.pinfo.LAMEsfbits[k][F]=R.part2_length,l.pinfo.over[k][F]=ue.over_count,l.pinfo.max_noise[k][F]=ue.max_noise*10,l.pinfo.over_noise[k][F]=ue.over_noise*10,l.pinfo.tot_noise[k][F]=ue.tot_noise*10,l.pinfo.over_SSD[k][F]=ue.over_SSD}}var _s=Jr,A_=U.System,E_=U.Arrays,Xa=U.new_int,Ol=U.assert;function kl(){var N=null;this.qupvt=null,this.setModules=function(d){this.qupvt=d,N=d};function re(d){this.bits=0|d}var de=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function se(d,w,x,u,_,v){var P=.5946/w;for(d=d>>1;d--!=0;)_[v++]=P>x[u++]?0:1,_[v++]=P>x[u++]?0:1}function Ae(d,w,x,u,_,v){d=d>>1;var P=d%2;for(d=d>>1;d--!=0;){var ue,q,Q,c,p,fe,pe,Le;ue=x[u++]*w,q=x[u++]*w,p=0|ue,Q=x[u++]*w,fe=0|q,c=x[u++]*w,pe=0|Q,ue+=N.adj43[p],Le=0|c,q+=N.adj43[fe],_[v++]=0|ue,Q+=N.adj43[pe],_[v++]=0|q,c+=N.adj43[Le],_[v++]=0|Q,_[v++]=0|c}if(P!=0){var ue,q,p,fe;ue=x[u++]*w,q=x[u++]*w,p=0|ue,fe=0|q,ue+=N.adj43[p],q+=N.adj43[fe],_[v++]=0|ue,_[v++]=0|q}}function ae(d,w,x,u,_){var v,P,ue=0,q,Q=0,c=0,p=0,fe=w,pe=0,Le=fe,We=0,Ve=d,Ye=0;for(q=_!=null&&u.global_gain==_.global_gain,u.block_type==E.SHORT_TYPE?P=38:P=21,v=0;v<=P;v++){var vt=-1;if((q||u.block_type==E.NORM_TYPE)&&(vt=u.global_gain-(u.scalefac[v]+(u.preflag!=0?N.pretab[v]:0)<<u.scalefac_scale+1)-u.subblock_gain[u.window[v]]*8),Ol(u.width[v]>=0),q&&_.step[v]==vt)Q!=0&&(Ae(Q,x,Ve,Ye,Le,We),Q=0),c!=0&&(se(c,x,Ve,Ye,Le,We),c=0);else{var st=u.width[v];if(ue+u.width[v]>u.max_nonzero_coeff){var qe;qe=u.max_nonzero_coeff-ue+1,E_.fill(w,u.max_nonzero_coeff,576,0),st=qe,st<0&&(st=0),v=P+1}if(Q==0&&c==0&&(Le=fe,We=pe,Ve=d,Ye=p),_!=null&&_.sfb_count1>0&&v>=_.sfb_count1&&_.step[v]>0&&vt>=_.step[v]?(Q!=0&&(Ae(Q,x,Ve,Ye,Le,We),Q=0,Le=fe,We=pe,Ve=d,Ye=p),c+=st):(c!=0&&(se(c,x,Ve,Ye,Le,We),c=0,Le=fe,We=pe,Ve=d,Ye=p),Q+=st),st<=0){c!=0&&(se(c,x,Ve,Ye,Le,We),c=0),Q!=0&&(Ae(Q,x,Ve,Ye,Le,We),Q=0);break}}v<=P&&(pe+=u.width[v],p+=u.width[v],ue+=u.width[v])}Q!=0&&(Ae(Q,x,Ve,Ye,Le,We),Q=0),c!=0&&(se(c,x,Ve,Ye,Le,We),c=0)}function ve(d,w,x){var u=0,_=0;do{var v=d[w++],P=d[w++];u<v&&(u=v),_<P&&(_=P)}while(w<x);return u<_&&(u=_),u}function Pe(d,w,x,u,_,v){var P=Ot.ht[u].xlen*65536+Ot.ht[_].xlen,ue=0,q;do{var Q=d[w++],c=d[w++];Q!=0&&(Q>14&&(Q=15,ue+=P),Q*=16),c!=0&&(c>14&&(c=15,ue+=P),Q+=c),ue+=Ot.largetbl[Q]}while(w<x);return q=ue&65535,ue>>=16,ue>q&&(ue=q,u=_),v.bits+=ue,u}function $e(d,w,x,u){var _=0,v=Ot.ht[1].hlen;do{var P=d[w+0]*2+d[w+1];w+=2,_+=v[P]}while(w<x);return u.bits+=_,1}function Y(d,w,x,u,_){var v=0,P,ue=Ot.ht[u].xlen,q;u==2?q=Ot.table23:q=Ot.table56;do{var Q=d[w+0]*ue+d[w+1];w+=2,v+=q[Q]}while(w<x);return P=v&65535,v>>=16,v>P&&(v=P,u++),_.bits+=v,u}function ge(d,w,x,u,_){var v=0,P=0,ue=0,q=Ot.ht[u].xlen,Q=Ot.ht[u].hlen,c=Ot.ht[u+1].hlen,p=Ot.ht[u+2].hlen;do{var fe=d[w+0]*q+d[w+1];w+=2,v+=Q[fe],P+=c[fe],ue+=p[fe]}while(w<x);var pe=u;return v>P&&(v=P,pe++),v>ue&&(v=ue,pe=u+2),_.bits+=v,pe}var B=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function O(d,w,x,u){var _=ve(d,w,x);switch(_){case 0:return _;case 1:return $e(d,w,x,u);case 2:case 3:return Y(d,w,x,B[_-1],u);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return ge(d,w,x,B[_-1],u);default:if(_>_s.IXMAX_VAL)return u.bits=_s.LARGE_BITS,-1;_-=15;var v;for(v=24;v<32&&!(Ot.ht[v].linmax>=_);v++);var P;for(P=v-8;P<24&&!(Ot.ht[P].linmax>=_);P++);return Pe(d,w,x,P,v,u)}}this.noquant_count_bits=function(d,w,x){var u=w.l3_enc,_=Math.min(576,w.max_nonzero_coeff+2>>1<<1);for(x!=null&&(x.sfb_count1=0);_>1&&!(u[_-1]|u[_-2]);_-=2);w.count1=_;for(var v=0,P=0;_>3;_-=4){var ue;if(((u[_-1]|u[_-2]|u[_-3]|u[_-4])&2147483647)>1)break;ue=((u[_-4]*2+u[_-3])*2+u[_-2])*2+u[_-1],v+=Ot.t32l[ue],P+=Ot.t33l[ue]}var q=v;if(w.count1table_select=0,v>P&&(q=P,w.count1table_select=1),w.count1bits=q,w.big_values=_,_==0)return q;if(w.block_type==E.SHORT_TYPE)v=3*d.scalefac_band.s[3],v>w.big_values&&(v=w.big_values),P=w.big_values;else if(w.block_type==E.NORM_TYPE){if(v=w.region0_count=d.bv_scf[_-2],P=w.region1_count=d.bv_scf[_-1],P=d.scalefac_band.l[v+P+2],v=d.scalefac_band.l[v+1],P<_){var Q=new re(q);w.table_select[2]=O(u,P,_,Q),q=Q.bits}}else w.region0_count=7,w.region1_count=E.SBMAX_l-1-7-1,v=d.scalefac_band.l[8],P=_,v>P&&(v=P);if(v=Math.min(v,_),P=Math.min(P,_),0<v){var Q=new re(q);w.table_select[0]=O(u,0,v,Q),q=Q.bits}if(v<P){var Q=new re(q);w.table_select[1]=O(u,v,P,Q),q=Q.bits}if(d.use_best_huffman==2&&(w.part2_3_length=q,best_huffman_divide(d,w),q=w.part2_3_length),x!=null&&w.block_type==E.NORM_TYPE){for(var c=0;d.scalefac_band.l[c]<w.big_values;)c++;x.sfb_count1=c}return q},this.count_bits=function(d,w,x,u){var _=x.l3_enc,v=_s.IXMAX_VAL/N.IPOW20(x.global_gain);if(x.xrpow_max>v)return _s.LARGE_BITS;if(ae(w,_,N.IPOW20(x.global_gain),x,u),d.substep_shaping&2)for(var P=0,ue=x.global_gain+x.scalefac_scale,q=.634521682242439/N.IPOW20(ue),Q=0;Q<x.sfbmax;Q++){var c=x.width[Q];if(d.pseudohalf[Q]==0)P+=c;else{var p;for(p=P,P+=c;p<P;++p)_[p]=w[p]>=q?_[p]:0}}return this.noquant_count_bits(d,x,u)};function H(d,w,x,u,_,v,P){for(var ue=w.big_values,q=0;q<=22;q++)u[q]=_s.LARGE_BITS;for(var q=0;q<16;q++){var Q=d.scalefac_band.l[q+1];if(Q>=ue)break;var c=0,p=new re(c),fe=O(x,0,Q,p);c=p.bits;for(var pe=0;pe<8;pe++){var Le=d.scalefac_band.l[q+pe+2];if(Le>=ue)break;var We=c;p=new re(We);var Ve=O(x,Q,Le,p);We=p.bits,u[q+pe]>We&&(u[q+pe]=We,_[q+pe]=q,v[q+pe]=fe,P[q+pe]=Ve)}}}function i(d,w,x,u,_,v,P,ue){for(var q=w.big_values,Q=2;Q<E.SBMAX_l+1;Q++){var c=d.scalefac_band.l[Q];if(c>=q)break;var p=_[Q-2]+w.count1bits;if(x.part2_3_length<=p)break;var fe=new re(p),pe=O(u,c,q,fe);p=fe.bits,!(x.part2_3_length<=p)&&(x.assign(w),x.part2_3_length=p,x.region0_count=v[Q-2],x.region1_count=Q-2-v[Q-2],x.table_select[0]=P[Q-2],x.table_select[1]=ue[Q-2],x.table_select[2]=pe)}}this.best_huffman_divide=function(d,w){var x=new Nt,u=w.l3_enc,_=Xa(23),v=Xa(23),P=Xa(23),ue=Xa(23);if(!(w.block_type==E.SHORT_TYPE&&d.mode_gr==1)){x.assign(w),w.block_type==E.NORM_TYPE&&(H(d,w,u,_,v,P,ue),i(d,x,w,u,_,v,P,ue));var q=x.big_values;if(!(q==0||(u[q-2]|u[q-1])>1)&&(q=w.count1+2,!(q>576))){x.assign(w),x.count1=q;for(var Q=0,c=0;q>x.big_values;q-=4){var p=((u[q-4]*2+u[q-3])*2+u[q-2])*2+u[q-1];Q+=Ot.t32l[p],c+=Ot.t33l[p]}if(x.big_values=q,x.count1table_select=0,Q>c&&(Q=c,x.count1table_select=1),x.count1bits=Q,x.block_type==E.NORM_TYPE)i(d,x,w,u,_,v,P,ue);else{if(x.part2_3_length=Q,Q=d.scalefac_band.l[8],Q>q&&(Q=q),Q>0){var fe=new re(x.part2_3_length);x.table_select[0]=O(u,0,Q,fe),x.part2_3_length=fe.bits}if(q>Q){var fe=new re(x.part2_3_length);x.table_select[1]=O(u,Q,q,fe),x.part2_3_length=fe.bits}w.part2_3_length>x.part2_3_length&&w.assign(x)}}}};var z=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],G=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],j=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],h=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];kl.slen1_tab=j,kl.slen2_tab=h;function R(d,w){for(var x,u=w.tt[1][d],_=w.tt[0][d],v=0;v<Ot.scfsi_band.length-1;v++){for(x=Ot.scfsi_band[v];x<Ot.scfsi_band[v+1]&&!(_.scalefac[x]!=u.scalefac[x]&&u.scalefac[x]>=0);x++);if(x==Ot.scfsi_band[v+1]){for(x=Ot.scfsi_band[v];x<Ot.scfsi_band[v+1];x++)u.scalefac[x]=-1;w.scfsi[d][v]=1}}var P=0,ue=0;for(x=0;x<11;x++)u.scalefac[x]!=-1&&(ue++,P<u.scalefac[x]&&(P=u.scalefac[x]));for(var q=0,Q=0;x<E.SBPSY_l;x++)u.scalefac[x]!=-1&&(Q++,q<u.scalefac[x]&&(q=u.scalefac[x]));for(var v=0;v<16;v++)if(P<z[v]&&q<G[v]){var c=j[v]*ue+h[v]*Q;u.part2_length>c&&(u.part2_length=c,u.scalefac_compress=v)}}this.best_scalefac_store=function(d,w,x,u){var _=u.tt[w][x],v,P,ue,q,Q=0;for(ue=0,v=0;v<_.sfbmax;v++){var c=_.width[v];for(ue+=c,q=-c;q<0&&_.l3_enc[q+ue]==0;q++);q==0&&(_.scalefac[v]=Q=-2)}if(_.scalefac_scale==0&&_.preflag==0){var p=0;for(v=0;v<_.sfbmax;v++)_.scalefac[v]>0&&(p|=_.scalefac[v]);if(!(p&1)&&p!=0){for(v=0;v<_.sfbmax;v++)_.scalefac[v]>0&&(_.scalefac[v]>>=1);_.scalefac_scale=Q=1}}if(_.preflag==0&&_.block_type!=E.SHORT_TYPE&&d.mode_gr==2){for(v=11;v<E.SBPSY_l&&!(_.scalefac[v]<N.pretab[v]&&_.scalefac[v]!=-2);v++);if(v==E.SBPSY_l){for(v=11;v<E.SBPSY_l;v++)_.scalefac[v]>0&&(_.scalefac[v]-=N.pretab[v]);_.preflag=Q=1}}for(P=0;P<4;P++)u.scfsi[x][P]=0;for(d.mode_gr==2&&w==1&&u.tt[0][x].block_type!=E.SHORT_TYPE&&u.tt[1][x].block_type!=E.SHORT_TYPE&&(R(x,u),Q=0),v=0;v<_.sfbmax;v++)_.scalefac[v]==-2&&(_.scalefac[v]=0);Q!=0&&(d.mode_gr==2?this.scale_bitcount(_):this.scale_bitcount_lsf(d,_))};function I(d,w){for(var x=0;x<w;++x)if(d[x]<0)return!1;return!0}var k=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],F=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],l=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(d){var w,x,u=0,_=0,v,P=d.scalefac;if(Ol(I(P,d.sfbmax)),d.block_type==E.SHORT_TYPE)v=k,d.mixed_block_flag!=0&&(v=F);else if(v=l,d.preflag==0){for(x=11;x<E.SBPSY_l&&!(P[x]<N.pretab[x]);x++);if(x==E.SBPSY_l)for(d.preflag=1,x=11;x<E.SBPSY_l;x++)P[x]-=N.pretab[x]}for(x=0;x<d.sfbdivide;x++)u<P[x]&&(u=P[x]);for(;x<d.sfbmax;x++)_<P[x]&&(_=P[x]);for(d.part2_length=_s.LARGE_BITS,w=0;w<16;w++)u<z[w]&&_<G[w]&&d.part2_length>v[w]&&(d.part2_length=v[w],d.scalefac_compress=w);return d.part2_length==_s.LARGE_BITS};var A=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(d,w){var x,u,_,v,P,ue,q,Q,c=Xa(4),p=w.scalefac;for(w.preflag!=0?x=2:x=0,q=0;q<4;q++)c[q]=0;if(w.block_type==E.SHORT_TYPE){u=1;var fe=N.nr_of_sfb_block[x][u];for(Q=0,_=0;_<4;_++)for(v=fe[_]/3,q=0;q<v;q++,Q++)for(P=0;P<3;P++)p[Q*3+P]>c[_]&&(c[_]=p[Q*3+P])}else{u=0;var fe=N.nr_of_sfb_block[x][u];for(Q=0,_=0;_<4;_++)for(v=fe[_],q=0;q<v;q++,Q++)p[Q]>c[_]&&(c[_]=p[Q])}for(ue=!1,_=0;_<4;_++)c[_]>A[x][_]&&(ue=!0);if(!ue){var pe,Le,We,Ve;for(w.sfb_partition_table=N.nr_of_sfb_block[x][u],_=0;_<4;_++)w.slen[_]=y[c[_]];switch(pe=w.slen[0],Le=w.slen[1],We=w.slen[2],Ve=w.slen[3],x){case 0:w.scalefac_compress=(pe*5+Le<<4)+(We<<2)+Ve;break;case 1:w.scalefac_compress=400+(pe*5+Le<<2)+We;break;case 2:w.scalefac_compress=500+pe*3+Le;break;default:A_.err.printf(`intensity stereo not implemented yet
`);break}}if(!ue)for(Ol(w.sfb_partition_table!=null),w.part2_length=0,_=0;_<4;_++)w.part2_length+=w.slen[_]*w.sfb_partition_table[_];return ue};var y=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(d){for(var w=2;w<=576;w+=2){for(var x=0,u;d.scalefac_band.l[++x]<w;);for(u=de[x][0];d.scalefac_band.l[u+1]>w;)u--;for(u<0&&(u=de[x][0]),d.bv_scf[w-2]=u,u=de[x][1];d.scalefac_band.l[u+d.bv_scf[w-2]+2]>w;)u--;u<0&&(u=de[x][1]),d.bv_scf[w-1]=u}}}var Pl=kl,Fr=U.System,R_=U.Arrays,M_=U.new_byte,T_=U.new_float_n,C_=U.new_int,vn=U.assert;Wi.EQ=function(N,re){return Math.abs(N)>Math.abs(re)?Math.abs(N-re)<=Math.abs(N)*1e-6:Math.abs(N-re)<=Math.abs(re)*1e-6},Wi.NEQ=function(N,re){return!Wi.EQ(N,re)};function Wi(){var N=this,re=32773,de=null,se=null,Ae=null,ae=null;this.setModules=function(A,y,d,w){de=A,se=y,Ae=d,ae=w};var ve=null,Pe=0,$e=0,Y=0;this.getframebits=function(A){var y=A.internal_flags,d;y.bitrate_index!=0?d=Ot.bitrate_table[A.version][y.bitrate_index]:d=A.brate;var w=0|(A.version+1)*72e3*d/A.out_samplerate+y.padding;return 8*w};function ge(A){Fr.arraycopy(A.header[A.w_ptr].buf,0,ve,$e,A.sideinfo_len),$e+=A.sideinfo_len,Pe+=A.sideinfo_len*8,A.w_ptr=A.w_ptr+1&zt.MAX_HEADER_BUF-1}function B(A,y,d){for(;d>0;){var w;Y==0&&(Y=8,$e++,vn(A.header[A.w_ptr].write_timing>=Pe),A.header[A.w_ptr].write_timing==Pe&&ge(A),ve[$e]=0),w=Math.min(d,Y),d-=w,Y-=w,ve[$e]|=y>>d<<Y,Pe+=w}}function O(A,y,d){for(;d>0;){var w;Y==0&&(Y=8,$e++,ve[$e]=0),w=Math.min(d,Y),d-=w,Y-=w,ve[$e]|=y>>d<<Y,Pe+=w}}function H(A,y){var d=A.internal_flags,w;if(y>=8&&(B(d,76,8),y-=8),y>=8&&(B(d,65,8),y-=8),y>=8&&(B(d,77,8),y-=8),y>=8&&(B(d,69,8),y-=8),y>=32){var x=Ae.getLameShortVersion();if(y>=32)for(w=0;w<x.length&&y>=8;++w)y-=8,B(d,x.charAt(w),8)}for(;y>=1;y-=1)B(d,d.ancillary_flag,1),d.ancillary_flag^=A.disable_reservoir?0:1}function i(A,y,d){for(var w=A.header[A.h_ptr].ptr;d>0;){var x=Math.min(d,8-(w&7));d-=x,A.header[A.h_ptr].buf[w>>3]|=y>>d<<8-(w&7)-x,w+=x}A.header[A.h_ptr].ptr=w}function z(A,y){A<<=8;for(var d=0;d<8;d++)A<<=1,y<<=1,(y^A)&65536&&(y^=re);return y}this.CRC_writeheader=function(A,y){var d=65535;d=z(y[2]&255,d),d=z(y[3]&255,d);for(var w=6;w<A.sideinfo_len;w++)d=z(y[w]&255,d);y[4]=byte(d>>8),y[5]=byte(d&255)};function G(A,y){var d=A.internal_flags,w,x,u;if(w=d.l3_side,d.header[d.h_ptr].ptr=0,R_.fill(d.header[d.h_ptr].buf,0,d.sideinfo_len,0),A.out_samplerate<16e3?i(d,4094,12):i(d,4095,12),i(d,A.version,1),i(d,1,2),i(d,A.error_protection?0:1,1),i(d,d.bitrate_index,4),i(d,d.samplerate_index,2),i(d,d.padding,1),i(d,A.extension,1),i(d,A.mode.ordinal(),2),i(d,d.mode_ext,2),i(d,A.copyright,1),i(d,A.original,1),i(d,A.emphasis,2),A.error_protection&&i(d,0,16),A.version==1){for(vn(w.main_data_begin>=0),i(d,w.main_data_begin,9),d.channels_out==2?i(d,w.private_bits,3):i(d,w.private_bits,5),u=0;u<d.channels_out;u++){var _;for(_=0;_<4;_++)i(d,w.scfsi[u][_],1)}for(x=0;x<2;x++)for(u=0;u<d.channels_out;u++){var v=w.tt[x][u];i(d,v.part2_3_length+v.part2_length,12),i(d,v.big_values/2,9),i(d,v.global_gain,8),i(d,v.scalefac_compress,4),v.block_type!=E.NORM_TYPE?(i(d,1,1),i(d,v.block_type,2),i(d,v.mixed_block_flag,1),v.table_select[0]==14&&(v.table_select[0]=16),i(d,v.table_select[0],5),v.table_select[1]==14&&(v.table_select[1]=16),i(d,v.table_select[1],5),i(d,v.subblock_gain[0],3),i(d,v.subblock_gain[1],3),i(d,v.subblock_gain[2],3)):(i(d,0,1),v.table_select[0]==14&&(v.table_select[0]=16),i(d,v.table_select[0],5),v.table_select[1]==14&&(v.table_select[1]=16),i(d,v.table_select[1],5),v.table_select[2]==14&&(v.table_select[2]=16),i(d,v.table_select[2],5),vn(0<=v.region0_count&&v.region0_count<16),vn(0<=v.region1_count&&v.region1_count<8),i(d,v.region0_count,4),i(d,v.region1_count,3)),i(d,v.preflag,1),i(d,v.scalefac_scale,1),i(d,v.count1table_select,1)}}else for(vn(w.main_data_begin>=0),i(d,w.main_data_begin,8),i(d,w.private_bits,d.channels_out),x=0,u=0;u<d.channels_out;u++){var v=w.tt[x][u];i(d,v.part2_3_length+v.part2_length,12),i(d,v.big_values/2,9),i(d,v.global_gain,8),i(d,v.scalefac_compress,9),v.block_type!=E.NORM_TYPE?(i(d,1,1),i(d,v.block_type,2),i(d,v.mixed_block_flag,1),v.table_select[0]==14&&(v.table_select[0]=16),i(d,v.table_select[0],5),v.table_select[1]==14&&(v.table_select[1]=16),i(d,v.table_select[1],5),i(d,v.subblock_gain[0],3),i(d,v.subblock_gain[1],3),i(d,v.subblock_gain[2],3)):(i(d,0,1),v.table_select[0]==14&&(v.table_select[0]=16),i(d,v.table_select[0],5),v.table_select[1]==14&&(v.table_select[1]=16),i(d,v.table_select[1],5),v.table_select[2]==14&&(v.table_select[2]=16),i(d,v.table_select[2],5),vn(0<=v.region0_count&&v.region0_count<16),vn(0<=v.region1_count&&v.region1_count<8),i(d,v.region0_count,4),i(d,v.region1_count,3)),i(d,v.scalefac_scale,1),i(d,v.count1table_select,1)}A.error_protection&&CRC_writeheader(d,d.header[d.h_ptr].buf);{var P=d.h_ptr;vn(d.header[P].ptr==d.sideinfo_len*8),d.h_ptr=P+1&zt.MAX_HEADER_BUF-1,d.header[d.h_ptr].write_timing=d.header[P].write_timing+y,d.h_ptr==d.w_ptr&&Fr.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function j(A,y){var d=Ot.ht[y.count1table_select+32],w,x=0,u=y.big_values,_=y.big_values;for(vn(y.count1table_select<2),w=(y.count1-y.big_values)/4;w>0;--w){var v=0,P=0,ue;ue=y.l3_enc[u+0],ue!=0&&(P+=8,y.xr[_+0]<0&&v++),ue=y.l3_enc[u+1],ue!=0&&(P+=4,v*=2,y.xr[_+1]<0&&v++),ue=y.l3_enc[u+2],ue!=0&&(P+=2,v*=2,y.xr[_+2]<0&&v++),ue=y.l3_enc[u+3],ue!=0&&(P++,v*=2,y.xr[_+3]<0&&v++),u+=4,_+=4,B(A,v+d.table[P],d.hlen[P]),x+=d.hlen[P]}return x}function h(A,y,d,w,x){var u=Ot.ht[y],_=0;if(y==0)return _;for(var v=d;v<w;v+=2){var P=0,ue=0,q=u.xlen,Q=u.xlen,c=0,p=x.l3_enc[v],fe=x.l3_enc[v+1];if(p!=0&&(x.xr[v]<0&&c++,P--),y>15){if(p>14){var pe=p-15;vn(pe<=u.linmax),c|=pe<<1,ue=q,p=15}if(fe>14){var Le=fe-15;vn(Le<=u.linmax),c<<=q,c|=Le,ue+=q,fe=15}Q=16}fe!=0&&(c<<=1,x.xr[v+1]<0&&c++,P--),p=p*Q+fe,ue-=P,P+=u.hlen[p],B(A,u.table[p],P),B(A,c,ue),_+=P+ue}return _}function R(A,y){var d=3*A.scalefac_band.s[3];d>y.big_values&&(d=y.big_values);var w=h(A,y.table_select[0],0,d,y);return w+=h(A,y.table_select[1],d,y.big_values,y),w}function I(A,y){var d,w,x,u;d=y.big_values;var _=y.region0_count+1;return vn(_<A.scalefac_band.l.length),x=A.scalefac_band.l[_],_+=y.region1_count+1,vn(_<A.scalefac_band.l.length),u=A.scalefac_band.l[_],x>d&&(x=d),u>d&&(u=d),w=h(A,y.table_select[0],0,x,y),w+=h(A,y.table_select[1],x,u,y),w+=h(A,y.table_select[2],u,d,y),w}function k(A){var y,d,w,x,u=0,_=A.internal_flags,v=_.l3_side;if(A.version==1)for(y=0;y<2;y++)for(d=0;d<_.channels_out;d++){var P=v.tt[y][d],ue=Pl.slen1_tab[P.scalefac_compress],q=Pl.slen2_tab[P.scalefac_compress];for(x=0,w=0;w<P.sfbdivide;w++)P.scalefac[w]!=-1&&(B(_,P.scalefac[w],ue),x+=ue);for(;w<P.sfbmax;w++)P.scalefac[w]!=-1&&(B(_,P.scalefac[w],q),x+=q);vn(x==P.part2_length),P.block_type==E.SHORT_TYPE?x+=R(_,P):x+=I(_,P),x+=j(_,P),vn(x==P.part2_3_length+P.part2_length),u+=x}else for(y=0,d=0;d<_.channels_out;d++){var P=v.tt[y][d],Q,c,p=0;if(vn(P.sfb_partition_table!=null),x=0,w=0,c=0,P.block_type==E.SHORT_TYPE){for(;c<4;c++){var fe=P.sfb_partition_table[c]/3,pe=P.slen[c];for(Q=0;Q<fe;Q++,w++)B(_,Math.max(P.scalefac[w*3+0],0),pe),B(_,Math.max(P.scalefac[w*3+1],0),pe),B(_,Math.max(P.scalefac[w*3+2],0),pe),p+=3*pe}x+=R(_,P)}else{for(;c<4;c++){var fe=P.sfb_partition_table[c],pe=P.slen[c];for(Q=0;Q<fe;Q++,w++)B(_,Math.max(P.scalefac[w],0),pe),p+=pe}x+=I(_,P)}x+=j(_,P),vn(x==P.part2_3_length),vn(p==P.part2_length),u+=p+x}return u}function F(){this.total=0}function l(A,y){var d=A.internal_flags,w,x,u,_,v;return v=d.w_ptr,_=d.h_ptr-1,_==-1&&(_=zt.MAX_HEADER_BUF-1),w=d.header[_].write_timing-Pe,y.total=w,w>=0&&(x=1+_-v,_<v&&(x=1+_-v+zt.MAX_HEADER_BUF),w-=x*8*d.sideinfo_len),u=N.getframebits(A),w+=u,y.total+=u,y.total%8!=0?y.total=1+y.total/8:y.total=y.total/8,y.total+=$e+1,w<0&&Fr.err.println(`strange error flushing buffer ... 
`),w}this.flush_bitstream=function(A){var y=A.internal_flags,d,w,x=y.h_ptr-1;if(x==-1&&(x=zt.MAX_HEADER_BUF-1),d=y.l3_side,!((w=l(A,new F))<0)){if(H(A,w),vn(y.header[x].write_timing+this.getframebits(A)==Pe),y.ResvSize=0,d.main_data_begin=0,y.findReplayGain){var u=de.GetTitleGain(y.rgdata);vn(NEQ(u,Ka.GAIN_NOT_ENOUGH_SAMPLES)),y.RadioGain=Math.floor(u*10+.5)|0}y.findPeakSample&&(y.noclipGainChange=Math.ceil(Math.log10(y.PeakSample/32767)*20*10)|0,y.noclipGainChange>0&&(EQ(A.scale,1)||EQ(A.scale,0))?y.noclipScale=Math.floor(32767/y.PeakSample*100)/100:y.noclipScale=-1)}},this.add_dummy_byte=function(A,y,d){for(var w=A.internal_flags,x;d-- >0;)for(O(w,y,8),x=0;x<zt.MAX_HEADER_BUF;++x)w.header[x].write_timing+=8},this.format_bitstream=function(A){var y=A.internal_flags,d;d=y.l3_side;var w=this.getframebits(A);H(A,d.resvDrain_pre),G(A,w);var x=8*y.sideinfo_len;if(x+=k(A),H(A,d.resvDrain_post),x+=d.resvDrain_post,d.main_data_begin+=(w-x)/8,l(A,new F)!=y.ResvSize&&Fr.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),d.main_data_begin*8!=y.ResvSize&&(Fr.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*d.main_data_begin,y.ResvSize,d.resvDrain_post,d.resvDrain_pre,8*y.sideinfo_len,x-d.resvDrain_post-8*y.sideinfo_len,x,x%8,w),Fr.err.println("This is a fatal error.  It has several possible causes:"),Fr.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),Fr.err.println(" 9%%  Your system is overclocked"),Fr.err.println(" 1%%  bug in LAME encoding library"),y.ResvSize=d.main_data_begin*8),Pe>1e9){var u;for(u=0;u<zt.MAX_HEADER_BUF;++u)y.header[u].write_timing-=Pe;Pe=0}return 0},this.copy_buffer=function(A,y,d,w,x){var u=$e+1;if(u<=0)return 0;if(w!=0&&u>w)return-1;if(Fr.arraycopy(ve,0,y,d,u),$e=-1,Y=0,x!=0){var _=C_(1);if(_[0]=A.nMusicCRC,ae.updateMusicCRC(_,y,d,u),A.nMusicCRC=_[0],u>0&&(A.VBR_seek_table.nBytesWritten+=u),A.decode_on_the_fly){for(var v=T_([2,1152]),P=u,ue=-1,q;ue!=0;)if(ue=se.hip_decode1_unclipped(A.hip,y,d,P,v[0],v[1]),P=0,ue==-1&&(ue=0),ue>0){if(A.findPeakSample){for(q=0;q<ue;q++)v[0][q]>A.PeakSample?A.PeakSample=v[0][q]:-v[0][q]>A.PeakSample&&(A.PeakSample=-v[0][q]);if(A.channels_out>1)for(q=0;q<ue;q++)v[1][q]>A.PeakSample?A.PeakSample=v[1][q]:-v[1][q]>A.PeakSample&&(A.PeakSample=-v[1][q])}if(A.findReplayGain&&de.AnalyzeSamples(A.rgdata,v[0],0,v[1],0,ue,A.channels_out)==Ka.GAIN_ANALYSIS_ERROR)return-6}}}return u},this.init_bit_stream_w=function(A){ve=M_(Xt.LAME_MAXMP3BUFFER),A.h_ptr=A.w_ptr=0,A.header[A.h_ptr].write_timing=0,$e=-1,Y=0,Pe=0}}var ms=Wi,B_=U.System,Ut=U.VbrMode,Nl=U.ShortBlock,js=U.new_float,Yc=U.new_int_n,I_=U.new_short_n,vs=U.assert;function pn(){var N=this,re=128*1024;pn.V9=410,pn.V8=420,pn.V7=430,pn.V6=440,pn.V5=450,pn.V4=460,pn.V3=470,pn.V2=480,pn.V1=490,pn.V0=500,pn.R3MIX=1e3,pn.STANDARD=1001,pn.EXTREME=1002,pn.INSANE=1003,pn.STANDARD_FAST=1004,pn.EXTREME_FAST=1005,pn.MEDIUM=1006,pn.MEDIUM_FAST=1007;var de=16384+re;pn.LAME_MAXMP3BUFFER=de;var se,Ae,ae,ve,Pe,$e=new tt,Y,ge,B;this.enc=new E,this.setModules=function(c,p,fe,pe,Le,We,Ve,Ye,vt){se=c,Ae=p,ae=fe,ve=pe,Pe=Le,Y=We,ge=Ye,B=vt,this.enc.setModules(Ae,$e,ve,Y)};function O(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=js(E.SBMAX_l),this.bo_s_weight=js(E.SBMAX_s)}function H(){this.lowerlimit=0}function i(c,p){this.lowpass=p}var z=4294479419;function G(c){var p;return c.class_id=z,p=c.internal_flags=new zt,c.mode=bn.NOT_SET,c.original=1,c.in_samplerate=44100,c.num_channels=2,c.num_samples=-1,c.bWriteVbrTag=!0,c.quality=-1,c.short_blocks=null,p.subblock_gain=-1,c.lowpassfreq=0,c.highpassfreq=0,c.lowpasswidth=-1,c.highpasswidth=-1,c.VBR=Ut.vbr_off,c.VBR_q=4,c.ATHcurve=-1,c.VBR_mean_bitrate_kbps=128,c.VBR_min_bitrate_kbps=0,c.VBR_max_bitrate_kbps=0,c.VBR_hard_min=0,p.VBR_min_bitrate=1,p.VBR_max_bitrate=13,c.quant_comp=-1,c.quant_comp_short=-1,c.msfix=-1,p.resample_ratio=1,p.OldValue[0]=180,p.OldValue[1]=180,p.CurrentStep[0]=4,p.CurrentStep[1]=4,p.masking_lower=1,p.nsPsy.attackthre=-1,p.nsPsy.attackthre_s=-1,c.scale=-1,c.athaa_type=-1,c.ATHtype=-1,c.athaa_loudapprox=-1,c.athaa_sensitivity=0,c.useTemporal=null,c.interChRatio=-1,p.mf_samples_to_encode=E.ENCDELAY+E.POSTDELAY,c.encoder_padding=0,p.mf_size=E.ENCDELAY-E.MDCTDELAY,c.findReplayGain=!1,c.decode_on_the_fly=!1,p.decode_on_the_fly=!1,p.findReplayGain=!1,p.findPeakSample=!1,p.RadioGain=0,p.AudiophileGain=0,p.noclipGainChange=0,p.noclipScale=-1,c.preset=0,c.write_id3tag_automatic=!0,0}this.lame_init=function(){var c=new pt;return G(c),c.lame_allocated_gfp=1,c};function j(c){return c>1?0:c<=0?1:Math.cos(Math.PI/2*c)}this.nearestBitrateFullIndex=function(c){var p=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],fe=0,pe=0,Le=0,We=0;We=p[16],Le=16,pe=p[16],fe=16;for(var Ve=0;Ve<16;Ve++)if(Math.max(c,p[Ve+1])!=c){We=p[Ve+1],Le=Ve+1,pe=p[Ve],fe=Ve;break}return We-c>c-pe?fe:Le};function h(c,p){var fe=44100;return p>=48e3?fe=48e3:p>=44100?fe=44100:p>=32e3?fe=32e3:p>=24e3?fe=24e3:p>=22050?fe=22050:p>=16e3?fe=16e3:p>=12e3?fe=12e3:p>=11025?fe=11025:p>=8e3&&(fe=8e3),c==-1?fe:(c<=15960&&(fe=44100),c<=15250&&(fe=32e3),c<=11220&&(fe=24e3),c<=9970&&(fe=22050),c<=7230&&(fe=16e3),c<=5420&&(fe=12e3),c<=4510&&(fe=11025),c<=3970&&(fe=8e3),p<fe?p>44100?48e3:p>32e3?44100:p>24e3?32e3:p>22050?24e3:p>16e3?22050:p>12e3?16e3:p>11025?12e3:p>8e3?11025:8e3:fe)}function R(c,p){switch(c){case 44100:return p.version=1,0;case 48e3:return p.version=1,1;case 32e3:return p.version=1,2;case 22050:return p.version=0,0;case 24e3:return p.version=0,1;case 16e3:return p.version=0,2;case 11025:return p.version=0,0;case 12e3:return p.version=0,1;case 8e3:return p.version=0,2;default:return p.version=0,-1}}function I(c,p,fe){fe<16e3&&(p=2);for(var pe=Ot.bitrate_table[p][1],Le=2;Le<=14;Le++)Ot.bitrate_table[p][Le]>0&&Math.abs(Ot.bitrate_table[p][Le]-c)<Math.abs(pe-c)&&(pe=Ot.bitrate_table[p][Le]);return pe}function k(c,p,fe){fe<16e3&&(p=2);for(var pe=0;pe<=14;pe++)if(Ot.bitrate_table[p][pe]>0&&Ot.bitrate_table[p][pe]==c)return pe;return-1}function F(c,p){var fe=[new i(8,2e3),new i(16,3700),new i(24,3900),new i(32,5500),new i(40,7e3),new i(48,7500),new i(56,1e4),new i(64,11e3),new i(80,13500),new i(96,15100),new i(112,15600),new i(128,17e3),new i(160,17500),new i(192,18600),new i(224,19400),new i(256,19700),new i(320,20500)],pe=N.nearestBitrateFullIndex(p);c.lowerlimit=fe[pe].lowpass}function l(c){var p=c.internal_flags,fe=32,pe=-1;if(p.lowpass1>0){for(var Le=999,We=0;We<=31;We++){var Ve=We/31;Ve>=p.lowpass2&&(fe=Math.min(fe,We)),p.lowpass1<Ve&&Ve<p.lowpass2&&(Le=Math.min(Le,We))}Le==999?p.lowpass1=(fe-.75)/31:p.lowpass1=(Le-.75)/31,p.lowpass2=fe/31}if(p.highpass2>0&&p.highpass2<.9*(.75/31)&&(p.highpass1=0,p.highpass2=0,B_.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),p.highpass2>0){for(var Ye=-1,We=0;We<=31;We++){var Ve=We/31;Ve<=p.highpass1&&(pe=Math.max(pe,We)),p.highpass1<Ve&&Ve<p.highpass2&&(Ye=Math.max(Ye,We))}p.highpass1=pe/31,Ye==-1?p.highpass2=(pe+.75)/31:p.highpass2=(Ye+.75)/31}for(var We=0;We<32;We++){var vt,st,Ve=We/31;p.highpass2>p.highpass1?vt=j((p.highpass2-Ve)/(p.highpass2-p.highpass1+1e-20)):vt=1,p.lowpass2>p.lowpass1?st=j((Ve-p.lowpass1)/(p.lowpass2-p.lowpass1+1e-20)):st=1,p.amp_filter[We]=vt*st}}function A(c){var p=c.internal_flags;switch(c.quality){default:case 9:p.psymodel=0,p.noise_shaping=0,p.noise_shaping_amp=0,p.noise_shaping_stop=0,p.use_best_huffman=0,p.full_outer_loop=0;break;case 8:c.quality=7;case 7:p.psymodel=1,p.noise_shaping=0,p.noise_shaping_amp=0,p.noise_shaping_stop=0,p.use_best_huffman=0,p.full_outer_loop=0;break;case 6:p.psymodel=1,p.noise_shaping==0&&(p.noise_shaping=1),p.noise_shaping_amp=0,p.noise_shaping_stop=0,p.subblock_gain==-1&&(p.subblock_gain=1),p.use_best_huffman=0,p.full_outer_loop=0;break;case 5:p.psymodel=1,p.noise_shaping==0&&(p.noise_shaping=1),p.noise_shaping_amp=0,p.noise_shaping_stop=0,p.subblock_gain==-1&&(p.subblock_gain=1),p.use_best_huffman=0,p.full_outer_loop=0;break;case 4:p.psymodel=1,p.noise_shaping==0&&(p.noise_shaping=1),p.noise_shaping_amp=0,p.noise_shaping_stop=0,p.subblock_gain==-1&&(p.subblock_gain=1),p.use_best_huffman=1,p.full_outer_loop=0;break;case 3:p.psymodel=1,p.noise_shaping==0&&(p.noise_shaping=1),p.noise_shaping_amp=1,p.noise_shaping_stop=1,p.subblock_gain==-1&&(p.subblock_gain=1),p.use_best_huffman=1,p.full_outer_loop=0;break;case 2:p.psymodel=1,p.noise_shaping==0&&(p.noise_shaping=1),p.substep_shaping==0&&(p.substep_shaping=2),p.noise_shaping_amp=1,p.noise_shaping_stop=1,p.subblock_gain==-1&&(p.subblock_gain=1),p.use_best_huffman=1,p.full_outer_loop=0;break;case 1:p.psymodel=1,p.noise_shaping==0&&(p.noise_shaping=1),p.substep_shaping==0&&(p.substep_shaping=2),p.noise_shaping_amp=2,p.noise_shaping_stop=1,p.subblock_gain==-1&&(p.subblock_gain=1),p.use_best_huffman=1,p.full_outer_loop=0;break;case 0:p.psymodel=1,p.noise_shaping==0&&(p.noise_shaping=1),p.substep_shaping==0&&(p.substep_shaping=2),p.noise_shaping_amp=2,p.noise_shaping_stop=1,p.subblock_gain==-1&&(p.subblock_gain=1),p.use_best_huffman=1,p.full_outer_loop=0;break}}function y(c){var p=c.internal_flags;c.frameNum=0,c.write_id3tag_automatic&&ge.id3tag_write_v2(c),p.bitrate_stereoMode_Hist=Yc([16,5]),p.bitrate_blockType_Hist=Yc([16,6]),p.PeakSample=0,c.bWriteVbrTag&&Y.InitVbrTag(c)}this.lame_init_params=function(c){var p=c.internal_flags;if(p.Class_ID=0,p.ATH==null&&(p.ATH=new v_),p.PSY==null&&(p.PSY=new O),p.rgdata==null&&(p.rgdata=new b_),p.channels_in=c.num_channels,p.channels_in==1&&(c.mode=bn.MONO),p.channels_out=c.mode==bn.MONO?1:2,p.mode_ext=E.MPG_MD_MS_LR,c.mode==bn.MONO&&(c.force_ms=!1),c.VBR==Ut.vbr_off&&c.VBR_mean_bitrate_kbps!=128&&c.brate==0&&(c.brate=c.VBR_mean_bitrate_kbps),c.VBR==Ut.vbr_off||c.VBR==Ut.vbr_mtrh||c.VBR==Ut.vbr_mt||(c.free_format=!1),c.VBR==Ut.vbr_off&&c.brate==0&&ms.EQ(c.compression_ratio,0)&&(c.compression_ratio=11.025),c.VBR==Ut.vbr_off&&c.compression_ratio>0&&(c.out_samplerate==0&&(c.out_samplerate=map2MP3Frequency(int(.97*c.in_samplerate))),c.brate=0|c.out_samplerate*16*p.channels_out/(1e3*c.compression_ratio),p.samplerate_index=R(c.out_samplerate,c),c.free_format||(c.brate=I(c.brate,c.version,c.out_samplerate))),c.out_samplerate!=0&&(c.out_samplerate<16e3?(c.VBR_mean_bitrate_kbps=Math.max(c.VBR_mean_bitrate_kbps,8),c.VBR_mean_bitrate_kbps=Math.min(c.VBR_mean_bitrate_kbps,64)):c.out_samplerate<32e3?(c.VBR_mean_bitrate_kbps=Math.max(c.VBR_mean_bitrate_kbps,8),c.VBR_mean_bitrate_kbps=Math.min(c.VBR_mean_bitrate_kbps,160)):(c.VBR_mean_bitrate_kbps=Math.max(c.VBR_mean_bitrate_kbps,32),c.VBR_mean_bitrate_kbps=Math.min(c.VBR_mean_bitrate_kbps,320))),c.lowpassfreq==0){var fe=16e3;switch(c.VBR){case Ut.vbr_off:{var pe=new H;F(pe,c.brate),fe=pe.lowerlimit;break}case Ut.vbr_abr:{var pe=new H;F(pe,c.VBR_mean_bitrate_kbps),fe=pe.lowerlimit;break}case Ut.vbr_rh:{var Le=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=c.VBR_q&&c.VBR_q<=9){var We=Le[c.VBR_q],Ve=Le[c.VBR_q+1],Ye=c.VBR_q_frac;fe=linear_int(We,Ve,Ye)}else fe=19500;break}default:{var Le=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=c.VBR_q&&c.VBR_q<=9){var We=Le[c.VBR_q],Ve=Le[c.VBR_q+1],Ye=c.VBR_q_frac;fe=linear_int(We,Ve,Ye)}else fe=19500}}c.mode==bn.MONO&&(c.VBR==Ut.vbr_off||c.VBR==Ut.vbr_abr)&&(fe*=1.5),c.lowpassfreq=fe|0}if(c.out_samplerate==0&&(2*c.lowpassfreq>c.in_samplerate&&(c.lowpassfreq=c.in_samplerate/2),c.out_samplerate=h(c.lowpassfreq|0,c.in_samplerate)),c.lowpassfreq=Math.min(20500,c.lowpassfreq),c.lowpassfreq=Math.min(c.out_samplerate/2,c.lowpassfreq),c.VBR==Ut.vbr_off&&(c.compression_ratio=c.out_samplerate*16*p.channels_out/(1e3*c.brate)),c.VBR==Ut.vbr_abr&&(c.compression_ratio=c.out_samplerate*16*p.channels_out/(1e3*c.VBR_mean_bitrate_kbps)),c.bWriteVbrTag||(c.findReplayGain=!1,c.decode_on_the_fly=!1,p.findPeakSample=!1),p.findReplayGain=c.findReplayGain,p.decode_on_the_fly=c.decode_on_the_fly,p.decode_on_the_fly&&(p.findPeakSample=!0),p.findReplayGain&&se.InitGainAnalysis(p.rgdata,c.out_samplerate)==Ka.INIT_GAIN_ANALYSIS_ERROR)return c.internal_flags=null,-6;switch(p.decode_on_the_fly&&!c.decode_only&&(p.hip!=null&&B.hip_decode_exit(p.hip),p.hip=B.hip_decode_init()),p.mode_gr=c.out_samplerate<=24e3?1:2,c.framesize=576*p.mode_gr,c.encoder_delay=E.ENCDELAY,p.resample_ratio=c.in_samplerate/c.out_samplerate,c.VBR){case Ut.vbr_mt:case Ut.vbr_rh:case Ut.vbr_mtrh:{var vt=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];c.compression_ratio=vt[c.VBR_q]}break;case Ut.vbr_abr:c.compression_ratio=c.out_samplerate*16*p.channels_out/(1e3*c.VBR_mean_bitrate_kbps);break;default:c.compression_ratio=c.out_samplerate*16*p.channels_out/(1e3*c.brate);break}if(c.mode==bn.NOT_SET&&(c.mode=bn.JOINT_STEREO),c.highpassfreq>0?(p.highpass1=2*c.highpassfreq,c.highpasswidth>=0?p.highpass2=2*(c.highpassfreq+c.highpasswidth):p.highpass2=1*2*c.highpassfreq,p.highpass1/=c.out_samplerate,p.highpass2/=c.out_samplerate):(p.highpass1=0,p.highpass2=0),c.lowpassfreq>0?(p.lowpass2=2*c.lowpassfreq,c.lowpasswidth>=0?(p.lowpass1=2*(c.lowpassfreq-c.lowpasswidth),p.lowpass1<0&&(p.lowpass1=0)):p.lowpass1=1*2*c.lowpassfreq,p.lowpass1/=c.out_samplerate,p.lowpass2/=c.out_samplerate):(p.lowpass1=0,p.lowpass2=0),l(c),p.samplerate_index=R(c.out_samplerate,c),p.samplerate_index<0)return c.internal_flags=null,-1;if(c.VBR==Ut.vbr_off){if(c.free_format)p.bitrate_index=0;else if(c.brate=I(c.brate,c.version,c.out_samplerate),p.bitrate_index=k(c.brate,c.version,c.out_samplerate),p.bitrate_index<=0)return c.internal_flags=null,-1}else p.bitrate_index=1;c.analysis&&(c.bWriteVbrTag=!1),p.pinfo!=null&&(c.bWriteVbrTag=!1),Ae.init_bit_stream_w(p);for(var st=p.samplerate_index+3*c.version+6*(c.out_samplerate<16e3?1:0),qe=0;qe<E.SBMAX_l+1;qe++)p.scalefac_band.l[qe]=ve.sfBandIndex[st].l[qe];for(var qe=0;qe<E.PSFB21+1;qe++){var Ft=(p.scalefac_band.l[22]-p.scalefac_band.l[21])/E.PSFB21,yn=p.scalefac_band.l[21]+qe*Ft;p.scalefac_band.psfb21[qe]=yn}p.scalefac_band.psfb21[E.PSFB21]=576;for(var qe=0;qe<E.SBMAX_s+1;qe++)p.scalefac_band.s[qe]=ve.sfBandIndex[st].s[qe];for(var qe=0;qe<E.PSFB12+1;qe++){var Ft=(p.scalefac_band.s[13]-p.scalefac_band.s[12])/E.PSFB12,yn=p.scalefac_band.s[12]+qe*Ft;p.scalefac_band.psfb12[qe]=yn}p.scalefac_band.psfb12[E.PSFB12]=192,c.version==1?p.sideinfo_len=p.channels_out==1?21:36:p.sideinfo_len=p.channels_out==1?13:21,c.error_protection&&(p.sideinfo_len+=2),y(c),p.Class_ID=z;{var It;for(It=0;It<19;It++)p.nsPsy.pefirbuf[It]=700*p.mode_gr*p.channels_out;c.ATHtype==-1&&(c.ATHtype=4)}switch(vs(c.VBR_q<=9),vs(c.VBR_q>=0),c.VBR){case Ut.vbr_mt:c.VBR=Ut.vbr_mtrh;case Ut.vbr_mtrh:{c.useTemporal==null&&(c.useTemporal=!1),ae.apply_preset(c,500-c.VBR_q*10,0),c.quality<0&&(c.quality=LAME_DEFAULT_QUALITY),c.quality<5&&(c.quality=0),c.quality>5&&(c.quality=5),p.PSY.mask_adjust=c.maskingadjust,p.PSY.mask_adjust_short=c.maskingadjust_short,c.experimentalY?p.sfb21_extra=!1:p.sfb21_extra=c.out_samplerate>44e3,p.iteration_loop=new VBRNewIterationLoop(Pe);break}case Ut.vbr_rh:{ae.apply_preset(c,500-c.VBR_q*10,0),p.PSY.mask_adjust=c.maskingadjust,p.PSY.mask_adjust_short=c.maskingadjust_short,c.experimentalY?p.sfb21_extra=!1:p.sfb21_extra=c.out_samplerate>44e3,c.quality>6&&(c.quality=6),c.quality<0&&(c.quality=LAME_DEFAULT_QUALITY),p.iteration_loop=new VBROldIterationLoop(Pe);break}default:{var en;p.sfb21_extra=!1,c.quality<0&&(c.quality=LAME_DEFAULT_QUALITY),en=c.VBR,en==Ut.vbr_off&&(c.VBR_mean_bitrate_kbps=c.brate),ae.apply_preset(c,c.VBR_mean_bitrate_kbps,0),c.VBR=en,p.PSY.mask_adjust=c.maskingadjust,p.PSY.mask_adjust_short=c.maskingadjust_short,en==Ut.vbr_off?p.iteration_loop=new S_(Pe):p.iteration_loop=new ABRIterationLoop(Pe);break}}if(vs(c.scale>=0),c.VBR!=Ut.vbr_off){if(p.VBR_min_bitrate=1,p.VBR_max_bitrate=14,c.out_samplerate<16e3&&(p.VBR_max_bitrate=8),c.VBR_min_bitrate_kbps!=0&&(c.VBR_min_bitrate_kbps=I(c.VBR_min_bitrate_kbps,c.version,c.out_samplerate),p.VBR_min_bitrate=k(c.VBR_min_bitrate_kbps,c.version,c.out_samplerate),p.VBR_min_bitrate<0)||c.VBR_max_bitrate_kbps!=0&&(c.VBR_max_bitrate_kbps=I(c.VBR_max_bitrate_kbps,c.version,c.out_samplerate),p.VBR_max_bitrate=k(c.VBR_max_bitrate_kbps,c.version,c.out_samplerate),p.VBR_max_bitrate<0))return-1;c.VBR_min_bitrate_kbps=Ot.bitrate_table[c.version][p.VBR_min_bitrate],c.VBR_max_bitrate_kbps=Ot.bitrate_table[c.version][p.VBR_max_bitrate],c.VBR_mean_bitrate_kbps=Math.min(Ot.bitrate_table[c.version][p.VBR_max_bitrate],c.VBR_mean_bitrate_kbps),c.VBR_mean_bitrate_kbps=Math.max(Ot.bitrate_table[c.version][p.VBR_min_bitrate],c.VBR_mean_bitrate_kbps)}return c.tune&&(p.PSY.mask_adjust+=c.tune_value_a,p.PSY.mask_adjust_short+=c.tune_value_a),A(c),vs(c.scale>=0),c.athaa_type<0?p.ATH.useAdjust=3:p.ATH.useAdjust=c.athaa_type,p.ATH.aaSensitivityP=Math.pow(10,c.athaa_sensitivity/-10),c.short_blocks==null&&(c.short_blocks=Nl.short_block_allowed),c.short_blocks==Nl.short_block_allowed&&(c.mode==bn.JOINT_STEREO||c.mode==bn.STEREO)&&(c.short_blocks=Nl.short_block_coupled),c.quant_comp<0&&(c.quant_comp=1),c.quant_comp_short<0&&(c.quant_comp_short=0),c.msfix<0&&(c.msfix=0),c.exp_nspsytune=c.exp_nspsytune|1,c.internal_flags.nsPsy.attackthre<0&&(c.internal_flags.nsPsy.attackthre=tt.NSATTACKTHRE),c.internal_flags.nsPsy.attackthre_s<0&&(c.internal_flags.nsPsy.attackthre_s=tt.NSATTACKTHRE_S),vs(c.scale>=0),c.scale<0&&(c.scale=1),c.ATHtype<0&&(c.ATHtype=4),c.ATHcurve<0&&(c.ATHcurve=4),c.athaa_loudapprox<0&&(c.athaa_loudapprox=2),c.interChRatio<0&&(c.interChRatio=0),c.useTemporal==null&&(c.useTemporal=!0),p.slot_lag=p.frac_SpF=0,c.VBR==Ut.vbr_off&&(p.slot_lag=p.frac_SpF=(c.version+1)*72e3*c.brate%c.out_samplerate|0),ve.iteration_init(c),$e.psymodel_init(c),vs(c.scale>=0),0};function d(c,p){(c.in_buffer_0==null||c.in_buffer_nsamples<p)&&(c.in_buffer_0=js(p),c.in_buffer_1=js(p),c.in_buffer_nsamples=p)}this.lame_encode_flush=function(c,p,fe,pe){var Le=c.internal_flags,We=I_([2,1152]),Ve=0,Ye,vt,st,qe,Ft=Le.mf_samples_to_encode-E.POSTDELAY,yn=w(c);if(Le.mf_samples_to_encode<1)return 0;for(Ye=0,c.in_samplerate!=c.out_samplerate&&(Ft+=16*c.out_samplerate/c.in_samplerate),st=c.framesize-Ft%c.framesize,st<576&&(st+=c.framesize),c.encoder_padding=st,qe=(Ft+st)/c.framesize;qe>0&&Ve>=0;){var It=yn-Le.mf_size,en=c.frameNum;It*=c.in_samplerate,It/=c.out_samplerate,It>1152&&(It=1152),It<1&&(It=1),vt=pe-Ye,pe==0&&(vt=0),Ve=this.lame_encode_buffer(c,We[0],We[1],It,p,fe,vt),fe+=Ve,Ye+=Ve,qe-=en!=c.frameNum?1:0}if(Le.mf_samples_to_encode=0,Ve<0||(vt=pe-Ye,pe==0&&(vt=0),Ae.flush_bitstream(c),Ve=Ae.copy_buffer(Le,p,fe,vt,1),Ve<0))return Ve;if(fe+=Ve,Ye+=Ve,vt=pe-Ye,pe==0&&(vt=0),c.write_id3tag_automatic){if(ge.id3tag_write_v1(c),Ve=Ae.copy_buffer(Le,p,fe,vt,0),Ve<0)return Ve;Ye+=Ve}return Ye},this.lame_encode_buffer=function(c,p,fe,pe,Le,We,Ve){var Ye=c.internal_flags,vt=[null,null];if(Ye.Class_ID!=z)return-3;if(pe==0)return 0;d(Ye,pe),vt[0]=Ye.in_buffer_0,vt[1]=Ye.in_buffer_1;for(var st=0;st<pe;st++)vt[0][st]=p[st],Ye.channels_in>1&&(vt[1][st]=fe[st]);return x(c,vt[0],vt[1],pe,Le,We,Ve)};function w(c){var p=E.BLKSIZE+c.framesize-E.FFTOFFSET;return p=Math.max(p,512+c.framesize-32),p}function x(c,p,fe,pe,Le,We,Ve){var Ye=c.internal_flags,vt=0,st,qe,Ft,yn,It,en=[null,null],tn=[null,null];if(Ye.Class_ID!=z)return-3;if(pe==0)return 0;if(It=Ae.copy_buffer(Ye,Le,We,Ve,0),It<0)return It;if(We+=It,vt+=It,tn[0]=p,tn[1]=fe,ms.NEQ(c.scale,0)&&ms.NEQ(c.scale,1))for(qe=0;qe<pe;++qe)tn[0][qe]*=c.scale,Ye.channels_out==2&&(tn[1][qe]*=c.scale);if(ms.NEQ(c.scale_left,0)&&ms.NEQ(c.scale_left,1))for(qe=0;qe<pe;++qe)tn[0][qe]*=c.scale_left;if(ms.NEQ(c.scale_right,0)&&ms.NEQ(c.scale_right,1))for(qe=0;qe<pe;++qe)tn[1][qe]*=c.scale_right;if(c.num_channels==2&&Ye.channels_out==1)for(qe=0;qe<pe;++qe)tn[0][qe]=.5*(tn[0][qe]+tn[1][qe]),tn[1][qe]=0;yn=w(c),en[0]=Ye.mfbuf[0],en[1]=Ye.mfbuf[1];for(var un=0;pe>0;){var En=[null,null],Vr=0,yr=0;En[0]=tn[0],En[1]=tn[1];var Un=new _;if(Q(c,en,En,un,pe,Un),Vr=Un.n_in,yr=Un.n_out,Ye.findReplayGain&&!Ye.decode_on_the_fly&&se.AnalyzeSamples(Ye.rgdata,en[0],Ye.mf_size,en[1],Ye.mf_size,yr,Ye.channels_out)==Ka.GAIN_ANALYSIS_ERROR)return-6;if(pe-=Vr,un+=Vr,Ye.channels_out==2,Ye.mf_size+=yr,vs(Ye.mf_size<=zt.MFSIZE),Ye.mf_samples_to_encode<1&&(Ye.mf_samples_to_encode=E.ENCDELAY+E.POSTDELAY),Ye.mf_samples_to_encode+=yr,Ye.mf_size>=yn){var Er=Ve-vt;if(Ve==0&&(Er=0),st=u(c,en[0],en[1],Le,We,Er),st<0)return st;for(We+=st,vt+=st,Ye.mf_size-=c.framesize,Ye.mf_samples_to_encode-=c.framesize,Ft=0;Ft<Ye.channels_out;Ft++)for(qe=0;qe<Ye.mf_size;qe++)en[Ft][qe]=en[Ft][qe+c.framesize]}}return vt}function u(c,p,fe,pe,Le,We){var Ve=N.enc.lame_encode_mp3_frame(c,p,fe,pe,Le,We);return c.frameNum++,Ve}function _(){this.n_in=0,this.n_out=0}function v(){this.num_used=0}function P(c,p){return p!=0?P(p,c%p):c}function ue(c,p,fe){var pe=Math.PI*p;c/=fe,c<0&&(c=0),c>1&&(c=1);var Le=c-.5,We=.42-.5*Math.cos(2*c*Math.PI)+.08*Math.cos(4*c*Math.PI);return Math.abs(Le)<1e-9?pe/Math.PI:We*Math.sin(fe*pe*Le)/(Math.PI*fe*Le)}function q(c,p,fe,pe,Le,We,Ve,Ye,vt){var st=c.internal_flags,qe,Ft=0,yn,It=c.out_samplerate/P(c.out_samplerate,c.in_samplerate);It>zt.BPC&&(It=zt.BPC);var en=Math.abs(st.resample_ratio-Math.floor(.5+st.resample_ratio))<1e-4?1:0,tn=1/st.resample_ratio;tn>1&&(tn=1);var un=31;un%2==0&&--un,un+=en;var En=un+1;if(st.fill_buffer_resample_init==0){for(st.inbuf_old[0]=js(En),st.inbuf_old[1]=js(En),qe=0;qe<=2*It;++qe)st.blackfilt[qe]=js(En);for(st.itime[0]=0,st.itime[1]=0,Ft=0;Ft<=2*It;Ft++){var Vr=0,yr=(Ft-It)/(2*It);for(qe=0;qe<=un;qe++)Vr+=st.blackfilt[Ft][qe]=ue(qe-yr,tn,un);for(qe=0;qe<=un;qe++)st.blackfilt[Ft][qe]/=Vr}st.fill_buffer_resample_init=1}var Un=st.inbuf_old[vt];for(yn=0;yn<pe;yn++){var Er,Xs;if(Er=yn*st.resample_ratio,Ft=0|Math.floor(Er-st.itime[vt]),un+Ft-un/2>=Ve)break;var yr=Er-st.itime[vt]-(Ft+.5*(un%2));Xs=0|Math.floor(yr*2*It+It+.5);var bs=0;for(qe=0;qe<=un;++qe){var ir=qe+Ft-un/2,qs;qs=ir<0?Un[En+ir]:Le[We+ir],bs+=qs*st.blackfilt[Xs][qe]}p[fe+yn]=bs}if(Ye.num_used=Math.min(Ve,un+Ft-un/2),st.itime[vt]+=Ye.num_used-yn*st.resample_ratio,Ye.num_used>=En)for(qe=0;qe<En;qe++)Un[qe]=Le[We+Ye.num_used+qe-En];else{var ts=En-Ye.num_used;for(qe=0;qe<ts;++qe)Un[qe]=Un[qe+Ye.num_used];for(Ft=0;qe<En;++qe,++Ft)Un[qe]=Le[We+Ft];vs(Ft==Ye.num_used)}return yn}function Q(c,p,fe,pe,Le,We){var Ve=c.internal_flags;if(Ve.resample_ratio<.9999||Ve.resample_ratio>1.0001)for(var Ye=0;Ye<Ve.channels_out;Ye++){var vt=new v;We.n_out=q(c,p[Ye],Ve.mf_size,c.framesize,fe[Ye],pe,Le,vt,Ye),We.n_in=vt.num_used}else{We.n_out=Math.min(c.framesize,Le),We.n_in=We.n_out;for(var st=0;st<We.n_out;++st)p[0][Ve.mf_size+st]=fe[0][pe+st],Ve.channels_out==2&&(p[1][Ve.mf_size+st]=fe[1][pe+st])}}}var O_=pn,$r=U.VbrMode;function k_(){function N(Y,ge,B,O,H,i,z,G,j,h,R,I,k,F,l){this.vbr_q=Y,this.quant_comp=ge,this.quant_comp_s=B,this.expY=O,this.st_lrm=H,this.st_s=i,this.masking_adj=z,this.masking_adj_short=G,this.ath_lower=j,this.ath_curve=h,this.ath_sensitivity=R,this.interch=I,this.safejoint=k,this.sfb21mod=F,this.msfix=l}function re(Y,ge,B,O,H,i,z,G,j,h,R,I,k,F){this.quant_comp=ge,this.quant_comp_s=B,this.safejoint=O,this.nsmsfix=H,this.st_lrm=i,this.st_s=z,this.nsbass=G,this.scale=j,this.masking_adj=h,this.ath_lower=R,this.ath_curve=I,this.interch=k,this.sfscale=F}var de;this.setModules=function(Y){de=Y};var se=[new N(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new N(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new N(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new N(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new N(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new N(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new N(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new N(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new N(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new N(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new N(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],Ae=[new N(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new N(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new N(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new N(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new N(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new N(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new N(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new N(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new N(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new N(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new N(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function ae(Y,ge,B){var O=Y.VBR==$r.vbr_rh?se:Ae,H=Y.VBR_q_frac,i=O[ge],z=O[ge+1],G=i;i.st_lrm=i.st_lrm+H*(z.st_lrm-i.st_lrm),i.st_s=i.st_s+H*(z.st_s-i.st_s),i.masking_adj=i.masking_adj+H*(z.masking_adj-i.masking_adj),i.masking_adj_short=i.masking_adj_short+H*(z.masking_adj_short-i.masking_adj_short),i.ath_lower=i.ath_lower+H*(z.ath_lower-i.ath_lower),i.ath_curve=i.ath_curve+H*(z.ath_curve-i.ath_curve),i.ath_sensitivity=i.ath_sensitivity+H*(z.ath_sensitivity-i.ath_sensitivity),i.interch=i.interch+H*(z.interch-i.interch),i.msfix=i.msfix+H*(z.msfix-i.msfix),$e(Y,G.vbr_q),B!=0?Y.quant_comp=G.quant_comp:Math.abs(Y.quant_comp- -1)>0||(Y.quant_comp=G.quant_comp),B!=0?Y.quant_comp_short=G.quant_comp_s:Math.abs(Y.quant_comp_short- -1)>0||(Y.quant_comp_short=G.quant_comp_s),G.expY!=0&&(Y.experimentalY=G.expY!=0),B!=0?Y.internal_flags.nsPsy.attackthre=G.st_lrm:Math.abs(Y.internal_flags.nsPsy.attackthre- -1)>0||(Y.internal_flags.nsPsy.attackthre=G.st_lrm),B!=0?Y.internal_flags.nsPsy.attackthre_s=G.st_s:Math.abs(Y.internal_flags.nsPsy.attackthre_s- -1)>0||(Y.internal_flags.nsPsy.attackthre_s=G.st_s),B!=0?Y.maskingadjust=G.masking_adj:Math.abs(Y.maskingadjust-0)>0||(Y.maskingadjust=G.masking_adj),B!=0?Y.maskingadjust_short=G.masking_adj_short:Math.abs(Y.maskingadjust_short-0)>0||(Y.maskingadjust_short=G.masking_adj_short),B!=0?Y.ATHlower=-G.ath_lower/10:Math.abs(-Y.ATHlower*10-0)>0||(Y.ATHlower=-G.ath_lower/10),B!=0?Y.ATHcurve=G.ath_curve:Math.abs(Y.ATHcurve- -1)>0||(Y.ATHcurve=G.ath_curve),B!=0?Y.athaa_sensitivity=G.ath_sensitivity:Math.abs(Y.athaa_sensitivity- -1)>0||(Y.athaa_sensitivity=G.ath_sensitivity),G.interch>0&&(B!=0?Y.interChRatio=G.interch:Math.abs(Y.interChRatio- -1)>0||(Y.interChRatio=G.interch)),G.safejoint>0&&(Y.exp_nspsytune=Y.exp_nspsytune|G.safejoint),G.sfb21mod>0&&(Y.exp_nspsytune=Y.exp_nspsytune|G.sfb21mod<<20),B!=0?Y.msfix=G.msfix:Math.abs(Y.msfix- -1)>0||(Y.msfix=G.msfix),B==0&&(Y.VBR_q=ge,Y.VBR_q_frac=H)}var ve=[new re(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new re(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new re(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new re(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new re(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new re(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new re(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new re(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new re(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new re(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new re(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new re(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new re(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new re(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new re(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new re(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new re(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function Pe(Y,ge,B){var O=ge,H=de.nearestBitrateFullIndex(ge);if(Y.VBR=$r.vbr_abr,Y.VBR_mean_bitrate_kbps=O,Y.VBR_mean_bitrate_kbps=Math.min(Y.VBR_mean_bitrate_kbps,320),Y.VBR_mean_bitrate_kbps=Math.max(Y.VBR_mean_bitrate_kbps,8),Y.brate=Y.VBR_mean_bitrate_kbps,Y.VBR_mean_bitrate_kbps>320&&(Y.disable_reservoir=!0),ve[H].safejoint>0&&(Y.exp_nspsytune=Y.exp_nspsytune|2),ve[H].sfscale>0&&(Y.internal_flags.noise_shaping=2),Math.abs(ve[H].nsbass)>0){var i=int(ve[H].nsbass*4);i<0&&(i+=64),Y.exp_nspsytune=Y.exp_nspsytune|i<<2}return B!=0?Y.quant_comp=ve[H].quant_comp:Math.abs(Y.quant_comp- -1)>0||(Y.quant_comp=ve[H].quant_comp),B!=0?Y.quant_comp_short=ve[H].quant_comp_s:Math.abs(Y.quant_comp_short- -1)>0||(Y.quant_comp_short=ve[H].quant_comp_s),B!=0?Y.msfix=ve[H].nsmsfix:Math.abs(Y.msfix- -1)>0||(Y.msfix=ve[H].nsmsfix),B!=0?Y.internal_flags.nsPsy.attackthre=ve[H].st_lrm:Math.abs(Y.internal_flags.nsPsy.attackthre- -1)>0||(Y.internal_flags.nsPsy.attackthre=ve[H].st_lrm),B!=0?Y.internal_flags.nsPsy.attackthre_s=ve[H].st_s:Math.abs(Y.internal_flags.nsPsy.attackthre_s- -1)>0||(Y.internal_flags.nsPsy.attackthre_s=ve[H].st_s),B!=0?Y.scale=ve[H].scale:Math.abs(Y.scale- -1)>0||(Y.scale=ve[H].scale),B!=0?Y.maskingadjust=ve[H].masking_adj:Math.abs(Y.maskingadjust-0)>0||(Y.maskingadjust=ve[H].masking_adj),ve[H].masking_adj>0?B!=0?Y.maskingadjust_short=ve[H].masking_adj*.9:Math.abs(Y.maskingadjust_short-0)>0||(Y.maskingadjust_short=ve[H].masking_adj*.9):B!=0?Y.maskingadjust_short=ve[H].masking_adj*1.1:Math.abs(Y.maskingadjust_short-0)>0||(Y.maskingadjust_short=ve[H].masking_adj*1.1),B!=0?Y.ATHlower=-ve[H].ath_lower/10:Math.abs(-Y.ATHlower*10-0)>0||(Y.ATHlower=-ve[H].ath_lower/10),B!=0?Y.ATHcurve=ve[H].ath_curve:Math.abs(Y.ATHcurve- -1)>0||(Y.ATHcurve=ve[H].ath_curve),B!=0?Y.interChRatio=ve[H].interch:Math.abs(Y.interChRatio- -1)>0||(Y.interChRatio=ve[H].interch),ge}this.apply_preset=function(Y,ge,B){switch(ge){case Xt.R3MIX:{ge=Xt.V3,Y.VBR=$r.vbr_mtrh;break}case Xt.MEDIUM:{ge=Xt.V4,Y.VBR=$r.vbr_rh;break}case Xt.MEDIUM_FAST:{ge=Xt.V4,Y.VBR=$r.vbr_mtrh;break}case Xt.STANDARD:{ge=Xt.V2,Y.VBR=$r.vbr_rh;break}case Xt.STANDARD_FAST:{ge=Xt.V2,Y.VBR=$r.vbr_mtrh;break}case Xt.EXTREME:{ge=Xt.V0,Y.VBR=$r.vbr_rh;break}case Xt.EXTREME_FAST:{ge=Xt.V0,Y.VBR=$r.vbr_mtrh;break}case Xt.INSANE:return ge=320,Y.preset=ge,Pe(Y,ge,B),Y.VBR=$r.vbr_off,ge}switch(Y.preset=ge,ge){case Xt.V9:return ae(Y,9,B),ge;case Xt.V8:return ae(Y,8,B),ge;case Xt.V7:return ae(Y,7,B),ge;case Xt.V6:return ae(Y,6,B),ge;case Xt.V5:return ae(Y,5,B),ge;case Xt.V4:return ae(Y,4,B),ge;case Xt.V3:return ae(Y,3,B),ge;case Xt.V2:return ae(Y,2,B),ge;case Xt.V1:return ae(Y,1,B),ge;case Xt.V0:return ae(Y,0,B),ge}return 8<=ge&&ge<=320?Pe(Y,ge,B):(Y.preset=0,ge)};function $e(Y,ge){var B=0;return 0>ge&&(B=-1,ge=0),9<ge&&(B=-1,ge=9),Y.VBR_q=ge,Y.VBR_q_frac=0,B}}var P_=k_;function N_(){this.setModules=function(N,re){}}var L_=N_;function F_(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var Ll=F_,Kc=U.new_float,$_=U.new_int;function V_(){this.global_gain=0,this.sfb_count1=0,this.step=$_(39),this.noise=Kc(39),this.noise_log=Kc(39)}var H_=V_,ps=U.System,Wc=U.VbrMode,Fl=U.Util,ha=U.Arrays,qa=U.new_float,Ua=U.assert;function D_(){var N;this.rv=null;var re;this.qupvt=null;var de,se=new L_,Ae;this.setModules=function(j,h,R,I){N=j,re=h,this.rv=h,de=R,this.qupvt=R,Ae=I,se.setModules(de,Ae)},this.ms_convert=function(j,h){for(var R=0;R<576;++R){var I=j.tt[h][0].xr[R],k=j.tt[h][1].xr[R];j.tt[h][0].xr[R]=(I+k)*(Fl.SQRT2*.5),j.tt[h][1].xr[R]=(I-k)*(Fl.SQRT2*.5)}};function ae(j,h,R,I){I=0;for(var k=0;k<=R;++k){var F=Math.abs(j.xr[k]);I+=F,h[k]=Math.sqrt(F*Math.sqrt(F)),h[k]>j.xrpow_max&&(j.xrpow_max=h[k])}return I}this.init_xrpow=function(j,h,R){var I=0,k=0|h.max_nonzero_coeff;if(h.xrpow_max=0,ha.fill(R,k,576,0),I=ae(h,R,k,I),I>1e-20){var F=0;j.substep_shaping&2&&(F=1);for(var l=0;l<h.psymax;l++)j.pseudohalf[l]=F;return!0}return ha.fill(h.l3_enc,0,576,0),!1};function ve(j,h){var R=j.ATH,I=h.xr;if(h.block_type!=E.SHORT_TYPE)for(var k=!1,F=E.PSFB21-1;F>=0&&!k;F--){var l=j.scalefac_band.psfb21[F],A=j.scalefac_band.psfb21[F+1],y=de.athAdjust(R.adjust,R.psfb21[F],R.floor);j.nsPsy.longfact[21]>1e-12&&(y*=j.nsPsy.longfact[21]);for(var d=A-1;d>=l;d--)if(Math.abs(I[d])<y)I[d]=0;else{k=!0;break}}else for(var w=0;w<3;w++)for(var k=!1,F=E.PSFB12-1;F>=0&&!k;F--){var l=j.scalefac_band.s[12]*3+(j.scalefac_band.s[13]-j.scalefac_band.s[12])*w+(j.scalefac_band.psfb12[F]-j.scalefac_band.psfb12[0]),A=l+(j.scalefac_band.psfb12[F+1]-j.scalefac_band.psfb12[F]),x=de.athAdjust(R.adjust,R.psfb12[F],R.floor);j.nsPsy.shortfact[12]>1e-12&&(x*=j.nsPsy.shortfact[12]);for(var d=A-1;d>=l;d--)if(Math.abs(I[d])<x)I[d]=0;else{k=!0;break}}}this.init_outer_loop=function(j,h){h.part2_3_length=0,h.big_values=0,h.count1=0,h.global_gain=210,h.scalefac_compress=0,h.table_select[0]=0,h.table_select[1]=0,h.table_select[2]=0,h.subblock_gain[0]=0,h.subblock_gain[1]=0,h.subblock_gain[2]=0,h.subblock_gain[3]=0,h.region0_count=0,h.region1_count=0,h.preflag=0,h.scalefac_scale=0,h.count1table_select=0,h.part2_length=0,h.sfb_lmax=E.SBPSY_l,h.sfb_smin=E.SBPSY_s,h.psy_lmax=j.sfb21_extra?E.SBMAX_l:E.SBPSY_l,h.psymax=h.psy_lmax,h.sfbmax=h.sfb_lmax,h.sfbdivide=11;for(var R=0;R<E.SBMAX_l;R++)h.width[R]=j.scalefac_band.l[R+1]-j.scalefac_band.l[R],h.window[R]=3;if(h.block_type==E.SHORT_TYPE){var I=qa(576);h.sfb_smin=0,h.sfb_lmax=0,h.mixed_block_flag!=0&&(h.sfb_smin=3,h.sfb_lmax=j.mode_gr*2+4),h.psymax=h.sfb_lmax+3*((j.sfb21_extra?E.SBMAX_s:E.SBPSY_s)-h.sfb_smin),h.sfbmax=h.sfb_lmax+3*(E.SBPSY_s-h.sfb_smin),h.sfbdivide=h.sfbmax-18,h.psy_lmax=h.sfb_lmax;var k=j.scalefac_band.l[h.sfb_lmax];ps.arraycopy(h.xr,0,I,0,576);for(var R=h.sfb_smin;R<E.SBMAX_s;R++)for(var F=j.scalefac_band.s[R],l=j.scalefac_band.s[R+1],A=0;A<3;A++)for(var y=F;y<l;y++)h.xr[k++]=I[3*y+A];for(var d=h.sfb_lmax,R=h.sfb_smin;R<E.SBMAX_s;R++)h.width[d]=h.width[d+1]=h.width[d+2]=j.scalefac_band.s[R+1]-j.scalefac_band.s[R],h.window[d]=0,h.window[d+1]=1,h.window[d+2]=2,d+=3}h.count1bits=0,h.sfb_partition_table=de.nr_of_sfb_block[0][0],h.slen[0]=0,h.slen[1]=0,h.slen[2]=0,h.slen[3]=0,h.max_nonzero_coeff=575,ha.fill(h.scalefac,0),ve(j,h)};function Pe(j){this.ordinal=j}Pe.BINSEARCH_NONE=new Pe(0),Pe.BINSEARCH_UP=new Pe(1),Pe.BINSEARCH_DOWN=new Pe(2);function $e(j,h,R,I,k){var F,l=j.CurrentStep[I],A=!1,y=j.OldValue[I],d=Pe.BINSEARCH_NONE;for(h.global_gain=y,R-=h.part2_length;;){var w;if(F=Ae.count_bits(j,k,h,null),l==1||F==R)break;F>R?(d==Pe.BINSEARCH_DOWN&&(A=!0),A&&(l/=2),d=Pe.BINSEARCH_UP,w=l):(d==Pe.BINSEARCH_UP&&(A=!0),A&&(l/=2),d=Pe.BINSEARCH_DOWN,w=-l),h.global_gain+=w,h.global_gain<0&&(h.global_gain=0,A=!0),h.global_gain>255&&(h.global_gain=255,A=!0)}for(Ua(h.global_gain>=0),Ua(h.global_gain<256);F>R&&h.global_gain<255;)h.global_gain++,F=Ae.count_bits(j,k,h,null);return j.CurrentStep[I]=y-h.global_gain>=4?4:2,j.OldValue[I]=h.global_gain,h.part2_3_length=F,F}this.trancate_smallspectrums=function(j,h,R,I){var k=qa(ot.SFBMAX);if(!(!(j.substep_shaping&4)&&h.block_type==E.SHORT_TYPE||j.substep_shaping&128)){de.calc_noise(h,R,k,new Ll,null);for(var l=0;l<576;l++){var F=0;h.l3_enc[l]!=0&&(F=Math.abs(h.xr[l])),I[l]=F}var l=0,A=8;h.block_type==E.SHORT_TYPE&&(A=6);do{var y,d,w,x,u=h.width[A];if(l+=u,!(k[A]>=1)&&(ha.sort(I,l-u,u),!es.EQ(I[l-1],0))){y=(1-k[A])*R[A],d=0,x=0;do{var _;for(w=1;x+w<u&&!es.NEQ(I[x+l-u],I[x+l+w-u]);w++);if(_=I[x+l-u]*I[x+l-u]*w,y<_){x!=0&&(d=I[x+l-u-1]);break}y-=_,x+=w}while(x<u);if(!es.EQ(d,0))do Math.abs(h.xr[l-u])<=d&&(h.l3_enc[l-u]=0);while(--u>0)}}while(++A<h.psymax);h.part2_3_length=Ae.noquant_count_bits(j,h,null)}};function Y(j){for(var h=0;h<j.sfbmax;h++)if(j.scalefac[h]+j.subblock_gain[j.window[h]]==0)return!1;return!0}function ge(j){return Fl.FAST_LOG10(.368+.632*j*j*j)}function B(j,h){for(var R=1e-37,I=0;I<h.psymax;I++)R+=ge(j[I]);return Math.max(1e-20,R)}function O(j,h,R,I,k){var F;switch(j){default:case 9:{h.over_count>0?(F=R.over_SSD<=h.over_SSD,R.over_SSD==h.over_SSD&&(F=R.bits<h.bits)):F=R.max_noise<0&&R.max_noise*10+R.bits<=h.max_noise*10+h.bits;break}case 0:F=R.over_count<h.over_count||R.over_count==h.over_count&&R.over_noise<h.over_noise||R.over_count==h.over_count&&es.EQ(R.over_noise,h.over_noise)&&R.tot_noise<h.tot_noise;break;case 8:R.max_noise=B(k,I);case 1:F=R.max_noise<h.max_noise;break;case 2:F=R.tot_noise<h.tot_noise;break;case 3:F=R.tot_noise<h.tot_noise&&R.max_noise<h.max_noise;break;case 4:F=R.max_noise<=0&&h.max_noise>.2||R.max_noise<=0&&h.max_noise<0&&h.max_noise>R.max_noise-.2&&R.tot_noise<h.tot_noise||R.max_noise<=0&&h.max_noise>0&&h.max_noise>R.max_noise-.2&&R.tot_noise<h.tot_noise+h.over_noise||R.max_noise>0&&h.max_noise>-.05&&h.max_noise>R.max_noise-.1&&R.tot_noise+R.over_noise<h.tot_noise+h.over_noise||R.max_noise>0&&h.max_noise>-.1&&h.max_noise>R.max_noise-.15&&R.tot_noise+R.over_noise+R.over_noise<h.tot_noise+h.over_noise+h.over_noise;break;case 5:F=R.over_noise<h.over_noise||es.EQ(R.over_noise,h.over_noise)&&R.tot_noise<h.tot_noise;break;case 6:F=R.over_noise<h.over_noise||es.EQ(R.over_noise,h.over_noise)&&(R.max_noise<h.max_noise||es.EQ(R.max_noise,h.max_noise)&&R.tot_noise<=h.tot_noise);break;case 7:F=R.over_count<h.over_count||R.over_noise<h.over_noise;break}return h.over_count==0&&(F=F&&R.bits<h.bits),F}function H(j,h,R,I,k){var F=j.internal_flags,l;h.scalefac_scale==0?l=1.2968395546510096:l=1.6817928305074292;for(var A=0,y=0;y<h.sfbmax;y++)A<R[y]&&(A=R[y]);var d=F.noise_shaping_amp;switch(d==3&&(k?d=2:d=1),d){case 2:break;case 1:A>1?A=Math.pow(A,.5):A*=.95;break;case 0:default:A>1?A=1:A*=.95;break}for(var w=0,y=0;y<h.sfbmax;y++){var x=h.width[y],u;if(w+=x,!(R[y]<A)){if(F.substep_shaping&2&&(F.pseudohalf[y]=F.pseudohalf[y]==0?1:0,F.pseudohalf[y]==0&&F.noise_shaping_amp==2))return;for(h.scalefac[y]++,u=-x;u<0;u++)I[w+u]*=l,I[w+u]>h.xrpow_max&&(h.xrpow_max=I[w+u]);if(F.noise_shaping_amp==2)return}}}function i(j,h){for(var R=1.2968395546510096,I=0,k=0;k<j.sfbmax;k++){var F=j.width[k],l=j.scalefac[k];if(j.preflag!=0&&(l+=de.pretab[k]),I+=F,l&1){l++;for(var A=-F;A<0;A++)h[I+A]*=R,h[I+A]>j.xrpow_max&&(j.xrpow_max=h[I+A])}j.scalefac[k]=l>>1}j.preflag=0,j.scalefac_scale=1}function z(j,h,R){var I,k=h.scalefac;for(I=0;I<h.sfb_lmax;I++)if(k[I]>=16)return!0;for(var F=0;F<3;F++){var l=0,A=0;for(I=h.sfb_lmax+F;I<h.sfbdivide;I+=3)l<k[I]&&(l=k[I]);for(;I<h.sfbmax;I+=3)A<k[I]&&(A=k[I]);if(!(l<16&&A<8)){if(h.subblock_gain[F]>=7)return!0;h.subblock_gain[F]++;var y=j.scalefac_band.l[h.sfb_lmax];for(I=h.sfb_lmax+F;I<h.sfbmax;I+=3){var d,w=h.width[I],x=k[I];if(x=x-(4>>h.scalefac_scale),x>=0){k[I]=x,y+=w*3;continue}k[I]=0;{var u=210+(x<<h.scalefac_scale+1);d=de.IPOW20(u)}y+=w*(F+1);for(var _=-w;_<0;_++)R[y+_]*=d,R[y+_]>h.xrpow_max&&(h.xrpow_max=R[y+_]);y+=w*(3-F-1)}{var d=de.IPOW20(202);y+=h.width[I]*(F+1);for(var _=-h.width[I];_<0;_++)R[y+_]*=d,R[y+_]>h.xrpow_max&&(h.xrpow_max=R[y+_])}}}return!1}function G(j,h,R,I,k){var F=j.internal_flags;H(j,h,R,I,k);var l=Y(h);return l?!1:(F.mode_gr==2?l=Ae.scale_bitcount(h):l=Ae.scale_bitcount_lsf(F,h),l?(F.noise_shaping>1&&(ha.fill(F.pseudohalf,0),h.scalefac_scale==0?(i(h,I),l=!1):h.block_type==E.SHORT_TYPE&&F.subblock_gain>0&&(l=z(F,h,I)||Y(h))),l||(F.mode_gr==2?l=Ae.scale_bitcount(h):l=Ae.scale_bitcount_lsf(F,h)),!l):!0)}this.outer_loop=function(j,h,R,I,k,F){var l=j.internal_flags,A=new Nt,y=qa(576),d=qa(ot.SFBMAX),w=new Ll,x,u=new H_,_=9999999,v=!1,P=!1,ue=0;if($e(l,h,F,k,I),l.noise_shaping==0)return 100;de.calc_noise(h,R,d,w,u),w.bits=h.part2_3_length,A.assign(h);var q=0;for(ps.arraycopy(I,0,y,0,576);!v;){do{var Q=new Ll,c,p=255;if(l.substep_shaping&2?c=20:c=3,l.sfb21_extra&&(d[A.sfbmax]>1||A.block_type==E.SHORT_TYPE&&(d[A.sfbmax+1]>1||d[A.sfbmax+2]>1))||!G(j,A,d,I,P))break;A.scalefac_scale!=0&&(p=254);var fe=F-A.part2_length;if(fe<=0)break;for(;(A.part2_3_length=Ae.count_bits(l,I,A,u))>fe&&A.global_gain<=p;)A.global_gain++;if(A.global_gain>p)break;if(w.over_count==0){for(;(A.part2_3_length=Ae.count_bits(l,I,A,u))>_&&A.global_gain<=p;)A.global_gain++;if(A.global_gain>p)break}if(de.calc_noise(A,R,d,Q,u),Q.bits=A.part2_3_length,h.block_type!=E.SHORT_TYPE?x=j.quant_comp:x=j.quant_comp_short,x=O(x,w,Q,A,d)?1:0,x!=0)_=h.part2_3_length,w=Q,h.assign(A),q=0,ps.arraycopy(I,0,y,0,576);else if(l.full_outer_loop==0&&(++q>c&&w.over_count==0||l.noise_shaping_amp==3&&P&&q>30||l.noise_shaping_amp==3&&P&&A.global_gain-ue>15))break}while(A.global_gain+A.scalefac_scale<255);l.noise_shaping_amp==3?P?v=!0:(A.assign(h),ps.arraycopy(y,0,I,0,576),q=0,ue=A.global_gain,P=!0):v=!0}return Ua(h.global_gain+h.scalefac_scale<=255),j.VBR==Wc.vbr_rh||j.VBR==Wc.vbr_mtrh?ps.arraycopy(y,0,I,0,576):l.substep_shaping&1&&trancate_smallspectrums(l,h,R,I),w.over_count},this.iteration_finish_one=function(j,h,R){var I=j.l3_side,k=I.tt[h][R];Ae.best_scalefac_store(j,h,R,I),j.use_best_huffman==1&&Ae.best_huffman_divide(j,k),re.ResvAdjust(j,k)},this.VBR_encode_granule=function(j,h,R,I,k,F,l){var A=j.internal_flags,y=new Nt,d=qa(576),w=l,x=l+1,u=(l+F)/2,_,v,P=0,ue=A.sfb21_extra;Ua(w<=LameInternalFlags.MAX_BITS_PER_CHANNEL),ha.fill(y.l3_enc,0);do u>w-42?A.sfb21_extra=!1:A.sfb21_extra=ue,v=outer_loop(j,h,R,I,k,u),v<=0?(P=1,x=h.part2_3_length,y.assign(h),ps.arraycopy(I,0,d,0,576),l=x-32,_=l-F,u=(l+F)/2):(F=u+32,_=l-F,u=(l+F)/2,P!=0&&(P=2,h.assign(y),ps.arraycopy(d,0,I,0,576)));while(_>12);A.sfb21_extra=ue,P==2&&ps.arraycopy(y.l3_enc,0,h.l3_enc,0,576),Ua(h.part2_3_length<=w)},this.get_framebits=function(j,h){var R=j.internal_flags;R.bitrate_index=R.VBR_min_bitrate;var I=N.getframebits(j);R.bitrate_index=1,I=N.getframebits(j);for(var k=1;k<=R.VBR_max_bitrate;k++){R.bitrate_index=k;var F=new MeanBits(I);h[k]=re.ResvFrameBegin(j,F),I=F.bits}},this.VBR_old_prepare=function(j,h,R,I,k,F,l,A,y){var d=j.internal_flags,w,x=0,u=1,_=0;d.bitrate_index=d.VBR_max_bitrate;var v=re.ResvFrameBegin(j,new MeanBits(0))/d.mode_gr;get_framebits(j,F);for(var P=0;P<d.mode_gr;P++){var ue=de.on_pe(j,h,A[P],v,P,0);d.mode_ext==E.MPG_MD_MS_LR&&(ms_convert(d.l3_side,P),de.reduce_side(A[P],R[P],v,ue));for(var q=0;q<d.channels_out;++q){var Q=d.l3_side.tt[P][q];Q.block_type!=E.SHORT_TYPE?(x=1.28/(1+Math.exp(3.5-h[P][q]/300))-.05,w=d.PSY.mask_adjust-x):(x=2.56/(1+Math.exp(3.5-h[P][q]/300))-.14,w=d.PSY.mask_adjust_short-x),d.masking_lower=Math.pow(10,w*.1),init_outer_loop(d,Q),y[P][q]=de.calc_xmin(j,I[P][q],Q,k[P][q]),y[P][q]!=0&&(u=0),l[P][q]=126,_+=A[P][q]}}for(var P=0;P<d.mode_gr;P++)for(var q=0;q<d.channels_out;q++)_>F[d.VBR_max_bitrate]&&(A[P][q]*=F[d.VBR_max_bitrate],A[P][q]/=_),l[P][q]>A[P][q]&&(l[P][q]=A[P][q]);return u},this.bitpressure_strategy=function(j,h,R,I){for(var k=0;k<j.mode_gr;k++)for(var F=0;F<j.channels_out;F++){for(var l=j.l3_side.tt[k][F],A=h[k][F],y=0,d=0;d<l.psy_lmax;d++)A[y++]*=1+.029*d*d/E.SBMAX_l/E.SBMAX_l;if(l.block_type==E.SHORT_TYPE)for(var d=l.sfb_smin;d<E.SBMAX_s;d++)A[y++]*=1+.029*d*d/E.SBMAX_s/E.SBMAX_s,A[y++]*=1+.029*d*d/E.SBMAX_s/E.SBMAX_s,A[y++]*=1+.029*d*d/E.SBMAX_s/E.SBMAX_s;I[k][F]=0|Math.max(R[k][F],.9*I[k][F])}},this.VBR_new_prepare=function(j,h,R,I,k,F){var l=j.internal_flags,A=1,y=0,d=0,w;if(j.free_format){l.bitrate_index=0;var x=new MeanBits(y);w=re.ResvFrameBegin(j,x),y=x.bits,k[0]=w}else{l.bitrate_index=l.VBR_max_bitrate;var x=new MeanBits(y);re.ResvFrameBegin(j,x),y=x.bits,get_framebits(j,k),w=k[l.VBR_max_bitrate]}for(var u=0;u<l.mode_gr;u++){de.on_pe(j,h,F[u],y,u,0),l.mode_ext==E.MPG_MD_MS_LR&&ms_convert(l.l3_side,u);for(var _=0;_<l.channels_out;++_){var v=l.l3_side.tt[u][_];l.masking_lower=Math.pow(10,l.PSY.mask_adjust*.1),init_outer_loop(l,v),de.calc_xmin(j,R[u][_],v,I[u][_])!=0&&(A=0),d+=F[u][_]}}for(var u=0;u<l.mode_gr;u++)for(var _=0;_<l.channels_out;_++)d>w&&(F[u][_]*=w,F[u][_]/=d);return A},this.calc_target_bits=function(j,h,R,I,k,F){var l=j.internal_flags,A=l.l3_side,y,d,w,x,u=0;l.bitrate_index=l.VBR_max_bitrate;var _=new MeanBits(u);for(F[0]=re.ResvFrameBegin(j,_),u=_.bits,l.bitrate_index=1,u=N.getframebits(j)-l.sideinfo_len*8,k[0]=u/(l.mode_gr*l.channels_out),u=j.VBR_mean_bitrate_kbps*j.framesize*1e3,l.substep_shaping&1&&(u*=1.09),u/=j.out_samplerate,u-=l.sideinfo_len*8,u/=l.mode_gr*l.channels_out,y=.93+.07*(11-j.compression_ratio)/(11-5.5),y<.9&&(y=.9),y>1&&(y=1),d=0;d<l.mode_gr;d++){var v=0;for(w=0;w<l.channels_out;w++){if(I[d][w]=int(y*u),h[d][w]>700){var P=int((h[d][w]-700)/1.4),ue=A.tt[d][w];I[d][w]=int(y*u),ue.block_type==E.SHORT_TYPE&&P<u/2&&(P=u/2),P>u*3/2?P=u*3/2:P<0&&(P=0),I[d][w]+=P}I[d][w]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(I[d][w]=LameInternalFlags.MAX_BITS_PER_CHANNEL),v+=I[d][w]}if(v>LameInternalFlags.MAX_BITS_PER_GRANULE)for(w=0;w<l.channels_out;++w)I[d][w]*=LameInternalFlags.MAX_BITS_PER_GRANULE,I[d][w]/=v}if(l.mode_ext==E.MPG_MD_MS_LR)for(d=0;d<l.mode_gr;d++)de.reduce_side(I[d],R[d],u*l.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(x=0,d=0;d<l.mode_gr;d++)for(w=0;w<l.channels_out;w++)I[d][w]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(I[d][w]=LameInternalFlags.MAX_BITS_PER_CHANNEL),x+=I[d][w];if(x>F[0])for(d=0;d<l.mode_gr;d++)for(w=0;w<l.channels_out;w++)I[d][w]*=F[0],I[d][w]/=x}}var j_=D_,Gc=U.assert;function X_(){var N;this.setModules=function(re){N=re},this.ResvFrameBegin=function(re,de){var se=re.internal_flags,Ae,ae=se.l3_side,ve=N.getframebits(re);de.bits=(ve-se.sideinfo_len*8)/se.mode_gr;var Pe=8*256*se.mode_gr-8;re.brate>320?Ae=8*int(re.brate*1e3/(re.out_samplerate/1152)/8+.5):(Ae=8*1440,re.strict_ISO&&(Ae=8*int(32e4/(re.out_samplerate/1152)/8+.5))),se.ResvMax=Ae-ve,se.ResvMax>Pe&&(se.ResvMax=Pe),(se.ResvMax<0||re.disable_reservoir)&&(se.ResvMax=0);var $e=de.bits*se.mode_gr+Math.min(se.ResvSize,se.ResvMax);return $e>Ae&&($e=Ae),Gc(se.ResvMax%8==0),Gc(se.ResvMax>=0),ae.resvDrain_pre=0,se.pinfo!=null&&(se.pinfo.mean_bits=de.bits/2,se.pinfo.resvsize=se.ResvSize),$e},this.ResvMaxBits=function(re,de,se,Ae){var ae=re.internal_flags,ve,Pe=ae.ResvSize,$e=ae.ResvMax;Ae!=0&&(Pe+=de),ae.substep_shaping&1&&($e*=.9),se.bits=de,Pe*10>$e*9?(ve=Pe-$e*9/10,se.bits+=ve,ae.substep_shaping|=128):(ve=0,ae.substep_shaping&=127,!re.disable_reservoir&&!(ae.substep_shaping&1)&&(se.bits-=.1*de));var Y=Pe<ae.ResvMax*6/10?Pe:ae.ResvMax*6/10;return Y-=ve,Y<0&&(Y=0),Y},this.ResvAdjust=function(re,de){re.ResvSize-=de.part2_3_length+de.part2_length},this.ResvFrameEnd=function(re,de){var se,Ae=re.l3_side;re.ResvSize+=de*re.mode_gr;var ae=0;Ae.resvDrain_post=0,Ae.resvDrain_pre=0,(se=re.ResvSize%8)!=0&&(ae+=se),se=re.ResvSize-ae-re.ResvMax,se>0&&(ae+=se);{var ve=Math.min(Ae.main_data_begin*8,ae)/8;Ae.resvDrain_pre+=8*ve,ae-=8*ve,re.ResvSize-=8*ve,Ae.main_data_begin-=ve}Ae.resvDrain_post+=ae,re.ResvSize-=ae}}var q_=X_;function U_(){var N="http://www.mp3dev.org/",re=3,de=98,se=4,Ae=0,ae=93;this.getLameVersion=function(){return re+"."+de+"."+se},this.getLameShortVersion=function(){return re+"."+de+"."+se},this.getLameVeryShortVersion=function(){return"LAME"+re+"."+de+"r"},this.getPsyVersion=function(){return Ae+"."+ae},this.getLameUrl=function(){return N},this.getLameOsBitness=function(){return"32bits"}}var Y_=U_,K_=U.System,$l=U.VbrMode,zc=U.ShortBlock,W_=U.Arrays,Gi=U.new_byte,G_=U.assert;Ya.NUMTOCENTRIES=100,Ya.MAXFRAMESIZE=2880;function Ya(){var N,re,de;this.setModules=function(u,_,v){N=u,re=_,de=v};var se=1,Ae=2,ae=4,ve=8,Pe=Ya.NUMTOCENTRIES,$e=Ya.MAXFRAMESIZE,Y=Pe+4+4+4+4+4,ge=Y+9+1+1+8+1+1+3+1+1+2+4+2+2,B=128,O=64,H=32,i=null,z="Xing",G="Info",j=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function h(u,_){if(u.nVbrNumFrames++,u.sum+=_,u.seen++,!(u.seen<u.want)&&(u.pos<u.size&&(u.bag[u.pos]=u.sum,u.pos++,u.seen=0),u.pos==u.size)){for(var v=1;v<u.size;v+=2)u.bag[v/2]=u.bag[v];u.want*=2,u.pos/=2}}function R(u,_){if(!(u.pos<=0))for(var v=1;v<Pe;++v){var P=v/Pe,ue,q,Q=0|Math.floor(P*u.pos);Q>u.pos-1&&(Q=u.pos-1),ue=u.bag[Q],q=u.sum;var c=0|256*ue/q;c>255&&(c=255),_[v]=255&c}}this.addVbrFrame=function(u){var _=u.internal_flags,v=Tables.bitrate_table[u.version][_.bitrate_index];G_(_.VBR_seek_table.bag!=null),h(_.VBR_seek_table,v)};function I(u,_){var v=u[_+0]&255;return v<<=8,v|=u[_+1]&255,v<<=8,v|=u[_+2]&255,v<<=8,v|=u[_+3]&255,v}function k(u,_,v){u[_+0]=255&(v>>24&255),u[_+1]=255&(v>>16&255),u[_+2]=255&(v>>8&255),u[_+3]=255&(v&255)}function F(u,_,v){u[_+0]=255&(v>>8&255),u[_+1]=255&(v&255)}function l(u,_){return new String(u,_,z.length(),i).equals(z)||new String(u,_,G.length(),i).equals(G)}function A(u,_,v){return 255&(u<<_|v&~(-1<<_))}function y(u,_){var v=u.internal_flags;_[0]=A(_[0],8,255),_[1]=A(_[1],3,7),_[1]=A(_[1],1,u.out_samplerate<16e3?0:1),_[1]=A(_[1],1,u.version),_[1]=A(_[1],2,1),_[1]=A(_[1],1,u.error_protection?0:1),_[2]=A(_[2],4,v.bitrate_index),_[2]=A(_[2],2,v.samplerate_index),_[2]=A(_[2],1,0),_[2]=A(_[2],1,u.extension),_[3]=A(_[3],2,u.mode.ordinal()),_[3]=A(_[3],2,v.mode_ext),_[3]=A(_[3],1,u.copyright),_[3]=A(_[3],1,u.original),_[3]=A(_[3],2,u.emphasis),_[0]=255;var P=255&(_[1]&241),ue;u.version==1?ue=B:u.out_samplerate<16e3?ue=H:ue=O,u.VBR==$l.vbr_off&&(ue=u.brate);var q;u.free_format?q=0:q=255&16*N.BitrateIndex(ue,u.version,u.out_samplerate),u.version==1?(_[1]=255&(P|10),P=255&(_[2]&13),_[2]=255&(q|P)):(_[1]=255&(P|2),P=255&(_[2]&13),_[2]=255&(q|P))}this.getVbrTag=function(u){var _=new VBRTagData,v=0;_.flags=0;var P=u[v+1]>>3&1,ue=u[v+2]>>2&3,q=u[v+3]>>6&3,Q=u[v+2]>>4&15;if(Q=Tables.bitrate_table[P][Q],u[v+1]>>4==14?_.samprate=Tables.samplerate_table[2][ue]:_.samprate=Tables.samplerate_table[P][ue],P!=0?q!=3?v+=36:v+=21:q!=3?v+=21:v+=13,!l(u,v))return null;v+=4,_.hId=P;var c=_.flags=I(u,v);if(v+=4,c&se&&(_.frames=I(u,v),v+=4),c&Ae&&(_.bytes=I(u,v),v+=4),c&ae){if(_.toc!=null)for(var p=0;p<Pe;p++)_.toc[p]=u[v+p];v+=Pe}_.vbrScale=-1,c&ve&&(_.vbrScale=I(u,v),v+=4),_.headersize=(P+1)*72e3*Q/_.samprate,v+=21;var fe=u[v+0]<<4;fe+=u[v+1]>>4;var pe=(u[v+1]&15)<<8;return pe+=u[v+2]&255,(fe<0||fe>3e3)&&(fe=-1),(pe<0||pe>3e3)&&(pe=-1),_.encDelay=fe,_.encPadding=pe,_},this.InitVbrTag=function(u){var _=u.internal_flags,v;u.version==1?v=B:u.out_samplerate<16e3?v=H:v=O,u.VBR==$l.vbr_off&&(v=u.brate);var P=(u.version+1)*72e3*v/u.out_samplerate,ue=_.sideinfo_len+ge;if(_.VBR_seek_table.TotalFrameSize=P,P<ue||P>$e){u.bWriteVbrTag=!1;return}_.VBR_seek_table.nVbrNumFrames=0,_.VBR_seek_table.nBytesWritten=0,_.VBR_seek_table.sum=0,_.VBR_seek_table.seen=0,_.VBR_seek_table.want=1,_.VBR_seek_table.pos=0,_.VBR_seek_table.bag==null&&(_.VBR_seek_table.bag=new int[400],_.VBR_seek_table.size=400);var q=Gi($e);y(u,q);for(var Q=_.VBR_seek_table.TotalFrameSize,c=0;c<Q;++c)re.add_dummy_byte(u,q[c]&255,1)};function d(u,_){var v=_^u;return _=_>>8^j[v&255],_}this.updateMusicCRC=function(u,_,v,P){for(var ue=0;ue<P;++ue)u[0]=d(_[v+ue],u[0])};function w(u,_,v,P,ue){var q=u.internal_flags,Q=0,c=u.encoder_delay,p=u.encoder_padding,fe=100-10*u.VBR_q-u.quality,pe=de.getLameVeryShortVersion(),Le,We=0,Ve,Ye=[1,5,3,2,4,0,3],vt=0|(u.lowpassfreq/100+.5>255?255:u.lowpassfreq/100+.5),st=0,qe=0,Ft=0,yn=u.internal_flags.noise_shaping,It=0,en=0,tn=0,un=0,En=0,Vr=(u.exp_nspsytune&1)!=0,yr=(u.exp_nspsytune&2)!=0,Un=!1,Er=!1,Xs=u.internal_flags.nogap_total,bs=u.internal_flags.nogap_current,ir=u.ATHtype,qs=0,ts;switch(u.VBR){case vbr_abr:ts=u.VBR_mean_bitrate_kbps;break;case vbr_off:ts=u.brate;break;default:ts=u.VBR_min_bitrate_kbps}switch(u.VBR.ordinal()<Ye.length?Le=Ye[u.VBR.ordinal()]:Le=0,Ve=16*We+Le,q.findReplayGain&&(q.RadioGain>510&&(q.RadioGain=510),q.RadioGain<-510&&(q.RadioGain=-510),qe=8192,qe|=3072,q.RadioGain>=0?qe|=q.RadioGain:(qe|=512,qe|=-q.RadioGain)),q.findPeakSample&&(st=Math.abs(0|q.PeakSample/32767*Math.pow(2,23)+.5)),Xs!=-1&&(bs>0&&(Er=!0),bs<Xs-1&&(Un=!0)),qs=ir+((Vr?1:0)<<4)+((yr?1:0)<<5)+((Un?1:0)<<6)+((Er?1:0)<<7),fe<0&&(fe=0),u.mode){case MONO:It=0;break;case STEREO:It=1;break;case DUAL_CHANNEL:It=2;break;case JOINT_STEREO:u.force_ms?It=4:It=3;break;case NOT_SET:default:It=7;break}u.in_samplerate<=32e3?tn=0:u.in_samplerate==48e3?tn=2:u.in_samplerate>48e3?tn=3:tn=1,(u.short_blocks==zc.short_block_forced||u.short_blocks==zc.short_block_dispensed||u.lowpassfreq==-1&&u.highpassfreq==-1||u.scale_left<u.scale_right||u.scale_left>u.scale_right||u.disable_reservoir&&u.brate<320||u.noATH||u.ATHonly||ir==0||u.in_samplerate<=32e3)&&(en=1),un=yn+(It<<2)+(en<<5)+(tn<<6),En=q.nMusicCRC,k(v,P+Q,fe),Q+=4;for(var or=0;or<9;or++)v[P+Q+or]=255&pe.charAt(or);Q+=9,v[P+Q]=255&Ve,Q++,v[P+Q]=255&vt,Q++,k(v,P+Q,st),Q+=4,F(v,P+Q,qe),Q+=2,F(v,P+Q,Ft),Q+=2,v[P+Q]=255&qs,Q++,ts>=255?v[P+Q]=255:v[P+Q]=255&ts,Q++,v[P+Q]=255&c>>4,v[P+Q+1]=255&(c<<4)+(p>>8),v[P+Q+2]=255&p,Q+=3,v[P+Q]=255&un,Q++,v[P+Q++]=0,F(v,P+Q,u.preset),Q+=2,k(v,P+Q,_),Q+=4,F(v,P+Q,En),Q+=2;for(var da=0;da<Q;da++)ue=d(v[P+da],ue);return F(v,P+Q,ue),Q+=2,Q}function x(u){u.seek(0);var _=Gi(10);u.readFully(_);var v;return new String(_,"ISO-8859-1").startsWith("ID3")?v=0:v=((_[6]&127)<<21|(_[7]&127)<<14|(_[8]&127)<<7|_[9]&127)+_.length,v}this.getLameTagFrame=function(u,_){var v=u.internal_flags;if(!u.bWriteVbrTag||v.Class_ID!=Xt.LAME_ID||v.VBR_seek_table.pos<=0)return 0;if(_.length<v.VBR_seek_table.TotalFrameSize)return v.VBR_seek_table.TotalFrameSize;W_.fill(_,0,v.VBR_seek_table.TotalFrameSize,0),y(u,_);var P=Gi(Pe);if(u.free_format)for(var ue=1;ue<Pe;++ue)P[ue]=255&255*ue/100;else R(v.VBR_seek_table,P);var q=v.sideinfo_len;u.error_protection&&(q-=2),u.VBR==$l.vbr_off?(_[q++]=255&G.charAt(0),_[q++]=255&G.charAt(1),_[q++]=255&G.charAt(2),_[q++]=255&G.charAt(3)):(_[q++]=255&z.charAt(0),_[q++]=255&z.charAt(1),_[q++]=255&z.charAt(2),_[q++]=255&z.charAt(3)),k(_,q,se+Ae+ae+ve),q+=4,k(_,q,v.VBR_seek_table.nVbrNumFrames),q+=4;var Q=v.VBR_seek_table.nBytesWritten+v.VBR_seek_table.TotalFrameSize;k(_,q,0|Q),q+=4,K_.arraycopy(P,0,_,q,P.length),q+=P.length,u.error_protection&&re.CRC_writeheader(v,_);for(var c=0,ue=0;ue<q;ue++)c=d(_[ue],c);return q+=w(u,Q,_,q,c),v.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(u,_){var v=u.internal_flags;if(v.VBR_seek_table.pos<=0||(_.seek(_.length()),_.length()==0))return-1;var P=x(_);_.seek(P);var ue=Gi($e),q=getLameTagFrame(u,ue);return q>ue.length?-1:(q<1||_.write(ue,0,q),0)}}var z_=Ya,Qc=U.new_byte,Q_=U.assert,Xt=O_,Z_=P_,Ka=$n,J_=_s,e2=j_,t2=Pl,n2=q_,bn=Ze,es=ms;function r2(){this.setModules=function(N,re){}}function s2(){this.setModules=function(N,re,de){}}function a2(){}function i2(){this.setModules=function(N,re){}}function o2(N,re,de){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),N=1,re=44100,de=128);var se=new Xt,Ae=new r2,ae=new Ka,ve=new es,Pe=new Z_,$e=new J_,Y=new e2,ge=new z_,B=new Y_,O=new i2,H=new n2,i=new t2,z=new s2,G=new a2;se.setModules(ae,ve,Pe,$e,Y,ge,B,O,G),ve.setModules(ae,G,B,ge),O.setModules(ve,B),Pe.setModules(se),Y.setModules(ve,H,$e,i),$e.setModules(i,H,se.enc.psy),H.setModules(ve),i.setModules($e),ge.setModules(se,ve,B),Ae.setModules(z,G),z.setModules(B,O,Pe);var j=se.lame_init();j.num_channels=N,j.in_samplerate=re,j.brate=de,j.mode=bn.STEREO,j.quality=3,j.bWriteVbrTag=!1,j.disable_reservoir=!0,j.write_id3tag_automatic=!1,se.lame_init_params(j);var h=1152,R=0|1.25*h+7200,I=Qc(R);this.encodeBuffer=function(k,F){N==1&&(F=k),Q_(k.length==F.length),k.length>h&&(h=k.length,R=0|1.25*h+7200,I=Qc(R));var l=se.lame_encode_buffer(j,k,F,k.length,I,0,R);return new Int8Array(I.subarray(0,l))},this.flush=function(){var k=se.lame_encode_flush(j,I,0,R);return new Int8Array(I.subarray(0,k))}}function zi(N){return N.charCodeAt(0)<<24|N.charCodeAt(1)<<16|N.charCodeAt(2)<<8|N.charCodeAt(3)}zi("RIFF"),zi("WAVE"),zi("fmt "),zi("data");var l2=o2,Zc=function(N,re){if(!(N instanceof re))throw new TypeError("Cannot call a class as a function")},Jc=function(){function N(re,de){for(var se=0;se<de.length;se++){var Ae=de[se];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(re,Ae.key,Ae)}}return function(re,de,se){return de&&N(re.prototype,de),se&&N(re,se),re}}(),c2=function(){function N(re){Zc(this,N),this.config={sampleRate:44100,bitRate:128},Object.assign(this.config,re),this.mp3Encoder=new l2(1,this.config.sampleRate,this.config.bitRate),this.maxSamples=1152,this.samplesMono=null,this.clearBuffer()}return Jc(N,[{key:"clearBuffer",value:function(){this.dataBuffer=[]}},{key:"appendToBuffer",value:function(de){this.dataBuffer.push(new Int8Array(de))}},{key:"floatTo16BitPCM",value:function(de,se){for(var Ae=0;Ae<de.length;Ae++){var ae=Math.max(-1,Math.min(1,de[Ae]));se[Ae]=ae<0?ae*32768:ae*32767}}},{key:"convertBuffer",value:function(de){var se=new Float32Array(de),Ae=new Int16Array(de.length);return this.floatTo16BitPCM(se,Ae),Ae}},{key:"encode",value:function(de){this.samplesMono=this.convertBuffer(de);for(var se=this.samplesMono.length,Ae=0;se>=0;Ae+=this.maxSamples){var ae=this.samplesMono.subarray(Ae,Ae+this.maxSamples),ve=this.mp3Encoder.encodeBuffer(ae);this.appendToBuffer(ve),se-=this.maxSamples}}},{key:"finish",value:function(){return this.appendToBuffer(this.mp3Encoder.flush()),this.dataBuffer}}]),N}(),u2=function(){function N(re){Zc(this,N),this.config={bitRate:128,startRecordingAt:300,deviceId:null},this.activeStream=null,this.context=null,this.microphone=null,this.processor=null,this.startTime=0,Object.assign(this.config,re)}return Jc(N,[{key:"addMicrophoneListener",value:function(de){var se=this;this.activeStream=de,this.timerToStart=setTimeout(function(){delete se.timerToStart},this.config.startRecordingAt),this.microphone=this.context.createMediaStreamSource(de),this.processor=this.context.createScriptProcessor(0,1,1),this.processor.onaudioprocess=function(Ae){se.timerToStart||se.lameEncoder.encode(Ae.inputBuffer.getChannelData(0))},this.microphone.connect(this.processor),this.processor.connect(this.context.destination)}},{key:"stop",value:function(){return this.processor&&this.microphone&&(this.microphone.disconnect(),this.processor.disconnect(),this.context&&this.context.state!=="closed"&&this.context.close(),this.processor.onaudioprocess=null,this.activeStream.getAudioTracks().forEach(function(de){return de.stop()})),this}},{key:"start",value:function(){var de=this,se=window.AudioContext||window.webkitAudioContext;this.context=new se,this.config.sampleRate=this.context.sampleRate,this.lameEncoder=new c2(this.config);var Ae=this.config.deviceId?{deviceId:{exact:this.config.deviceId}}:!0;return new Promise(function(ae,ve){navigator.mediaDevices.getUserMedia({audio:Ae}).then(function(Pe){de.addMicrophoneListener(Pe),ae(Pe)}).catch(function(Pe){ve(Pe)})})}},{key:"getMp3",value:function(){var de=this,se=this.lameEncoder.finish();return new Promise(function(Ae,ae){se.length===0?ae(new Error("No buffer to send")):(Ae([se,new Blob(se,{type:"audio/mp3"})]),de.lameEncoder.clearBuffer())})}}]),N}();return u2})})(od);var e6=od.exports;const t6=J5(e6),Ra="4.68.4";let R1=!1,Ai,ld,cd,q0,ud,fd,hd,dd,_d;function n6(e,t={auto:!1}){if(R1)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(Ai)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${Ai}'\``);R1=t.auto,Ai=e.kind,ld=e.fetch,cd=e.FormData,q0=e.File,ud=e.ReadableStream,fd=e.getMultipartRequestOptions,hd=e.getDefaultAgent,dd=e.fileFromPath,_d=e.isFsReadStream}class r6{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function s6({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,s,a;try{n=fetch,r=Request,s=Response,a=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${t}`)}return{kind:"web",fetch:n,Request:r,Response:s,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(o,f)=>({...f,body:new r6(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}Ai||n6(s6(),{auto:!0});class oa{constructor(){this.buffer=[],this.trailingCR=!1}decode(t){let n=this.decodeText(t);if(this.trailingCR&&(n="\r"+n,this.trailingCR=!1),n.endsWith("\r")&&(this.trailingCR=!0,n=n.slice(0,-1)),!n)return[];const r=oa.NEWLINE_CHARS.has(n[n.length-1]||"");let s=n.split(oa.NEWLINE_REGEXP);return r&&s.pop(),s.length===1&&!r?(this.buffer.push(s[0]),[]):(this.buffer.length>0&&(s=[this.buffer.join("")+s[0],...s.slice(1)],this.buffer=[]),r||(this.buffer=[s.pop()||""]),s)}decodeText(t){if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new Pt(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new Pt(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new Pt("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const t=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,t}}oa.NEWLINE_CHARS=new Set([`
`,"\r"]);oa.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class Wr{constructor(t,n){this.iterator=t,this.controller=n}static fromSSEResponse(t,n){let r=!1;async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const o of a6(t,n))if(!a){if(o.data.startsWith("[DONE]")){a=!0;continue}if(o.event===null){let f;try{f=JSON.parse(o.data)}catch(m){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),m}if(f&&f.error)throw new On(void 0,f.error,void 0,void 0);yield f}else{let f;try{f=JSON.parse(o.data)}catch(m){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),m}if(o.event=="error")throw new On(void 0,f.error,f.message,void 0);yield{event:o.event,data:f}}}a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||n.abort()}}return new Wr(s,n)}static fromReadableStream(t,n){let r=!1;async function*s(){const o=new oa,f=md(t);for await(const m of f)for(const g of o.decode(m))yield g;for(const m of o.flush())yield m}async function*a(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const f of s())o||f&&(yield JSON.parse(f));o=!0}catch(f){if(f instanceof Error&&f.name==="AbortError")return;throw f}finally{o||n.abort()}}return new Wr(a,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const o=r.next();t.push(o),n.push(o)}return a.shift()}});return[new Wr(()=>s(t),this.controller),new Wr(()=>s(n),this.controller)]}toReadableStream(){const t=this;let n;const r=new TextEncoder;return new ud({async start(){n=t[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:o}=await n.next();if(o)return s.close();const f=r.encode(JSON.stringify(a)+`
`);s.enqueue(f)}catch(a){s.error(a)}},async cancel(){var s;await((s=n.return)==null?void 0:s.call(n))}})}}async function*a6(e,t){if(!e.body)throw t.abort(),new Pt("Attempted to iterate over a response with no body");const n=new l6,r=new oa,s=md(e.body);for await(const a of i6(s))for(const o of r.decode(a)){const f=n.decode(o);f&&(yield f)}for(const a of r.flush()){const o=n.decode(a);o&&(yield o)}}async function*i6(e){let t=new Uint8Array;for await(const n of e){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let s=new Uint8Array(t.length+r.length);s.set(t),s.set(r,t.length),t=s;let a;for(;(a=o6(t))!==-1;)yield t.slice(0,a),t=t.slice(a)}t.length>0&&(yield t)}function o6(e){for(let r=0;r<e.length-2;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}class l6{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,s]=c6(t,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function c6(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}function md(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const vd=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function",pd=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Ml(e),Ml=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",u6=e=>pd(e)||vd(e)||_d(e);async function bd(e,t,n){var s;if(e=await e,pd(e))return e;if(vd(e)){const a=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const o=Ml(a)?[await a.arrayBuffer()]:[a];return new q0(o,t,n)}const r=await f6(e);if(t||(t=d6(e)??"unknown_file"),!(n!=null&&n.type)){const a=(s=r[0])==null?void 0:s.type;typeof a=="string"&&(n={...n,type:a})}return new q0(r,t,n)}async function f6(e){var n;let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(Ml(e))t.push(await e.arrayBuffer());else if(_6(e))for await(const r of e)t.push(r);else throw new Error(`Unexpected data type: ${typeof e}; constructor: ${(n=e==null?void 0:e.constructor)==null?void 0:n.name}; props: ${h6(e)}`);return t}function h6(e){return`[${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}function d6(e){var t;return d0(e.name)||d0(e.filename)||((t=d0(e.path))==null?void 0:t.split(/[\\/]/).pop())}const d0=e=>{if(typeof e=="string")return e;if(typeof Buffer<"u"&&e instanceof Buffer)return String(e)},_6=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",M1=e=>e&&typeof e=="object"&&e.body&&e[Symbol.toStringTag]==="MultipartBody",Ha=async e=>{const t=await m6(e.body);return fd(t,e)},m6=async e=>{const t=new cd;return await Promise.all(Object.entries(e||{}).map(([n,r])=>U0(t,n,r))),t},U0=async(e,t,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")e.append(t,String(n));else if(u6(n)){const r=await bd(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>U0(e,t+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>U0(e,`${t}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var Pa={},v6=function(e,t,n,r,s){if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n},p6=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},oo;async function yd(e){const{response:t}=e;if(e.options.stream)return Na("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):Wr.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const n=t.headers.get("content-type");if((n==null?void 0:n.includes("application/json"))||(n==null?void 0:n.includes("application/vnd.api+json"))){const a=await t.json();return Na("response",t.status,t.url,t.headers,a),wd(a,t)}const s=await t.text();return Na("response",t.status,t.url,t.headers,s),s}function wd(e,t){return!e||typeof e!="object"||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}class Tl extends Promise{constructor(t,n=yd){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=n}_thenUnwrap(t){return new Tl(this.responsePromise,async n=>wd(t(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class b6{constructor({baseURL:t,maxRetries:n=2,timeout:r=6e5,httpAgent:s,fetch:a}){this.baseURL=t,this.maxRetries=_0("maxRetries",n),this.timeout=_0("timeout",r),this.httpAgent=s,this.fetch=a??ld}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...A6(),...this.authHeaders(t)}}validateHeaders(t,n){}defaultIdempotencyKey(){return`stainless-node-retry-${T6()}`}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(async s=>{const a=s&&Ml(s==null?void 0:s.body)?new DataView(await s.body.arrayBuffer()):(s==null?void 0:s.body)instanceof DataView?s.body:(s==null?void 0:s.body)instanceof ArrayBuffer?new DataView(s.body):s&&ArrayBuffer.isView(s==null?void 0:s.body)?new DataView(s.body.buffer):s==null?void 0:s.body;return{method:t,path:n,...s,body:a}}))}getAPIList(t,n,r){return this.requestAPIList(n,{method:"get",path:t,...r})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}else if(ArrayBuffer.isView(t))return t.byteLength.toString();return null}buildRequest(t,{retryCount:n=0}={}){var te;const{method:r,path:s,query:a,headers:o={}}=t,f=ArrayBuffer.isView(t.body)||t.__binaryRequest&&typeof t.body=="string"?t.body:M1(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,m=this.calculateContentLength(f),g=this.buildURL(s,a);"timeout"in t&&_0("timeout",t.timeout);const S=t.timeout??this.timeout,b=t.httpAgent??this.httpAgent??hd(g),C=S+1e3;typeof((te=b==null?void 0:b.options)==null?void 0:te.timeout)=="number"&&C>(b.options.timeout??0)&&(b.options.timeout=C),this.idempotencyHeader&&r!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=t.idempotencyKey);const V=this.buildHeaders({options:t,headers:o,contentLength:m,retryCount:n});return{req:{method:r,...f&&{body:f},headers:V,...b&&{agent:b},signal:t.signal??null},url:g,timeout:S}}buildHeaders({options:t,headers:n,contentLength:r,retryCount:s}){const a={};r&&(a["content-length"]=r);const o=this.defaultHeaders(t);return I1(a,o),I1(a,n),M1(t.body)&&Ai!=="node"&&delete a["content-type"],O1(o,"x-stainless-retry-count")===void 0&&O1(n,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(s)),this.validateHeaders(a,n),a}async prepareOptions(t){}async prepareRequest(t,{url:n,options:r}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(n=>[...n])):{...t}:{}}makeStatusError(t,n,r,s){return On.generate(t,n,r,s)}request(t,n=null){return new Tl(this.makeRequest(t,n))}async makeRequest(t,n){var b,C;const r=await t,s=r.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(r);const{req:a,url:o,timeout:f}=this.buildRequest(r,{retryCount:s-n});if(await this.prepareRequest(a,{url:o,options:r}),Na("request",o,r,a.headers),(b=r.signal)!=null&&b.aborted)throw new Br;const m=new AbortController,g=await this.fetchWithTimeout(o,a,f,m).catch(Y0);if(g instanceof Error){if((C=r.signal)!=null&&C.aborted)throw new Br;if(n)return this.retryRequest(r,n);throw g.name==="AbortError"?new Rc:new Cl({cause:g})}const S=w6(g.headers);if(!g.ok){if(n&&this.shouldRetry(g)){const U=`retrying, ${n} attempts remaining`;return Na(`response (error; ${U})`,g.status,o,S),this.retryRequest(r,n,S)}const V=await g.text().catch(U=>Y0(U).message),J=E6(V),te=J?void 0:V;throw Na(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,g.status,o,S,te),this.makeStatusError(g.status,J,te,S)}return{response:g,options:r,controller:m}}requestAPIList(t,n){const r=this.makeRequest(n,null);return new y6(this,r,t)}buildURL(t,n){const r=M6(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),s=this.defaultQuery();return Sd(s)||(n={...s,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(t){return Object.entries(t).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Pt(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,n,r,s){const{signal:a,...o}=n||{};a&&a.addEventListener("abort",()=>s.abort());const f=setTimeout(()=>s.abort(),r);return this.getRequestClient().fetch.call(void 0,t,{signal:s.signal,...o}).finally(()=>{clearTimeout(f)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r){let s;const a=r==null?void 0:r["retry-after-ms"];if(a){const f=parseFloat(a);Number.isNaN(f)||(s=f)}const o=r==null?void 0:r["retry-after"];if(o&&!s){const f=parseFloat(o);Number.isNaN(f)?s=Date.parse(o)-Date.now():s=f*1e3}if(!(s&&0<=s&&s<60*1e3)){const f=t.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,f)}return await ji(s),this.makeRequest(t,n-1)}calculateDefaultRetryTimeoutMillis(t,n){const a=n-t,o=Math.min(.5*Math.pow(2,a),8),f=1-Math.random()*.25;return o*f*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Ra}`}}class gd{constructor(t,n,r,s){oo.set(this,void 0),v6(this,oo,t),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new Pt("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in t&&typeof n.query=="object")n.query={...n.query,...t.params};else if("url"in t){const r=[...Object.entries(n.query||{}),...t.url.searchParams.entries()];for(const[s,a]of r)t.url.searchParams.set(s,a);n.query=void 0,n.path=t.url.toString()}return await p6(this,oo,"f").requestAPIList(this.constructor,n)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(oo=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const n of t.getPaginatedItems())yield n}}class y6 extends Tl{constructor(t,n,r){super(n,async s=>new r(t,s.response,await yd(s),s.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const n of t)yield n}}const w6=e=>new Proxy(Object.fromEntries(e.entries()),{get(t,n){const r=n.toString();return t[r.toLowerCase()]||t[r]}}),g6={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},nr=e=>typeof e=="object"&&e!==null&&!Sd(e)&&Object.keys(e).every(t=>xd(g6,t)),S6=()=>{var t;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":C1(Deno.build.os),"X-Stainless-Arch":T1(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":C1(process.platform),"X-Stainless-Arch":T1(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=x6();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function x6(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,o=r[3]||0;return{browser:t,version:`${s}.${a}.${o}`}}}return null}const T1=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",C1=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let B1;const A6=()=>B1??(B1=S6()),E6=e=>{try{return JSON.parse(e)}catch{return}},R6=new RegExp("^(?:[a-z]+:)?//","i"),M6=e=>R6.test(e),ji=e=>new Promise(t=>setTimeout(t,e)),_0=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Pt(`${e} must be an integer`);if(t<0)throw new Pt(`${e} must be a positive integer`);return t},Y0=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},lo=e=>{var t,n,r,s;if(typeof process<"u")return((t=Pa==null?void 0:Pa[e])==null?void 0:t.trim())??void 0;if(typeof Deno<"u")return(s=(r=(n=Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,e))==null?void 0:s.trim()};function Sd(e){if(!e)return!0;for(const t in e)return!1;return!0}function xd(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function I1(e,t){for(const n in t){if(!xd(t,n))continue;const r=n.toLowerCase();if(!r)continue;const s=t[n];s===null?delete e[r]:s!==void 0&&(e[r]=s)}}function Na(e,...t){typeof process<"u"&&(Pa==null?void 0:Pa.DEBUG)==="true"&&console.log(`OpenAI:DEBUG:${e}`,...t)}const T6=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),C6=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",B6=e=>typeof(e==null?void 0:e.get)=="function",O1=(e,t)=>{var r;const n=t.toLowerCase();if(B6(e)){const s=((r=t[0])==null?void 0:r.toUpperCase())+t.substring(1).replace(/([^\w])(\w)/g,(a,o,f)=>o+f.toUpperCase());for(const a of[t,n,t.toUpperCase(),s]){const o=e.get(a);if(o)return o}}for(const[s,a]of Object.entries(e))if(s.toLowerCase()===n)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${t} header, using the first entry.`),a[0]):a};function m0(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}class Pt extends Error{}class On extends Pt{constructor(t,n,r,s){super(`${On.makeMessage(t,n,r)}`),this.status=t,this.headers=s,this.request_id=s==null?void 0:s["x-request-id"];const a=n;this.error=a,this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(t,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&s?`${t} ${s}`:t?`${t} status code (no body)`:s||"(no status code or body)"}static generate(t,n,r,s){if(!t)return new Cl({message:r,cause:Y0(n)});const a=n==null?void 0:n.error;return t===400?new Ad(t,a,r,s):t===401?new Ed(t,a,r,s):t===403?new Rd(t,a,r,s):t===404?new Md(t,a,r,s):t===409?new Td(t,a,r,s):t===422?new Cd(t,a,r,s):t===429?new Bd(t,a,r,s):t>=500?new Id(t,a,r,s):new On(t,a,r,s)}}class Br extends On{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0),this.status=void 0}}class Cl extends On{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),this.status=void 0,n&&(this.cause=n)}}class Rc extends Cl{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Ad extends On{constructor(){super(...arguments),this.status=400}}class Ed extends On{constructor(){super(...arguments),this.status=401}}class Rd extends On{constructor(){super(...arguments),this.status=403}}class Md extends On{constructor(){super(...arguments),this.status=404}}class Td extends On{constructor(){super(...arguments),this.status=409}}class Cd extends On{constructor(){super(...arguments),this.status=422}}class Bd extends On{constructor(){super(...arguments),this.status=429}}class Id extends On{}class Od extends Pt{constructor(){super("Could not parse response content as the length limit was reached")}}class kd extends Pt{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}const K0="RFC3986",W0={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},I6="RFC1738",O6=Array.isArray,Xr=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),v0=1024,k6=(e,t,n,r,s)=>{if(e.length===0)return e;let a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});let o="";for(let f=0;f<a.length;f+=v0){const m=a.length>=v0?a.slice(f,f+v0):a,g=[];for(let S=0;S<m.length;++S){let b=m.charCodeAt(S);if(b===45||b===46||b===95||b===126||b>=48&&b<=57||b>=65&&b<=90||b>=97&&b<=122||s===I6&&(b===40||b===41)){g[g.length]=m.charAt(S);continue}if(b<128){g[g.length]=Xr[b];continue}if(b<2048){g[g.length]=Xr[192|b>>6]+Xr[128|b&63];continue}if(b<55296||b>=57344){g[g.length]=Xr[224|b>>12]+Xr[128|b>>6&63]+Xr[128|b&63];continue}S+=1,b=65536+((b&1023)<<10|m.charCodeAt(S)&1023),g[g.length]=Xr[240|b>>18]+Xr[128|b>>12&63]+Xr[128|b>>6&63]+Xr[128|b&63]}o+=g.join("")}return o};function P6(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function k1(e,t){if(O6(e)){const n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}const N6=Object.prototype.hasOwnProperty,Pd={brackets(e){return String(e)+"[]"},comma:"comma",indices(e,t){return String(e)+"["+t+"]"},repeat(e){return String(e)}},Ur=Array.isArray,L6=Array.prototype.push,Nd=function(e,t){L6.apply(e,Ur(t)?t:[t])},F6=Date.prototype.toISOString,Sn={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:k6,encodeValuesOnly:!1,format:K0,formatter:W0[K0],indices:!1,serializeDate(e){return F6.call(e)},skipNulls:!1,strictNullHandling:!1};function $6(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"}const p0={};function Ld(e,t,n,r,s,a,o,f,m,g,S,b,C,V,J,te,_e,ke){let U=e,Re=ke,he=0,je=!1;for(;(Re=Re.get(p0))!==void 0&&!je;){const Ue=Re.get(e);if(he+=1,typeof Ue<"u"){if(Ue===he)throw new RangeError("Cyclic object value");je=!0}typeof Re.get(p0)>"u"&&(he=0)}if(typeof g=="function"?U=g(t,U):U instanceof Date?U=C==null?void 0:C(U):n==="comma"&&Ur(U)&&(U=k1(U,function(Ue){return Ue instanceof Date?C==null?void 0:C(Ue):Ue})),U===null){if(a)return m&&!te?m(t,Sn.encoder,_e,"key",V):t;U=""}if($6(U)||P6(U)){if(m){const Ue=te?t:m(t,Sn.encoder,_e,"key",V);return[(J==null?void 0:J(Ue))+"="+(J==null?void 0:J(m(U,Sn.encoder,_e,"value",V)))]}return[(J==null?void 0:J(t))+"="+(J==null?void 0:J(String(U)))]}const He=[];if(typeof U>"u")return He;let De;if(n==="comma"&&Ur(U))te&&m&&(U=k1(U,m)),De=[{value:U.length>0?U.join(",")||null:void 0}];else if(Ur(g))De=g;else{const Ue=Object.keys(U);De=S?Ue.sort(S):Ue}const et=f?String(t).replace(/\./g,"%2E"):String(t),Se=r&&Ur(U)&&U.length===1?et+"[]":et;if(s&&Ur(U)&&U.length===0)return Se+"[]";for(let Ue=0;Ue<De.length;++Ue){const be=De[Ue],Be=typeof be=="object"&&typeof be.value<"u"?be.value:U[be];if(o&&Be===null)continue;const it=b&&f?be.replace(/\./g,"%2E"):be,bt=Ur(U)?typeof n=="function"?n(Se,it):Se:Se+(b?"."+it:"["+it+"]");ke.set(e,he);const xt=new WeakMap;xt.set(p0,ke),Nd(He,Ld(Be,bt,n,r,s,a,o,f,n==="comma"&&te&&Ur(U)?null:m,g,S,b,C,V,J,te,_e,xt))}return He}function V6(e=Sn){if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");const t=e.charset||Sn.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=K0;if(typeof e.format<"u"){if(!N6.call(W0,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const r=W0[n];let s=Sn.filter;(typeof e.filter=="function"||Ur(e.filter))&&(s=e.filter);let a;if(e.arrayFormat&&e.arrayFormat in Pd?a=e.arrayFormat:"indices"in e?a=e.indices?"indices":"repeat":a=Sn.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof e.allowDots>"u"?e.encodeDotInKeys?!0:Sn.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Sn.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Sn.allowEmptyArrays,arrayFormat:a,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Sn.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Sn.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Sn.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Sn.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Sn.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Sn.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Sn.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Sn.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Sn.strictNullHandling}}function H6(e,t={}){let n=e;const r=V6(t);let s,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):Ur(r.filter)&&(a=r.filter,s=a);const o=[];if(typeof n!="object"||n===null)return"";const f=Pd[r.arrayFormat],m=f==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const g=new WeakMap;for(let C=0;C<s.length;++C){const V=s[C];r.skipNulls&&n[V]===null||Nd(o,Ld(n[V],V,f,m,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,g))}const S=o.join(r.delimiter);let b=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),S.length>0?b+S:""}class Mc extends gd{constructor(t,n,r,s){super(t,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Nr extends gd{constructor(t,n,r,s){super(t,n,r,s),this.data=r.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const n=Object.fromEntries(t.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var r;const t=this.getPaginatedItems();if(!t.length)return null;const n=(r=t[t.length-1])==null?void 0:r.id;return n?{params:{after:n}}:null}}class Dt{constructor(t){this._client=t}}let Oo=class extends Dt{create(t,n){return this._client.post("/chat/completions",{body:t,...n,stream:t.stream??!1})}};Oo||(Oo={});let ko=class extends Dt{constructor(){super(...arguments),this.completions=new Oo(this._client)}};(function(e){e.Completions=Oo})(ko||(ko={}));class Po extends Dt{create(t,n){return this._client.post("/audio/speech",{body:t,...n,__binaryResponse:!0})}}Po||(Po={});class No extends Dt{create(t,n){return this._client.post("/audio/transcriptions",Ha({body:t,...n}))}}No||(No={});class Lo extends Dt{create(t,n){return this._client.post("/audio/translations",Ha({body:t,...n}))}}Lo||(Lo={});let Fo=class extends Dt{constructor(){super(...arguments),this.transcriptions=new No(this._client),this.translations=new Lo(this._client),this.speech=new Po(this._client)}};(function(e){e.Transcriptions=No,e.Translations=Lo,e.Speech=Po})(Fo||(Fo={}));class $o extends Dt{create(t,n){return this._client.post("/batches",{body:t,...n})}retrieve(t,n){return this._client.get(`/batches/${t}`,n)}list(t={},n){return nr(t)?this.list({},t):this._client.getAPIList("/batches",Tc,{query:t,...n})}cancel(t,n){return this._client.post(`/batches/${t}/cancel`,n)}}class Tc extends Nr{}(function(e){e.BatchesPage=Tc})($o||($o={}));class Vo extends Dt{create(t,n){return this._client.post("/assistants",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/assistants/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/assistants/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(t={},n){return nr(t)?this.list({},t):this._client.getAPIList("/assistants",Cc,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(t,n){return this._client.delete(`/assistants/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Cc extends Nr{}(function(e){e.AssistantsPage=Cc})(Vo||(Vo={}));function P1(e){return typeof e.parse=="function"}const La=e=>(e==null?void 0:e.role)==="assistant",Fd=e=>(e==null?void 0:e.role)==="function",$d=e=>(e==null?void 0:e.role)==="tool";var Tr=function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},on=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},G0,po,bo,oi,li,yo,ci,is,ui,Ho,Do,Ma,Vd;class Hd{constructor(){G0.add(this),this.controller=new AbortController,po.set(this,void 0),bo.set(this,()=>{}),oi.set(this,()=>{}),li.set(this,void 0),yo.set(this,()=>{}),ci.set(this,()=>{}),is.set(this,{}),ui.set(this,!1),Ho.set(this,!1),Do.set(this,!1),Ma.set(this,!1),Tr(this,po,new Promise((t,n)=>{Tr(this,bo,t,"f"),Tr(this,oi,n,"f")}),"f"),Tr(this,li,new Promise((t,n)=>{Tr(this,yo,t,"f"),Tr(this,ci,n,"f")}),"f"),on(this,po,"f").catch(()=>{}),on(this,li,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},on(this,G0,"m",Vd).bind(this))},0)}_connected(){this.ended||(on(this,bo,"f").call(this),this._emit("connect"))}get ended(){return on(this,ui,"f")}get errored(){return on(this,Ho,"f")}get aborted(){return on(this,Do,"f")}abort(){this.controller.abort()}on(t,n){return(on(this,is,"f")[t]||(on(this,is,"f")[t]=[])).push({listener:n}),this}off(t,n){const r=on(this,is,"f")[t];if(!r)return this;const s=r.findIndex(a=>a.listener===n);return s>=0&&r.splice(s,1),this}once(t,n){return(on(this,is,"f")[t]||(on(this,is,"f")[t]=[])).push({listener:n,once:!0}),this}emitted(t){return new Promise((n,r)=>{Tr(this,Ma,!0,"f"),t!=="error"&&this.once("error",r),this.once(t,n)})}async done(){Tr(this,Ma,!0,"f"),await on(this,li,"f")}_emit(t,...n){if(on(this,ui,"f"))return;t==="end"&&(Tr(this,ui,!0,"f"),on(this,yo,"f").call(this));const r=on(this,is,"f")[t];if(r&&(on(this,is,"f")[t]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),t==="abort"){const s=n[0];!on(this,Ma,"f")&&!(r!=null&&r.length)&&Promise.reject(s),on(this,oi,"f").call(this,s),on(this,ci,"f").call(this,s),this._emit("end");return}if(t==="error"){const s=n[0];!on(this,Ma,"f")&&!(r!=null&&r.length)&&Promise.reject(s),on(this,oi,"f").call(this,s),on(this,ci,"f").call(this,s),this._emit("end")}}_emitFinal(){}}po=new WeakMap,bo=new WeakMap,oi=new WeakMap,li=new WeakMap,yo=new WeakMap,ci=new WeakMap,is=new WeakMap,ui=new WeakMap,Ho=new WeakMap,Do=new WeakMap,Ma=new WeakMap,G0=new WeakSet,Vd=function(t){if(Tr(this,Ho,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new Br),t instanceof Br)return Tr(this,Do,!0,"f"),this._emit("abort",t);if(t instanceof Pt)return this._emit("error",t);if(t instanceof Error){const n=new Pt(t.message);return n.cause=t,this._emit("error",n)}return this._emit("error",new Pt(String(t)))};function Dd(e){return(e==null?void 0:e.$brand)==="auto-parseable-response-format"}function Xi(e){return(e==null?void 0:e.$brand)==="auto-parseable-tool"}function D6(e,t){return!t||!jd(t)?{...e,choices:e.choices.map(n=>({...n,message:{...n.message,parsed:null,tool_calls:n.message.tool_calls??[]}}))}:Bc(e,t)}function Bc(e,t){const n=e.choices.map(r=>{var s;if(r.finish_reason==="length")throw new Od;if(r.finish_reason==="content_filter")throw new kd;return{...r,message:{...r.message,tool_calls:((s=r.message.tool_calls)==null?void 0:s.map(a=>X6(t,a)))??[],parsed:r.message.content&&!r.message.refusal?j6(t,r.message.content):null}}});return{...e,choices:n}}function j6(e,t){var n,r;return((n=e.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=e.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function X6(e,t){var r;const n=(r=e.tools)==null?void 0:r.find(s=>{var a;return((a=s.function)==null?void 0:a.name)===t.function.name});return{...t,function:{...t.function,parsed_arguments:Xi(n)?n.$parseRaw(t.function.arguments):n!=null&&n.function.strict?JSON.parse(t.function.arguments):null}}}function q6(e,t){var r;if(!e)return!1;const n=(r=e.tools)==null?void 0:r.find(s=>{var a;return((a=s.function)==null?void 0:a.name)===t.function.name});return Xi(n)||(n==null?void 0:n.function.strict)||!1}function jd(e){var t;return Dd(e.response_format)?!0:((t=e.tools)==null?void 0:t.some(n=>Xi(n)||n.type==="function"&&n.function.strict===!0))??!1}function U6(e){for(const t of e??[]){if(t.type!=="function")throw new Pt(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(t.function.strict!==!0)throw new Pt(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Wn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Nn,z0,jo,Q0,Z0,J0,Xd,ec;const N1=10;class qd extends Hd{constructor(){super(...arguments),Nn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(t){var r;this._chatCompletions.push(t),this._emit("chatCompletion",t);const n=(r=t.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),t}_addMessage(t,n=!0){if("content"in t||(t.content=null),this.messages.push(t),n){if(this._emit("message",t),(Fd(t)||$d(t))&&t.content)this._emit("functionCallResult",t.content);else if(La(t)&&t.function_call)this._emit("functionCall",t.function_call);else if(La(t)&&t.tool_calls)for(const r of t.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new Pt("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),Wn(this,Nn,"m",z0).call(this)}async finalMessage(){return await this.done(),Wn(this,Nn,"m",jo).call(this)}async finalFunctionCall(){return await this.done(),Wn(this,Nn,"m",Q0).call(this)}async finalFunctionCallResult(){return await this.done(),Wn(this,Nn,"m",Z0).call(this)}async totalUsage(){return await this.done(),Wn(this,Nn,"m",J0).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const n=Wn(this,Nn,"m",jo).call(this);n&&this._emit("finalMessage",n);const r=Wn(this,Nn,"m",z0).call(this);r&&this._emit("finalContent",r);const s=Wn(this,Nn,"m",Q0).call(this);s&&this._emit("finalFunctionCall",s);const a=Wn(this,Nn,"m",Z0).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",Wn(this,Nn,"m",J0).call(this))}async _createChatCompletion(t,n,r){const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),Wn(this,Nn,"m",Xd).call(this,n);const a=await t.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Bc(a,n))}async _runChatCompletion(t,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(t,n,r)}async _runFunctions(t,n,r){var C;const s="function",{function_call:a="auto",stream:o,...f}=n,m=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:g=N1}=r||{},S={};for(const V of n.functions)S[V.name||V.function.name]=V;const b=n.functions.map(V=>({name:V.name||V.function.name,parameters:V.parameters,description:V.description}));for(const V of n.messages)this._addMessage(V,!1);for(let V=0;V<g;++V){const te=(C=(await this._createChatCompletion(t,{...f,function_call:a,functions:b,messages:[...this.messages]},r)).choices[0])==null?void 0:C.message;if(!te)throw new Pt("missing message in ChatCompletion response");if(!te.function_call)return;const{name:_e,arguments:ke}=te.function_call,U=S[_e];if(U){if(m&&m!==_e){const He=`Invalid function_call: ${JSON.stringify(_e)}. ${JSON.stringify(m)} requested. Please try again`;this._addMessage({role:s,name:_e,content:He});continue}}else{const He=`Invalid function_call: ${JSON.stringify(_e)}. Available options are: ${b.map(De=>JSON.stringify(De.name)).join(", ")}. Please try again`;this._addMessage({role:s,name:_e,content:He});continue}let Re;try{Re=P1(U)?await U.parse(ke):ke}catch(He){this._addMessage({role:s,name:_e,content:He instanceof Error?He.message:String(He)});continue}const he=await U.function(Re,this),je=Wn(this,Nn,"m",ec).call(this,he);if(this._addMessage({role:s,name:_e,content:je}),m)return}}async _runTools(t,n,r){var V,J,te;const s="tool",{tool_choice:a="auto",stream:o,...f}=n,m=typeof a!="string"&&((V=a==null?void 0:a.function)==null?void 0:V.name),{maxChatCompletions:g=N1}=r||{},S=n.tools.map(_e=>{if(Xi(_e)){if(!_e.$callback)throw new Pt("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:_e.$callback,name:_e.function.name,description:_e.function.description||"",parameters:_e.function.parameters,parse:_e.$parseRaw,strict:!0}}}return _e}),b={};for(const _e of S)_e.type==="function"&&(b[_e.function.name||_e.function.function.name]=_e.function);const C="tools"in n?S.map(_e=>_e.type==="function"?{type:"function",function:{name:_e.function.name||_e.function.function.name,parameters:_e.function.parameters,description:_e.function.description,strict:_e.function.strict}}:_e):void 0;for(const _e of n.messages)this._addMessage(_e,!1);for(let _e=0;_e<g;++_e){const U=(J=(await this._createChatCompletion(t,{...f,tool_choice:a,tools:C,messages:[...this.messages]},r)).choices[0])==null?void 0:J.message;if(!U)throw new Pt("missing message in ChatCompletion response");if(!((te=U.tool_calls)!=null&&te.length))return;for(const Re of U.tool_calls){if(Re.type!=="function")continue;const he=Re.id,{name:je,arguments:He}=Re.function,De=b[je];if(De){if(m&&m!==je){const be=`Invalid tool_call: ${JSON.stringify(je)}. ${JSON.stringify(m)} requested. Please try again`;this._addMessage({role:s,tool_call_id:he,content:be});continue}}else{const be=`Invalid tool_call: ${JSON.stringify(je)}. Available options are: ${Object.keys(b).map(Be=>JSON.stringify(Be)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:he,content:be});continue}let et;try{et=P1(De)?await De.parse(He):He}catch(be){const Be=be instanceof Error?be.message:String(be);this._addMessage({role:s,tool_call_id:he,content:Be});continue}const Se=await De.function(et,this),Ue=Wn(this,Nn,"m",ec).call(this,Se);if(this._addMessage({role:s,tool_call_id:he,content:Ue}),m)return}}}}Nn=new WeakSet,z0=function(){return Wn(this,Nn,"m",jo).call(this).content??null},jo=function(){let t=this.messages.length;for(;t-- >0;){const n=this.messages[t];if(La(n)){const{function_call:r,...s}=n,a={...s,content:n.content??null,refusal:n.refusal??null};return r&&(a.function_call=r),a}}throw new Pt("stream ended without producing a ChatCompletionMessage with role=assistant")},Q0=function(){var t,n;for(let r=this.messages.length-1;r>=0;r--){const s=this.messages[r];if(La(s)&&(s!=null&&s.function_call))return s.function_call;if(La(s)&&((t=s==null?void 0:s.tool_calls)!=null&&t.length))return(n=s.tool_calls.at(-1))==null?void 0:n.function}},Z0=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(Fd(n)&&n.content!=null||$d(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var s;return r.role==="assistant"&&((s=r.tool_calls)==null?void 0:s.some(a=>a.type==="function"&&a.id===n.tool_call_id))}))return n.content}},J0=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(t.completion_tokens+=n.completion_tokens,t.prompt_tokens+=n.prompt_tokens,t.total_tokens+=n.total_tokens);return t},Xd=function(t){if(t.n!=null&&t.n>1)throw new Pt("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},ec=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class Ni extends qd{static runFunctions(t,n,r){const s=new Ni,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(t,n,a)),s}static runTools(t,n,r){const s=new Ni,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(t,n,a)),s}_addMessage(t,n=!0){super._addMessage(t,n),La(t)&&t.content&&this._emit("content",t.content)}}const Ud=1,Yd=2,Kd=4,Wd=8,Gd=16,zd=32,Qd=64,Zd=128,Jd=256,e_=Zd|Jd,t_=Gd|zd|e_|Qd,n_=Ud|Yd|t_,r_=Kd|Wd,Y6=n_|r_,Mn={STR:Ud,NUM:Yd,ARR:Kd,OBJ:Wd,NULL:Gd,BOOL:zd,NAN:Qd,INFINITY:Zd,MINUS_INFINITY:Jd,INF:e_,SPECIAL:t_,ATOM:n_,COLLECTION:r_,ALL:Y6};class K6 extends Error{}class W6 extends Error{}function G6(e,t=Mn.ALL){if(typeof e!="string")throw new TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw new Error(`${e} is empty`);return z6(e.trim(),t)}const z6=(e,t)=>{const n=e.length;let r=0;const s=C=>{throw new K6(`${C} at position ${r}`)},a=C=>{throw new W6(`${C} at position ${r}`)},o=()=>(b(),r>=n&&s("Unexpected end of input"),e[r]==='"'?f():e[r]==="{"?m():e[r]==="["?g():e.substring(r,r+4)==="null"||Mn.NULL&t&&n-r<4&&"null".startsWith(e.substring(r))?(r+=4,null):e.substring(r,r+4)==="true"||Mn.BOOL&t&&n-r<4&&"true".startsWith(e.substring(r))?(r+=4,!0):e.substring(r,r+5)==="false"||Mn.BOOL&t&&n-r<5&&"false".startsWith(e.substring(r))?(r+=5,!1):e.substring(r,r+8)==="Infinity"||Mn.INFINITY&t&&n-r<8&&"Infinity".startsWith(e.substring(r))?(r+=8,1/0):e.substring(r,r+9)==="-Infinity"||Mn.MINUS_INFINITY&t&&1<n-r&&n-r<9&&"-Infinity".startsWith(e.substring(r))?(r+=9,-1/0):e.substring(r,r+3)==="NaN"||Mn.NAN&t&&n-r<3&&"NaN".startsWith(e.substring(r))?(r+=3,NaN):S()),f=()=>{const C=r;let V=!1;for(r++;r<n&&(e[r]!=='"'||V&&e[r-1]==="\\");)V=e[r]==="\\"?!V:!1,r++;if(e.charAt(r)=='"')try{return JSON.parse(e.substring(C,++r-Number(V)))}catch(J){a(String(J))}else if(Mn.STR&t)try{return JSON.parse(e.substring(C,r-Number(V))+'"')}catch{return JSON.parse(e.substring(C,e.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},m=()=>{r++,b();const C={};try{for(;e[r]!=="}";){if(b(),r>=n&&Mn.OBJ&t)return C;const V=f();b(),r++;try{const J=o();Object.defineProperty(C,V,{value:J,writable:!0,enumerable:!0,configurable:!0})}catch(J){if(Mn.OBJ&t)return C;throw J}b(),e[r]===","&&r++}}catch{if(Mn.OBJ&t)return C;s("Expected '}' at end of object")}return r++,C},g=()=>{r++;const C=[];try{for(;e[r]!=="]";)C.push(o()),b(),e[r]===","&&r++}catch{if(Mn.ARR&t)return C;s("Expected ']' at end of array")}return r++,C},S=()=>{if(r===0){e==="-"&&Mn.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e)}catch(V){if(Mn.NUM&t)try{return e[e.length-1]==="."?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch{}a(String(V))}}const C=r;for(e[r]==="-"&&r++;e[r]&&!",]}".includes(e[r]);)r++;r==n&&!(Mn.NUM&t)&&s("Unterminated number literal");try{return JSON.parse(e.substring(C,r))}catch{e.substring(C,r)==="-"&&Mn.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e.substring(C,e.lastIndexOf("e")))}catch(J){a(String(J))}}},b=()=>{for(;r<n&&` 
\r	`.includes(e[r]);)r++};return o()},L1=e=>G6(e,Mn.ALL^Mn.NUM);var Sa=function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},qt=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},gn,as,xa,Ss,b0,co,y0,w0,g0,uo,S0,F1;class Li extends qd{constructor(t){super(),gn.add(this),as.set(this,void 0),xa.set(this,void 0),Ss.set(this,void 0),Sa(this,as,t,"f"),Sa(this,xa,[],"f")}get currentChatCompletionSnapshot(){return qt(this,Ss,"f")}static fromReadableStream(t){const n=new Li(null);return n._run(()=>n._fromReadableStream(t)),n}static createChatCompletion(t,n,r){const s=new Li(n);return s._run(()=>s._runChatCompletion(t,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(t,n,r){var o;super._createChatCompletion;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),qt(this,gn,"m",b0).call(this);const a=await t.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const f of a)qt(this,gn,"m",y0).call(this,f);if((o=a.controller.signal)!=null&&o.aborted)throw new Br;return this._addChatCompletion(qt(this,gn,"m",uo).call(this))}async _fromReadableStream(t,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),qt(this,gn,"m",b0).call(this),this._connected();const s=Wr.fromReadableStream(t,this.controller);let a;for await(const f of s)a&&a!==f.id&&this._addChatCompletion(qt(this,gn,"m",uo).call(this)),qt(this,gn,"m",y0).call(this,f),a=f.id;if((o=s.controller.signal)!=null&&o.aborted)throw new Br;return this._addChatCompletion(qt(this,gn,"m",uo).call(this))}[(as=new WeakMap,xa=new WeakMap,Ss=new WeakMap,gn=new WeakSet,b0=function(){this.ended||Sa(this,Ss,void 0,"f")},co=function(n){let r=qt(this,xa,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},qt(this,xa,"f")[n.index]=r,r)},y0=function(n){var s,a,o,f,m,g,S,b,C,V,J,te,_e,ke,U;if(this.ended)return;const r=qt(this,gn,"m",F1).call(this,n);this._emit("chunk",n,r);for(const Re of n.choices){const he=r.choices[Re.index];Re.delta.content!=null&&((s=he.message)==null?void 0:s.role)==="assistant"&&((a=he.message)!=null&&a.content)&&(this._emit("content",Re.delta.content,he.message.content),this._emit("content.delta",{delta:Re.delta.content,snapshot:he.message.content,parsed:he.message.parsed})),Re.delta.refusal!=null&&((o=he.message)==null?void 0:o.role)==="assistant"&&((f=he.message)!=null&&f.refusal)&&this._emit("refusal.delta",{delta:Re.delta.refusal,snapshot:he.message.refusal}),((m=Re.logprobs)==null?void 0:m.content)!=null&&((g=he.message)==null?void 0:g.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(S=Re.logprobs)==null?void 0:S.content,snapshot:((b=he.logprobs)==null?void 0:b.content)??[]}),((C=Re.logprobs)==null?void 0:C.refusal)!=null&&((V=he.message)==null?void 0:V.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(J=Re.logprobs)==null?void 0:J.refusal,snapshot:((te=he.logprobs)==null?void 0:te.refusal)??[]});const je=qt(this,gn,"m",co).call(this,he);he.finish_reason&&(qt(this,gn,"m",g0).call(this,he),je.current_tool_call_index!=null&&qt(this,gn,"m",w0).call(this,he,je.current_tool_call_index));for(const He of Re.delta.tool_calls??[])je.current_tool_call_index!==He.index&&(qt(this,gn,"m",g0).call(this,he),je.current_tool_call_index!=null&&qt(this,gn,"m",w0).call(this,he,je.current_tool_call_index)),je.current_tool_call_index=He.index;for(const He of Re.delta.tool_calls??[]){const De=(_e=he.message.tool_calls)==null?void 0:_e[He.index];De!=null&&De.type&&((De==null?void 0:De.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(ke=De.function)==null?void 0:ke.name,index:He.index,arguments:De.function.arguments,parsed_arguments:De.function.parsed_arguments,arguments_delta:((U=He.function)==null?void 0:U.arguments)??""}):(De==null||De.type,void 0))}}},w0=function(n,r){var o,f,m;if(qt(this,gn,"m",co).call(this,n).done_tool_calls.has(r))return;const a=(o=n.message.tool_calls)==null?void 0:o[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const g=(m=(f=qt(this,as,"f"))==null?void 0:f.tools)==null?void 0:m.find(S=>S.type==="function"&&S.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:Xi(g)?g.$parseRaw(a.function.arguments):g!=null&&g.function.strict?JSON.parse(a.function.arguments):null})}else a.type},g0=function(n){var s,a;const r=qt(this,gn,"m",co).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const o=qt(this,gn,"m",S0).call(this);this._emit("content.done",{content:n.message.content,parsed:o?o.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(s=n.logprobs)!=null&&s.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(a=n.logprobs)!=null&&a.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},uo=function(){if(this.ended)throw new Pt("stream has ended, this shouldn't happen");const n=qt(this,Ss,"f");if(!n)throw new Pt("request ended without sending any chunks");return Sa(this,Ss,void 0,"f"),Sa(this,xa,[],"f"),Q6(n,qt(this,as,"f"))},S0=function(){var r;const n=(r=qt(this,as,"f"))==null?void 0:r.response_format;return Dd(n)?n:null},F1=function(n){var r,s,a,o;let f=qt(this,Ss,"f");const{choices:m,...g}=n;f?Object.assign(f,g):f=Sa(this,Ss,{...g,choices:[]},"f");for(const{delta:S,finish_reason:b,index:C,logprobs:V=null,...J}of n.choices){let te=f.choices[C];if(te||(te=f.choices[C]={finish_reason:b,index:C,message:{},logprobs:V,...J}),V)if(!te.logprobs)te.logprobs=Object.assign({},V);else{const{content:He,refusal:De,...et}=V;Object.assign(te.logprobs,et),He&&((r=te.logprobs).content??(r.content=[]),te.logprobs.content.push(...He)),De&&((s=te.logprobs).refusal??(s.refusal=[]),te.logprobs.refusal.push(...De))}if(b&&(te.finish_reason=b,qt(this,as,"f")&&jd(qt(this,as,"f")))){if(b==="length")throw new Od;if(b==="content_filter")throw new kd}if(Object.assign(te,J),!S)continue;const{content:_e,refusal:ke,function_call:U,role:Re,tool_calls:he,...je}=S;if(Object.assign(te.message,je),ke&&(te.message.refusal=(te.message.refusal||"")+ke),Re&&(te.message.role=Re),U&&(te.message.function_call?(U.name&&(te.message.function_call.name=U.name),U.arguments&&((a=te.message.function_call).arguments??(a.arguments=""),te.message.function_call.arguments+=U.arguments)):te.message.function_call=U),_e&&(te.message.content=(te.message.content||"")+_e,!te.message.refusal&&qt(this,gn,"m",S0).call(this)&&(te.message.parsed=L1(te.message.content))),he){te.message.tool_calls||(te.message.tool_calls=[]);for(const{index:He,id:De,type:et,function:Se,...Ue}of he){const be=(o=te.message.tool_calls)[He]??(o[He]={});Object.assign(be,Ue),De&&(be.id=De),et&&(be.type=et),Se&&(be.function??(be.function={name:Se.name??"",arguments:""})),Se!=null&&Se.name&&(be.function.name=Se.name),Se!=null&&Se.arguments&&(be.function.arguments+=Se.arguments,q6(qt(this,as,"f"),be)&&(be.function.parsed_arguments=L1(be.function.arguments)))}}}return f},Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("chunk",s=>{const a=n.shift();a?a.resolve(s):t.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,o)=>n.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Wr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Q6(e,t){const{id:n,choices:r,created:s,model:a,system_fingerprint:o,...f}=e,m={...f,id:n,choices:r.map(({message:g,finish_reason:S,index:b,logprobs:C,...V})=>{if(!S)throw new Pt(`missing finish_reason for choice ${b}`);const{content:J=null,function_call:te,tool_calls:_e,...ke}=g,U=g.role;if(!U)throw new Pt(`missing role for choice ${b}`);if(te){const{arguments:Re,name:he}=te;if(Re==null)throw new Pt(`missing function_call.arguments for choice ${b}`);if(!he)throw new Pt(`missing function_call.name for choice ${b}`);return{...V,message:{content:J,function_call:{arguments:Re,name:he},role:U,refusal:g.refusal??null},finish_reason:S,index:b,logprobs:C}}return _e?{...V,index:b,finish_reason:S,logprobs:C,message:{...ke,role:U,content:J,refusal:g.refusal??null,tool_calls:_e.map((Re,he)=>{const{function:je,type:He,id:De,...et}=Re,{arguments:Se,name:Ue,...be}=je||{};if(De==null)throw new Pt(`missing choices[${b}].tool_calls[${he}].id
${fo(e)}`);if(He==null)throw new Pt(`missing choices[${b}].tool_calls[${he}].type
${fo(e)}`);if(Ue==null)throw new Pt(`missing choices[${b}].tool_calls[${he}].function.name
${fo(e)}`);if(Se==null)throw new Pt(`missing choices[${b}].tool_calls[${he}].function.arguments
${fo(e)}`);return{...et,id:De,type:He,function:{...be,name:Ue,arguments:Se}}})}}:{...V,message:{...ke,content:J,role:U,refusal:g.refusal??null},finish_reason:S,index:b,logprobs:C}}),created:s,model:a,object:"chat.completion",...o?{system_fingerprint:o}:{}};return D6(m,t)}function fo(e){return JSON.stringify(e)}class Fa extends Li{static fromReadableStream(t){const n=new Fa(null);return n._run(()=>n._fromReadableStream(t)),n}static runFunctions(t,n,r){const s=new Fa(null),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(t,n,a)),s}static runTools(t,n,r){const s=new Fa(n),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(t,n,a)),s}}let s_=class extends Dt{parse(t,n){return U6(t.tools),this._client.chat.completions.create(t,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>Bc(r,t))}runFunctions(t,n){return t.stream?Fa.runFunctions(this._client,t,n):Ni.runFunctions(this._client,t,n)}runTools(t,n){return t.stream?Fa.runTools(this._client,t,n):Ni.runTools(this._client,t,n)}stream(t,n){return Li.createChatCompletion(this._client,t,n)}};class Xo extends Dt{constructor(){super(...arguments),this.completions=new s_(this._client)}}(function(e){e.Completions=s_})(Xo||(Xo={}));var ht=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},fr=function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},Tn,tc,Yr,wo,Cr,ta,Ca,Js,qo,hr,go,So,Ei,fi,hi,$1,V1,H1,D1,j1,X1,q1;class Ir extends Hd{constructor(){super(...arguments),Tn.add(this),tc.set(this,[]),Yr.set(this,{}),wo.set(this,{}),Cr.set(this,void 0),ta.set(this,void 0),Ca.set(this,void 0),Js.set(this,void 0),qo.set(this,void 0),hr.set(this,void 0),go.set(this,void 0),So.set(this,void 0),Ei.set(this,void 0)}[(tc=new WeakMap,Yr=new WeakMap,wo=new WeakMap,Cr=new WeakMap,ta=new WeakMap,Ca=new WeakMap,Js=new WeakMap,qo=new WeakMap,hr=new WeakMap,go=new WeakMap,So=new WeakMap,Ei=new WeakMap,Tn=new WeakSet,Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):t.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,o)=>n.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const n=new Ir;return n._run(()=>n._fromReadableStream(t)),n}async _fromReadableStream(t,n){var a;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Wr.fromReadableStream(t,this.controller);for await(const o of s)ht(this,Tn,"m",fi).call(this,o);if((a=s.controller.signal)!=null&&a.aborted)throw new Br;return this._addRun(ht(this,Tn,"m",hi).call(this))}toReadableStream(){return new Wr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,n,r,s,a){const o=new Ir;return o._run(()=>o._runToolAssistantStream(t,n,r,s,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(t,n,r,s,a){var g;const o=a==null?void 0:a.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const f={...s,stream:!0},m=await t.submitToolOutputs(n,r,f,{...a,signal:this.controller.signal});this._connected();for await(const S of m)ht(this,Tn,"m",fi).call(this,S);if((g=m.controller.signal)!=null&&g.aborted)throw new Br;return this._addRun(ht(this,Tn,"m",hi).call(this))}static createThreadAssistantStream(t,n,r){const s=new Ir;return s._run(()=>s._threadAssistantStream(t,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(t,n,r,s){const a=new Ir;return a._run(()=>a._runAssistantStream(t,n,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return ht(this,go,"f")}currentRun(){return ht(this,So,"f")}currentMessageSnapshot(){return ht(this,Cr,"f")}currentRunStepSnapshot(){return ht(this,Ei,"f")}async finalRunSteps(){return await this.done(),Object.values(ht(this,Yr,"f"))}async finalMessages(){return await this.done(),Object.values(ht(this,wo,"f"))}async finalRun(){if(await this.done(),!ht(this,ta,"f"))throw Error("Final run was not received.");return ht(this,ta,"f")}async _createThreadAssistantStream(t,n,r){var f;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},o=await t.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const m of o)ht(this,Tn,"m",fi).call(this,m);if((f=o.controller.signal)!=null&&f.aborted)throw new Br;return this._addRun(ht(this,Tn,"m",hi).call(this))}async _createAssistantStream(t,n,r,s){var m;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},f=await t.create(n,o,{...s,signal:this.controller.signal});this._connected();for await(const g of f)ht(this,Tn,"m",fi).call(this,g);if((m=f.controller.signal)!=null&&m.aborted)throw new Br;return this._addRun(ht(this,Tn,"m",hi).call(this))}static accumulateDelta(t,n){for(const[r,s]of Object.entries(n)){if(!t.hasOwnProperty(r)){t[r]=s;continue}let a=t[r];if(a==null){t[r]=s;continue}if(r==="index"||r==="type"){t[r]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(m0(a)&&m0(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(o=>typeof o=="string"||typeof o=="number")){a.push(...s);continue}for(const o of s){if(!m0(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const f=o.index;if(f==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof f!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${f}`);const m=a[f];m==null?a.push(o):a[f]=this.accumulateDelta(m,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${a}`);t[r]=a}return t}_addRun(t){return t}async _threadAssistantStream(t,n,r){return await this._createThreadAssistantStream(n,t,r)}async _runAssistantStream(t,n,r,s){return await this._createAssistantStream(n,t,r,s)}async _runToolAssistantStream(t,n,r,s,a){return await this._createToolAssistantStream(r,t,n,s,a)}}fi=function(t){if(!this.ended)switch(fr(this,go,t,"f"),ht(this,Tn,"m",H1).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ht(this,Tn,"m",q1).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ht(this,Tn,"m",V1).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ht(this,Tn,"m",$1).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},hi=function(){if(this.ended)throw new Pt("stream has ended, this shouldn't happen");if(!ht(this,ta,"f"))throw Error("Final run has not been received");return ht(this,ta,"f")},$1=function(t){const[n,r]=ht(this,Tn,"m",j1).call(this,t,ht(this,Cr,"f"));fr(this,Cr,n,"f"),ht(this,wo,"f")[n.id]=n;for(const s of r){const a=n.content[s.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,n),t.data.delta.content)for(const s of t.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,o=n.content[s.index];if(o&&o.type=="text")this._emit("textDelta",a,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=ht(this,Ca,"f")){if(ht(this,Js,"f"))switch(ht(this,Js,"f").type){case"text":this._emit("textDone",ht(this,Js,"f").text,ht(this,Cr,"f"));break;case"image_file":this._emit("imageFileDone",ht(this,Js,"f").image_file,ht(this,Cr,"f"));break}fr(this,Ca,s.index,"f")}fr(this,Js,n.content[s.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(ht(this,Ca,"f")!==void 0){const s=t.data.content[ht(this,Ca,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,ht(this,Cr,"f"));break;case"text":this._emit("textDone",s.text,ht(this,Cr,"f"));break}}ht(this,Cr,"f")&&this._emit("messageDone",t.data),fr(this,Cr,void 0,"f")}},V1=function(t){const n=ht(this,Tn,"m",D1).call(this,t);switch(fr(this,Ei,n,"f"),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const r=t.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==ht(this,qo,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(ht(this,hr,"f")&&this._emit("toolCallDone",ht(this,hr,"f")),fr(this,qo,a.index,"f"),fr(this,hr,n.step_details.tool_calls[a.index],"f"),ht(this,hr,"f")&&this._emit("toolCallCreated",ht(this,hr,"f")));this._emit("runStepDelta",t.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":fr(this,Ei,void 0,"f"),t.data.step_details.type=="tool_calls"&&ht(this,hr,"f")&&(this._emit("toolCallDone",ht(this,hr,"f")),fr(this,hr,void 0,"f")),this._emit("runStepDone",t.data,n);break}},H1=function(t){ht(this,tc,"f").push(t),this._emit("event",t)},D1=function(t){switch(t.event){case"thread.run.step.created":return ht(this,Yr,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let n=ht(this,Yr,"f")[t.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=t.data;if(r.delta){const s=Ir.accumulateDelta(n,r.delta);ht(this,Yr,"f")[t.data.id]=s}return ht(this,Yr,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ht(this,Yr,"f")[t.data.id]=t.data;break}if(ht(this,Yr,"f")[t.data.id])return ht(this,Yr,"f")[t.data.id];throw new Error("No snapshot available")},j1=function(t,n){let r=[];switch(t.event){case"thread.message.created":return[t.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=t.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in n.content){let o=n.content[a.index];n.content[a.index]=ht(this,Tn,"m",X1).call(this,a,o)}else n.content[a.index]=a,r.push(a);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},X1=function(t,n){return Ir.accumulateDelta(n,t)},q1=function(t){switch(fr(this,So,t.data,"f"),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":fr(this,ta,t.data,"f"),ht(this,hr,"f")&&(this._emit("toolCallDone",ht(this,hr,"f")),fr(this,hr,void 0,"f"));break}};class Uo extends Dt{create(t,n,r){return this._client.post(`/threads/${t}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/threads/${t}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(t,n,r,s){return this._client.post(`/threads/${t}/messages/${n}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(t,n={},r){return nr(n)?this.list(t,{},n):this._client.getAPIList(`/threads/${t}/messages`,Ic,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n,r){return this._client.delete(`/threads/${t}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Ic extends Nr{}(function(e){e.MessagesPage=Ic})(Uo||(Uo={}));class Yo extends Dt{retrieve(t,n,r,s={},a){return nr(s)?this.retrieve(t,n,r,{},s):this._client.get(`/threads/${t}/runs/${n}/steps/${r}`,{query:s,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(t,n,r={},s){return nr(r)?this.list(t,n,{},r):this._client.getAPIList(`/threads/${t}/runs/${n}/steps`,Oc,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class Oc extends Nr{}(function(e){e.RunStepsPage=Oc})(Yo||(Yo={}));class Ko extends Dt{constructor(){super(...arguments),this.steps=new Yo(this._client)}create(t,n,r){const{include:s,...a}=n;return this._client.post(`/threads/${t}/runs`,{query:{include:s},body:a,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}retrieve(t,n,r){return this._client.get(`/threads/${t}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(t,n,r,s){return this._client.post(`/threads/${t}/runs/${n}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(t,n={},r){return nr(n)?this.list(t,{},n):this._client.getAPIList(`/threads/${t}/runs`,kc,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(t,n,r){return this._client.post(`/threads/${t}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const s=await this.create(t,n,r);return await this.poll(t,s.id,r)}createAndStream(t,n,r){return Ir.createAssistantStream(t,this._client.beta.threads.runs,n,r)}async poll(t,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:o}=await this.retrieve(t,n,{...r,headers:{...r==null?void 0:r.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let f=5e3;if(r!=null&&r.pollIntervalMs)f=r.pollIntervalMs;else{const m=o.headers.get("openai-poll-after-ms");if(m){const g=parseInt(m);isNaN(g)||(f=g)}}await ji(f);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(t,n,r){return Ir.createAssistantStream(t,this._client.beta.threads.runs,n,r)}submitToolOutputs(t,n,r,s){return this._client.post(`/threads/${t}/runs/${n}/submit_tool_outputs`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(t,n,r,s){const a=await this.submitToolOutputs(t,n,r,s);return await this.poll(t,a.id,s)}submitToolOutputsStream(t,n,r,s){return Ir.createToolAssistantStream(t,n,this._client.beta.threads.runs,r,s)}}class kc extends Nr{}(function(e){e.RunsPage=kc,e.Steps=Yo,e.RunStepsPage=Oc})(Ko||(Ko={}));class Wo extends Dt{constructor(){super(...arguments),this.runs=new Ko(this._client),this.messages=new Uo(this._client)}create(t={},n){return nr(t)?this.create({},t):this._client.post("/threads",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/threads/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/threads/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n){return this._client.delete(`/threads/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}createAndRun(t,n){return this._client.post("/threads/runs",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:t.stream??!1})}async createAndRunPoll(t,n){const r=await this.createAndRun(t,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(t,n){return Ir.createThreadAssistantStream(t,this._client.beta.threads,n)}}(function(e){e.Runs=Ko,e.RunsPage=kc,e.Messages=Uo,e.MessagesPage=Ic})(Wo||(Wo={}));const Z6=async e=>{const t=await Promise.allSettled(e),n=t.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of t)s.status==="fulfilled"&&r.push(s.value);return r};let Go=class extends Dt{create(t,n,r){return this._client.post(`/vector_stores/${t}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/vector_stores/${t}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(t,n={},r){return nr(n)?this.list(t,{},n):this._client.getAPIList(`/vector_stores/${t}/files`,Bl,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n,r){return this._client.delete(`/vector_stores/${t}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const s=await this.create(t,n,r);return await this.poll(t,s.id,r)}async poll(t,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const a=await this.retrieve(t,n,{...r,headers:s}).withResponse(),o=a.data;switch(o.status){case"in_progress":let f=5e3;if(r!=null&&r.pollIntervalMs)f=r.pollIntervalMs;else{const m=a.response.headers.get("openai-poll-after-ms");if(m){const g=parseInt(m);isNaN(g)||(f=g)}}await ji(f);break;case"failed":case"completed":return o}}}async upload(t,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(t,{file_id:s.id},r)}async uploadAndPoll(t,n,r){const s=await this.upload(t,n,r);return await this.poll(t,s.id,r)}};class Bl extends Nr{}(function(e){e.VectorStoreFilesPage=Bl})(Go||(Go={}));class zo extends Dt{create(t,n,r){return this._client.post(`/vector_stores/${t}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/vector_stores/${t}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(t,n,r){return this._client.post(`/vector_stores/${t}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const s=await this.create(t,n);return await this.poll(t,s.id,r)}listFiles(t,n,r={},s){return nr(r)?this.listFiles(t,n,{},r):this._client.getAPIList(`/vector_stores/${t}/file_batches/${n}/files`,Bl,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}async poll(t,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:o}=await this.retrieve(t,n,{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let f=5e3;if(r!=null&&r.pollIntervalMs)f=r.pollIntervalMs;else{const m=o.headers.get("openai-poll-after-ms");if(m){const g=parseInt(m);isNaN(g)||(f=g)}}await ji(f);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(t,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(s==null?void 0:s.maxConcurrency)??5,o=Math.min(a,n.length),f=this._client,m=n.values(),g=[...r];async function S(C){for(let V of C){const J=await f.files.create({file:V,purpose:"assistants"},s);g.push(J.id)}}const b=Array(o).fill(m).map(S);return await Z6(b),await this.createAndPoll(t,{file_ids:g})}}zo||(zo={});class Qo extends Dt{constructor(){super(...arguments),this.files=new Go(this._client),this.fileBatches=new zo(this._client)}create(t,n){return this._client.post("/vector_stores",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/vector_stores/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/vector_stores/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(t={},n){return nr(t)?this.list({},t):this._client.getAPIList("/vector_stores",Pc,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(t,n){return this._client.delete(`/vector_stores/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Pc extends Nr{}(function(e){e.VectorStoresPage=Pc,e.Files=Go,e.VectorStoreFilesPage=Bl,e.FileBatches=zo})(Qo||(Qo={}));class Zo extends Dt{constructor(){super(...arguments),this.vectorStores=new Qo(this._client),this.chat=new Xo(this._client),this.assistants=new Vo(this._client),this.threads=new Wo(this._client)}}(function(e){e.VectorStores=Qo,e.VectorStoresPage=Pc,e.Chat=Xo,e.Assistants=Vo,e.AssistantsPage=Cc,e.Threads=Wo})(Zo||(Zo={}));class Jo extends Dt{create(t,n){return this._client.post("/completions",{body:t,...n,stream:t.stream??!1})}}Jo||(Jo={});class el extends Dt{create(t,n){return this._client.post("/embeddings",{body:t,...n})}}el||(el={});class tl extends Dt{create(t,n){return this._client.post("/files",Ha({body:t,...n}))}retrieve(t,n){return this._client.get(`/files/${t}`,n)}list(t={},n){return nr(t)?this.list({},t):this._client.getAPIList("/files",Nc,{query:t,...n})}del(t,n){return this._client.delete(`/files/${t}`,n)}content(t,n){return this._client.get(`/files/${t}/content`,{...n,__binaryResponse:!0})}retrieveContent(t,n){return this._client.get(`/files/${t}/content`,{...n,headers:{Accept:"application/json",...n==null?void 0:n.headers}})}async waitForProcessing(t,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let o=await this.retrieve(t);for(;!o.status||!s.has(o.status);)if(await ji(n),o=await this.retrieve(t),Date.now()-a>r)throw new Rc({message:`Giving up on waiting for file ${t} to finish processing after ${r} milliseconds.`});return o}}class Nc extends Mc{}(function(e){e.FileObjectsPage=Nc})(tl||(tl={}));class nl extends Dt{list(t,n={},r){return nr(n)?this.list(t,{},n):this._client.getAPIList(`/fine_tuning/jobs/${t}/checkpoints`,Lc,{query:n,...r})}}class Lc extends Nr{}(function(e){e.FineTuningJobCheckpointsPage=Lc})(nl||(nl={}));class rl extends Dt{constructor(){super(...arguments),this.checkpoints=new nl(this._client)}create(t,n){return this._client.post("/fine_tuning/jobs",{body:t,...n})}retrieve(t,n){return this._client.get(`/fine_tuning/jobs/${t}`,n)}list(t={},n){return nr(t)?this.list({},t):this._client.getAPIList("/fine_tuning/jobs",Fc,{query:t,...n})}cancel(t,n){return this._client.post(`/fine_tuning/jobs/${t}/cancel`,n)}listEvents(t,n={},r){return nr(n)?this.listEvents(t,{},n):this._client.getAPIList(`/fine_tuning/jobs/${t}/events`,$c,{query:n,...r})}}class Fc extends Nr{}class $c extends Nr{}(function(e){e.FineTuningJobsPage=Fc,e.FineTuningJobEventsPage=$c,e.Checkpoints=nl,e.FineTuningJobCheckpointsPage=Lc})(rl||(rl={}));class sl extends Dt{constructor(){super(...arguments),this.jobs=new rl(this._client)}}(function(e){e.Jobs=rl,e.FineTuningJobsPage=Fc,e.FineTuningJobEventsPage=$c})(sl||(sl={}));class al extends Dt{createVariation(t,n){return this._client.post("/images/variations",Ha({body:t,...n}))}edit(t,n){return this._client.post("/images/edits",Ha({body:t,...n}))}generate(t,n){return this._client.post("/images/generations",{body:t,...n})}}al||(al={});class il extends Dt{retrieve(t,n){return this._client.get(`/models/${t}`,n)}list(t){return this._client.getAPIList("/models",Vc,t)}del(t,n){return this._client.delete(`/models/${t}`,n)}}class Vc extends Mc{}(function(e){e.ModelsPage=Vc})(il||(il={}));class ol extends Dt{create(t,n){return this._client.post("/moderations",{body:t,...n})}}ol||(ol={});class ll extends Dt{create(t,n,r){return this._client.post(`/uploads/${t}/parts`,Ha({body:n,...r}))}}ll||(ll={});class cl extends Dt{constructor(){super(...arguments),this.parts=new ll(this._client)}create(t,n){return this._client.post("/uploads",{body:t,...n})}cancel(t,n){return this._client.post(`/uploads/${t}/cancel`,n)}complete(t,n,r){return this._client.post(`/uploads/${t}/complete`,{body:n,...r})}}(function(e){e.Parts=ll})(cl||(cl={}));var a_;class mn extends b6{constructor({baseURL:t=lo("OPENAI_BASE_URL"),apiKey:n=lo("OPENAI_API_KEY"),organization:r=lo("OPENAI_ORG_ID")??null,project:s=lo("OPENAI_PROJECT_ID")??null,...a}={}){if(n===void 0)throw new Pt("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:n,organization:r,project:s,...a,baseURL:t||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&C6())throw new Pt(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new Jo(this),this.chat=new ko(this),this.embeddings=new el(this),this.files=new tl(this),this.images=new al(this),this.audio=new Fo(this),this.moderations=new ol(this),this.models=new il(this),this.fineTuning=new sl(this),this.beta=new Zo(this),this.batches=new $o(this),this.uploads=new cl(this),this._options=o,this.apiKey=n,this.organization=r,this.project=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(t){return H6(t,{arrayFormat:"brackets"})}}a_=mn;mn.OpenAI=a_;mn.DEFAULT_TIMEOUT=6e5;mn.OpenAIError=Pt;mn.APIError=On;mn.APIConnectionError=Cl;mn.APIConnectionTimeoutError=Rc;mn.APIUserAbortError=Br;mn.NotFoundError=Md;mn.ConflictError=Td;mn.RateLimitError=Bd;mn.BadRequestError=Ad;mn.AuthenticationError=Ed;mn.InternalServerError=Id;mn.PermissionDeniedError=Rd;mn.UnprocessableEntityError=Cd;mn.toFile=bd;mn.fileFromPath=dd;(function(e){e.Page=Mc,e.CursorPage=Nr,e.Completions=Jo,e.Chat=ko,e.Embeddings=el,e.Files=tl,e.FileObjectsPage=Nc,e.Images=al,e.Audio=Fo,e.Moderations=ol,e.Models=il,e.ModelsPage=Vc,e.FineTuning=sl,e.Beta=Zo,e.Batches=$o,e.BatchesPage=Tc,e.Uploads=cl})(mn||(mn={}));const J6=_h("PromptStore",()=>({safePrompt:"You will help me to identify any dangerous objects in the environment, only talk objectively. I am a blind person, explain to me briefly where I am now based on the image which is from a camera facing forward, tell me if it is a safe environment for me to walk forward. Do speak as you are in the same environment with me, not just an interpretation of the image. Do not express any of your feeling or my personal status.",singleObject:"Identify the one major object in the provided image, describe the object with important and intereting details since I am blind. Do speak as you are in the same environment with me. The image is my current facing forward viewing angle. Do not express any of your feeling or my personal status.",soscialPerson:"You are provided with an image of a blind person's forward view. Try to describe the facial expression of the main person in the view, so that I can understand the social cues as a blind person and have conversation with the person. Do speak as you are in the same environment with me. Do not express any of your feeling or my personal status.",writeDraw:"You are provided with an image of a blind person's forward view. Try to describe the writing or drawing in center of the image, if you cannot capture any useful details then just guess the likehood of the purpose of the writing or drawing. I am a blind person, so do speak as you are in the same environment with me. Do not express any of your feeling or my personal status. Do not mention anything else besides the writing or drawing"})),i_=_h("ConfigStore",()=>({apiKey:kt("")})),xs={api:null,user:null,ninja:null,async chatImage(e,t){return e==="openai"?(console.log(e),await this.chatImageOpenAI(t)):(console.log("no engine"),"")},async chatImageOpenAI(e){try{return(await this.api.chat.completions.create({model:"gpt-4o",messages:e})).choices[0].message.content}catch(t){return console.log(t),""}},async serviceGetCommand(e,t){const n=[{role:"user",content:"You are a natural language classifier, I will provide you a few sentences, you will classify it into one of the below intentions, you only reply one of the intention text I provided, nothing else, no punctuations."},{role:"assistant",content:"No problem, please provide the sentences."},{role:"user",content:t},{role:"assistant",content:"Got it, please provide the available intentions that you want me to classify the sentences into."},{role:"user",content:JSON.stringify(e)}];return(await this.api.chat.completions.create({model:"gpt-4o",messages:n,temperature:0})).choices[0].message.content},async recordAudioToFile(e){const[t,n]=await e.stop().getMp3();return new File(t,"my_speech.mp3",{type:n.type,lastModified:Date.now()})},async transcribe(e){console.log(e);const t=await this.api.audio.transcriptions.create({model:"whisper-1",file:e,temperature:0});return console.log(t),t.text}},o_=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},e8={class:"flex flex-row justify-evenly overflow-hidden window bg-stone-900 flex-wrap"},t8={class:"my-16 flex flex-col gap-8 px-8"},n8={class:"md:w-1/2 w-full md:h-full h-1/2 border border-gray-300 rounded-lg p-16 overflow-y-scroll no-bar"},r8={key:0,class:"pr-8"},s8={key:1,class:"pl-8 text-right"},a8={__name:"HomeView",setup(e){const t=Ch(),n=J6(),r=i_(),s={};try{s.openai=new mn({apiKey:r.key,dangerouslyAllowBrowser:!0}),xs.api=s.openai}catch(gt){ga({type:"danger",message:gt.message})}const a=kt([]),o=[null],f=kt([null]),m=kt(1),g=kt({prompt:"",image:"",response:""}),S=kt(null),b=async function(gt){if(!o[0]){ga({type:"danger",message:"No image"});return}O5({forbidClick:!0,duration:0});try{if(!o[0]){ga({type:"danger",message:"No image"});return}const Ne=[{role:"user",content:[{type:"text",text:gt},{type:"image_url",image_url:{url:o[0]}}]}],mt=await xs.chatImage("openai",Ne);console.log(mt),mt&&(a.value.push({text:mt,bot:!0}),g.value.prompt=gt,g.value.image=o[0],g.value.response=mt,await De(mt))}catch(Ne){ga({type:"danger",message:Ne.message})}finally{k5()}},C=async function(){Ue.value=!1,await Rt(),je("audio/safe.mp3"),await b(n.safePrompt)},V=async function(){Ue.value=!1,await Rt(),je("audio/identify.mp3"),await b(n.singleObject)},J=async function(){Ue.value=!1,await Rt(),je("audio/social.mp3"),await b(n.soscialPerson)},te=async function(){Ue.value=!1,await Rt(),je("audio/document.mp3"),await b(n.writeDraw)},_e=new t6({bitRate:128}),ke=kt(!1),U=async function(){if(!o[0]){ga({type:"danger",message:"No image"});return}ke.value=!0,await _e.start()},Re=async function(){if(ke.value=!1,!o[0]){_e.stop(),ga({type:"danger",message:"No image"});return}const gt=await xs.recordAudioToFile(_e),Ne=await xs.transcribe(gt);a.value.push({text:Ne,bot:!1}),await he(Ne)},he=async function(gt){const Ne=[{role:"user",content:[{type:"text",text:g.value.prompt},{type:"image_url",image_url:{url:g.value.image}}]},{role:"assistant",content:g.value.response},{role:"user",content:gt}],mt=await xs.chatImage("openai",Ne);console.log(mt),mt&&(a.value.push({text:mt,bot:!0}),await De(mt))},je=function(gt){const Ne=new Audio(gt);S.value=Ne,Ne.playbackRate=m.value,Ne.addEventListener("ended",function(){Ne.pause(),Ne.currentTime=0,console.log("done")}),Ne.play()},He=function(){S.value&&(S.value.pause(),S.value.currentTime=0,S.value=null)},De=async function(gt){const mt=(await s.openai.audio.speech.create({model:"tts-1",voice:"nova",input:gt,response_format:"mp3"})).body.getReader();let lt=[],E=!1;for(;!E;){const{done:W,value:Ie}=await mt.read();if(W){E=!0;break}lt.push(Ie)}const sr=new Blob(lt,{type:"audio/mpeg"}),dn=URL.createObjectURL(sr);console.log(dn),f.value[0]=dn,je(dn)},et=function(){f.value[0]&&je(f.value[0])},Se=["move around","identify object","distinguish facial expression","recognize the document in front of you"],Ue=kt(!1),be=async function(){g.value={prompt:"",image:"",response:""},await Rt(),ke.value=!0,Ue.value=!0,await _e.start()},Be=async function(){ke.value=!1,Ue.value=!1;const gt=await xs.recordAudioToFile(_e),Ne=await xs.transcribe(gt);a.value.push({text:Ne,bot:!1});const mt=await xs.serviceGetCommand(Se,Ne),lt=Se.findIndex(E=>E===mt);console.log(mt),console.log(lt),lt>-1&&(lt===0&&(je("audio/safe.mp3"),await b(n.safePrompt)),lt===1&&(je("audio/identify.mp3"),await b(n.singleObject)),lt===2&&(je("audio/social.mp3"),await b(n.soscialPerson)),lt===3&&(je("audio/document.mp3"),await b(n.writeDraw)))},it=async function(){console.log("test")};let bt,xt,Et,dt;const Rt=async function(){xt.width=bt.videoWidth,xt.height=bt.videoHeight,Et.drawImage(bt,0,0,xt.width,xt.height);const gt=xt.toDataURL("image/png");dt.src=gt,o[0]=gt},ln=function(gt){(gt.key==="s"||gt.key==="S")&&C(),(gt.key==="r"||gt.key==="R")&&V(),(gt.key==="p"||gt.key==="P")&&J(),(gt.key==="h"||gt.key==="H")&&te(),(gt.key==="v"||gt.key==="V")&&be()};return ca(()=>{if(!r.key){t.push("/");return}bt=document.getElementById("video"),xt=document.getElementById("canvasElement"),Et=xt.getContext("2d"),dt=document.getElementById("snapshotImage");const gt={video:{width:{ideal:960},height:{ideal:720},facingMode:"environment"}};navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(gt).then(function(Ne){bt.srcObject=Ne,bt.play();const mt=Ne.getVideoTracks()[0].getCapabilities();console.log(mt),a.value.push({text:"Camera started, press the action key anytime, and ask me anything you want to know that is in front of the camera.",bot:!0})}).catch(function(Ne){console.log("Error: "+Ne)}):alert("getUserMedia API is not supported in your browser."),window.addEventListener("keydown",ln),setTimeout(()=>{je("audio/start.mp3")},1e3)}),Vi(()=>{window.removeEventListener("keydown",ln),console.log("onBeforeUnmount")}),(gt,Ne)=>{const mt=Gh,lt=Q5;return Sr(),Ja("div",e8,[zn("div",{class:"md:w-1/2 w-full md:h-full h-1/2 border border-gray-300 rounded-lg flex flex-col items-center overflow-y-scroll no-bar",onClick:Ne[11]||(Ne[11]=E=>it())},[Ne[22]||(Ne[22]=zn("h1",{className:"text-3xl font-bold text-white"},"Camera Feed",-1)),Ne[23]||(Ne[23]=zn("video",{id:"video",width:"400",height:"400",autoplay:""},null,-1)),zn("div",t8,[Ge(mt,{type:"danger",onClick:Ne[0]||(Ne[0]=jr(E=>He(),["stop"]))},{default:Qn(()=>Ne[12]||(Ne[12]=[dr("Stop Talking")])),_:1}),Ge(lt,{modelValue:m.value,"onUpdate:modelValue":Ne[1]||(Ne[1]=E=>m.value=E),step:1,min:1,max:2},null,8,["modelValue"]),Ge(mt,{type:"primary",onClick:Ne[2]||(Ne[2]=jr(E=>C(),["stop"]))},{default:Qn(()=>Ne[13]||(Ne[13]=[dr("Safe Walking (S)")])),_:1}),Ge(mt,{type:"primary",onClick:Ne[3]||(Ne[3]=jr(E=>V(),["stop"]))},{default:Qn(()=>Ne[14]||(Ne[14]=[dr("Recon Object (R)")])),_:1}),Ge(mt,{type:"primary",onClick:Ne[4]||(Ne[4]=jr(E=>J(),["stop"]))},{default:Qn(()=>Ne[15]||(Ne[15]=[dr("Person (P)")])),_:1}),Ge(mt,{type:"primary",onClick:Ne[5]||(Ne[5]=jr(E=>te(),["stop"]))},{default:Qn(()=>Ne[16]||(Ne[16]=[dr("Handwriting (H)")])),_:1}),!ke.value&&g.value.response!==""?(Sr(),ea(mt,{key:0,disabled:g.value.response==="",type:"success",onClick:Ne[6]||(Ne[6]=jr(E=>U(),["stop"]))},{default:Qn(()=>Ne[17]||(Ne[17]=[dr("Continue Conversation (C)")])),_:1},8,["disabled"])):so("",!0),ke.value&&g.value.response!==""?(Sr(),ea(mt,{key:1,type:"warning",onClick:Ne[7]||(Ne[7]=jr(E=>Re(),["stop"]))},{default:Qn(()=>Ne[18]||(Ne[18]=[dr("Stop Question")])),_:1})):so("",!0),Ue.value?so("",!0):(Sr(),ea(mt,{key:2,type:"success",onClick:Ne[8]||(Ne[8]=jr(E=>be(),["stop"]))},{default:Qn(()=>Ne[19]||(Ne[19]=[dr("Voice Command (V)")])),_:1})),ke.value&&Ue.value?(Sr(),ea(mt,{key:3,type:"warning",onClick:Ne[9]||(Ne[9]=jr(E=>Be(),["stop"]))},{default:Qn(()=>Ne[20]||(Ne[20]=[dr("Finish Command (V)")])),_:1})):so("",!0),Ge(mt,{type:"success",onClick:Ne[10]||(Ne[10]=jr(E=>et(),["stop"])),disabled:!f.value[0]},{default:Qn(()=>Ne[21]||(Ne[21]=[dr("Repeat Message")])),_:1},8,["disabled"])]),Ne[24]||(Ne[24]=zn("canvas",{id:"canvasElement",style:{display:"none"}},null,-1)),Ne[25]||(Ne[25]=zn("img",{id:"snapshotImage",alt:"Video Snapshot",width:"400"},null,-1))]),zn("div",n8,[(Sr(!0),Ja(_r,null,y3(a.value,(E,sr)=>(Sr(),Ja("div",{key:sr,class:"border border-gray-600 rounded-md bg-gray-600 text-white p-4 my-4"},[E.bot?(Sr(),Ja("div",r8,[Ne[26]||(Ne[26]=zn("div",{class:"font-bold underline underline-offset-2"},"Bot",-1)),zn("div",null,x0(E.text),1)])):(Sr(),Ja("div",s8,[Ne[27]||(Ne[27]=zn("div",{class:"font-bold underline underline-offset-2"},"User",-1)),zn("div",null,x0(E.text),1)]))]))),128))])])}}},i8=o_(a8,[["__scopeId","data-v-90a1ea12"]]),o8={class:"flex flex-col justify-center items-center overflow-hidden window bg-stone-900 gap-8"},l8={__name:"ConfigView",setup(e){const t=Ch(),n=kt(""),r=i_(),s=function(){r.key=n.value,t.push("/home")};return(a,o)=>{const f=w5,m=F5,g=Gh,S=$5;return Sr(),ea(S,{theme:"dark"},{default:Qn(()=>[zn("div",o8,[Ge(m,{inset:""},{default:Qn(()=>[Ge(f,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=b=>n.value=b),label:"Key"},null,8,["modelValue"])]),_:1}),Ge(g,{type:"primary",onClick:o[1]||(o[1]=b=>s())},{default:Qn(()=>o[2]||(o[2]=[dr("Go")])),_:1})])]),_:1})}}},c8=o_(l8,[["__scopeId","data-v-33f621ac"]]),u8=U4({history:S4("/ChatADTest/"),routes:[{path:"/",name:"config",component:c8},{path:"/home",name:"home",component:i8}]});(function(){if(typeof window>"u")return;var e,t="ontouchstart"in window;document.createTouch||(document.createTouch=function(S,b,C,V,J,te,_e){return new n(b,C,{pageX:V,pageY:J,screenX:te,screenY:_e,clientX:V-window.pageXOffset,clientY:J-window.pageYOffset},0,0)}),document.createTouchList||(document.createTouchList=function(){for(var S=r(),b=0;b<arguments.length;b++)S[b]=arguments[b];return S.length=arguments.length,S}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(S){var b=this;do{if(b.matches(S))return b;b=b.parentElement||b.parentNode}while(b!==null&&b.nodeType===1);return null});var n=function(b,C,V,J,te){J=J||0,te=te||0,this.identifier=C,this.target=b,this.clientX=V.clientX+J,this.clientY=V.clientY+te,this.screenX=V.screenX+J,this.screenY=V.screenY+te,this.pageX=V.pageX+J,this.pageY=V.pageY+te};function r(){var S=[];return S.item=function(b){return this[b]||null},S.identifiedTouch=function(b){return this[b+1]||null},S}var s=!1;function a(S){return function(b){b.type==="mousedown"&&(s=!0),b.type==="mouseup"&&(s=!1),!(b.type==="mousemove"&&!s)&&((b.type==="mousedown"||!e||e&&!e.dispatchEvent)&&(e=b.target),e.closest("[data-no-touch-simulate]")==null&&o(S,b),b.type==="mouseup"&&(e=null))}}function o(S,b){var C=document.createEvent("Event");C.initEvent(S,!0,!0),C.altKey=b.altKey,C.ctrlKey=b.ctrlKey,C.metaKey=b.metaKey,C.shiftKey=b.shiftKey,C.touches=m(b),C.targetTouches=m(b),C.changedTouches=f(b),e.dispatchEvent(C)}function f(S){var b=r();return b.push(new n(e,1,S,0,0)),b}function m(S){return S.type==="mouseup"?r():f(S)}function g(){window.addEventListener("mousedown",a("touchstart"),!0),window.addEventListener("mousemove",a("touchmove"),!0),window.addEventListener("mouseup",a("touchend"),!0)}g.multiTouchOffset=75,t||new g})();const Hc=ch(K4);Hc.use(Hm());Hc.use(u8);Hc.mount("#app");
